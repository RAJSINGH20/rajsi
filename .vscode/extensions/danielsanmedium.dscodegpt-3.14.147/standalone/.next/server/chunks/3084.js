try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="37ba0aea-82fd-4e94-8ecc-95d2767096fd",a._sentryDebugIdIdentifier="sentry-dbid-37ba0aea-82fd-4e94-8ecc-95d2767096fd")}catch(a){}"use strict";exports.id=3084,exports.ids=[3084],exports.modules={5998:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E7:()=>m,Kq:()=>p,R4:()=>n,checkAnthropicAuthStatus:()=>o});var e=c(944);c(7004);var f=c(74688),g=c(13234),h=c(55511),i=c.n(h),j=c(36676),k=a([g]);g=(k.then?(await k)():k)[0];let q=null;async function l(){return q||(q=(await (0,f.S)()).anthropic),q}async function m(){try{let a=await l(),b=function(){let a=i().randomBytes(32).toString("base64url"),b=i().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=i().randomBytes(32).toString("base64url"),d=new URL(a.authorizeUrl);d.searchParams.set("code","true"),d.searchParams.set("client_id",a.clientId),d.searchParams.set("response_type","code"),d.searchParams.set("redirect_uri",a.redirectUri),d.searchParams.set("scope",a.scopes.join(" ")),d.searchParams.set("state",c),d.searchParams.set("code_challenge",b.challenge),d.searchParams.set("code_challenge_method","S256");let e={verifier:b.verifier,state:c,timestamp:Date.now()};return g.Hv.upsert({key:"anthropic-oauth-data",value:JSON.stringify(e)}),{success:!0,authUrl:d.toString(),verifier:b.verifier,state:c}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function n(a){if(!a)return{success:!1,error:"Missing authorization code"};try{let b,c=await l(),[d,e]=a.includes("#")?a.split("#"):[a,null],f=g.Hv.get("anthropic-oauth-data");if(!f)return{success:!1,error:"OAuth session not found. Please start the authentication process again."};try{b=JSON.parse(f)}catch(a){return{success:!1,error:"Invalid OAuth session data"}}if(Date.now()-b.timestamp>6e5)return g.Hv.delete("anthropic-oauth-data"),{success:!1,error:"OAuth session expired. Please try again."};let h={grant_type:"authorization_code",code:d,redirect_uri:c.redirectUri,client_id:c.clientId,code_verifier:b.verifier,state:e||b.state},i=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!i.ok){let a=await i.text();throw Error(`Token exchange failed: ${a}`)}let j=await i.json(),k=await fetch(c.apiKeyUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({})});if(!k.ok){let a=await k.text();throw Error(`API key creation failed: ${a}`)}let m=await k.json();return g.FI.upsert({provider:"Anthropic",apikey:m.raw_key,google_Oauth:JSON.stringify({type:"oauth_generated",key_id:m.id,key_name:m.name,created_at:m.created_at,partial_key_hint:m.partial_key_hint})}),g.Hv.delete("anthropic-oauth-data"),{success:!0,apiKey:m.raw_key,keyName:m.name}}catch(a){return console.error("Error in OAuth callback:",a),g.Hv.delete("anthropic-oauth-data"),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function o(){try{let a=g.FI.getByProvider("Anthropic");if(!a?.apikey)return{authenticated:!1};let b=null;if(a.google_Oauth)try{b=JSON.parse(a.google_Oauth)}catch{}return{authenticated:!0,isOAuthGenerated:b?.type==="oauth_generated",keyName:b?.key_name,keyHint:b?.partial_key_hint}}catch(a){return console.error("Error checking auth status:",a),{authenticated:!1}}}async function p(){try{let a=g.FI.getByProvider("Anthropic");if(a?.google_Oauth)try{let b=JSON.parse(a.google_Oauth);"oauth_generated"===b.type&&g.FI.upsert({provider:"Anthropic",apikey:"",google_Oauth:""})}catch{}return{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}(0,j.D)([m,n,o,p]),(0,e.A)(m,"00b97536b90913c29ba658bcf74b8cb28f49640fb2",null),(0,e.A)(n,"40c2eb8135a72f6637571664db9a6ef35de36f137a",null),(0,e.A)(o,"0045472fa5b0a1b9855e8bf205655770ef75ad3b3e",null),(0,e.A)(p,"007a7f89df6506b1809214bffb53398e7f0af45005",null),d()}catch(a){d(a)}})},6088:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(43084),f=c(3999),g=a([e]);e=(g.then?(await g)():g)[0];let h={context:{secrets:{delete:async a=>await f.A.delete(`${await (0,e.bm)()}/secret/${a}`),store:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/secrets`,{key:a,value:b})},globalState:{update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/globalState`,{key:a,value:b})}},window:{showErrorMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showErrorMessage`,{message:a}),showWarningMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showWarningMessage`,{message:a}),showInformationMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showInformationMessage`,{message:a})},commands:{executeCommand:async a=>await f.A.post(`${await (0,e.bm)()}/executeCommand`,{command:a})},workspace:{getConfiguration:()=>({update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/config`,{key:a,value:b})})},newFileWithCode:async a=>await f.A.post(`${await (0,e.bm)()}/newFileWithCode`,{code:a}),insertCode:async a=>await f.A.post(`${await (0,e.bm)()}/insertCode`,{code:a}),getSelectedText:async()=>(await f.A.get(`${await (0,e.bm)()}/getSelectedText`)).data,getLanguage:async()=>{let a=await f.A.get(`${await (0,e.bm)()}/language`);return a.data.includes("react")?"jsx":a.data},getFileName:async()=>(await f.A.get(`${await (0,e.bm)()}/filename`)).data,getIdeLanguage:async()=>(await f.A.get(`${await (0,e.bm)()}/ideLanguage`)).data,getVersion:async()=>(await f.A.get(`${await (0,e.bm)()}/version`)).data};d()}catch(a){d(a)}})},33295:(a,b,c)=>{c.d(b,{G:()=>q});var d=c(55511),e=c.n(d),f=c(29021),g=c(5230),h=c(81630),i=c(91645),j=c(21820),k=c(33873),l=c.n(k),m=c(79551),n=c(74688);let o=null,p="https://developers.google.com/gemini-code-assist/auth_failure_gemini";class q{constructor(){this.clientInitialized=!1,this.client=new g.OAuth2Client}async ensureOAuthConfig(){o||(o=(await (0,n.S)()).gemini),this.clientInitialized||(this.client=new g.OAuth2Client(o.clientId,o.clientSecret,"http://localhost"),this.client.on("tokens",async a=>{await this.cacheCredentials(a)}),this.clientInitialized=!0)}getCodeGPTCredentialPath(){return l().join(j.homedir(),".codegpt","gemini-oauth.json")}async cacheCredentials(a){let b=this.getCodeGPTCredentialPath();await f.promises.mkdir(l().dirname(b),{recursive:!0});let c=JSON.stringify(a,null,2);await f.promises.writeFile(b,c)}async loadCachedCredentials(){await this.ensureOAuthConfig();try{let a=this.getCodeGPTCredentialPath(),b=await f.promises.readFile(a,"utf-8");this.client.setCredentials(JSON.parse(b));let{token:c}=await this.client.getAccessToken();if(!c)return!1;return await this.client.getTokenInfo(c),!0}catch{return!1}}async clearCachedCredentials(){try{await f.promises.rm(this.getCodeGPTCredentialPath(),{force:!0})}catch{}}getAvailablePort(){return new Promise((a,b)=>{let c=0;try{let d=i.createServer();d.listen(0,()=>{c=d.address().port}),d.on("listening",()=>{d.close(),d.unref()}),d.on("error",a=>b(a)),d.on("close",()=>a(c))}catch(a){b(a)}})}async fetchUserInfo(){try{let{token:a}=await this.client.getAccessToken();if(!a)return{};let b=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)return console.error("Failed to fetch user info:",b.status,b.statusText),{};return await b.json()}catch(a){return console.error("Error retrieving user info:",a),{}}}async authWithWeb(){await this.ensureOAuthConfig();let a=await this.getAvailablePort(),b=`http://localhost:${a}/oauth2callback`,c=e().randomBytes(32).toString("hex");return{authUrl:this.client.generateAuthUrl({client_id:o.clientId,redirect_uri:b,access_type:"offline",scope:o.scopes,state:c}),loginCompletePromise:new Promise((d,e)=>{let f=h.createServer(async(g,h)=>{try{g.url.includes("/oauth2callback")||(h.writeHead(301,{Location:p}),h.end(),e(Error("Unexpected request: "+g.url)));let f=new m.URL(g.url,`http://localhost:${a}`).searchParams;if(f.get("error"))h.writeHead(301,{Location:p}),h.end(),e(Error(`Error during authentication: ${f.get("error")}`));else if(f.get("state")!==c)h.end("State mismatch. Possible CSRF attack"),e(Error("State mismatch. Possible CSRF attack"));else if(f.get("code")){let{tokens:a}=await this.client.getToken({code:f.get("code"),redirect_uri:b});this.client.setCredentials(a),await this.cacheCredentials(a),this.fetchUserInfo().catch(()=>{}),h.writeHead(301,{Location:"https://developers.google.com/gemini-code-assist/auth_success_gemini"}),h.end(),d()}else e(Error("No code found in request"))}catch(a){e(a)}finally{f.close()}});f.listen(a)})}}async getAuthenticatedClient(){return await this.loadCachedCredentials()?this.client:null}async isAuthenticated(){return await this.loadCachedCredentials()}}},43084:(a,b,c)=>{c.a(a,async(a,d)=>{try{let o;c.d(b,{AX:()=>y,BN:()=>Z,Bj:()=>D,CA:()=>ai,CG:()=>as,CZ:()=>r,Ct:()=>G,DH:()=>an,Dk:()=>p,Hu:()=>v,I3:()=>al,IO:()=>ao,JP:()=>U,Jw:()=>t,MP:()=>C,RK:()=>am,S_:()=>aa,So:()=>ac,TG:()=>B,Tq:()=>X,UU:()=>_,Vn:()=>at,WP:()=>O,Ww:()=>W,XQ:()=>ak,Yp:()=>au,_P:()=>R,_R:()=>ar,_S:()=>I,_X:()=>aq,_f:()=>u,aM:()=>K,bm:()=>ag,fm:()=>ae,gn:()=>M,gv:()=>$,hq:()=>E,iJ:()=>L,iR:()=>aj,ju:()=>ah,lG:()=>Y,le:()=>A,m_:()=>F,o0:()=>af,pc:()=>Q,pe:()=>N,ph:()=>ad,s_:()=>w,t2:()=>ab,vE:()=>T,vK:()=>q,vR:()=>J,vV:()=>V,vk:()=>z,wt:()=>x,x6:()=>s,yH:()=>H,zU:()=>P});var e=c(944);c(7004);var f=c(13234),g=c(39040),h=c(6088),i=c(3999),j=c(54777),k=c(31921),l=c(31421),m=c(36676),n=a([f,h]);[f,h]=n.then?(await n)():n;let p=async a=>{i.A.post(`${await ag()}/copy`,{code:a})},q=async()=>{try{let a=await fetch(`${await ag()}/paste`);return await a.text()}catch(a){return console.error("Error pasting text:",a),""}},r=async a=>{i.A.post(`${await ag()}/openUrl`,{url:a})},s=async a=>i.A.post(`${await ag()}/openWebviewUrl`,{url:a}).then(a=>a.data),t=async a=>i.A.post(`${await ag()}/insertCode`,{code:a}).then(a=>a.data),u=async a=>i.A.post(`${await ag()}/insertCodeInTerminal`,{code:a}).then(a=>a.data),v=async(a,b)=>i.A.post(`${await ag()}/config`,{key:a,value:b}).then(a=>a.data),w=async(a,b)=>{f.FI.upsert({provider:b,organization_id:a})},x=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.apikey;return f.FI.upsert({provider:b,apikey:a}),{isFirstConnection:d}},y=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.custom_link;return f.FI.upsert({provider:b,custom_link:a}),{isFirstConnection:d}},z=async a=>{let b=f.FI.getByProvider("Google AI Studio"),c=!b||!b.google_Oauth;return f.FI.upsert({provider:"Google AI Studio",google_Oauth:a}),{ok:!0,error:"",isFirstConnection:c}},A=async(a,b)=>{f.$W.upsert({provider:b,max_tokens:Number(a)})},B=async(a,b)=>{f.$W.upsert({provider:b,temperature:Number(a)})},C=async(a,b)=>{f.$W.upsert({provider:b,memory:Number(a)})},D=async(a,b)=>{f.FI.upsert({provider:b,region:a})},E=async(a,b)=>{f.FI.upsert({provider:b,access_key_id:a})},F=async(a,b)=>{f.FI.upsert({provider:b,secret_access_key:a})},G=async(a,b)=>{f.FI.upsert({provider:b,session_token:a})},H=async a=>i.A.post(`${await ag()}/changeIframeUrl`,{url:a}).then(a=>a.data),I=async a=>(f.DV.upsert({enabled:+!!a}),i.A.post(`${await ag()}/autocompleteEnabled`,{value:+!!a}).then(a=>a.data)),J=async a=>{f.DV.upsert({max_tokens:Number(a)})},K=async a=>{let[b,c]=a.split(" - ");f.DV.upsert({model:c,provider:b})},L=async a=>{f.DV.upsert({delay:Number(a)})},M=async()=>i.A.get(`${await ag()}/cleanCache`).then(a=>a.data),N=async()=>({selectedCode:await i.A.get(`${await ag()}/getSelectedText/full`).then(a=>a.data)}),O=async()=>await h.A.getFileName(),P=async()=>{let a=await new Promise(a=>{(0,l.exec)("ollama ls",b=>{a(!b)})});if(a)return!0;try{let b=await fetch("http://localhost:54112/1/api/ollama/tags");a=200===b.status}catch(b){console.error("Error checking Ollama status:",b),a=!1}return a},Q=async()=>await i.A.get(`${await ag()}/getProjectStructure`).then(a=>a.data),R=async(a,b,c)=>{let d=new URLSearchParams({...a?{filePath:a}:{},...b?{from:b.toString()}:{},...c?{to:c.toString()}:{}});return await i.A.get(`${await ag()}/getFileContent?${d.toString()}`).then(a=>a.data)},S=new Map,T=async()=>{let a=await ag();if(S.has(a))return i.A.get(`${a}/getAllPathsFromProject`).then(b=>{S.set(a,b.data)}).catch(()=>{S.set(a,[])}),S.get(a);let b=await i.A.get(`${a}/getAllPathsFromProject`).then(a=>a.data).catch(()=>[]);return S.set(a,b),b},U=async({filePath:a,content:b})=>await i.A.post(`${await ag()}/writeFileContent`,{filePath:a,content:b}).then(a=>a.data),V=async({folderPath:a})=>await i.A.post(`${await ag()}/createFolder`,{folderPath:a}).then(a=>a.data),W=async({filePath:a})=>{console.log("[deleteFile] Attempting to delete file:",a);try{return(await i.A.post(`${await ag()}/deleteFile`,{filePath:a})).data}catch(b){return b.response?.data?.error||`Failed to delete file: ${a}`}},X=async({filePath:a,absolutePath:b=!1,startLine:c,endLine:d})=>await i.A.post(`${await ag()}/openFile`,{filePath:a,startLine:c,endLine:d,absolutePath:b}).then(a=>a.data),Y=async a=>{let b=await T()||[];return b.length?new j.A(b).search(a,{limit:6}):[]},Z=async()=>{let a=await T()||[];if(!a.length)return[];let b=new Set;for(let c of a){let a=c?.split("/"),d=a?.length>1?a?.pop():c,e=d?.split(".")??[],f=e?.length>1&&e?.pop();f&&b.add(f)}return Array.from(b)},$=async()=>await i.A.get(`${await ag()}/extensionVersion`).then(a=>!1===a.data.ok?(console.error("Error in getExtensionVersion:",a.data.error),null):a.data),_=async({model:a,fromMarketplace:b,graph:c,provider:d})=>{console.log({model:a,fromMarketplace:b,provider:d,graph:c}),await i.A.post(`${await ag()}/model`,{model:a,fromMarketplace:b,provider:d,graph:c})},aa=async a=>(f.mf.upsert({enabled:+!!a}),await i.A.post(`${await ag()}/autoSelect`,{enabled:a}).then(a=>a.data)),ab=async()=>await i.A.get(`${await ag()}/autoSelect`).then(a=>a.data),ac=async a=>{let b=f.$W.getByProvider(a);return b?.memory??10},ad=async(a,b)=>{f.Hv.upsert({key:a,value:b})},ae=async a=>f.Hv.get(a),af=async()=>f.jM.get(),ag=async()=>{let a=await ah();return a.includes("?")&&(a=a.split("?")[0]),console.log({extensionUrl:`http://localhost:${a}`}),`http://localhost:${a}`},ah=async()=>{let a=(await (0,k.b3)()).get("referer");return a&&a.split("/")[3]||"54113"},ai=async()=>{try{let a=await fetch(`${await ag()}/workspaceFolder`);return await a.text()}catch(a){return console.error("Error getting workspace folder:",a),""}},aj=async()=>{try{let a=await ai(),{ok:b}=JSON.parse(a);return!1!==b}catch{return!0}},ak=async({type:a,currentKey:b})=>{let c=f.Hv.getAll().filter(c=>c.key.startsWith(`${a}-`)&&!c.key.startsWith(`${a}-${b}`));c?.forEach(a=>f.Hv.delete(a.key))},al=async()=>{["mention-prompts-all","recommended-codegpt-models-all","agent-default-all","extension-version-all","funnel-all","marketplace-agents-all","marketplace-groups-all","providers-all"].forEach(a=>f.Hv.delete(a))},am=async()=>{if(o)return o;let a=await (0,g.zf)();return o=a.json,a.json},an=async()=>{try{let a=await ah().catch(()=>"54113"),b=await fetch(`http://localhost:${a}/api/codegptplusbeta/me`);if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);let c=await b.json();if(c?.planId==="prod_S3MhTzkaqqx3CG"){let a=await aq();if(a&&a.length>0)return{id:a[0].id,label:a[0].name,image:"",fromMarketplace:!0,description:a[0].name};return null}}catch(a){console.error("Error checking for byok plan:",a)}return await am()},ao=async()=>(await (0,g.GT)()).json,ap="favoritesModels",aq=async()=>await ae(ap)||[],ar=async a=>await ad(ap,a),as=async a=>{let b=f.FI.getByProvider(a);return b?.apikey},at=async a=>{fetch(`${await ag()}/chatLog`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})}).catch(a=>{console.log({e:a})})},au=async()=>{let{checkGeminiAuthStatus:a}=await Promise.resolve().then(c.bind(c,49091)),{checkClaudeCodeAuthStatus:b}=await Promise.resolve().then(c.bind(c,80346)),{checkAnthropicAuthStatus:d}=await Promise.resolve().then(c.bind(c,5998)),e=f.FI.getAll(),g=[];for(let a of e)(a.apikey||a.google_Oauth||a.access_key_id||a.secret_access_key)&&g.push(a.provider);try{let[c,e,f]=await Promise.all([a(),b(),d()]);c.authenticated&&!g.includes("gemini-cli")&&g.push("gemini-cli"),e.authenticated&&!g.includes("claudecode")&&g.push("claudecode"),f.authenticated&&f.isOAuthGenerated&&!g.includes("anthropic")&&g.push("anthropic")}catch(a){console.error("Error checking OAuth status:",a)}return{hasCredentials:g.length>0,providers:g}};(0,m.D)([p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,H,I,J,K,L,N,O,P,Q,R,Y,T,U,Z,$,G,_,M,X,aa,ab,ac,ad,ae,ag,ah,al,ai,aj,ak,am,an,ao,af,at,aq,ar,as,au,V,W]),(0,e.A)(p,"7fb4996fc6b8fb45c23e0cb6c18807ed4097e6fdda",null),(0,e.A)(q,"7f9de8e523984a637918cd002baca7e9fcccaa8a18",null),(0,e.A)(r,"7f5ad8467aac89c08c21fd0e1cf4ecc31aff2df231",null),(0,e.A)(s,"7fd1dcfac79a58ef27f4101f360279c14a370e3b00",null),(0,e.A)(t,"7f6ef45402e952c7fd56adf9179ca8cec7c679fe76",null),(0,e.A)(u,"7f04664cd67d99e6d52e7170d4466b3169f05f9b3a",null),(0,e.A)(v,"7fe6c8700f4c22103b15b76b783f58d9fd6c025a3e",null),(0,e.A)(w,"7f4a62f939cea5e363655629b2ea1ab6d8352fd210",null),(0,e.A)(x,"7f51d30ccd9dd51730a7cf76a5b8f6ae6ccc1c2c56",null),(0,e.A)(y,"7fe375707b950d37d4adf07f99bf3f866507966651",null),(0,e.A)(z,"7fdd192cfa93d409af276c31d8a77b00e4b162c4e9",null),(0,e.A)(A,"7fcba4abe3d0470f2617143947b9fa89e7240d762e",null),(0,e.A)(B,"7f746dcd16c298cfcd286cdb390c830e770d2835f8",null),(0,e.A)(C,"7f0934b45a6865faaefd6905f5d3bd51b573a9082c",null),(0,e.A)(D,"7f095b8477d2d28850841aef123058f5ca8d59b0ec",null),(0,e.A)(E,"7ffc29cc323217f407ca7a2164ea83de4faef75dba",null),(0,e.A)(F,"7feeae42fc2e581f92238e58b2b20ce368a82cfdc8",null),(0,e.A)(H,"7ffa6c010bb04c5d1f265efe1d848fa67e6169634c",null),(0,e.A)(I,"7fa46cef4469c2180938f67e7fcba59cefaa223f2d",null),(0,e.A)(J,"7fd9ba1f4bf9a2761dfb5845b74508bd6871e8dafa",null),(0,e.A)(K,"7f67327b81bcfacb4a6be51a58218ed579159ae5a0",null),(0,e.A)(L,"7f805dd36cdefbf583dc85aa935bdded57dacaf3cc",null),(0,e.A)(N,"7ffb4f1c93136c2724b86a9b6d3e123ad02aafe75b",null),(0,e.A)(O,"7f650a507520ebc5f0557d5e235a11ca4dc5b9abb1",null),(0,e.A)(P,"7fa38096c9579a6f1c6432672b2d130c300e7c426f",null),(0,e.A)(Q,"7f52b8c3ff78602f71b491653101583e0f67801f8c",null),(0,e.A)(R,"7ffa15cfdca9086d0575a18fc4fce91134b1b7a646",null),(0,e.A)(Y,"7f56868f33be8318589f9b3a363ab04adefc272709",null),(0,e.A)(T,"7fb4ed507ec0a38485bc1b232ea7543a189922c68c",null),(0,e.A)(U,"7fd1b346cc2fa02aeb47281393ec2bac1d2c75d1e9",null),(0,e.A)(Z,"7f0a0573a45fe972983faf11a3adfd394667f859cb",null),(0,e.A)($,"7fed6ed4db2dc9ad3dd26995357759c989f2726129",null),(0,e.A)(G,"7fec87fa6ce3b5d38ca2444dd1ed2a116fb621eba8",null),(0,e.A)(_,"7f7bf85cb3c41afcef21448c04f81eb25cbee0d8ba",null),(0,e.A)(M,"7f91127e5204371a7403701ff60138fbc4194b00bd",null),(0,e.A)(X,"7fb8b4795471a1193610fc3da6c18a7fed68c7b09a",null),(0,e.A)(aa,"7fe3d1b12dce47a24bd8abe966ac2f4bedbd7c0ac3",null),(0,e.A)(ab,"7fcb9b22a46504e3fb3cea23103e6e5bac5be54058",null),(0,e.A)(ac,"7ffe591c822640777d667c30993c3640fffa736f63",null),(0,e.A)(ad,"7f8ae93b14600d2b620d0b3526706e0682300d0887",null),(0,e.A)(ae,"7f28d4c4c05f8f3cd10f9267c99a8428b8a600ea8d",null),(0,e.A)(ag,"7f64fd1fa9ad600635c2d933a96c8411db502b30f5",null),(0,e.A)(ah,"7f9b7f743007eea0c2cc8ab6cea47e03b04cf327f8",null),(0,e.A)(al,"7f24f1d27584d3325c0e0ebe1394ccf251718462a1",null),(0,e.A)(ai,"7f7d933322328d147e7578ae77fb43077fe15b4710",null),(0,e.A)(aj,"7f9265462907f5bffa72ee76bd06448f5fdfca5844",null),(0,e.A)(ak,"7f05bec7f62c561b44d1504864c8290f9bf058f785",null),(0,e.A)(am,"7fdc89f85591ac6c18d198d3a7f9860f9069f183ac",null),(0,e.A)(an,"7f83f9a9073010d5ad4b9dc8bde9d587a0ded0e57e",null),(0,e.A)(ao,"7f0e5eb98e076f9567d7832fb4e4e51e1a6ba56100",null),(0,e.A)(af,"7f6998d8d840d838e7ff049084e51dbe7c6cfca919",null),(0,e.A)(at,"7f0413198d87d95d38f1f76e6f62d0a92744143ecc",null),(0,e.A)(aq,"7fc2fff73e317396c07f307f62f2ece5364434296e",null),(0,e.A)(ar,"7fd20b662b49b03a9759f5190ba596007cf855a5de",null),(0,e.A)(as,"7f7b2d84ee4a68b47dc4136bcbe68c7a7b7c087714",null),(0,e.A)(au,"7f7e8cf20da57daeda26c84a404448845d5ceb0c75",null),(0,e.A)(V,"7fa06d7db3b419df86c480e0efb911da974cc744c0",null),(0,e.A)(W,"7f57729d64d7637b519d56ad1996954017be67a4d5",null),d()}catch(a){d(a)}})},49091:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Y:()=>l,checkGeminiAuthStatus:()=>j,w:()=>k});var e=c(944);c(7004);var f=c(33295),g=c(13234),h=c(36676),i=a([g]);g=(i.then?(await i)():i)[0];let m=new Map;async function j(){try{let a=new f.G;return{authenticated:await a.isAuthenticated()}}catch(a){return{authenticated:!1}}}async function k(){try{let a=new f.G;if(await a.isAuthenticated())return{success:!0,message:"Already authenticated"};let{authUrl:b,loginCompletePromise:c}=await a.authWithWeb();return m.set(b,c),setTimeout(()=>{m.delete(b)},3e5),{success:!0,authUrl:b,message:"Open the URL in your browser to authenticate"}}catch(a){return{success:!1,error:a.message}}}async function l(){try{let a=new f.G;return await a.clearCachedCredentials(),g.FI.delete("Gemini CLI"),{success:!0,message:"Credentials cleared successfully"}}catch(a){return{success:!1,error:a.message}}}(0,h.D)([j,k,l]),(0,e.A)(j,"0029e71c75f47836dd830471aee1b40ceeed95be47",null),(0,e.A)(k,"00e808682b90c7b370acf0016c53bc8bab68aaa3f1",null),(0,e.A)(l,"004be05dee3426c5f11d0e66b5066262d7a4db8a17",null),d()}catch(a){d(a)}})},74688:(a,b,c)=>{c.d(b,{S:()=>f});let d=null,e=null;async function f(){if(d)return d;if(e)return e;e=g();try{return d=await e}finally{e=null}}async function g(){try{let a=await fetch("https://storage.codegpt.co/vscode/keys.json",{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw Error(`Failed to fetch OAuth config: ${a.status} ${a.statusText}`);let b=await a.json();return function(a){if(!a.gemini?.clientId||!a.gemini?.clientSecret)throw Error("Invalid OAuth config: missing Gemini credentials");if(!a.anthropic?.clientId)throw Error("Invalid OAuth config: missing Anthropic credentials");if(!a.claude?.clientId)throw Error("Invalid OAuth config: missing Claude credentials")}(b),b}catch(a){throw console.error("Failed to load OAuth configuration:",a),Error("Failed to load OAuth configuration from remote source")}}},80346:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{CW:()=>o,Py:()=>n,QX:()=>r,checkClaudeCodeAuthStatus:()=>p,eI:()=>q,rQ:()=>s});var e=c(944);c(7004);var f=c(43084),g=c(74688),h=c(13234),i=c(55511),j=c.n(i),k=c(36676),l=a([f,h]);[f,h]=l.then?(await l)():l;let t=null;async function m(){return t||(t=(await (0,g.S)()).claude),t}async function n(){try{let a=await m(),b=function(){let a=j().randomBytes(32).toString("base64url"),b=j().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=new URL(a.authorizeUrl);return c.searchParams.set("code","true"),c.searchParams.set("client_id",a.clientId),c.searchParams.set("response_type","code"),c.searchParams.set("redirect_uri",a.redirectUri),c.searchParams.set("scope","org:create_api_key user:profile user:inference"),c.searchParams.set("code_challenge",b.challenge),c.searchParams.set("code_challenge_method","S256"),c.searchParams.set("state",b.verifier),{success:!0,authUrl:c.toString(),verifier:b.verifier}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function o(a,b){if(!a||!b)return{success:!1,error:"Missing code or verifier"};try{let c=await m(),d=a.split("#"),e=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:d[0],state:d[1]||b,grant_type:"authorization_code",client_id:c.clientId,redirect_uri:c.redirectUri,code_verifier:b})});if(!e.ok){let a=await e.text();throw Error(`Failed to exchange code: ${a}`)}let f=await e.json(),g={type:"oauth",refresh:f.refresh_token,access:f.access_token,expires:Date.now()+1e3*f.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(g)}),{success:!0}}catch(a){return console.error("Error in OAuth callback:",a),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function p(){try{let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return{authenticated:!1};try{let b=JSON.parse(a.google_Oauth),c=b.expires&&b.expires>Date.now();return{authenticated:!0,tokenValid:c,expiresAt:b.expires}}catch(a){return console.error("Error parsing OAuth data:",a),{authenticated:!1}}}catch(a){return console.error("Error checking OAuth status:",a),{authenticated:!1}}}async function q(){try{return h.FI.delete("ClaudeCode"),{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}async function r(a){try{let b=await m(),c=await fetch(b.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:a.refresh,client_id:b.clientId})});if(!c.ok){let a=await c.text();throw(0,f.Vn)(JSON.stringify({refreshClaudeCodeTokenError:a},null,2)),Error(`Failed to refresh token: ${a}`)}let d=await c.json(),e={type:"oauth",refresh:d.refresh_token,access:d.access_token,expires:Date.now()+1e3*d.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(e)}),e}catch(a){return console.error("Error refreshing token:",a),null}}async function s(){let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return null;try{let b=JSON.parse(a.google_Oauth);if(b.expires&&b.expires>Date.now())return b.access;if(b.refresh){let a=await r(b);if(a)return a.access}}catch(a){console.error("Error parsing OAuth data:",a)}return null}(0,k.D)([n,o,p,q,r,s]),(0,e.A)(n,"00e3fff982a123db85465983d281c77ea76ac62352",null),(0,e.A)(o,"60d93a9b6ac5bd5ebb66aa237e807b748d3658e394",null),(0,e.A)(p,"0046276cb583cfb92a8869c410771b6c80cc0b23a6",null),(0,e.A)(q,"00ea71ce0a33c30d7902911c704166d3ea29a443d0",null),(0,e.A)(r,"40b2bbdbed0edb9d20d055cf44251b2b61e40a3460",null),(0,e.A)(s,"0015310633b036d93542287af6e1e5c841312dc10a",null),d()}catch(a){d(a)}})}};
//# sourceMappingURL=3084.js.map