try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="e8a8f741-a589-427a-ad06-54a3b3e3ed4b",a._sentryDebugIdIdentifier="sentry-dbid-e8a8f741-a589-427a-ad06-54a3b3e3ed4b")}catch(a){}(()=>{var a={};a.id=7174,a.ids=[7174],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},443:(a,b,c)=>{"use strict";c.d(b,{k:()=>h});var d=c(35674),e=c(2471);let f="AWS_ENDPOINT_URL",g="endpoint_url",h=async a=>(0,d.Z)((a=>({environmentVariableSelector:b=>{let c=b[[f,...a.split(" ").map(a=>a.toUpperCase())].join("_")];if(c)return c;let d=b[f];if(d)return d},configFileSelector:(b,c)=>{if(c&&b.services){let d=c[["services",b.services].join(e.Q)];if(d){let b=d[[a.split(" ").map(a=>a.toLowerCase()).join("_"),g].join(e.Q)];if(b)return b}}let d=b[g];if(d)return d},default:void 0}))(a??""))()},1708:a=>{"use strict";a.exports=require("node:process")},1713:(a,b,c)=>{"use strict";c.d(b,{Q:()=>d});let d=(a,b,c)=>{if(b in a){if("true"===a[b])return!0;if("false"===a[b])return!1;throw Error(`Cannot load ${c} "${b}". Expected "true" or "false", got ${a[b]}.`)}}},2471:(a,b,c)=>{"use strict";c.d(b,{Q:()=>l,p:()=>m});var d=c(33873),e=c(84627);let f=a=>Object.entries(a).filter(([a])=>{let b=a.indexOf(l);return -1!==b&&Object.values(e.I).includes(a.substring(0,b))}).reduce((a,[b,c])=>{let d=b.indexOf(l);return a[b.substring(0,d)===e.I.PROFILE?b.substring(d+1):b]=c,a},{...a.default&&{default:a.default}});var g=c(40819),h=c(4932),i=c(25149),j=c(39122);let k=()=>({}),l=".",m=async(a={})=>{let{filepath:b=process.env.AWS_SHARED_CREDENTIALS_FILE||(0,d.join)((0,h.R)(),".aws","credentials"),configFilepath:c=(0,g.g)()}=a,e=(0,h.R)(),l=b;b.startsWith("~/")&&(l=(0,d.join)(e,b.slice(2)));let m=c;c.startsWith("~/")&&(m=(0,d.join)(e,c.slice(2)));let n=await Promise.all([(0,j.$)(m,{ignoreCache:a.ignoreCache}).then(i.A).then(f).catch(k),(0,j.$)(l,{ignoreCache:a.ignoreCache}).then(i.A).catch(k)]);return{configFile:n[0],credentialsFile:n[1]}}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4601:(a,b,c)=>{"use strict";function d(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}c.d(b,{$:()=>d})},4932:(a,b,c)=>{"use strict";c.d(b,{R:()=>g});var d=c(21820),e=c(33873);let f={},g=()=>{let{HOME:a,USERPROFILE:b,HOMEPATH:c,HOMEDRIVE:g=`C:${e.sep}`}=process.env;if(a)return a;if(b)return b;if(c)return`${g}${c}`;let h=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return f[h]||(f[h]=(0,d.homedir)()),f[h]}},5222:(a,b,c)=>{"use strict";c.d(b,{D:()=>d});let d=a=>{let b;if("string"==typeof a)return d(new URL(a));let{hostname:c,pathname:e,port:f,protocol:g,search:h}=a;return h&&(b=function(a){let b={};if(a=a.replace(/^\?/,""))for(let c of a.split("&")){let[a,d=null]=c.split("=");a=decodeURIComponent(a),d&&(d=decodeURIComponent(d)),a in b?Array.isArray(b[a])?b[a].push(d):b[a]=[b[a],d]:b[a]=d}return b}(h)),{hostname:c,port:f?parseInt(f):void 0,protocol:g,path:e,query:b}}},5259:(a,b,c)=>{"use strict";c.d(b,{c:()=>e});var d=c(27327);let e=(...a)=>async()=>{let b;if(0===a.length)throw new d.m("No providers in chain");for(let c of a)try{return await c()}catch(a){if(b=a,a?.tryNextLink)continue;throw a}throw b}},5301:(a,b,c)=>{"use strict";c.d(b,{N:()=>d});class d{trace(){}debug(){}info(){}warn(){}error(){}}},5884:(a,b,c)=>{"use strict";c.d(b,{I:()=>k});var d=c(33449),e=c(35674),f=c(54418);let g="AWS_REGION",h="AWS_DEFAULT_REGION",i=["in-region","cross-region","mobile","standard","legacy"],j={environmentVariableSelector:a=>a.AWS_DEFAULTS_MODE,configFileSelector:a=>a.defaults_mode,default:"legacy"},k=({region:a=(0,e.Z)(d.GG),defaultsMode:b=(0,e.Z)(j)}={})=>(0,f.B)(async()=>{let c="function"==typeof b?await b():b;switch(c?.toLowerCase()){case"auto":return l(a);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(c?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${i.join(", ")}, got ${c}`)}}),l=async a=>{if(a){let b="function"==typeof a?await a():a,c=await m();return c?b===c?"in-region":"cross-region":"standard"}return"standard"},m=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[g]||process.env[h]))return process.env[g]??process.env[h];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let{getInstanceMetadataEndpoint:a,httpRequest:b}=await c.e(8610).then(c.bind(c,28610)),d=await a();return(await b({...d,path:"/latest/meta-data/placement/region"})).toString()}catch(a){}}},6355:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(5222);let e=a=>"object"==typeof a?"url"in a?(0,d.D)(a.url):a:(0,d.D)(a)},7801:(a,b,c)=>{"use strict";c.d(b,{e$:()=>f});var d=c(1713),e=c(42917);let f={environmentVariableSelector:a=>(0,d.Q)(a,"AWS_USE_DUALSTACK_ENDPOINT",e.c.ENV),configFileSelector:a=>(0,d.Q)(a,"use_dualstack_endpoint",e.c.CONFIG),default:!1}},8086:a=>{"use strict";a.exports=require("module")},9500:(a,b,c)=>{"use strict";c.d(b,{V:()=>h});var d=c(78193),e=c(32751),f=c(79428),g=c(55511);class h{constructor(a,b){this.algorithmIdentifier=a,this.secret=b,this.reset()}update(a,b){this.hash.update((0,e.F)(i(a,b)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,g.createHmac)(this.algorithmIdentifier,i(this.secret)):(0,g.createHash)(this.algorithmIdentifier)}}function i(a,b){return f.Buffer.isBuffer(a)?a:"string"==typeof a?(0,d.s)(a,b):ArrayBuffer.isView(a)?(0,d.Q)(a.buffer,a.byteOffset,a.byteLength):(0,d.Q)(a)}},10269:(a,b,c)=>{"use strict";c.d(b,{C:()=>g});var d=c(55511),e=c(33873),f=c(4932);let g=a=>{let b=(0,d.createHash)("sha1").update(a).digest("hex");return(0,e.join)((0,f.R)(),".aws","sso","cache",`${b}.json`)}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11697:(a,b,c)=>{"use strict";c.d(b,{Ko:()=>f});var d=c(1713),e=c(42917);let f={environmentVariableSelector:a=>(0,d.Q)(a,"AWS_USE_FIPS_ENDPOINT",e.c.ENV),configFileSelector:a=>(0,d.Q)(a,"use_fips_endpoint",e.c.CONFIG),default:!1}},11723:a=>{"use strict";a.exports=require("querystring")},11997:a=>{"use strict";a.exports=require("punycode")},12412:a=>{"use strict";a.exports=require("assert")},12440:(a,b,c)=>{"use strict";c.d(b,{$:()=>h});let d=a=>"string"==typeof a&&a.length>0?a.split(",").map(a=>a.trim()):[];var e=c(62817);let f="AWS_AUTH_SCHEME_PREFERENCE",g="auth_scheme_preference",h={environmentVariableSelector:(a,b)=>b?.signingName&&(0,e.R)(b.signingName)in a?["httpBearerAuth"]:f in a?d(a[f]):void 0,configFileSelector:a=>{if(g in a)return d(a[g])},default:[]}},13043:(a,b,c)=>{"use strict";function d(a,b,c){return a.$source||(a.$source={}),a.$source[b]=c,a}c.d(b,{g:()=>d})},14368:(a,b,c)=>{"use strict";c.d(b,{t:()=>d});let d=a=>{if("function"==typeof a)return a;let b=Promise.resolve(a);return()=>b}},17559:(a,b,c)=>{"use strict";c.d(b,{I:()=>e});let d={warningEmitted:!1},e=a=>{a&&!d.warningEmitted&&18>parseInt(a.substring(1,a.indexOf(".")))&&(d.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}},18198:(a,b,c)=>{"use strict";c.d(b,{K4:()=>f,OC:()=>d,e:()=>e});let d=a=>e(a)&&a.expiration.getTime()-Date.now()<3e5,e=a=>void 0!==a.expiration,f=(a,b,c)=>{let d,e,f;if(void 0===a)return;let g="function"!=typeof a?async()=>Promise.resolve(a):a,h=!1,i=async a=>{e||(e=g(a));try{d=await e,f=!0,h=!1}finally{e=void 0}return d};return void 0===b?async a=>((!f||a?.forceRefresh)&&(d=await i(a)),d):async a=>((!f||a?.forceRefresh)&&(d=await i(a)),h||(c(d)?b(d)&&await i(a):h=!0),d)}},18647:(a,b,c)=>{"use strict";c.d(b,{Df:()=>g,G8:()=>e,Rn:()=>i,XP:()=>j,XS:()=>h,bp:()=>d,jh:()=>f,l5:()=>k,ok:()=>l});let d=100,e=2e4,f=500,g=500,h=5,i=10,j=1,k="amz-sdk-invocation-id",l="amz-sdk-request"},19063:a=>{"use strict";a.exports=require("require-in-the-middle")},19771:a=>{"use strict";a.exports=require("process")},20355:(a,b,c)=>{"use strict";c.d(b,{e:()=>d});let d=a=>null!=a},20406:(a,b,c)=>{"use strict";var d;c.d(b,{Gz:()=>e,L0:()=>f,cm:()=>d}),function(a){a.STANDARD="standard",a.ADAPTIVE="adaptive"}(d||(d={}));let e=3,f=d.STANDARD},21345:(a,b,c)=>{"use strict";c.d(b,{ET:()=>f,UO:()=>n,Xk:()=>l,Y0:()=>k,lK:()=>m,tW:()=>s,xW:()=>q,zi:()=>r});let d=Math.ceil(17014118346046923e22*(2-11920928955078125e-23)),e=a=>{let b=(a=>{if(null!=a){if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return String(b)!==String(a)&&u.warn(t(`Expected number but observed string: ${a}`)),b}if("number"==typeof a)return a;throw TypeError(`Expected number, got ${typeof a}: ${a}`)}})(a);if(void 0!==b&&!Number.isNaN(b)&&b!==1/0&&b!==-1/0&&Math.abs(b)>d)throw TypeError(`Expected 32-bit float, got ${a}`);return b},f=a=>i(a,32),g=a=>i(a,16),h=a=>i(a,8),i=(a,b)=>{let c=(a=>{if(null!=a){if(Number.isInteger(a)&&!Number.isNaN(a))return a;throw TypeError(`Expected integer, got ${typeof a}: ${a}`)}})(a);if(void 0!==c&&j(c,b)!==c)throw TypeError(`Expected ${b}-bit integer, got ${a}`);return c},j=(a,b)=>{switch(b){case 32:return Int32Array.of(a)[0];case 16:return Int16Array.of(a)[0];case 8:return Int8Array.of(a)[0]}},k=(a,b)=>{if(null==a){if(b)throw TypeError(`Expected a non-null value for ${b}`);throw TypeError("Expected a non-null value")}return a},l=a=>{if(null==a)return;if("object"==typeof a&&!Array.isArray(a))return a;let b=Array.isArray(a)?"array":typeof a;throw TypeError(`Expected object, got ${b}: ${a}`)},m=a=>{if(null!=a){if("string"==typeof a)return a;if(["boolean","number","bigint"].includes(typeof a))return u.warn(t(`Expected string, got ${typeof a}: ${a}`)),String(a);throw TypeError(`Expected string, got ${typeof a}: ${a}`)}},n=a=>"string"==typeof a?e(p(a)):e(a),o=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,p=a=>{let b=a.match(o);if(null===b||b[0].length!==a.length)throw TypeError("Expected real number, got implicit NaN");return parseFloat(a)},q=a=>"string"==typeof a?f(p(a)):f(a),r=a=>"string"==typeof a?g(p(a)):g(a),s=a=>"string"==typeof a?h(p(a)):h(a),t=a=>String(TypeError(a).stack||a).split("\n").slice(0,5).filter(a=>!a.includes("stackTraceWarning")).join("\n"),u={warn:console.warn}},21370:(a,b,c)=>{"use strict";c.d(b,{C:()=>g});var d=c(65934),e=c(443),f=c(6355);let g=a=>{let b,c=a.tls??!0,{endpoint:g,useDualstackEndpoint:h,useFipsEndpoint:i}=a,j=Object.assign(a,{endpoint:null!=g?async()=>(0,f.a)(await (0,d.t)(g)()):void 0,tls:c,isCustomEndpoint:!!g,useDualstackEndpoint:(0,d.t)(h??!1),useFipsEndpoint:(0,d.t)(i??!1)});return j.serviceConfiguredEndpoint=async()=>(a.serviceId&&!b&&(b=(0,e.k)(a.serviceId)),b),j}},21820:a=>{"use strict";a.exports=require("os")},21989:(a,b,c)=>{"use strict";function d(a,b,c){let d,e;if(void 0===b&&void 0===c)d={},e=a;else{if(d=a,"function"==typeof b)return f(d,b,e=c);e=b}for(let a of Object.keys(e)){if(!Array.isArray(e[a])){d[a]=e[a];continue}g(d,null,e,a)}return d}c.d(b,{Tj:()=>d,s:()=>e});let e=(a,b)=>{let c={};for(let d in b)g(c,a,b,d);return c},f=(a,b,c)=>d(a,Object.entries(c).reduce((a,[c,d])=>(Array.isArray(d)?a[c]=d:"function"==typeof d?a[c]=[b,d()]:a[c]=[b,d],a),{})),g=(a,b,c,d)=>{if(null!==b){let e=c[d];"function"==typeof e&&(e=[,e]);let[f=h,g=i,j=d]=e;("function"==typeof f&&f(b[j])||"function"!=typeof f&&f)&&(a[d]=g(b[j]));return}let[e,f]=c[d];if("function"==typeof f){let b,c=void 0===e&&null!=(b=f()),g="function"==typeof e&&!!e(void 0)||"function"!=typeof e&&!!e;c?a[d]=b:g&&(a[d]=f())}else{let b=void 0===e&&null!=f,c="function"==typeof e&&!!e(f)||"function"!=typeof e&&!!e;(b||c)&&(a[d]=f)}},h=a=>null!=a,i=a=>a},22465:(a,b,c)=>{"use strict";c.d(b,{P:()=>e});var d=c(78193);let e=a=>{if("string"==typeof a)return a;if("object"!=typeof a||"number"!=typeof a.byteOffset||"number"!=typeof a.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,d.Q)(a.buffer,a.byteOffset,a.byteLength).toString("utf8")}},23501:(a,b,c)=>{"use strict";a.exports=c(44870)},25149:(a,b,c)=>{"use strict";c.d(b,{A:()=>h});var d=c(84627),e=c(2471);let f=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,g=["__proto__","profile __proto__"],h=a=>{let b,c,h={};for(let i of a.split(/\r?\n/)){let a=i.split(/(^|\s)[;#]/)[0].trim();if("["===a[0]&&"]"===a[a.length-1]){b=void 0,c=void 0;let h=a.substring(1,a.length-1),i=f.exec(h);if(i){let[,a,,c]=i;Object.values(d.I).includes(a)&&(b=[a,c].join(e.Q))}else b=h;if(g.includes(h))throw Error(`Found invalid profile name "${h}"`)}else if(b){let d=a.indexOf("=");if(![0,-1].includes(d)){let[f,g]=[a.substring(0,d).trim(),a.substring(d+1).trim()];if(""===g)c=f;else{c&&i.trimStart()===i&&(c=void 0),h[b]=h[b]||{};let a=c?[c,f].join(e.Q):f;h[b][a]=g}}}}return h}},25763:(a,b,c)=>{"use strict";c.d(b,{ey:()=>p});var d=c(52473),e=c(61797),f=c(56314),g=c(5301),h=c(18647),i=c(2556),j=c(27910);let k=a=>a?.body instanceof j.Readable||"undefined"!=typeof ReadableStream&&a?.body instanceof ReadableStream,l=a=>a instanceof Error?a:a instanceof Object?Object.assign(Error(),a):"string"==typeof a?Error(a):Error(`AWS SDK error wrapper for ${a}`),m=a=>{let b={error:a,errorType:n(a)},c=q(a.$response);return c&&(b.retryAfterHint=c),b},n=a=>(0,f.Qb)(a)?"THROTTLING":(0,f.bV)(a)?"TRANSIENT":(0,f.GQ)(a)?"SERVER_ERROR":"CLIENT_ERROR",o={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},p=a=>({applyToStack:b=>{b.add((a=>(b,c)=>async e=>{let f=await a.retryStrategy(),j=await a.maxAttempts();if(!(a=>void 0!==a.acquireInitialRetryToken&&void 0!==a.refreshRetryTokenForRetry&&void 0!==a.recordSuccess)(f))return f?.mode&&(c.userAgent=[...c.userAgent||[],["cfg/retry-mode",f.mode]]),f.retry(b,e);{let a=await f.acquireInitialRetryToken(c.partition_id),n=Error(),o=0,p=0,{request:q}=e,r=d.K.isInstance(q);for(r&&(q.headers[h.l5]=(0,i.A)());;)try{r&&(q.headers[h.ok]=`attempt=${o+1}; max=${j}`);let{response:c,output:d}=await b(e);return f.recordSuccess(a),d.$metadata.attempts=o+1,d.$metadata.totalRetryDelay=p,{response:c,output:d}}catch(e){let b=m(e);if(n=l(e),r&&k(q))throw(c.logger instanceof g.N?console:c.logger)?.warn("An error was encountered in a non-retryable streaming request."),n;try{a=await f.refreshRetryTokenForRetry(a,b)}catch(a){throw n.$metadata||(n.$metadata={}),n.$metadata.attempts=o+1,n.$metadata.totalRetryDelay=p,n}o=a.getRetryCount();let d=a.getRetryDelay();p+=d,await new Promise(a=>setTimeout(a,d))}}})(a),o)}}),q=a=>{if(!e.c.isInstance(a))return;let b=Object.keys(a.headers).find(a=>"retry-after"===a.toLowerCase());if(!b)return;let c=a.headers[b],d=Number(c);return new Date(Number.isNaN(d)?c:1e3*d)}},27327:(a,b,c)=>{"use strict";c.d(b,{m:()=>d});class d extends Error{constructor(a,b=!0){let c,e=!0;"boolean"==typeof b?(c=void 0,e=b):null!=b&&"object"==typeof b&&(c=b.logger,e=b.tryNextLink??!0),super(a),this.name="ProviderError",this.tryNextLink=e,Object.setPrototypeOf(this,d.prototype),c?.debug?.(`@smithy/property-provider ${e?"->":"(!)"} ${a}`)}static from(a,b=!0){return Object.assign(new this(a.message,b),a)}}},27514:(a,b,c)=>{"use strict";c.d(b,{v:()=>g});var d=c(29021),e=c(10269);let{readFile:f}=d.promises,g=async a=>{let b=(0,e.C)(a);return JSON.parse(await f(b,"utf8"))}},27910:a=>{"use strict";a.exports=require("stream")},28083:(a,b,c)=>{"use strict";c.d(b,{m:()=>d});let d={}},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30779:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{DELETE:()=>D,GET:()=>z,HEAD:()=>E,OPTIONS:()=>F,PATCH:()=>C,POST:()=>A,PUT:()=>B});var e=c(63033),f=c(43084),g=c(13234),h=c(69342),i=c(3708),j=c(25363),k=c(66936),l=c(54701),m=c(79321),n=c(6088),o=c(64021),p=c(87373),q=c(25009),r=a([f,g,h,i,l,n]);[f,g,h,i,l,n]=r.then?(await r)():r;let w={"claude-3.5-sonnet-v2":"anthropic.claude-3-5-sonnet-20241022-v2:0","claude-3.5-sonnet":"anthropic.claude-3-5-sonnet-20240620-v1:0","claude-3-sonnet":"anthropic.claude-3-sonnet-20240229-v1:0","claude-v2":"anthropic.claude-v2","claude-v2.1":"anthropic.claude-v2:1","claude-v1":"anthropic.claude-v1","claude-instant":"anthropic.claude-instant-v1"};async function s(a,b){let c=a.body;if(!c)throw Error("No iterable available");return new ReadableStream({async start(a){let d=new TextDecoder,e="";for await(let f of(b?.onStart?.(),c)){let c=f.chunk?.bytes;if(c){let f=JSON.parse(d.decode(c)),g=f?.delta?.text??"";b?.onToken?.(g),e+=g,a.enqueue(g)}}b?.onFinal?.(e),b?.onCompletion?.(e),a.close()}})}async function t(){let a=g.FI.getByProvider("Bedrock");return Response.json("",{status:a?.access_key_id&&a?.secret_access_key?200:401})}async function u(a){let{messages:b}=await a.json();b=await (0,i.MP)({messages:b,provider:"Bedrock"}),"user"!==b[0].role&&(b=b.slice(1));let c=a.headers.get("model")||w["claude-3.5-sonnet"],d=a.headers.get("filePath"),e=a.headers.get("promptType"),q=await n.A.getLanguage(),r=await n.A.getIdeLanguage(),t=a.headers.get("fileName")??"",u="Chat",v=b[b.length-1],x=v?.codeSelection??"";if(e){u=e+"CodeGPT";let a=await (0,j.O)({promptType:e,cleanPromptText:v.content+x,language:r});a&&(b[b.length-1].content=a+v.content+x)}if(d){let a=JSON.stringify(await (0,f._P)(d),null,2);b[b.length-1].content+=`${d}

    ${a}`}let y=(0,m.O)(b.map(a=>a.content).join(""));try{let a=g.FI.getByProvider("Bedrock");if(!a?.access_key_id||!a?.secret_access_key||!a?.region){let a=Error("You need to set your AWS credentials first.");throw a.status=401,a}let f=new o.m({region:a?.region??"us-east-1",credentials:{accessKeyId:a?.access_key_id??"",secretAccessKey:a?.secret_access_key??"",...a?.session_token?{sessionToken:a?.session_token}:{}}}),j=g.$W.getByProvider("Bedrock");b=(0,i.m6)(b);let n=await f.send(new p.C({modelId:w[c]??c,contentType:"application/json",accept:"application/json",body:JSON.stringify({messages:b,max_tokens:16384,temperature:j?.temperature??.3,anthropic_version:"bedrock-2023-05-31"})})),r=await s(n,{onFinal:async a=>{let b=(0,m.O)(a);await (0,h.U)({eventName:u,provider:"Bedrock",model:c??"anthropic.claude-2",promptTokens:y,completionTokens:b,totalTokens:y+b,statusCode:200})}}),v=b.slice(0,-1).some(a=>a.content.includes(x));if(d||x&&(e||!v)){let a=await (0,l.sn)([`<p style='display: flex; align-items: center; gap: 0.5rem;'>${e?`<span class='command command-bordered command-with-icon' data-command='command'><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${e}</span></span>`:""}${t?`<span class='command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden' data-id=${q} data-language=${q}><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${t}</span></span>`:""}${d?`<span class='command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden' data-language=${d.split("/").pop()?.split(".").pop()}><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${d.split("/").pop()}</span></span>`:""}</p>

`],r);return new k.R(a)}return new k.R(r)}catch(a){return(0,h.U)({eventName:u,provider:"Bedrock",model:c,promptTokens:y,totalTokens:y,statusCode:a.status??500}),Response.json({message:a.message,status:a.status??500},{status:a.status??500})}}let x={...e},y="workUnitAsyncStorage"in x?x.workUnitAsyncStorage:"requestAsyncStorage"in x?x.requestAsyncStorage:void 0;function v(a,b){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof a?a:new Proxy(a,{apply:(a,c,d)=>{let e;try{let a=y?.getStore();e=a?.headers}catch{}return q.wrapRouteHandlerWithSentry(a,{method:b,parameterizedRoute:"/[port]/api/(providers)/bedrock",headers:e}).apply(c,d)}})}let z=v(void 0,"GET"),A=v(u,"POST"),B=v(void 0,"PUT"),C=v(void 0,"PATCH"),D=v(void 0,"DELETE"),E=v(t,"HEAD"),F=v(void 0,"OPTIONS");d()}catch(a){d(a)}})},31421:a=>{"use strict";a.exports=require("node:child_process")},31755:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{"0007e0dd97250fbf09273432d7a7ecffbef1128c51":()=>k.Mj,"0015310633b036d93542287af6e1e5c841312dc10a":()=>f.rQ,"0029e71c75f47836dd830471aee1b40ceeed95be47":()=>g.checkGeminiAuthStatus,"0045472fa5b0a1b9855e8bf205655770ef75ad3b3e":()=>h.checkAnthropicAuthStatus,"0046276cb583cfb92a8869c410771b6c80cc0b23a6":()=>f.checkClaudeCodeAuthStatus,"004be05dee3426c5f11d0e66b5066262d7a4db8a17":()=>g.Y,"007a7f89df6506b1809214bffb53398e7f0af45005":()=>h.Kq,"00ac7636233c4bb02de66b2c70f3894f43146ae5ed":()=>k.qP,"00b97536b90913c29ba658bcf74b8cb28f49640fb2":()=>h.E7,"00e3fff982a123db85465983d281c77ea76ac62352":()=>f.Py,"00e808682b90c7b370acf0016c53bc8bab68aaa3f1":()=>g.w,"00ea71ce0a33c30d7902911c704166d3ea29a443d0":()=>f.eI,"402a3e88b003da0d1d87e98e85bb175a1c1c9e6ba7":()=>k.po,"4052b6d7a3a69ed4ecb4c86acb322169b13cfa81e6":()=>k.iB,"4058a057e50e322a1ab36d545fc2ae70b27de196e3":()=>l.zD,"405e42290aaefe312069697cfc18c8e3100a0b78b3":()=>k.By,"4087f67e1dfa778a0e8cae53e9f8c9610da2ff169f":()=>l.Uq,"408ee23cd7792a4d9780945c29520734be11194ea2":()=>l.cJ,"4091ea8aaeadd46b13b742c5c8d4f0252b2d9fa65a":()=>k.Pr,"40b07c26c5975a402993be6d2b3364a79f1e2d0043":()=>k.aJ,"40b2bbdbed0edb9d20d055cf44251b2b61e40a3460":()=>f.QX,"40c2eb8135a72f6637571664db9a6ef35de36f137a":()=>h.R4,"40c4148268b5d3fdbe1bd914e3655b3c49ca81dab0":()=>l.iG,"40da10572667cb7b2798df009eaeafa14ed0cd0fe2":()=>k.Ht,"60d93a9b6ac5bd5ebb66aa237e807b748d3658e394":()=>f.CW,"7f0413198d87d95d38f1f76e6f62d0a92744143ecc":()=>e.Vn,"7f04664cd67d99e6d52e7170d4466b3169f05f9b3a":()=>e._f,"7f05bec7f62c561b44d1504864c8290f9bf058f785":()=>e.XQ,"7f0934b45a6865faaefd6905f5d3bd51b573a9082c":()=>e.MP,"7f095b8477d2d28850841aef123058f5ca8d59b0ec":()=>e.Bj,"7f0a0573a45fe972983faf11a3adfd394667f859cb":()=>e.BN,"7f0e5eb98e076f9567d7832fb4e4e51e1a6ba56100":()=>e.IO,"7f24f1d27584d3325c0e0ebe1394ccf251718462a1":()=>e.I3,"7f28d4c4c05f8f3cd10f9267c99a8428b8a600ea8d":()=>e.fm,"7f309fdf380403d4df8bf82c6c9b232f2f7f1a7363":()=>i.U,"7f4a62f939cea5e363655629b2ea1ab6d8352fd210":()=>e.s_,"7f51d30ccd9dd51730a7cf76a5b8f6ae6ccc1c2c56":()=>e.wt,"7f52b8c3ff78602f71b491653101583e0f67801f8c":()=>e.pc,"7f56868f33be8318589f9b3a363ab04adefc272709":()=>e.lG,"7f57729d64d7637b519d56ad1996954017be67a4d5":()=>e.Ww,"7f5ad8467aac89c08c21fd0e1cf4ecc31aff2df231":()=>e.CZ,"7f64fd1fa9ad600635c2d933a96c8411db502b30f5":()=>e.bm,"7f650a507520ebc5f0557d5e235a11ca4dc5b9abb1":()=>e.WP,"7f67327b81bcfacb4a6be51a58218ed579159ae5a0":()=>e.aM,"7f6998d8d840d838e7ff049084e51dbe7c6cfca919":()=>e.o0,"7f6ef45402e952c7fd56adf9179ca8cec7c679fe76":()=>e.Jw,"7f6f14bb53c09b24de367a5de0955494cec1aff34d":()=>m.S,"7f746dcd16c298cfcd286cdb390c830e770d2835f8":()=>e.TG,"7f7b2d84ee4a68b47dc4136bcbe68c7a7b7c087714":()=>e.CG,"7f7bf85cb3c41afcef21448c04f81eb25cbee0d8ba":()=>e.UU,"7f7d933322328d147e7578ae77fb43077fe15b4710":()=>e.CA,"7f7e8cf20da57daeda26c84a404448845d5ceb0c75":()=>e.Yp,"7f805dd36cdefbf583dc85aa935bdded57dacaf3cc":()=>e.iJ,"7f83f9a9073010d5ad4b9dc8bde9d587a0ded0e57e":()=>e.DH,"7f8ae93b14600d2b620d0b3526706e0682300d0887":()=>e.ph,"7f91127e5204371a7403701ff60138fbc4194b00bd":()=>e.gn,"7f9265462907f5bffa72ee76bd06448f5fdfca5844":()=>e.iR,"7f98282c077ad820fa286e285fd73d5b003c541493":()=>i.B,"7f9b7f743007eea0c2cc8ab6cea47e03b04cf327f8":()=>e.ju,"7f9de8e523984a637918cd002baca7e9fcccaa8a18":()=>e.vK,"7fa06d7db3b419df86c480e0efb911da974cc744c0":()=>e.vV,"7fa38096c9579a6f1c6432672b2d130c300e7c426f":()=>e.zU,"7fa46cef4469c2180938f67e7fcba59cefaa223f2d":()=>e._S,"7fb4996fc6b8fb45c23e0cb6c18807ed4097e6fdda":()=>e.Dk,"7fb4ed507ec0a38485bc1b232ea7543a189922c68c":()=>e.vE,"7fb8b4795471a1193610fc3da6c18a7fed68c7b09a":()=>e.Tq,"7fc2fff73e317396c07f307f62f2ece5364434296e":()=>e._X,"7fcb9b22a46504e3fb3cea23103e6e5bac5be54058":()=>e.t2,"7fcba4abe3d0470f2617143947b9fa89e7240d762e":()=>e.le,"7fd1b346cc2fa02aeb47281393ec2bac1d2c75d1e9":()=>e.JP,"7fd1dcfac79a58ef27f4101f360279c14a370e3b00":()=>e.x6,"7fd20b662b49b03a9759f5190ba596007cf855a5de":()=>e._R,"7fd9ba1f4bf9a2761dfb5845b74508bd6871e8dafa":()=>e.vR,"7fdc89f85591ac6c18d198d3a7f9860f9069f183ac":()=>e.RK,"7fdd192cfa93d409af276c31d8a77b00e4b162c4e9":()=>e.vk,"7fe375707b950d37d4adf07f99bf3f866507966651":()=>e.AX,"7fe3d1b12dce47a24bd8abe966ac2f4bedbd7c0ac3":()=>e.S_,"7fe6c8700f4c22103b15b76b783f58d9fd6c025a3e":()=>e.Hu,"7fec87fa6ce3b5d38ca2444dd1ed2a116fb621eba8":()=>e.Ct,"7fed6ed4db2dc9ad3dd26995357759c989f2726129":()=>e.gv,"7feeae42fc2e581f92238e58b2b20ce368a82cfdc8":()=>e.m_,"7ffa15cfdca9086d0575a18fc4fce91134b1b7a646":()=>e._P,"7ffa6c010bb04c5d1f265efe1d848fa67e6169634c":()=>e.yH,"7ffb4f1c93136c2724b86a9b6d3e123ad02aafe75b":()=>e.pe,"7ffc1a31852de6a4f19730d411251fb08eb39f60c6":()=>j.x,"7ffc29cc323217f407ca7a2164ea83de4faef75dba":()=>e.hq,"7ffe591c822640777d667c30993c3640fffa736f63":()=>e.So});var e=c(43084),f=c(80346),g=c(49091),h=c(5998),i=c(69342),j=c(62503),k=c(6160),l=c(37704),m=c(35829),n=a([e,f,g,h,i,j,k,l,m]);[e,f,g,h,i,j,k,l,m]=n.then?(await n)():n,d()}catch(a){d(a)}})},32751:(a,b,c)=>{"use strict";c.d(b,{F:()=>e});var d=c(54004);let e=a=>"string"==typeof a?(0,d.a)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)},33449:(a,b,c)=>{"use strict";c.d(b,{GG:()=>d,zH:()=>e});let d={environmentVariableSelector:a=>a.AWS_REGION,configFileSelector:a=>a.region,default:()=>{throw Error("Region is missing")}},e={preferredFile:"credentials"}},33873:a=>{"use strict";a.exports=require("path")},34477:(a,b,c)=>{"use strict";c.d(b,{bM:()=>e,sM:()=>r,Dc:()=>f});var d=c(14368);let e=void 0;function f(a){let b=(0,d.t)(a.userAgentAppId??e),{customUserAgent:c}=a;return Object.assign(a,{customUserAgent:"string"==typeof c?[[c]]:c,userAgentAppId:async()=>{let c=await b();if(!(void 0===c||"string"==typeof c&&c.length<=50)){let b=a.logger?.constructor?.name!=="NoOpLogger"&&a.logger?a.logger:console;"string"!=typeof c?b?.warn("userAgentAppId must be a string or undefined."):c.length>50&&b?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return c}})}var g=c(95874),h=c(52473);function i(a,b,c){a.__aws_sdk_context?a.__aws_sdk_context.features||(a.__aws_sdk_context.features={}):a.__aws_sdk_context={features:{}},a.__aws_sdk_context.features[b]=c}let j=/\d{12}\.ddb/;async function k(a,b,c){let d=c.request;if(d?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&i(a,"PROTOCOL_RPC_V2_CBOR","M"),"function"==typeof b.retryStrategy){let c=await b.retryStrategy();"function"==typeof c.acquireInitialRetryToken?c.constructor?.name?.includes("Adaptive")?i(a,"RETRY_MODE_ADAPTIVE","F"):i(a,"RETRY_MODE_STANDARD","E"):i(a,"RETRY_MODE_LEGACY","D")}if("function"==typeof b.accountIdEndpointMode){let c=a.endpointV2;switch(String(c?.url?.hostname).match(j)&&i(a,"ACCOUNT_ID_ENDPOINT","O"),await b.accountIdEndpointMode?.()){case"disabled":i(a,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":i(a,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":i(a,"ACCOUNT_ID_MODE_REQUIRED","R")}}let e=a.__smithy_context?.selectedHttpAuthScheme?.identity;if(e?.$source)for(let[b,c]of(e.accountId&&i(a,"RESOLVED_ACCOUNT_ID","T"),Object.entries(e.$source??{})))i(a,b,c)}let l="user-agent",m="x-amz-user-agent",n=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,o=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,p=a=>{let b=a[0].split("/").map(a=>a.replace(n,"-")).join("/"),c=a[1]?.replace(o,"-"),d=b.indexOf("/"),e=b.substring(0,d),f=b.substring(d+1);return"api"===e&&(f=f.toLowerCase()),[e,f,c].filter(a=>a&&a.length>0).reduce((a,b,c)=>{switch(c){case 0:return b;case 1:return`${a}/${b}`;default:return`${a}#${b}`}},"")},q={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},r=a=>({applyToStack:b=>{b.add((a=>(b,c)=>async d=>{let{request:e}=d;if(!h.K.isInstance(e))return b(d);let{headers:f}=e,i=c?.userAgent?.map(p)||[],j=(await a.defaultUserAgentProvider()).map(p);await k(c,a,d),j.push(`m/${function(a){let b="";for(let c in a){let d=a[c];if(b.length+d.length+1<=1024){b.length?b+=","+d:b+=d;continue}break}return b}(Object.assign({},c.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let n=a?.customUserAgent?.map(p)||[],o=await a.userAgentAppId();o&&j.push(p([`app/${o}`]));let q=(0,g.vL)(),r=(q?[q]:[]).concat([...j,...i,...n]).join(" "),s=[...j.filter(a=>a.startsWith("aws-sdk-")),...n].join(" ");return"browser"!==a.runtime?(s&&(f[m]=f[m]?`${f[l]} ${s}`:s),f[l]=r):f[m]=r,b({...d,request:e})})(a),q)}})},34631:a=>{"use strict";a.exports=require("tls")},35424:(a,b,c)=>{"use strict";c.d(b,{l:()=>g});var d=c(52473),e=c(86963);let f={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},g=a=>({applyToStack:a=>{a.addRelativeTo((a,b)=>async c=>{if(!d.K.isInstance(c.request))return a(c);let f=(0,e.u)(b).selectedHttpAuthScheme;if(!f)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:g={}},identity:h,signer:i}=f,j=await a({...c,request:await i.sign(c.request,h,g)}).catch((i.errorHandler||(a=>a=>{throw a}))(g));return(i.successHandler||((a,b)=>{}))(j.response,g),j},f)}})},35476:(a,b,c)=>{"use strict";c.d(b,{h:()=>Q});var d,e=c(13043),f=c(14368),g=c(18198),h=c(46081),i=c(32751);let j="X-Amz-Date",k="X-Amz-Signature",l="X-Amz-Security-Token",m="authorization",n=j.toLowerCase(),o=[m,n,"date"],p=k.toLowerCase(),q="x-amz-content-sha256",r=l.toLowerCase(),s={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},t=/^proxy-/,u=/^sec-/,v="AWS4-HMAC-SHA256",w="aws4_request",x={},y=[],z=(a,b,c)=>`${a}/${b}/${c}/${w}`,A=async(a,b,c,d,e)=>{let f=await B(a,b.secretAccessKey,b.accessKeyId),g=`${c}:${d}:${e}:${(0,h.n)(f)}:${b.sessionToken}`;if(g in x)return x[g];for(y.push(g);y.length>50;)delete x[y.shift()];let i=`AWS4${b.secretAccessKey}`;for(let b of[c,d,e,w])i=await B(a,i,b);return x[g]=i},B=(a,b,c)=>{let d=new a(b);return d.update((0,i.F)(c)),d.digest()},C=({headers:a},b,c)=>{let d={};for(let e of Object.keys(a).sort()){if(void 0==a[e])continue;let f=e.toLowerCase();(!(f in s||b?.has(f)||t.test(f)||u.test(f))||c&&(!c||c.has(f)))&&(d[f]=a[e].trim().replace(/\s+/g," "))}return d};var D=c(36754);let E=async({headers:a,body:b},c)=>{for(let b of Object.keys(a))if(b.toLowerCase()===q)return a[b];if(void 0==b)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof b||ArrayBuffer.isView(b)||(0,D.m)(b)){let a=new c;return a.update((0,i.F)(b)),(0,h.n)(await a.digest())}return"UNSIGNED-PAYLOAD"};var F=c(54004);class G{format(a){let b=[];for(let c of Object.keys(a)){let d=(0,F.a)(c);b.push(Uint8Array.from([d.byteLength]),d,this.formatHeaderValue(a[c]))}let c=new Uint8Array(b.reduce((a,b)=>a+b.byteLength,0)),d=0;for(let a of b)c.set(a,d),d+=a.byteLength;return c}formatHeaderValue(a){switch(a.type){case"boolean":return Uint8Array.from([+!a.value]);case"byte":return Uint8Array.from([2,a.value]);case"short":let b=new DataView(new ArrayBuffer(3));return b.setUint8(0,3),b.setInt16(1,a.value,!1),new Uint8Array(b.buffer);case"integer":let c=new DataView(new ArrayBuffer(5));return c.setUint8(0,4),c.setInt32(1,a.value,!1),new Uint8Array(c.buffer);case"long":let d=new Uint8Array(9);return d[0]=5,d.set(a.value.bytes,1),d;case"binary":let e=new DataView(new ArrayBuffer(3+a.value.byteLength));e.setUint8(0,6),e.setUint16(1,a.value.byteLength,!1);let f=new Uint8Array(e.buffer);return f.set(a.value,3),f;case"string":let g=(0,F.a)(a.value),i=new DataView(new ArrayBuffer(3+g.byteLength));i.setUint8(0,7),i.setUint16(1,g.byteLength,!1);let j=new Uint8Array(i.buffer);return j.set(g,3),j;case"timestamp":let k=new Uint8Array(9);return k[0]=8,k.set(I.fromNumber(a.value.valueOf()).bytes,1),k;case"uuid":if(!H.test(a.value))throw Error(`Invalid UUID received: ${a.value}`);let l=new Uint8Array(17);return l[0]=9,l.set((0,h.a)(a.value.replace(/\-/g,"")),1),l}}}!function(a){a[a.boolTrue=0]="boolTrue",a[a.boolFalse=1]="boolFalse",a[a.byte=2]="byte",a[a.short=3]="short",a[a.integer=4]="integer",a[a.long=5]="long",a[a.byteArray=6]="byteArray",a[a.string=7]="string",a[a.timestamp=8]="timestamp",a[a.uuid=9]="uuid"}(d||(d={}));let H=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class I{constructor(a){if(this.bytes=a,8!==a.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(a){if(a>0x8000000000000000||a<-0x8000000000000000)throw Error(`${a} is too large (or, if negative, too small) to represent as an Int64`);let b=new Uint8Array(8);for(let c=7,d=Math.abs(Math.round(a));c>-1&&d>0;c--,d/=256)b[c]=d;return a<0&&J(b),new I(b)}valueOf(){let a=this.bytes.slice(0),b=128&a[0];return b&&J(a),parseInt((0,h.n)(a),16)*(b?-1:1)}toString(){return String(this.valueOf())}}function J(a){for(let b=0;b<8;b++)a[b]^=255;for(let b=7;b>-1&&(a[b]++,0===a[b]);b--);}var K=c(52473);let L=a=>{for(let b of Object.keys((a=K.K.clone(a)).headers))o.indexOf(b.toLowerCase())>-1&&delete a.headers[b];return a};var M=c(65934),N=c(78292);class O{constructor({applyChecksum:a,credentials:b,region:c,service:d,sha256:e,uriEscapePath:f=!0}){this.service=d,this.sha256=e,this.uriEscapePath=f,this.applyChecksum="boolean"!=typeof a||a,this.regionProvider=(0,M.t)(c),this.credentialProvider=(0,M.t)(b)}createCanonicalRequest(a,b,c){let d=Object.keys(b).sort();return`${a.method}
${this.getCanonicalPath(a)}
${(({query:a={}})=>{let b=[],c={};for(let d of Object.keys(a)){if(d.toLowerCase()===p)continue;let e=(0,N.o)(d);b.push(e);let f=a[d];"string"==typeof f?c[e]=`${e}=${(0,N.o)(f)}`:Array.isArray(f)&&(c[e]=f.slice(0).reduce((a,b)=>a.concat([`${e}=${(0,N.o)(b)}`]),[]).sort().join("&"))}return b.sort().map(a=>c[a]).filter(a=>a).join("&")})(a)}
${d.map(a=>`${a}:${b[a]}`).join("\n")}

${d.join(";")}
${c}`}async createStringToSign(a,b,c,d){let e=new this.sha256;e.update((0,i.F)(c));let f=await e.digest();return`${d}
${a}
${b}
${(0,h.n)(f)}`}getCanonicalPath({path:a}){if(this.uriEscapePath){let b=[];for(let c of a.split("/"))c?.length!==0&&"."!==c&&(".."===c?b.pop():b.push(c));let c=`${a?.startsWith("/")?"/":""}${b.join("/")}${b.length>0&&a?.endsWith("/")?"/":""}`;return(0,N.o)(c).replace(/%2F/g,"/")}return a}validateResolvedCredentials(a){if("object"!=typeof a||"string"!=typeof a.accessKeyId||"string"!=typeof a.secretAccessKey)throw Error("Resolved credential object is not valid")}formatDate(a){var b;let c=("number"==typeof(b=a)?new Date(1e3*b):"string"==typeof b?new Date(Number(b)?1e3*Number(b):b):b).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,"");return{longDate:c,shortDate:c.slice(0,8)}}getCanonicalHeaderList(a){return Object.keys(a).sort().join(";")}}class P extends O{constructor({applyChecksum:a,credentials:b,region:c,service:d,sha256:e,uriEscapePath:f=!0}){super({applyChecksum:a,credentials:b,region:c,service:d,sha256:e,uriEscapePath:f}),this.headerFormatter=new G}async presign(a,b={}){let{signingDate:c=new Date,expiresIn:d=3600,unsignableHeaders:e,unhoistableHeaders:f,signableHeaders:g,hoistableHeaders:h,signingRegion:i,signingService:m}=b,n=await this.credentialProvider();this.validateResolvedCredentials(n);let o=i??await this.regionProvider(),{longDate:p,shortDate:q}=this.formatDate(c);if(d>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let r=z(q,o,m??this.service),s=((a,b={})=>{let{headers:c,query:d={}}=K.K.clone(a);for(let a of Object.keys(c)){let e=a.toLowerCase();("x-amz-"===e.slice(0,6)&&!b.unhoistableHeaders?.has(e)||b.hoistableHeaders?.has(e))&&(d[a]=c[a],delete c[a])}return{...a,headers:c,query:d}})(L(a),{unhoistableHeaders:f,hoistableHeaders:h});n.sessionToken&&(s.query[l]=n.sessionToken),s.query["X-Amz-Algorithm"]=v,s.query["X-Amz-Credential"]=`${n.accessKeyId}/${r}`,s.query[j]=p,s.query["X-Amz-Expires"]=d.toString(10);let t=C(s,e,g);return s.query["X-Amz-SignedHeaders"]=this.getCanonicalHeaderList(t),s.query[k]=await this.getSignature(p,r,this.getSigningKey(n,o,q,m),this.createCanonicalRequest(s,t,await E(a,this.sha256))),s}async sign(a,b){return"string"==typeof a?this.signString(a,b):a.headers&&a.payload?this.signEvent(a,b):a.message?this.signMessage(a,b):this.signRequest(a,b)}async signEvent({headers:a,payload:b},{signingDate:c=new Date,priorSignature:d,signingRegion:e,signingService:f}){let g=e??await this.regionProvider(),{shortDate:i,longDate:j}=this.formatDate(c),k=z(i,g,f??this.service),l=await E({headers:{},body:b},this.sha256),m=new this.sha256;m.update(a);let n=["AWS4-HMAC-SHA256-PAYLOAD",j,k,d,(0,h.n)(await m.digest()),l].join("\n");return this.signString(n,{signingDate:c,signingRegion:g,signingService:f})}async signMessage(a,{signingDate:b=new Date,signingRegion:c,signingService:d}){return this.signEvent({headers:this.headerFormatter.format(a.message.headers),payload:a.message.body},{signingDate:b,signingRegion:c,signingService:d,priorSignature:a.priorSignature}).then(b=>({message:a.message,signature:b}))}async signString(a,{signingDate:b=new Date,signingRegion:c,signingService:d}={}){let e=await this.credentialProvider();this.validateResolvedCredentials(e);let f=c??await this.regionProvider(),{shortDate:g}=this.formatDate(b),j=new this.sha256(await this.getSigningKey(e,f,g,d));return j.update((0,i.F)(a)),(0,h.n)(await j.digest())}async signRequest(a,{signingDate:b=new Date,signableHeaders:c,unsignableHeaders:d,signingRegion:e,signingService:f}={}){let g=await this.credentialProvider();this.validateResolvedCredentials(g);let h=e??await this.regionProvider(),i=L(a),{longDate:j,shortDate:k}=this.formatDate(b),l=z(k,h,f??this.service);i.headers[n]=j,g.sessionToken&&(i.headers[r]=g.sessionToken);let o=await E(i,this.sha256);!((a,b)=>{for(let c of(a=a.toLowerCase(),Object.keys(b)))if(a===c.toLowerCase())return!0;return!1})(q,i.headers)&&this.applyChecksum&&(i.headers[q]=o);let p=C(i,d,c),s=await this.getSignature(j,l,this.getSigningKey(g,h,k,f),this.createCanonicalRequest(i,p,o));return i.headers[m]=`${v} Credential=${g.accessKeyId}/${l}, SignedHeaders=${this.getCanonicalHeaderList(p)}, Signature=${s}`,i}async getSignature(a,b,c,d){let e=await this.createStringToSign(a,b,d,v),f=new this.sha256(await c);return f.update((0,i.F)(e)),(0,h.n)(await f.digest())}getSigningKey(a,b,c,d){return A(this.sha256,a,c,b,d||this.service)}}let Q=a=>{let b,c,d=a.credentials,h=!!a.credentials;Object.defineProperty(a,"credentials",{set(c){c&&c!==d&&c!==b&&(h=!0);let i=function(a,{credentials:b,credentialDefaultProvider:c}){let d;return(d=b?b?.memoized?b:(0,g.K4)(b,g.OC,g.e):c?(0,f.t)(c(Object.assign({},a,{parentClientConfig:a}))):async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")}).memoized=!0,d}(a,{credentials:d=c,credentialDefaultProvider:a.credentialDefaultProvider}),j=function(a,b){if(b.configBound)return b;let c=async c=>b({...c,callerClientConfig:a});return c.memoized=b.memoized,c.configBound=!0,c}(a,i);h&&!j.attributed?((b=async a=>j(a).then(a=>(0,e.g)(a,"CREDENTIALS_CODE","e"))).memoized=j.memoized,b.configBound=j.configBound,b.attributed=!0):b=j},get:()=>b,enumerable:!0,configurable:!0}),a.credentials=d;let{signingEscapePath:i=!0,systemClockOffset:j=a.systemClockOffset||0,sha256:k}=a;return c=a.signer?(0,f.t)(a.signer):a.regionInfoProvider?()=>(0,f.t)(a.region)().then(async b=>[await a.regionInfoProvider(b,{useFipsEndpoint:await a.useFipsEndpoint(),useDualstackEndpoint:await a.useDualstackEndpoint()})||{},b]).then(([b,c])=>{let{signingRegion:d,signingService:e}=b;a.signingRegion=a.signingRegion||d||c,a.signingName=a.signingName||e||a.serviceId;let f={...a,credentials:a.credentials,region:a.signingRegion,service:a.signingName,sha256:k,uriEscapePath:i};return new(a.signerConstructor||P)(f)}):async b=>{let c=(b=Object.assign({},{name:"sigv4",signingName:a.signingName||a.defaultSigningName,signingRegion:await (0,f.t)(a.region)(),properties:{}},b)).signingRegion,d=b.signingName;a.signingRegion=a.signingRegion||c,a.signingName=a.signingName||d||a.serviceId;let e={...a,credentials:a.credentials,region:a.signingRegion,service:a.signingName,sha256:k,uriEscapePath:i};return new(a.signerConstructor||P)(e)},Object.assign(a,{systemClockOffset:j,signingEscapePath:i,signer:c})}},35674:(a,b,c)=>{"use strict";c.d(b,{Z:()=>j});var d=c(54418),e=c(5259),f=c(75391);function g(a){try{let b=new Set(Array.from(a.match(/([A-Z_]){3,}/g)??[]));return b.delete("CONFIG"),b.delete("CONFIG_PREFIX_SEPARATOR"),b.delete("ENV"),[...b].join(", ")}catch(b){return a}}var h=c(49884),i=c(2471);let j=({environmentVariableSelector:a,configFileSelector:b,default:c},j={})=>{let{signingName:k,logger:l}=j;return(0,d.B)((0,e.c)(((a,b)=>async()=>{try{let c=a(process.env,b);if(void 0===c)throw Error();return c}catch(c){throw new f.C(c.message||`Not found in ENV: ${g(a.toString())}`,{logger:b?.logger})}})(a,{signingName:k,logger:l}),((a,{preferredFile:b="config",...c}={})=>async()=>{let d=(0,h.Bz)(c),{configFile:e,credentialsFile:j}=await (0,i.p)(c),k=j[d]||{},l=e[d]||{},m="config"===b?{...k,...l}:{...l,...k};try{let c="config"===b?e:j,d=a(m,c);if(void 0===d)throw Error();return d}catch(b){throw new f.C(b.message||`Not found in config files w/ profile [${d}]: ${g(a.toString())}`,{logger:c.logger})}})(b,j),(a=>"function"==typeof a?async()=>await a():()=>Promise.resolve(a))(c)))}},36686:a=>{"use strict";a.exports=require("diagnostics_channel")},36754:(a,b,c)=>{"use strict";c.d(b,{m:()=>d});let d=a=>"function"==typeof ArrayBuffer&&a instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(a)},37067:a=>{"use strict";a.exports=require("node:http")},37293:(a,b,c)=>{"use strict";c.d(b,{h:()=>d});class d{constructor(a){for(let[b,c]of(this.authSchemes=new Map,Object.entries(a)))void 0!==c&&this.authSchemes.set(b,c)}getIdentityProvider(a){return this.authSchemes.get(a)}}},37430:(a,b,c)=>{"use strict";c.d(b,{j:()=>e});var d=c(76099);let e=a=>({output:b,parsedBody:c,errorCode:e})=>{(({output:a,parsedBody:b,exceptionCtor:c,errorCode:e})=>{let g=f(a),h=g.httpStatusCode?g.httpStatusCode+"":void 0,i=new c({name:b?.code||b?.Code||e||h||"UnknownError",$fault:"client",$metadata:g});throw(0,d.M)(i,b)})({output:b,parsedBody:c,exceptionCtor:a,errorCode:e})},f=a=>({httpStatusCode:a.statusCode,requestId:a.headers["x-amzn-requestid"]??a.headers["x-amzn-request-id"]??a.headers["x-amz-request-id"],extendedRequestId:a.headers["x-amz-id-2"],cfId:a.headers["x-amz-cf-id"]})},38350:(a,b,c)=>{"use strict";c.d(b,{e:()=>d,j:()=>e});let d=a=>({setHttpHandler(b){a.httpHandler=b},httpHandler:()=>a.httpHandler,updateHttpClientConfig(b,c){a.httpHandler?.updateHttpClientConfig(b,c)},httpHandlerConfigs:()=>a.httpHandler.httpHandlerConfigs()}),e=a=>({httpHandler:a.httpHandler()})},38522:a=>{"use strict";a.exports=require("node:zlib")},38620:(a,b,c)=>{"use strict";c.d(b,{s:()=>y});let d="endpoints";function e(a){return"object"!=typeof a||null==a?a:"ref"in a?`$${e(a.ref)}`:"fn"in a?`${a.fn}(${(a.argv||[]).map(e).join(", ")})`:JSON.stringify(a,null,2)}class f extends Error{constructor(a){super(a),this.name="EndpointError"}}var g,h=c(28083);let i=(a,b)=>(a=>{let b=a.split("."),c=[];for(let d of b){let b=d.indexOf("[");if(-1!==b){if(d.indexOf("]")!==d.length-1)throw new f(`Path: '${a}' does not end with ']'`);let e=d.slice(b+1,-1);if(Number.isNaN(parseInt(e)))throw new f(`Invalid array index: '${e}' in path: '${a}'`);0!==b&&c.push(d.slice(0,b)),c.push(e)}else c.push(d)}return c})(b).reduce((c,d)=>{if("object"!=typeof c)throw new f(`Index '${d}' in '${b}' not found in '${JSON.stringify(a)}'`);return Array.isArray(c)?c[parseInt(d)]:c[d]},a);var j=c(60850);!function(a){a.HTTP="http",a.HTTPS="https"}(g||(g={}));var k=c(61401);let l={[g.HTTP]:80,[g.HTTPS]:443},m={booleanEquals:(a,b)=>a===b,getAttr:i,isSet:a=>null!=a,isValidHostLabel:j.X,not:a=>!a,parseURL:a=>{let b=(()=>{try{if(a instanceof URL)return a;if("object"==typeof a&&"hostname"in a){let{hostname:b,port:c,protocol:d="",path:e="",query:f={}}=a,g=new URL(`${d}//${b}${c?`:${c}`:""}${e}`);return g.search=Object.entries(f).map(([a,b])=>`${a}=${b}`).join("&"),g}return new URL(a)}catch(a){return null}})();if(!b)return console.error(`Unable to parse ${JSON.stringify(a)} as a whatwg URL.`),null;let c=b.href,{host:d,hostname:e,pathname:f,protocol:h,search:i}=b;if(i)return null;let j=h.slice(0,-1);if(!Object.values(g).includes(j))return null;let m=(0,k.o)(e),n=c.includes(`${d}:${l[j]}`)||"string"==typeof a&&a.includes(`${d}:${l[j]}`),o=`${d}${n?`:${l[j]}`:""}`;return{scheme:j,authority:o,path:f,normalizedPath:f.endsWith("/")?f:`${f}/`,isIp:m}},stringEquals:(a,b)=>a===b,substring:(a,b,c,d)=>b>=c||a.length<c?null:d?a.substring(a.length-c,a.length-b):a.substring(b,c),uriEncode:a=>encodeURIComponent(a).replace(/[!*'()]/g,a=>`%${a.charCodeAt(0).toString(16).toUpperCase()}`)},n=(a,b)=>{let c=[],d={...b.endpointParams,...b.referenceRecord},e=0;for(;e<a.length;){let b=a.indexOf("{",e);if(-1===b){c.push(a.slice(e));break}c.push(a.slice(e,b));let f=a.indexOf("}",b);if(-1===f){c.push(a.slice(b));break}"{"===a[b+1]&&"}"===a[f+1]&&(c.push(a.slice(b+1,f)),e=f+2);let g=a.substring(b+1,f);if(g.includes("#")){let[a,b]=g.split("#");c.push(i(d[a],b))}else c.push(d[g]);e=f+1}return c.join("")},o=(a,b,c)=>{if("string"==typeof a)return n(a,c);if(a.fn)return p(a,c);if(a.ref)return(({ref:a},b)=>({...b.endpointParams,...b.referenceRecord})[a])(a,c);throw new f(`'${b}': ${String(a)} is not a string, function or reference.`)},p=({fn:a,argv:b},c)=>{let d=b.map(a=>["boolean","number"].includes(typeof a)?a:o(a,"arg",c)),e=a.split(".");return e[0]in h.m&&null!=e[1]?h.m[e[0]][e[1]](...d):m[a](...d)},q=({assign:a,...b},c)=>{if(a&&a in c.referenceRecord)throw new f(`'${a}' is already defined in Reference Record.`);let g=p(b,c);return c.logger?.debug?.(`${d} evaluateCondition: ${e(b)} = ${e(g)}`),{result:""===g||!!g,...null!=a&&{toAssign:{name:a,value:g}}}},r=(a=[],b)=>{let c={};for(let f of a){let{result:a,toAssign:g}=q(f,{...b,referenceRecord:{...b.referenceRecord,...c}});if(!a)return{result:a};g&&(c[g.name]=g.value,b.logger?.debug?.(`${d} assign: ${g.name} := ${e(g.value)}`))}return{result:!0,referenceRecord:c}},s=(a,b)=>{if(Array.isArray(a))return a.map(a=>s(a,b));switch(typeof a){case"string":return n(a,b);case"object":if(null===a)throw new f(`Unexpected endpoint property: ${a}`);return t(a,b);case"boolean":return a;default:throw new f(`Unexpected endpoint property type: ${typeof a}`)}},t=(a,b)=>Object.entries(a).reduce((a,[c,d])=>({...a,[c]:s(d,b)}),{}),u=(a,b)=>{let{conditions:c,endpoint:g}=a,{result:h,referenceRecord:i}=r(c,b);if(!h)return;let j={...b,referenceRecord:{...b.referenceRecord,...i}},{url:k,properties:l,headers:m}=g;return b.logger?.debug?.(`${d} Resolving endpoint from template: ${e(g)}`),{...void 0!=m&&{headers:Object.entries(m).reduce((a,[b,c])=>({...a,[b]:c.map(a=>{let c=o(a,"Header value entry",j);if("string"!=typeof c)throw new f(`Header '${b}' value '${c}' is not a string`);return c})}),{})},...void 0!=l&&{properties:t(l,j)},url:((a,b)=>{let c=o(a,"Endpoint URL",b);if("string"==typeof c)try{return new URL(c)}catch(a){throw console.error(`Failed to construct URL with ${c}`,a),a}throw new f(`Endpoint URL must be a string, got ${typeof c}`)})(k,j)}},v=(a,b)=>{let{conditions:c,error:d}=a,{result:e,referenceRecord:g}=r(c,b);if(e)throw new f(o(d,"Error",{...b,referenceRecord:{...b.referenceRecord,...g}}))},w=(a,b)=>{let{conditions:c,rules:d}=a,{result:e,referenceRecord:f}=r(c,b);if(e)return x(d,{...b,referenceRecord:{...b.referenceRecord,...f}})},x=(a,b)=>{for(let c of a)if("endpoint"===c.type){let a=u(c,b);if(a)return a}else if("error"===c.type)v(c,b);else if("tree"===c.type){let a=w(c,b);if(a)return a}else throw new f(`Unknown endpoint rule: ${c}`);throw new f("Rules evaluation failed")},y=(a,b)=>{let{endpointParams:c,logger:g}=b,{parameters:h,rules:i}=a;b.logger?.debug?.(`${d} Initial EndpointParams: ${e(c)}`);let j=Object.entries(h).filter(([,a])=>null!=a.default).map(([a,b])=>[a,b.default]);if(j.length>0)for(let[a,b]of j)c[a]=c[a]??b;for(let a of Object.entries(h).filter(([,a])=>a.required).map(([a])=>a))if(null==c[a])throw new f(`Missing required parameter: '${a}'`);let k=x(i,{endpointParams:c,logger:g,referenceRecord:{}});return b.logger?.debug?.(`${d} Resolved endpoint: ${e(k)}`),k}},39122:(a,b,c)=>{"use strict";c.d(b,{$:()=>f});let{readFile:d}=c(29021).promises,e={},f=(a,b)=>((!e[a]||b?.ignoreCache)&&(e[a]=d(a,"utf8")),e[a])},39288:(a,b,c)=>{"use strict";c.d(b,{$:()=>d});let d="***SensitiveInformation***"},40819:(a,b,c)=>{"use strict";c.d(b,{g:()=>f});var d=c(33873),e=c(4932);let f=()=>process.env.AWS_CONFIG_FILE||(0,d.join)((0,e.R)(),".aws","config")},41217:(a,b,c)=>{"use strict";var d;c.d(b,{xA:()=>e,uv:()=>f}),function(a){a.MD5="md5",a.CRC32="crc32",a.CRC32C="crc32c",a.SHA1="sha1",a.SHA256="sha256"}(d||(d={}));let e=a=>Object.assign((a=>{let b=[];for(let c in d){let e=d[c];void 0!==a[e]&&b.push({algorithmId:()=>e,checksumConstructor:()=>a[e]})}return{addChecksumAlgorithm(a){b.push(a)},checksumAlgorithms:()=>b}})(a),(a=>({setRetryStrategy(b){a.retryStrategy=b},retryStrategy:()=>a.retryStrategy}))(a)),f=a=>Object.assign((a=>{let b={};return a.checksumAlgorithms().forEach(a=>{b[a.algorithmId()]=a.checksumConstructor()}),b})(a),(a=>{let b={};return b.retryStrategy=a.retryStrategy(),b})(a))},41692:a=>{"use strict";a.exports=require("node:tls")},42917:(a,b,c)=>{"use strict";var d;c.d(b,{c:()=>d}),function(a){a.ENV="env",a.CONFIG="shared config entry"}(d||(d={}))},43055:(a,b,c)=>{"use strict";c.d(b,{l:()=>f});var d=c(52473),e=c(4601);function f(a,b){return new g(a,b)}class g{constructor(a,b){this.input=a,this.context=b,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:a,protocol:b="https",port:c,path:e}=await this.context.endpoint();for(let a of(this.path=e,this.resolvePathStack))a(this.path);return new d.K({protocol:b,hostname:this.hostname||a,port:c,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(a){return this.hostname=a,this}bp(a){return this.resolvePathStack.push(b=>{this.path=`${b?.endsWith("/")?b.slice(0,-1):b||""}`+a}),this}p(a,b,c,d){return this.resolvePathStack.push(f=>{this.path=((a,b,c,d,f,g)=>{if(null!=b&&void 0!==b[c]){let b=d();if(b.length<=0)throw Error("Empty value provided for input HTTP label: "+c+".");a=a.replace(f,g?b.split("/").map(a=>(0,e.$)(a)).join("/"):(0,e.$)(b))}else throw Error("No value provided for input HTTP label: "+c+".");return a})(f,this.input,a,b,c,d)}),this}h(a){return this.headers=a,this}q(a){return this.query=a,this}b(a){return this.body=a,this}m(a){return this.method=a,this}}},43362:(a,b,c)=>{"use strict";c.d(b,{OV:()=>e,TC:()=>g});var d=c(52473);function e(a){return a}let f={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},g=a=>({applyToStack:b=>{b.add(b=>async c=>{if(!d.K.isInstance(c.request))return b(c);let{request:e}=c,{handlerProtocol:f=""}=a.requestHandler.metadata||{};if(f.indexOf("h2")>=0&&!e.headers[":authority"])delete e.headers.host,e.headers[":authority"]=e.hostname+(e.port?":"+e.port:"");else if(!e.headers.host){let a=e.hostname;null!=e.port&&(a+=`:${e.port}`),e.headers.host=a}return b(c)},f)}})},44708:a=>{"use strict";a.exports=require("node:https")},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46081:(a,b,c)=>{"use strict";c.d(b,{a:()=>f,n:()=>g});let d={},e={};for(let a=0;a<256;a++){let b=a.toString(16).toLowerCase();1===b.length&&(b=`0${b}`),d[a]=b,e[b]=a}function f(a){if(a.length%2!=0)throw Error("Hex encoded strings must have an even number length");let b=new Uint8Array(a.length/2);for(let c=0;c<a.length;c+=2){let d=a.slice(c,c+2).toLowerCase();if(d in e)b[c/2]=e[d];else throw Error(`Cannot decode unrecognized sequence ${d} as hexadecimal`)}return b}function g(a){let b="";for(let c=0;c<a.byteLength;c++)b+=d[a[c]];return b}},48161:a=>{"use strict";a.exports=require("node:os")},48572:(a,b,c)=>{Promise.resolve().then(c.bind(c,96167))},49802:(a,b,c)=>{"use strict";c.d(b,{CG:()=>f,Y2:()=>e,cJ:()=>g});var d=c(99578);let e=(a,b)=>(0,d.w)(a,b).then(a=>{if(a.length)try{return JSON.parse(a)}catch(b){throw b?.name==="SyntaxError"&&Object.defineProperty(b,"$responseBodyText",{value:a}),b}return{}}),f=async(a,b)=>{let c=await e(a,b);return c.message=c.message??c.Message,c},g=(a,b)=>{let c=(a,b)=>Object.keys(a).find(a=>a.toLowerCase()===b.toLowerCase()),d=a=>{let b=a;return"number"==typeof b&&(b=b.toString()),b.indexOf(",")>=0&&(b=b.split(",")[0]),b.indexOf(":")>=0&&(b=b.split(":")[0]),b.indexOf("#")>=0&&(b=b.split("#")[1]),b},e=c(a.headers,"x-amzn-errortype");if(void 0!==e)return d(a.headers[e]);if(b&&"object"==typeof b){let a=c(b,"code");if(a&&void 0!==b[a])return d(b[a]);if(void 0!==b.__type)return d(b.__type)}}},49884:(a,b,c)=>{"use strict";c.d(b,{Bz:()=>e,Ch:()=>d});let d="AWS_PROFILE",e=a=>a.profile||process.env[d]||"default"},51115:a=>{"use strict";a.exports=require("http2")},51468:(a,b,c)=>{"use strict";Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(38580),e=c(22773),f=c(78326);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},52473:(a,b,c)=>{"use strict";c.d(b,{K:()=>d});class d{constructor(a){this.method=a.method||"GET",this.hostname=a.hostname||"localhost",this.port=a.port,this.query=a.query||{},this.headers=a.headers||{},this.body=a.body,this.protocol=a.protocol?":"!==a.protocol.slice(-1)?`${a.protocol}:`:a.protocol:"https:",this.path=a.path?"/"!==a.path.charAt(0)?`/${a.path}`:a.path:"/",this.username=a.username,this.password=a.password,this.fragment=a.fragment}static clone(a){var b;let c=new d({...a,headers:{...a.headers}});return c.query&&(c.query=Object.keys(b=c.query).reduce((a,c)=>{let d=b[c];return{...a,[c]:Array.isArray(d)?[...d]:d}},{})),c}static isInstance(a){return!!a&&"method"in a&&"protocol"in a&&"hostname"in a&&"path"in a&&"object"==typeof a.query&&"object"==typeof a.headers}clone(){return d.clone(this)}}},53051:(a,b,c)=>{"use strict";c.d(b,{f:()=>f});var d=c(27910),e=c(54295);async function f(a,b,c=6e3){var g,h;let i=b.headers??{},j=i.Expect||i.expect,k=-1,l=!0;"100-continue"===j&&(l=await Promise.race([new Promise(a=>{k=Number(e.N.setTimeout(()=>a(!0),Math.max(6e3,c)))}),new Promise(b=>{a.on("continue",()=>{e.N.clearTimeout(k),b(!0)}),a.on("response",()=>{e.N.clearTimeout(k),b(!1)}),a.on("error",()=>{e.N.clearTimeout(k),b(!1)})})])),l&&(g=a,(h=b.body)instanceof d.Readable?h.pipe(g):h?Buffer.isBuffer(h)||"string"==typeof h?g.end(h):"object"==typeof h&&h.buffer&&"number"==typeof h.byteOffset&&"number"==typeof h.byteLength?g.end(Buffer.from(h.buffer,h.byteOffset,h.byteLength)):g.end(Buffer.from(h)):g.end())}},53053:a=>{"use strict";a.exports=require("node:diagnostics_channel")},53484:(a,b,c)=>{"use strict";c.d(b,{k:()=>f});var d=c(27910);class e extends d.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(a,b,c){this.bufferedBytes.push(a),c()}}let f=a=>g(a)?h(a):new Promise((b,c)=>{let d=new e;a.pipe(d),a.on("error",a=>{d.end(),c(a)}),d.on("error",c),d.on("finish",function(){b(new Uint8Array(Buffer.concat(this.bufferedBytes)))})}),g=a=>"function"==typeof ReadableStream&&a instanceof ReadableStream;async function h(a){let b=[],c=a.getReader(),d=!1,e=0;for(;!d;){let{done:a,value:f}=await c.read();f&&(b.push(f),e+=f.length),d=a}let f=new Uint8Array(e),g=0;for(let a of b)f.set(a,g),g+=a.length;return f}},54004:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(78193);let e=a=>{let b=(0,d.s)(a,"utf8");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT)}},54295:(a,b,c)=>{"use strict";c.d(b,{N:()=>d});let d={setTimeout:(a,b)=>setTimeout(a,b),clearTimeout:a=>clearTimeout(a)}},54418:(a,b,c)=>{"use strict";c.d(b,{B:()=>d});let d=(a,b,c)=>{let d,e,f,g=!1,h=async()=>{e||(e=a());try{d=await e,f=!0,g=!1}finally{e=void 0}return d};return void 0===b?async a=>((!f||a?.forceRefresh)&&(d=await h()),d):async a=>((!f||a?.forceRefresh)&&(d=await h()),g||(c&&!c(d)?g=!0:b(d)&&await h()),d)}},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},55760:(a,b,c)=>{"use strict";c.d(b,{vK:()=>g});var d=c(52473);let e="content-length",f={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},g=a=>({applyToStack:b=>{var c;b.add((c=a.bodyLengthChecker,a=>async b=>{let f=b.request;if(d.K.isInstance(f)){let{body:a,headers:b}=f;if(a&&-1===Object.keys(b).map(a=>a.toLowerCase()).indexOf(e))try{let b=c(a);f.headers={...f.headers,[e]:String(b)}}catch(a){}}return a({...b,request:f})}),f)}})},56314:(a,b,c)=>{"use strict";c.d(b,{GQ:()=>k,Qb:()=>i,bV:()=>j});let d=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],e=["TimeoutError","RequestTimeout","RequestTimeoutException"],f=[500,502,503,504],g=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],h=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],i=a=>a.$metadata?.httpStatusCode===429||d.includes(a.name)||a.$retryable?.throttling==!0,j=(a,b=0)=>a.$metadata?.clockSkewCorrected||e.includes(a.name)||g.includes(a?.code||"")||h.includes(a?.code||"")||f.includes(a.$metadata?.httpStatusCode||0)||(a=>{let b=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return!!(a&&a instanceof TypeError)&&b.has(a.message)})(a)||void 0!==a.cause&&b<=10&&j(a.cause,b+1),k=a=>{if(a.$metadata?.httpStatusCode!==void 0){let b=a.$metadata.httpStatusCode;if(500<=b&&b<=599&&!j(a))return!0}return!1}},56801:a=>{"use strict";a.exports=require("import-in-the-middle")},57075:a=>{"use strict";a.exports=require("node:stream")},57306:(a,b,c)=>{"use strict";c.d(b,{n:()=>e});var d=c(29021);let e=a=>{if(!a)return 0;if("string"==typeof a)return Buffer.byteLength(a);if("number"==typeof a.byteLength)return a.byteLength;if("number"==typeof a.size)return a.size;if("number"==typeof a.start&&"number"==typeof a.end)return a.end+1-a.start;if("string"==typeof a.path||Buffer.isBuffer(a.path))return(0,d.lstatSync)(a.path).size;else if("number"==typeof a.fd)return(0,d.fstatSync)(a.fd).size;throw Error(`Body Length computation failed for ${a}`)}},57828:(a,b,c)=>{"use strict";c.d(b,{q:()=>k});var d=c(40819),e=c(84627),f=c(2471);let g=a=>Object.entries(a).filter(([a])=>a.startsWith(e.I.SSO_SESSION+f.Q)).reduce((a,[b,c])=>({...a,[b.substring(b.indexOf(f.Q)+1)]:c}),{});var h=c(25149),i=c(39122);let j=()=>({}),k=async(a={})=>(0,i.$)(a.configFilepath??(0,d.g)()).then(h.A).then(g).catch(j)},57975:a=>{"use strict";a.exports=require("node:util")},59088:(a,b,c)=>{"use strict";c.d(b,{o:()=>f});let d=(a,b)=>{let c=[];if(a&&c.push(a),b)for(let a of b)c.push(a);return c},e=(a,b)=>`${a||"anonymous"}${b&&b.length>0?` (a.k.a. ${b.join(",")})`:""}`,f=()=>{let a=[],b=[],c=!1,i=new Set,j=c=>(a.forEach(a=>{c.add(a.middleware,{...a})}),b.forEach(a=>{c.addRelativeTo(a.middleware,{...a})}),c.identifyOnResolve?.(m.identifyOnResolve()),c),k=a=>{let b=[];return a.before.forEach(a=>{0===a.before.length&&0===a.after.length?b.push(a):b.push(...k(a))}),b.push(a),a.after.reverse().forEach(a=>{0===a.before.length&&0===a.after.length?b.push(a):b.push(...k(a))}),b},l=(c=!1)=>{let f=[],i=[],j={};return a.forEach(a=>{let b={...a,before:[],after:[]};for(let a of d(b.name,b.aliases))j[a]=b;f.push(b)}),b.forEach(a=>{let b={...a,before:[],after:[]};for(let a of d(b.name,b.aliases))j[a]=b;i.push(b)}),i.forEach(a=>{if(a.toMiddleware){let b=j[a.toMiddleware];if(void 0===b){if(c)return;throw Error(`${a.toMiddleware} is not found when adding ${e(a.name,a.aliases)} middleware ${a.relation} ${a.toMiddleware}`)}"after"===a.relation&&b.after.push(a),"before"===a.relation&&b.before.push(a)}}),f.sort((a,b)=>g[b.step]-g[a.step]||h[b.priority||"normal"]-h[a.priority||"normal"]).map(k).reduce((a,b)=>(a.push(...b),a),[])},m={add:(b,c={})=>{let{name:f,override:g,aliases:h}=c,j={step:"initialize",priority:"normal",middleware:b,...c},k=d(f,h);if(k.length>0){if(k.some(a=>i.has(a))){if(!g)throw Error(`Duplicate middleware name '${e(f,h)}'`);for(let b of k){let c=a.findIndex(a=>a.name===b||a.aliases?.some(a=>a===b));if(-1===c)continue;let d=a[c];if(d.step!==j.step||j.priority!==d.priority)throw Error(`"${e(d.name,d.aliases)}" middleware with ${d.priority} priority in ${d.step} step cannot be overridden by "${e(f,h)}" middleware with ${j.priority} priority in ${j.step} step.`);a.splice(c,1)}}for(let a of k)i.add(a)}a.push(j)},addRelativeTo:(a,c)=>{let{name:f,override:g,aliases:h}=c,j={middleware:a,...c},k=d(f,h);if(k.length>0){if(k.some(a=>i.has(a))){if(!g)throw Error(`Duplicate middleware name '${e(f,h)}'`);for(let a of k){let c=b.findIndex(b=>b.name===a||b.aliases?.some(b=>b===a));if(-1===c)continue;let d=b[c];if(d.toMiddleware!==j.toMiddleware||d.relation!==j.relation)throw Error(`"${e(d.name,d.aliases)}" middleware ${d.relation} "${d.toMiddleware}" middleware cannot be overridden by "${e(f,h)}" middleware ${j.relation} "${j.toMiddleware}" middleware.`);b.splice(c,1)}}for(let a of k)i.add(a)}b.push(j)},clone:()=>j(f()),use:a=>{a.applyToStack(m)},remove:c=>"string"==typeof c?(c=>{let e=!1,f=a=>{let b=d(a.name,a.aliases);if(b.includes(c)){for(let a of(e=!0,b))i.delete(a);return!1}return!0};return a=a.filter(f),b=b.filter(f),e})(c):(c=>{let e=!1,f=a=>{if(a.middleware===c){for(let b of(e=!0,d(a.name,a.aliases)))i.delete(b);return!1}return!0};return a=a.filter(f),b=b.filter(f),e})(c),removeByTag:c=>{let e=!1,f=a=>{let{tags:b,name:f,aliases:g}=a;if(b&&b.includes(c)){for(let a of d(f,g))i.delete(a);return e=!0,!1}return!0};return a=a.filter(f),b=b.filter(f),e},concat:a=>{let b=j(f());return b.use(a),b.identifyOnResolve(c||b.identifyOnResolve()||(a.identifyOnResolve?.()??!1)),b},applyToStack:j,identify:()=>l(!0).map(a=>{let b=a.step??a.relation+" "+a.toMiddleware;return e(a.name,a.aliases)+" - "+b}),identifyOnResolve:a=>("boolean"==typeof a&&(c=a),c),resolve:(a,b)=>{for(let c of l().map(a=>a.middleware).reverse())a=c(a,b);return c&&console.log(m.identify()),a}};return m},g={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},h={high:3,normal:2,low:1}},60850:(a,b,c)=>{"use strict";c.d(b,{X:()=>e});let d=RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),e=(a,b=!1)=>{if(!b)return d.test(a);for(let b of a.split("."))if(!e(b))return!1;return!0}},61401:(a,b,c)=>{"use strict";c.d(b,{o:()=>e});let d=RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),e=a=>d.test(a)||a.startsWith("[")&&a.endsWith("]")},61575:(a,b,c)=>{"use strict";c.d(b,{l:()=>d});let d=a=>{switch(a){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}}},61797:(a,b,c)=>{"use strict";c.d(b,{c:()=>d});class d{constructor(a){this.statusCode=a.statusCode,this.reason=a.reason,this.headers=a.headers||{},this.body=a.body}static isInstance(a){return!!a&&"number"==typeof a.statusCode&&"object"==typeof a.headers}}},62267:(a,b,c)=>{"use strict";let d;b.A=void 0;let e=c(84297),f="1"===process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA||"true"===process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA;f||(globalThis.awslambda=globalThis.awslambda||{});let g={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")};class h{static storage=new e.AsyncLocalStorage;static PROTECTED_KEYS=g;static run(a,b){return this.storage.run({...a},b)}static getContext(){return this.storage.getStore()}static get(a){let b=this.storage.getStore();return b?.[a]}static set(a,b){if(this.isProtectedKey(a))throw Error("Cannot modify protected Lambda context field");let c=this.storage.getStore();c&&(c[a]=b)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return void 0!==this.storage.getStore()}static isProtectedKey(a){return a===this.PROTECTED_KEYS.REQUEST_ID||a===this.PROTECTED_KEYS.X_RAY_TRACE_ID}}!f&&globalThis.awslambda?.InvokeStore?d=globalThis.awslambda.InvokeStore:(d=h,!f&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=d)),b.A=d},62817:(a,b,c)=>{"use strict";c.d(b,{R:()=>d});let d=a=>`AWS_BEARER_TOKEN_${a.replace(/[\s-]/g,"_").toUpperCase()}`},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64021:(a,b,c)=>{"use strict";c.d(b,{m:()=>bp});var d,e=c(43362),f=c(72492),g=c(67726),h=c(34477),i=c(52473);class j{signer;constructor(a){this.signer=a.signer}presign(a,b={}){return this.signer.presign(a,b)}async sign(a,b){return i.K.isInstance(a)&&("ws:"===a.protocol||"wss:"===a.protocol)?{...await this.signer.presign({...a,body:""},{...b,expiresIn:60,unsignableHeaders:new Set(Object.keys(a.headers).filter(a=>"host"!==a))}),body:a.body}:this.signer.sign(a,b)}}var k=c(99560),l=c(77931),m=c(37293),n=c(35424),o=c(55760),p=c(21370),q=c(90093),r=c(25763),s=c(86238),t=c(35476),u=c(18198),v=c(86963),w=c(65934);let x=async(a,b,c)=>({operation:(0,v.u)(b).operation,region:await (0,w.t)(a.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),y=a=>{let b=[];return a.operation,b.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:a.region},propertiesExtractor:(a,b)=>({signingProperties:{config:a,context:b}})}),b.push({schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:a,filepath:b,configFilepath:c,ignoreCache:d},e)=>({identityProperties:{profile:a,filepath:b,configFilepath:c,ignoreCache:d}})}),b};var z=c(67165);let A={rE:"3.887.0"};var B=c(17559),C=c(12440),D=c(82242),E=c(97677),F=c(54418),G=c(5259),H=c(75391),I=c(49884);let J="AWS_EC2_METADATA_DISABLED",K=async a=>{let{ENV_CMDS_FULL_URI:b,ENV_CMDS_RELATIVE_URI:d,fromContainerMetadata:e,fromInstanceMetadata:f}=await c.e(8610).then(c.bind(c,28610));if(process.env[d]||process.env[b]){a.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:b}=await Promise.all([c.e(7756),c.e(7208)]).then(c.bind(c,67208));return(0,G.c)(b(a),e(a))}return process.env[J]&&"false"!==process.env[J]?async()=>{throw new H.C("EC2 Instance Metadata Service access disabled",{logger:a.logger})}:(a.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),f(a))},L=!1,M=(a={})=>(0,F.B)((0,G.c)(async()=>{if(a.profile??process.env[I.Ch])throw process.env[E.yG]&&process.env[E.pi]&&!L&&((a.logger?.warn&&a.logger?.constructor?.name!=="NoOpLogger"?a.logger.warn.bind(a.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),L=!0),new H.C("AWS_PROFILE is set, skipping fromEnv provider.",{logger:a.logger,tryNextLink:!0});return a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,E.sF)(a)()},async()=>{a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:b,ssoAccountId:d,ssoRegion:e,ssoRoleName:f,ssoSession:g}=a;if(!b&&!d&&!e&&!f&&!g)throw new H.C("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:a.logger});let{fromSSO:h}=await c.e(8457).then(c.bind(c,18457));return h(a)()},async()=>{a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:b}=await c.e(8238).then(c.bind(c,98238));return b(a)()},async()=>{a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:b}=await c.e(5117).then(c.bind(c,15117));return b(a)()},async()=>{a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:b}=await c.e(4596).then(c.bind(c,14596));return b(a)()},async()=>(a.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await K(a))()),async()=>{throw new H.C("Could not load credentials from any providers",{tryNextLink:!1,logger:a.logger})}),O,N),N=a=>a?.expiration!==void 0,O=a=>a?.expiration!==void 0&&a.expiration.getTime()-Date.now()<3e5;Object.create;Object.create;var P=("function"==typeof SuppressedError&&SuppressedError,c(79428)),Q="undefined"!=typeof Buffer&&Buffer.from?function(a){return Buffer.from(a,"utf8")}:a=>{let b=((a,b)=>{if("string"!=typeof a)throw TypeError(`The "input" argument must be of type string. Received type ${typeof a} (${a})`);return b?P.Buffer.from(a,b):P.Buffer.from(a)})(a,"utf8");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT)};!function(){function a(){this.crc32=new R}a.prototype.update=function(a){("string"==typeof a?0===a.length:0===a.byteLength)||this.crc32.update(a instanceof Uint8Array?a:"string"==typeof a?Q(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a))},a.prototype.digest=function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){return function(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}(this,function(a){var b;return[2,new Uint8Array([(0xff000000&(b=this.crc32.digest()))>>24,(0xff0000&b)>>16,(65280&b)>>8,255&b])]})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},a.prototype.reset=function(){this.crc32=new R}}();var R=function(){function a(){this.checksum=0xffffffff}return a.prototype.update=function(a){var b,c;try{for(var d=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),e=d.next();!e.done;e=d.next()){var f=e.value;this.checksum=this.checksum>>>8^S[(this.checksum^f)&255]}}catch(a){b={error:a}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}return this},a.prototype.digest=function(){return(0xffffffff^this.checksum)>>>0},a}(),S=function(a){if(!Uint32Array.from){for(var b=new Uint32Array(a.length),c=0;c<a.length;)b[c]=a[c],c+=1;return b}return Uint32Array.from(a)}([0,0x77073096,0xee0e612c,0x990951ba,0x76dc419,0x706af48f,0xe963a535,0x9e6495a3,0xedb8832,0x79dcb8a4,0xe0d5e91e,0x97d2d988,0x9b64c2b,0x7eb17cbd,0xe7b82d07,0x90bf1d91,0x1db71064,0x6ab020f2,0xf3b97148,0x84be41de,0x1adad47d,0x6ddde4eb,0xf4d4b551,0x83d385c7,0x136c9856,0x646ba8c0,0xfd62f97a,0x8a65c9ec,0x14015c4f,0x63066cd9,0xfa0f3d63,0x8d080df5,0x3b6e20c8,0x4c69105e,0xd56041e4,0xa2677172,0x3c03e4d1,0x4b04d447,0xd20d85fd,0xa50ab56b,0x35b5a8fa,0x42b2986c,0xdbbbc9d6,0xacbcf940,0x32d86ce3,0x45df5c75,0xdcd60dcf,0xabd13d59,0x26d930ac,0x51de003a,0xc8d75180,0xbfd06116,0x21b4f4b5,0x56b3c423,0xcfba9599,0xb8bda50f,0x2802b89e,0x5f058808,0xc60cd9b2,0xb10be924,0x2f6f7c87,0x58684c11,0xc1611dab,0xb6662d3d,0x76dc4190,0x1db7106,0x98d220bc,0xefd5102a,0x71b18589,0x6b6b51f,0x9fbfe4a5,0xe8b8d433,0x7807c9a2,0xf00f934,0x9609a88e,0xe10e9818,0x7f6a0dbb,0x86d3d2d,0x91646c97,0xe6635c01,0x6b6b51f4,0x1c6c6162,0x856530d8,0xf262004e,0x6c0695ed,0x1b01a57b,0x8208f4c1,0xf50fc457,0x65b0d9c6,0x12b7e950,0x8bbeb8ea,0xfcb9887c,0x62dd1ddf,0x15da2d49,0x8cd37cf3,0xfbd44c65,0x4db26158,0x3ab551ce,0xa3bc0074,0xd4bb30e2,0x4adfa541,0x3dd895d7,0xa4d1c46d,0xd3d6f4fb,0x4369e96a,0x346ed9fc,0xad678846,0xda60b8d0,0x44042d73,0x33031de5,0xaa0a4c5f,0xdd0d7cc9,0x5005713c,0x270241aa,0xbe0b1010,0xc90c2086,0x5768b525,0x206f85b3,0xb966d409,0xce61e49f,0x5edef90e,0x29d9c998,0xb0d09822,0xc7d7a8b4,0x59b33d17,0x2eb40d81,0xb7bd5c3b,0xc0ba6cad,0xedb88320,0x9abfb3b6,0x3b6e20c,0x74b1d29a,0xead54739,0x9dd277af,0x4db2615,0x73dc1683,0xe3630b12,0x94643b84,0xd6d6a3e,0x7a6a5aa8,0xe40ecf0b,0x9309ff9d,0xa00ae27,0x7d079eb1,0xf00f9344,0x8708a3d2,0x1e01f268,0x6906c2fe,0xf762575d,0x806567cb,0x196c3671,0x6e6b06e7,0xfed41b76,0x89d32be0,0x10da7a5a,0x67dd4acc,0xf9b9df6f,0x8ebeeff9,0x17b7be43,0x60b08ed5,0xd6d6a3e8,0xa1d1937e,0x38d8c2c4,0x4fdff252,0xd1bb67f1,0xa6bc5767,0x3fb506dd,0x48b2364b,0xd80d2bda,0xaf0a1b4c,0x36034af6,0x41047a60,0xdf60efc3,0xa867df55,0x316e8eef,0x4669be79,0xcb61b38c,0xbc66831a,0x256fd2a0,0x5268e236,0xcc0c7795,0xbb0b4703,0x220216b9,0x5505262f,0xc5ba3bbe,0xb2bd0b28,0x2bb45a92,0x5cb36a04,0xc2d7ffa7,0xb5d0cf31,0x2cd99e8b,0x5bdeae1d,0x9b64c2b0,0xec63f226,0x756aa39c,0x26d930a,0x9c0906a9,0xeb0e363f,0x72076785,0x5005713,0x95bf4a82,0xe2b87a14,0x7bb12bae,0xcb61b38,0x92d28e9b,0xe5d5be0d,0x7cdcefb7,0xbdbdf21,0x86d3d2d4,0xf1d4e242,0x68ddb3f8,0x1fda836e,0x81be16cd,0xf6b9265b,0x6fb077e1,0x18b74777,0x88085ae6,0xff0f6a70,0x66063bca,0x11010b5c,0x8f659eff,0xf862ae69,0x616bffd3,0x166ccf45,0xa00ae278,0xd70dd2ee,0x4e048354,0x3903b3c2,0xa7672661,0xd06016f7,0x4969474d,0x3e6e77db,0xaed16a4a,0xd9d65adc,0x40df0b66,936918e3,0xa9bcae53,0xdebb9ec5,0x47b2cf7f,0x30b5ffe9,0xbdbdf21c,0xcabac28a,0x53b39330,0x24b4a3a6,0xbad03605,0xcdd70693,0x54de5729,0x23d967bf,0xb3667a2e,0xc4614ab8,0x5d681b02,0x2a6f2b94,0xb40bbe37,0xc30c8ea1,0x5a05df1b,0x2d02ef8d]),T=c(46081);class U{constructor(a){if(this.bytes=a,8!==a.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(a){if(a>0x8000000000000000||a<-0x8000000000000000)throw Error(`${a} is too large (or, if negative, too small) to represent as an Int64`);let b=new Uint8Array(8);for(let c=7,d=Math.abs(Math.round(a));c>-1&&d>0;c--,d/=256)b[c]=d;return a<0&&V(b),new U(b)}valueOf(){let a=this.bytes.slice(0),b=128&a[0];return b&&V(a),parseInt((0,T.n)(a),16)*(b?-1:1)}toString(){return String(this.valueOf())}}function V(a){for(let b=0;b<8;b++)a[b]^=255;for(let b=7;b>-1&&(a[b]++,0===a[b]);b--);}class W{constructor(a,b){this.toUtf8=a,this.fromUtf8=b}format(a){let b=[];for(let c of Object.keys(a)){let d=this.fromUtf8(c);b.push(Uint8Array.from([d.byteLength]),d,this.formatHeaderValue(a[c]))}let c=new Uint8Array(b.reduce((a,b)=>a+b.byteLength,0)),d=0;for(let a of b)c.set(a,d),d+=a.byteLength;return c}formatHeaderValue(a){switch(a.type){case"boolean":return Uint8Array.from([+!a.value]);case"byte":return Uint8Array.from([2,a.value]);case"short":let b=new DataView(new ArrayBuffer(3));return b.setUint8(0,3),b.setInt16(1,a.value,!1),new Uint8Array(b.buffer);case"integer":let c=new DataView(new ArrayBuffer(5));return c.setUint8(0,4),c.setInt32(1,a.value,!1),new Uint8Array(c.buffer);case"long":let d=new Uint8Array(9);return d[0]=5,d.set(a.value.bytes,1),d;case"binary":let e=new DataView(new ArrayBuffer(3+a.value.byteLength));e.setUint8(0,6),e.setUint16(1,a.value.byteLength,!1);let f=new Uint8Array(e.buffer);return f.set(a.value,3),f;case"string":let g=this.fromUtf8(a.value),h=new DataView(new ArrayBuffer(3+g.byteLength));h.setUint8(0,7),h.setUint16(1,g.byteLength,!1);let i=new Uint8Array(h.buffer);return i.set(g,3),i;case"timestamp":let j=new Uint8Array(9);return j[0]=8,j.set(U.fromNumber(a.value.valueOf()).bytes,1),j;case"uuid":if(!ae.test(a.value))throw Error(`Invalid UUID received: ${a.value}`);let k=new Uint8Array(17);return k[0]=9,k.set((0,T.a)(a.value.replace(/\-/g,"")),1),k}}parse(a){let b={},c=0;for(;c<a.byteLength;){let d=a.getUint8(c++),e=this.toUtf8(new Uint8Array(a.buffer,a.byteOffset+c,d));switch(c+=d,a.getUint8(c++)){case 0:b[e]={type:X,value:!0};break;case 1:b[e]={type:X,value:!1};break;case 2:b[e]={type:Y,value:a.getInt8(c++)};break;case 3:b[e]={type:Z,value:a.getInt16(c,!1)},c+=2;break;case 4:b[e]={type:$,value:a.getInt32(c,!1)},c+=4;break;case 5:b[e]={type:_,value:new U(new Uint8Array(a.buffer,a.byteOffset+c,8))},c+=8;break;case 6:let f=a.getUint16(c,!1);c+=2,b[e]={type:aa,value:new Uint8Array(a.buffer,a.byteOffset+c,f)},c+=f;break;case 7:let g=a.getUint16(c,!1);c+=2,b[e]={type:ab,value:this.toUtf8(new Uint8Array(a.buffer,a.byteOffset+c,g))},c+=g;break;case 8:b[e]={type:ac,value:new Date(new U(new Uint8Array(a.buffer,a.byteOffset+c,8)).valueOf())},c+=8;break;case 9:let h=new Uint8Array(a.buffer,a.byteOffset+c,16);c+=16,b[e]={type:ad,value:`${(0,T.n)(h.subarray(0,4))}-${(0,T.n)(h.subarray(4,6))}-${(0,T.n)(h.subarray(6,8))}-${(0,T.n)(h.subarray(8,10))}-${(0,T.n)(h.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return b}}!function(a){a[a.boolTrue=0]="boolTrue",a[a.boolFalse=1]="boolFalse",a[a.byte=2]="byte",a[a.short=3]="short",a[a.integer=4]="integer",a[a.long=5]="long",a[a.byteArray=6]="byteArray",a[a.string=7]="string",a[a.timestamp=8]="timestamp",a[a.uuid=9]="uuid"}(d||(d={}));let X="boolean",Y="byte",Z="short",$="integer",_="long",aa="binary",ab="string",ac="timestamp",ad="uuid",ae=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,af=16;class ag{constructor(a,b){this.headerMarshaller=new W(a,b),this.messageBuffer=[],this.isEndOfStream=!1}feed(a){this.messageBuffer.push(this.decode(a))}endOfStream(){this.isEndOfStream=!0}getMessage(){let a=this.messageBuffer.pop(),b=this.isEndOfStream;return{getMessage:()=>a,isEndOfStream:()=>b}}getAvailableMessages(){let a=this.messageBuffer;this.messageBuffer=[];let b=this.isEndOfStream;return{getMessages:()=>a,isEndOfStream:()=>b}}encode({headers:a,body:b}){let c=this.headerMarshaller.format(a),d=c.byteLength+b.byteLength+16,e=new Uint8Array(d),f=new DataView(e.buffer,e.byteOffset,e.byteLength),g=new R;return f.setUint32(0,d,!1),f.setUint32(4,c.byteLength,!1),f.setUint32(8,g.update(e.subarray(0,8)).digest(),!1),e.set(c,12),e.set(b,c.byteLength+12),f.setUint32(d-4,g.update(e.subarray(8,d-4)).digest(),!1),e}decode(a){let{headers:b,body:c}=function({byteLength:a,byteOffset:b,buffer:c}){if(a<af)throw Error("Provided message too short to accommodate event stream message overhead");let d=new DataView(c,b,a),e=d.getUint32(0,!1);if(a!==e)throw Error("Reported message length does not match received message length");let f=d.getUint32(4,!1),g=d.getUint32(8,!1),h=d.getUint32(a-4,!1),i=new R().update(new Uint8Array(c,b,8));if(g!==i.digest())throw Error(`The prelude checksum specified in the message (${g}) does not match the calculated CRC32 checksum (${i.digest()})`);if(i.update(new Uint8Array(c,b+8,a-12)),h!==i.digest())throw Error(`The message checksum (${i.digest()}) did not match the expected value of ${h}`);return{headers:new DataView(c,b+8+4,f),body:new Uint8Array(c,b+8+4+f,e-f-16)}}(a);return{headers:this.headerMarshaller.parse(b),body:c}}formatHeaders(a){return this.headerMarshaller.format(a)}}var ah=c(27910);class ai extends ah.Transform{priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(a){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...a}),this.priorSignature=a.priorSignature,this.eventStreamCodec=a.eventStreamCodec,this.messageSigner=a.messageSigner,this.systemClockOffsetProvider=a.systemClockOffsetProvider}async _transform(a,b,c){try{let b=new Date(Date.now()+await this.systemClockOffsetProvider()),d={":date":{type:"timestamp",value:b}},e=await this.messageSigner.sign({message:{body:a,headers:d},priorSignature:this.priorSignature},{signingDate:b});this.priorSignature=e.signature;let f=this.eventStreamCodec.encode({headers:{...d,":chunk-signature":{type:"binary",value:function(a){let b=Buffer.from(a,"hex");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength/Uint8Array.BYTES_PER_ELEMENT)}(e.signature)}},body:a});return this.push(f),c()}catch(a){c(a)}}}class aj{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(a){this.messageSigner=a.messageSigner,this.eventStreamCodec=new ag(a.utf8Encoder,a.utf8Decoder),this.systemClockOffsetProvider=async()=>a.systemClockOffset??0}async handle(a,b,c={}){let d,e=b.request,{body:f,query:g}=e;if(!(f instanceof ah.Readable))throw Error("Eventstream payload must be a Readable stream.");e.body=new ah.PassThrough({objectMode:!0});let h=e.headers?.authorization?.match(/Signature=([\w]+)$/),i=new ai({priorSignature:h?.[1]??g?.["X-Amz-Signature"]??"",eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});(0,ah.pipeline)(f,i,e.body,a=>{if(a)throw a});try{d=await a(b)}catch(a){throw e.body.end(),a}return d}}let ak=a=>new aj(a);var al=c(62817),am=c(72294),an=c(84509),ao=c(80390),ap=c(33449),aq=c(7801),ar=c(11697);class as{async sign(a,b,c){let d=i.K.clone(a);if(!b.token)throw Error("request could not be signed with `token` since the `token` is not defined");return d.headers.Authorization=`Bearer ${b.token}`,d}}class at{constructor(a){this.options=a}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let a of this.options.messageStream){let b=await this.options.deserializer(a);void 0!==b&&(yield b)}}}class au{constructor(a){this.options=a}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let a of this.options.inputStream){let b=this.options.decoder.decode(a);yield b}}}class av{constructor(a){this.options=a}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let a of this.options.messageStream){let b=this.options.encoder.encode(a);yield b}this.options.includeEndFrame&&(yield new Uint8Array(0))}}class aw{constructor(a){this.options=a}[Symbol.asyncIterator](){return this.asyncIterator()}async *asyncIterator(){for await(let a of this.options.inputStream){let b=this.options.serializer(a);yield b}}}class ax{constructor({utf8Encoder:a,utf8Decoder:b}){this.eventStreamCodec=new ag(a,b),this.utfEncoder=a}deserialize(a,b){var c;return new at({messageStream:new au({inputStream:function(a){let b=0,c=0,d=null,e=null,f=a=>{if("number"!=typeof a)throw Error("Attempted to allocate an event message where size was not a number: "+a);b=a,c=4,new DataView((d=new Uint8Array(a)).buffer).setUint32(0,a,!1)};return{[Symbol.asyncIterator]:async function*(){let g=a[Symbol.asyncIterator]();for(;;){let{value:a,done:h}=await g.next();if(h){if(b)if(b===c)yield d;else throw Error("Truncated event message received.");return}let i=a.length,j=0;for(;j<i;){if(!d){let b=i-j;e||(e=new Uint8Array(4));let d=Math.min(4-c,b);if(e.set(a.slice(j,j+d),c),c+=d,j+=d,c<4)break;f(new DataView(e.buffer).getUint32(0,!1)),e=null}let g=Math.min(b-c,i-j);d.set(a.slice(j,j+g),c),c+=g,j+=g,b&&b===c&&(yield d,d=null,b=0,c=0)}}}}}(a),decoder:this.eventStreamCodec}),deserializer:(c=this.utfEncoder,async function(a){let{value:d}=a.headers[":message-type"];if("error"===d){let b=Error(a.headers[":error-message"].value||"UnknownError");throw b.name=a.headers[":error-code"].value,b}if("exception"===d){let d=a.headers[":exception-type"].value,e=await b({[d]:a});if(e.$unknown){let b=Error(c(a.body));throw b.name=d,b}throw e[d]}if("event"===d){let c={[a.headers[":event-type"].value]:a},d=await b(c);if(d.$unknown)return;return d}throw Error(`Unrecognizable event type: ${a.headers[":event-type"].value}`)})})}serialize(a,b){return new av({messageStream:new aw({inputStream:a,serializer:b}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}async function*ay(a){let b=!1,c=!1,d=[];for(a.on("error",a=>{if(b||(b=!0),a)throw a}),a.on("data",a=>{d.push(a)}),a.on("end",()=>{b=!0});!c;){let a=await new Promise(a=>setTimeout(()=>a(d.shift()),0));a&&(yield a),c=b&&0===d.length}}class az{constructor({utf8Encoder:a,utf8Decoder:b}){this.universalMarshaller=new ax({utf8Decoder:b,utf8Encoder:a})}deserialize(a,b){let c="function"==typeof a[Symbol.asyncIterator]?a:ay(a);return this.universalMarshaller.deserialize(c,b)}serialize(a,b){return ah.Readable.from(this.universalMarshaller.serialize(a,b))}}let aA=a=>new az(a);var aB=c(9500),aC=c(35674),aD=c(61797),aE=c(81176),aF=c(51115),aG=c.n(aF),aH=c(97722);class aI{constructor(a){this.sessions=[],this.sessions=a??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(a){this.sessions.push(a)}contains(a){return this.sessions.includes(a)}remove(a){this.sessions=this.sessions.filter(b=>b!==a)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(a){for(let b of this.sessions)b!==a||b.destroyed||b.destroy()}}class aJ{constructor(a){if(this.sessionCache=new Map,this.config=a,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError("maxConcurrency must be greater than zero.")}lease(a,b){let c=this.getUrlString(a),d=this.sessionCache.get(c);if(d){let a=d.poll();if(a&&!this.config.disableConcurrency)return a}let e=aG().connect(c);this.config.maxConcurrency&&e.settings({maxConcurrentStreams:this.config.maxConcurrency},b=>{if(b)throw Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+a.destination.toString())}),e.unref();let f=()=>{e.destroy(),this.deleteSession(c,e)};e.on("goaway",f),e.on("error",f),e.on("frameError",f),e.on("close",()=>this.deleteSession(c,e)),b.requestTimeout&&e.setTimeout(b.requestTimeout,f);let g=this.sessionCache.get(c)||new aI;return g.offerLast(e),this.sessionCache.set(c,g),e}deleteSession(a,b){let c=this.sessionCache.get(a);c&&c.contains(b)&&(c.remove(b),this.sessionCache.set(a,c))}release(a,b){let c=this.getUrlString(a);this.sessionCache.get(c)?.offerLast(b)}destroy(){for(let[a,b]of this.sessionCache){for(let a of b)a.destroyed||a.destroy(),b.remove(a);this.sessionCache.delete(a)}}setMaxConcurrentStreams(a){if(a&&a<=0)throw RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=a}setDisableConcurrentStreams(a){this.config.disableConcurrency=a}getUrlString(a){return a.destination.toString()}}var aK=c(53051);class aL{static create(a){return"function"==typeof a?.handle?a:new aL(a)}constructor(a){this.metadata={handlerProtocol:"h2"},this.connectionManager=new aJ({}),this.configProvider=new Promise((b,c)=>{"function"==typeof a?a().then(a=>{b(a||{})}).catch(c):b(a||{})})}destroy(){this.connectionManager.destroy()}async handle(a,{abortSignal:b,requestTimeout:c}={}){!this.config&&(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:d,disableConcurrentStreams:e}=this.config,f=c??d;return new Promise((c,d)=>{let g,h=!1,i=async a=>{await g,c(a)},j=async a=>{await g,d(a)};if(b?.aborted){h=!0;let a=Error("Request aborted");a.name="AbortError",j(a);return}let{hostname:k,method:l,port:m,protocol:n,query:o}=a,p="";if(null!=a.username||null!=a.password){let b=a.username??"",c=a.password??"";p=`${b}:${c}@`}let q=`${n}//${p}${k}${m?`:${m}`:""}`,r={destination:new URL(q)},s=this.connectionManager.lease(r,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:e||!1}),t=a=>{e&&this.destroySession(s),h=!0,j(a)},u=(0,aE.G)(o||{}),v=a.path;u&&(v+=`?${u}`),a.fragment&&(v+=`#${a.fragment}`);let w=s.request({...a.headers,[aF.constants.HTTP2_HEADER_PATH]:v,[aF.constants.HTTP2_HEADER_METHOD]:l});if(s.ref(),w.on("response",a=>{let b=new aD.c({statusCode:a[":status"]||-1,headers:(0,aH.u)(a),body:w});h=!0,i({response:b}),e&&(s.close(),this.connectionManager.deleteSession(q,s))}),f&&w.setTimeout(f,()=>{w.close();let a=Error(`Stream timed out because of no activity for ${f} ms`);a.name="TimeoutError",t(a)}),b){let a=()=>{w.close();let a=Error("Request aborted");a.name="AbortError",t(a)};"function"==typeof b.addEventListener?(b.addEventListener("abort",a,{once:!0}),w.once("close",()=>b.removeEventListener("abort",a))):b.onabort=a}w.on("frameError",(a,b,c)=>{t(Error(`Frame type id ${a} in stream id ${c} has failed with code ${b}.`))}),w.on("error",t),w.on("aborted",()=>{t(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${w.rstCode}.`))}),w.on("close",()=>{s.unref(),e&&s.destroy(),h||t(Error("Unexpected error: http2 request did not get a response"))}),g=(0,aK.f)(w,a,f)})}updateHttpClientConfig(a,b){this.config=void 0,this.configProvider=this.configProvider.then(c=>({...c,[a]:b}))}httpHandlerConfigs(){return this.config??{}}destroySession(a){a.destroyed||a.destroy()}}var aM=c(53484),aN=c(57306),aO=c(20406),aP=c(5301),aQ=c(5222),aR=c(74868),aS=c(95833),aT=c(54004),aU=c(22465),aV=c(95874),aW=c(73978),aX=c(38620),aY=c(28083);let aZ="required",a$="argv",a_="isSet",a0="booleanEquals",a1="error",a2="endpoint",a3="tree",a4="PartitionResult",a5={[aZ]:!1,type:"String"},a6={[aZ]:!0,default:!1,type:"Boolean"},a7={ref:"Endpoint"},a8={fn:a0,[a$]:[{ref:"UseFIPS"},!0]},a9={fn:a0,[a$]:[{ref:"UseDualStack"},!0]},ba={},bb={fn:"getAttr",[a$]:[{ref:a4},"supportsFIPS"]},bc={fn:a0,[a$]:[!0,{fn:"getAttr",[a$]:[{ref:a4},"supportsDualStack"]}]},bd=[a8],be=[a9],bf=[{ref:"Region"}],bg={version:"1.0",parameters:{Region:a5,UseDualStack:a6,UseFIPS:a6,Endpoint:a5},rules:[{conditions:[{fn:a_,[a$]:[a7]}],rules:[{conditions:bd,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:a1},{rules:[{conditions:be,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:a1},{endpoint:{url:a7,properties:ba,headers:ba},type:a2}],type:a3}],type:a3},{rules:[{conditions:[{fn:a_,[a$]:bf}],rules:[{conditions:[{fn:"aws.partition",[a$]:bf,assign:a4}],rules:[{conditions:[a8,a9],rules:[{conditions:[{fn:a0,[a$]:[!0,bb]},bc],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ba,headers:ba},type:a2}],type:a3}],type:a3},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:a1}],type:a3},{conditions:bd,rules:[{conditions:[{fn:a0,[a$]:[bb,!0]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ba,headers:ba},type:a2}],type:a3}],type:a3},{error:"FIPS is enabled but this partition does not support FIPS",type:a1}],type:a3},{conditions:be,rules:[{conditions:[bc],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ba,headers:ba},type:a2}],type:a3}],type:a3},{error:"DualStack is enabled but this partition does not support DualStack",type:a1}],type:a3},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:ba,headers:ba},type:a2}],type:a3}],type:a3}],type:a3},{error:"Invalid Configuration: Missing Region",type:a1}],type:a3}]},bh=new aW.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),bi=(a,b={})=>bh.get(a,()=>(0,aX.s)(bg,{endpointParams:a,logger:b.logger}));aY.m.aws=aV.UF;var bj=c(61575),bk=c(5884),bl=c(72162),bm=c(67176),bn=c(38350),bo=c(41217);class bp extends s.K{config;constructor(...[a]){let b=(a=>{(0,bl.I)(process.version);let b=(0,bk.I)(a),c=()=>b().then(bj.l),d=(a=>({apiVersion:"2023-09-30",base64Decoder:a?.base64Decoder??aR.E,base64Encoder:a?.base64Encoder??aS.n,disableHostPrefix:a?.disableHostPrefix??!1,endpointProvider:a?.endpointProvider??bi,extensions:a?.extensions??[],httpAuthSchemeProvider:a?.httpAuthSchemeProvider??y,httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:a=>a.getIdentityProvider("aws.auth#sigv4"),signer:new D.f2},{schemeId:"smithy.api#httpBearerAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new as}],logger:a?.logger??new aP.N,serviceId:a?.serviceId??"Bedrock Runtime",urlParser:a?.urlParser??aQ.D,utf8Decoder:a?.utf8Decoder??aT.a,utf8Encoder:a?.utf8Encoder??aU.P}))(a);(0,B.I)(process.version);let e={profile:a?.profile,logger:d.logger,signingName:"bedrock"};return{...d,...a,runtime:"node",defaultsMode:b,authSchemePreference:a?.authSchemePreference??(0,aC.Z)(C.$,e),bodyLengthChecker:a?.bodyLengthChecker??aN.n,credentialDefaultProvider:a?.credentialDefaultProvider??M,defaultUserAgentProvider:a?.defaultUserAgentProvider??(0,ao.pf)({serviceId:d.serviceId,clientVersion:A.rE}),eventStreamPayloadHandlerProvider:a?.eventStreamPayloadHandlerProvider??ak,eventStreamSerdeProvider:a?.eventStreamSerdeProvider??aA,httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:a=>a.getIdentityProvider("aws.auth#sigv4"),signer:new D.f2},{schemeId:"smithy.api#httpBearerAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#httpBearerAuth")||(async a=>{try{return await (({logger:a,signingName:b}={})=>async()=>{if(a?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!b)throw new am.J("Please pass 'signingName' to compute environment variable key",{logger:a});let c=(0,al.R)(b);if(!(c in process.env))throw new am.J(`Token not present in '${c}' environment variable`,{logger:a});let d={token:process.env[c]};return!function(a,b,c){a.$source||(a.$source={}),a.$source[b]="3"}(d,"BEARER_SERVICE_ENV_VARS",0),d})({signingName:"bedrock"})()}catch(b){return await ((a={})=>(0,F.B)((0,G.c)((0,an.Y)(a),async()=>{throw new am.J("Could not load token from any providers",!1)}),a=>void 0!==a.expiration&&a.expiration.getTime()-Date.now()<3e5,a=>void 0!==a.expiration))(a)(a)}}),signer:new as}],maxAttempts:a?.maxAttempts??(0,aC.Z)(q.qs,a),region:a?.region??(0,aC.Z)(ap.GG,{...ap.zH,...e}),requestHandler:aL.create(a?.requestHandler??(async()=>({...await c(),disableConcurrentStreams:!0}))),retryMode:a?.retryMode??(0,aC.Z)({...q.kN,default:async()=>(await c()).retryMode||aO.L0},a),sha256:a?.sha256??aB.V.bind(null,"sha256"),streamCollector:a?.streamCollector??aM.k,useDualstackEndpoint:a?.useDualstackEndpoint??(0,aC.Z)(aq.e$,e),useFipsEndpoint:a?.useFipsEndpoint??(0,aC.Z)(ar.Ko,e),userAgentAppId:a?.userAgentAppId??(0,aC.Z)(ao.hV,e)}})(a||{});super(b),this.initConfig=b;let c=(0,z.v)(b),d=(0,h.Dc)(c),i=(0,q.$z)(d),s=(0,k.T)(i),v=(0,e.OV)(s),E=((a,b)=>{let c=Object.assign((0,bm.Rq)(a),(0,bo.xA)(a),(0,bn.e)(a),(a=>{let b=a.httpAuthSchemes,c=a.httpAuthSchemeProvider,d=a.credentials,e=a.token;return{setHttpAuthScheme(a){let c=b.findIndex(b=>b.schemeId===a.schemeId);-1===c?b.push(a):b.splice(c,1,a)},httpAuthSchemes:()=>b,setHttpAuthSchemeProvider(a){c=a},httpAuthSchemeProvider:()=>c,setCredentials(a){d=a},credentials:()=>d,setToken(a){e=a},token:()=>e}})(a));return b.forEach(a=>a.configure(c)),Object.assign(a,(0,bm.$3)(c),(0,bo.uv)(c),(0,bn.j)(c),(a=>({httpAuthSchemes:a.httpAuthSchemes(),httpAuthSchemeProvider:a.httpAuthSchemeProvider(),credentials:a.credentials(),token:a.token()}))(c))})((a=>{let{signer:b}=a;return Object.assign(a,{signer:async a=>{let c=await b(a);if(c)return new j({signer:c});throw Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})})(function(a){let b=a.signer,c=a.signer,d=Object.assign(a,{eventSigner:b,messageSigner:c}),e=d.eventStreamPayloadHandlerProvider(d);return Object.assign(d,{eventStreamPayloadHandler:e})}((a=>{let b=(0,u.K4)(a.token,u.OC,u.e);return Object.assign((0,t.h)(a),{authSchemePreference:(0,w.t)(a.authSchemePreference??[]),token:b})})((a=>Object.assign(a,{eventStreamMarshaller:a.eventStreamSerdeProvider(a)}))((0,p.C)(v))))),a?.extensions||[]);this.config=E,this.middlewareStack.use((0,h.sM)(this.config)),this.middlewareStack.use((0,r.ey)(this.config)),this.middlewareStack.use((0,o.vK)(this.config)),this.middlewareStack.use((0,e.TC)(this.config)),this.middlewareStack.use((0,f.Y7)(this.config)),this.middlewareStack.use((0,g.n)(this.config)),this.middlewareStack.use((0,l.w)(this.config,{httpAuthSchemeParametersProvider:x,identityProviderConfigProvider:async a=>new m.h({"aws.auth#sigv4":a.credentials,"smithy.api#httpBearerAuth":a.token})})),this.middlewareStack.use((0,n.l)(this.config))}destroy(){super.destroy()}}},65934:(a,b,c)=>{"use strict";c.d(b,{t:()=>d});let d=a=>{if("function"==typeof a)return a;let b=Promise.resolve(a);return()=>b}},66936:(a,b,c)=>{"use strict";c.d(b,{R:()=>d});class d extends Response{constructor(a,b){super(a,{...b,status:200,headers:{"Content-Type":"text/plain; charset=utf-8","X-Experimental-Stream-Data":"false",...b?.headers}})}}},67165:(a,b,c)=>{"use strict";c.d(b,{S:()=>e,v:()=>d});let d=a=>Object.assign(a,{useDualstackEndpoint:a.useDualstackEndpoint??!1,useFipsEndpoint:a.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),e={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}},67176:(a,b,c)=>{"use strict";c.d(b,{Rq:()=>d,$3:()=>e});let d=a=>({setRegion(b){a.region=b},region:()=>a.region}),e=a=>({region:a.region()})},67726:(a,b,c)=>{"use strict";c.d(b,{n:()=>h});let d={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var e=c(62267),f=c(52473);let g="X-Amzn-Trace-Id",h=a=>({applyToStack:a=>{a.add(a=>async b=>{let{request:c}=b;if(!f.K.isInstance(c))return a(b);let d=Object.keys(c.headers??{}).find(a=>a.toLowerCase()===g.toLowerCase())??g;if(c.headers.hasOwnProperty(d))return a(b);let h=process.env.AWS_LAMBDA_FUNCTION_NAME,i=process.env._X_AMZN_TRACE_ID,j=e.A.getXRayTraceId()??i,k=a=>"string"==typeof a&&a.length>0;return k(h)&&k(j)&&(c.headers[g]=j),a({...b,request:c})},d)}})},69940:(a,b,c)=>{"use strict";c.d(b,{u:()=>q});var d=c(59088),e=c(70316);let f=a=>"function"==typeof a?a():a;class g{constructor(a,b=new Map){this.namespace=a,this.schemas=b}static for(a){return g.registries.has(a)||g.registries.set(a,new g(a)),g.registries.get(a)}register(a,b){let c=this.normalizeShapeId(a);g.for(this.getNamespace(a)).schemas.set(c,b)}getSchema(a){let b=this.normalizeShapeId(a);if(!this.schemas.has(b))throw Error(`@smithy/core/schema - schema not found for ${b}`);return this.schemas.get(b)}getBaseException(){for(let[a,b]of this.schemas.entries())if(a.startsWith("smithy.ts.sdk.synthetic.")&&a.endsWith("ServiceException"))return b}find(a){return[...this.schemas.values()].find(a)}destroy(){g.registries.delete(this.namespace),this.schemas.clear()}normalizeShapeId(a){return a.includes("#")?a:this.namespace+"#"+a}getNamespace(a){return this.normalizeShapeId(a).split("#")[0]}}g.registries=new Map;class h{static assign(a,b){let c=Object.assign(a,b);return g.for(c.namespace).register(c.name,c),c}static[Symbol.hasInstance](a){let b=this.prototype.isPrototypeOf(a);return b||"object"!=typeof a||null===a?b:a.symbol===this.symbol}getName(){return this.namespace+"#"+this.name}}class i extends h{constructor(){super(...arguments),this.symbol=i.symbol}}i.symbol=Symbol.for("@smithy/lis");class j extends h{constructor(){super(...arguments),this.symbol=j.symbol}}j.symbol=Symbol.for("@smithy/map");let k={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128};class l extends h{constructor(){super(...arguments),this.symbol=l.symbol}}l.symbol=Symbol.for("@smithy/sim");class m extends h{constructor(){super(...arguments),this.symbol=m.symbol}}m.symbol=Symbol.for("@smithy/str");class n{constructor(a,b){this.ref=a,this.memberName=b,this.symbol=n.symbol;let c=[],d=a,e=a;for(this._isMemberSchema=!1;Array.isArray(d);)c.push(d[1]),e=f(d=d[0]),this._isMemberSchema=!0;if(c.length>0){this.memberTraits={};for(let a=c.length-1;a>=0;--a){let b=c[a];Object.assign(this.memberTraits,n.translateTraits(b))}}else this.memberTraits=0;if(e instanceof n){Object.assign(this,e),this.memberTraits=Object.assign({},e.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=b??e.memberName;return}if(this.schema=f(e),this.schema&&"object"==typeof this.schema?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(this.schema instanceof h?this.schema.getName?.():void 0)??this.memberName??this.getSchemaName(),this._isMemberSchema&&!b)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](a){return h[Symbol.hasInstance].bind(this)(a)}static of(a){if(a instanceof n)return a;if(Array.isArray(a)){let[b,c]=a;if(b instanceof n)return Object.assign(b.getMergedTraits(),n.translateTraits(c)),b;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(a,null,2)}.`)}return new n(a)}static translateTraits(a){if("object"==typeof a)return a;a|=0;let b={},c=0;for(let d of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(a>>c++&1)==1&&(b[d]=1);return b}getSchema(){return this.schema instanceof n?(Object.assign(this,{schema:this.schema.getSchema()}),this.schema):this.schema instanceof l?f(this.schema.schemaRef):f(this.schema)}getName(a=!1){return!a&&this.name&&this.name.includes("#")?this.name.split("#")[1]:this.name||void 0}getMemberName(){if(!this.isMemberSchema())throw Error(`@smithy/core/schema - non-member schema: ${this.getName(!0)}`);return this.memberName}isMemberSchema(){return this._isMemberSchema}isUnitSchema(){return"unit"===this.getSchema()}isListSchema(){let a=this.getSchema();return"number"==typeof a?a>=k.LIST_MODIFIER&&a<k.MAP_MODIFIER:a instanceof i}isMapSchema(){let a=this.getSchema();return"number"==typeof a?a>=k.MAP_MODIFIER&&a<=255:a instanceof j}isStructSchema(){let a=this.getSchema();return null!==a&&"object"==typeof a&&"members"in a||a instanceof m}isBlobSchema(){return this.getSchema()===k.BLOB||this.getSchema()===k.STREAMING_BLOB}isTimestampSchema(){let a=this.getSchema();return"number"==typeof a&&a>=k.TIMESTAMP_DEFAULT&&a<=k.TIMESTAMP_EPOCH_SECONDS}isDocumentSchema(){return this.getSchema()===k.DOCUMENT}isStringSchema(){return this.getSchema()===k.STRING}isBooleanSchema(){return this.getSchema()===k.BOOLEAN}isNumericSchema(){return this.getSchema()===k.NUMERIC}isBigIntegerSchema(){return this.getSchema()===k.BIG_INTEGER}isBigDecimalSchema(){return this.getSchema()===k.BIG_DECIMAL}isStreaming(){return!!this.getMergedTraits().streaming||this.getSchema()===k.STREAMING_BLOB}isIdempotencyToken(){return"number"==typeof this.traits?(4&this.traits)==4:"object"==typeof this.traits&&!!this.traits.idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return n.translateTraits(this.memberTraits)}getOwnTraits(){return n.translateTraits(this.traits)}getKeySchema(){if(this.isDocumentSchema())return this.memberFrom([k.DOCUMENT,0],"key");if(!this.isMapSchema())throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let a=this.getSchema();return"number"==typeof a?this.memberFrom([63&a,0],"key"):this.memberFrom([a.keySchema,0],"key")}getValueSchema(){let a=this.getSchema();if("number"==typeof a){if(this.isMapSchema())return this.memberFrom([63&a,0],"value");else if(this.isListSchema())return this.memberFrom([63&a,0],"member")}if(a&&"object"==typeof a){if(this.isStructSchema())throw Error(`may not getValueSchema() on structure ${this.getName(!0)}`);if("valueSchema"in a){if(this.isMapSchema())return this.memberFrom([a.valueSchema,0],"value");else if(this.isListSchema())return this.memberFrom([a.valueSchema,0],"member")}}if(this.isDocumentSchema())return this.memberFrom([k.DOCUMENT,0],"value");throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}hasMemberSchema(a){return!!this.isStructSchema()&&this.getSchema().memberNames.includes(a)}getMemberSchema(a){if(this.isStructSchema()){let b=this.getSchema();if(!b.memberNames.includes(a))throw Error(`@smithy/core/schema - ${this.getName(!0)} has no member=${a}.`);let c=b.memberNames.indexOf(a),d=b.memberList[c];return this.memberFrom(Array.isArray(d)?d:[d,0],a)}if(this.isDocumentSchema())return this.memberFrom([k.DOCUMENT,0],a);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no members.`)}getMemberSchemas(){let a={};try{for(let[b,c]of this.structIterator())a[b]=c}catch(a){}return a}getEventStreamMember(){if(this.isStructSchema()){for(let[a,b]of this.structIterator())if(b.isStreaming()&&b.isStructSchema())return a}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error("@smithy/core/schema - cannot iterate non-struct schema.");let a=this.getSchema();for(let b=0;b<a.memberNames.length;++b)yield[a.memberNames[b],this.memberFrom([a.memberList[b],0],a.memberNames[b])]}memberFrom(a,b){return a instanceof n?Object.assign(a,{memberName:b,_isMemberSchema:!0}):new n(a,b)}getSchemaName(){let a=this.getSchema();if("number"==typeof a){let b=63&a,c=Object.entries(k).find(([,a])=>a===b)?.[0]??"Unknown";switch(192&a){case k.MAP_MODIFIER:return`${c}Map`;case k.LIST_MODIFIER:return`${c}List`;case 0:return c}}return"Unknown"}}n.symbol=Symbol.for("@smithy/nor");let o="***SensitiveInformation***";function p(a,b){if(null==b)return b;let c=n.of(a);if(c.getMergedTraits().sensitive)return o;if(c.isListSchema()){if(c.getValueSchema().getMergedTraits().sensitive)return o}else if(c.isMapSchema()){if(c.getKeySchema().getMergedTraits().sensitive||c.getValueSchema().getMergedTraits().sensitive)return o}else if(c.isStructSchema()&&"object"==typeof b){let a={};for(let[d,e]of c.structIterator())null!=b[d]&&(a[d]=p(e,b[d]));return a}return b}class q{constructor(){this.middlewareStack=(0,d.o)()}static classBuilder(){return new r}resolveMiddlewareWithContext(a,b,c,{middlewareFn:d,clientName:f,commandName:g,inputFilterSensitiveLog:h,outputFilterSensitiveLog:i,smithyContext:j,additionalContext:k,CommandCtor:l}){for(let e of d.bind(this)(l,a,b,c))this.middlewareStack.use(e);let m=a.concat(this.middlewareStack),{logger:n}=b,o={logger:n,clientName:f,commandName:g,inputFilterSensitiveLog:h,outputFilterSensitiveLog:i,[e.V]:{commandInstance:this,...j},...k},{requestHandler:p}=b;return m.resolve(a=>p.handle(a.request,c||{}),o)}}class r{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=void 0,this._outputFilterSensitiveLog=void 0,this._serializer=null,this._deserializer=null}init(a){this._init=a}ep(a){return this._ep=a,this}m(a){return this._middlewareFn=a,this}s(a,b,c={}){return this._smithyContext={service:a,operation:b,...c},this}c(a={}){return this._additionalContext=a,this}n(a,b){return this._clientName=a,this._commandName=b,this}f(a=a=>a,b=a=>a){return this._inputFilterSensitiveLog=a,this._outputFilterSensitiveLog=b,this}ser(a){return this._serializer=a,this}de(a){return this._deserializer=a,this}sc(a){return this._operationSchema=a,this._smithyContext.operationSchema=a,this}build(){let a,b=this;return a=class extends q{static getEndpointParameterInstructions(){return b._ep}constructor(...[a]){super(),this.serialize=b._serializer,this.deserialize=b._deserializer,this.input=a??{},b._init(this),this.schema=b._operationSchema}resolveMiddleware(c,d,e){return this.resolveMiddlewareWithContext(c,d,e,{CommandCtor:a,middlewareFn:b._middlewareFn,clientName:b._clientName,commandName:b._commandName,inputFilterSensitiveLog:b._inputFilterSensitiveLog??(b._operationSchema?p.bind(null,b._operationSchema.input):a=>a),outputFilterSensitiveLog:b._outputFilterSensitiveLog??(b._operationSchema?p.bind(null,b._operationSchema.output):a=>a),smithyContext:b._smithyContext,additionalContext:b._additionalContext})}}}}},70316:(a,b,c)=>{"use strict";c.d(b,{V:()=>d});let d="__smithy_context"},72162:(a,b,c)=>{"use strict";c.d(b,{I:()=>e});let d=!1,e=a=>{a&&!d&&16>parseInt(a.substring(1,a.indexOf(".")))&&(d=!0)}},72294:(a,b,c)=>{"use strict";c.d(b,{J:()=>e});var d=c(27327);class e extends d.m{constructor(a,b=!0){super(a,b),this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}}},72492:(a,b,c)=>{"use strict";c.d(b,{Y7:()=>e});let d={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},e=a=>({applyToStack:a=>{a.add((a,b)=>async c=>{try{let d=await a(c),{clientName:e,commandName:f,logger:g,dynamoDbDocumentClientOptions:h={}}=b,{overrideInputFilterSensitiveLog:i,overrideOutputFilterSensitiveLog:j}=h,k=i??b.inputFilterSensitiveLog,l=j??b.outputFilterSensitiveLog,{$metadata:m,...n}=d.output;return g?.info?.({clientName:e,commandName:f,input:k(c.input),output:l(n),metadata:m}),d}catch(i){let{clientName:a,commandName:d,logger:e,dynamoDbDocumentClientOptions:f={}}=b,{overrideInputFilterSensitiveLog:g}=f,h=g??b.inputFilterSensitiveLog;throw e?.error?.({clientName:a,commandName:d,input:h(c.input),error:i,metadata:i.$metadata}),i}},d)}})},73024:a=>{"use strict";a.exports=require("node:fs")},73482:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{handler:()=>x,patchFetch:()=>w,routeModule:()=>y,serverHooks:()=>B,workAsyncStorage:()=>z,workUnitAsyncStorage:()=>A});var e=c(23501),f=c(4794),g=c(95321),h=c(90105),i=c(26443),j=c(261),k=c(40081),l=c(1983),m=c(91417),n=c(10282),o=c(51468),p=c(78326),q=c(95484),r=c(12829),s=c(86439),t=c(87747),u=c(30779),v=a([u]);u=(v.then?(await v)():v)[0];let y=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/[port]/api/(providers)/bedrock/route",pathname:"/[port]/api/bedrock",filename:"route",bundlePath:"app/[port]/api/(providers)/bedrock/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/home/jeanpdev/dev/codegpt-nextjs/app/[port]/api/(providers)/bedrock/route.ts",nextConfigOutput:"standalone",userland:u}),{workAsyncStorage:z,workUnitAsyncStorage:A,serverHooks:B}=y;function w(){return(0,g.patchFetch)({workAsyncStorage:z,workUnitAsyncStorage:A})}async function x(a,b,c){var d;let e="/[port]/api/(providers)/bedrock/route";"/index"===e&&(e="/");let g=await y.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:z,routerServerContext:A,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D}=g,E=(0,j.normalizeAppPath)(e),F=!!(z.dynamicRoutes[E]||z.routes[D]);if(F&&!x){let a=!!z.routes[D],b=z.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!F||y.isDev||x||(G=D,G="/index"===G?"/":G);let H=!0===y.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:z,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>y.onRequestError(a,b,d,A)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>y.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&B&&C&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await y.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})},A),b}},l=await y.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:z,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",B?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&F||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(L||b instanceof s.NoFallbackError||await y.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})}),F)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}d()}catch(a){d(a)}})},73566:a=>{"use strict";a.exports=require("worker_threads")},73978:(a,b,c)=>{"use strict";c.d(b,{k:()=>d});class d{constructor({size:a,params:b}){this.data=new Map,this.parameters=[],this.capacity=a??50,b&&(this.parameters=b)}get(a,b){let c=this.hash(a);if(!1===c)return b();if(!this.data.has(c)){if(this.data.size>this.capacity+10){let a=this.data.keys(),b=0;for(;;){let{value:c,done:d}=a.next();if(this.data.delete(c),d||++b>10)break}}this.data.set(c,b())}return this.data.get(c)}size(){return this.data.size}hash(a){let b="",{parameters:c}=this;if(0===c.length)return!1;for(let d of c){let c=String(a[d]??"");if(c.includes("|;"))return!1;b+=c+"|;"}return b}}},74075:a=>{"use strict";a.exports=require("zlib")},74868:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(78193);let e=/^[A-Za-z0-9+/]*={0,2}$/,f=a=>{if(3*a.length%4!=0)throw TypeError("Incorrect padding on base64 string.");if(!e.exec(a))throw TypeError("Invalid base64 string.");let b=(0,d.s)(a,"base64");return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}},74998:a=>{"use strict";a.exports=require("perf_hooks")},75391:(a,b,c)=>{"use strict";c.d(b,{C:()=>e});var d=c(27327);class e extends d.m{constructor(a,b=!0){super(a,b),this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}}},75919:a=>{"use strict";a.exports=require("node:worker_threads")},76099:(a,b,c)=>{"use strict";c.d(b,{M:()=>e,T:()=>d});class d extends Error{constructor(a){super(a.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=a.name,this.$fault=a.$fault,this.$metadata=a.$metadata}static isInstance(a){return!!a&&(d.prototype.isPrototypeOf(a)||!!a.$fault&&!!a.$metadata&&("client"===a.$fault||"server"===a.$fault))}static[Symbol.hasInstance](a){return!!a&&(this===d?d.isInstance(a):!!d.isInstance(a)&&(a.name&&this.name?this.prototype.isPrototypeOf(a)||a.name===this.name:this.prototype.isPrototypeOf(a)))}}let e=(a,b={})=>{Object.entries(b).filter(([,a])=>void 0!==a).forEach(([b,c])=>{(void 0==a[b]||""===a[b])&&(a[b]=c)});let c=a.message||a.Message||"UnknownError";return a.message=c,delete a.Message,a}},76760:a=>{"use strict";a.exports=require("node:path")},77030:a=>{"use strict";a.exports=require("node:net")},77598:a=>{"use strict";a.exports=require("node:crypto")},77931:(a,b,c)=>{"use strict";c.d(b,{w:()=>f});var d=c(86963);let e={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},f=(a,{httpAuthSchemeParametersProvider:b,identityProviderConfigProvider:c})=>({applyToStack:f=>{f.addRelativeTo(((a,b)=>(c,e)=>async f=>{let g=((a,b)=>{if(!b||0===b.length)return a;let c=[];for(let d of b)for(let b of a)b.schemeId.split("#")[1]===d&&c.push(b);for(let b of a)c.find(({schemeId:a})=>a===b.schemeId)||c.push(b);return c})(a.httpAuthSchemeProvider(await b.httpAuthSchemeParametersProvider(a,e,f.input)),a.authSchemePreference?await a.authSchemePreference():[]),h=function(a){let b=new Map;for(let c of a)b.set(c.schemeId,c);return b}(a.httpAuthSchemes),i=(0,d.u)(e),j=[];for(let c of g){let d=h.get(c.schemeId);if(!d){j.push(`HttpAuthScheme \`${c.schemeId}\` was not enabled for this service.`);continue}let f=d.identityProvider(await b.identityProviderConfigProvider(a));if(!f){j.push(`HttpAuthScheme \`${c.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:k={}}=c.propertiesExtractor?.(a,e)||{};c.identityProperties=Object.assign(c.identityProperties||{},g),c.signingProperties=Object.assign(c.signingProperties||{},k),i.selectedHttpAuthScheme={httpAuthOption:c,identity:await f(c.identityProperties),signer:d.signer};break}if(!i.selectedHttpAuthScheme)throw Error(j.join("\n"));return c(f)})(a,{httpAuthSchemeParametersProvider:b,identityProviderConfigProvider:c}),e)}})},78193:(a,b,c)=>{"use strict";c.d(b,{Q:()=>f,s:()=>g});var d=c(36754),e=c(79428);let f=(a,b=0,c=a.byteLength-b)=>{if(!(0,d.m)(a))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof a} (${a})`);return e.Buffer.from(a,b,c)},g=(a,b)=>{if("string"!=typeof a)throw TypeError(`The "input" argument must be of type string. Received type ${typeof a} (${a})`);return b?e.Buffer.from(a,b):e.Buffer.from(a)}},78292:(a,b,c)=>{"use strict";c.d(b,{o:()=>d});let d=a=>encodeURIComponent(a).replace(/[!'()*]/g,e),e=a=>`%${a.charCodeAt(0).toString(16).toUpperCase()}`},78474:a=>{"use strict";a.exports=require("node:events")},79321:(a,b,c)=>{"use strict";c.d(b,{O:()=>e});var d=c(46663);let e=(a,b)=>(0,d.kN)(b??"gpt-4").encode(a).length??0},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},79748:a=>{"use strict";a.exports=require("fs/promises")},80390:(a,b,c)=>{"use strict";c.d(b,{hV:()=>h,pf:()=>g});var d=c(21820),e=c(19771);let f={isCrtAvailable:!1},g=({serviceId:a,clientVersion:b})=>async c=>{let g=[["aws-sdk-js",b],["ua","2.1"],[`os/${(0,d.platform)()}`,(0,d.release)()],["lang/js"],["md/nodejs",`${e.versions.node}`]],h=f.isCrtAvailable?["md/crt-avail"]:null;h&&g.push(h),a&&g.push([`api/${a}`,b]),e.env.AWS_EXECUTION_ENV&&g.push([`exec-env/${e.env.AWS_EXECUTION_ENV}`]);let i=await c?.userAgentAppId?.();return i?[...g,[`app/${i}`]]:[...g]},h={environmentVariableSelector:a=>a.AWS_SDK_UA_APP_ID,configFileSelector:a=>a.sdk_ua_app_id??a["sdk-ua-app-id"],default:c(34477).bM}},80481:a=>{"use strict";a.exports=require("node:readline")},80902:(a,b,c)=>{"use strict";c.d(b,{r:()=>r});var d=c(92060),e=c(86963);let f=async a=>{let b=a?.Bucket||"";if("string"==typeof a.Bucket&&(a.Bucket=b.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),k(b)){if(!0===a.ForcePathStyle)throw Error("Path-style addressing cannot be used with ARN buckets")}else j(b)&&(-1===b.indexOf(".")||String(a.Endpoint).startsWith("http:"))&&b.toLowerCase()===b&&!(b.length<3)||(a.ForcePathStyle=!0);return a.DisableMultiRegionAccessPoints&&(a.disableMultiRegionAccessPoints=!0,a.DisableMRAP=!0),a},g=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,h=/(\d+\.){3}\d+/,i=/\.\./,j=a=>g.test(a)&&!h.test(a)&&!i.test(a),k=a=>{let[b,c,d,,,e]=a.split(":"),f="arn"===b&&a.split(":").length>=6,g=!!(f&&c&&d&&e);if(f&&!g)throw Error(`Invalid ARN: ${a} was an invalid ARN.`);return g},l=(a,b,c)=>{let d=async()=>{let d=c[a]??c[b];return"function"==typeof d?d():d};return"credentialScope"===a||"CredentialScope"===b?async()=>{let a="function"==typeof c.credentials?await c.credentials():c.credentials;return a?.credentialScope??a?.CredentialScope}:"accountId"===a||"AccountId"===b?async()=>{let a="function"==typeof c.credentials?await c.credentials():c.credentials;return a?.accountId??a?.AccountId}:"endpoint"===a||"endpoint"===b?async()=>{if(!1===c.isCustomEndpoint)return;let a=await d();if(a&&"object"==typeof a){if("url"in a)return a.url.href;if("hostname"in a){let{protocol:b,hostname:c,port:d,path:e}=a;return`${b}//${c}${d?":"+d:""}${e}`}}return a}:d};var m=c(443),n=c(6355);let o=async(a,b,c,d)=>{if(!c.isCustomEndpoint){let a;(a=c.serviceConfiguredEndpoint?await c.serviceConfiguredEndpoint():await (0,m.k)(c.serviceId))&&(c.endpoint=()=>Promise.resolve((0,n.a)(a)),c.isCustomEndpoint=!0)}let e=await p(a,b,c);if("function"!=typeof c.endpointProvider)throw Error("config.endpointProvider is not set.");return c.endpointProvider(e,d)},p=async(a,b,c)=>{let d={},e=b?.getEndpointParameterInstructions?.()||{};for(let[b,f]of Object.entries(e))switch(f.type){case"staticContextParams":d[b]=f.value;break;case"contextParams":d[b]=a[f.name];break;case"clientContextParams":case"builtInParams":d[b]=await l(f.name,b,c)();break;case"operationContextParams":d[b]=f.get(a);break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(f))}return 0===Object.keys(e).length&&Object.assign(d,c),"s3"===String(c.serviceId).toLowerCase()&&await f(d),d},q={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:d.Ou.name},r=(a,b)=>({applyToStack:c=>{c.addRelativeTo((({config:a,instructions:b})=>(c,d)=>async f=>{a.isCustomEndpoint&&function(a,b,c){a.__smithy_context?a.__smithy_context.features||(a.__smithy_context.features={}):a.__smithy_context={features:{}},a.__smithy_context.features[b]="N"}(d,"ENDPOINT_OVERRIDE",0);let g=await o(f.input,{getEndpointParameterInstructions:()=>b},{...a},d);d.endpointV2=g,d.authSchemes=g.properties?.authSchemes;let h=d.authSchemes?.[0];if(h){d.signing_region=h.signingRegion,d.signing_service=h.signingName;let a=(0,e.u)(d),b=a?.selectedHttpAuthScheme?.httpAuthOption;b&&(b.signingProperties=Object.assign(b.signingProperties||{},{signing_region:h.signingRegion,signingRegion:h.signingRegion,signing_service:h.signingName,signingName:h.signingName,signingRegionSet:h.signingRegionSet},h.properties))}return c({...f})})({config:a,instructions:b}),q)}})},81176:(a,b,c)=>{"use strict";c.d(b,{G:()=>e});var d=c(78292);function e(a){let b=[];for(let c of Object.keys(a).sort()){let e=a[c];if(c=(0,d.o)(c),Array.isArray(e))for(let a=0,f=e.length;a<f;a++)b.push(`${c}=${(0,d.o)(e[a])}`);else{let a=c;(e||"string"==typeof e)&&(a+=`=${(0,d.o)(e)}`),b.push(a)}}return b.join("&")}},81630:a=>{"use strict";a.exports=require("http")},82242:(a,b,c)=>{"use strict";c.d(b,{f2:()=>k});var d=c(52473);let e=a=>new Date(Date.now()+a);var f=c(61797);let g=a=>f.c.isInstance(a)?a.headers?.date??a.headers?.Date:void 0,h=(a,b)=>{let c=Date.parse(a);return Math.abs(e(b).getTime()-c)>=3e5?c-Date.now():b},i=(a,b)=>{if(!b)throw Error(`Property \`${a}\` is not resolved for AWS SDK SigV4Auth`);return b},j=async a=>{let b=i("context",a.context),c=i("config",a.config),d=b.endpointV2?.properties?.authSchemes?.[0],e=i("signer",c.signer),f=await e(d),g=a?.signingRegion;return{config:c,signer:f,signingRegion:g,signingRegionSet:a?.signingRegionSet,signingName:a?.signingName}};class k{async sign(a,b,c){if(!d.K.isInstance(a))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let f=await j(c),{config:g,signer:h}=f,{signingRegion:i,signingName:k}=f,l=c.context;if(l?.authSchemes?.length){let[a,b]=l.authSchemes;a?.name==="sigv4a"&&b?.name==="sigv4"&&(i=b?.signingRegion??i,k=b?.signingName??k)}return await h.sign(a,{signingDate:e(g.systemClockOffset),signingRegion:i,signingService:k})}errorHandler(a){return b=>{let c=b.ServerTime??g(b.$response);if(c){let d=i("config",a.config),e=d.systemClockOffset;d.systemClockOffset=h(c,d.systemClockOffset),d.systemClockOffset!==e&&b.$metadata&&(b.$metadata.clockSkewCorrected=!0)}throw b}}successHandler(a,b){let c=g(a);if(c){let a=i("config",b.config);a.systemClockOffset=h(c,a.systemClockOffset)}}}},83997:a=>{"use strict";a.exports=require("tty")},84297:a=>{"use strict";a.exports=require("async_hooks")},84509:(a,b,c)=>{"use strict";c.d(b,{Y:()=>q});var d=c(72294),e=c(99823),f=c(49884),g=c(57828),h=c(27514);let i="To refresh this SSO session run 'aws sso login' with the corresponding profile.",j=async(a,b={})=>{let{SSOOIDCClient:d}=await c.e(5856).then(c.bind(c,15856));return new d(Object.assign({},b.clientConfig??{},{region:a??b.clientConfig?.region,logger:b.clientConfig?.logger??b.parentClientConfig?.logger}))},k=async(a,b,d={})=>{let{CreateTokenCommand:e}=await c.e(5856).then(c.bind(c,15856));return(await j(b,d)).send(new e({clientId:a.clientId,clientSecret:a.clientSecret,refreshToken:a.refreshToken,grantType:"refresh_token"}))},l=a=>{if(a.expiration&&a.expiration.getTime()<Date.now())throw new d.J(`Token is expired. ${i}`,!1)},m=(a,b,c=!1)=>{if(void 0===b)throw new d.J(`Value not present for '${a}' in SSO Token${c?". Cannot refresh":""}. ${i}`,!1)};var n=c(10269);let{writeFile:o}=c(29021).promises,p=new Date(0),q=(a={})=>async({callerClientConfig:b}={})=>{let c,j={...a,parentClientConfig:{...b,...a.parentClientConfig}};j.logger?.debug("@aws-sdk/token-providers - fromSso");let q=await (0,e.Y)(j),r=(0,f.Bz)({profile:j.profile??b?.profile}),s=q[r];if(s){if(!s.sso_session)throw new d.J(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new d.J(`Profile '${r}' could not be found in shared credentials file.`,!1);let t=s.sso_session,u=(await (0,g.q)(j))[t];if(!u)throw new d.J(`Sso session '${t}' could not be found in shared credentials file.`,!1);for(let a of["sso_start_url","sso_region"])if(!u[a])throw new d.J(`Sso session '${t}' is missing required property '${a}'.`,!1);u.sso_start_url;let v=u.sso_region;try{c=await (0,h.v)(t)}catch(a){throw new d.J(`The SSO session token associated with profile=${r} was not found or is invalid. ${i}`,!1)}m("accessToken",c.accessToken),m("expiresAt",c.expiresAt);let{accessToken:w,expiresAt:x}=c,y={token:w,expiration:new Date(x)};if(y.expiration.getTime()-Date.now()>3e5)return y;if(Date.now()-p.getTime()<3e4)return l(y),y;m("clientId",c.clientId,!0),m("clientSecret",c.clientSecret,!0),m("refreshToken",c.refreshToken,!0);try{p.setTime(Date.now());let a=await k(c,v,j);m("accessToken",a.accessToken),m("expiresIn",a.expiresIn);let b=new Date(Date.now()+1e3*a.expiresIn);try{await ((a,b)=>{let c=(0,n.C)(a);return o(c,JSON.stringify(b,null,2))})(t,{...c,accessToken:a.accessToken,expiresAt:b.toISOString(),refreshToken:a.refreshToken})}catch(a){}return{token:a.accessToken,expiration:b}}catch(a){return l(y),y}}},84627:(a,b,c)=>{"use strict";var d;c.d(b,{I:()=>d}),function(a){a.PROFILE="profile",a.SSO_SESSION="sso-session",a.SERVICES="services"}(d||(d={}))},86238:(a,b,c)=>{"use strict";c.d(b,{K:()=>e});var d=c(59088);class e{constructor(a){this.config=a,this.middlewareStack=(0,d.o)()}send(a,b,c){let d,e="function"!=typeof b?b:void 0,f="function"==typeof b?b:c;if(void 0===e&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);let b=this.handlers;b.has(a.constructor)?d=b.get(a.constructor):(d=a.resolveMiddleware(this.middlewareStack,this.config,e),b.set(a.constructor,d))}else delete this.handlers,d=a.resolveMiddleware(this.middlewareStack,this.config,e);if(!f)return d(a).then(a=>a.output);d(a).then(a=>f(null,a.output),a=>f(a)).catch(()=>{})}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},86592:a=>{"use strict";a.exports=require("node:inspector")},86963:(a,b,c)=>{"use strict";c.d(b,{u:()=>e});var d=c(70316);let e=a=>a[d.V]||(a[d.V]={})},87373:(a,b,c)=>{"use strict";c.d(b,{C:()=>aT});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=c(80902),I=c(92060),J=c(69940),K=c(67165),L=c(39288),M=c(76099);class N extends M.T{constructor(a){super(a),Object.setPrototypeOf(this,N.prototype)}}class O extends N{name="AccessDeniedException";$fault="client";constructor(a){super({name:"AccessDeniedException",$fault:"client",...a}),Object.setPrototypeOf(this,O.prototype)}}(d||(d={})).visit=(a,b)=>void 0!==a.s3OutputDataConfig?b.s3OutputDataConfig(a.s3OutputDataConfig):b._(a.$unknown[0],a.$unknown[1]);class P extends N{name="InternalServerException";$fault="server";constructor(a){super({name:"InternalServerException",$fault:"server",...a}),Object.setPrototypeOf(this,P.prototype)}}class Q extends N{name="ThrottlingException";$fault="client";constructor(a){super({name:"ThrottlingException",$fault:"client",...a}),Object.setPrototypeOf(this,Q.prototype)}}class R extends N{name="ValidationException";$fault="client";constructor(a){super({name:"ValidationException",$fault:"client",...a}),Object.setPrototypeOf(this,R.prototype)}}class S extends N{name="ConflictException";$fault="client";constructor(a){super({name:"ConflictException",$fault:"client",...a}),Object.setPrototypeOf(this,S.prototype)}}class T extends N{name="ResourceNotFoundException";$fault="client";constructor(a){super({name:"ResourceNotFoundException",$fault:"client",...a}),Object.setPrototypeOf(this,T.prototype)}}class U extends N{name="ServiceQuotaExceededException";$fault="client";constructor(a){super({name:"ServiceQuotaExceededException",$fault:"client",...a}),Object.setPrototypeOf(this,U.prototype)}}class V extends N{name="ServiceUnavailableException";$fault="server";constructor(a){super({name:"ServiceUnavailableException",$fault:"server",...a}),Object.setPrototypeOf(this,V.prototype)}}(e||(e={})).visit=(a,b)=>void 0!==a.bytes?b.bytes(a.bytes):b._(a.$unknown[0],a.$unknown[1]),(f||(f={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.image?b.image(a.image):b._(a.$unknown[0],a.$unknown[1]),(g||(g={})).visit=(a,b)=>void 0!==a.valid?b.valid(a.valid):void 0!==a.invalid?b.invalid(a.invalid):void 0!==a.satisfiable?b.satisfiable(a.satisfiable):void 0!==a.impossible?b.impossible(a.impossible):void 0!==a.translationAmbiguous?b.translationAmbiguous(a.translationAmbiguous):void 0!==a.tooComplex?b.tooComplex(a.tooComplex):void 0!==a.noTranslations?b.noTranslations(a.noTranslations):b._(a.$unknown[0],a.$unknown[1]),(h||(h={})).visit=(a,b)=>void 0!==a.documentChar?b.documentChar(a.documentChar):void 0!==a.documentPage?b.documentPage(a.documentPage):void 0!==a.documentChunk?b.documentChunk(a.documentChunk):b._(a.$unknown[0],a.$unknown[1]),(i||(i={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):b._(a.$unknown[0],a.$unknown[1]),(j||(j={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):b._(a.$unknown[0],a.$unknown[1]),(k||(k={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):b._(a.$unknown[0],a.$unknown[1]),(l||(l={})).visit=(a,b)=>void 0!==a.bytes?b.bytes(a.bytes):void 0!==a.s3Location?b.s3Location(a.s3Location):void 0!==a.text?b.text(a.text):void 0!==a.content?b.content(a.content):b._(a.$unknown[0],a.$unknown[1]),(m||(m={})).visit=(a,b)=>void 0!==a.bytes?b.bytes(a.bytes):b._(a.$unknown[0],a.$unknown[1]),(n||(n={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.image?b.image(a.image):b._(a.$unknown[0],a.$unknown[1]),(o||(o={})).visit=(a,b)=>void 0!==a.bytes?b.bytes(a.bytes):void 0!==a.s3Location?b.s3Location(a.s3Location):b._(a.$unknown[0],a.$unknown[1]),(p||(p={})).visit=(a,b)=>void 0!==a.reasoningText?b.reasoningText(a.reasoningText):void 0!==a.redactedContent?b.redactedContent(a.redactedContent):b._(a.$unknown[0],a.$unknown[1]),(q||(q={})).visit=(a,b)=>void 0!==a.bytes?b.bytes(a.bytes):void 0!==a.s3Location?b.s3Location(a.s3Location):b._(a.$unknown[0],a.$unknown[1]),(r||(r={})).visit=(a,b)=>void 0!==a.json?b.json(a.json):void 0!==a.text?b.text(a.text):void 0!==a.image?b.image(a.image):void 0!==a.document?b.document(a.document):void 0!==a.video?b.video(a.video):b._(a.$unknown[0],a.$unknown[1]),(s||(s={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.image?b.image(a.image):void 0!==a.document?b.document(a.document):void 0!==a.video?b.video(a.video):void 0!==a.toolUse?b.toolUse(a.toolUse):void 0!==a.toolResult?b.toolResult(a.toolResult):void 0!==a.guardContent?b.guardContent(a.guardContent):void 0!==a.cachePoint?b.cachePoint(a.cachePoint):void 0!==a.reasoningContent?b.reasoningContent(a.reasoningContent):void 0!==a.citationsContent?b.citationsContent(a.citationsContent):b._(a.$unknown[0],a.$unknown[1]),(t||(t={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):b._(a.$unknown[0],a.$unknown[1]),(u||(u={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.guardContent?b.guardContent(a.guardContent):void 0!==a.cachePoint?b.cachePoint(a.cachePoint):b._(a.$unknown[0],a.$unknown[1]),(v||(v={})).visit=(a,b)=>void 0!==a.auto?b.auto(a.auto):void 0!==a.any?b.any(a.any):void 0!==a.tool?b.tool(a.tool):b._(a.$unknown[0],a.$unknown[1]),(w||(w={})).visit=(a,b)=>void 0!==a.json?b.json(a.json):b._(a.$unknown[0],a.$unknown[1]),(x||(x={})).visit=(a,b)=>void 0!==a.toolSpec?b.toolSpec(a.toolSpec):void 0!==a.cachePoint?b.cachePoint(a.cachePoint):b._(a.$unknown[0],a.$unknown[1]),(y||(y={})).visit=(a,b)=>void 0!==a.message?b.message(a.message):b._(a.$unknown[0],a.$unknown[1]);class W extends N{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(a){super({name:"ModelErrorException",$fault:"client",...a}),Object.setPrototypeOf(this,W.prototype),this.originalStatusCode=a.originalStatusCode,this.resourceName=a.resourceName}}class X extends N{name="ModelNotReadyException";$fault="client";$retryable={};constructor(a){super({name:"ModelNotReadyException",$fault:"client",...a}),Object.setPrototypeOf(this,X.prototype)}}class Y extends N{name="ModelTimeoutException";$fault="client";constructor(a){super({name:"ModelTimeoutException",$fault:"client",...a}),Object.setPrototypeOf(this,Y.prototype)}}(z||(z={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.redactedContent?b.redactedContent(a.redactedContent):void 0!==a.signature?b.signature(a.signature):b._(a.$unknown[0],a.$unknown[1]),(A||(A={})).visit=(a,b)=>void 0!==a.text?b.text(a.text):void 0!==a.toolUse?b.toolUse(a.toolUse):void 0!==a.reasoningContent?b.reasoningContent(a.reasoningContent):void 0!==a.citation?b.citation(a.citation):b._(a.$unknown[0],a.$unknown[1]),(B||(B={})).visit=(a,b)=>void 0!==a.toolUse?b.toolUse(a.toolUse):b._(a.$unknown[0],a.$unknown[1]);class Z extends N{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(a){super({name:"ModelStreamErrorException",$fault:"client",...a}),Object.setPrototypeOf(this,Z.prototype),this.originalStatusCode=a.originalStatusCode,this.originalMessage=a.originalMessage}}(C||(C={})).visit=(a,b)=>void 0!==a.messageStart?b.messageStart(a.messageStart):void 0!==a.contentBlockStart?b.contentBlockStart(a.contentBlockStart):void 0!==a.contentBlockDelta?b.contentBlockDelta(a.contentBlockDelta):void 0!==a.contentBlockStop?b.contentBlockStop(a.contentBlockStop):void 0!==a.messageStop?b.messageStop(a.messageStop):void 0!==a.metadata?b.metadata(a.metadata):void 0!==a.internalServerException?b.internalServerException(a.internalServerException):void 0!==a.modelStreamErrorException?b.modelStreamErrorException(a.modelStreamErrorException):void 0!==a.validationException?b.validationException(a.validationException):void 0!==a.throttlingException?b.throttlingException(a.throttlingException):void 0!==a.serviceUnavailableException?b.serviceUnavailableException(a.serviceUnavailableException):b._(a.$unknown[0],a.$unknown[1]),(D||(D={})).visit=(a,b)=>void 0!==a.chunk?b.chunk(a.chunk):b._(a.$unknown[0],a.$unknown[1]),(E||(E={})).visit=(a,b)=>void 0!==a.chunk?b.chunk(a.chunk):void 0!==a.internalServerException?b.internalServerException(a.internalServerException):void 0!==a.modelStreamErrorException?b.modelStreamErrorException(a.modelStreamErrorException):void 0!==a.validationException?b.validationException(a.validationException):void 0!==a.throttlingException?b.throttlingException(a.throttlingException):void 0!==a.modelTimeoutException?b.modelTimeoutException(a.modelTimeoutException):void 0!==a.serviceUnavailableException?b.serviceUnavailableException(a.serviceUnavailableException):b._(a.$unknown[0],a.$unknown[1]),(F||(F={})).visit=(a,b)=>void 0!==a.chunk?b.chunk(a.chunk):void 0!==a.internalServerException?b.internalServerException(a.internalServerException):void 0!==a.modelStreamErrorException?b.modelStreamErrorException(a.modelStreamErrorException):void 0!==a.validationException?b.validationException(a.validationException):void 0!==a.throttlingException?b.throttlingException(a.throttlingException):void 0!==a.modelTimeoutException?b.modelTimeoutException(a.modelTimeoutException):void 0!==a.serviceUnavailableException?b.serviceUnavailableException(a.serviceUnavailableException):b._(a.$unknown[0],a.$unknown[1]),(G||(G={})).visit=(a,b)=>void 0!==a.invokeModel?b.invokeModel(a.invokeModel):void 0!==a.converse?b.converse(a.converse):b._(a.$unknown[0],a.$unknown[1]);let $=a=>({...a,...a.body&&{body:L.$}}),_=a=>({...a,...a.body&&{body:"STREAMING_CONTENT"}});var aa=c(49802),ab=c(43055),ac=c(21989),ad=c(20355),ae=c(37430),af=c(21345);let ag=async(a,b)=>{let c,d=(0,ab.l)(a,b),e=(0,ac.Tj)({},ad.e,{[aI]:a[aH]||"application/octet-stream",[aN]:a[aG],[aS]:a[aM],[aP]:a[aJ],[aQ]:a[aK],[aR]:a[aL]});return d.bp("/model/{modelId}/invoke-with-response-stream"),d.p("modelId",()=>a.modelId,"{modelId}",!1),void 0!==a.body&&(c=a.body),d.m("POST").h(e).b(c),d.build()},ah=async(a,b)=>{if(200!==a.statusCode&&a.statusCode>=300)return ai(a,b);let c=(0,ac.Tj)({$metadata:aF(a),[aH]:[,a.headers[aO]],[aL]:[,a.headers[aR]]});return c.body=aw(a.body,b),c},ai=async(a,b)=>{let c={...a,body:await (0,aa.CG)(a.body,b)},d=(0,aa.cJ)(a,c.body);switch(d){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await ak(c,b);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await am(c,b);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await ar(c,b);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await as(c,b);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await au(c,b);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await av(c,b);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await an(c,b);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await ao(c,b);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await aq(c,b);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await at(c,b);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await ap(c,b);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await al(c,b);default:return aj({output:a,parsedBody:c.body,errorCode:d})}},aj=(0,ae.j)(N),ak=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new O({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},al=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new S({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},am=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new P({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},an=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK,originalStatusCode:af.ET,resourceName:af.lK}));let e=new W({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},ao=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new X({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},ap=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK,originalMessage:af.lK,originalStatusCode:af.ET}));let e=new Z({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},aq=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new Y({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},ar=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new T({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},as=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new U({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},at=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new V({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},au=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new Q({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},av=async(a,b)=>{let c=(0,ac.Tj)({}),d=a.body;Object.assign(c,(0,ac.s)(d,{message:af.lK}));let e=new R({$metadata:aF(a),...c});return(0,M.M)(e,a.body)},aw=(a,b)=>b.eventStreamMarshaller.deserialize(a,async a=>null!=a.chunk?{chunk:await aA(a.chunk,b)}:null!=a.internalServerException?{internalServerException:await ax(a.internalServerException,b)}:null!=a.modelStreamErrorException?{modelStreamErrorException:await ay(a.modelStreamErrorException,b)}:null!=a.validationException?{validationException:await aD(a.validationException,b)}:null!=a.throttlingException?{throttlingException:await aC(a.throttlingException,b)}:null!=a.modelTimeoutException?{modelTimeoutException:await az(a.modelTimeoutException,b)}:null!=a.serviceUnavailableException?{serviceUnavailableException:await aB(a.serviceUnavailableException,b)}:{$unknown:a}),ax=async(a,b)=>am({...a,body:await (0,aa.Y2)(a.body,b)},b),ay=async(a,b)=>ap({...a,body:await (0,aa.Y2)(a.body,b)},b),az=async(a,b)=>aq({...a,body:await (0,aa.Y2)(a.body,b)},b),aA=async(a,b)=>{let c={};return Object.assign(c,aE(await (0,aa.Y2)(a.body,b),b)),c},aB=async(a,b)=>at({...a,body:await (0,aa.Y2)(a.body,b)},b),aC=async(a,b)=>au({...a,body:await (0,aa.Y2)(a.body,b)},b),aD=async(a,b)=>av({...a,body:await (0,aa.Y2)(a.body,b)},b),aE=(a,b)=>(0,ac.s)(a,{bytes:b.base64Decoder}),aF=a=>({httpStatusCode:a.statusCode,requestId:a.headers["x-amzn-requestid"]??a.headers["x-amzn-request-id"]??a.headers["x-amz-request-id"],extendedRequestId:a.headers["x-amz-id-2"],cfId:a.headers["x-amz-cf-id"]}),aG="accept",aH="contentType",aI="content-type",aJ="guardrailIdentifier",aK="guardrailVersion",aL="performanceConfigLatency",aM="trace",aN="x-amzn-bedrock-accept",aO="x-amzn-bedrock-content-type",aP="x-amzn-bedrock-guardrailidentifier",aQ="x-amzn-bedrock-guardrailversion",aR="x-amzn-bedrock-performanceconfig-latency",aS="x-amzn-bedrock-trace";class aT extends J.u.classBuilder().ep(K.S).m(function(a,b,c,d){return[(0,I.TM)(c,this.serialize,this.deserialize),(0,H.r)(c,a.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f($,_).ser(ag).de(ah).build(){}},90093:(a,b,c)=>{"use strict";c.d(b,{qs:()=>n,kN:()=>p,$z:()=>o});var d=c(65934),e=c(20406),f=c(56314);class g{constructor(a){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=a?.beta??.7,this.minCapacity=a?.minCapacity??1,this.minFillRate=a?.minFillRate??.5,this.scaleConstant=a?.scaleConstant??.4,this.smooth=a?.smooth??.8;let b=this.getCurrentTimeInSeconds();this.lastThrottleTime=b,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(a){if(this.enabled){if(this.refillTokenBucket(),a>this.currentCapacity){let b=(a-this.currentCapacity)/this.fillRate*1e3;await new Promise(a=>g.setTimeoutFn(a,b))}this.currentCapacity=this.currentCapacity-a}}refillTokenBucket(){let a=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=a;return}let b=(a-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+b),this.lastTimestamp=a}updateClientSendingRate(a){let b;if(this.updateMeasuredRate(),(0,f.Qb)(a)){let a=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=a,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),b=this.cubicThrottle(a),this.enableTokenBucket()}else this.calculateTimeWindow(),b=this.cubicSuccess(this.getCurrentTimeInSeconds());let c=Math.min(b,2*this.measuredTxRate);this.updateTokenBucketRate(c)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(a){return this.getPrecise(a*this.beta)}cubicSuccess(a){return this.getPrecise(this.scaleConstant*Math.pow(a-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(a){this.refillTokenBucket(),this.fillRate=Math.max(a,this.minFillRate),this.maxCapacity=Math.max(a,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let a=Math.floor(2*this.getCurrentTimeInSeconds())/2;if(this.requestCount++,a>this.lastTxRateBucket){let b=this.requestCount/(a-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(b*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=a}}getPrecise(a){return parseFloat(a.toFixed(8))}}g.setTimeoutFn=setTimeout;var h=c(18647);let i=({retryDelay:a,retryCount:b,retryCost:c})=>({getRetryCount:()=>b,getRetryDelay:()=>Math.min(h.G8,a),getRetryCost:()=>c});class j{constructor(a){this.maxAttempts=a,this.mode=e.cm.STANDARD,this.capacity=h.Df,this.retryBackoffStrategy=(()=>{let a=h.bp;return{computeNextBackoffDelay:b=>Math.floor(Math.min(h.G8,Math.random()*2**b*a)),setDelayBase:b=>{a=b}}})(),this.maxAttemptsProvider="function"==typeof a?a:async()=>a}async acquireInitialRetryToken(a){return i({retryDelay:h.bp,retryCount:0})}async refreshRetryTokenForRetry(a,b){let c=await this.getMaxAttempts();if(this.shouldRetry(a,b,c)){let c=b.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===c?h.jh:h.bp);let d=this.retryBackoffStrategy.computeNextBackoffDelay(a.getRetryCount()),e=b.retryAfterHint?Math.max(b.retryAfterHint.getTime()-Date.now()||0,d):d,f=this.getCapacityCost(c);return this.capacity-=f,i({retryDelay:e,retryCount:a.getRetryCount()+1,retryCost:f})}throw Error("No retry token available")}recordSuccess(a){this.capacity=Math.max(h.Df,this.capacity+(a.getRetryCost()??h.XP))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(a){return console.warn(`Max attempts provider could not resolve. Using default of ${e.Gz}`),e.Gz}}shouldRetry(a,b,c){return a.getRetryCount()+1<c&&this.capacity>=this.getCapacityCost(b.errorType)&&this.isRetryableError(b.errorType)}getCapacityCost(a){return"TRANSIENT"===a?h.Rn:h.XS}isRetryableError(a){return"THROTTLING"===a||"TRANSIENT"===a}}class k{constructor(a,b){this.maxAttemptsProvider=a,this.mode=e.cm.ADAPTIVE;let{rateLimiter:c}=b??{};this.rateLimiter=c??new g,this.standardRetryStrategy=new j(a)}async acquireInitialRetryToken(a){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(a)}async refreshRetryTokenForRetry(a,b){return this.rateLimiter.updateClientSendingRate(b),this.standardRetryStrategy.refreshRetryTokenForRetry(a,b)}recordSuccess(a){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(a)}}let l="AWS_MAX_ATTEMPTS",m="max_attempts",n={environmentVariableSelector:a=>{let b=a[l];if(!b)return;let c=parseInt(b);if(Number.isNaN(c))throw Error(`Environment variable ${l} mast be a number, got "${b}"`);return c},configFileSelector:a=>{let b=a[m];if(!b)return;let c=parseInt(b);if(Number.isNaN(c))throw Error(`Shared config file entry ${m} mast be a number, got "${b}"`);return c},default:e.Gz},o=a=>{let{retryStrategy:b,retryMode:c,maxAttempts:f}=a,g=(0,d.t)(f??e.Gz);return Object.assign(a,{maxAttempts:g,retryStrategy:async()=>b||(await (0,d.t)(c)()===e.cm.ADAPTIVE?new k(g):new j(g))})},p={environmentVariableSelector:a=>a.AWS_RETRY_MODE,configFileSelector:a=>a.retry_mode,default:e.L0}},90428:(a,b,c)=>{Promise.resolve().then(c.bind(c,66609))},91645:a=>{"use strict";a.exports=require("net")},91912:a=>{"use strict";a.exports=require("better-sqlite3-multiple-ciphers")},92060:(a,b,c)=>{"use strict";c.d(b,{TM:()=>h,Ou:()=>g});var d=c(61797);let e=(a,b)=>(b.find(([b])=>b.match(a))||[void 0,void 0])[1],f={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},g={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function h(a,b,c){return{applyToStack:h=>{h.add((b,f)=>async g=>{let{response:h}=await b(g);try{let b=await c(h,a);return{response:h,output:b}}catch(a){if(Object.defineProperty(a,"$response",{value:h}),!("$metadata"in a)){let b="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{a.message+="\n  "+b}catch(a){f.logger&&f.logger?.constructor?.name!=="NoOpLogger"?f.logger?.warn?.(b):console.warn(b)}void 0!==a.$responseBodyText&&a.$response&&(a.$response.body=a.$responseBodyText);try{if(d.c.isInstance(h)){let{headers:b={}}=h,c=Object.entries(b);a.$metadata={httpStatusCode:h.statusCode,requestId:e(/^x-[\w-]+-request-?id$/,c),extendedRequestId:e(/^x-[\w-]+-id-2$/,c),cfId:e(/^x-[\w-]+-cf-id$/,c)}}}catch(a){}}throw a}},f),h.add((c,d)=>async e=>{let f=d.endpointV2?.url&&a.urlParser?async()=>a.urlParser(d.endpointV2.url):a.endpoint;if(!f)throw Error("No valid endpoint provider available.");let g=await b(e.input,{...a,endpoint:f});return c({...e,request:g})},g)}}}},94735:a=>{"use strict";a.exports=require("events")},95833:(a,b,c)=>{"use strict";c.d(b,{n:()=>f});var d=c(78193),e=c(54004);let f=a=>{let b;if("object"!=typeof(b="string"==typeof a?(0,e.a)(a):a)||"number"!=typeof b.byteOffset||"number"!=typeof b.byteLength)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,d.Q)(b.buffer,b.byteOffset,b.byteLength).toString("base64")}},95874:(a,b,c)=>{"use strict";c.d(b,{UF:()=>j,vL:()=>i});var d=c(28083),e=c(60850),f=c(61401);let g=(a,b=!1)=>{if(b){for(let b of a.split("."))if(!g(b))return!1;return!0}return!(!(0,e.X)(a)||a.length<3||a.length>63||a!==a.toLowerCase()||(0,f.o)(a))},h=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-east-2":{"description":"Asia Pacific (Taipei)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-6":{"description":"Asia Pacific (New Zealand)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"aws global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"aws-cn global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-eusc","outputs":{"dnsSuffix":"amazonaws.eu","dualStackDnsSuffix":"api.amazonwebservices.eu","implicitGlobalRegion":"eusc-de-east-1","name":"aws-eusc","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^eusc\\\\-(de)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eusc-de-east-1":{"description":"EU (Germany)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"api.aws.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"aws-iso global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"api.aws.scloud","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"aws-iso-b global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"api.cloud-aws.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-e-global":{"description":"aws-iso-e global region"},"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"api.aws.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"aws-iso-f global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"aws-us-gov global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}}],"version":"1.1"}'),i=()=>"",j={isVirtualHostableS3Bucket:g,parseArn:a=>{let b=a.split(":");if(b.length<6)return null;let[c,d,e,f,g,...h]=b;return"arn"!==c||""===d||""===e||""===h.join(":")?null:{partition:d,service:e,region:f,accountId:g,resourceId:h.map(a=>a.split("/")).flat()}},partition:a=>{let{partitions:b}=h;for(let c of b){let{regions:b,outputs:d}=c;for(let[c,e]of Object.entries(b))if(c===a)return{...d,...e}}for(let c of b){let{regionRegex:b,outputs:d}=c;if(new RegExp(b).test(a))return{...d}}let c=b.find(a=>"aws"===a.id);if(!c)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...c.outputs}}};d.m.aws=j},97677:(a,b,c)=>{"use strict";c.d(b,{pi:()=>g,sF:()=>h,yG:()=>f});var d=c(13043),e=c(75391);let f="AWS_ACCESS_KEY_ID",g="AWS_SECRET_ACCESS_KEY",h=a=>async()=>{a?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let b=process.env[f],c=process.env[g],h=process.env.AWS_SESSION_TOKEN,i=process.env.AWS_CREDENTIAL_EXPIRATION,j=process.env.AWS_CREDENTIAL_SCOPE,k=process.env.AWS_ACCOUNT_ID;if(b&&c){let a={accessKeyId:b,secretAccessKey:c,...h&&{sessionToken:h},...i&&{expiration:new Date(i)},...j&&{credentialScope:j},...k&&{accountId:k}};return(0,d.g)(a,"CREDENTIALS_ENV_VARS","g"),a}throw new e.C("Unable to find environment variable credentials.",{logger:a?.logger})}},97722:(a,b,c)=>{"use strict";c.d(b,{u:()=>d});let d=a=>{let b={};for(let c of Object.keys(a)){let d=a[c];b[c]=Array.isArray(d)?d.join(","):d}return b}},99560:(a,b,c)=>{"use strict";c.d(b,{T:()=>f});let d=a=>"string"==typeof a&&(a.startsWith("fips-")||a.endsWith("-fips")),e=a=>d(a)?["fips-aws-global","aws-fips"].includes(a)?"us-east-1":a.replace(/fips-(dkr-|prod-)?|-fips/,""):a,f=a=>{let{region:b,useFipsEndpoint:c}=a;if(!b)throw Error("Region is missing");return Object.assign(a,{region:async()=>"string"==typeof b?e(b):e(await b()),useFipsEndpoint:async()=>!!d("string"==typeof b?b:await b())||("function"!=typeof c?Promise.resolve(!!c):c())})}},99578:(a,b,c)=>{"use strict";c.d(b,{w:()=>j});var d=c(95833),e=c(74868),f=c(22465),g=c(54004);class h extends Uint8Array{static fromString(a,b="utf-8"){if("string"==typeof a)return"base64"===b?h.mutate((0,e.E)(a)):h.mutate((0,g.a)(a));throw Error(`Unsupported conversion from ${typeof a} to Uint8ArrayBlobAdapter.`)}static mutate(a){return Object.setPrototypeOf(a,h.prototype),a}transformToString(a="utf-8"){return function(a,b="utf-8"){return"base64"===b?(0,d.n)(a):(0,f.P)(a)}(this,a)}}let i=async(a=new Uint8Array,b)=>{if(a instanceof Uint8Array)return h.mutate(a);if(!a)return h.mutate(new Uint8Array);let c=b.streamCollector(a);return h.mutate(await c)},j=(a,b)=>i(a,b).then(a=>(b?.utf8Encoder??f.P)(a))},99823:(a,b,c)=>{"use strict";c.d(b,{Y:()=>e});var d=c(2471);let e=async a=>{let b=await (0,d.p)(a);return((...a)=>{let b={};for(let c of a)for(let[a,d]of Object.entries(c))void 0!==b[a]?Object.assign(b[a],d):b[a]=d;return b})(b.configFile,b.credentialsFile)}}};var b=require("../../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5879,5009,3999,4931,2949,6378,9291,6663,3155,8550,3084,827,7884],()=>b(b.s=73482));module.exports=c})();
//# sourceMappingURL=route.js.map