/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={4489:(e,t,n)=>{"use strict";var i=n(4531),r=Object.prototype.hasOwnProperty,o={align:"text-align",valign:"vertical-align",height:"height",width:"width"};function s(e){var t;if("tr"===e.tagName||"td"===e.tagName||"th"===e.tagName)for(t in o)r.call(o,t)&&void 0!==e.properties[t]&&(a(e,o[t],e.properties[t]),delete e.properties[t])}function a(e,t,n){var i=(e.properties.style||"").trim();i&&!/;\s*/.test(i)&&(i+=";"),i&&(i+=" ");var r=i+t+": "+n+";";e.properties.style=r}e.exports=function(e){return i(e,"element",s),e}},3667:e=>{"use strict";function t(e){if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if(null===e||void 0===e)return r;if("object"===typeof e)return("length"in e?i:n)(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function i(e){var n=function(e){for(var n=[],i=e.length,r=-1;++r<i;)n[r]=t(e[r]);return n}(e),i=n.length;return function(){var e=-1;for(;++e<i;)if(n[e].apply(this,arguments))return!0;return!1}}function r(){return!0}e.exports=t},7683:(e,t,n)=>{"use strict";e.exports=a;var i=n(3667),r=!0,o="skip",s=!1;function a(e,t,n,r){var a;function c(e,i,d){var u,h=[];return(t&&!a(e,i,d[d.length-1]||null)||(h=l(n(e,d)))[0]!==s)&&e.children&&h[0]!==o?(u=l(function(e,t){var n,i=-1,o=r?-1:1,a=(r?e.length:i)+o;for(;a>i&&a<e.length;){if((n=c(e[a],a,t))[0]===s)return n;a="number"===typeof n[1]?n[1]:a+o}}(e.children,d.concat(e))),u[0]===s?u:h):h}"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),a=i(t),c(e,null,[])}function l(e){return null!==e&&"object"===typeof e&&"length"in e?e:"number"===typeof e?[r,e]:[e]}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},4531:(e,t,n)=>{"use strict";e.exports=a;var i=n(7683),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},3393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function a(e,t){if(null==e)return{};var n,i,r=s(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t){return c(e)||d(e,t)||u(e,t)||p()}function c(e){if(Array.isArray(e))return e}function d(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g,v,b,y={exports:{}};function x(){return g?m:(g=1,m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function k(){if(b)return v;b=1;var e=x();function t(){}function n(){}return n.resetWarningCache=t,v=function(){function i(t,n,i,r,o,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return i}i.isRequired=i;var o={array:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}y.exports=k()();var w=f(y.exports),C=function(e,n,i){var r=!!i,o=t.useRef(i);t.useEffect((function(){o.current=i}),[i]),t.useEffect((function(){if(!r||!e)return function(){};var t=function(){o.current&&o.current.apply(o,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[r,n,e,o])},S=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},T=function(e){return null!==e&&"object"===r(e)},E=function(e){return T(e)&&"function"===typeof e.then},_=function(e){return T(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},I="[object Object]",P=function e(t,n){if(!T(t)||!T(n))return t===n;var i=Array.isArray(t);if(i!==Array.isArray(n))return!1;var r=Object.prototype.toString.call(t)===I;if(r!==(Object.prototype.toString.call(n)===I))return!1;if(!r&&!i)return t===n;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var a={},l=0;l<o.length;l+=1)a[o[l]]=!0;for(var c=0;c<s.length;c+=1)a[s[c]]=!0;var d=Object.keys(a);if(d.length!==o.length)return!1;var u=t,h=n,p=function(t){return e(u[t],h[t])};return d.every(p)},R=function(e,t,n){return T(e)?Object.keys(e).reduce((function(r,s){var a=!T(t)||!P(e[s],t[s]);return n.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),r):a?i(i({},r||{}),{},o({},s,e[s])):r}),null):null},A="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(null===e||_(e))return e;throw new Error(t)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(E(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return M(e,t)}))};var n=M(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},N=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},j=t.createContext(null);j.displayName="ElementsContext";var D=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},L=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return O(n)}),[n]),s=l(t.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(i):null}})),2),a=s[0],c=s[1];t.useEffect((function(){var e=!0,t=function(e){c((function(t){return t.stripe?t:{stripe:e,elements:e.elements(i)}}))};return"async"!==o.tag||a.stripe?"sync"!==o.tag||a.stripe||t(o.stripe):o.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[o,a,i]);var d=S(n);t.useEffect((function(){null!==d&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[d,n]);var u=S(i);return t.useEffect((function(){if(a.elements){var e=R(i,u,["clientSecret","fonts"]);e&&a.elements.update(e)}}),[i,u,a.elements]),t.useEffect((function(){N(a.stripe)}),[a.stripe]),t.createElement(j.Provider,{value:a},r)};L.propTypes={stripe:w.any,options:w.object};var F=function(e){var n=t.useContext(j);return D(n,e)},B=function(){return F("calls useElements()").elements},U=function(e){return(0,e.children)(F("mounts <ElementsConsumer>"))};U.propTypes={children:w.func.isRequired};var $=["on","session"],z=t.createContext(null);z.displayName="CheckoutSdkContext";var V=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},H=t.createContext(null);H.displayName="CheckoutContext";var W=function(e,t){if(!e)return null;e.on,e.session;var n=a(e,$);return i(i({},n),t||e.session())},q="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",K=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return O(n,q)}),[n]),s=l(t.useState(null),2),a=s[0],c=s[1],d=l(t.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,checkoutSdk:null}})),2),u=d[0],h=d[1],p=function(e,t){h((function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}}))},f=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==o.tag||u.stripe?"sync"===o.tag&&o.stripe&&!f.current&&(f.current=!0,o.stripe.initCheckout(i).then((function(e){e&&(p(o.stripe,e),e.on("change",c))}))):o.stripePromise.then((function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(i).then((function(e){e&&(p(t,e),e.on("change",c))})))})),function(){e=!1}}),[o,u,i,c]);var m=S(n);t.useEffect((function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,n]);var g=S(i);t.useEffect((function(){var e,t;if(u.checkoutSdk){!i.clientSecret||T(g)||P(i.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,r=null===i||void 0===i||null===(t=i.elementsOptions)||void 0===t?void 0:t.appearance;r&&!P(r,n)&&u.checkoutSdk.changeAppearance(r)}}),[i,g,u.checkoutSdk]),t.useEffect((function(){N(u.stripe)}),[u.stripe]);var v=t.useMemo((function(){return W(u.checkoutSdk,a)}),[u.checkoutSdk,a]);return u.checkoutSdk?t.createElement(z.Provider,{value:u},t.createElement(H.Provider,{value:v},r)):null};K.propTypes={stripe:w.any,options:w.shape({clientSecret:w.string.isRequired,elementsOptions:w.object}).isRequired};var G=function(e){var n=t.useContext(z);return V(n,e)},Y=function(e){var n=t.useContext(z),i=t.useContext(j);if(n&&i)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?V(n,e):D(i,e)},Q=function(){G("calls useCheckout()");var e=t.useContext(H);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},X=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},J=function(e,n){var i="".concat(X(e),"Element"),r=n?function(e){Y("mounts <".concat(i,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,o=n.id,s=n.className,a=n.options,c=void 0===a?{}:a,d=n.onBlur,u=n.onFocus,h=n.onReady,p=n.onChange,f=n.onEscape,m=n.onClick,g=n.onLoadError,v=n.onLoaderStart,b=n.onNetworksChange,y=n.onConfirm,x=n.onCancel,k=n.onShippingAddressChange,w=n.onShippingRateChange,T=Y("mounts <".concat(i,">")),E="elements"in T?T.elements:null,_="checkoutSdk"in T?T.checkoutSdk:null,I=l(t.useState(null),2),P=I[0],A=I[1],M=t.useRef(null),O=t.useRef(null);C(P,"blur",d),C(P,"focus",u),C(P,"escape",f),C(P,"click",m),C(P,"loaderror",g),C(P,"loaderstart",v),C(P,"networkschange",b),C(P,"confirm",y),C(P,"cancel",x),C(P,"shippingaddresschange",k),C(P,"shippingratechange",w),C(P,"change",p),h&&(r="expressCheckout"===e?h:function(){h(P)}),C(P,"ready",r),t.useLayoutEffect((function(){if(null===M.current&&null!==O.current&&(E||_)){var t=null;_?t=_.createElement(e,c):E&&(t=E.create(e,c)),M.current=t,A(t),t&&t.mount(O.current)}}),[E,_,c]);var N=S(c);return t.useEffect((function(){if(M.current){var e=R(c,N,["paymentRequest"]);e&&"update"in M.current&&M.current.update(e)}}),[c,N]),t.useLayoutEffect((function(){return function(){if(M.current&&"function"===typeof M.current.destroy)try{M.current.destroy(),M.current=null}catch(e){}}}),[]),t.createElement("div",{id:o,className:s,ref:O})};return r.propTypes={id:w.string,className:w.string,onChange:w.func,onBlur:w.func,onFocus:w.func,onReady:w.func,onEscape:w.func,onClick:w.func,onLoadError:w.func,onLoaderStart:w.func,onNetworksChange:w.func,onConfirm:w.func,onCancel:w.func,onShippingAddressChange:w.func,onShippingRateChange:w.func,options:w.object},r.displayName=i,r.__elementType=e,r},Z="undefined"===typeof window,ee=t.createContext(null);ee.displayName="EmbeddedCheckoutProviderContext";var te=function(){var e=t.useContext(ee);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},ne="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ie=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return O(n,ne)}),[n]),s=t.useRef(null),a=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),d=c[0],u=c[1];t.useEffect((function(){if(!a.current&&!s.current){var e=function(e){a.current||s.current||(a.current=e,s.current=a.current.initEmbeddedCheckout(i).then((function(e){u({embeddedCheckout:e})})))};"async"!==o.tag||a.current||!i.clientSecret&&!i.fetchClientSecret?"sync"!==o.tag||a.current||!i.clientSecret&&!i.fetchClientSecret||e(o.stripe):o.stripePromise.then((function(t){t&&e(t)}))}}),[o,i,d,a]),t.useEffect((function(){return function(){d.embeddedCheckout?(s.current=null,d.embeddedCheckout.destroy()):s.current&&s.current.then((function(){s.current=null,d.embeddedCheckout&&d.embeddedCheckout.destroy()}))}}),[d.embeddedCheckout]),t.useEffect((function(){N(a)}),[a]);var h=S(n);t.useEffect((function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[h,n]);var p=S(i);return t.useEffect((function(){null!=p&&(null!=i?(void 0===i.clientSecret&&void 0===i.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=p.clientSecret&&i.clientSecret!==p.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.fetchClientSecret&&i.fetchClientSecret!==p.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.onComplete&&i.onComplete!==p.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=p.onShippingDetailsChange&&i.onShippingDetailsChange!==p.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=p.onLineItemsChange&&i.onLineItemsChange!==p.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[p,i]),t.createElement(ee.Provider,{value:d},r)},re=function(e){var n=e.id,i=e.className,r=te().embeddedCheckout,o=t.useRef(!1),s=t.useRef(null);return t.useLayoutEffect((function(){return!o.current&&r&&null!==s.current&&(r.mount(s.current),o.current=!0),function(){if(o.current&&r)try{r.unmount(),o.current=!1}catch(e){}}}),[r]),t.createElement("div",{ref:s,id:n,className:i})},oe=function(e){var n=e.id,i=e.className;return te(),t.createElement("div",{id:n,className:i})},se=Z?oe:re,ae=function(){return Y("calls useStripe()").stripe},le=J("auBankAccount",Z),ce=J("card",Z),de=J("cardNumber",Z),ue=J("cardExpiry",Z),he=J("cardCvc",Z),pe=J("fpxBank",Z),fe=J("iban",Z),me=J("idealBank",Z),ge=J("p24Bank",Z),ve=J("epsBank",Z),be=J("payment",Z),ye=J("expressCheckout",Z),xe=J("currencySelector",Z),ke=J("paymentRequestButton",Z),we=J("linkAuthentication",Z),Ce=J("address",Z),Se=J("shippingAddress",Z),Te=J("paymentMethodMessaging",Z),Ee=J("affirmMessage",Z),_e=J("afterpayClearpayMessage",Z);e.AddressElement=Ce,e.AffirmMessageElement=Ee,e.AfterpayClearpayMessageElement=_e,e.AuBankAccountElement=le,e.CardCvcElement=he,e.CardElement=ce,e.CardExpiryElement=ue,e.CardNumberElement=de,e.CheckoutProvider=K,e.CurrencySelectorElement=xe,e.Elements=L,e.ElementsConsumer=U,e.EmbeddedCheckout=se,e.EmbeddedCheckoutProvider=ie,e.EpsBankElement=ve,e.ExpressCheckoutElement=ye,e.FpxBankElement=pe,e.IbanElement=fe,e.IdealBankElement=me,e.LinkAuthenticationElement=we,e.P24BankElement=ge,e.PaymentElement=be,e.PaymentMethodMessagingElement=Te,e.PaymentRequestButtonElement=ke,e.ShippingAddressElement=Se,e.useCheckout=Q,e.useElements=B,e.useStripe=ae}(t,n(5043))},1850:(e,t)=>{"use strict";t.parse=function(e){var t,i=[],o=String(e||r),s=o.indexOf(n),a=0,l=!1;for(;!l;)-1===s&&(s=o.length,l=!0),!(t=o.slice(a,s).trim())&&l||i.push(t),a=s+1,s=o.indexOf(n,a);return i},t.stringify=function(e,t){var o=t||{},s=!1===o.padLeft?r:i,a=o.padRight?i:r;e[e.length-1]===r&&(e=e.concat(r));return e.join(a+n+s).trim()};var n=",",i=" ",r=""},4695:e=>{function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"!==typeof e)throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:i}="boolean"===typeof n?{immediate:n}:n;let r,o,s,a,l;function c(){const t=r,n=o;return r=void 0,o=void 0,l=e.apply(t,n),l}function d(){const e=Date.now()-a;e<t&&e>=0?s=setTimeout(d,t-e):(s=void 0,i||(l=c()))}const u=function(){if(r&&this!==r&&Object.getPrototypeOf(this)===Object.getPrototypeOf(r))throw new Error("Debounced method called with different contexts of the same prototype.");r=this;for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];o=n,a=Date.now();const h=i&&!s;return s||(s=setTimeout(d,t)),h&&(l=c()),l};return u.clear=()=>{s&&(clearTimeout(s),s=void 0)},u.flush=()=>{s&&u.trigger()},u.trigger=()=>{l=c(),u.clear()},u}e.exports.debounce=t,e.exports=t},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i,r=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(i in e);return"undefined"===typeof i||t.call(e,i)},a=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,i,r,c,d,u=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"===typeof u&&(f=u,u=arguments[1]||{},h=2),(null==u||"object"!==typeof u&&"function"!==typeof u)&&(u={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)i=l(u,n),u!==(r=l(t,n))&&(f&&r&&(s(r)||(c=o(r)))?(c?(c=!1,d=i&&o(i)?i:[]):d=i&&s(i)?i:{},a(u,{name:n,newValue:e(f,d,r)})):"undefined"!==typeof r&&a(u,{name:n,newValue:r}));return u}},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},809:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},2590:(e,t,n)=>{"use strict";var i=n(4509),r=n(4096),o=n(4851),s=n(308),a=n(5317),l=n(1850),c=n(7225),d=n(8403),u=n(6985),h=u("root"),p=u("element"),f=u("text");function m(e,t,n){var i,o,s=n.schema,a=s,l=t.tagName,c={},u=[],h=-1;for(i in"html"===s.space&&"svg"===l.toLowerCase()&&(a=r,n.schema=a),t.properties)g(c,i,t.properties[i],n,l);if(n.vdom&&("html"===a.space?l=l.toUpperCase():c.namespace=d[a.space]),n.prefix&&(n.key++,c.key=n.prefix+n.key),t.children)for(;++h<t.children.length;)o=t.children[h],p(o)?u.push(m(e,o,n)):f(o)&&u.push(o.value);return n.schema=s,u.length?e.call(t,l,c,u):e.call(t,l,c)}function g(e,t,n,i,r){var d,u=o(i.schema,t);null==n||n!==n||!1===n&&(i.vue||i.vdom||i.hyperscript)||!n&&u.boolean&&(i.vue||i.vdom||i.hyperscript)||(n&&"object"===typeof n&&"length"in n&&(n=(u.commaSeparated?l:a).stringify(n)),u.boolean&&i.hyperscript&&(n=""),"style"===u.property&&"string"===typeof n&&(i.react||i.vue||i.vdom)&&(n=function(e,t){var n={};try{c(e,i)}catch(r){throw r.message=t+"[style]"+r.message.slice(9),r}return n;function i(e,t){"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,b)]=t}}(n,r)),i.vue?"style"!==u.property&&(d="attrs"):u.mustUseProperty||(i.vdom?"style"!==u.property&&(d="attributes"):i.hyperscript&&(d="attrs")),d?(e[d]||(e[d]={}),e[d][u.attribute]=n):u.space&&i.react?e[s[u.property]||u.property]=n:e[u.attribute]=n)}function v(e){return Boolean(e&&e.context&&e.cleanup)}function b(e,t){return t.toUpperCase()}e.exports=function(e,t,n){var o,s=n||{},a=function(e){var t=e&&e("div");return Boolean(t&&("_owner"in t||"_store"in t)&&null==t.key)}(e),l=function(e){var t=e&&e("div");return Boolean(t&&t.context&&t.context._isVue)}(e),c=function(e){return e&&"VirtualNode"===e("div").type}(e);if("function"!==typeof e)throw new Error("h is not a function");"string"===typeof s||"boolean"===typeof s?(o=s,s={}):o=s.prefix;if(h(t))t=1===t.children.length&&p(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else if(!p(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");return m(e,t,{schema:"svg"===s.space?r:i,prefix:null==o?a||l||c?"h-":null:o,key:0,react:a,vue:l,vdom:c,hyperscript:v(e)})}},2741:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function d(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var u=1,h=1;function p(e){var t=e.match(n);t&&(u+=t.length);var i=e.lastIndexOf("\n");h=~i?e.length-i:h+e.length}function f(){var e={line:u,column:h};return function(t){return t.position=new m(e),y(),t}}function m(e){this.start=e,this.end={line:u,column:h},this.source=l.source}m.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+u+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=u,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var i=n[0];return p(i),e=e.slice(i.length),n}}function y(){b(i)}function x(e){var t;for(e=e||[];t=k();)!1!==t&&e.push(t);return e}function k(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return v("End of comment missing");var i=e.slice(2,n-2);return h+=2,p(i),e=e.slice(n),h+=2,t({type:"comment",comment:i})}}function w(){var e=f(),n=b(r);if(n){if(k(),!b(o))return v("property missing ':'");var i=b(s),l=e({type:"declaration",property:d(n[0].replace(t,c)),value:i?d(i[0].replace(t,c)):c});return b(a),l}}return y(),function(){var e,t=[];for(x(t);e=w();)!1!==e&&(t.push(e),x(t));return t}()}},7225:(e,t,n)=>{var i=n(2741);e.exports=function(e,t){var n,r=null;if(!e||"string"!==typeof e)return r;for(var o,s,a=i(e),l="function"===typeof t,c=0,d=a.length;c<d;c++)o=(n=a[c]).property,s=n.value,l?t(o,s,n):s&&(r||(r={}),r[o]=s);return r}},6985:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},5837:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},7577:(e,t,n)=>{"use strict";var i=n(8723);e.exports=function(e,t){return function(e){return t;function t(t){var n=t&&o(t);return n&&r.call(e,n)?e[n]:null}}(function(e){var t={};if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return i(e,"definition",n),t;function n(e){var n=o(e.identifier);r.call(t,n)||(t[n]=e)}}(e))};var r={}.hasOwnProperty;function o(e){return e.toUpperCase()}},1843:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},9594:e=>{e.exports=function(e){return e}},6083:(e,t,n)=>{"use strict";e.exports=l;var i=n(1843),r=n(9594),o=!0,s="skip",a=!1;function l(e,t,n,l){var c,d;"function"===typeof t&&"function"!==typeof n&&(l=n,n=t,t=null),d=i(t),c=l?-1:1,function e(i,u,h){var p,f="object"===typeof i&&null!==i?i:{};"string"===typeof f.type&&(p="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,m.displayName="node ("+r(f.type+(p?"<"+p+">":""))+")");return m;function m(){var r,p,f=h.concat(i),m=[];if((!t||d(i,u,h[h.length-1]||null))&&(m=function(e){if(null!==e&&"object"===typeof e&&"length"in e)return e;if("number"===typeof e)return[o,e];return[e]}(n(i,h)),m[0]===a))return m;if(i.children&&m[0]!==s)for(p=(l?i.children.length:-1)+c;p>-1&&p<i.children.length;){if((r=e(i.children[p],p,f)())[0]===a)return r;p="number"===typeof r[1]?r[1]:p+c}return m}}(e,null,[])()}l.CONTINUE=o,l.SKIP=s,l.EXIT=a},8723:(e,t,n)=>{"use strict";e.exports=a;var i=n(6083),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},2638:e=>{"use strict";var t={};function n(e,i,r){var o,s,a,l,c,d="";for("string"!==typeof i&&(r=i,i=n.defaultChars),"undefined"===typeof r&&(r=!0),c=function(e){var n,i,r=t[e];if(r)return r;for(r=t[e]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)r[e.charCodeAt(n)]=e[n];return r}(i),o=0,s=e.length;o<s;o++)if(a=e.charCodeAt(o),r&&37===a&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))d+=e.slice(o,o+3),o+=2;else if(a<128)d+=c[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){d+=encodeURIComponent(e[o]+e[o+1]),o++;continue}d+="%EF%BF%BD"}else d+=encodeURIComponent(e[o]);return d}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},6909:e=>{"use strict";var t;e.exports=function(e){var n,i="&"+e+";";if((t=t||document.createElement("i")).innerHTML=i,59===(n=t.textContent).charCodeAt(n.length-1)&&"semi"!==e)return!1;return n!==i&&n}},4851:(e,t,n)=>{"use strict";var i=n(4141),r=n(3275),o=n(2803),s="data";e.exports=function(e,t){var n=i(t),h=t,p=o;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&n.slice(0,4)===s&&a.test(t)&&("-"===t.charAt(4)?h=function(e){var t=e.slice(5).replace(l,u);return s+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(l.test(t))return e;t=t.replace(c,d),"-"!==t.charAt(0)&&(t="-"+t);return s+t}(t),p=r);return new p(h,t)};var a=/^data[-\w.:]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function d(e){return"-"+e.toLowerCase()}function u(e){return e.charAt(1).toUpperCase()}},4509:(e,t,n)=>{"use strict";var i=n(2723),r=n(9366),o=n(8599),s=n(9696),a=n(5349),l=n(7321);e.exports=i([o,r,s,a,l])},5349:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=i.booleanish,s=i.number,a=i.spaceSeparated;e.exports=r({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:s,ariaColIndex:s,ariaColSpan:s,ariaControls:a,ariaCurrent:null,ariaDescribedBy:a,ariaDetails:null,ariaDisabled:o,ariaDropEffect:a,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:a,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a,ariaLevel:s,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:a,ariaPlaceholder:null,ariaPosInSet:s,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:a,ariaRowCount:s,ariaRowIndex:s,ariaRowSpan:s,ariaSelected:o,ariaSetSize:s,ariaSort:null,ariaValueMax:s,ariaValueMin:s,ariaValueNow:s,ariaValueText:null,role:null}})},7321:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=n(9010),s=i.boolean,a=i.overloadedBoolean,l=i.booleanish,c=i.number,d=i.spaceSeparated,u=i.commaSeparated;e.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:u,acceptCharset:d,accessKey:d,action:null,allow:null,allowFullScreen:s,allowPaymentRequest:s,allowUserMedia:s,alt:null,as:null,async:s,autoCapitalize:null,autoComplete:d,autoFocus:s,autoPlay:s,capture:s,charSet:null,checked:s,cite:null,className:d,cols:c,colSpan:null,content:null,contentEditable:l,controls:s,controlsList:d,coords:c|u,crossOrigin:null,data:null,dateTime:null,decoding:null,default:s,defer:s,dir:null,dirName:null,disabled:s,download:a,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:s,formTarget:null,headers:d,height:c,hidden:s,high:c,href:null,hrefLang:null,htmlFor:d,httpEquiv:d,id:null,imageSizes:null,imageSrcSet:u,inputMode:null,integrity:null,is:null,isMap:s,itemId:null,itemProp:d,itemRef:d,itemScope:s,itemType:d,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:s,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:s,muted:s,name:null,nonce:null,noModule:s,noValidate:s,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:s,optimum:c,pattern:null,ping:d,placeholder:null,playsInline:s,poster:null,preload:null,readOnly:s,referrerPolicy:null,rel:d,required:s,reversed:s,rows:c,rowSpan:c,sandbox:d,scope:null,scoped:s,seamless:s,selected:s,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:u,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:s,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:d,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:s,declare:s,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:s,noHref:s,noShade:s,noWrap:s,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:s,disableRemotePlayback:s,prefix:null,property:null,results:c,security:null,unselectable:null}})},3292:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=n(2367),s=i.boolean,a=i.number,l=i.spaceSeparated,c=i.commaSeparated,d=i.commaOrSpaceSeparated;e.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:d,accentHeight:a,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:a,amplitude:a,arabicForm:null,ascent:a,attributeName:null,attributeType:null,azimuth:a,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:a,by:null,calcMode:null,capHeight:a,className:l,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:a,diffuseConstant:a,direction:null,display:null,dur:null,divisor:a,dominantBaseline:null,download:s,dx:null,dy:null,edgeMode:null,editable:null,elevation:a,enableBackground:null,end:null,event:null,exponent:a,externalResourcesRequired:null,fill:null,fillOpacity:a,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:c,g2:c,glyphName:c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:a,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:a,horizOriginX:a,horizOriginY:a,id:null,ideographic:a,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:a,k:a,k1:a,k2:a,k3:a,k4:a,kernelMatrix:d,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:a,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:a,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:a,overlineThickness:a,paintOrder:null,panose1:null,path:null,pathLength:a,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:l,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:a,pointsAtY:a,pointsAtZ:a,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:d,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:d,rev:d,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:d,requiredFeatures:d,requiredFonts:d,requiredFormats:d,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:a,specularExponent:a,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:a,strikethroughThickness:a,string:null,stroke:null,strokeDashArray:d,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:a,strokeOpacity:a,strokeWidth:null,style:null,surfaceScale:a,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:d,tabIndex:a,tableValues:null,target:null,targetX:a,targetY:a,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:d,to:null,transform:null,u1:null,u2:null,underlinePosition:a,underlineThickness:a,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:a,values:null,vAlphabetic:a,vMathematical:a,vectorEffect:null,vHanging:a,vIdeographic:a,version:null,vertAdvY:a,vertOriginX:a,vertOriginY:a,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:a,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},9010:(e,t,n)=>{"use strict";var i=n(2367);e.exports=function(e,t){return i(e,t.toLowerCase())}},2367:e=>{"use strict";e.exports=function(e,t){return t in e?e[t]:t}},6155:(e,t,n)=>{"use strict";var i=n(4141),r=n(5224),o=n(3275);e.exports=function(e){var t,n,s=e.space,a=e.mustUseProperty||[],l=e.attributes||{},c=e.properties,d=e.transform,u={},h={};for(t in c)n=new o(t,d(l,t),c[t],s),-1!==a.indexOf(t)&&(n.mustUseProperty=!0),u[t]=n,h[i(t)]=t,h[i(n.attribute)]=t;return new r(u,h,s)}},3275:(e,t,n)=>{"use strict";var i=n(2803),r=n(3498);e.exports=a,a.prototype=new i,a.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],s=o.length;function a(e,t,n,a){var c,d=-1;for(l(this,"space",a),i.call(this,e,t);++d<s;)l(this,c=o[d],(n&r[c])===r[c])}function l(e,t,n){n&&(e[t]=n)}},2803:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t){this.property=e,this.attribute=t}t.space=null,t.attribute=null,t.property=null,t.boolean=!1,t.booleanish=!1,t.overloadedBoolean=!1,t.number=!1,t.commaSeparated=!1,t.spaceSeparated=!1,t.commaOrSpaceSeparated=!1,t.mustUseProperty=!1,t.defined=!1},2723:(e,t,n)=>{"use strict";var i=n(49),r=n(5224);e.exports=function(e){var t,n,o=e.length,s=[],a=[],l=-1;for(;++l<o;)t=e[l],s.push(t.property),a.push(t.normal),n=t.space;return new r(i.apply(null,s),i.apply(null,a),n)}},5224:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}t.space=null,t.normal={},t.property={}},3498:(e,t)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}t.boolean=i(),t.booleanish=i(),t.overloadedBoolean=i(),t.number=i(),t.spaceSeparated=i(),t.commaSeparated=i(),t.commaOrSpaceSeparated=i()},9366:(e,t,n)=>{"use strict";var i=n(6155);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},8599:(e,t,n)=>{"use strict";var i=n(6155);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},9696:(e,t,n)=>{"use strict";var i=n(6155),r=n(9010);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},4141:e=>{"use strict";e.exports=function(e){return e.toLowerCase()}},4096:(e,t,n)=>{"use strict";var i=n(2723),r=n(9366),o=n(8599),s=n(9696),a=n(5349),l=n(3292);e.exports=i([o,r,s,a,l])},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D,L=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case w:return"Portal";case T:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ce=null,Se=null;function Te(e){if(e=yr(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=kr(t),we(e.stateNode,e.type,t))}}function Ee(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function _e(){if(Ce){var e=Ce,t=Se;if(Se=Ce=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Pe(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ce||null!==Se)&&(Pe(),_e())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var i=kr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(d)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(de){Oe=!1}function je(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var De=!1,Le=null,Fe=!1,Be=null,Ue={onError:function(e){De=!0,Le=e}};function $e(e,t,n,i,r,o,s,a,l){De=!1,Le=null,je.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return He(r),e;if(s===i)return He(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Xe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=ut(a):0!==(o&=s)&&(i=ut(o))}else 0!==(s=n&~r)?i=ut(s):0!==o&&(i=ut(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,Ct,St,Tt,Et=!1,_t=[],It=null,Pt=null,Rt=null,At=new Map,Mt=new Map,Ot=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=br(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Rt&&Ft(Rt)&&(Rt=null),At.forEach(Bt),Mt.forEach(Bt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return $t(t,e)}if(0<_t.length){$t(_t[0],e);for(var n=1;n<_t.length;n++){var i=_t[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&$t(It,e),null!==Pt&&$t(Pt,e),null!==Rt&&$t(Rt,e),At.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=1,Kt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function qt(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=4,Kt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function Kt(e,t,n,i){if(Ht){var r=Yt(e,t,n,i);if(null===r)Hi(e,t,i,Gt,n),jt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=Dt(It,e,t,n,i,r),!0;case"dragenter":return Pt=Dt(Pt,e,t,n,i,r),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return At.set(o,Dt(At.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Mt.set(o,Dt(Mt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<Nt.indexOf(e)){for(;null!==r;){var o=yr(r);if(null!==o&&kt(o),null===(o=Yt(e,t,n,i))&&Hi(e,t,i,Gt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Gt=null;function Yt(e,t,n,i){if(Gt=null,null!==(e=br(e=ke(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Xt?Xt.value:Xt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),un=L({},cn,{view:0,detail:0}),hn=on(un),pn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},un,{relatedTarget:0})),vn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),xn=on(L({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Tn(){return Sn}var En=L({},un,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(En),In=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(An),On=[9,13,27,32],Nn=d&&"CompositionEvent"in window,jn=null;d&&"documentMode"in document&&(jn=document.documentMode);var Dn=d&&"TextEvent"in window&&!jn,Ln=d&&(!Nn||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,i){Ee(i),0<(t=qi(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Gn(e){Fi(e,0)}function Yn(e){if(K(xr(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Kn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,ke(e)),Ae(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function oi(e,t){if("click"===e)return Yn(t)}function si(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=di(n,o);var s=di(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=d&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,bi=null,yi=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==G(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},bi&&li(bi,i)||(bi=i,0<(i=qi(vi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function ki(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionend:ki("Transition","TransitionEnd")},Ci={},Si={};function Ti(e){if(Ci[e])return Ci[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return Ci[e]=n[t];return e}d&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=Ti("animationend"),_i=Ti("animationiteration"),Ii=Ti("animationstart"),Pi=Ti("transitionend"),Ri=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Ri.set(e,t),l(t,[e])}for(var Oi=0;Oi<Ai.length;Oi++){var Ni=Ai[Oi];Mi(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Mi(Ei,"onAnimationEnd"),Mi(_i,"onAnimationIteration"),Mi(Ii,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,c){if($e.apply(this,arguments),De){if(!De)throw Error(o(198));var d=Le;De=!1,Le=null,Fe||(Fe=!0,Be=d)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Li(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Li(r,a,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[$i]){e[$i]=!0,s.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$i]||(t[$i]=!0,Ui("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Qt(t)){case 1:var r=Wt;break;case 4:r=qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=br(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Ae((function(){var i=o,r=ke(n),s=[];e:{var a=Ri.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ei:case _i:case Ii:l=vn;break;case Pi:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Me(f,h))&&d.push(Wi(f,m,p)))),u)break;f=f.return}0<d.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?a:xr(l),p=null==c?a:xr(c),(a=new d(m,f+"leave",l,n,r)).target=u,a.relatedTarget=p,m=null,br(r)===i&&((d=new d(h,f+"enter",c,n,r)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Ki(p))f++;for(p=0,m=h;m;m=Ki(m))p++;for(;0<f-p;)d=Ki(d),f--;for(;0<p-f;)h=Ki(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ki(d),h=Ki(h)}d=null}else d=null;null!==l&&Gi(s,a,l,d,!1),null!==c&&null!==u&&Gi(s,u,c,d,!0)}if("select"===(l=(a=i?xr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if(Hn(a))if(Xn)g=si;else{g=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=oi);switch(g&&(g=g(e,i))?Wn(s,g,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?xr(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,bi=null);break;case"focusout":bi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,xi(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(s,n,r)}var b;if(Nn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Jt="value"in(Xt=r)?Xt.value:Xt.textContent,zn=!0)),0<(v=qi(i,y)).length&&(y=new xn(y,e,null,n,r),s.push({event:y,listeners:v}),b?y.data=b:null!==(b=$n(n))&&(y.data=b))),(b=Dn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Nn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=b))}Fi(s,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Me(e,n))&&i.unshift(Wi(e,o,r)),null!=(o=Me(e,t))&&i.push(Wi(e,o,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Me(n,o))&&s.unshift(Wi(n,l,a)):r||null!=(l=Me(n,o))&&s.push(Wi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(o(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,pr="__reactProps$"+ur,fr="__reactContainer$"+ur,mr="__reactEvents$"+ur,gr="__reactListeners$"+ur,vr="__reactHandles$"+ur;function br(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function kr(e){return e[pr]||null}var wr=[],Cr=-1;function Sr(e){return{current:e}}function Tr(e){0>Cr||(e.current=wr[Cr],wr[Cr]=null,Cr--)}function Er(e,t){Cr++,wr[Cr]=e.current,e.current=t}var _r={},Ir=Sr(_r),Pr=Sr(!1),Rr=_r;function Ar(e,t){var n=e.type.contextTypes;if(!n)return _r;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){Tr(Pr),Tr(Ir)}function Nr(e,t,n){if(Ir.current!==_r)throw Error(o(168));Er(Ir,t),Er(Pr,n)}function jr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return L({},n,i)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Rr=Ir.current,Er(Ir,e),Er(Pr,Pr.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=jr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Tr(Pr),Tr(Ir),Er(Ir,e)):Tr(Pr),Er(Pr,n)}var Fr=null,Br=!1,Ur=!1;function $r(e){null===Fr?Fr=[e]:Fr.push(e)}function zr(){if(!Ur&&null!==Fr){Ur=!0;var e=0,t=yt;try{var n=Fr;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Br=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ke(Ze,zr),r}finally{yt=t,Ur=!1}}return null}var Vr=[],Hr=0,Wr=null,qr=0,Kr=[],Gr=0,Yr=null,Qr=1,Xr="";function Jr(e,t){Vr[Hr++]=qr,Vr[Hr++]=Wr,Wr=e,qr=t}function Zr(e,t,n){Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Yr=e;var i=Qr;e=Xr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Qr=1<<32-st(t)+r|n<<r|i,Xr=o+e}else Qr=1<<o|n<<r|i,Xr=e}function eo(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function to(e){for(;e===Wr;)Wr=Vr[--Hr],Vr[Hr]=null,qr=Vr[--Hr],Vr[Hr]=null;for(;e===Yr;)Yr=Kr[--Gr],Kr[Gr]=null,Xr=Kr[--Gr],Kr[Gr]=null,Qr=Kr[--Gr],Kr[Gr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Lc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===C?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&yo(o)===t.type)?((i=r(t,n.props)).ref=vo(e,t,n),i.return=e,i):((i=Nc(n.type,n.key,n.props,null,e.mode,i)).ref=vo(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,o){return null===t||7!==t.tag?((t=jc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jc(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?d(e,t,n,i):null;case M:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||j(n))return null!==r?null:u(e,t,n,i,null);bo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case k:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case M:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||j(i))return u(t,e=e.get(n)||null,i,r,null);bo(t,i)}return null}function m(r,o,a,l){for(var c=null,d=null,u=o,m=o=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(r,u,a[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(r,u),o=s(v,o,m),null===d?c=v:d.sibling=v,d=v,u=g}if(m===a.length)return n(r,u),ro&&Jr(r,m),c;if(null===u){for(;m<a.length;m++)null!==(u=h(r,a[m],l))&&(o=s(u,o,m),null===d?c=u:d.sibling=u,d=u);return ro&&Jr(r,m),c}for(u=i(r,u);m<a.length;m++)null!==(g=f(u,r,m,a[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),o=s(g,o,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(r,e)})),ro&&Jr(r,m),c}function g(r,a,l,c){var d=j(l);if("function"!==typeof d)throw Error(o(150));if(null==(l=d.call(l)))throw Error(o(151));for(var u=d=null,m=a,g=a=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(r,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(r,m),a=s(y,a,g),null===u?d=y:u.sibling=y,u=y,m=v}if(b.done)return n(r,m),ro&&Jr(r,g),d;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(r,b.value,c))&&(a=s(b,a,g),null===u?d=b:u.sibling=b,u=b);return ro&&Jr(r,g),d}for(m=i(r,m);!b.done;g++,b=l.next())null!==(b=f(m,r,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),a=s(b,a,g),null===u?d=b:u.sibling=b,u=b);return e&&m.forEach((function(e){return t(r,e)})),ro&&Jr(r,g),d}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var c=s.key,d=o;null!==d;){if(d.key===c){if((c=s.type)===C){if(7===d.tag){n(i,d.sibling),(o=r(d,s.props.children)).return=i,i=o;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&yo(c)===d.type){n(i,d.sibling),(o=r(d,s.props)).ref=vo(i,d,s),o.return=i,i=o;break e}n(i,d);break}t(i,d),d=d.sibling}s.type===C?((o=jc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Nc(s.type,s.key,s.props,null,i.mode,l)).ref=vo(i,o,s),l.return=i,i=l)}return a(i);case w:e:{for(d=s.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Fc(s,i.mode,l)).return=i,i=o}return a(i);case M:return e(i,o,(d=s._init)(s._payload),l)}if(te(s))return m(i,o,s,l);if(j(s))return g(i,o,s,l);bo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Lc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var ko=xo(!0),wo=xo(!1),Co=Sr(null),So=null,To=null,Eo=null;function _o(){Eo=To=So=null}function Io(e){var t=Co.current;Tr(Co),e._currentValue=t}function Po(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){So=e,Eo=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===So)throw Error(o(308));To=e,So.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Mo=null;function Oo(e){null===Mo?Mo=[e]:Mo.push(e)}function No(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Oo(t)):(n.next=r.next,r.next=n),t.interleaved=n,jo(e,i)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,jo(e,n)}return null===(r=i.interleaved)?(t.next=t,Oo(i)):(t.next=r.next,r.next=t),i.interleaved=t,jo(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}function zo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,i){var r=e.updateQueue;Do=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===a?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(null!==o){var u=r.baseState;for(s=0,d=c=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=L({},u,h);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Dl|=s,e.lanes=s,e.memoizedState=u}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Wo={},qo=Sr(Wo),Ko=Sr(Wo),Go=Sr(Wo);function Yo(e){if(e===Wo)throw Error(o(174));return e}function Qo(e,t){switch(Er(Go,t),Er(Ko,e),Er(qo,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(qo),Er(qo,t)}function Xo(){Tr(qo),Tr(Ko),Tr(Go)}function Jo(e){Yo(Go.current);var t=Yo(qo.current),n=le(t,e.type);t!==n&&(Er(Ko,e),Er(qo,n))}function Zo(e){Ko.current===e&&(Tr(qo),Tr(Ko))}var es=Sr(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function is(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var rs=x.ReactCurrentDispatcher,os=x.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,ds=!1,us=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function gs(e,t,n,i,r,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Zs:ea,e=n(i,r),us){s=0;do{if(us=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,rs.current=ta,e=n(i,r)}while(us)}if(rs.current=Js,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,ds=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ys(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function xs(e,t){return"function"===typeof t?t(e):t}function ks(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=ls,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,d=s;do{var u=d.lane;if((ss&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,as.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==s);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,as.lanes|=s,Dl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ya=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Cs(){}function Ss(e,t){var n=as,i=ys(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ya=!0),i=i.queue,Ds(_s.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,As(9,Es.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ss)||Ts(n,t,r)}return r}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Es(e,t,n,i){t.value=n,t.getSnapshot=i,Is(t)&&Ps(e)}function _s(e,t,n){return n((function(){Is(t)&&Ps(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Ps(e){var t=jo(e,1);null!==t&&nc(t,e,1,-1)}function Rs(e){var t=bs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,as,e),[t.memoizedState,e]}function As(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ms(){return ys().memoizedState}function Os(e,t,n,i){var r=bs();as.flags|=e,r.memoizedState=As(1|t,n,void 0,void 0===i?null:i)}function Ns(e,t,n,i){var r=ys();i=void 0===i?null:i;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==i&&ms(i,s.deps))return void(r.memoizedState=As(t,n,o,i))}as.flags|=e,r.memoizedState=As(1|t,n,o,i)}function js(e,t){return Os(8390656,8,e,t)}function Ds(e,t){return Ns(2048,8,e,t)}function Ls(e,t){return Ns(4,2,e,t)}function Fs(e,t){return Ns(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4,4,Bs.bind(null,t,e),n)}function $s(){}function zs(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Vs(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),as.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ws(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=os.transition;os.transition={};try{e(!1),t()}finally{yt=n,os.transition=i}}function qs(){return ys().memoizedState}function Ks(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Qs(t,n);else if(null!==(n=No(e,t,n,i))){nc(n,e,i,ec()),Xs(n,t,i)}}function Gs(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Qs(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=t.interleaved;return null===l?(r.next=r,Oo(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=No(e,t,r,i))&&(nc(n,e,i,r=ec()),Xs(n,t,i))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Qs(e,t){us=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Js={readContext:Ao,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Ao,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:js,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Os(4194308,4,e,t)},useInsertionEffect:function(e,t){return Os(4,2,e,t)},useMemo:function(e,t){var n=bs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=bs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ks.bind(null,as,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:Rs,useDebugValue:$s,useDeferredValue:function(e){return bs().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=Ws.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=as,r=bs();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ss)||Ts(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,js(_s.bind(null,i,s,e),[e]),i.flags|=2048,As(9,Es.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=bs(),t=Pl.identifierPrefix;if(ro){var n=Xr;t=":"+t+"R"+(n=(Qr&~(1<<32-st(Qr)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ao,useCallback:zs,useContext:Ao,useEffect:Ds,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:ks,useRef:Ms,useState:function(){return ks(xs)},useDebugValue:$s,useDeferredValue:function(e){return Hs(ys(),ls.memoizedState,e)},useTransition:function(){return[ks(xs)[0],ys().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ss,useId:qs,unstable_isNewReconciler:!1},ta={readContext:Ao,useCallback:zs,useContext:Ao,useEffect:Ds,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:ws,useRef:Ms,useState:function(){return ws(xs)},useDebugValue:$s,useDeferredValue:function(e){var t=ys();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[ws(xs)[0],ys().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ss,useId:qs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Bo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),$o(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Bo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),$o(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Bo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Uo(e,r,i))&&(nc(t,e,i,n),$o(t,e,i))}};function oa(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function sa(e,t,n){var i=!1,r=_r,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(r=Mr(t)?Rr:Ir.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):_r),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ao(o):(o=Mr(t)?Rr:Ir.current,r.context=Ar(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ia(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Vo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",i=t;do{n+=$(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=i),ua(0,t)},n}function fa(e,t,n){(n=Bo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ua(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ua(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=x.ReactCurrentOwner,ya=!1;function xa(e,t,n,i){t.child=null===e?wo(t,null,n,i):ko(t,e.child,n,i)}function ka(e,t,n,i,r){n=n.render;var o=t.ref;return Ro(t,r),i=gs(e,t,n,i,o,r),n=vs(),null===e||ya?(ro&&n&&eo(t),t.flags|=1,xa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function wa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Mc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Oc(o,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(ya=!0)}}return Ea(e,t,n,i,r)}function Sa(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ol,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ol,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Er(Ol,Ml),Ml|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Er(Ol,Ml),Ml|=i;return xa(e,t,r,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,n,i,r){var o=Mr(n)?Rr:Ir.current;return o=Ar(t,o),Ro(t,r),n=gs(e,t,n,i,o,r),i=vs(),null===e||ya?(ro&&i&&eo(t),t.flags|=1,xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function _a(e,t,n,i,r){if(Mr(n)){var o=!0;Dr(t)}else o=!1;if(Ro(t,r),null===t.stateNode)Va(e,t),sa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ao(c):c=Ar(t,c=Mr(n)?Rr:Ir.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,s,i,c),Do=!1;var h=t.memoizedState;s.state=h,Vo(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Pr.current||Do?("function"===typeof d&&(ia(t,n,d,i),l=t.memoizedState),(a=Do||oa(t,n,a,i,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=Ar(t,l=Mr(n)?Rr:Ir.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==u||h!==l)&&aa(t,s,i,l),Do=!1,h=t.memoizedState,s.state=h,Vo(t,i,s,r);var f=t.memoizedState;a!==u||h!==f||Pr.current||Do?("function"===typeof p&&(ia(t,n,p,i),f=t.memoizedState),(c=Do||oa(t,n,c,i,h,f,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ia(e,t,n,i,o,r)}function Ia(e,t,n,i,r,o){Ta(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Lr(t,n,!1),Ha(e,t,o);i=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,a,o)):xa(e,t,a,o),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Nr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nr(0,t.context,!1),Qo(e,t.containerInfo)}function Ra(e,t,n,i,r){return fo(),mo(r),t.flags|=256,xa(e,t,n,i),t.child}var Aa,Ma,Oa,Na,ja={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var i,r=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Er(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Dc(l,r,0,null),e=jc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=ja,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,i=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Dc({mode:"visible",children:i.children},r,0,null),(s=jc(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ko(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=ja,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ba(e,t,a,i=da(s=Error(o(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=Pl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,jo(e,r),nc(i,e,r,-1))}return mc(),Ba(e,t,a,i=da(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Qr=e.id,Xr=e.overflow,Yr=t),t=Fa(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(a){a=r.fallback,l=t.mode,i=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Oc(i,a):(a=jc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ja,r}return e=(a=e.child).sibling,r=Oc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,i){return null!==i&&mo(i),ko(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Po(e.return,t,n)}function $a(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function za(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(xa(e,t,i.children,n),0!==(2&(i=es.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(es,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$a(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ts(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$a(t,!0,n,null,o);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Mr(t.type)&&Or(),qa(t),null;case 3:return i=t.stateNode,Xo(),Tr(Pr),Tr(Ir),is(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ma(e,t),qa(t),null;case 5:Zo(t);var r=Yo(Go.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return qa(t),null}if(e=Yo(qo.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<ji.length;r++)Bi(ji[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Q(i,s),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Bi("invalid",i);break;case"textarea":re(i,s),Bi("invalid",i)}for(var l in be(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":q(i),Z(i,s,!0);break;case"textarea":q(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),r=i;break;case"iframe":case"object":case"embed":Bi("load",e),r=i;break;case"video":case"audio":for(r=0;r<ji.length;r++)Bi(ji[r],e);r=i;break;case"source":Bi("error",e),r=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),r=i;break;case"details":Bi("toggle",e),r=i;break;case"input":Q(e,i),r=Y(e,i),Bi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Bi("invalid",e)}for(s in be(n,r),c=r)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Bi("scroll",e):null!=d&&y(e,s,d,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Yo(Go.current),Yo(qo.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return qa(t),null;case 13:if(Tr(es),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return Xo(),Ma(e,t),null===e&&zi(t.stateNode.containerInfo),qa(t),null;case 10:return Io(t.type._context),qa(t),null;case 19:if(Tr(es),null===(s=t.memoizedState))return qa(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)Wa(s,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wa(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>zl&&(t.flags|=128,i=!0,Wa(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ts(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return qa(t),null}else 2*Xe()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,i=!0,Wa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=es.current,Er(es,i?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return uc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ga(e,t){switch(to(t),t.tag){case 1:return Mr(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Tr(Pr),Tr(Ir),is(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Tr(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(es),null;case 4:return Xo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Oa=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Yo(qo.current);var o,s=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),s=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(d in be(n,i),n=null,r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(l=null!=r?r[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bi("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Na=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ya=!1,Qa=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Sc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Sc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,n,o)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var i=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=i)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),zt(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=i,ul=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Sc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,hl(e,t,n),Qa=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Sc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&Za(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Sc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(r,s),ye(l,a);var d=ye(l,s);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):y(r,u,h,d)}switch(l){case"input":J(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||($l=Xe())),4&i&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(d=Qa)||u,ml(t,e),Qa=d):ml(t,e),vl(e),8192&i){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Ja=e,u=e.child;null!==u;){for(h=Ja=u;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(i,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){kl(h);continue}}null!==f?(f.return=p,Ja=f):kl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ja=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Ja;){var r=Ja,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ya;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var c=Qa;if(Ya=s,(Qa=l)&&!c)for(Ja=r;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?wl(r):null!==l?(l.return=s,Ja=l):wl(r);for(;null!==o;)Ja=o,yl(o,t,n),o=o.sibling;Ja=r,Ya=a,Qa=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Ja=o):xl(e)}}function xl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&rl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function kl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Sc(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Sc(t,o,l)}break;case 5:var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Cl,Sl=Math.ceil,Tl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Il=0,Pl=null,Rl=null,Al=0,Ml=0,Ol=Sr(0),Nl=0,jl=null,Dl=0,Ll=0,Fl=0,Bl=null,Ul=null,$l=0,zl=1/0,Vl=null,Hl=!1,Wl=null,ql=null,Kl=!1,Gl=null,Yl=0,Ql=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,i){if(50<Ql)throw Ql=0,Xl=null,Error(o(185));vt(e,n,i),0!==(2&Il)&&e===Pl||(e===Pl&&(0===(2&Il)&&(Ll|=n),4===Nl&&ac(e,Al)),ic(e,i),1===n&&0===Il&&0===(1&t.mode)&&(zl=Xe()+500,Br&&zr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===Pl?Al:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Br=!0,$r(e)}(lc.bind(null,e)):$r(lc.bind(null,e)),sr((function(){0===(6&Il)&&zr()})),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Il;Il|=2;var s=fc();for(Pl===e&&Al===t||(Vl=null,zl=Xe()+500,hc(e,t));;)try{bc();break}catch(l){pc(e,l)}_o(),Tl.current=s,Il=r,null!==Rl?t=0:(Pl=null,Al=0,t=Nl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=jl,hc(e,0),ac(e,i),ic(e,Xe()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(s=ft(e))&&(i=s,t=oc(e,s))),1===t))throw n=jl,hc(e,0),ac(e,i),ic(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,Ul,Vl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(kc.bind(null,e,Ul,Vl),t);break}kc(e,Ul,Vl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){e.timeoutHandle=ir(kc.bind(null,e,Ul,Vl),i);break}kc(e,Ul,Vl);break;default:throw Error(o(329))}}}return ic(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Il))throw Error(o(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=jl,hc(e,0),ac(e,t),ic(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Ul,Vl),ic(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Xe()+500,Br&&zr())}}function dc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&wc();var t=Il;Il|=1;var n=_l.transition,i=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=i,_l.transition=n,0===(6&(Il=t))&&zr()}}function uc(){Ml=Ol.current,Tr(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:Xo(),Tr(Pr),Tr(Ir),is();break;case 5:Zo(i);break;case 4:Xo();break;case 13:case 19:Tr(es);break;case 10:Io(i.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Rl=e=Oc(e.current,null),Al=Ml=t,Nl=0,jl=null,Fl=Ll=Dl=0,Ul=Bl=null,null!==Mo){for(t=0;t<Mo.length;t++)if(null!==(i=(n=Mo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Mo=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_o(),rs.current=Js,ds){for(var i=as.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ds=!1}if(ss=0,cs=ls=as=null,us=!1,hs=0,El.current=null,null===n||null===n.return){Nl=1,jl=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,d,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Nl&&(Nl=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zo(s,pa(0,c,t));break e;case 1:l=c;var b=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,zo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(x){t=x,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=Js,null===e?Js:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Pl||0===(268435455&Dl)&&0===(268435455&Ll)||ac(Pl,Al)}function gc(e,t){var n=Il;Il|=2;var i=fc();for(Pl===e&&Al===t||(Vl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(_o(),Il=n,Tl.current=i,null!==Rl)throw Error(o(261));return Pl=null,Al=0,Nl}function vc(){for(;null!==Rl;)yc(Rl)}function bc(){for(;null!==Rl&&!Ye();)yc(Rl)}function yc(e){var t=Cl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?xc(e):Rl=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Ml)))return void(Rl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Nl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Nl&&(Nl=5)}function kc(e,t,n){var i=yt,r=_l.transition;try{_l.transition=null,yt=1,function(e,t,n,i){do{wc()}while(null!==Gl);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Pl&&(Rl=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,(function(){return wc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=_l.transition,_l.transition=null;var a=yt;yt=1;var l=Il;Il|=4,El.current=null,function(e,t){if(er=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(k){n=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===r&&(l=a),p===s&&++u===i&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(k){Sc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Ht=!!er,tr=er=null,e.current=n,bl(n,e,r),Qe(),Il=l,yt=a,_l.transition=s}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Yl=r),s=e.pendingLanes,0===s&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,zr()}(e,t,n,i)}finally{_l.transition=r,yt=i}return null}function wc(){if(null!==Gl){var e=xt(Yl),t=_l.transition,n=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Gl)var i=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Ja=d;null!==Ja;){var u=Ja;switch(u.tag){case 0:case 11:case 15:nl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Ja=h;else for(;null!==Ja;){var p=(u=Ja).sibling,f=u.return;if(ol(u),u===d){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Ja=b;break e}Ja=s.return}}var y=e.current;for(Ja=y;null!==Ja;){var x=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Ja=x;else e:for(a=y;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Sc(l,l.return,w)}if(l===a){Ja=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Ja=k;break e}Ja=l.return}}if(Il=r,zr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{yt=n,_l.transition=t}}return!1}function Cc(e,t,n){e=Uo(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Uo(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Nl||3===Nl&&(130023424&Al)===Al&&500>Xe()-$l?hc(e,0):Fl|=n),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=jo(e,t))&&(vt(e,t,n),ic(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Ec(e,n)}function Pc(e,t){return Ke(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,i){return new Rc(e,t,n,i)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)Mc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return jc(n.children,r,s,t);case S:a=8,r|=8;break;case T:return(e=Ac(12,n,t,2|r)).elementType=T,e.lanes=s,e;case P:return(e=Ac(13,n,t,r)).elementType=P,e.lanes=s,e;case R:return(e=Ac(19,n,t,r)).elementType=R,e.lanes=s,e;case O:return Dc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case _:a=9;break e;case I:a=11;break e;case A:a=14;break e;case M:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function jc(e,t,n,i){return(e=Ac(7,e,i,t)).lanes=n,e}function Dc(e,t,n,i){return(e=Ac(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function $c(e){if(!e)return _r;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mr(n))return jr(e,n,t)}return t}function zc(e,t,n,i,r,o,s,a,l){return(e=Uc(n,i,!0,e,0,o,0,a,l)).context=$c(null),n=e.current,(o=Bo(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Vc(e,t,n,i){var r=t.current,o=ec(),s=tc(r);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Uo(r,t,s))&&(nc(e,r,s,o),$o(e,r,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fo();break;case 5:Jo(t);break;case 1:Mr(t.type)&&Dr(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(Co,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Er(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);Er(es,1&es.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return za(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(es,es.current),i)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ha(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,ro&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Va(e,t),e=t.pendingProps;var r=Ar(t,Ir.current);Ro(t,n),r=gs(null,t,i,e,r,n);var s=vs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(i)?(s=!0,Dr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Lo(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ia(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),xa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(i),e=na(i,e),r){case 0:t=Ea(null,t,i,e,n);break e;case 1:t=_a(null,t,i,e,n);break e;case 11:t=ka(null,t,i,e,n);break e;case 14:t=wa(null,t,i,na(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,_a(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Pa(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Fo(e,t),Vo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,i,n,r=ca(Error(o(423)),t));break e}if(i!==r){t=Ra(e,t,i,n,r=ca(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=wo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Ha(e,t,n);break e}xa(e,t,i,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),Ta(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ko(t,null,i,n):xa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ka(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Er(Co,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Pr.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Bo(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Po(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Po(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ro(t,n),i=i(r=Ao(r)),t.flags|=1,xa(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),wa(e,t,i,r=na(i.type,r),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),Va(e,t),t.tag=1,Mr(i)?(e=!0,Dr(t)):e=!1,Ro(t,n),sa(t,i,r),la(t,i,r,n),Ia(null,t,i,!0,e,n);case 19:return za(e,t,n);case 22:return Sa(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}Vc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}var s=zc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[fr]=s.current,zi(8===e.nodeType?e.parentNode:e),dc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fr]=l.current,zi(8===e.nodeType?e.parentNode:e),dc((function(){Vc(t,l,n,i)})),l}(n,t,e,r,i);return Hc(s)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Vc(null,e,null,null)})),t[fr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),ic(t,Xe()),0===(6&Il)&&(zl=Xe()+500,zr()))}break;case 13:dc((function(){var t=jo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=jo(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=jo(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},St=function(){return yt},Tt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=kr(i);if(!r)throw Error(o(90));K(i),J(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[yr,xr,kr,Ee,_e,cc]},td={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{rt=id.inject(nd),ot=id}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,i="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,zi(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8686:e=>{"use strict";e.exports=function(e){if(e)throw e}},7927:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},5604:(e,t,n)=>{"use strict";e.exports=function(e,t,n){"string"!==typeof t&&(n=t,t=void 0);return function(e){var t=e||{},n=function(e,t){var n=-1;for(;++n<t.length;)p(e,t[n]);return e}({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:v(he),autolinkProtocol:L,autolinkEmail:L,atxHeading:v(le),blockQuote:v(ie),characterEscape:L,characterReference:L,codeFenced:v(re),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:v(re,b),codeText:v(oe,b),codeTextData:L,data:L,codeFlowValue:L,definition:v(se),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:v(ae),hardBreakEscape:v(ce),hardBreakTrailing:v(ce),htmlFlow:v(de,b),htmlFlowData:L,htmlText:v(de,b),htmlTextData:L,image:v(ue),label:b,link:v(he),listItem:v(fe),listItemValue:S,listOrdered:v(pe,C),listUnordered:v(pe),paragraph:v(me),reference:X,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:v(le),strong:v(ge),thematicBreak:v(be)},exit:{atxHeading:x(),atxHeadingSequence:O,autolink:x(),autolinkEmail:ne,autolinkProtocol:te,blockQuote:x(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ee,codeFenced:x(I),codeFencedFence:_,codeFencedFenceInfo:T,codeFencedFenceMeta:E,codeFlowValue:F,codeIndented:x(P),codeText:x(V),codeTextData:F,data:F,definition:x(),definitionDestinationString:M,definitionLabelString:R,definitionTitleString:A,emphasis:x(),hardBreakEscape:x(U),hardBreakTrailing:x(U),htmlFlow:x($),htmlFlowData:F,htmlText:x(z),htmlTextData:F,image:x(W),label:K,labelText:q,lineEnding:B,link:x(H),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:J,resourceDestinationString:G,resourceTitleString:Y,resource:Q,setextHeading:x(D),setextHeadingLineSequence:j,setextHeadingText:N,strong:x(),thematicBreak:x()}},t.mdastExtensions||[]),l={};return c;function c(e){for(var t,i={type:"root",children:[]},s=[],a=[],l=-1,c={stack:[i],tokenStack:s,config:n,enter:y,exit:k,buffer:b,resume:w,setData:f,getData:m};++l<e.length;)"listOrdered"!==e[l][1].type&&"listUnordered"!==e[l][1].type||("enter"===e[l][0]?a.push(l):l=d(e,a.pop(l),l));for(l=-1;++l<e.length;)t=n[e[l][0]],o.call(t,e[l][1].type)&&t[e[l][1].type].call(r({sliceSerialize:e[l][2].sliceSerialize},c),e[l][1]);if(s.length)throw new Error("Cannot close document, a token (`"+s[s.length-1].type+"`, "+h({start:s[s.length-1].start,end:s[s.length-1].end})+") is still open");for(i.position={start:g(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:g(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},l=-1;++l<n.transforms.length;)i=n.transforms[l](i)||i;return i}function d(e,t,n){for(var i,r,o,s,a,l,c,d=t-1,u=-1,h=!1;++d<=n;)if("listUnordered"===(a=e[d])[1].type||"listOrdered"===a[1].type||"blockQuote"===a[1].type?("enter"===a[0]?u++:u--,c=void 0):"lineEndingBlank"===a[1].type?"enter"===a[0]&&(!i||c||u||l||(l=d),c=void 0):"linePrefix"===a[1].type||"listItemValue"===a[1].type||"listItemMarker"===a[1].type||"listItemPrefix"===a[1].type||"listItemPrefixWhitespace"===a[1].type||(c=void 0),!u&&"enter"===a[0]&&"listItemPrefix"===a[1].type||-1===u&&"exit"===a[0]&&("listUnordered"===a[1].type||"listOrdered"===a[1].type)){if(i){for(r=d,o=void 0;r--;)if("lineEnding"===(s=e[r])[1].type||"lineEndingBlank"===s[1].type){if("exit"===s[0])continue;o&&(e[o][1].type="lineEndingBlank",h=!0),s[1].type="lineEnding",o=r}else if("linePrefix"!==s[1].type&&"blockQuotePrefix"!==s[1].type&&"blockQuotePrefixWhitespace"!==s[1].type&&"blockQuoteMarker"!==s[1].type&&"listItemIndent"!==s[1].type)break;l&&(!o||l<o)&&(i._spread=!0),i.end=g(o?e[o][1].start:a[1].end),e.splice(o||d,0,["exit",i,a[2]]),d++,n++}"listItemPrefix"===a[1].type&&(i={type:"listItem",_spread:!1,start:g(a[1].start)},e.splice(d,0,["enter",i,a[2]]),d++,n++,l=void 0,c=!0)}return e[t][1]._spread=h,n}function f(e,t){l[e]=t}function m(e){return l[e]}function g(e){return{line:e.line,column:e.column,offset:e.offset}}function v(e,t){return n;function n(n){y.call(this,e(n),n),t&&t.call(this,n)}}function b(){this.stack.push({type:"fragment",children:[]})}function y(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:g(t.start)},e}function x(e){return t;function t(t){e&&e.call(this,t),k.call(this,t)}}function k(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): it\u2019s not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+h({start:n.start,end:n.end})+") is open");return t.position.end=g(e.end),t}function w(){return i(this.stack.pop())}function C(){f("expectingFirstListItemValue",!0)}function S(e){m("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),f("expectingFirstListItemValue"))}function T(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function E(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function _(){m("flowCodeInside")||(this.buffer(),f("flowCodeInside",!0))}function I(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),f("flowCodeInside")}function P(){var e=this.resume();this.stack[this.stack.length-1].value=e}function R(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase()}function A(){var e=this.resume();this.stack[this.stack.length-1].title=e}function M(){var e=this.resume();this.stack[this.stack.length-1].url=e}function O(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)}function N(){f("setextHeadingSlurpLineEnding",!0)}function j(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function D(){f("setextHeadingSlurpLineEnding")}function L(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=ve()).position={start:g(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function F(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=g(e.end)}function B(e){var t=this.stack[this.stack.length-1];if(m("atHardBreak"))return t.children[t.children.length-1].position.end=g(e.end),void f("atHardBreak");!m("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(L.call(this,e),F.call(this,e))}function U(){f("atHardBreak",!0)}function $(){var e=this.resume();this.stack[this.stack.length-1].value=e}function z(){var e=this.resume();this.stack[this.stack.length-1].value=e}function V(){var e=this.resume();this.stack[this.stack.length-1].value=e}function H(){var e=this.stack[this.stack.length-1];m("inReference")?(e.type+="Reference",e.referenceType=m("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),f("referenceType")}function W(){var e=this.stack[this.stack.length-1];m("inReference")?(e.type+="Reference",e.referenceType=m("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),f("referenceType")}function q(e){this.stack[this.stack.length-2].identifier=s(this.sliceSerialize(e)).toLowerCase()}function K(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,f("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t}function G(){var e=this.resume();this.stack[this.stack.length-1].url=e}function Y(){var e=this.resume();this.stack[this.stack.length-1].title=e}function Q(){f("inReference")}function X(){f("referenceType","collapsed")}function J(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase(),f("referenceType","full")}function Z(e){f("characterReferenceType",e.type)}function ee(e){var t,n,i=this.sliceSerialize(e),r=m("characterReferenceType");r?(t=a(i,"characterReferenceMarkerNumeric"===r?10:16),f("characterReferenceType")):t=u(i),(n=this.stack.pop()).value+=t,n.position.end=g(e.end)}function te(e){F.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function ne(e){F.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function ie(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ae(){return{type:"emphasis",children:[]}}function le(){return{type:"heading",depth:void 0,children:[]}}function ce(){return{type:"break"}}function de(){return{type:"html",value:""}}function ue(){return{type:"image",title:null,url:"",alt:null}}function he(){return{type:"link",title:null,url:"",children:[]}}function pe(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function fe(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ve(){return{type:"text",value:""}}function be(){return{type:"thematicBreak"}}}(n)(d(l(n).document().write(c()(e,t,!0))))};var i=n(3740),r=n(3160),o=n(7856),s=n(1008),a=n(8149),l=n(4727),c=n(7860),d=n(7311),u=n(6909),h=n(394);function p(e,t){var n,i;for(n in t)i=o.call(e,n)?e[n]:e[n]={},"canContainEols"===n||"transforms"===n?e[n]=[].concat(i,t[n]):Object.assign(i,t[n])}},3935:(e,t,n)=>{"use strict";e.exports=n(5604)},177:(e,t,n)=>{"use strict";e.exports=n(7625)},7986:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r,o=t.children||[],s=o.length,a=[],l=-1;for(;++l<s;)(n=i(e,o[l],t))&&(l&&"break"===o[l-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),a=a.concat(n));return a};var i=n(1717)},9766:(e,t,n)=>{"use strict";e.exports=function(e){var t,n,s,a,l=e.footnoteById,c=e.footnoteOrder,d=c.length,u=-1,h=[];for(;++u<d;)(t=l[c[u].toUpperCase()])&&(a=(s=t.children.concat())[s.length-1],n={type:"link",url:"#fnref-"+t.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"\u21a9"}]},a&&"paragraph"===a.type||(a={type:"paragraph",children:[]},s.push(a)),a.children.push(n),h.push({type:"listItem",data:{hProperties:{id:"fn-"+t.identifier}},children:s,position:t.position}));if(0===h.length)return null;return e(null,"div",{className:["footnotes"]},o([i(e),r(e,{type:"list",ordered:!0,children:h})],!0))};var i=n(7518),r=n(9475),o=n(5633)},7644:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"blockquote",i(r(e,t),!0))};var i=n(5633),r=n(7986)},5352:(e,t,n)=>{"use strict";e.exports=function(e,t){return[e(t,"br"),i("text","\n")]};var i=n(5591)},674:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r=t.value?t.value+"\n":"",o=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};o&&(s.className=["language-"+o]);n=e(t,"code",s,[i("text",r)]),t.meta&&(n.data={meta:t.meta});return e(t.position,"pre",[n])};var i=n(5591)},1791:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"del",i(e,t))};var i=n(7986)},1413:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"em",i(e,t))};var i=n(7986)},6295:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteOrder,r=String(t.identifier);-1===n.indexOf(r)&&n.push(r);return e(t.position,"sup",{id:"fnref-"+r},[e(t,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",t.label||r)])])};var i=n(5591)},363:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteById,r=e.footnoteOrder,o=1;for(;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},i(e,{type:"footnoteReference",identifier:o,position:t.position})};var i=n(6295)},1317:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"h"+t.depth,i(e,t))};var i=n(7986)},1266:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.dangerous?e.augment(t,i("raw",t.value)):null};var i=n(5591)},4778:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o=e.definition(t.identifier);if(!o)return r(e,t);n={src:i(o.url||""),alt:t.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title);return e(t,"img",n)};var i=n(2638),r=n(6515)},2602:(e,t,n)=>{"use strict";var i=n(2638);e.exports=function(e,t){var n={src:i(t.url),alt:t.alt};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"img",n)}},4943:(e,t,n)=>{"use strict";function i(){return null}e.exports={blockquote:n(7644),break:n(5352),code:n(674),delete:n(1791),emphasis:n(1413),footnoteReference:n(6295),footnote:n(363),heading:n(1317),html:n(1266),imageReference:n(4778),image:n(2602),inlineCode:n(274),linkReference:n(8231),link:n(7531),listItem:n(1267),list:n(9475),paragraph:n(1909),root:n(9075),strong:n(9552),table:n(4167),text:n(8432),thematicBreak:n(7518),toml:i,yaml:i,definition:i,footnoteDefinition:i}},274:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=t.value.replace(/\r?\n|\r/g," ");return e(t,"code",[i("text",n)])};var i=n(5591)},8231:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,s=e.definition(t.identifier);if(!s)return r(e,t);n={href:i(s.url||"")},null!==s.title&&void 0!==s.title&&(n.title=s.title);return e(t,"a",n,o(e,t))};var i=n(2638),r=n(6515),o=n(7986)},7531:(e,t,n)=>{"use strict";var i=n(2638),r=n(7986);e.exports=function(e,t){var n={href:i(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"a",n,r(e,t))}},1267:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var s,a,l,c=r(e,t),d=c[0],u=n?function(e){var t=e.spread,n=e.children,i=n.length,r=-1;for(;!t&&++r<i;)t=o(n[r]);return t}(n):o(t),h={},p=[];"boolean"===typeof t.checked&&(d&&"p"===d.tagName||(d=e(null,"p",[]),c.unshift(d)),d.children.length>0&&d.children.unshift(i("text"," ")),d.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),h.className=["task-list-item"]);s=c.length,a=-1;for(;++a<s;)l=c[a],(u||0!==a||"p"!==l.tagName)&&p.push(i("text","\n")),"p"!==l.tagName||u?p.push(l):p=p.concat(l.children);s&&(u||"p"!==l.tagName)&&p.push(i("text","\n"));return e(t,"li",h,p)};var i=n(5591),r=n(7986);function o(e){var t=e.spread;return void 0===t||null===t?e.children.length>1:t}},9475:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s={},a=t.ordered?"ol":"ul",l=-1;"number"===typeof t.start&&1!==t.start&&(s.start=t.start);n=r(e,t),o=n.length;for(;++l<o;)if(n[l].properties.className&&-1!==n[l].properties.className.indexOf("task-list-item")){s.className=["contains-task-list"];break}return e(t,a,s,i(n,!0))};var i=n(5633),r=n(7986)},1909:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"p",i(e,t))};var i=n(7986)},9075:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("root",r(o(e,t))))};var i=n(5591),r=n(5633),o=n(7986)},9552:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"strong",i(e,t))};var i=n(7986)},4167:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,s,a,l,c,d=t.children,u=d.length,h=t.align||[],p=h.length,f=[];for(;u--;){for(s=d[u].children,l=0===u?"th":"td",n=p||s.length,a=[];n--;)c=s[n],a[n]=e(c,l,{align:h[n]},c?o(e,c):[]);f[u]=e(d[u],"tr",r(a,!0))}return e(t,"table",r([e(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?e({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(2210),r=n(5633),o=n(7986)},8432:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(5591)},7518:e=>{"use strict";e.exports=function(e,t){return e(t,"hr")}},7625:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=function(e,t){var n=t||{};void 0===n.allowDangerousHTML||h||(h=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var i=n.allowDangerousHtml||n.allowDangerousHTML,l={};return p.dangerous=i,p.definition=a(e),p.footnoteById=l,p.footnoteOrder=[],p.augment=c,p.handlers=Object.assign({},d,n.handlers),p.unknownHandler=n.unknownHandler,p.passThrough=n.passThrough,r(e,"footnoteDefinition",f),p;function c(e,t){var n,i;return e&&e.data&&((n=e.data).hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=Object.assign({},t.properties,n.hProperties)),t.children&&n.hChildren&&(t.children=n.hChildren)),i=e&&e.position?e:{position:e},s(i)||(t.position={start:o.start(i),end:o.end(i)}),t}function p(e,t,n,i){return void 0!==i&&null!==i||"object"!==typeof n||!("length"in n)||(i=n,n={}),c(e,{type:"element",tagName:t,properties:n||{},children:i||[]})}function f(e){var t=String(e.identifier).toUpperCase();u.call(l,t)||(l[t]=e)}}(e,t),p=l(n,e),f=c(n);f&&(p.children=p.children.concat(i("text","\n"),f));return p};var i=n(5591),r=n(9512),o=n(2210),s=n(2108),a=n(7577),l=n(1717),c=n(9766),d=n(4943),u={}.hasOwnProperty,h=!1},1717:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var i,r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");i=o.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.indexOf(r)>-1?a:e.unknownHandler;return("function"===typeof i?i:s)(e,t,n)};var i=n(5591),r=n(7986),o={}.hasOwnProperty;function s(e,t){return function(e){var t=e.data||{};if(o.call(t,"hName")||o.call(t,"hProperties")||o.call(t,"hChildren"))return!1;return"value"in e}(t)?e.augment(t,i("text",t.value)):e(t,"div",r(e,t))}function a(e,t){var n;return t.children?((n=Object.assign({},t)).children=r(e,t),n):t}},6515:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s,a=t.referenceType,l="]";"collapsed"===a?l+="[]":"full"===a&&(l+="["+(t.label||t.identifier)+"]");if("imageReference"===t.type)return i("text","!["+t.alt+l);n=r(e,t),(o=n[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","["));(s=n[n.length-1])&&"text"===s.type?s.value+=l:n.push(i("text",l));return n};var i=n(5591),r=n(7986)},5633:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=[],r=-1,o=e.length;t&&n.push(i("text","\n"));for(;++r<o;)r&&n.push(i("text","\n")),n.push(e[r]);t&&e.length>0&&n.push(i("text","\n"));return n};var i=n(5591)},3740:e=>{"use strict";function t(e){return e&&(e.value||e.alt||e.title||"children"in e&&n(e.children)||"length"in e&&n(e))||""}function n(e){for(var n=[],i=-1;++i<e.length;)n[i]=t(e[i]);return n.join("")}e.exports=t},4542:(e,t,n)=>{"use strict";var i=n(107)(/[A-Za-z]/);e.exports=i},6647:(e,t,n)=>{"use strict";var i=n(107)(/[\dA-Za-z]/);e.exports=i},3790:(e,t,n)=>{"use strict";var i=n(107)(/[#-'*+\--9=?A-Z^-~]/);e.exports=i},3347:e=>{"use strict";e.exports=function(e){return e<32||127===e}},9675:(e,t,n)=>{"use strict";var i=n(107)(/\d/);e.exports=i},507:(e,t,n)=>{"use strict";var i=n(107)(/[\dA-Fa-f]/);e.exports=i},6402:(e,t,n)=>{"use strict";var i=n(107)(/[!-/:-@[-`{-~]/);e.exports=i},6415:e=>{"use strict";e.exports=function(e){return e<0||32===e}},3400:e=>{"use strict";e.exports=function(e){return e<-2}},1336:e=>{"use strict";e.exports=function(e){return-2===e||-1===e||32===e}},4130:(e,t,n)=>{"use strict";var i=n(1273),r=n(107)(i);e.exports=r},8077:(e,t,n)=>{"use strict";var i=n(107)(/\s/);e.exports=i},3160:e=>{"use strict";var t=Object.assign;e.exports=t},6714:e=>{"use strict";var t=String.fromCharCode;e.exports=t},7856:e=>{"use strict";var t={}.hasOwnProperty;e.exports=t},7753:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},7782:e=>{"use strict";e.exports=["pre","script","style","textarea"]},7789:e=>{"use strict";var t=[].splice;e.exports=t},1273:e=>{"use strict";e.exports=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/},7196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(292),r=n(7346),o=n(97),s=n(5164),a=n(5887),l=n(4219),c=n(2519),d=n(7375),u=n(3731),h=n(7591),p=n(8829),f=n(2484),m=n(2944),g=n(5135),v=n(1446),b=n(6959),y=n(4172),x=n(7854),k=n(8394),w=n(8904),C=n(6519),S={42:k,43:k,45:k,48:k,49:k,50:k,51:k,52:k,53:k,54:k,55:k,56:k,57:k,62:s},T={91:h},E={"-2":d,"-1":d,32:d},_={35:f,42:C,45:[w,C],60:m,61:w,95:C,96:c,126:c},I={38:l,92:a},P={"-5":x,"-4":x,"-3":x,33:b,38:l,42:r,60:[o,g],91:y,92:[p,a],93:v,95:r,96:u},R={null:[r,i.resolver]};t.contentInitial=T,t.disable={null:[]},t.document=S,t.flow=_,t.flowInitial=E,t.insideSpan=R,t.string=I,t.text=P},1878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3400),r=n(6449),o=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),o(t)}));return n;function o(n){var i=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=i),t=i,s(n)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):i(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),s)}};t.tokenize=o},2882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3400),r=n(6449),o=n(9097),s=function(e){var t,n,r,s=this,c=[],d=0,u={tokenize:function(e,i){var r=0;return t={},d;function d(i){return r<c.length?(s.containerState=c[r][1],e.attempt(c[r][0].continuation,u,h)(i)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,m(i)):(s.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,s.containerState={},e.attempt(a,f,m)(i))}function u(e){return r++,s.containerState._closeFlow?f(e):d(e)}function h(t){return n.currentConstruct&&n.currentConstruct.lazy?(s.containerState={},e.attempt(a,f,e.attempt(l,f,e.check(o,f,p)))(t)):f(t)}function p(e){return r=c.length,t.lazy=!0,t.flowContinue=!0,m(e)}function f(e){return t.flowEnd=!0,m(e)}function m(e){return t.continued=r,s.interrupt=s.containerState=void 0,i(e)}},partial:!0};return h;function h(t){return d<c.length?(s.containerState=c[d][1],e.attempt(c[d][0].continuation,p,f)(t)):f(t)}function p(e){return d++,h(e)}function f(i){return t&&t.flowContinue?g(i):(s.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,s.containerState={},e.attempt(a,m,g)(i))}function m(e){return c.push([s.currentConstruct,s.containerState]),s.containerState=void 0,f(e)}function g(t){return null===t?(x(0,!0),void e.consume(t)):(n=n||s.parser.flow(s.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:n}),v(t))}function v(t){return null===t?(y(e.exit("chunkFlow")),g(t)):i(t)?(e.consume(t),y(e.exit("chunkFlow")),e.check(u,b)):(e.consume(t),v)}function b(e){return x(t.continued,t&&t.flowEnd),d=0,h(e)}function y(e){r&&(r.next=e),r=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(s.sliceStream(e))}function x(t,i){var o=c.length;for(n&&i&&(n.write([null]),r=n=void 0);o-- >t;)s.containerState=c[o][1],c[o][0].exit.call(s,e);c.length=t}},a={tokenize:function(e,t,n){return r(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},l={tokenize:function(e,t,n){return r(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};t.tokenize=s},8079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4797),r=n(6449),o=n(9097),s=function(e){var t=this,n=e.attempt(o,(function(i){if(null===i)return void e.consume(i);return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,s,r(e,e.attempt(this.parser.constructs.flow,s,e.attempt(i,s)),"linePrefix")));return n;function s(i){if(null!==i)return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(i)}};t.tokenize=s},292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3160),r=n(5669),o=l("text"),s=l("string"),a={resolveAll:c()};function l(e){return{tokenize:function(t){var n=this,i=this.parser.constructs[e],r=t.attempt(i,o,s);return o;function o(e){return l(e)?r(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),r(e)):(t.consume(e),a)}function l(e){var t=i[e],r=-1;if(null===e)return!0;if(t)for(;++r<t.length;)if(!t[r].previous||t[r].previous.call(n,n.previous))return!0}},resolveAll:c("text"===e?d:void 0)}}function c(e){return function(t,n){var i,r=-1;for(;++r<=t.length;)void 0===i?t[r]&&"data"===t[r][1].type&&(i=r,r++):t[r]&&"data"===t[r][1].type||(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function d(e,t){for(var n,o,s,a,l,c,d,u,h=-1;++h<=e.length;)if((h===e.length||"lineEnding"===e[h][1].type)&&"data"===e[h-1][1].type){for(o=e[h-1][1],a=(n=t.sliceStream(o)).length,l=-1,c=0,d=void 0;a--;)if("string"===typeof(s=n[a])){for(l=s.length;32===s.charCodeAt(l-1);)c++,l--;if(l)break;l=-1}else if(-2===s)d=!0,c++;else if(-1!==s){a++;break}c&&(u={type:h===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-c,offset:o.end.offset-c,_index:o.start._index+a,_bufferIndex:a?l:o.start._bufferIndex+l},end:r(o.end)},o.end=r(u.start),o.start.offset===o.end.offset?i(o,u):(e.splice(h,0,["enter",u,t],["exit",u,t]),h+=2)),h++}return e}t.resolver=a,t.string=s,t.text=o},4727:(e,t,n)=>{"use strict";var i=n(1878),r=n(2882),o=n(8079),s=n(292),a=n(4903),l=n(3045),c=n(7177),d=n(7196);e.exports=function(e){var t={defined:[],constructs:a([d].concat(c((e||{}).extensions))),content:n(i),document:n(r),flow:n(o),string:n(s.string),text:n(s.text)};return t;function n(e){return function(n){return l(t,e,n)}}}},7311:(e,t,n)=>{"use strict";var i=n(8866);e.exports=function(e){for(;!i(e););return e}},7860:e=>{"use strict";var t=/[\0\t\n\r]/g;e.exports=function(){var e,n=!0,i=1,r="";return function(o,s,a){var l,c,d,u,h,p=[];o=r+o.toString(s),d=0,r="",n&&(65279===o.charCodeAt(0)&&d++,n=void 0);for(;d<o.length;){if(t.lastIndex=d,u=(l=t.exec(o))?l.index:o.length,h=o.charCodeAt(u),!l){r=o.slice(d);break}if(10===h&&d===u&&e)p.push(-3),e=void 0;else if(e&&(p.push(-5),e=void 0),d<u&&(p.push(o.slice(d,u)),i+=u-d),0===h)p.push(65533),i++;else if(9===h)for(c=4*Math.ceil(i/4),p.push(-2);i++<c;)p.push(-1);else 10===h?(p.push(-4),i=1):(e=!0,i=1);d=u+1}a&&(e&&p.push(-5),r&&p.push(r),p.push(null));return p}}},7346:(e,t,n)=>{"use strict";var i=n(8398),r=n(8334),o=n(5217),s=n(4235),a=n(2375),l=n(5669),c={name:"attention",tokenize:function(e,t){var n,i=o(this.previous);return function(t){return e.enter("attentionSequence"),n=t,r(t)};function r(s){var a,l,c,d;return s===n?(e.consume(s),r):(a=e.exit("attentionSequence"),c=!(l=o(s))||2===l&&i,d=!i||2===i&&l,a._open=42===n?c:c&&(i||!d),a._close=42===n?d:d&&(l||!c),t(s))}},resolveAll:function(e,t){var n,o,c,d,u,h,p,f,m=-1;for(;++m<e.length;)if("enter"===e[m][0]&&"attentionSequence"===e[m][1].type&&e[m][1]._close)for(n=m;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[m][1]).charCodeAt(0)){if((e[n][1]._close||e[m][1]._open)&&(e[m][1].end.offset-e[m][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[m][1].end.offset-e[m][1].start.offset)%3))continue;d={type:(h=e[n][1].end.offset-e[n][1].start.offset>1&&e[m][1].end.offset-e[m][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:s(l(e[n][1].end),-h),end:l(e[n][1].end)},u={type:h>1?"strongSequence":"emphasisSequence",start:l(e[m][1].start),end:s(l(e[m][1].start),h)},c={type:h>1?"strongText":"emphasisText",start:l(e[n][1].end),end:l(e[m][1].start)},o={type:h>1?"strong":"emphasis",start:l(d.start),end:l(u.end)},e[n][1].end=l(d.start),e[m][1].start=l(u.end),p=[],e[n][1].end.offset-e[n][1].start.offset&&(p=i(p,[["enter",e[n][1],t],["exit",e[n][1],t]])),p=i(p,[["enter",o,t],["enter",d,t],["exit",d,t],["enter",c,t]]),p=i(p,a(t.parser.constructs.insideSpan.null,e.slice(n+1,m),t)),p=i(p,[["exit",c,t],["enter",u,t],["exit",u,t],["exit",o,t]]),e[m][1].end.offset-e[m][1].start.offset?(f=2,p=i(p,[["enter",e[m][1],t],["exit",e[m][1],t]])):f=0,r(e,n-1,m-n+3,p),m=n+p.length-f-2;break}m=-1;for(;++m<e.length;)"attentionSequence"===e[m][1].type&&(e[m][1].type="data");return e}};e.exports=c},97:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3790),s=n(3347),a={name:"autolink",tokenize:function(e,t,n){var a=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l};function l(t){return i(t)?(e.consume(t),c):o(t)?h(t):n(t)}function c(e){return 43===e||45===e||46===e||r(e)?d(e):h(e)}function d(t){return 58===t?(e.consume(t),u):(43===t||45===t||46===t||r(t))&&a++<32?(e.consume(t),d):h(t)}function u(t){return 62===t?(e.exit("autolinkProtocol"),g(t)):32===t||60===t||s(t)?n(t):(e.consume(t),u)}function h(t){return 64===t?(e.consume(t),a=0,p):o(t)?(e.consume(t),h):n(t)}function p(e){return r(e)?f(e):n(e)}function f(t){return 46===t?(e.consume(t),a=0,p):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",g(t)):m(t)}function m(t){return(45===t||r(t))&&a++<63?(e.consume(t),45===t?m:f):n(t)}function g(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};e.exports=a},5164:(e,t,n)=>{"use strict";var i=n(1336),r=n(6449),o={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t)return r.containerState.open||(e.enter("blockQuote",{_container:!0}),r.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o;return n(t)};function o(n){return i(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return r(e,e.attempt(o,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};e.exports=o},5887:(e,t,n)=>{"use strict";var i=n(6402),r={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return i(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};e.exports=r},4219:(e,t,n)=>{"use strict";var i=n(6909),r=n(6647),o=n(9675),s=n(507);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=a(i),c={name:"characterReference",tokenize:function(e,t,n){var i,a,c=this,d=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),u};function u(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,a=r,p(t))}function h(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=s,p):(e.enter("characterReferenceValue"),i=7,a=o,p(t))}function p(o){var s;return 59===o&&d?(s=e.exit("characterReferenceValue"),a!==r||l.default(c.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)):a(o)&&d++<i?(e.consume(o),p):n(o)}}};e.exports=c},2519:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(2707),s=n(6449),a={name:"codeFenced",tokenize:function(e,t,n){var a,l=this,c={tokenize:function(e,t,n){var r=0;return s(e,o,"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}function l(t){return t===a?(e.consume(t),r++,l):r<u?n(t):(e.exit("codeFencedFenceSequence"),s(e,c,"whitespace")(t))}function c(r){return null===r||i(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},d=o(this.events,"linePrefix"),u=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a=t,h(t)};function h(t){return t===a?(e.consume(t),u++,h):(e.exit("codeFencedFenceSequence"),u<3?n(t):s(e,p,"whitespace")(t))}function p(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||r(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),s(e,m,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),f)}function m(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(t))}function g(t){return null===t||i(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===a?n(t):(e.consume(t),g)}function v(n){return e.exit("codeFencedFence"),l.interrupt?t(n):b(n)}function b(t){return null===t?x(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(c,x,d?s(e,b,"linePrefix",d+1):b)):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||i(t)?(e.exit("codeFlowValue"),b(t)):(e.consume(t),y)}function x(n){return e.exit("codeFenced"),t(n)}},concrete:!0};e.exports=a},7375:(e,t,n)=>{"use strict";var i=n(3400),r=n(8334),o=n(2707),s=n(6449),a={name:"codeIndented",tokenize:function(e,t,n){return e.attempt(l,r,n);function r(n){return null===n?t(n):i(n)?e.attempt(l,r,t)(n):(e.enter("codeFlowValue"),o(n))}function o(t){return null===t||i(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),o)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return r(e,0,0,[["enter",n,t]]),r(e,e.length,0,[["exit",n,t]]),e}},l={tokenize:function(e,t,n){var r=this;return s(e,(function a(l){if(i(l))return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s(e,a,"linePrefix",5);return o(r.events,"linePrefix")<4?n(l):t(l)}),"linePrefix",5)},partial:!0};e.exports=a},3731:(e,t,n)=>{"use strict";var i=n(3400),r={name:"codeText",tokenize:function(e,t,n){var r,o,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),s++,a):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):96===t?(o=e.enter("codeTextSequence"),r=0,d(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||i(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),c)}function d(n){return 96===n?(e.consume(n),r++,d):r===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",c(n))}},resolve:function(e){var t,n,i=e.length-4,r=3;if(("lineEnding"===e[r][1].type||"space"===e[r][1].type)&&("lineEnding"===e[i][1].type||"space"===e[i][1].type))for(t=r;++t<i;)if("codeTextData"===e[t][1].type){e[i][1].type=e[r][1].type="codeTextPadding",r+=2,i-=2;break}t=r-1,i++;for(;++t<=i;)void 0===n?t!==i&&"lineEnding"!==e[t][1].type&&(n=t):t!==i&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),i-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};e.exports=r},4797:(e,t,n)=>{"use strict";var i=n(3400),r=n(2707),o=n(8866),s=n(6449),a={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):i(t)?e.check(l,s,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),r}},resolve:function(e){return o(e),e},interruptible:!0,lazy:!0},l={tokenize:function(e,t,n){var o=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s(e,a,"linePrefix")};function a(s){return null===s||i(s)?n(s):o.parser.constructs.disable.null.indexOf("codeIndented")>-1||r(o.events,"linePrefix")<4?e.interrupt(o.parser.constructs.flow,n,t)(s):t(s)}},partial:!0};e.exports=a},7591:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(1008),s=n(8031),a=n(8185),l=n(6449),c=n(6366),d=n(4729),u={name:"definition",tokenize:function(e,t,n){var r,d=this;return function(t){return e.enter("definition"),a.call(d,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function u(t){return r=o(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),c(e,s(e,e.attempt(h,l(e,p,"whitespace"),l(e,p,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function p(o){return null===o||i(o)?(e.exit("definition"),d.parser.defined.indexOf(r)<0&&d.parser.defined.push(r),t(o)):n(o)}}},h={tokenize:function(e,t,n){return function(t){return r(t)?c(e,o)(t):n(t)};function o(t){return 34===t||39===t||40===t?d(e,l(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function s(e){return null===e||i(e)?t(e):n(e)}},partial:!0};e.exports=u},8031:(e,t,n)=>{"use strict";var i=n(3347),r=n(6415),o=n(3400);e.exports=function(e,t,n,s,a,l,c,d,u){var h=u||1/0,p=0;return function(t){if(60===t)return e.enter(s),e.enter(a),e.enter(l),e.consume(t),e.exit(l),f;if(i(t)||41===t)return n(t);return e.enter(s),e.enter(c),e.enter(d),e.enter("chunkString",{contentType:"string"}),v(t)};function f(n){return 62===n?(e.enter(l),e.consume(n),e.exit(l),e.exit(a),e.exit(s),t):(e.enter(d),e.enter("chunkString",{contentType:"string"}),m(n))}function m(t){return 62===t?(e.exit("chunkString"),e.exit(d),f(t)):null===t||60===t||o(t)?n(t):(e.consume(t),92===t?g:m)}function g(t){return 60===t||62===t||92===t?(e.consume(t),m):m(t)}function v(o){return 40===o?++p>h?n(o):(e.consume(o),v):41===o?p--?(e.consume(o),v):(e.exit("chunkString"),e.exit(d),e.exit(c),e.exit(s),t(o)):null===o||r(o)?p?n(o):(e.exit("chunkString"),e.exit(d),e.exit(c),e.exit(s),t(o)):i(o)?n(o):(e.consume(o),92===o?b:v)}function b(t){return 40===t||41===t||92===t?(e.consume(t),v):v(t)}}},8185:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336);e.exports=function(e,t,n,o,s,a){var l,c=this,d=0;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),e.enter(a),u};function u(r){return null===r||91===r||93===r&&!l||94===r&&!d&&"_hiddenFootnoteSupport"in c.parser.constructs||d>999?n(r):93===r?(e.exit(a),e.enter(s),e.consume(r),e.exit(s),e.exit(o),t):i(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(r))}function h(t){return null===t||91===t||93===t||i(t)||d++>999?(e.exit("chunkString"),u(t)):(e.consume(t),l=l||!r(t),92===t?p:h)}function p(t){return 91===t||92===t||93===t?(e.consume(t),d++,h):h(t)}}},6449:(e,t,n)=>{"use strict";var i=n(1336);e.exports=function(e,t,n,r){var o=r?r-1:1/0,s=0;return function(r){if(i(r))return e.enter(n),a(r);return t(r)};function a(r){return i(r)&&s++<o?(e.consume(r),a):(e.exit(n),t(r))}}},4729:(e,t,n)=>{"use strict";var i=n(3400),r=n(6449);e.exports=function(e,t,n,o,s,a){var l;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),l=40===t?41:t,c};function c(n){return n===l?(e.enter(s),e.consume(n),e.exit(s),e.exit(o),t):(e.enter(a),d(n))}function d(t){return t===l?(e.exit(a),c(l)):null===t?n(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===l||null===t||i(t)?(e.exit("chunkString"),d(t)):(e.consume(t),92===t?h:u)}function h(t){return t===l||92===t?(e.consume(t),u):u(t)}}},6366:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336),o=n(6449);e.exports=function(e,t){var n;return function s(a){if(i(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s;if(r(a))return o(e,s,n?"linePrefix":"lineSuffix")(a);return t(a)}}},8829:(e,t,n)=>{"use strict";var i=n(3400),r={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return i(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};e.exports=r},2484:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(1336),s=n(8334),a=n(6449),l={name:"headingAtx",tokenize:function(e,t,n){var s=this,l=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),c(t)};function c(i){return 35===i&&l++<6?(e.consume(i),c):null===i||r(i)?(e.exit("atxHeadingSequence"),s.interrupt?t(i):d(i)):n(i)}function d(n){return 35===n?(e.enter("atxHeadingSequence"),u(n)):null===n||i(n)?(e.exit("atxHeading"),t(n)):o(n)?a(e,d,"whitespace")(n):(e.enter("atxHeadingText"),h(n))}function u(t){return 35===t?(e.consume(t),u):(e.exit("atxHeadingSequence"),d(t))}function h(t){return null===t||35===t||r(t)?(e.exit("atxHeadingText"),d(t)):(e.consume(t),h)}},resolve:function(e,t){var n,i,r=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);r-2>o&&"whitespace"===e[r][1].type&&(r-=2);"atxHeadingSequence"===e[r][1].type&&(o===r-1||r-4>o&&"whitespace"===e[r-2][1].type)&&(r-=o+1===r?2:4);r>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[r][1].end},i={type:"chunkText",start:e[o][1].start,end:e[r][1].end,contentType:"text"},s(e,o,r-o+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]]));return e}};e.exports=l},2944:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3400),s=n(6415),a=n(1336),l=n(6714),c=n(7753),d=n(7782),u=n(9097),h={name:"htmlFlow",tokenize:function(e,t,n){var u,h,f,m,g,v=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),b};function b(r){return 33===r?(e.consume(r),y):47===r?(e.consume(r),w):63===r?(e.consume(r),u=3,v.interrupt?t:z):i(r)?(e.consume(r),f=l(r),h=!0,C):n(r)}function y(r){return 45===r?(e.consume(r),u=2,x):91===r?(e.consume(r),u=5,f="CDATA[",m=0,k):i(r)?(e.consume(r),u=4,v.interrupt?t:z):n(r)}function x(i){return 45===i?(e.consume(i),v.interrupt?t:z):n(i)}function k(i){return i===f.charCodeAt(m++)?(e.consume(i),m===f.length?v.interrupt?t:j:k):n(i)}function w(t){return i(t)?(e.consume(t),f=l(t),C):n(t)}function C(i){return null===i||47===i||62===i||s(i)?47!==i&&h&&d.indexOf(f.toLowerCase())>-1?(u=1,v.interrupt?t(i):j(i)):c.indexOf(f.toLowerCase())>-1?(u=6,47===i?(e.consume(i),S):v.interrupt?t(i):j(i)):(u=7,v.interrupt?n(i):h?E(i):T(i)):45===i||r(i)?(e.consume(i),f+=l(i),C):n(i)}function S(i){return 62===i?(e.consume(i),v.interrupt?t:j):n(i)}function T(t){return a(t)?(e.consume(t),T):O(t)}function E(t){return 47===t?(e.consume(t),O):58===t||95===t||i(t)?(e.consume(t),_):a(t)?(e.consume(t),E):O(t)}function _(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),_):I(t)}function I(t){return 61===t?(e.consume(t),P):a(t)?(e.consume(t),I):E(t)}function P(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),g=t,R):a(t)?(e.consume(t),P):(g=void 0,A(t))}function R(t){return t===g?(e.consume(t),M):null===t||o(t)?n(t):(e.consume(t),R)}function A(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||s(t)?I(t):(e.consume(t),A)}function M(e){return 47===e||62===e||a(e)?E(e):n(e)}function O(t){return 62===t?(e.consume(t),N):n(t)}function N(t){return a(t)?(e.consume(t),N):null===t||o(t)?j(t):n(t)}function j(t){return 45===t&&2===u?(e.consume(t),F):60===t&&1===u?(e.consume(t),B):62===t&&4===u?(e.consume(t),V):63===t&&3===u?(e.consume(t),z):93===t&&5===u?(e.consume(t),$):!o(t)||6!==u&&7!==u?null===t||o(t)?D(t):(e.consume(t),j):e.check(p,V,D)(t)}function D(t){return e.exit("htmlFlowData"),L(t)}function L(t){return null===t?H(t):o(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),L):(e.enter("htmlFlowData"),j(t))}function F(t){return 45===t?(e.consume(t),z):j(t)}function B(t){return 47===t?(e.consume(t),f="",U):j(t)}function U(t){return 62===t&&d.indexOf(f.toLowerCase())>-1?(e.consume(t),V):i(t)&&f.length<8?(e.consume(t),f+=l(t),U):j(t)}function $(t){return 93===t?(e.consume(t),z):j(t)}function z(t){return 62===t?(e.consume(t),V):j(t)}function V(t){return null===t||o(t)?(e.exit("htmlFlowData"),H(t)):(e.consume(t),V)}function H(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},p={tokenize:function(e,t,n){return function(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(u,t,n)}},partial:!0};e.exports=h},5135:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3400),s=n(6415),a=n(1336),l=n(6449),c={name:"htmlText",tokenize:function(e,t,n){var c,d,u,h,p=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),f};function f(t){return 33===t?(e.consume(t),m):47===t?(e.consume(t),I):63===t?(e.consume(t),E):i(t)?(e.consume(t),A):n(t)}function m(t){return 45===t?(e.consume(t),g):91===t?(e.consume(t),d="CDATA[",u=0,k):i(t)?(e.consume(t),T):n(t)}function g(t){return 45===t?(e.consume(t),v):n(t)}function v(t){return null===t||62===t?n(t):45===t?(e.consume(t),b):y(t)}function b(e){return null===e||62===e?n(e):y(e)}function y(t){return null===t?n(t):45===t?(e.consume(t),x):o(t)?(h=y,B(t)):(e.consume(t),y)}function x(t){return 45===t?(e.consume(t),$):y(t)}function k(t){return t===d.charCodeAt(u++)?(e.consume(t),u===d.length?w:k):n(t)}function w(t){return null===t?n(t):93===t?(e.consume(t),C):o(t)?(h=w,B(t)):(e.consume(t),w)}function C(t){return 93===t?(e.consume(t),S):w(t)}function S(t){return 62===t?$(t):93===t?(e.consume(t),S):w(t)}function T(t){return null===t||62===t?$(t):o(t)?(h=T,B(t)):(e.consume(t),T)}function E(t){return null===t?n(t):63===t?(e.consume(t),_):o(t)?(h=E,B(t)):(e.consume(t),E)}function _(e){return 62===e?$(e):E(e)}function I(t){return i(t)?(e.consume(t),P):n(t)}function P(t){return 45===t||r(t)?(e.consume(t),P):R(t)}function R(t){return o(t)?(h=R,B(t)):a(t)?(e.consume(t),R):$(t)}function A(t){return 45===t||r(t)?(e.consume(t),A):47===t||62===t||s(t)?M(t):n(t)}function M(t){return 47===t?(e.consume(t),$):58===t||95===t||i(t)?(e.consume(t),O):o(t)?(h=M,B(t)):a(t)?(e.consume(t),M):$(t)}function O(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),O):N(t)}function N(t){return 61===t?(e.consume(t),j):o(t)?(h=N,B(t)):a(t)?(e.consume(t),N):M(t)}function j(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,D):o(t)?(h=j,B(t)):a(t)?(e.consume(t),j):(e.consume(t),c=void 0,F)}function D(t){return t===c?(e.consume(t),L):null===t?n(t):o(t)?(h=D,B(t)):(e.consume(t),D)}function L(e){return 62===e||47===e||s(e)?M(e):n(e)}function F(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||s(t)?M(t):(e.consume(t),F)}function B(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l(e,U,"linePrefix",p.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function U(t){return e.enter("htmlTextData"),h(t)}function $(i){return 62===i?(e.consume(i),e.exit("htmlTextData"),e.exit("htmlText"),t):n(i)}}};e.exports=c},1446:(e,t,n)=>{"use strict";var i=n(6415),r=n(8398),o=n(8334),s=n(1008),a=n(2375),l=n(5669),c=n(8031),d=n(8185),u=n(4729),h=n(6366),p={name:"labelEnd",tokenize:function(e,t,n){var i,r,o=this,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){i=o.events[a][1];break}return function(t){if(!i)return n(t);return i._inactive?c(t):(r=o.parser.defined.indexOf(s(o.sliceSerialize({start:i.end,end:o.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l)};function l(n){return 40===n?e.attempt(f,t,r?t:c)(n):91===n?e.attempt(m,t,r?e.attempt(g,t,c):c)(n):r?t(n):c(n)}function c(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){var n,i,s,c,d,u,h,p=e.length,f=0;for(;p--;)if(c=e[p][1],d){if("link"===c.type||"labelLink"===c.type&&c._inactive)break;"enter"===e[p][0]&&"labelLink"===c.type&&(c._inactive=!0)}else if(u){if("enter"===e[p][0]&&("labelImage"===c.type||"labelLink"===c.type)&&!c._balanced&&(d=p,"labelLink"!==c.type)){f=2;break}}else"labelEnd"===c.type&&(u=p);return n={type:"labelLink"===e[d][1].type?"link":"image",start:l(e[d][1].start),end:l(e[e.length-1][1].end)},i={type:"label",start:l(e[d][1].start),end:l(e[u][1].end)},s={type:"labelText",start:l(e[d+f+2][1].end),end:l(e[u-2][1].start)},h=r(h=[["enter",n,t],["enter",i,t]],e.slice(d+1,d+f+3)),h=r(h,[["enter",s,t]]),h=r(h,a(t.parser.constructs.insideSpan.null,e.slice(d+f+4,u-3),t)),h=r(h,[["exit",s,t],e[u-2],e[u-1],["exit",i,t]]),h=r(h,e.slice(u+1)),h=r(h,[["exit",n,t]]),o(e,d,e.length,h),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},f={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),h(e,r)};function r(t){return 41===t?a(t):c(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function o(t){return i(t)?h(e,s)(t):a(t)}function s(t){return 34===t||39===t||40===t?u(e,h(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(i){return 41===i?(e.enter("resourceMarker"),e.consume(i),e.exit("resourceMarker"),e.exit("resource"),t):n(i)}}},m={tokenize:function(e,t,n){var i=this;return function(t){return d.call(i,e,r,n,"reference","referenceMarker","referenceString")(t)};function r(e){return i.parser.defined.indexOf(s(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},g={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i};function i(i){return 93===i?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}};e.exports=p},6959:(e,t,n)=>{"use strict";var i={name:"labelStartImage",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(1446).resolveAll};e.exports=i},4172:(e,t,n)=>{"use strict";var i={name:"labelStartLink",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(1446).resolveAll};e.exports=i},7854:(e,t,n)=>{"use strict";var i=n(6449),r={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i(e,t,"linePrefix")}}};e.exports=r},8394:(e,t,n)=>{"use strict";var i=n(9675),r=n(1336),o=n(2707),s=n(1175),a=n(6449),l=n(9097),c=n(6519),d={name:"list",tokenize:function(e,t,n){var a=this,d=o(a.events,"linePrefix"),h=0;return function(t){var r=a.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!a.containerState.marker||t===a.containerState.marker:i(t)){if(a.containerState.type||(a.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(c,n,f)(t):f(t);if(!a.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(t)}return n(t)};function p(t){return i(t)&&++h<10?(e.consume(t),p):(!a.interrupt||h<2)&&(a.containerState.marker?t===a.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),f(t)):n(t)}function f(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||t,e.check(l,a.interrupt?n:m,e.attempt(u,v,g))}function m(e){return a.containerState.initialBlankLine=!0,d++,v(e)}function g(t){return r(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),v):n(t)}function v(n){return a.containerState.size=d+s(a.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var i=this;return i.containerState._closeFlow=void 0,e.check(l,(function(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,a(e,t,"listItemIndent",i.containerState.size+1)(n)}),(function(n){if(i.containerState.furtherBlankLines||!r(n))return i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,o(n);return i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,e.attempt(h,t,o)(n)}));function o(r){return i.containerState._closeFlow=!0,i.interrupt=void 0,a(e,e.attempt(d,t,n),"linePrefix",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)}},u={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return r(e)||!o(i.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},h={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return o(i.events,"listItemIndent")===i.containerState.size?t(e):n(e)}),"listItemIndent",i.containerState.size+1)},partial:!0};e.exports=d},9097:(e,t,n)=>{"use strict";var i=n(3400),r=n(6449),o={tokenize:function(e,t,n){return r(e,(function(e){return null===e||i(e)?t(e):n(e)}),"linePrefix")},partial:!0};e.exports=o},8904:(e,t,n)=>{"use strict";var i=n(3400),r=n(5669),o=n(6449),s={name:"setextUnderline",tokenize:function(e,t,n){var r,s,a=this,l=a.events.length;for(;l--;)if("lineEnding"!==a.events[l][1].type&&"linePrefix"!==a.events[l][1].type&&"content"!==a.events[l][1].type){s="paragraph"===a.events[l][1].type;break}return function(t){if(!a.lazy&&(a.interrupt||s))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,c(t);return n(t)};function c(t){return t===r?(e.consume(t),c):(e.exit("setextHeadingLineSequence"),o(e,d,"lineSuffix")(t))}function d(r){return null===r||i(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,i,o,s,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(i=a)}else"content"===e[a][1].type&&e.splice(a,1),o||"definition"!==e[a][1].type||(o=a);s={type:"setextHeading",start:r(e[i][1].start),end:r(e[e.length-1][1].end)},e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=r(e[o][1].end)):e[n][1]=s;return e.push(["exit",s,t]),e}};e.exports=s},6519:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336),o=n(6449),s={name:"thematicBreak",tokenize:function(e,t,n){var s,a=0;return function(t){return e.enter("thematicBreak"),s=t,l(t)};function l(d){return d===s?(e.enter("thematicBreakSequence"),c(d)):r(d)?o(e,l,"whitespace")(d):a<3||null!==d&&!i(d)?n(d):(e.exit("thematicBreak"),t(d))}function c(t){return t===s?(e.consume(t),a++,c):(e.exit("thematicBreakSequence"),l(t))}}};e.exports=s},8398:(e,t,n)=>{"use strict";var i=n(8334);e.exports=function(e,t){return e.length?(i(e,e.length,0,t),e):t}},8334:(e,t,n)=>{"use strict";var i=n(7789);e.exports=function(e,t,n,r){var o,s=e.length,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)(o=Array.from(r)).unshift(t,n),i.apply(e,o);else for(n&&i.apply(e,[t,n]);a<r.length;)(o=r.slice(a,a+1e4)).unshift(t,0),i.apply(e,o),a+=1e4,t+=1e4}},5217:(e,t,n)=>{"use strict";var i=n(6415),r=n(4130),o=n(8077);e.exports=function(e){return null===e||i(e)||o(e)?1:r(e)?2:void 0}},4903:(e,t,n)=>{"use strict";var i=n(7856),r=n(8334),o=n(7177);function s(e,t){var n,r,s,l;for(n in t)for(l in r=i.call(e,n)?e[n]:e[n]={},s=t[n])r[l]=a(o(s[l]),i.call(r,l)?r[l]:[])}function a(e,t){for(var n=-1,i=[];++n<e.length;)("after"===e[n].add?t:i).push(e[n]);return r(t,0,0,i),t}e.exports=function(e){for(var t={},n=-1;++n<e.length;)s(t,e[n]);return t}},3045:(e,t,n)=>{"use strict";var i=n(3160),r=n(3400),o=n(8398),s=n(8334),a=n(7177),l=n(2375),c=n(5570),d=n(5669),u=n(570);e.exports=function(e,t,n){var h=n?d(n):{line:1,column:1,offset:0},p={},f=[],m=[],g=[],v={consume:function(e){r(e)?(h.line++,h.column=1,h.offset+=-3===e?2:1,_()):-1!==e&&(h.column++,h.offset++);h._bufferIndex<0?h._index++:(h._bufferIndex++,h._bufferIndex===m[h._index].length&&(h._bufferIndex=-1,h._index++));b.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=k(),b.events.push(["enter",n,b]),g.push(n),n},exit:function(e){var t=g.pop();return t.end=k(),b.events.push(["exit",t,b]),t},attempt:T((function(e,t){E(e,t.from)})),check:T(S),interrupt:T(S,{interrupt:!0}),lazy:T(S,{lazy:!0})},b={previous:null,events:[],parser:e,sliceStream:x,sliceSerialize:function(e){return c(x(e))},now:k,defineSkip:function(e){p[e.line]=e.column,_()},write:function(e){if(m=o(m,e),w(),null!==m[m.length-1])return[];return E(t,0),b.events=l(f,b.events,b),b.events}},y=t.tokenize.call(b,v);return t.resolveAll&&f.push(t),h._index=0,h._bufferIndex=-1,b;function x(e){return u(m,e)}function k(){return d(h)}function w(){for(var e,t;h._index<m.length;)if("string"===typeof(t=m[h._index]))for(e=h._index,h._bufferIndex<0&&(h._bufferIndex=0);h._index===e&&h._bufferIndex<t.length;)C(t.charCodeAt(h._bufferIndex));else C(t)}function C(e){y=y(e)}function S(e,t){t.restore()}function T(e,t){return function(n,r,o){var s,l,c,d;return n.tokenize||"length"in n?u(a(n)):function(e){if(e in n||null in n)return u(n.null?a(n[e]).concat(a(n.null)):n[e])(e);return o(e)};function u(e){return s=e,p(e[l=0])}function p(e){return function(n){d=function(){var e=k(),t=b.previous,n=b.currentConstruct,i=b.events.length,r=Array.from(g);return{restore:o,from:i};function o(){h=e,b.previous=t,b.currentConstruct=n,b.events.length=i,g=r,_()}}(),c=e,e.partial||(b.currentConstruct=e);if(e.name&&b.parser.constructs.disable.null.indexOf(e.name)>-1)return m();return e.tokenize.call(t?i({},b,t):b,v,f,m)(n)}}function f(t){return e(c,d),r}function m(e){return d.restore(),++l<s.length?p(s[l]):o}}}function E(e,t){e.resolveAll&&f.indexOf(e)<0&&f.push(e),e.resolve&&s(b.events,t,b.events.length-t,e.resolve(b.events.slice(t),b)),e.resolveTo&&(b.events=e.resolveTo(b.events,b))}function _(){h.line in p&&h.column<2&&(h.column=p[h.line],h.offset+=p[h.line]-1)}}},7177:e=>{"use strict";e.exports=function(e){return null===e||void 0===e?[]:"length"in e?e:[e]}},4235:e=>{"use strict";e.exports=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e}},1008:e=>{"use strict";e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},2707:(e,t,n)=>{"use strict";var i=n(1175);e.exports=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?i(n[2].sliceStream(n[1])):0}},107:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e){return function(t){return e.test(i(t))}}},2375:e=>{"use strict";e.exports=function(e,t,n){for(var i,r=[],o=-1;++o<e.length;)(i=e[o].resolveAll)&&r.indexOf(i)<0&&(t=i(t,n),r.push(i));return t}},8149:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":i(n)}},5570:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e){for(var t,n,r,o=-1,s=[];++o<e.length;){if("string"===typeof(t=e[o]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(r)continue;n=" "}else n=i(t);r=-2===t,s.push(n)}return s.join("")}},5669:(e,t,n)=>{"use strict";var i=n(3160);e.exports=function(e){return i({},e)}},1175:e=>{"use strict";e.exports=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"===typeof e[t]?e[t].length:1;return n}},570:e=>{"use strict";e.exports=function(e,t){var n,i=t.start._index,r=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;return i===o?n=[e[i].slice(r,s)]:(n=e.slice(i,o),r>-1&&(n[0]=n[0].slice(r)),s>0&&n.push(e[o].slice(0,s))),n}},8866:(e,t,n)=>{"use strict";var i=n(3160),r=n(8334),o=n(5669);function s(e,t){for(var n,i,o,s,a,l,c=e[t][1],d=e[t][2],u=t-1,h=[],p=c._tokenizer||d.parser[c.contentType](c.start),f=p.events,m=[],g={};c;){for(;e[++u][1]!==c;);h.push(u),c._tokenizer||(n=d.sliceStream(c),c.next||n.push(null),i&&p.defineSkip(c.start),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=!0),p.write(n),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=void 0)),i=c,c=c.next}for(c=i,o=f.length;o--;)"enter"===f[o][0]?s=!0:s&&f[o][1].type===f[o-1][1].type&&f[o][1].start.line!==f[o][1].end.line&&(v(f.slice(o+1,a)),c._tokenizer=c.next=void 0,c=c.previous,a=o+1);for(p.events=c._tokenizer=c.next=void 0,v(f.slice(0,a)),o=-1,l=0;++o<m.length;)g[l+m[o][0]]=l+m[o][1],l+=m[o][1]-m[o][0]-1;return g;function v(t){var n=h.pop();m.unshift([n,n+t.length-1]),r(e,n,2,t)}}e.exports=function(e){for(var t,n,a,l,c,d,u,h={},p=-1;++p<e.length;){for(;p in h;)p=h[p];if(t=e[p],p&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[p-1][1].type&&((a=0)<(d=t[1]._tokenizer.events).length&&"lineEndingBlank"===d[a][1].type&&(a+=2),a<d.length&&"content"===d[a][1].type))for(;++a<d.length&&"content"!==d[a][1].type;)"chunkText"===d[a][1].type&&(d[a][1].isInFirstContentOfListItem=!0,a++);if("enter"===t[0])t[1].contentType&&(i(h,s(e,p)),p=h[p],u=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(a=p,n=void 0;a--&&("lineEnding"===(l=e[a])[1].type||"lineEndingBlank"===l[1].type);)"enter"===l[0]&&(n&&(e[n][1].type="lineEndingBlank"),l[1].type="lineEnding",n=a);n&&(t[1].end=o(e[n][1].start),(c=e.slice(n,p)).unshift(t),r(e,n,p-n+1,c))}}return!u}},6928:(e,t,n)=>{"use strict";e.exports=function(e){var t=this;this.Parser=function(n){return i(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}};var i=n(3935)},6248:(e,t,n)=>{"use strict";var i=n(177);e.exports=function(e,t){e&&!e.process&&(t=e,e=null);return e?function(e,t){return n;function n(n,r,o){function s(e){o(e)}e.run(i(n,t),r,s)}}(e,t):function(e){return t;function t(t){return i(t,e)}}(t)}},1223:(e,t,n)=>{"use strict";var i=n(4015);e.exports=o,o.wrap=i;var r=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=r.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!==typeof o)throw new Error("Expected function as last argument, not "+o);(function s(a){var l=e[++t],c=r.call(arguments,0).slice(1),d=n.length,u=-1;if(a)o(a);else{for(;++u<d;)null!==c[u]&&void 0!==c[u]||(c[u]=n[u]);n=c,l?i(l,s).apply(null,n):o.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!==typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},4015:e=>{"use strict";var t=[].slice;e.exports=function(e,n){var i;return function(){var n,s=t.call(arguments,0),a=e.length>s.length;a&&s.push(r);try{n=e.apply(null,s)}catch(l){if(a&&i)throw l;return r(l)}a||(n&&"function"===typeof n.then?n.then(o,r):n instanceof Error?r(n):o(n))};function r(){i||(i=!0,n.apply(null,arguments))}function o(e){r(null,e)}}},9212:(e,t,n)=>{"use strict";var i=n(8686),r=n(5837),o=n(3240),s=n(7927),a=n(1223),l=n(3226);e.exports=function e(){var t,n=[],r=a(),b={},y=-1;return x.data=function(e,n){if("string"===typeof e)return 2===arguments.length?(m("data",t),b[e]=n,x):d.call(b,e)&&b[e]||null;if(e)return m("data",t),b=e,x;return b},x.freeze=k,x.attachers=n,x.use=function(e){var i;if(m("use",t),null===e||void 0===e);else if("function"===typeof e)d.apply(null,arguments);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?l(e):r(e)}i&&(b.settings=o(b.settings||{},i));return x;function r(e){l(e.plugins),e.settings&&(i=o(i||{},e.settings))}function a(e){if("function"===typeof e)d(e);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?d.apply(null,e):r(e)}}function l(e){var t=-1;if(null===e||void 0===e);else{if("object"!==typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)a(e[t])}}function d(e,t){var i=w(e);i?(s(i[1])&&s(t)&&(t=o(!0,i[1],t)),i[1]=t):n.push(c.call(arguments))}},x.parse=function(e){var t,n=l(e);if(k(),p("parse",t=x.Parser),h(t,"parse"))return new t(String(n),n).parse();return t(String(n),n)},x.stringify=function(e,t){var n,i=l(t);if(k(),f("stringify",n=x.Compiler),g(e),h(n,"compile"))return new n(e,i).compile();return n(e,i)},x.run=C,x.runSync=function(e,t){var n,r;return C(e,t,o),v("runSync","run",r),n;function o(e,t){r=!0,n=t,i(e)}},x.process=S,x.processSync=function(e){var t,n;return k(),p("processSync",x.Parser),f("processSync",x.Compiler),S(t=l(e),r),v("processSync","process",n),t;function r(e){n=!0,i(e)}},x;function x(){for(var t=e(),i=-1;++i<n.length;)t.use.apply(null,n[i]);return t.data(o(!0,{},b)),t}function k(){var e,i;if(t)return x;for(;++y<n.length;)!1!==(e=n[y])[1]&&(!0===e[1]&&(e[1]=void 0),"function"===typeof(i=e[0].apply(x,e.slice(1)))&&r.use(i));return t=!0,y=1/0,x}function w(e){for(var t=-1;++t<n.length;)if(n[t][0]===e)return n[t]}function C(e,t,n){if(g(e),k(),n||"function"!==typeof t||(n=t,t=null),!n)return new Promise(i);function i(i,o){r.run(e,l(t),(function(t,r,s){r=r||e,t?o(t):i?i(r):n(null,r,s)}))}i(null,n)}function S(e,t){if(k(),p("process",x.Parser),f("process",x.Compiler),!t)return new Promise(n);function n(n,i){var r=l(e);u.run(x,{file:r},(function(e){e?i(e):n?n(r):t(null,r)}))}n(null,t)}}().freeze();var c=[].slice,d={}.hasOwnProperty,u=a().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,i,r){e?n(e):(t.tree=i,t.file=r,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file);void 0===n||null===n||("string"===typeof n||r(n)?("value"in t.file&&(t.file.value=n),t.file.contents=n):t.file.result=n)}));function h(e,t){return"function"===typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function p(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function f(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function g(e){if(!e||"string"!==typeof e.type)throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},730:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},2210:e=>{"use strict";var t=r("start"),n=r("end");function i(e){return{start:t(e),end:n(e)}}function r(e){return t.displayName=e,t;function t(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}e.exports=i,i.start=t,i.end=n},394:e=>{"use strict";var t={}.hasOwnProperty;function n(e){return e&&"object"===typeof e||(e={}),r(e.line)+":"+r(e.column)}function i(e){return e&&"object"===typeof e||(e={}),n(e.start)+"-"+n(e.end)}function r(e){return e&&"number"===typeof e?e:1}e.exports=function(e){if(!e||"object"!==typeof e)return"";if(t.call(e,"position")||t.call(e,"type"))return i(e.position);if(t.call(e,"start")||t.call(e,"end"))return i(e);if(t.call(e,"line")||t.call(e,"column"))return n(e);return""}},4461:e=>{e.exports=function(e){return e}},6476:(e,t,n)=>{"use strict";e.exports=l;var i=n(730),r=n(4461),o=!0,s="skip",a=!1;function l(e,t,n,l){var c,d;"function"===typeof t&&"function"!==typeof n&&(l=n,n=t,t=null),d=i(t),c=l?-1:1,function e(i,u,h){var p,f="object"===typeof i&&null!==i?i:{};"string"===typeof f.type&&(p="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,m.displayName="node ("+r(f.type+(p?"<"+p+">":""))+")");return m;function m(){var r,p,f=h.concat(i),m=[];if((!t||d(i,u,h[h.length-1]||null))&&(m=function(e){if(null!==e&&"object"===typeof e&&"length"in e)return e;if("number"===typeof e)return[o,e];return[e]}(n(i,h)),m[0]===a))return m;if(i.children&&m[0]!==s)for(p=(l?i.children.length:-1)+c;p>-1&&p<i.children.length;){if((r=e(i.children[p],p,f)())[0]===a)return r;p="number"===typeof r[1]?r[1]:p+c}return m}}(e,null,[])()}l.CONTINUE=o,l.SKIP=s,l.EXIT=a},9512:(e,t,n)=>{"use strict";e.exports=a;var i=n(6476),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},840:(e,t,n)=>{"use strict";var i=n(394);function r(){}e.exports=s,r.prototype=Error.prototype,s.prototype=new r;var o=s.prototype;function s(e,t,n){var r,o,s;"string"===typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"===typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=i(t)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(s=t,t=t.start):s.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=s,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},3226:(e,t,n)=>{"use strict";e.exports=n(654)},3459:(e,t,n)=>{"use strict";var i=n(8299),r=n(1904),o=n(5837);e.exports=l;var s={}.hasOwnProperty,a=["history","path","basename","stem","extname","dirname"];function l(e){var t,n;if(e){if("string"===typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof l))return new l(e);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<a.length;)t=a[n],s.call(e,t)&&(this[t]=e[t]);for(t in e)a.indexOf(t)<0&&(this[t]=e[t])}function c(e,t){if(e&&e.indexOf(i.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function d(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function u(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}l.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(l.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){d(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(l.prototype,"dirname",{get:function(){return"string"===typeof this.path?i.dirname(this.path):void 0},set:function(e){u(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(l.prototype,"basename",{get:function(){return"string"===typeof this.path?i.basename(this.path):void 0},set:function(e){d(e,"basename"),c(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(l.prototype,"extname",{get:function(){return"string"===typeof this.path?i.extname(this.path):void 0},set:function(e){if(c(e,"extname"),u(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(l.prototype,"stem",{get:function(){return"string"===typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){d(e,"stem"),c(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})},654:(e,t,n)=>{"use strict";var i=n(840),r=n(3459);e.exports=r,r.prototype.message=function(e,t,n){var r=new i(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},8299:(e,t)=>{"use strict";function n(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var i,r,o,s,a=0,l=-1;if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');if(n(e),i=e.length,void 0===t||!t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(o){a=i+1;break}}else l<0&&(o=!0,l=i+1);return l<0?"":e.slice(a,l)}if(t===e)return"";r=-1,s=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(o){a=i+1;break}}else r<0&&(o=!0,r=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(l=i):(s=-1,l=r));a===l?l=r:l<0&&(l=e.length);return e.slice(a,l)},t.dirname=function(e){var t,i,r;if(n(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(i){t=r;break}}else i||(i=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,i,r,o=-1,s=0,a=-1,l=0;n(e),r=e.length;for(;r--;)if(47!==(i=e.charCodeAt(r)))a<0&&(t=!0,a=r+1),46===i?o<0?o=r:1!==l&&(l=1):o>-1&&(l=-1);else if(t){s=r+1;break}if(o<0||a<0||0===l||1===l&&o===a-1&&o===s+1)return"";return e.slice(o,a)},t.join=function(){var e,t=-1;for(;++t<arguments.length;)n(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":function(e){var t,i;n(e),t=47===e.charCodeAt(0),i=function(e,t){var n,i,r="",o=0,s=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),s=l,a=0;continue}}else if(r.length){r="",o=0,s=l,a=0;continue}t&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+e.slice(s+1,l):r=e.slice(s+1,l),o=l-s-1;s=l,a=0}else 46===n&&a>-1?a++:a=-1}return r}(e,!t),i.length||t||(i=".");i.length&&47===e.charCodeAt(e.length-1)&&(i+="/");return t?"/"+i:i}(e)},t.sep="/"},1904:(e,t)=>{"use strict";t.cwd=function(){return"/"}},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:d,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,m(x,v.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:C.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,k(s)?(r="",null!=e&&(r=e.replace(_,"$&/")+"/"),P(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var d=o+I(a=e[c],c);l+=P(a,t,r,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,d=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:C};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=y,t.StrictMode=o,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=j,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},3251:(e,t,n)=>{"use strict";var i=n(2590),r=n(4489);e.exports=function(e){var t=e||{},n=t.createElement;function a(e,i,r){var a=e;return r&&s.has(e)&&(r=r.filter((function(e){return"\n"!==e}))),t.components&&o.call(t.components,e)&&(a=t.components[e],t.passNode&&(i.node=this)),n(a,i,r)}this.Compiler=function(e){var o=i(a,r(e),t.prefix);return"root"===e.type?(o="div"!==o.type||1===e.children.length&&"element"===e.children[0].type?[o]:o.props.children,n(t.Fragment||"div",{},o)):o}};var o={}.hasOwnProperty,s=new Set(["table","thead","tbody","tfoot","tr","th","td"])},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,d=e[c];if(0>o(l,n))c<r&&0>o(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>o(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function k(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,O(w);else{var t=i(d);null!==t&&N(k,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,b(E),E=-1),f=!0;var o=p;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var u=i(d);null!==u&&N(k,u.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,T=null,E=-1,_=5,I=-1;function P(){return!(t.unstable_now()-I<_)}function R(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?C():(S=!1,T=null)}}else S=!1}if("function"===typeof y)C=function(){y(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,M=A.port2;A.port1.onmessage=R,C=function(){M.postMessage(null)}}else C=function(){v(R,0)};function O(e){T=e,S||(S=!0,C())}function N(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(d,e),null===i(c)&&e===i(d)&&(g?(b(E),E=-1):g=!0,N(k,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,O(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},7324:e=>{e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var d=e[c],u=t[c];if(!1===(r=n?n.call(i,d,u,c):void 0)||void 0===r&&d!==u)return!1}return!0}},5317:(e,t)=>{"use strict";t.parse=function(e){var t=String(e||n).trim();return t===n?[]:t.split(r)},t.stringify=function(e){return e.join(i).trim()};var n="",i=" ",r=/[ \t\n\r\f]+/g},5591:e=>{"use strict";e.exports=function(e,t,n){var i;null!==n&&void 0!==n||"object"===typeof t&&!Array.isArray(t)||(n=t,t={});i=Object.assign({type:String(e)},t),Array.isArray(n)?i.children=n:null!==n&&void 0!==n&&(i.value=String(n));return i}},2108:e=>{"use strict";e.exports=function(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}},49:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},5891:e=>{function t(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((n=>{const i=e[n],r=typeof i;"object"!==r&&"function"!==r||Object.isFrozen(i)||t(i)})),e}class n{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function i(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(e){const t=Object.create(null);for(const o in e)t[o]=e[o];for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((function(e){for(const n in e)t[n]=e[n]})),t}const o=e=>!!e.scope;class s{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=i(e)}openNode(e){if(!o(e))return;const t=((e,t)=>{let{prefix:n}=t;if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const t=e.split(".");return[`${n}${t.shift()}`,...t.map(((e,t)=>`${e}${"_".repeat(t+1)}`))].join(" ")}return`${n}${e}`})(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){o(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={children:[]};return Object.assign(t,e),t};class l{constructor(){this.rootNode=a(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=a({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"===typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!==typeof e&&e.children&&(e.children.every((e=>"string"===typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{l._collapse(e)})))}}class c extends l{constructor(e){super(),this.options=e}addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const n=e.root;t&&(n.scope=`language:${t}`),this.add(n)}toHTML(){return new s(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function d(e){return e?"string"===typeof e?e:e.source:null}function u(e){return f("(?=",e,")")}function h(e){return f("(?:",e,")*")}function p(e){return f("(?:",e,")?")}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>d(e))).join("")}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=function(e){const t=e[e.length-1];return"object"===typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(t);return"("+(i.capture?"":"?:")+t.map((e=>d(e))).join("|")+")"}function g(e){return new RegExp(e.toString()+"|").exec("").length-1}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function b(e,t){let{joinWith:n}=t,i=0;return e.map((e=>{i+=1;const t=i;let n=d(e),r="";for(;n.length>0;){const e=v.exec(n);if(!e){r+=n;break}r+=n.substring(0,e.index),n=n.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+String(Number(e[1])+t):(r+=e[0],"("===e[0]&&i++)}return r})).map((e=>`(${e})`)).join(n)}const y="[a-zA-Z]\\w*",x="[a-zA-Z_]\\w*",k="\\b\\d+(\\.\\d+)?",w="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",C="\\b(0b[01]+)",S={begin:"\\\\[\\s\\S]",relevance:0},T={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[S]},E={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[S]},_=function(e,t){const n=r({scope:"comment",begin:e,end:t,contains:[]},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=m("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:f(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},I=_("//","$"),P=_("/\\*","\\*/"),R=_("#","$"),A={scope:"number",begin:k,relevance:0},M={scope:"number",begin:w,relevance:0},O={scope:"number",begin:C,relevance:0},N={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[S,{begin:/\[/,end:/\]/,relevance:0,contains:[S]}]},j={scope:"title",begin:y,relevance:0},D={scope:"title",begin:x,relevance:0},L={begin:"\\.\\s*"+x,relevance:0};var F=Object.freeze({__proto__:null,APOS_STRING_MODE:T,BACKSLASH_ESCAPE:S,BINARY_NUMBER_MODE:O,BINARY_NUMBER_RE:C,COMMENT:_,C_BLOCK_COMMENT_MODE:P,C_LINE_COMMENT_MODE:I,C_NUMBER_MODE:M,C_NUMBER_RE:w,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})},HASH_COMMENT_MODE:R,IDENT_RE:y,MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD:L,NUMBER_MODE:A,NUMBER_RE:k,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},QUOTE_STRING_MODE:E,REGEXP_MODE:N,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=/^#![ ]*\//;return e.binary&&(e.begin=f(t,/.*\b/,e.binary,/\b.*/)),r({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},TITLE_MODE:j,UNDERSCORE_IDENT_RE:x,UNDERSCORE_TITLE_MODE:D});function B(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function U(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function $(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=B,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function z(e,t){Array.isArray(e.illegal)&&(e.illegal=m(...e.illegal))}function V(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function H(e,t){void 0===e.relevance&&(e.relevance=1)}const W=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach((t=>{delete e[t]})),e.keywords=n.keywords,e.begin=f(n.beforeMatch,u(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},q=["of","and","for","in","not","or","if","then","parent","list","value"],K="keyword";function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const i=Object.create(null);return"string"===typeof e?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach((function(n){Object.assign(i,G(e[n],t,n))})),i;function r(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");i[n[0]]=[e,Y(n[0],n[1])]}))}}function Y(e,t){return t?Number(t):function(e){return q.includes(e.toLowerCase())}(e)?0:1}const Q={},X=e=>{console.error(e)},J=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];console.log(`WARN: ${e}`,...n)},Z=(e,t)=>{Q[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Q[`${e}/${t}`]=!0)},ee=new Error;function te(e,t,n){let{key:i}=n,r=0;const o=e[i],s={},a={};for(let l=1;l<=t.length;l++)a[l+r]=o[l],s[l+r]=!0,r+=g(t[l-1]);e[i]=a,e[i]._emit=s,e[i]._multi=!0}function ne(e){!function(e){e.scope&&"object"===typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"===typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"===typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw X("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ee;if("object"!==typeof e.beginScope||null===e.beginScope)throw X("beginScope must be object"),ee;te(e,e.begin,{key:"beginScope"}),e.begin=b(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw X("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ee;if("object"!==typeof e.endScope||null===e.endScope)throw X("endScope must be object"),ee;te(e,e.end,{key:"endScope"}),e.end=b(e.end,{joinWith:""})}}(e)}function ie(e){function t(t,n){return new RegExp(d(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=g(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=t(b(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),i=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,i)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach((e=>{let[n,i]=e;return t.addRule(n,i)})),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=r(e.classNameAliases||{}),function n(o,s){const a=o;if(o.isCompiled)return a;[U,V,ne,W].forEach((e=>e(o,s))),e.compilerExtensions.forEach((e=>e(o,s))),o.__beforeBegin=null,[$,z,H].forEach((e=>e(o,s))),o.isCompiled=!0;let l=null;return"object"===typeof o.keywords&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),l=o.keywords.$pattern,delete o.keywords.$pattern),l=l||/\w+/,o.keywords&&(o.keywords=G(o.keywords,e.case_insensitive)),a.keywordPatternRe=t(l,!0),s&&(o.begin||(o.begin=/\B|\b/),a.beginRe=t(a.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(a.endRe=t(a.end)),a.terminatorEnd=d(a.end)||"",o.endsWithParent&&s.terminatorEnd&&(a.terminatorEnd+=(o.end?"|":"")+s.terminatorEnd)),o.illegal&&(a.illegalRe=t(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return r(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(re(e))return r(e,{starts:e.starts?r(e.starts):null});if(Object.isFrozen(e))return r(e);return e}("self"===e?o:e)}))),o.contains.forEach((function(e){n(e,a)})),o.starts&&n(o.starts,s),a.matcher=function(e){const t=new i;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function re(e){return!!e&&(e.endsWithParent||re(e.starts))}class oe extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const se=i,ae=r,le=Symbol("nomatch"),ce=function(e){const i=Object.create(null),r=Object.create(null),o=[];let s=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let d={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:c};function g(e){return d.noHighlightRe.test(e)}function v(e,t,n){let i="",r="";"object"===typeof t?(i=e,n=t.ignoreIllegals,r=t.language):(Z("10.7.0","highlight(lang, code, ...args) has been deprecated."),Z("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),r=e,i=t),void 0===n&&(n=!0);const o={code:i,language:r};E("before:highlight",o);const s=o.result?o.result:b(o.language,o.code,n);return s.code=o.code,E("after:highlight",s),s}function b(e,t,r,o){const l=Object.create(null);function c(){if(!E.keywords)return void I.addText(P);let e=0;E.keywordPatternRe.lastIndex=0;let t=E.keywordPatternRe.exec(P),n="";for(;t;){n+=P.substring(e,t.index);const r=w.case_insensitive?t[0].toLowerCase():t[0],o=(i=r,E.keywords[i]);if(o){const[e,i]=o;if(I.addText(n),n="",l[r]=(l[r]||0)+1,l[r]<=7&&(R+=i),e.startsWith("_"))n+=t[0];else{const n=w.classNameAliases[e]||e;h(t[0],n)}}else n+=t[0];e=E.keywordPatternRe.lastIndex,t=E.keywordPatternRe.exec(P)}var i;n+=P.substring(e),I.addText(n)}function u(){null!=E.subLanguage?function(){if(""===P)return;let e=null;if("string"===typeof E.subLanguage){if(!i[E.subLanguage])return void I.addText(P);e=b(E.subLanguage,P,!0,_[E.subLanguage]),_[E.subLanguage]=e._top}else e=y(P,E.subLanguage.length?E.subLanguage:null);E.relevance>0&&(R+=e.relevance),I.__addSublanguage(e._emitter,e.language)}():c(),P=""}function h(e,t){""!==e&&(I.startScope(t),I.addText(e),I.endScope())}function p(e,t){let n=1;const i=t.length-1;for(;n<=i;){if(!e._emit[n]){n++;continue}const i=w.classNameAliases[e[n]]||e[n],r=t[n];i?h(r,i):(P=r,c(),P=""),n++}}function f(e,t){return e.scope&&"string"===typeof e.scope&&I.openNode(w.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(h(P,w.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),P=""):e.beginScope._multi&&(p(e.beginScope,t),P="")),E=Object.create(e,{parent:{value:E}}),E}function m(e,t,i){let r=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,i);if(r){if(e["on:end"]){const i=new n(e);e["on:end"](t,i),i.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return m(e.parent,t,i)}function g(e){return 0===E.matcher.regexIndex?(P+=e[0],1):(O=!0,0)}function v(e){const n=e[0],i=t.substring(e.index),r=m(E,e,i);if(!r)return le;const o=E;E.endScope&&E.endScope._wrap?(u(),h(n,E.endScope._wrap)):E.endScope&&E.endScope._multi?(u(),p(E.endScope,e)):o.skip?P+=n:(o.returnEnd||o.excludeEnd||(P+=n),u(),o.excludeEnd&&(P=n));do{E.scope&&I.closeNode(),E.skip||E.subLanguage||(R+=E.relevance),E=E.parent}while(E!==r.parent);return r.starts&&f(r.starts,e),o.returnEnd?0:n.length}let x={};function k(i,o){const a=o&&o[0];if(P+=i,null==a)return u(),0;if("begin"===x.type&&"end"===o.type&&x.index===o.index&&""===a){if(P+=t.slice(o.index,o.index+1),!s){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=x.rule,t}return 1}if(x=o,"begin"===o.type)return function(e){const t=e[0],i=e.rule,r=new n(i),o=[i.__beforeBegin,i["on:begin"]];for(const n of o)if(n&&(n(e,r),r.isMatchIgnored))return g(t);return i.skip?P+=t:(i.excludeBegin&&(P+=t),u(),i.returnBegin||i.excludeBegin||(P=t)),f(i,e),i.returnBegin?0:t.length}(o);if("illegal"===o.type&&!r){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(E.scope||"<unnamed>")+'"');throw e.mode=E,e}if("end"===o.type){const e=v(o);if(e!==le)return e}if("illegal"===o.type&&""===a)return 1;if(M>1e5&&M>3*o.index){throw new Error("potential infinite loop, way more iterations than matches")}return P+=a,a.length}const w=C(e);if(!w)throw X(a.replace("{}",e)),new Error('Unknown language: "'+e+'"');const S=ie(w);let T="",E=o||S;const _={},I=new d.__emitter(d);!function(){const e=[];for(let t=E;t!==w;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach((e=>I.openNode(e)))}();let P="",R=0,A=0,M=0,O=!1;try{if(w.__emitTokens)w.__emitTokens(t,I);else{for(E.matcher.considerAll();;){M++,O?O=!1:E.matcher.considerAll(),E.matcher.lastIndex=A;const e=E.matcher.exec(t);if(!e)break;const n=k(t.substring(A,e.index),e);A=e.index+n}k(t.substring(A))}return I.finalize(),T=I.toHTML(),{language:e,value:T,relevance:R,illegal:!1,_emitter:I,_top:E}}catch(N){if(N.message&&N.message.includes("Illegal"))return{language:e,value:se(t),illegal:!0,relevance:0,_illegalBy:{message:N.message,index:A,context:t.slice(A-100,A+100),mode:N.mode,resultSoFar:T},_emitter:I};if(s)return{language:e,value:se(t),illegal:!1,relevance:0,errorRaised:N,_emitter:I,_top:E};throw N}}function y(e,t){t=t||d.languages||Object.keys(i);const n=function(e){const t={value:se(e),illegal:!1,relevance:0,_top:l,_emitter:new d.__emitter(d)};return t._emitter.addText(e),t}(e),r=t.filter(C).filter(T).map((t=>b(t,e,!1)));r.unshift(n);const o=r.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(C(e.language).supersetOf===t.language)return 1;if(C(t.language).supersetOf===e.language)return-1}return 0})),[s,a]=o,c=s;return c.secondBest=a,c}function x(e){let t=null;const n=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=d.languageDetectRe.exec(t);if(n){const t=C(n[1]);return t||(J(a.replace("{}",n[1])),J("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>g(e)||C(e)))}(e);if(g(n))return;if(E("before:highlightElement",{el:e,language:n}),e.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",e);if(e.children.length>0&&(d.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(e)),d.throwUnescapedHTML)){throw new oe("One of your code blocks includes unescaped HTML.",e.innerHTML)}t=e;const i=t.textContent,o=n?v(i,{language:n,ignoreIllegals:!0}):y(i);e.innerHTML=o.value,e.dataset.highlighted="yes",function(e,t,n){const i=t&&r[t]||n;e.classList.add("hljs"),e.classList.add(`language-${i}`)}(e,n,o.language),e.result={language:o.language,re:o.relevance,relevance:o.relevance},o.secondBest&&(e.secondBest={language:o.secondBest.language,relevance:o.secondBest.relevance}),E("after:highlightElement",{el:e,result:o,text:i})}let k=!1;function w(){if("loading"===document.readyState)return void(k=!0);document.querySelectorAll(d.cssSelector).forEach(x)}function C(e){return e=(e||"").toLowerCase(),i[e]||i[r[e]]}function S(e,t){let{languageName:n}=t;"string"===typeof e&&(e=[e]),e.forEach((e=>{r[e.toLowerCase()]=n}))}function T(e){const t=C(e);return t&&!t.disableAutodetect}function E(e,t){const n=e;o.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!==typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){k&&w()}),!1),Object.assign(e,{highlight:v,highlightAuto:y,highlightAll:w,highlightElement:x,highlightBlock:function(e){return Z("10.7.0","highlightBlock will be removed entirely in v12.0"),Z("10.7.0","Please use highlightElement now."),x(e)},configure:function(e){d=ae(d,e)},initHighlighting:()=>{w(),Z("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){w(),Z("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(t,n){let r=null;try{r=n(e)}catch(o){if(X("Language definition for '{}' could not be registered.".replace("{}",t)),!s)throw o;X(o),r=l}r.name||(r.name=t),i[t]=r,r.rawDefinition=n.bind(null,e),r.aliases&&S(r.aliases,{languageName:t})},unregisterLanguage:function(e){delete i[e];for(const t of Object.keys(r))r[t]===e&&delete r[t]},listLanguages:function(){return Object.keys(i)},getLanguage:C,registerAliases:S,autoDetection:T,inherit:ae,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),o.push(e)},removePlugin:function(e){const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString="11.9.0",e.regex={concat:f,lookahead:u,either:m,optional:p,anyNumberOfTimes:h};for(const n in F)"object"===typeof F[n]&&t(F[n]);return Object.assign(e,F),e},de=ce({});de.newInstance=()=>ce({}),e.exports=de,de.HighlightJS=de,de.default=de},308:e=>{"use strict";e.exports=JSON.parse('{"classId":"classID","dataType":"datatype","itemId":"itemID","strokeDashArray":"strokeDasharray","strokeDashOffset":"strokeDashoffset","strokeLineCap":"strokeLinecap","strokeLineJoin":"strokeLinejoin","strokeMiterLimit":"strokeMiterlimit","typeOf":"typeof","xLinkActuate":"xlinkActuate","xLinkArcRole":"xlinkArcrole","xLinkHref":"xlinkHref","xLinkRole":"xlinkRole","xLinkShow":"xlinkShow","xLinkTitle":"xlinkTitle","xLinkType":"xlinkType","xmlnsXLink":"xmlnsXlink"}')},8403:e=>{"use strict";e.exports=JSON.parse('{"html":"http://www.w3.org/1999/xhtml","mathml":"http://www.w3.org/1998/Math/MathML","svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink","xml":"http://www.w3.org/XML/1998/namespace","xmlns":"http://www.w3.org/2000/xmlns/"}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".c38787b0.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="webview-ui:";n.l=(i,r,o,s)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,o,s=i[0],a=i[1],l=i[2],c=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkwebview_ui=self.webpackChunkwebview_ui||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>SU,Encoder:()=>wU,PacketType:()=>kU,protocol:()=>xU});var t=n(5043),i=n.t(t,2),r=n(4391);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var a="undefined"!==typeof window,l=a?window:null,c=function(e){return!!e.addEventListener},d=function(e){return!!e.on};const u=function(e,n,i,r){void 0===i&&(i=l),(0,t.useEffect)((function(){if(n&&i)return c(i)?o(i,e,n,r):d(i)&&i.on(e,n,r),function(){c(i)?s(i,e,n,r):d(i)&&i.off(e,n,r)}}),[e,n,i,JSON.stringify(r)])},h="https://gpu.blackbox.ai",p=["o1","o3-mini","gemini-2.5-pro-preview-03-25","grok-4","grok-3-beta","llama-4-maverick-17b-128e-instruct-fp8","blackbox-base","blackbox-pro","sonnet","deepseek-v3","deepseek-r1","qwen","gemini-cli","o1","blackbox-voice","claude","claude-sonnet-3-7","anthropic/claude-sonnet-4","anthropic/claude-opus-4","blackbox-pro-plus","google/gemini-2.5-pro-preview","moonshotai/kimi-k2"],f=[{id:"monthly-499",period:"month",price:4.99,requestPriceMultiplier:1},{id:"monthly-1999",period:"month",price:19.99,requestPriceMultiplier:.9},{id:"monthly-9999",period:"month",price:99.99,requestPriceMultiplier:.5}],m=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof global)return global;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;try{return new Function("return this")()}catch(e){return{}}}();void 0===m.trustedTypes&&(m.trustedTypes={createPolicy:(e,t)=>t});const g={configurable:!1,enumerable:!1,writable:!1};void 0===m.FAST&&Reflect.defineProperty(m,"FAST",Object.assign({value:Object.create(null)},g));const v=m.FAST;if(void 0===v.getById){const e=Object.create(null);Reflect.defineProperty(v,"getById",Object.assign({value(t,n){let i=e[t];return void 0===i&&(i=n?e[t]=n():null),i}},g))}const b=Object.freeze([]);function y(){const e=new WeakMap;return function(t){let n=e.get(t);if(void 0===n){let i=Reflect.getPrototypeOf(t);for(;void 0===n&&null!==i;)n=e.get(i),i=Reflect.getPrototypeOf(i);n=void 0===n?[]:n.slice(0),e.set(t,n)}return n}}const x=m.FAST.getById(1,(()=>{const e=[],t=[];function n(){if(t.length)throw t.shift()}function i(e){try{e.call()}catch(i){t.push(i),setTimeout(n,0)}}function r(){let t=0;for(;t<e.length;)if(i(e[t]),t++,t>1024){for(let n=0,i=e.length-t;n<i;n++)e[n]=e[n+t];e.length-=t,t=0}e.length=0}return Object.freeze({enqueue:function(t){e.length<1&&m.requestAnimationFrame(r),e.push(t)},process:r})})),k=m.trustedTypes.createPolicy("fast-html",{createHTML:e=>e});let w=k;const C=`fast-${Math.random().toString(36).substring(2,8)}`,S=`${C}{`,T=`}${C}`,E=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(e){if(w!==k)throw new Error("The HTML policy can only be set once.");w=e},createHTML:e=>w.createHTML(e),isMarker:e=>e&&8===e.nodeType&&e.data.startsWith(C),extractDirectiveIndexFromMarker:e=>parseInt(e.data.replace(`${C}:`,"")),createInterpolationPlaceholder:e=>`${S}${e}${T}`,createCustomAttributePlaceholder(e,t){return`${e}="${this.createInterpolationPlaceholder(t)}"`},createBlockPlaceholder:e=>`\x3c!--${C}:${e}--\x3e`,queueUpdate:x.enqueue,processUpdates:x.process,nextUpdate:()=>new Promise(x.enqueue),setAttribute(e,t,n){null===n||void 0===n?e.removeAttribute(t):e.setAttribute(t,n)},setBooleanAttribute(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)},removeChildNodes(e){for(let t=e.firstChild;null!==t;t=e.firstChild)e.removeChild(t)},createTemplateWalker:e=>document.createTreeWalker(e,133,null,!1)});class _{constructor(e,t){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=e,this.sub1=t}has(e){return void 0===this.spillover?this.sub1===e||this.sub2===e:-1!==this.spillover.indexOf(e)}subscribe(e){const t=this.spillover;if(void 0===t){if(this.has(e))return;if(void 0===this.sub1)return void(this.sub1=e);if(void 0===this.sub2)return void(this.sub2=e);this.spillover=[this.sub1,this.sub2,e],this.sub1=void 0,this.sub2=void 0}else{-1===t.indexOf(e)&&t.push(e)}}unsubscribe(e){const t=this.spillover;if(void 0===t)this.sub1===e?this.sub1=void 0:this.sub2===e&&(this.sub2=void 0);else{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}notify(e){const t=this.spillover,n=this.source;if(void 0===t){const t=this.sub1,i=this.sub2;void 0!==t&&t.handleChange(n,e),void 0!==i&&i.handleChange(n,e)}else for(let i=0,r=t.length;i<r;++i)t[i].handleChange(n,e)}}class I{constructor(e){this.subscribers={},this.sourceSubscribers=null,this.source=e}notify(e){var t;const n=this.subscribers[e];void 0!==n&&n.notify(e),null===(t=this.sourceSubscribers)||void 0===t||t.notify(e)}subscribe(e,t){var n;if(t){let n=this.subscribers[t];void 0===n&&(this.subscribers[t]=n=new _(this.source)),n.subscribe(e)}else this.sourceSubscribers=null!==(n=this.sourceSubscribers)&&void 0!==n?n:new _(this.source),this.sourceSubscribers.subscribe(e)}unsubscribe(e,t){var n;if(t){const n=this.subscribers[t];void 0!==n&&n.unsubscribe(e)}else null===(n=this.sourceSubscribers)||void 0===n||n.unsubscribe(e)}}const P=v.getById(2,(()=>{const e=/(:|&&|\|\||if)/,t=new WeakMap,n=E.queueUpdate;let i,r=e=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function o(e){let n=e.$fastController||t.get(e);return void 0===n&&(Array.isArray(e)?n=r(e):t.set(e,n=new I(e))),n}const s=y();class a{constructor(e){this.name=e,this.field=`_${e}`,this.callback=`${e}Changed`}getValue(e){return void 0!==i&&i.watch(e,this.name),e[this.field]}setValue(e,t){const n=this.field,i=e[n];if(i!==t){e[n]=t;const r=e[this.callback];"function"===typeof r&&r.call(e,i,t),o(e).notify(this.name)}}}class l extends _{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e,t),this.binding=e,this.isVolatileBinding=n,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(e,t){this.needsRefresh&&null!==this.last&&this.disconnect();const n=i;i=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const r=this.binding(e,t);return i=n,r}disconnect(){if(null!==this.last){let e=this.first;for(;void 0!==e;)e.notifier.unsubscribe(this,e.propertyName),e=e.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(e,t){const n=this.last,r=o(e),s=null===n?this.first:{};if(s.propertySource=e,s.propertyName=t,s.notifier=r,r.subscribe(this,t),null!==n){if(!this.needsRefresh){let t;i=void 0,t=n.propertySource[n.propertyName],i=this,e===t&&(this.needsRefresh=!0)}n.next=s}this.last=s}handleChange(){this.needsQueue&&(this.needsQueue=!1,n(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let e=this.first;return{next:()=>{const t=e;return void 0===t?{value:void 0,done:!0}:(e=e.next,{value:t,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(e){r=e},getNotifier:o,track(e,t){void 0!==i&&i.watch(e,t)},trackVolatile(){void 0!==i&&(i.needsRefresh=!0)},notify(e,t){o(e).notify(t)},defineProperty(e,t){"string"===typeof t&&(t=new a(t)),s(e).push(t),Reflect.defineProperty(e,t.name,{enumerable:!0,get:function(){return t.getValue(this)},set:function(e){t.setValue(this,e)}})},getAccessors:s,binding(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.isVolatileBinding(e);return new l(e,t,n)},isVolatileBinding:t=>e.test(t.toString())})}));function R(e,t){P.defineProperty(e,t)}const A=v.getById(3,(()=>{let e=null;return{get:()=>e,set(t){e=t}}}));class M{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return A.get()}get isEven(){return this.index%2===0}get isOdd(){return this.index%2!==0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(e){A.set(e)}}P.defineProperty(M.prototype,"index"),P.defineProperty(M.prototype,"length");const O=Object.seal(new M);class N{constructor(){this.targets=new WeakSet}addStylesTo(e){this.targets.add(e)}removeStylesFrom(e){this.targets.delete(e)}isAttachedTo(e){return this.targets.has(e)}withBehaviors(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function j(e){return e.map((e=>e instanceof N?j(e.styles):[e])).reduce(((e,t)=>e.concat(t)),[])}function D(e){return e.map((e=>e instanceof N?e.behaviors:null)).reduce(((e,t)=>null===t?e:(null===e&&(e=[]),e.concat(t))),null)}N.create=(()=>{if(E.supportsAdoptedStyleSheets){const e=new Map;return t=>new $(t,e)}return e=>new V(e)})();const L=Symbol("prependToAdoptedStyleSheets");function F(e){const t=[],n=[];return e.forEach((e=>(e[L]?t:n).push(e))),{prepend:t,append:n}}let B=(e,t)=>{const{prepend:n,append:i}=F(t);e.adoptedStyleSheets=[...n,...e.adoptedStyleSheets,...i]},U=(e,t)=>{e.adoptedStyleSheets=e.adoptedStyleSheets.filter((e=>-1===t.indexOf(e)))};if(E.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),B=(e,t)=>{const{prepend:n,append:i}=F(t);e.adoptedStyleSheets.splice(0,0,...n),e.adoptedStyleSheets.push(...i)},U=(e,t)=>{for(const n of t){const t=e.adoptedStyleSheets.indexOf(n);-1!==t&&e.adoptedStyleSheets.splice(t,1)}}}catch(K$){}class $ extends N{constructor(e,t){super(),this.styles=e,this.styleSheetCache=t,this._styleSheets=void 0,this.behaviors=D(e)}get styleSheets(){if(void 0===this._styleSheets){const e=this.styles,t=this.styleSheetCache;this._styleSheets=j(e).map((e=>{if(e instanceof CSSStyleSheet)return e;let n=t.get(e);return void 0===n&&(n=new CSSStyleSheet,n.replaceSync(e),t.set(e,n)),n}))}return this._styleSheets}addStylesTo(e){B(e,this.styleSheets),super.addStylesTo(e)}removeStylesFrom(e){U(e,this.styleSheets),super.removeStylesFrom(e)}}let z=0;class V extends N{constructor(e){super(),this.styles=e,this.behaviors=null,this.behaviors=D(e),this.styleSheets=j(e),this.styleClass="fast-style-class-"+ ++z}addStylesTo(e){const t=this.styleSheets,n=this.styleClass;e=this.normalizeTarget(e);for(let i=0;i<t.length;i++){const r=document.createElement("style");r.innerHTML=t[i],r.className=n,e.append(r)}super.addStylesTo(e)}removeStylesFrom(e){const t=(e=this.normalizeTarget(e)).querySelectorAll(`.${this.styleClass}`);for(let n=0,i=t.length;n<i;++n)e.removeChild(t[n]);super.removeStylesFrom(e)}isAttachedTo(e){return super.isAttachedTo(this.normalizeTarget(e))}normalizeTarget(e){return e===document?document.body:e}}const H=Object.freeze({locate:y()}),W={toView:e=>e?"true":"false",fromView:e=>null!==e&&void 0!==e&&"false"!==e&&!1!==e&&0!==e},q={toView(e){if(null===e||void 0===e)return null;const t=1*e;return isNaN(t)?null:t.toString()},fromView(e){if(null===e||void 0===e)return null;const t=1*e;return isNaN(t)?null:t}};class K{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.toLowerCase(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"reflect",r=arguments.length>4?arguments[4]:void 0;this.guards=new Set,this.Owner=e,this.name=t,this.attribute=n,this.mode=i,this.converter=r,this.fieldName=`_${t}`,this.callbackName=`${t}Changed`,this.hasCallback=this.callbackName in e.prototype,"boolean"===i&&void 0===r&&(this.converter=W)}setValue(e,t){const n=e[this.fieldName],i=this.converter;void 0!==i&&(t=i.fromView(t)),n!==t&&(e[this.fieldName]=t,this.tryReflectToAttribute(e),this.hasCallback&&e[this.callbackName](n,t),e.$fastController.notify(this.name))}getValue(e){return P.track(e,this.name),e[this.fieldName]}onAttributeChangedCallback(e,t){this.guards.has(e)||(this.guards.add(e),this.setValue(e,t),this.guards.delete(e))}tryReflectToAttribute(e){const t=this.mode,n=this.guards;n.has(e)||"fromView"===t||E.queueUpdate((()=>{n.add(e);const i=e[this.fieldName];switch(t){case"reflect":const t=this.converter;E.setAttribute(e,this.attribute,void 0!==t?t.toView(i):i);break;case"boolean":E.setBooleanAttribute(e,this.attribute,i)}n.delete(e)}))}static collect(e){const t=[];for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.push(H.locate(e));for(let o=0,s=i.length;o<s;++o){const n=i[o];if(void 0!==n)for(let i=0,r=n.length;i<r;++i){const r=n[i];"string"===typeof r?t.push(new K(e,r)):t.push(new K(e,r.property,r.attribute,r.mode,r.converter))}}return t}}function G(e,t){let n;function i(e,t){arguments.length>1&&(n.property=t),H.locate(e.constructor).push(n)}return arguments.length>1?(n={},void i(e,t)):(n=void 0===e?{}:e,i)}const Y={mode:"open"},Q={},X=v.getById(4,(()=>{const e=new Map;return Object.freeze({register:t=>!e.has(t.type)&&(e.set(t.type,t),!0),getByType:t=>e.get(t)})}));class J{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.definition;"string"===typeof t&&(t={name:t}),this.type=e,this.name=t.name,this.template=t.template;const n=K.collect(e,t.attributes),i=new Array(n.length),r={},o={};for(let s=0,a=n.length;s<a;++s){const e=n[s];i[s]=e.attribute,r[e.name]=e,o[e.attribute]=e}this.attributes=n,this.observedAttributes=i,this.propertyLookup=r,this.attributeLookup=o,this.shadowOptions=void 0===t.shadowOptions?Y:null===t.shadowOptions?void 0:Object.assign(Object.assign({},Y),t.shadowOptions),this.elementOptions=void 0===t.elementOptions?Q:Object.assign(Object.assign({},Q),t.elementOptions),this.styles=void 0===t.styles?void 0:Array.isArray(t.styles)?N.create(t.styles):t.styles instanceof N?t.styles:N.create([t.styles])}get isDefined(){return!!X.getByType(this.type)}define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:customElements;const t=this.type;if(X.register(this)){const e=this.attributes,n=t.prototype;for(let t=0,i=e.length;t<i;++t)P.defineProperty(n,e[t]);Reflect.defineProperty(t,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return e.get(this.name)||e.define(this.name,t,this.elementOptions),this}}J.forType=X.getByType;function Z(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}const ee=new WeakMap,te={bubbles:!0,composed:!0,cancelable:!0};function ne(e){return e.shadowRoot||ee.get(e)||null}class ie extends I{constructor(e,t){super(e),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=e,this.definition=t;const n=t.shadowOptions;if(void 0!==n){const t=e.attachShadow(n);"closed"===n.mode&&ee.set(e,t)}const i=P.getAccessors(e);if(i.length>0){const t=this.boundObservables=Object.create(null);for(let n=0,r=i.length;n<r;++n){const r=i[n].name,o=e[r];void 0!==o&&(delete e[r],t[r]=o)}}}get isConnected(){return P.track(this,"isConnected"),this._isConnected}setIsConnected(e){this._isConnected=e,P.notify(this,"isConnected")}get template(){return this._template}set template(e){this._template!==e&&(this._template=e,this.needsInitialization||this.renderTemplate(e))}get styles(){return this._styles}set styles(e){this._styles!==e&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=e,this.needsInitialization||null===e||this.addStyles(e))}addStyles(e){const t=ne(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.append(e);else if(!e.isAttachedTo(t)){const n=e.behaviors;e.addStylesTo(t),null!==n&&this.addBehaviors(n)}}removeStyles(e){const t=ne(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.removeChild(e);else if(e.isAttachedTo(t)){const n=e.behaviors;e.removeStylesFrom(t),null!==n&&this.removeBehaviors(n)}}addBehaviors(e){const t=this.behaviors||(this.behaviors=new Map),n=e.length,i=[];for(let r=0;r<n;++r){const n=e[r];t.has(n)?t.set(n,t.get(n)+1):(t.set(n,1),i.push(n))}if(this._isConnected){const e=this.element;for(let t=0;t<i.length;++t)i[t].bind(e,O)}}removeBehaviors(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.behaviors;if(null===n)return;const i=e.length,r=[];for(let o=0;o<i;++o){const i=e[o];if(n.has(i)){const e=n.get(i)-1;0===e||t?n.delete(i)&&r.push(i):n.set(i,e)}}if(this._isConnected){const e=this.element;for(let t=0;t<r.length;++t)r[t].unbind(e)}}onConnectedCallback(){if(this._isConnected)return;const e=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(e,O);const t=this.behaviors;if(null!==t)for(const[n]of t)n.bind(e,O);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const e=this.view;null!==e&&e.unbind();const t=this.behaviors;if(null!==t){const e=this.element;for(const[n]of t)n.unbind(e)}}onAttributeChangedCallback(e,t,n){const i=this.definition.attributeLookup[e];void 0!==i&&i.onAttributeChangedCallback(this.element,n)}emit(e,t,n){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign({detail:t},te),n)))}finishInitialization(){const e=this.element,t=this.boundObservables;if(null!==t){const n=Object.keys(t);for(let i=0,r=n.length;i<r;++i){const r=n[i];e[r]=t[r]}this.boundObservables=null}const n=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():n.template&&(this._template=n.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():n.styles&&(this._styles=n.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(e){const t=this.element,n=ne(t)||t;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||E.removeChildNodes(n),e&&(this.view=e.render(t,n,t))}static forCustomElement(e){const t=e.$fastController;if(void 0!==t)return t;const n=J.forType(e.constructor);if(void 0===n)throw new Error("Missing FASTElement definition.");return e.$fastController=new ie(e,n)}}function re(e){return class extends e{constructor(){super(),ie.forCustomElement(this)}$emit(e,t,n){return this.$fastController.emit(e,t,n)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(e,t,n){this.$fastController.onAttributeChangedCallback(e,t,n)}}}const oe=Object.assign(re(HTMLElement),{from:e=>re(e),define:(e,t)=>new J(e,t).define().type});const se=new Map;"metadata"in Reflect||(Reflect.metadata=function(e,t){return function(n){Reflect.defineMetadata(e,t,n)}},Reflect.defineMetadata=function(e,t,n){let i=se.get(n);void 0===i&&se.set(n,i=new Map),i.set(e,t)},Reflect.getOwnMetadata=function(e,t){const n=se.get(t);if(void 0!==n)return n.get(e)});class ae{constructor(e,t){this.container=e,this.key=t}instance(e){return this.registerResolver(0,e)}singleton(e){return this.registerResolver(1,e)}transient(e){return this.registerResolver(2,e)}callback(e){return this.registerResolver(3,e)}cachedCallback(e){return this.registerResolver(3,Oe(e))}aliasTo(e){return this.registerResolver(5,e)}registerResolver(e,t){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new ke(i,e,t))}}function le(e){const t=e.slice(),n=Object.keys(e),i=n.length;let r;for(let o=0;o<i;++o)r=n[o],$e(r)||(t[r]=e[r]);return t}const ce=Object.freeze({none(e){throw Error(`${e.toString()} not registered, did you forget to add @singleton()?`)},singleton:e=>new ke(e,1,e),transient:e=>new ke(e,2,e)}),de=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:ce.singleton})}),ue=new Map;function he(e){return t=>Reflect.getOwnMetadata(e,t)}let pe=null;const fe=Object.freeze({createContainer:e=>new Ae(null,Object.assign({},de.default,e)),findResponsibleContainer(e){const t=e.$$container$$;return t&&t.responsibleForOwnerRequests?t:fe.findParentContainer(e)},findParentContainer(e){const t=new CustomEvent(Pe,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return e.dispatchEvent(t),t.detail.container||fe.getOrCreateDOMContainer()},getOrCreateDOMContainer:(e,t)=>e?e.$$container$$||new Ae(e,Object.assign({},de.default,t,{parentLocator:fe.findParentContainer})):pe||(pe=new Ae(null,Object.assign({},de.default,t,{parentLocator:()=>null}))),getDesignParamtypes:he("design:paramtypes"),getAnnotationParamtypes:he("di:paramtypes"),getOrCreateAnnotationParamTypes(e){let t=this.getAnnotationParamtypes(e);return void 0===t&&Reflect.defineMetadata("di:paramtypes",t=[],e),t},getDependencies(e){let t=ue.get(e);if(void 0===t){const n=e.inject;if(void 0===n){const n=fe.getDesignParamtypes(e),i=fe.getAnnotationParamtypes(e);if(void 0===n)if(void 0===i){const n=Object.getPrototypeOf(e);t="function"===typeof n&&n!==Function.prototype?le(fe.getDependencies(n)):[]}else t=le(i);else if(void 0===i)t=le(n);else{t=le(n);let e,r=i.length;for(let n=0;n<r;++n)e=i[n],void 0!==e&&(t[n]=e);const o=Object.keys(i);let s;r=o.length;for(let n=0;n<r;++n)s=o[n],$e(s)||(t[s]=i[s])}}else t=le(n);ue.set(e,t)}return t},defineProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=`$di_${t}`;Reflect.defineProperty(e,t,{get:function(){let e=this[r];if(void 0===e){const o=this instanceof HTMLElement?fe.findResponsibleContainer(this):fe.getOrCreateDOMContainer();if(e=o.get(n),this[r]=e,i&&this instanceof oe){const i=this.$fastController,o=()=>{fe.findResponsibleContainer(this).get(n)!==this[r]&&(this[r]=e,i.notify(t))};i.subscribe({handleChange:o},"isConnected")}}return e}})},createInterface(e,t){const n="function"===typeof e?e:t,i="string"===typeof e?e:e&&"friendlyName"in e&&e.friendlyName||Le,r="string"!==typeof e&&(e&&"respectConnection"in e&&e.respectConnection||!1),o=function(e,t,n){if(null==e||void 0!==new.target)throw new Error(`No registration for interface: '${o.friendlyName}'`);if(t)fe.defineProperty(e,t,o,r);else{fe.getOrCreateAnnotationParamTypes(e)[n]=o}};return o.$isInterface=!0,o.friendlyName=null==i?"(anonymous)":i,null!=n&&(o.register=function(e,t){return n(new ae(e,null!==t&&void 0!==t?t:o))}),o.toString=function(){return`InterfaceSymbol<${o.friendlyName}>`},o},inject(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,i){if("number"===typeof i){const n=fe.getOrCreateAnnotationParamTypes(e),r=t[0];void 0!==r&&(n[i]=r)}else if(n)fe.defineProperty(e,n,t[0]);else{const n=i?fe.getOrCreateAnnotationParamTypes(i.value):fe.getOrCreateAnnotationParamTypes(e);let r;for(let e=0;e<t.length;++e)r=t[e],void 0!==r&&(n[e]=r)}}},transient:e=>(e.register=function(t){return Ne.transient(e,e).register(t)},e.registerInRequestor=!1,e),singleton(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;return e.register=function(t){return Ne.singleton(e,e).register(t)},e.registerInRequestor=t.scoped,e}}),me=fe.createInterface("Container");function ge(e){return function(t){const n=function(e,t,i){fe.inject(n)(e,t,i)};return n.$isResolver=!0,n.resolve=function(n,i){return e(t,n,i)},n}}fe.inject;const ve={scoped:!1};be=(e,t,n,i)=>n.getAll(e,i);var be;ge(((e,t,n)=>()=>n.get(e))),ge(((e,t,n)=>n.has(e,!0)?n.get(e):void 0));function ye(e,t,n){fe.inject(ye)(e,t,n)}ye.$isResolver=!0,ye.resolve=()=>{};ge(((e,t,n)=>{const i=xe(e,t),r=new ke(e,0,i);return n.registerResolver(e,r),i})),ge(((e,t,n)=>xe(e,t)));function xe(e,t){return t.getFactory(e).construct(t)}class ke{constructor(e,t,n){this.key=e,this.strategy=t,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(e){return e.registerResolver(this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=e.getFactory(this.state).construct(t),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=e.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return n.construct(t)}case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return t.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(e){var t,n,i;switch(this.strategy){case 1:case 2:return e.getFactory(this.state);case 5:return null!==(i=null===(n=null===(t=e.getResolver(this.state))||void 0===t?void 0:t.getFactory)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:null;default:return null}}}function we(e){return this.get(e)}function Ce(e,t){return t(e)}class Se{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){let n;return n=void 0===t?new this.Type(...this.dependencies.map(we,e)):new this.Type(...this.dependencies.map(we,e),...t),null==this.transformers?n:this.transformers.reduce(Ce,n)}registerTransformer(e){(this.transformers||(this.transformers=[])).push(e)}}const Te={$isResolver:!0,resolve:(e,t)=>t};function Ee(e){return"function"===typeof e.register}function _e(e){return function(e){return Ee(e)&&"boolean"===typeof e.registerInRequestor}(e)&&e.registerInRequestor}const Ie=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),Pe="__DI_LOCATE_PARENT__",Re=new Map;class Ae{constructor(e,t){this.owner=e,this.config=t,this._parent=void 0,this.registerDepth=0,this.context=null,null!==e&&(e.$$container$$=this),this.resolvers=new Map,this.resolvers.set(me,Te),e instanceof Node&&e.addEventListener(Pe,(e=>{e.composedPath()[0]!==this.owner&&(e.detail.container=this,e.stopImmediatePropagation())}))}get parent(){return void 0===this._parent&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return null===this.parent?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(e){this.context=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.register(...n),this.context=null,this}register(){if(100===++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,t,n,i,r;const o=this.context;for(let s=0,a=arguments.length;s<a;++s)if(e=s<0||arguments.length<=s?void 0:arguments[s],Fe(e))if(Ee(e))e.register(this,o);else if(void 0!==e.prototype)Ne.singleton(e,e).register(this);else for(t=Object.keys(e),i=0,r=t.length;i<r;++i)n=e[t[i]],Fe(n)&&(Ee(n)?n.register(this,o):this.register(n));return--this.registerDepth,this}registerResolver(e,t){je(e);const n=this.resolvers,i=n.get(e);return null==i?n.set(e,t):i instanceof ke&&4===i.strategy?i.state.push(t):n.set(e,new ke(e,4,[i,t])),t}registerTransformer(e,t){const n=this.getResolver(e);if(null==n)return!1;if(n.getFactory){const e=n.getFactory(this);return null!=e&&(e.registerTransformer(t),!0)}return!1}getResolver(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(je(e),void 0!==e.resolve)return e;let n,i=this;for(;null!=i;){if(n=i.resolvers.get(e),null!=n)return n;if(null==i.parent){const n=_e(e)?this:i;return t?this.jitRegister(e,n):null}i=i.parent}return null}has(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.resolvers.has(e)||!(!t||null==this.parent)&&this.parent.has(e,!0)}get(e){if(je(e),e.$isResolver)return e.resolve(this,this);let t,n=this;for(;null!=n;){if(t=n.resolvers.get(e),null!=t)return t.resolve(n,this);if(null==n.parent){const i=_e(e)?this:n;return t=this.jitRegister(e,i),t.resolve(n,this)}n=n.parent}throw new Error(`Unable to resolve key: ${String(e)}`)}getAll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];je(e);const n=this;let i,r=n;if(t){let t=b;for(;null!=r;)i=r.resolvers.get(e),null!=i&&(t=t.concat(De(i,r,n))),r=r.parent;return t}for(;null!=r;){if(i=r.resolvers.get(e),null!=i)return De(i,r,n);if(r=r.parent,null==r)return b}return b}getFactory(e){let t=Re.get(e);if(void 0===t){if(Be(e))throw new Error(`${e.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);Re.set(e,t=new Se(e,fe.getDependencies(e)))}return t}registerFactory(e,t){Re.set(e,t)}createChild(e){return new Ae(null,Object.assign({},this.config,e,{parentLocator:()=>this}))}jitRegister(e,t){if("function"!==typeof e)throw new Error(`Attempted to jitRegister something that is not a constructor: '${e}'. Did you forget to register this dependency?`);if(Ie.has(e.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${e.name}. Did you forget to add @inject(Key)`);if(Ee(e)){const n=e.register(t);if(!(n instanceof Object)||null==n.resolve){const n=t.resolvers.get(e);if(void 0!=n)return n;throw new Error("A valid resolver was not returned from the static register method")}return n}if(e.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${e.friendlyName}`);{const n=this.config.defaultResolver(e,t);return t.resolvers.set(e,n),n}}}const Me=new WeakMap;function Oe(e){return function(t,n,i){if(Me.has(i))return Me.get(i);const r=e(t,n,i);return Me.set(i,r),r}}const Ne=Object.freeze({instance:(e,t)=>new ke(e,0,t),singleton:(e,t)=>new ke(e,1,t),transient:(e,t)=>new ke(e,2,t),callback:(e,t)=>new ke(e,3,t),cachedCallback:(e,t)=>new ke(e,3,Oe(t)),aliasTo:(e,t)=>new ke(t,5,e)});function je(e){if(null===e||void 0===e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function De(e,t,n){if(e instanceof ke&&4===e.strategy){const i=e.state;let r=i.length;const o=new Array(r);for(;r--;)o[r]=i[r].resolve(t,n);return o}return[e.resolve(t,n)]}const Le="(anonymous)";function Fe(e){return"object"===typeof e&&null!==e||"function"===typeof e}const Be=function(){const e=new WeakMap;let t=!1,n="",i=0;return function(r){return t=e.get(r),void 0===t&&(n=r.toString(),i=n.length,t=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),e.set(r,t)),t}}(),Ue={};function $e(e){switch(typeof e){case"number":return e>=0&&(0|e)===e;case"string":{const t=Ue[e];if(void 0!==t)return t;const n=e.length;if(0===n)return Ue[e]=!1;let i=0;for(let r=0;r<n;++r)if(i=e.charCodeAt(r),0===r&&48===i&&n>1||i<48||i>57)return Ue[e]=!1;return Ue[e]=!0}default:return!1}}function ze(e){return`${e.toLowerCase()}:presentation`}const Ve=new Map,He=Object.freeze({define(e,t,n){const i=ze(e);void 0===Ve.get(i)?Ve.set(i,t):Ve.set(i,!1),n.register(Ne.instance(i,t))},forTag(e,t){const n=ze(e),i=Ve.get(n);if(!1===i){return fe.findResponsibleContainer(t).get(n)}return i||null}});class We{constructor(e,t){this.template=e||null,this.styles=void 0===t?null:Array.isArray(t)?N.create(t):t instanceof N?t:N.create([t])}applyTo(e){const t=e.$fastController;null===t.template&&(t.template=this.template),null===t.styles&&(t.styles=this.styles)}}class qe extends oe{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return void 0===this._presentation&&(this._presentation=He.forTag(this.tagName,this)),this._presentation}templateChanged(){void 0!==this.template&&(this.$fastController.template=this.template)}stylesChanged(){void 0!==this.styles&&(this.$fastController.styles=this.styles)}connectedCallback(){null!==this.$presentation&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(e){var t=this;return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ge(t===qe?class extends qe{}:t,e,n)}}}function Ke(e,t,n){return"function"===typeof e?e(t,n):e}Z([R],qe.prototype,"template",void 0),Z([R],qe.prototype,"styles",void 0);class Ge{constructor(e,t,n){this.type=e,this.elementDefinition=t,this.overrideDefinition=n,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(e,t){const n=this.definition,i=this.overrideDefinition,r=`${n.prefix||t.elementPrefix}-${n.baseName}`;t.tryDefineElement({name:r,type:this.type,baseClass:this.elementDefinition.baseClass,callback:e=>{const t=new We(Ke(n.template,e,n),Ke(n.styles,e,n));e.definePresentation(t);let r=Ke(n.shadowOptions,e,n);e.shadowRootMode&&(r?i.shadowOptions||(r.mode=e.shadowRootMode):null!==r&&(r={mode:e.shadowRootMode})),e.defineElement({elementOptions:Ke(n.elementOptions,e,n),shadowOptions:r,attributes:Ke(n.attributes,e,n)})}})}}const Ye=new Set(["children","localName","ref","style","className"]),Qe=Object.freeze(Object.create(null)),Xe="_default",Je=new Map;function Ze(e,t){if(!t.name){const n=J.forType(e);if(!n)throw new Error("React wrappers must wrap a FASTElement or be configured with a name.");t.name=n.name}return t.name}function et(e){return e.events||(e.events={})}function tt(e,t,n){return!Ye.has(n)||(console.warn(`${Ze(e,t)} contains property ${n} which is a React reserved property. It will be used by React and not set on the element.`),!1)}class nt extends qe{constructor(){super(...arguments),this.generateBadgeStyle=()=>{if(!this.fill&&!this.color)return;const e=`background-color: var(--badge-fill-${this.fill});`,t=`color: var(--badge-color-${this.color});`;return this.fill&&!this.color?e:this.color&&!this.fill?t:`${t} ${e}`}}}Z([G({attribute:"fill"})],nt.prototype,"fill",void 0),Z([G({attribute:"color"})],nt.prototype,"color",void 0),Z([G({mode:"boolean"})],nt.prototype,"circular",void 0);class it{constructor(){this.targetIndex=0}}class rt extends it{constructor(){super(...arguments),this.createPlaceholder=E.createInterpolationPlaceholder}}class ot extends it{constructor(e,t,n){super(),this.name=e,this.behavior=t,this.options=n}createPlaceholder(e){return E.createCustomAttributePlaceholder(this.name,e)}createBehavior(e){return new this.behavior(e,this.options)}}function st(e,t){this.source=e,this.context=t,null===this.bindingObserver&&(this.bindingObserver=P.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(e,t))}function at(e,t){this.source=e,this.context=t,this.target.addEventListener(this.targetName,this)}function lt(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function ct(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const e=this.target.$fastView;void 0!==e&&e.isComposed&&(e.unbind(),e.needsBindOnly=!0)}function dt(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function ut(e){E.setAttribute(this.target,this.targetName,e)}function ht(e){E.setBooleanAttribute(this.target,this.targetName,e)}function pt(e){if(null!==e&&void 0!==e||(e=""),e.create){this.target.textContent="";let t=this.target.$fastView;void 0===t?t=e.create():this.target.$fastTemplate!==e&&(t.isComposed&&(t.remove(),t.unbind()),t=e.create()),t.isComposed?t.needsBindOnly&&(t.needsBindOnly=!1,t.bind(this.source,this.context)):(t.isComposed=!0,t.bind(this.source,this.context),t.insertBefore(this.target),this.target.$fastView=t,this.target.$fastTemplate=e)}else{const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.isComposed=!1,t.remove(),t.needsBindOnly?t.needsBindOnly=!1:t.unbind()),this.target.textContent=e}}function ft(e){this.target[this.targetName]=e}function mt(e){const t=this.classVersions||Object.create(null),n=this.target;let i=this.version||0;if(null!==e&&void 0!==e&&e.length){const r=e.split(/\s+/);for(let e=0,o=r.length;e<o;++e){const o=r[e];""!==o&&(t[o]=i,n.classList.add(o))}}if(this.classVersions=t,this.version=i+1,0!==i){i-=1;for(const e in t)t[e]===i&&n.classList.remove(e)}}class gt extends rt{constructor(e){super(),this.binding=e,this.bind=st,this.unbind=lt,this.updateTarget=ut,this.isBindingVolatile=P.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(e){if(this.originalTargetName=e,void 0!==e)switch(e[0]){case":":if(this.cleanedTargetName=e.substr(1),this.updateTarget=ft,"innerHTML"===this.cleanedTargetName){const e=this.binding;this.binding=(t,n)=>E.createHTML(e(t,n))}break;case"?":this.cleanedTargetName=e.substr(1),this.updateTarget=ht;break;case"@":this.cleanedTargetName=e.substr(1),this.bind=at,this.unbind=dt;break;default:this.cleanedTargetName=e,"class"===e&&(this.updateTarget=mt)}}targetAtContent(){this.updateTarget=pt,this.unbind=ct}createBehavior(e){return new vt(e,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class vt{constructor(e,t,n,i,r,o,s){this.source=null,this.context=null,this.bindingObserver=null,this.target=e,this.binding=t,this.isBindingVolatile=n,this.bind=i,this.unbind=r,this.updateTarget=o,this.targetName=s}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(e){M.setEvent(e);const t=this.binding(this.source,this.context);M.setEvent(null),!0!==t&&e.preventDefault()}}let bt=null;class yt{addFactory(e){e.targetIndex=this.targetIndex,this.behaviorFactories.push(e)}captureContentBinding(e){e.targetAtContent(),this.addFactory(e)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){bt=this}static borrow(e){const t=bt||new yt;return t.directives=e,t.reset(),bt=null,t}}function xt(e){if(1===e.length)return e[0];let t;const n=e.length,i=e.map((e=>"string"===typeof e?()=>e:(t=e.targetName||t,e.binding))),r=new gt(((e,t)=>{let r="";for(let o=0;o<n;++o)r+=i[o](e,t);return r}));return r.targetName=t,r}const kt=T.length;function wt(e,t){const n=t.split(S);if(1===n.length)return null;const i=[];for(let r=0,o=n.length;r<o;++r){const t=n[r],o=t.indexOf(T);let s;if(-1===o)s=t;else{const n=parseInt(t.substring(0,o));i.push(e.directives[n]),s=t.substring(o+kt)}""!==s&&i.push(s)}return i}function Ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.attributes;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=s.value,l=wt(e,a);let c=null;null===l?n&&(c=new gt((()=>a)),c.targetName=s.name):c=xt(l),null!==c&&(t.removeAttributeNode(s),r--,o--,e.addFactory(c))}}function St(e,t,n){const i=wt(e,t.textContent);if(null!==i){let r=t;for(let o=0,s=i.length;o<s;++o){const s=i[o],a=0===o?t:r.parentNode.insertBefore(document.createTextNode(""),r.nextSibling);"string"===typeof s?a.textContent=s:(a.textContent=" ",e.captureContentBinding(s)),r=a,e.targetIndex++,a!==t&&n.nextNode()}e.targetIndex--}}const Tt=document.createRange();class Et{constructor(e,t){this.fragment=e,this.behaviors=t,this.source=null,this.context=null,this.firstChild=e.firstChild,this.lastChild=e.lastChild}appendTo(e){e.appendChild(this.fragment)}insertBefore(e){if(this.fragment.hasChildNodes())e.parentNode.insertBefore(this.fragment,e);else{const t=this.lastChild;if(e.previousSibling===t)return;const n=e.parentNode;let i,r=this.firstChild;for(;r!==t;)i=r.nextSibling,n.insertBefore(r,e),r=i;n.insertBefore(t,e)}}remove(){const e=this.fragment,t=this.lastChild;let n,i=this.firstChild;for(;i!==t;)n=i.nextSibling,e.appendChild(i),i=n;e.appendChild(t)}dispose(){const e=this.firstChild.parentNode,t=this.lastChild;let n,i=this.firstChild;for(;i!==t;)n=i.nextSibling,e.removeChild(i),i=n;e.removeChild(t);const r=this.behaviors,o=this.source;for(let s=0,a=r.length;s<a;++s)r[s].unbind(o)}bind(e,t){const n=this.behaviors;if(this.source!==e)if(null!==this.source){const i=this.source;this.source=e,this.context=t;for(let r=0,o=n.length;r<o;++r){const o=n[r];o.unbind(i),o.bind(e,t)}}else{this.source=e,this.context=t;for(let i=0,r=n.length;i<r;++i)n[i].bind(e,t)}}unbind(){if(null===this.source)return;const e=this.behaviors,t=this.source;for(let n=0,i=e.length;n<i;++n)e[n].unbind(t);this.source=null}static disposeContiguousBatch(e){if(0!==e.length){Tt.setStartBefore(e[0].firstChild),Tt.setEndAfter(e[e.length-1].lastChild),Tt.deleteContents();for(let t=0,n=e.length;t<n;++t){const n=e[t],i=n.behaviors,r=n.source;for(let e=0,t=i.length;e<t;++e)i[e].unbind(r)}}}}class _t{constructor(e,t){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=e,this.directives=t}create(e){if(null===this.fragment){let e;const t=this.html;if("string"===typeof t){e=document.createElement("template"),e.innerHTML=E.createHTML(t);const n=e.content.firstElementChild;null!==n&&"TEMPLATE"===n.tagName&&(e=n)}else e=t;const n=function(e,t){const n=e.content;document.adoptNode(n);const i=yt.borrow(t);Ct(i,e,!0);const r=i.behaviorFactories;i.reset();const o=E.createTemplateWalker(n);let s;for(;s=o.nextNode();)switch(i.targetIndex++,s.nodeType){case 1:Ct(i,s);break;case 3:St(i,s,o);break;case 8:E.isMarker(s)&&i.addFactory(t[E.extractDirectiveIndexFromMarker(s)])}let a=0;(E.isMarker(n.firstChild)||1===n.childNodes.length&&t.length)&&(n.insertBefore(document.createComment(""),n.firstChild),a=-1);const l=i.behaviorFactories;return i.release(),{fragment:n,viewBehaviorFactories:l,hostBehaviorFactories:r,targetOffset:a}}(e,this.directives);this.fragment=n.fragment,this.viewBehaviorFactories=n.viewBehaviorFactories,this.hostBehaviorFactories=n.hostBehaviorFactories,this.targetOffset=n.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const t=this.fragment.cloneNode(!0),n=this.viewBehaviorFactories,i=new Array(this.behaviorCount),r=E.createTemplateWalker(t);let o=0,s=this.targetOffset,a=r.nextNode();for(let l=n.length;o<l;++o){const e=n[o],t=e.targetIndex;for(;null!==a;){if(s===t){i[o]=e.createBehavior(a);break}a=r.nextNode(),s++}}if(this.hasHostBehaviors){const t=this.hostBehaviorFactories;for(let n=0,r=t.length;n<r;++n,++o)i[o]=t[n].createBehavior(e)}return new Et(t,i)}render(e,t,n){"string"===typeof t&&(t=document.getElementById(t)),void 0===n&&(n=t);const i=this.create(n);return i.bind(e,O),i.appendTo(t),i}}const It=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Pt(e){const t=[];let n="";for(let i=0,r=e.length-1;i<r;++i){const r=e[i];let o=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];if(n+=r,o instanceof _t){const e=o;o=()=>e}if("function"===typeof o&&(o=new gt(o)),o instanceof rt){const e=It.exec(r);null!==e&&(o.targetName=e[2])}o instanceof it?(n+=o.createPlaceholder(t.length),t.push(o)):n+=o}return n+=e[e.length-1],new _t(n,t)}const Rt=(e,t)=>Pt`
    <template class="${e=>e.circular?"circular":""}">
        <div class="control" part="control" style="${e=>e.generateBadgeStyle()}">
            <slot></slot>
        </div>
    </template>
`;class At{createCSS(){return""}createBehavior(){}}function Mt(e,t){const n=[];let i="";const r=[];for(let o=0,s=e.length-1;o<s;++o){i+=e[o];let s=t[o];if(s instanceof At){const e=s.createBehavior();s=s.createCSS(),e&&r.push(e)}s instanceof N||s instanceof CSSStyleSheet?(""!==i.trim()&&(n.push(i),i=""),n.push(s)):i+=s}return i+=e[e.length-1],""!==i.trim()&&n.push(i),{styles:n,behaviors:r}}function Ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const{styles:r,behaviors:o}=Mt(e,n),s=N.create(r);return o.length&&s.withBehaviors(...o),s}function Nt(e){return`:host([hidden]){display:none}:host{display:${e}}`}function jt(e){const t=e.parentElement;if(t)return t;{const t=e.getRootNode();if(t.host instanceof HTMLElement)return t.host}return null}const Dt=document.createElement("div");class Lt{setProperty(e,t){E.queueUpdate((()=>this.target.setProperty(e,t)))}removeProperty(e){E.queueUpdate((()=>this.target.removeProperty(e)))}}class Ft extends Lt{constructor(){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}class Bt extends Lt{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:e}=this.style;if(e){const t=e.insertRule(":root{}",e.cssRules.length);this.target=e.cssRules[t].style}}}class Ut{constructor(e){this.store=new Map,this.target=null;const t=e.$fastController;this.style=document.createElement("style"),t.addStyles(this.style),P.getNotifier(t).subscribe(this,"isConnected"),this.handleChange(t,"isConnected")}targetChanged(){if(null!==this.target)for(const[e,t]of this.store.entries())this.target.setProperty(e,t)}setProperty(e,t){this.store.set(e,t),E.queueUpdate((()=>{null!==this.target&&this.target.setProperty(e,t)}))}removeProperty(e){this.store.delete(e),E.queueUpdate((()=>{null!==this.target&&this.target.removeProperty(e)}))}handleChange(e,t){const{sheet:n}=this.style;if(n){const e=n.insertRule(":host{}",n.cssRules.length);this.target=n.cssRules[e].style}else this.target=null}}Z([R],Ut.prototype,"target",void 0);class $t{constructor(e){this.target=e.style}setProperty(e,t){E.queueUpdate((()=>this.target.setProperty(e,t)))}removeProperty(e){E.queueUpdate((()=>this.target.removeProperty(e)))}}class zt{setProperty(e,t){zt.properties[e]=t;for(const n of zt.roots.values())Wt.getOrCreate(zt.normalizeRoot(n)).setProperty(e,t)}removeProperty(e){delete zt.properties[e];for(const t of zt.roots.values())Wt.getOrCreate(zt.normalizeRoot(t)).removeProperty(e)}static registerRoot(e){const{roots:t}=zt;if(!t.has(e)){t.add(e);const n=Wt.getOrCreate(this.normalizeRoot(e));for(const e in zt.properties)n.setProperty(e,zt.properties[e])}}static unregisterRoot(e){const{roots:t}=zt;if(t.has(e)){t.delete(e);const n=Wt.getOrCreate(zt.normalizeRoot(e));for(const e in zt.properties)n.removeProperty(e)}}static normalizeRoot(e){return e===Dt?document:e}}zt.roots=new Set,zt.properties={};const Vt=new WeakMap,Ht=E.supportsAdoptedStyleSheets?class extends Lt{constructor(e){super();const t=new CSSStyleSheet;t[L]=!0,this.target=t.cssRules[t.insertRule(":host{}")].style,e.$fastController.addStyles(N.create([t]))}}:Ut,Wt=Object.freeze({getOrCreate(e){if(Vt.has(e))return Vt.get(e);let t;return e===Dt?t=new zt:e instanceof Document?t=E.supportsAdoptedStyleSheets?new Ft:new Bt:t=e instanceof oe?new Ht(e):new $t(e),Vt.set(e,t),t}});class qt extends At{constructor(e){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=e.name,null!==e.cssCustomPropertyName&&(this.cssCustomProperty=`--${e.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=qt.uniqueId(),qt.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(e){return new qt({name:"string"===typeof e?e:e.name,cssCustomPropertyName:"string"===typeof e?e:void 0===e.cssCustomPropertyName?e.name:e.cssCustomPropertyName})}static isCSSDesignToken(e){return"string"===typeof e.cssCustomProperty}static isDerivedDesignTokenValue(e){return"function"===typeof e}static getTokenById(e){return qt.tokensById.get(e)}getOrCreateSubscriberSet(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return this.subscribers.get(e)||this.subscribers.set(e,new Set)&&this.subscribers.get(e)}createCSS(){return this.cssVar||""}getValueFor(e){const t=Xt.getOrCreate(e).get(this);if(void 0!==t)return t;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${e} or an ancestor of ${e}.`)}setValueFor(e,t){return this._appliedTo.add(e),t instanceof qt&&(t=this.alias(t)),Xt.getOrCreate(e).set(this,t),this}deleteValueFor(e){return this._appliedTo.delete(e),Xt.existsFor(e)&&Xt.getOrCreate(e).delete(this),this}withDefault(e){return this.setValueFor(Dt,e),this}subscribe(e,t){const n=this.getOrCreateSubscriberSet(t);t&&!Xt.existsFor(t)&&Xt.getOrCreate(t),n.has(e)||n.add(e)}unsubscribe(e,t){const n=this.subscribers.get(t||this);n&&n.has(e)&&n.delete(e)}notify(e){const t=Object.freeze({token:this,target:e});this.subscribers.has(this)&&this.subscribers.get(this).forEach((e=>e.handleChange(t))),this.subscribers.has(e)&&this.subscribers.get(e).forEach((e=>e.handleChange(t)))}alias(e){return t=>e.getValueFor(t)}}qt.uniqueId=(()=>{let e=0;return()=>(e++,e.toString(16))})(),qt.tokensById=new Map;class Kt{constructor(e,t,n){this.source=e,this.token=t,this.node=n,this.dependencies=new Set,this.observer=P.binding(e,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,O))}}class Gt{constructor(){this.values=new Map}set(e,t){this.values.get(e)!==t&&(this.values.set(e,t),P.getNotifier(this).notify(e.id))}get(e){return P.track(this,e.id),this.values.get(e)}delete(e){this.values.delete(e)}all(){return this.values.entries()}}const Yt=new WeakMap,Qt=new WeakMap;class Xt{constructor(e){this.target=e,this.store=new Gt,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(e,t)=>{const n=qt.getTokenById(t);n&&(n.notify(this.target),this.updateCSSTokenReflection(e,n))}},Yt.set(e,this),P.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),e instanceof oe?e.$fastController.addBehaviors([this]):e.isConnected&&this.bind()}static getOrCreate(e){return Yt.get(e)||new Xt(e)}static existsFor(e){return Yt.has(e)}static findParent(e){if(Dt!==e.target){let t=jt(e.target);for(;null!==t;){if(Yt.has(t))return Yt.get(t);t=jt(t)}return Xt.getOrCreate(Dt)}return null}static findClosestAssignedNode(e,t){let n=t;do{if(n.has(e))return n;n=n.parent?n.parent:n.target!==Dt?Xt.getOrCreate(Dt):null}while(null!==n);return null}get parent(){return Qt.get(this)||null}updateCSSTokenReflection(e,t){if(qt.isCSSDesignToken(t)){const n=this.parent,i=this.isReflecting(t);if(n){const r=n.get(t),o=e.get(t);r===o||i?r===o&&i&&this.stopReflectToCSS(t):this.reflectToCSS(t)}else i||this.reflectToCSS(t)}}has(e){return this.assignedValues.has(e)}get(e){const t=this.store.get(e);if(void 0!==t)return t;const n=this.getRaw(e);return void 0!==n?(this.hydrate(e,n),this.get(e)):void 0}getRaw(e){var t;return this.assignedValues.has(e)?this.assignedValues.get(e):null===(t=Xt.findClosestAssignedNode(e,this))||void 0===t?void 0:t.getRaw(e)}set(e,t){qt.isDerivedDesignTokenValue(this.assignedValues.get(e))&&this.tearDownBindingObserver(e),this.assignedValues.set(e,t),qt.isDerivedDesignTokenValue(t)?this.setupBindingObserver(e,t):this.store.set(e,t)}delete(e){this.assignedValues.delete(e),this.tearDownBindingObserver(e);const t=this.getRaw(e);t?this.hydrate(e,t):this.store.delete(e)}bind(){const e=Xt.findParent(this);e&&e.appendChild(this);for(const t of this.assignedValues.keys())t.notify(this.target)}unbind(){if(this.parent){Qt.get(this).removeChild(this)}}appendChild(e){e.parent&&Qt.get(e).removeChild(e);const t=this.children.filter((t=>e.contains(t)));Qt.set(e,this),this.children.push(e),t.forEach((t=>e.appendChild(t))),P.getNotifier(this.store).subscribe(e);for(const[n,i]of this.store.all())e.hydrate(n,this.bindingObservers.has(n)?this.getRaw(n):i)}removeChild(e){const t=this.children.indexOf(e);return-1!==t&&this.children.splice(t,1),P.getNotifier(this.store).unsubscribe(e),e.parent===this&&Qt.delete(e)}contains(e){return function(e,t){let n=t;for(;null!==n;){if(n===e)return!0;n=jt(n)}return!1}(this.target,e.target)}reflectToCSS(e){this.isReflecting(e)||(this.reflecting.add(e),Xt.cssCustomPropertyReflector.startReflection(e,this.target))}stopReflectToCSS(e){this.isReflecting(e)&&(this.reflecting.delete(e),Xt.cssCustomPropertyReflector.stopReflection(e,this.target))}isReflecting(e){return this.reflecting.has(e)}handleChange(e,t){const n=qt.getTokenById(t);n&&(this.hydrate(n,this.getRaw(n)),this.updateCSSTokenReflection(this.store,n))}hydrate(e,t){if(!this.has(e)){const n=this.bindingObservers.get(e);qt.isDerivedDesignTokenValue(t)?n?n.source!==t&&(this.tearDownBindingObserver(e),this.setupBindingObserver(e,t)):this.setupBindingObserver(e,t):(n&&this.tearDownBindingObserver(e),this.store.set(e,t))}}setupBindingObserver(e,t){const n=new Kt(t,e,this);return this.bindingObservers.set(e,n),n}tearDownBindingObserver(e){return!!this.bindingObservers.has(e)&&(this.bindingObservers.get(e).disconnect(),this.bindingObservers.delete(e),!0)}}Xt.cssCustomPropertyReflector=new class{startReflection(e,t){e.subscribe(this,t),this.handleChange({token:e,target:t})}stopReflection(e,t){e.unsubscribe(this,t),this.remove(e,t)}handleChange(e){const{token:t,target:n}=e;this.add(t,n)}add(e,t){Wt.getOrCreate(t).setProperty(e.cssCustomProperty,this.resolveCSSValue(Xt.getOrCreate(t).get(e)))}remove(e,t){Wt.getOrCreate(t).removeProperty(e.cssCustomProperty)}resolveCSSValue(e){return e&&"function"===typeof e.createCSS?e.createCSS():e}},Z([R],Xt.prototype,"children",void 0);const Jt=Object.freeze({create:function(e){return qt.from(e)},notifyConnection:e=>!(!e.isConnected||!Xt.existsFor(e))&&(Xt.getOrCreate(e).bind(),!0),notifyDisconnection:e=>!(e.isConnected||!Xt.existsFor(e))&&(Xt.getOrCreate(e).unbind(),!0),registerRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt;zt.registerRoot(e)},unregisterRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt;zt.unregisterRoot(e)}});function Zt(e){const t=getComputedStyle(document.body),n=document.querySelector("body");if(n){const i=n.getAttribute("data-vscode-theme-kind");for(const[r,o]of e){let e=t.getPropertyValue(r).toString();if("vscode-high-contrast"===i)0===e.length&&o.name.includes("background")&&(e="transparent"),"button-icon-hover-background"===o.name&&(e="transparent");else if("vscode-high-contrast-light"===i){if(0===e.length&&o.name.includes("background"))switch(o.name){case"button-primary-hover-background":e="#0F4A85";break;case"button-secondary-hover-background":case"button-icon-hover-background":e="transparent"}}else"contrast-active-border"===o.name&&(e="transparent");o.setValueFor(n,e)}}}const en=new Map;let tn=!1;function nn(e,t){const n=Jt.create(e);if(t){if(t.includes("--fake-vscode-token")){t=`${t}-${"id"+Math.random().toString(16).slice(2)}`}en.set(t,n)}return tn||(!function(e){window.addEventListener("load",(()=>{new MutationObserver((()=>{Zt(e)})).observe(document.body,{attributes:!0,attributeFilter:["class"]}),Zt(e)}))}(en),tn=!0),n}const rn=nn("background","--vscode-editor-background").withDefault("#1e1e1e"),on=nn("border-width").withDefault(1),sn=nn("contrast-active-border","--vscode-contrastActiveBorder").withDefault("#f38518"),an=(nn("contrast-border","--vscode-contrastBorder").withDefault("#6fc3df"),nn("corner-radius").withDefault(0)),ln=nn("corner-radius-round").withDefault(2),cn=nn("design-unit").withDefault(4),dn=nn("disabled-opacity").withDefault(.4),un=nn("focus-border","--vscode-focusBorder").withDefault("#007fd4"),hn=nn("font-family","--vscode-font-family").withDefault("-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol"),pn=(nn("font-weight","--vscode-font-weight").withDefault("400"),nn("foreground","--vscode-foreground").withDefault("#cccccc")),fn=nn("input-height").withDefault("26"),mn=nn("input-min-width").withDefault("100px"),gn=nn("type-ramp-base-font-size","--vscode-font-size").withDefault("13px"),vn=nn("type-ramp-base-line-height").withDefault("normal"),bn=nn("type-ramp-minus1-font-size").withDefault("11px"),yn=nn("type-ramp-minus1-line-height").withDefault("16px"),xn=(nn("type-ramp-minus2-font-size").withDefault("9px"),nn("type-ramp-minus2-line-height").withDefault("16px"),nn("type-ramp-plus1-font-size").withDefault("16px"),nn("type-ramp-plus1-line-height").withDefault("24px"),nn("scrollbarWidth").withDefault("10px")),kn=nn("scrollbarHeight").withDefault("10px"),wn=nn("scrollbar-slider-background","--vscode-scrollbarSlider-background").withDefault("#79797966"),Cn=nn("scrollbar-slider-hover-background","--vscode-scrollbarSlider-hoverBackground").withDefault("#646464b3"),Sn=nn("scrollbar-slider-active-background","--vscode-scrollbarSlider-activeBackground").withDefault("#bfbfbf66"),Tn=nn("badge-background","--vscode-badge-background").withDefault("#4d4d4d"),En=nn("badge-foreground","--vscode-badge-foreground").withDefault("#ffffff"),_n=nn("button-border","--vscode-button-border").withDefault("transparent"),In=nn("button-icon-background").withDefault("transparent"),Pn=nn("button-icon-corner-radius").withDefault("5px"),Rn=nn("button-icon-outline-offset").withDefault(0),An=nn("button-icon-hover-background","--fake-vscode-token").withDefault("rgba(90, 93, 94, 0.31)"),Mn=nn("button-icon-padding").withDefault("3px"),On=nn("button-primary-background","--vscode-button-background").withDefault("#0e639c"),Nn=nn("button-primary-foreground","--vscode-button-foreground").withDefault("#ffffff"),jn=nn("button-primary-hover-background","--vscode-button-hoverBackground").withDefault("#1177bb"),Dn=nn("button-secondary-background","--vscode-button-secondaryBackground").withDefault("#3a3d41"),Ln=nn("button-secondary-foreground","--vscode-button-secondaryForeground").withDefault("#ffffff"),Fn=nn("button-secondary-hover-background","--vscode-button-secondaryHoverBackground").withDefault("#45494e"),Bn=nn("button-padding-horizontal").withDefault("11px"),Un=nn("button-padding-vertical").withDefault("4px"),$n=nn("checkbox-background","--vscode-checkbox-background").withDefault("#3c3c3c"),zn=nn("checkbox-border","--vscode-checkbox-border").withDefault("#3c3c3c"),Vn=nn("checkbox-corner-radius").withDefault(3),Hn=(nn("checkbox-foreground","--vscode-checkbox-foreground").withDefault("#f0f0f0"),nn("list-active-selection-background","--vscode-list-activeSelectionBackground").withDefault("#094771")),Wn=nn("list-active-selection-foreground","--vscode-list-activeSelectionForeground").withDefault("#ffffff"),qn=nn("list-hover-background","--vscode-list-hoverBackground").withDefault("#2a2d2e"),Kn=nn("divider-background","--vscode-settings-dropdownListBorder").withDefault("#454545"),Gn=nn("dropdown-background","--vscode-dropdown-background").withDefault("#3c3c3c"),Yn=nn("dropdown-border","--vscode-dropdown-border").withDefault("#3c3c3c"),Qn=(nn("dropdown-foreground","--vscode-dropdown-foreground").withDefault("#f0f0f0"),nn("dropdown-list-max-height").withDefault("200px")),Xn=nn("input-background","--vscode-input-background").withDefault("#3c3c3c"),Jn=nn("input-foreground","--vscode-input-foreground").withDefault("#cccccc"),Zn=(nn("input-placeholder-foreground","--vscode-input-placeholderForeground").withDefault("#cccccc"),nn("link-active-foreground","--vscode-textLink-activeForeground").withDefault("#3794ff")),ei=nn("link-foreground","--vscode-textLink-foreground").withDefault("#3794ff"),ti=nn("progress-background","--vscode-progressBar-background").withDefault("#0e70c0"),ni=nn("panel-tab-active-border","--vscode-panelTitle-activeBorder").withDefault("#e7e7e7"),ii=nn("panel-tab-active-foreground","--vscode-panelTitle-activeForeground").withDefault("#e7e7e7"),ri=nn("panel-tab-foreground","--vscode-panelTitle-inactiveForeground").withDefault("#e7e7e799"),oi=(nn("panel-view-background","--vscode-panel-background").withDefault("#1e1e1e"),nn("panel-view-border","--vscode-panel-border").withDefault("#80808059"),nn("tag-corner-radius").withDefault("2px"));const si=class extends nt{connectedCallback(){super.connectedCallback(),this.circular||(this.circular=!0)}}.compose({baseName:"badge",template:Rt,styles:(e,t)=>Ot`
	${Nt("inline-block")} :host {
		box-sizing: border-box;
		font-family: ${hn};
		font-size: ${bn};
		line-height: ${yn};
		text-align: center;
	}
	.control {
		align-items: center;
		background-color: ${Tn};
		border: calc(${on} * 1px) solid ${_n};
		border-radius: 11px;
		box-sizing: border-box;
		color: ${En};
		display: flex;
		height: calc(${cn} * 4px);
		justify-content: center;
		min-width: calc(${cn} * 4px + 2px);
		min-height: calc(${cn} * 4px + 2px);
		padding: 3px 6px;
	}
`});function ai(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}Object.create;function li(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}Object.create;"function"===typeof SuppressedError&&SuppressedError;class ci{}Z([G({attribute:"aria-atomic"})],ci.prototype,"ariaAtomic",void 0),Z([G({attribute:"aria-busy"})],ci.prototype,"ariaBusy",void 0),Z([G({attribute:"aria-controls"})],ci.prototype,"ariaControls",void 0),Z([G({attribute:"aria-current"})],ci.prototype,"ariaCurrent",void 0),Z([G({attribute:"aria-describedby"})],ci.prototype,"ariaDescribedby",void 0),Z([G({attribute:"aria-details"})],ci.prototype,"ariaDetails",void 0),Z([G({attribute:"aria-disabled"})],ci.prototype,"ariaDisabled",void 0),Z([G({attribute:"aria-errormessage"})],ci.prototype,"ariaErrormessage",void 0),Z([G({attribute:"aria-flowto"})],ci.prototype,"ariaFlowto",void 0),Z([G({attribute:"aria-haspopup"})],ci.prototype,"ariaHaspopup",void 0),Z([G({attribute:"aria-hidden"})],ci.prototype,"ariaHidden",void 0),Z([G({attribute:"aria-invalid"})],ci.prototype,"ariaInvalid",void 0),Z([G({attribute:"aria-keyshortcuts"})],ci.prototype,"ariaKeyshortcuts",void 0),Z([G({attribute:"aria-label"})],ci.prototype,"ariaLabel",void 0),Z([G({attribute:"aria-labelledby"})],ci.prototype,"ariaLabelledby",void 0),Z([G({attribute:"aria-live"})],ci.prototype,"ariaLive",void 0),Z([G({attribute:"aria-owns"})],ci.prototype,"ariaOwns",void 0),Z([G({attribute:"aria-relevant"})],ci.prototype,"ariaRelevant",void 0),Z([G({attribute:"aria-roledescription"})],ci.prototype,"ariaRoledescription",void 0);class di{constructor(e,t){this.target=e,this.propertyName=t}bind(e){e[this.propertyName]=this.target}unbind(){}}function ui(e){return new ot("fast-ref",di,e)}class hi{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const pi=(e,t)=>Pt`
    <span
        part="end"
        ${ui("endContainer")}
        class=${e=>t.end?"end":void 0}
    >
        <slot name="end" ${ui("end")} @slotchange="${e=>e.handleEndContentChange()}">
            ${t.end||""}
        </slot>
    </span>
`,fi=(e,t)=>Pt`
    <span
        part="start"
        ${ui("startContainer")}
        class="${e=>t.start?"start":void 0}"
    >
        <slot
            name="start"
            ${ui("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        >
            ${t.start||""}
        </slot>
    </span>
`;Pt`
    <span part="end" ${ui("endContainer")}>
        <slot
            name="end"
            ${ui("end")}
            @slotchange="${e=>e.handleEndContentChange()}"
        ></slot>
    </span>
`,Pt`
    <span part="start" ${ui("startContainer")}>
        <slot
            name="start"
            ${ui("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        ></slot>
    </span>
`;function mi(e){const t=H.locate(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.forEach((n=>{Object.getOwnPropertyNames(n.prototype).forEach((t=>{"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t))}));H.locate(n).forEach((e=>t.push(e)))}))}var gi;!function(e){e[e.alt=18]="alt",e[e.arrowDown=40]="arrowDown",e[e.arrowLeft=37]="arrowLeft",e[e.arrowRight=39]="arrowRight",e[e.arrowUp=38]="arrowUp",e[e.back=8]="back",e[e.backSlash=220]="backSlash",e[e.break=19]="break",e[e.capsLock=20]="capsLock",e[e.closeBracket=221]="closeBracket",e[e.colon=186]="colon",e[e.colon2=59]="colon2",e[e.comma=188]="comma",e[e.ctrl=17]="ctrl",e[e.delete=46]="delete",e[e.end=35]="end",e[e.enter=13]="enter",e[e.equals=187]="equals",e[e.equals2=61]="equals2",e[e.equals3=107]="equals3",e[e.escape=27]="escape",e[e.forwardSlash=191]="forwardSlash",e[e.function1=112]="function1",e[e.function10=121]="function10",e[e.function11=122]="function11",e[e.function12=123]="function12",e[e.function2=113]="function2",e[e.function3=114]="function3",e[e.function4=115]="function4",e[e.function5=116]="function5",e[e.function6=117]="function6",e[e.function7=118]="function7",e[e.function8=119]="function8",e[e.function9=120]="function9",e[e.home=36]="home",e[e.insert=45]="insert",e[e.menu=93]="menu",e[e.minus=189]="minus",e[e.minus2=109]="minus2",e[e.numLock=144]="numLock",e[e.numPad0=96]="numPad0",e[e.numPad1=97]="numPad1",e[e.numPad2=98]="numPad2",e[e.numPad3=99]="numPad3",e[e.numPad4=100]="numPad4",e[e.numPad5=101]="numPad5",e[e.numPad6=102]="numPad6",e[e.numPad7=103]="numPad7",e[e.numPad8=104]="numPad8",e[e.numPad9=105]="numPad9",e[e.numPadDivide=111]="numPadDivide",e[e.numPadDot=110]="numPadDot",e[e.numPadMinus=109]="numPadMinus",e[e.numPadMultiply=106]="numPadMultiply",e[e.numPadPlus=107]="numPadPlus",e[e.openBracket=219]="openBracket",e[e.pageDown=34]="pageDown",e[e.pageUp=33]="pageUp",e[e.period=190]="period",e[e.print=44]="print",e[e.quote=222]="quote",e[e.scrollLock=145]="scrollLock",e[e.shift=16]="shift",e[e.space=32]="space",e[e.tab=9]="tab",e[e.tilde=192]="tilde",e[e.windowsLeft=91]="windowsLeft",e[e.windowsOpera=219]="windowsOpera",e[e.windowsRight=92]="windowsRight"}(gi||(gi={}));const vi="ArrowDown",bi="ArrowLeft",yi="ArrowRight",xi="ArrowUp",ki="Enter",wi="Escape",Ci="Home",Si="End",Ti=" ",Ei="Tab",_i={ArrowDown:vi,ArrowLeft:bi,ArrowRight:yi,ArrowUp:xi},Ii="form-associated-proxy",Pi="ElementInternals",Ri=Pi in window&&"setFormValue"in window[Pi].prototype,Ai=new WeakMap;function Mi(e){const t=class extends e{constructor(){super(...arguments),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return Ri}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const e=this.proxy.labels,t=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),n=e?t.concat(Array.from(e)):t;return Object.freeze(n)}return b}valueChanged(e,t){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(e,t){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),E.queueUpdate((()=>this.classList.toggle("disabled",this.disabled)))}nameChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),E.queueUpdate((()=>this.classList.toggle("required",this.required))),this.validate()}get elementInternals(){if(!Ri)return null;let e=Ai.get(this);return e||(e=this.attachInternals(),Ai.set(this,e)),e}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach((e=>this.proxy.removeEventListener(e,this.stopPropagation))),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(e,t,n){this.elementInternals?this.elementInternals.setValidity(e,t,n):"string"===typeof t&&this.proxy.setCustomValidity(t)}formDisabledCallback(e){this.disabled=e}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var e;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach((e=>this.proxy.addEventListener(e,this.stopPropagation))),this.proxy.disabled=this.disabled,this.proxy.required=this.required,"string"===typeof this.name&&(this.proxy.name=this.name),"string"===typeof this.value&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",Ii),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",Ii)),null===(e=this.shadowRoot)||void 0===e||e.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var e;this.removeChild(this.proxy),null===(e=this.shadowRoot)||void 0===e||e.removeChild(this.proxySlot)}validate(e){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,e)}setFormValue(e,t){this.elementInternals&&this.elementInternals.setFormValue(e,t||e)}_keypressHandler(e){if(e.key===ki)if(this.form instanceof HTMLFormElement){const e=this.form.querySelector("[type=submit]");null===e||void 0===e||e.click()}}stopPropagation(e){e.stopPropagation()}};return G({mode:"boolean"})(t.prototype,"disabled"),G({mode:"fromView",attribute:"value"})(t.prototype,"initialValue"),G({attribute:"current-value"})(t.prototype,"currentValue"),G(t.prototype,"name"),G({mode:"boolean"})(t.prototype,"required"),R(t.prototype,"value"),t}function Oi(e){class t extends(Mi(e)){}class n extends t{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];super(t),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(e,t){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),void 0!==e&&this.$emit("change"),this.validate()}currentCheckedChanged(e,t){this.checked=this.currentChecked}updateForm(){const e=this.checked?this.value:null;this.setFormValue(e,e)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return G({attribute:"checked",mode:"boolean"})(n.prototype,"checkedAttribute"),G({attribute:"current-checked",converter:W})(n.prototype,"currentChecked"),R(n.prototype,"defaultChecked"),R(n.prototype,"checked"),n}class Ni extends qe{}class ji extends(Mi(Ni)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Di extends ji{constructor(){super(...arguments),this.handleClick=e=>{var t;this.disabled&&(null===(t=this.defaultSlottedContent)||void 0===t?void 0:t.length)<=1&&e.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const e=this.proxy.isConnected;e||this.attachProxy(),"function"===typeof this.form.requestSubmit?this.form.requestSubmit(this.proxy):this.proxy.click(),e||this.detachProxy()},this.handleFormReset=()=>{var e;null===(e=this.form)||void 0===e||e.reset()},this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(e=this.$fastController.definition.shadowOptions)||void 0===e?void 0:e.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(e,t){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),"submit"===t&&this.addEventListener("click",this.handleSubmission),"submit"===e&&this.removeEventListener("click",this.handleSubmission),"reset"===t&&this.addEventListener("click",this.handleFormReset),"reset"===e&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var e;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach((e=>{e.addEventListener("click",this.handleClick)}))}disconnectedCallback(){var e;super.disconnectedCallback();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach((e=>{e.removeEventListener("click",this.handleClick)}))}}Z([G({mode:"boolean"})],Di.prototype,"autofocus",void 0),Z([G({attribute:"form"})],Di.prototype,"formId",void 0),Z([G],Di.prototype,"formaction",void 0),Z([G],Di.prototype,"formenctype",void 0),Z([G],Di.prototype,"formmethod",void 0),Z([G({mode:"boolean"})],Di.prototype,"formnovalidate",void 0),Z([G],Di.prototype,"formtarget",void 0),Z([G],Di.prototype,"type",void 0),Z([R],Di.prototype,"defaultSlottedContent",void 0);class Li{}function Fi(e){return e?function(t,n,i){return 1===t.nodeType&&t.matches(e)}:function(e,t,n){return 1===e.nodeType}}Z([G({attribute:"aria-expanded"})],Li.prototype,"ariaExpanded",void 0),Z([G({attribute:"aria-pressed"})],Li.prototype,"ariaPressed",void 0),mi(Li,ci),mi(Di,hi,Li);class Bi{constructor(e,t){this.target=e,this.options=t,this.source=null}bind(e){const t=this.options.property;this.shouldUpdate=P.getAccessors(e).some((e=>e.name===t)),this.source=e,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(b),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let e=this.getNodes();return void 0!==this.options.filter&&(e=e.filter(this.options.filter)),e}updateTarget(e){this.source[this.options.property]=e}}class Ui extends Bi{constructor(e,t){super(e,t)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function $i(e){return"string"===typeof e&&(e={property:e}),new ot("fast-slotted",Ui,e)}function zi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>e instanceof HTMLElement))}let Vi;const Hi=function(){if("boolean"===typeof Vi)return Vi;if("undefined"===typeof window||!window.document||!window.document.createElement)return Vi=!1,Vi;const e=document.createElement("style"),t=function(){const e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}();null!==t&&e.setAttribute("nonce",t),document.head.appendChild(e);try{e.sheet.insertRule("foo:focus-visible {color:inherit}",0),Vi=!0}catch(K$){Vi=!1}finally{document.head.removeChild(e)}return Vi}()?"focus-visible":"focus",Wi="not-allowed",qi=Ot`
	${Nt("inline-flex")} :host {
		outline: none;
		font-family: ${hn};
		font-size: ${gn};
		line-height: ${vn};
		color: ${Nn};
		background: ${On};
		border-radius: calc(${ln} * 1px);
		fill: currentColor;
		cursor: pointer;
	}
	.control {
		background: transparent;
		height: inherit;
		flex-grow: 1;
		box-sizing: border-box;
		display: inline-flex;
		justify-content: center;
		align-items: center;
		padding: ${Un} ${Bn};
		white-space: wrap;
		outline: none;
		text-decoration: none;
		border: calc(${on} * 1px) solid ${_n};
		color: inherit;
		border-radius: inherit;
		fill: inherit;
		cursor: inherit;
		font-family: inherit;
	}
	:host(:hover) {
		background: ${jn};
	}
	:host(:active) {
		background: ${On};
	}
	.control:${Hi} {
		outline: calc(${on} * 1px) solid ${un};
		outline-offset: calc(${on} * 2px);
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host([disabled]) {
		opacity: ${dn};
		background: ${On};
		cursor: ${Wi};
	}
	.content {
		display: flex;
	}
	.start {
		display: flex;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${cn} * 4px);
		height: calc(${cn} * 4px);
	}
	.start {
		margin-inline-end: 8px;
	}
`,Ki=Ot`
	:host([appearance='primary']) {
		background: ${On};
		color: ${Nn};
	}
	:host([appearance='primary']:hover) {
		background: ${jn};
	}
	:host([appearance='primary']:active) .control:active {
		background: ${On};
	}
	:host([appearance='primary']) .control:${Hi} {
		outline: calc(${on} * 1px) solid ${un};
		outline-offset: calc(${on} * 2px);
	}
	:host([appearance='primary'][disabled]) {
		background: ${On};
	}
`,Gi=Ot`
	:host([appearance='secondary']) {
		background: ${Dn};
		color: ${Ln};
	}
	:host([appearance='secondary']:hover) {
		background: ${Fn};
	}
	:host([appearance='secondary']:active) .control:active {
		background: ${Dn};
	}
	:host([appearance='secondary']) .control:${Hi} {
		outline: calc(${on} * 1px) solid ${un};
		outline-offset: calc(${on} * 2px);
	}
	:host([appearance='secondary'][disabled]) {
		background: ${Dn};
	}
`,Yi=Ot`
	:host([appearance='icon']) {
		background: ${In};
		border-radius: ${Pn};
		color: ${pn};
	}
	:host([appearance='icon']:hover) {
		background: ${An};
		outline: 1px dotted ${sn};
		outline-offset: -1px;
	}
	:host([appearance='icon']) .control {
		padding: ${Mn};
		border: none;
	}
	:host([appearance='icon']:active) .control:active {
		background: ${An};
	}
	:host([appearance='icon']) .control:${Hi} {
		outline: calc(${on} * 1px) solid ${un};
		outline-offset: ${Rn};
	}
	:host([appearance='icon'][disabled]) {
		background: ${In};
	}
`;class Qi extends Di{connectedCallback(){if(super.connectedCallback(),!this.appearance){const e=this.getAttribute("appearance");this.appearance=e}}attributeChangedCallback(e,t,n){if("appearance"===e&&"icon"===n){this.getAttribute("aria-label")||(this.ariaLabel="Icon Button")}"aria-label"===e&&(this.ariaLabel=n),"disabled"===e&&(this.disabled=null!==n)}}ai([G],Qi.prototype,"appearance",void 0);const Xi=Qi.compose({baseName:"button",template:(e,t)=>Pt`
    <button
        class="control"
        part="control"
        ?autofocus="${e=>e.autofocus}"
        ?disabled="${e=>e.disabled}"
        form="${e=>e.formId}"
        formaction="${e=>e.formaction}"
        formenctype="${e=>e.formenctype}"
        formmethod="${e=>e.formmethod}"
        formnovalidate="${e=>e.formnovalidate}"
        formtarget="${e=>e.formtarget}"
        name="${e=>e.name}"
        type="${e=>e.type}"
        value="${e=>e.value}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-pressed="${e=>e.ariaPressed}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${ui("control")}
    >
        ${fi(0,t)}
        <span class="content" part="content">
            <slot ${$i("defaultSlottedContent")}></slot>
        </span>
        ${pi(0,t)}
    </button>
`,styles:(e,t)=>Ot`
	${qi}
	${Ki}
	${Gi}
	${Yi}
`,shadowOptions:{delegatesFocus:!0}});class Ji extends qe{}class Zi extends(Oi(Ji)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class er extends Zi{constructor(){super(),this.initialValue="on",this.indeterminate=!1,this.keypressHandler=e=>{if(!this.readOnly&&e.key===Ti)this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked},this.clickHandler=e=>{this.disabled||this.readOnly||(this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}}Z([G({attribute:"readonly",mode:"boolean"})],er.prototype,"readOnly",void 0),Z([R],er.prototype,"defaultSlottedNodes",void 0),Z([R],er.prototype,"indeterminate",void 0);const tr=class extends er{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Checkbox")}}.compose({baseName:"checkbox",template:(e,t)=>Pt`
    <template
        role="checkbox"
        aria-checked="${e=>e.checked}"
        aria-required="${e=>e.required}"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        tabindex="${e=>e.disabled?null:0}"
        @keypress="${(e,t)=>e.keypressHandler(t.event)}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        class="${e=>e.readOnly?"readonly":""} ${e=>e.checked?"checked":""} ${e=>e.indeterminate?"indeterminate":""}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${t.checkedIndicator||""}
            </slot>
            <slot name="indeterminate-indicator">
                ${t.indeterminateIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${$i("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		align-items: center;
		outline: none;
		margin: calc(${cn} * 1px) 0;
		user-select: none;
		font-size: ${gn};
		line-height: ${vn};
	}
	.control {
		position: relative;
		width: calc(${cn} * 4px + 2px);
		height: calc(${cn} * 4px + 2px);
		box-sizing: border-box;
		border-radius: calc(${Vn} * 1px);
		border: calc(${on} * 1px) solid ${zn};
		background: ${$n};
		outline: none;
		cursor: pointer;
	}
	.label {
		font-family: ${hn};
		color: ${pn};
		padding-inline-start: calc(${cn} * 2px + 2px);
		margin-inline-end: calc(${cn} * 2px + 2px);
		cursor: pointer;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.checked-indicator {
		width: 100%;
		height: 100%;
		display: block;
		fill: ${pn};
		opacity: 0;
		pointer-events: none;
	}
	.indeterminate-indicator {
		border-radius: 2px;
		background: ${pn};
		position: absolute;
		top: 50%;
		left: 50%;
		width: 50%;
		height: 50%;
		transform: translate(-50%, -50%);
		opacity: 0;
	}
	:host(:enabled) .control:hover {
		background: ${$n};
		border-color: ${zn};
	}
	:host(:enabled) .control:active {
		background: ${$n};
		border-color: ${un};
	}
	:host(:${Hi}) .control {
		border: calc(${on} * 1px) solid ${un};
	}
	:host(.disabled) .label,
	:host(.readonly) .label,
	:host(.readonly) .control,
	:host(.disabled) .control {
		cursor: ${Wi};
	}
	:host(.checked:not(.indeterminate)) .checked-indicator,
	:host(.indeterminate) .indeterminate-indicator {
		opacity: 1;
	}
	:host(.disabled) {
		opacity: ${dn};
	}
`,checkedIndicator:'\n\t\t<svg \n\t\t\tpart="checked-indicator"\n\t\t\tclass="checked-indicator"\n\t\t\twidth="16" \n\t\t\theight="16" \n\t\t\tviewBox="0 0 16 16" \n\t\t\txmlns="http://www.w3.org/2000/svg" \n\t\t\tfill="currentColor"\n\t\t>\n\t\t\t<path \n\t\t\t\tfill-rule="evenodd" \n\t\t\t\tclip-rule="evenodd" \n\t\t\t\td="M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z"\n\t\t\t/>\n\t\t</svg>\n\t',indeterminateIndicator:'\n\t\t<div part="indeterminate-indicator" class="indeterminate-indicator"></div>\n\t'});function nr(e,t,n){return{index:e,removed:t,addedCount:n}}const ir=0,rr=1,or=2,sr=3;function ar(e,t,n,i,r,o){let s=0,a=0;const l=Math.min(n-t,o-r);if(0===t&&0===r&&(s=function(e,t,n){for(let i=0;i<n;++i)if(e[i]!==t[i])return i;return n}(e,i,l)),n===e.length&&o===i.length&&(a=function(e,t,n){let i=e.length,r=t.length,o=0;for(;o<n&&e[--i]===t[--r];)o++;return o}(e,i,l-s)),r+=s,o-=a,(n-=a)-(t+=s)===0&&o-r===0)return b;if(t===n){const e=nr(t,[],0);for(;r<o;)e.removed.push(i[r++]);return[e]}if(r===o)return[nr(t,[],n-t)];const c=function(e){let t=e.length-1,n=e[0].length-1,i=e[t][n];const r=[];for(;t>0||n>0;){if(0===t){r.push(or),n--;continue}if(0===n){r.push(sr),t--;continue}const o=e[t-1][n-1],s=e[t-1][n],a=e[t][n-1];let l;l=s<a?s<o?s:o:a<o?a:o,l===o?(o===i?r.push(ir):(r.push(rr),i=o),t--,n--):l===s?(r.push(sr),t--,i=s):(r.push(or),n--,i=a)}return r.reverse(),r}(function(e,t,n,i,r,o){const s=o-r+1,a=n-t+1,l=new Array(s);let c,d;for(let u=0;u<s;++u)l[u]=new Array(a),l[u][0]=u;for(let u=0;u<a;++u)l[0][u]=u;for(let u=1;u<s;++u)for(let n=1;n<a;++n)e[t+n-1]===i[r+u-1]?l[u][n]=l[u-1][n-1]:(c=l[u-1][n]+1,d=l[u][n-1]+1,l[u][n]=c<d?c:d);return l}(e,t,n,i,r,o)),d=[];let u,h=t,p=r;for(let f=0;f<c.length;++f)switch(c[f]){case ir:void 0!==u&&(d.push(u),u=void 0),h++,p++;break;case rr:void 0===u&&(u=nr(h,[],0)),u.addedCount++,h++,u.removed.push(i[p]),p++;break;case or:void 0===u&&(u=nr(h,[],0)),u.addedCount++,h++;break;case sr:void 0===u&&(u=nr(h,[],0)),u.removed.push(i[p]),p++}return void 0!==u&&d.push(u),d}const lr=Array.prototype.push;function cr(e,t,n,i){const r=nr(t,n,i);let o=!1,s=0;for(let u=0;u<e.length;u++){const t=e[u];if(t.index+=s,o)continue;const n=(a=r.index,l=r.index+r.removed.length,c=t.index,d=t.index+t.addedCount,l<c||d<a?-1:l===c||d===a?0:a<c?l<d?l-c:d-c:d<l?d-a:l-a);if(n>=0){e.splice(u,1),u--,s-=t.addedCount-t.removed.length,r.addedCount+=t.addedCount-n;const i=r.removed.length+t.removed.length-n;if(r.addedCount||i){let e=t.removed;if(r.index<t.index){const n=r.removed.slice(0,t.index-r.index);lr.apply(n,e),e=n}if(r.index+r.removed.length>t.index+t.addedCount){const n=r.removed.slice(t.index+t.addedCount-r.index);lr.apply(e,n)}r.removed=e,t.index<r.index&&(r.index=t.index)}else o=!0}else if(r.index<t.index){o=!0,e.splice(u,0,r),u++;const n=r.addedCount-r.removed.length;t.index+=n,s+=n}}var a,l,c,d;o||e.push(r)}function dr(e,t){let n=[];const i=function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];cr(t,i.index,i.removed,i.addedCount)}return t}(t);for(let r=0,o=i.length;r<o;++r){const t=i[r];1!==t.addedCount||1!==t.removed.length?n=n.concat(ar(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)):t.removed[0]!==e[t.index]&&n.push(t)}return n}let ur=!1;function hr(e,t){let n=e.index;const i=t.length;return n>i?n=i-e.addedCount:n<0&&(n=i+e.removed.length+n-e.addedCount),n<0&&(n=0),e.index=n,e}class pr extends _{constructor(e){super(e),this.oldCollection=void 0,this.splices=void 0,this.needsQueue=!0,this.call=this.flush,Reflect.defineProperty(e,"$fastController",{value:this,enumerable:!1})}subscribe(e){this.flush(),super.subscribe(e)}addSplice(e){void 0===this.splices?this.splices=[e]:this.splices.push(e),this.needsQueue&&(this.needsQueue=!1,E.queueUpdate(this))}reset(e){this.oldCollection=e,this.needsQueue&&(this.needsQueue=!1,E.queueUpdate(this))}flush(){const e=this.splices,t=this.oldCollection;if(void 0===e&&void 0===t)return;this.needsQueue=!0,this.splices=void 0,this.oldCollection=void 0;const n=void 0===t?dr(this.source,e):ar(this.source,0,this.source.length,t,0,t.length);this.notify(n)}}Object.freeze({positioning:!1,recycle:!0});function fr(e,t,n,i){e.bind(t[n],i)}function mr(e,t,n,i){const r=Object.create(i);r.index=n,r.length=t.length,e.bind(t[n],r)}class gr{constructor(e,t,n,i,r,o){this.location=e,this.itemsBinding=t,this.templateBinding=i,this.options=o,this.source=null,this.views=[],this.items=null,this.itemsObserver=null,this.originalContext=void 0,this.childContext=void 0,this.bindView=fr,this.itemsBindingObserver=P.binding(t,this,n),this.templateBindingObserver=P.binding(i,this,r),o.positioning&&(this.bindView=mr)}bind(e,t){this.source=e,this.originalContext=t,this.childContext=Object.create(t),this.childContext.parent=e,this.childContext.parentContext=this.originalContext,this.items=this.itemsBindingObserver.observe(e,this.originalContext),this.template=this.templateBindingObserver.observe(e,this.originalContext),this.observeItems(!0),this.refreshAllViews()}unbind(){this.source=null,this.items=null,null!==this.itemsObserver&&this.itemsObserver.unsubscribe(this),this.unbindAllViews(),this.itemsBindingObserver.disconnect(),this.templateBindingObserver.disconnect()}handleChange(e,t){e===this.itemsBinding?(this.items=this.itemsBindingObserver.observe(this.source,this.originalContext),this.observeItems(),this.refreshAllViews()):e===this.templateBinding?(this.template=this.templateBindingObserver.observe(this.source,this.originalContext),this.refreshAllViews(!0)):this.updateViews(t)}observeItems(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.items)return void(this.items=b);const t=this.itemsObserver,n=this.itemsObserver=P.getNotifier(this.items),i=t!==n;i&&null!==t&&t.unsubscribe(this),(i||e)&&n.subscribe(this)}updateViews(e){const t=this.childContext,n=this.views,i=this.bindView,r=this.items,o=this.template,s=this.options.recycle,a=[];let l=0,c=0;for(let d=0,u=e.length;d<u;++d){const u=e[d],h=u.removed;let p=0,f=u.index;const m=f+u.addedCount,g=n.splice(u.index,h.length),v=c=a.length+g.length;for(;f<m;++f){const e=n[f],d=e?e.firstChild:this.location;let u;s&&c>0?(p<=v&&g.length>0?(u=g[p],p++):(u=a[l],l++),c--):u=o.create(),n.splice(f,0,u),i(u,r,f,t),u.insertBefore(d)}g[p]&&a.push(...g.slice(p))}for(let d=l,u=a.length;d<u;++d)a[d].dispose();if(this.options.positioning)for(let d=0,u=n.length;d<u;++d){const e=n[d].context;e.length=u,e.index=d}}refreshAllViews(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.items,n=this.childContext,i=this.template,r=this.location,o=this.bindView;let s=t.length,a=this.views,l=a.length;if(0!==s&&!e&&this.options.recycle||(Et.disposeContiguousBatch(a),l=0),0===l){this.views=a=new Array(s);for(let e=0;e<s;++e){const s=i.create();o(s,t,e,n),a[e]=s,s.insertBefore(r)}}else{let e=0;for(;e<s;++e)if(e<l){o(a[e],t,e,n)}else{const s=i.create();o(s,t,e,n),a.push(s),s.insertBefore(r)}const c=a.splice(e,l-e);for(e=0,s=c.length;e<s;++e)c[e].dispose()}}unbindAllViews(){const e=this.views;for(let t=0,n=e.length;t<n;++t)e[t].unbind()}}class vr extends it{constructor(e,t,n){super(),this.itemsBinding=e,this.templateBinding=t,this.options=n,this.createPlaceholder=E.createBlockPlaceholder,function(){if(ur)return;ur=!0,P.setArrayObserverFactory((e=>new pr(e)));const e=Array.prototype;if(e.$fastPatch)return;Reflect.defineProperty(e,"$fastPatch",{value:1,enumerable:!1});const t=e.pop,n=e.push,i=e.reverse,r=e.shift,o=e.sort,s=e.splice,a=e.unshift;e.pop=function(){const e=this.length>0,n=t.apply(this,arguments),i=this.$fastController;return void 0!==i&&e&&i.addSplice(nr(this.length,[n],0)),n},e.push=function(){const e=n.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(hr(nr(this.length-arguments.length,[],arguments.length),this)),e},e.reverse=function(){let e;const t=this.$fastController;void 0!==t&&(t.flush(),e=this.slice());const n=i.apply(this,arguments);return void 0!==t&&t.reset(e),n},e.shift=function(){const e=this.length>0,t=r.apply(this,arguments),n=this.$fastController;return void 0!==n&&e&&n.addSplice(nr(0,[t],0)),t},e.sort=function(){let e;const t=this.$fastController;void 0!==t&&(t.flush(),e=this.slice());const n=o.apply(this,arguments);return void 0!==t&&t.reset(e),n},e.splice=function(){const e=s.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(hr(nr(+arguments[0],e,arguments.length>2?arguments.length-2:0),this)),e},e.unshift=function(){const e=a.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(hr(nr(0,[],arguments.length),this)),e}}(),this.isItemsBindingVolatile=P.isVolatileBinding(e),this.isTemplateBindingVolatile=P.isVolatileBinding(t)}createBehavior(e){return new gr(e,this.itemsBinding,this.isItemsBindingVolatile,this.templateBinding,this.isTemplateBindingVolatile,this.options)}}const br="focus",yr="focusin",xr="focusout",kr="keydown",wr="none",Cr="default",Sr="sticky",Tr="default",Er="columnheader",_r="rowheader",Ir="default",Pr="header",Rr="sticky-header";class Ar extends qe{constructor(){super(),this.noTabbing=!1,this.generateHeader=Cr,this.rowsData=[],this.columnDefinitions=null,this.focusRowIndex=0,this.focusColumnIndex=0,this.rowsPlaceholder=null,this.generatedHeader=null,this.isUpdatingFocus=!1,this.pendingFocusUpdate=!1,this.rowindexUpdateQueued=!1,this.columnDefinitionsStale=!0,this.generatedGridTemplateColumns="",this.focusOnCell=(e,t,n)=>{if(0===this.rowElements.length)return this.focusRowIndex=0,void(this.focusColumnIndex=0);const i=Math.max(0,Math.min(this.rowElements.length-1,e)),r=this.rowElements[i].querySelectorAll('[role="cell"], [role="gridcell"], [role="columnheader"], [role="rowheader"]'),o=r[Math.max(0,Math.min(r.length-1,t))];n&&this.scrollHeight!==this.clientHeight&&(i<this.focusRowIndex&&this.scrollTop>0||i>this.focusRowIndex&&this.scrollTop<this.scrollHeight-this.clientHeight)&&o.scrollIntoView({block:"center",inline:"center"}),o.focus()},this.onChildListChange=(e,t)=>{e&&e.length&&(e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&"row"===e.getAttribute("role")&&(e.columnDefinitions=this.columnDefinitions)}))})),this.queueRowIndexUpdate())},this.queueRowIndexUpdate=()=>{this.rowindexUpdateQueued||(this.rowindexUpdateQueued=!0,E.queueUpdate(this.updateRowIndexes))},this.updateRowIndexes=()=>{let e=this.gridTemplateColumns;if(void 0===e){if(""===this.generatedGridTemplateColumns&&this.rowElements.length>0){const e=this.rowElements[0];this.generatedGridTemplateColumns=new Array(e.cellElements.length).fill("1fr").join(" ")}e=this.generatedGridTemplateColumns}this.rowElements.forEach(((t,n)=>{const i=t;i.rowIndex=n,i.gridTemplateColumns=e,this.columnDefinitionsStale&&(i.columnDefinitions=this.columnDefinitions)})),this.rowindexUpdateQueued=!1,this.columnDefinitionsStale=!1}}static generateTemplateColumns(e){let t="";return e.forEach((e=>{t=`${t}${""===t?"":" "}1fr`})),t}noTabbingChanged(){this.$fastController.isConnected&&(this.noTabbing?this.setAttribute("tabIndex","-1"):this.setAttribute("tabIndex",this.contains(document.activeElement)||this===document.activeElement?"-1":"0"))}generateHeaderChanged(){this.$fastController.isConnected&&this.toggleGeneratedHeader()}gridTemplateColumnsChanged(){this.$fastController.isConnected&&this.updateRowIndexes()}rowsDataChanged(){null===this.columnDefinitions&&this.rowsData.length>0&&(this.columnDefinitions=Ar.generateColumns(this.rowsData[0])),this.$fastController.isConnected&&this.toggleGeneratedHeader()}columnDefinitionsChanged(){null!==this.columnDefinitions?(this.generatedGridTemplateColumns=Ar.generateTemplateColumns(this.columnDefinitions),this.$fastController.isConnected&&(this.columnDefinitionsStale=!0,this.queueRowIndexUpdate())):this.generatedGridTemplateColumns=""}headerCellItemTemplateChanged(){this.$fastController.isConnected&&null!==this.generatedHeader&&(this.generatedHeader.headerCellItemTemplate=this.headerCellItemTemplate)}focusRowIndexChanged(){this.$fastController.isConnected&&this.queueFocusUpdate()}focusColumnIndexChanged(){this.$fastController.isConnected&&this.queueFocusUpdate()}connectedCallback(){super.connectedCallback(),void 0===this.rowItemTemplate&&(this.rowItemTemplate=this.defaultRowItemTemplate),this.rowsPlaceholder=document.createComment(""),this.appendChild(this.rowsPlaceholder),this.toggleGeneratedHeader(),this.rowsRepeatBehavior=new vr((e=>e.rowsData),(e=>e.rowItemTemplate),{positioning:!0}).createBehavior(this.rowsPlaceholder),this.$fastController.addBehaviors([this.rowsRepeatBehavior]),this.addEventListener("row-focused",this.handleRowFocus),this.addEventListener(br,this.handleFocus),this.addEventListener(kr,this.handleKeydown),this.addEventListener(xr,this.handleFocusOut),this.observer=new MutationObserver(this.onChildListChange),this.observer.observe(this,{childList:!0}),this.noTabbing&&this.setAttribute("tabindex","-1"),E.queueUpdate(this.queueRowIndexUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("row-focused",this.handleRowFocus),this.removeEventListener(br,this.handleFocus),this.removeEventListener(kr,this.handleKeydown),this.removeEventListener(xr,this.handleFocusOut),this.observer.disconnect(),this.rowsPlaceholder=null,this.generatedHeader=null}handleRowFocus(e){this.isUpdatingFocus=!0;const t=e.target;this.focusRowIndex=this.rowElements.indexOf(t),this.focusColumnIndex=t.focusColumnIndex,this.setAttribute("tabIndex","-1"),this.isUpdatingFocus=!1}handleFocus(e){this.focusOnCell(this.focusRowIndex,this.focusColumnIndex,!0)}handleFocusOut(e){null!==e.relatedTarget&&this.contains(e.relatedTarget)||this.setAttribute("tabIndex",this.noTabbing?"-1":"0")}handleKeydown(e){if(e.defaultPrevented)return;let t;const n=this.rowElements.length-1,i=this.offsetHeight+this.scrollTop,r=this.rowElements[n];switch(e.key){case xi:e.preventDefault(),this.focusOnCell(this.focusRowIndex-1,this.focusColumnIndex,!0);break;case vi:e.preventDefault(),this.focusOnCell(this.focusRowIndex+1,this.focusColumnIndex,!0);break;case"PageUp":if(e.preventDefault(),0===this.rowElements.length){this.focusOnCell(0,0,!1);break}if(0===this.focusRowIndex)return void this.focusOnCell(0,this.focusColumnIndex,!1);for(t=this.focusRowIndex-1;t>=0;t--){const e=this.rowElements[t];if(e.offsetTop<this.scrollTop){this.scrollTop=e.offsetTop+e.clientHeight-this.clientHeight;break}}this.focusOnCell(t,this.focusColumnIndex,!1);break;case"PageDown":if(e.preventDefault(),0===this.rowElements.length){this.focusOnCell(0,0,!1);break}if(this.focusRowIndex>=n||r.offsetTop+r.offsetHeight<=i)return void this.focusOnCell(n,this.focusColumnIndex,!1);for(t=this.focusRowIndex+1;t<=n;t++){const e=this.rowElements[t];if(e.offsetTop+e.offsetHeight>i){let t=0;this.generateHeader===Sr&&null!==this.generatedHeader&&(t=this.generatedHeader.clientHeight),this.scrollTop=e.offsetTop-t;break}}this.focusOnCell(t,this.focusColumnIndex,!1);break;case Ci:e.ctrlKey&&(e.preventDefault(),this.focusOnCell(0,0,!0));break;case Si:e.ctrlKey&&null!==this.columnDefinitions&&(e.preventDefault(),this.focusOnCell(this.rowElements.length-1,this.columnDefinitions.length-1,!0))}}queueFocusUpdate(){this.isUpdatingFocus&&(this.contains(document.activeElement)||this===document.activeElement)||!1===this.pendingFocusUpdate&&(this.pendingFocusUpdate=!0,E.queueUpdate((()=>this.updateFocus())))}updateFocus(){this.pendingFocusUpdate=!1,this.focusOnCell(this.focusRowIndex,this.focusColumnIndex,!0)}toggleGeneratedHeader(){if(null!==this.generatedHeader&&(this.removeChild(this.generatedHeader),this.generatedHeader=null),this.generateHeader!==wr&&this.rowsData.length>0){const e=document.createElement(this.rowElementTag);return this.generatedHeader=e,this.generatedHeader.columnDefinitions=this.columnDefinitions,this.generatedHeader.gridTemplateColumns=this.gridTemplateColumns,this.generatedHeader.rowType=this.generateHeader===Sr?Rr:Pr,void(null===this.firstChild&&null===this.rowsPlaceholder||this.insertBefore(e,null!==this.firstChild?this.firstChild:this.rowsPlaceholder))}}}Ar.generateColumns=e=>Object.getOwnPropertyNames(e).map(((e,t)=>({columnDataKey:e,gridColumn:`${t}`}))),Z([G({attribute:"no-tabbing",mode:"boolean"})],Ar.prototype,"noTabbing",void 0),Z([G({attribute:"generate-header"})],Ar.prototype,"generateHeader",void 0),Z([G({attribute:"grid-template-columns"})],Ar.prototype,"gridTemplateColumns",void 0),Z([R],Ar.prototype,"rowsData",void 0),Z([R],Ar.prototype,"columnDefinitions",void 0),Z([R],Ar.prototype,"rowItemTemplate",void 0),Z([R],Ar.prototype,"cellItemTemplate",void 0),Z([R],Ar.prototype,"headerCellItemTemplate",void 0),Z([R],Ar.prototype,"focusRowIndex",void 0),Z([R],Ar.prototype,"focusColumnIndex",void 0),Z([R],Ar.prototype,"defaultRowItemTemplate",void 0),Z([R],Ar.prototype,"rowElementTag",void 0),Z([R],Ar.prototype,"rowElements",void 0);class Mr extends Bi{constructor(e,t){super(e,t),this.observer=null,t.childList=!0}observe(){null===this.observer&&(this.observer=new MutationObserver(this.handleEvent.bind(this))),this.observer.observe(this.target,this.options)}disconnect(){this.observer.disconnect()}getNodes(){return"subtree"in this.options?Array.from(this.target.querySelectorAll(this.options.selector)):Array.from(this.target.childNodes)}}function Or(e){return"string"===typeof e&&(e={property:e}),new ot("fast-children",Mr,e)}class Nr extends qe{constructor(){super(...arguments),this.rowType=Ir,this.rowData=null,this.columnDefinitions=null,this.isActiveRow=!1,this.cellsRepeatBehavior=null,this.cellsPlaceholder=null,this.focusColumnIndex=0,this.refocusOnLoad=!1,this.updateRowStyle=()=>{this.style.gridTemplateColumns=this.gridTemplateColumns}}gridTemplateColumnsChanged(){this.$fastController.isConnected&&this.updateRowStyle()}rowTypeChanged(){this.$fastController.isConnected&&this.updateItemTemplate()}rowDataChanged(){null!==this.rowData&&this.isActiveRow&&(this.refocusOnLoad=!0)}cellItemTemplateChanged(){this.updateItemTemplate()}headerCellItemTemplateChanged(){this.updateItemTemplate()}connectedCallback(){super.connectedCallback(),null===this.cellsRepeatBehavior&&(this.cellsPlaceholder=document.createComment(""),this.appendChild(this.cellsPlaceholder),this.updateItemTemplate(),this.cellsRepeatBehavior=new vr((e=>e.columnDefinitions),(e=>e.activeCellItemTemplate),{positioning:!0}).createBehavior(this.cellsPlaceholder),this.$fastController.addBehaviors([this.cellsRepeatBehavior])),this.addEventListener("cell-focused",this.handleCellFocus),this.addEventListener(xr,this.handleFocusout),this.addEventListener(kr,this.handleKeydown),this.updateRowStyle(),this.refocusOnLoad&&(this.refocusOnLoad=!1,this.cellElements.length>this.focusColumnIndex&&this.cellElements[this.focusColumnIndex].focus())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("cell-focused",this.handleCellFocus),this.removeEventListener(xr,this.handleFocusout),this.removeEventListener(kr,this.handleKeydown)}handleFocusout(e){this.contains(e.target)||(this.isActiveRow=!1,this.focusColumnIndex=0)}handleCellFocus(e){this.isActiveRow=!0,this.focusColumnIndex=this.cellElements.indexOf(e.target),this.$emit("row-focused",this)}handleKeydown(e){if(e.defaultPrevented)return;let t=0;switch(e.key){case bi:t=Math.max(0,this.focusColumnIndex-1),this.cellElements[t].focus(),e.preventDefault();break;case yi:t=Math.min(this.cellElements.length-1,this.focusColumnIndex+1),this.cellElements[t].focus(),e.preventDefault();break;case Ci:e.ctrlKey||(this.cellElements[0].focus(),e.preventDefault());break;case Si:e.ctrlKey||(this.cellElements[this.cellElements.length-1].focus(),e.preventDefault())}}updateItemTemplate(){this.activeCellItemTemplate=this.rowType===Ir&&void 0!==this.cellItemTemplate?this.cellItemTemplate:this.rowType===Ir&&void 0===this.cellItemTemplate?this.defaultCellItemTemplate:void 0!==this.headerCellItemTemplate?this.headerCellItemTemplate:this.defaultHeaderCellItemTemplate}}Z([G({attribute:"grid-template-columns"})],Nr.prototype,"gridTemplateColumns",void 0),Z([G({attribute:"row-type"})],Nr.prototype,"rowType",void 0),Z([R],Nr.prototype,"rowData",void 0),Z([R],Nr.prototype,"columnDefinitions",void 0),Z([R],Nr.prototype,"cellItemTemplate",void 0),Z([R],Nr.prototype,"headerCellItemTemplate",void 0),Z([R],Nr.prototype,"rowIndex",void 0),Z([R],Nr.prototype,"isActiveRow",void 0),Z([R],Nr.prototype,"activeCellItemTemplate",void 0),Z([R],Nr.prototype,"defaultCellItemTemplate",void 0),Z([R],Nr.prototype,"defaultHeaderCellItemTemplate",void 0),Z([R],Nr.prototype,"cellElements",void 0);const jr=Pt`
    <template>
        ${e=>null===e.rowData||null===e.columnDefinition||null===e.columnDefinition.columnDataKey?null:e.rowData[e.columnDefinition.columnDataKey]}
    </template>
`,Dr=Pt`
    <template>
        ${e=>null===e.columnDefinition?null:void 0===e.columnDefinition.title?e.columnDefinition.columnDataKey:e.columnDefinition.title}
    </template>
`;class Lr extends qe{constructor(){super(...arguments),this.cellType=Tr,this.rowData=null,this.columnDefinition=null,this.isActiveCell=!1,this.customCellView=null,this.updateCellStyle=()=>{this.style.gridColumn=this.gridColumn}}cellTypeChanged(){this.$fastController.isConnected&&this.updateCellView()}gridColumnChanged(){this.$fastController.isConnected&&this.updateCellStyle()}columnDefinitionChanged(e,t){this.$fastController.isConnected&&this.updateCellView()}connectedCallback(){var e;super.connectedCallback(),this.addEventListener(yr,this.handleFocusin),this.addEventListener(xr,this.handleFocusout),this.addEventListener(kr,this.handleKeydown),this.style.gridColumn=`${void 0===(null===(e=this.columnDefinition)||void 0===e?void 0:e.gridColumn)?0:this.columnDefinition.gridColumn}`,this.updateCellView(),this.updateCellStyle()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(yr,this.handleFocusin),this.removeEventListener(xr,this.handleFocusout),this.removeEventListener(kr,this.handleKeydown),this.disconnectCellView()}handleFocusin(e){if(!this.isActiveCell){if(this.isActiveCell=!0,this.cellType===Er){if(null!==this.columnDefinition&&!0!==this.columnDefinition.headerCellInternalFocusQueue&&"function"===typeof this.columnDefinition.headerCellFocusTargetCallback){const e=this.columnDefinition.headerCellFocusTargetCallback(this);null!==e&&e.focus()}}else if(null!==this.columnDefinition&&!0!==this.columnDefinition.cellInternalFocusQueue&&"function"===typeof this.columnDefinition.cellFocusTargetCallback){const e=this.columnDefinition.cellFocusTargetCallback(this);null!==e&&e.focus()}this.$emit("cell-focused",this)}}handleFocusout(e){this===document.activeElement||this.contains(document.activeElement)||(this.isActiveCell=!1)}handleKeydown(e){if(!(e.defaultPrevented||null===this.columnDefinition||this.cellType===Tr&&!0!==this.columnDefinition.cellInternalFocusQueue||this.cellType===Er&&!0!==this.columnDefinition.headerCellInternalFocusQueue))switch(e.key){case ki:case"F2":if(this.contains(document.activeElement)&&document.activeElement!==this)return;if(this.cellType===Er){if(void 0!==this.columnDefinition.headerCellFocusTargetCallback){const t=this.columnDefinition.headerCellFocusTargetCallback(this);null!==t&&t.focus(),e.preventDefault()}}else if(void 0!==this.columnDefinition.cellFocusTargetCallback){const t=this.columnDefinition.cellFocusTargetCallback(this);null!==t&&t.focus(),e.preventDefault()}break;case wi:this.contains(document.activeElement)&&document.activeElement!==this&&(this.focus(),e.preventDefault())}}updateCellView(){if(this.disconnectCellView(),null!==this.columnDefinition)switch(this.cellType){case Er:void 0!==this.columnDefinition.headerCellTemplate?this.customCellView=this.columnDefinition.headerCellTemplate.render(this,this):this.customCellView=Dr.render(this,this);break;case void 0:case _r:case Tr:void 0!==this.columnDefinition.cellTemplate?this.customCellView=this.columnDefinition.cellTemplate.render(this,this):this.customCellView=jr.render(this,this)}}disconnectCellView(){null!==this.customCellView&&(this.customCellView.dispose(),this.customCellView=null)}}Z([G({attribute:"cell-type"})],Lr.prototype,"cellType",void 0),Z([G({attribute:"grid-column"})],Lr.prototype,"gridColumn",void 0),Z([R],Lr.prototype,"rowData",void 0),Z([R],Lr.prototype,"columnDefinition",void 0);const Fr=class extends Ar{connectedCallback(){super.connectedCallback();this.getAttribute("aria-label")||this.setAttribute("aria-label","Data Grid")}}.compose({baseName:"data-grid",baseClass:Ar,template:(e,t)=>{const n=function(e){const t=e.tagFor(Nr);return Pt`
    <${t}
        :rowData="${e=>e}"
        :cellItemTemplate="${(e,t)=>t.parent.cellItemTemplate}"
        :headerCellItemTemplate="${(e,t)=>t.parent.headerCellItemTemplate}"
    ></${t}>
`}(e),i=e.tagFor(Nr);return Pt`
        <template
            role="grid"
            tabindex="0"
            :rowElementTag="${()=>i}"
            :defaultRowItemTemplate="${n}"
            ${Or({property:"rowElements",filter:Fi("[role=row]")})}
        >
            <slot></slot>
        </template>
    `},styles:(e,t)=>Ot`
	:host {
		display: flex;
		position: relative;
		flex-direction: column;
		width: 100%;
	}
`});const Br=class extends Nr{}.compose({baseName:"data-grid-row",baseClass:Nr,template:(e,t)=>{const n=function(e){const t=e.tagFor(Lr);return Pt`
    <${t}
        cell-type="${e=>e.isRowHeader?"rowheader":void 0}"
        grid-column="${(e,t)=>t.index+1}"
        :rowData="${(e,t)=>t.parent.rowData}"
        :columnDefinition="${e=>e}"
    ></${t}>
`}(e),i=function(e){const t=e.tagFor(Lr);return Pt`
    <${t}
        cell-type="columnheader"
        grid-column="${(e,t)=>t.index+1}"
        :columnDefinition="${e=>e}"
    ></${t}>
`}(e);return Pt`
        <template
            role="row"
            class="${e=>"default"!==e.rowType?e.rowType:""}"
            :defaultCellItemTemplate="${n}"
            :defaultHeaderCellItemTemplate="${i}"
            ${Or({property:"cellElements",filter:Fi('[role="cell"],[role="gridcell"],[role="columnheader"],[role="rowheader"]')})}
        >
            <slot ${$i("slottedCellElements")}></slot>
        </template>
    `},styles:(e,t)=>Ot`
	:host {
		display: grid;
		padding: calc((${cn} / 4) * 1px) 0;
		box-sizing: border-box;
		width: 100%;
		background: transparent;
	}
	:host(.header) {
	}
	:host(.sticky-header) {
		background: ${rn};
		position: sticky;
		top: 0;
	}
	:host(:hover) {
		background: ${qn};
		outline: 1px dotted ${sn};
		outline-offset: -1px;
	}
`});const Ur=class extends Lr{}.compose({baseName:"data-grid-cell",baseClass:Lr,template:(e,t)=>Pt`
        <template
            tabindex="-1"
            role="${e=>e.cellType&&"default"!==e.cellType?e.cellType:"gridcell"}"
            class="
            ${e=>"columnheader"===e.cellType?"column-header":"rowheader"===e.cellType?"row-header":""}
            "
        >
            <slot></slot>
        </template>
    `,styles:(e,t)=>Ot`
	:host {
		padding: calc(${cn} * 1px) calc(${cn} * 3px);
		color: ${pn};
		opacity: 1;
		box-sizing: border-box;
		font-family: ${hn};
		font-size: ${gn};
		line-height: ${vn};
		font-weight: 400;
		border: solid calc(${on} * 1px) transparent;
		border-radius: calc(${an} * 1px);
		white-space: wrap;
		overflow-wrap: anywhere;
	}
	:host(.column-header) {
		font-weight: 600;
	}
	:host(:${Hi}),
	:host(:focus),
	:host(:active) {
		background: ${Hn};
		border: solid calc(${on} * 1px) ${un};
		color: ${Wn};
		outline: none;
	}
	:host(:${Hi}) ::slotted(*),
	:host(:focus) ::slotted(*),
	:host(:active) ::slotted(*) {
		color: ${Wn} !important;
	}
`}),$r="horizontal",zr="separator";class Vr extends qe{constructor(){super(...arguments),this.role=zr,this.orientation=$r}}Z([G],Vr.prototype,"role",void 0),Z([G],Vr.prototype,"orientation",void 0);const Hr=class extends Vr{}.compose({baseName:"divider",template:(e,t)=>Pt`
    <template role="${e=>e.role}" aria-orientation="${e=>e.orientation}"></template>
`,styles:(e,t)=>Ot`
	${Nt("block")} :host {
		border: none;
		border-top: calc(${on} * 1px) solid ${Kn};
		box-sizing: content-box;
		height: 0;
		margin: calc(${cn} * 1px) 0;
		width: 100%;
	}
`});let Wr=0;function qr(){return`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}${Wr++}`}function Kr(e){return zi(e)&&("option"===e.getAttribute("role")||e instanceof HTMLOptionElement)}class Gr extends qe{constructor(e,t,n,i){super(),this.defaultSelected=!1,this.dirtySelected=!1,this.selected=this.defaultSelected,this.dirtyValue=!1,e&&(this.textContent=e),t&&(this.initialValue=t),n&&(this.defaultSelected=n),i&&(this.selected=i),this.proxy=new Option(`${this.textContent}`,this.initialValue,this.defaultSelected,this.selected),this.proxy.disabled=this.disabled}checkedChanged(e,t){this.ariaChecked="boolean"!==typeof t?null:t?"true":"false"}contentChanged(e,t){this.proxy instanceof HTMLOptionElement&&(this.proxy.textContent=this.textContent),this.$emit("contentchange",null,{bubbles:!0})}defaultSelectedChanged(){this.dirtySelected||(this.selected=this.defaultSelected,this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.defaultSelected))}disabledChanged(e,t){this.ariaDisabled=this.disabled?"true":"false",this.proxy instanceof HTMLOptionElement&&(this.proxy.disabled=this.disabled)}selectedAttributeChanged(){this.defaultSelected=this.selectedAttribute,this.proxy instanceof HTMLOptionElement&&(this.proxy.defaultSelected=this.defaultSelected)}selectedChanged(){this.ariaSelected=this.selected?"true":"false",this.dirtySelected||(this.dirtySelected=!0),this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.selected)}initialValueChanged(e,t){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}get label(){var e;return null!==(e=this.value)&&void 0!==e?e:this.text}get text(){var e,t;return null!==(t=null===(e=this.textContent)||void 0===e?void 0:e.replace(/\s+/g," ").trim())&&void 0!==t?t:""}set value(e){const t=`${null!==e&&void 0!==e?e:""}`;this._value=t,this.dirtyValue=!0,this.proxy instanceof HTMLOptionElement&&(this.proxy.value=t),P.notify(this,"value")}get value(){var e;return P.track(this,"value"),null!==(e=this._value)&&void 0!==e?e:this.text}get form(){return this.proxy?this.proxy.form:null}}Z([R],Gr.prototype,"checked",void 0),Z([R],Gr.prototype,"content",void 0),Z([R],Gr.prototype,"defaultSelected",void 0),Z([G({mode:"boolean"})],Gr.prototype,"disabled",void 0),Z([G({attribute:"selected",mode:"boolean"})],Gr.prototype,"selectedAttribute",void 0),Z([R],Gr.prototype,"selected",void 0),Z([G({attribute:"value",mode:"fromView"})],Gr.prototype,"initialValue",void 0);class Yr{}Z([R],Yr.prototype,"ariaChecked",void 0),Z([R],Yr.prototype,"ariaPosInSet",void 0),Z([R],Yr.prototype,"ariaSelected",void 0),Z([R],Yr.prototype,"ariaSetSize",void 0),mi(Yr,ci),mi(Gr,hi,Yr);class Qr extends qe{constructor(){super(...arguments),this._options=[],this.selectedIndex=-1,this.selectedOptions=[],this.shouldSkipFocus=!1,this.typeaheadBuffer="",this.typeaheadExpired=!0,this.typeaheadTimeout=-1}get firstSelectedOption(){var e;return null!==(e=this.selectedOptions[0])&&void 0!==e?e:null}get hasSelectableOptions(){return this.options.length>0&&!this.options.every((e=>e.disabled))}get length(){var e,t;return null!==(t=null===(e=this.options)||void 0===e?void 0:e.length)&&void 0!==t?t:0}get options(){return P.track(this,"options"),this._options}set options(e){this._options=e,P.notify(this,"options")}get typeAheadExpired(){return this.typeaheadExpired}set typeAheadExpired(e){this.typeaheadExpired=e}clickHandler(e){const t=e.target.closest("option,[role=option]");if(t&&!t.disabled)return this.selectedIndex=this.options.indexOf(t),!0}focusAndScrollOptionIntoView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.firstSelectedOption;this.contains(document.activeElement)&&null!==e&&(e.focus(),requestAnimationFrame((()=>{e.scrollIntoView({block:"nearest"})})))}focusinHandler(e){this.shouldSkipFocus||e.target!==e.currentTarget||(this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}getTypeaheadMatches(){const e=this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),t=new RegExp(`^${e}`,"gi");return this.options.filter((e=>e.text.trim().match(t)))}getSelectableIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIndex,t=arguments.length>1?arguments[1]:void 0;const n=e>t?-1:e<t?1:0,i=e+n;let r=null;switch(n){case-1:r=this.options.reduceRight(((e,t,n)=>!e&&!t.disabled&&n<i?t:e),r);break;case 1:r=this.options.reduce(((e,t,n)=>!e&&!t.disabled&&n>i?t:e),r)}return this.options.indexOf(r)}handleChange(e,t){if("selected"===t)Qr.slottedOptionFilter(e)&&(this.selectedIndex=this.options.indexOf(e)),this.setSelectedOptions()}handleTypeAhead(e){this.typeaheadTimeout&&window.clearTimeout(this.typeaheadTimeout),this.typeaheadTimeout=window.setTimeout((()=>this.typeaheadExpired=!0),Qr.TYPE_AHEAD_TIMEOUT_MS),e.length>1||(this.typeaheadBuffer=`${this.typeaheadExpired?"":this.typeaheadBuffer}${e}`)}keydownHandler(e){if(this.disabled)return!0;this.shouldSkipFocus=!1;const t=e.key;switch(t){case Ci:e.shiftKey||(e.preventDefault(),this.selectFirstOption());break;case vi:e.shiftKey||(e.preventDefault(),this.selectNextOption());break;case xi:e.shiftKey||(e.preventDefault(),this.selectPreviousOption());break;case Si:e.preventDefault(),this.selectLastOption();break;case Ei:return this.focusAndScrollOptionIntoView(),!0;case ki:case wi:return!0;case Ti:if(this.typeaheadExpired)return!0;default:return 1===t.length&&this.handleTypeAhead(`${t}`),!0}}mousedownHandler(e){return this.shouldSkipFocus=!this.contains(document.activeElement),!0}multipleChanged(e,t){this.ariaMultiSelectable=t?"true":null}selectedIndexChanged(e,t){var n;if(this.hasSelectableOptions){if((null===(n=this.options[this.selectedIndex])||void 0===n?void 0:n.disabled)&&"number"===typeof e){const n=this.getSelectableIndex(e,t),i=n>-1?n:e;return this.selectedIndex=i,void(t===i&&this.selectedIndexChanged(t,i))}this.setSelectedOptions()}else this.selectedIndex=-1}selectedOptionsChanged(e,t){var n;const i=t.filter(Qr.slottedOptionFilter);null===(n=this.options)||void 0===n||n.forEach((e=>{const t=P.getNotifier(e);t.unsubscribe(this,"selected"),e.selected=i.includes(e),t.subscribe(this,"selected")}))}selectFirstOption(){var e,t;this.disabled||(this.selectedIndex=null!==(t=null===(e=this.options)||void 0===e?void 0:e.findIndex((e=>!e.disabled)))&&void 0!==t?t:-1)}selectLastOption(){this.disabled||(this.selectedIndex=function(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}(this.options,(e=>!e.disabled)))}selectNextOption(){!this.disabled&&this.selectedIndex<this.options.length-1&&(this.selectedIndex+=1)}selectPreviousOption(){!this.disabled&&this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1)}setDefaultSelectedOption(){var e,t;this.selectedIndex=null!==(t=null===(e=this.options)||void 0===e?void 0:e.findIndex((e=>e.defaultSelected)))&&void 0!==t?t:-1}setSelectedOptions(){var e,t,n;(null===(e=this.options)||void 0===e?void 0:e.length)&&(this.selectedOptions=[this.options[this.selectedIndex]],this.ariaActiveDescendant=null!==(n=null===(t=this.firstSelectedOption)||void 0===t?void 0:t.id)&&void 0!==n?n:"",this.focusAndScrollOptionIntoView())}slottedOptionsChanged(e,t){this.options=t.reduce(((e,t)=>(Kr(t)&&e.push(t),e)),[]);const n=`${this.options.length}`;this.options.forEach(((e,t)=>{e.id||(e.id=qr("option-")),e.ariaPosInSet=`${t+1}`,e.ariaSetSize=n})),this.$fastController.isConnected&&(this.setSelectedOptions(),this.setDefaultSelectedOption())}typeaheadBufferChanged(e,t){if(this.$fastController.isConnected){const e=this.getTypeaheadMatches();if(e.length){const t=this.options.indexOf(e[0]);t>-1&&(this.selectedIndex=t)}this.typeaheadExpired=!1}}}Qr.slottedOptionFilter=e=>Kr(e)&&!e.hidden,Qr.TYPE_AHEAD_TIMEOUT_MS=1e3,Z([G({mode:"boolean"})],Qr.prototype,"disabled",void 0),Z([R],Qr.prototype,"selectedIndex",void 0),Z([R],Qr.prototype,"selectedOptions",void 0),Z([R],Qr.prototype,"slottedOptions",void 0),Z([R],Qr.prototype,"typeaheadBuffer",void 0);class Xr{}function Jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[t,n]=[t,n].sort(((e,t)=>e-t)),t<=e&&e<n}Z([R],Xr.prototype,"ariaActiveDescendant",void 0),Z([R],Xr.prototype,"ariaDisabled",void 0),Z([R],Xr.prototype,"ariaExpanded",void 0),Z([R],Xr.prototype,"ariaMultiSelectable",void 0),mi(Xr,ci),mi(Qr,Xr);class Zr extends Qr{constructor(){super(...arguments),this.activeIndex=-1,this.rangeStartIndex=-1}get activeOption(){return this.options[this.activeIndex]}get checkedOptions(){var e;return null===(e=this.options)||void 0===e?void 0:e.filter((e=>e.checked))}get firstSelectedOptionIndex(){return this.options.indexOf(this.firstSelectedOption)}activeIndexChanged(e,t){var n,i;this.ariaActiveDescendant=null!==(i=null===(n=this.options[t])||void 0===n?void 0:n.id)&&void 0!==i?i:"",this.focusAndScrollOptionIntoView()}checkActiveIndex(){if(!this.multiple)return;const e=this.activeOption;e&&(e.checked=!0)}checkFirstOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex+1),this.options.forEach(((e,t)=>{e.checked=Jr(t,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex=0,this.checkActiveIndex()}checkLastOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((e,t)=>{e.checked=Jr(t,this.rangeStartIndex,this.options.length)}))):this.uncheckAllOptions(),this.activeIndex=this.options.length-1,this.checkActiveIndex()}connectedCallback(){super.connectedCallback(),this.addEventListener("focusout",this.focusoutHandler)}disconnectedCallback(){this.removeEventListener("focusout",this.focusoutHandler),super.disconnectedCallback()}checkNextOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((e,t)=>{e.checked=Jr(t,this.rangeStartIndex,this.activeIndex+1)}))):this.uncheckAllOptions(),this.activeIndex+=this.activeIndex<this.options.length-1?1:0,this.checkActiveIndex()}checkPreviousOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),1===this.checkedOptions.length&&(this.rangeStartIndex+=1),this.options.forEach(((e,t)=>{e.checked=Jr(t,this.activeIndex,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex-=this.activeIndex>0?1:0,this.checkActiveIndex()}clickHandler(e){var t;if(!this.multiple)return super.clickHandler(e);const n=null===(t=e.target)||void 0===t?void 0:t.closest("[role=option]");return n&&!n.disabled?(this.uncheckAllOptions(),this.activeIndex=this.options.indexOf(n),this.checkActiveIndex(),this.toggleSelectedForAllCheckedOptions(),!0):void 0}focusAndScrollOptionIntoView(){super.focusAndScrollOptionIntoView(this.activeOption)}focusinHandler(e){if(!this.multiple)return super.focusinHandler(e);this.shouldSkipFocus||e.target!==e.currentTarget||(this.uncheckAllOptions(),-1===this.activeIndex&&(this.activeIndex=-1!==this.firstSelectedOptionIndex?this.firstSelectedOptionIndex:0),this.checkActiveIndex(),this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}focusoutHandler(e){this.multiple&&this.uncheckAllOptions()}keydownHandler(e){if(!this.multiple)return super.keydownHandler(e);if(this.disabled)return!0;const{key:t,shiftKey:n}=e;switch(this.shouldSkipFocus=!1,t){case Ci:return void this.checkFirstOption(n);case vi:return void this.checkNextOption(n);case xi:return void this.checkPreviousOption(n);case Si:return void this.checkLastOption(n);case Ei:return this.focusAndScrollOptionIntoView(),!0;case wi:return this.uncheckAllOptions(),this.checkActiveIndex(),!0;case Ti:if(e.preventDefault(),this.typeAheadExpired)return void this.toggleSelectedForAllCheckedOptions();default:return 1===t.length&&this.handleTypeAhead(`${t}`),!0}}mousedownHandler(e){if(e.offsetX>=0&&e.offsetX<=this.scrollWidth)return super.mousedownHandler(e)}multipleChanged(e,t){var n;this.ariaMultiSelectable=t?"true":null,null===(n=this.options)||void 0===n||n.forEach((e=>{e.checked=!t&&void 0})),this.setSelectedOptions()}setSelectedOptions(){this.multiple?this.$fastController.isConnected&&this.options&&(this.selectedOptions=this.options.filter((e=>e.selected)),this.focusAndScrollOptionIntoView()):super.setSelectedOptions()}sizeChanged(e,t){var n;const i=Math.max(0,parseInt(null!==(n=null===t||void 0===t?void 0:t.toFixed())&&void 0!==n?n:"",10));i!==t&&E.queueUpdate((()=>{this.size=i}))}toggleSelectedForAllCheckedOptions(){const e=this.checkedOptions.filter((e=>!e.disabled)),t=!e.every((e=>e.selected));e.forEach((e=>e.selected=t)),this.selectedIndex=this.options.indexOf(e[e.length-1]),this.setSelectedOptions()}typeaheadBufferChanged(e,t){if(this.multiple){if(this.$fastController.isConnected){const e=this.getTypeaheadMatches(),t=this.options.indexOf(e[0]);t>-1&&(this.activeIndex=t,this.uncheckAllOptions(),this.checkActiveIndex()),this.typeAheadExpired=!1}}else super.typeaheadBufferChanged(e,t)}uncheckAllOptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.forEach((e=>e.checked=!this.multiple&&void 0)),e||(this.rangeStartIndex=-1)}}Z([R],Zr.prototype,"activeIndex",void 0),Z([G({mode:"boolean"})],Zr.prototype,"multiple",void 0),Z([G({converter:q})],Zr.prototype,"size",void 0);class eo extends Zr{}class to extends(Mi(eo)){constructor(){super(...arguments),this.proxy=document.createElement("select")}}const no="above",io="below";class ro extends to{constructor(){super(...arguments),this.open=!1,this.forcedPosition=!1,this.listboxId=qr("listbox-"),this.maxHeight=0}openChanged(e,t){if(this.collapsible){if(this.open)return this.ariaControls=this.listboxId,this.ariaExpanded="true",this.setPositioning(),this.focusAndScrollOptionIntoView(),this.indexWhenOpened=this.selectedIndex,void E.queueUpdate((()=>this.focus()));this.ariaControls="",this.ariaExpanded="false"}}get collapsible(){return!(this.multiple||"number"===typeof this.size)}get value(){return P.track(this,"value"),this._value}set value(e){var t,n,i,r,o,s,a;const l=`${this._value}`;if(null===(t=this._options)||void 0===t?void 0:t.length){const t=this._options.findIndex((t=>t.value===e)),l=null!==(i=null===(n=this._options[this.selectedIndex])||void 0===n?void 0:n.value)&&void 0!==i?i:null,c=null!==(o=null===(r=this._options[t])||void 0===r?void 0:r.value)&&void 0!==o?o:null;-1!==t&&l===c||(e="",this.selectedIndex=t),e=null!==(a=null===(s=this.firstSelectedOption)||void 0===s?void 0:s.value)&&void 0!==a?a:e}l!==e&&(this._value=e,super.valueChanged(l,e),P.notify(this,"value"),this.updateDisplayValue())}updateValue(e){var t,n;this.$fastController.isConnected&&(this.value=null!==(n=null===(t=this.firstSelectedOption)||void 0===t?void 0:t.value)&&void 0!==n?n:""),e&&(this.$emit("input"),this.$emit("change",this,{bubbles:!0,composed:void 0}))}selectedIndexChanged(e,t){super.selectedIndexChanged(e,t),this.updateValue()}positionChanged(e,t){this.positionAttribute=t,this.setPositioning()}setPositioning(){const e=this.getBoundingClientRect(),t=window.innerHeight-e.bottom;this.position=this.forcedPosition?this.positionAttribute:e.top>t?no:io,this.positionAttribute=this.forcedPosition?this.positionAttribute:this.position,this.maxHeight=this.position===no?~~e.top:~~t}get displayValue(){var e,t;return P.track(this,"displayValue"),null!==(t=null===(e=this.firstSelectedOption)||void 0===e?void 0:e.text)&&void 0!==t?t:""}disabledChanged(e,t){super.disabledChanged&&super.disabledChanged(e,t),this.ariaDisabled=this.disabled?"true":"false"}formResetCallback(){this.setProxyOptions(),super.setDefaultSelectedOption(),-1===this.selectedIndex&&(this.selectedIndex=0)}clickHandler(e){if(!this.disabled){if(this.open){const t=e.target.closest("option,[role=option]");if(t&&t.disabled)return}return super.clickHandler(e),this.open=this.collapsible&&!this.open,this.open||this.indexWhenOpened===this.selectedIndex||this.updateValue(!0),!0}}focusoutHandler(e){var t;if(super.focusoutHandler(e),!this.open)return!0;const n=e.relatedTarget;this.isSameNode(n)?this.focus():(null===(t=this.options)||void 0===t?void 0:t.includes(n))||(this.open=!1,this.indexWhenOpened!==this.selectedIndex&&this.updateValue(!0))}handleChange(e,t){super.handleChange(e,t),"value"===t&&this.updateValue()}slottedOptionsChanged(e,t){this.options.forEach((e=>{P.getNotifier(e).unsubscribe(this,"value")})),super.slottedOptionsChanged(e,t),this.options.forEach((e=>{P.getNotifier(e).subscribe(this,"value")})),this.setProxyOptions(),this.updateValue()}mousedownHandler(e){var t;return e.offsetX>=0&&e.offsetX<=(null===(t=this.listbox)||void 0===t?void 0:t.scrollWidth)?super.mousedownHandler(e):this.collapsible}multipleChanged(e,t){super.multipleChanged(e,t),this.proxy&&(this.proxy.multiple=t)}selectedOptionsChanged(e,t){var n;super.selectedOptionsChanged(e,t),null===(n=this.options)||void 0===n||n.forEach(((e,t)=>{var n;const i=null===(n=this.proxy)||void 0===n?void 0:n.options.item(t);i&&(i.selected=e.selected)}))}setDefaultSelectedOption(){var e;const t=null!==(e=this.options)&&void 0!==e?e:Array.from(this.children).filter(Qr.slottedOptionFilter),n=null===t||void 0===t?void 0:t.findIndex((e=>e.hasAttribute("selected")||e.selected||e.value===this.value));this.selectedIndex=-1===n?0:n}setProxyOptions(){this.proxy instanceof HTMLSelectElement&&this.options&&(this.proxy.options.length=0,this.options.forEach((e=>{const t=e.proxy||(e instanceof HTMLOptionElement?e.cloneNode():null);t&&this.proxy.options.add(t)})))}keydownHandler(e){super.keydownHandler(e);const t=e.key||e.key.charCodeAt(0);switch(t){case Ti:e.preventDefault(),this.collapsible&&this.typeAheadExpired&&(this.open=!this.open);break;case Ci:case Si:e.preventDefault();break;case ki:e.preventDefault(),this.open=!this.open;break;case wi:this.collapsible&&this.open&&(e.preventDefault(),this.open=!1);break;case Ei:return this.collapsible&&this.open&&(e.preventDefault(),this.open=!1),!0}return this.open||this.indexWhenOpened===this.selectedIndex||(this.updateValue(!0),this.indexWhenOpened=this.selectedIndex),!(t===vi||t===xi)}connectedCallback(){super.connectedCallback(),this.forcedPosition=!!this.positionAttribute,this.addEventListener("contentchange",this.updateDisplayValue)}disconnectedCallback(){this.removeEventListener("contentchange",this.updateDisplayValue),super.disconnectedCallback()}sizeChanged(e,t){super.sizeChanged(e,t),this.proxy&&(this.proxy.size=t)}updateDisplayValue(){this.collapsible&&P.notify(this,"displayValue")}}Z([G({attribute:"open",mode:"boolean"})],ro.prototype,"open",void 0),Z([function(e,t,n){return Object.assign({},n,{get:function(){return P.trackVolatile(),n.get.apply(this)}})}],ro.prototype,"collapsible",null),Z([R],ro.prototype,"control",void 0),Z([G({attribute:"position"})],ro.prototype,"positionAttribute",void 0),Z([R],ro.prototype,"position",void 0),Z([R],ro.prototype,"maxHeight",void 0);class oo{}Z([R],oo.prototype,"ariaControls",void 0),mi(oo,Xr),mi(ro,hi,oo);const so=e=>"function"===typeof e,ao=()=>null;function lo(e){return void 0===e?ao:so(e)?e:()=>e}function co(e,t,n){const i=so(e)?e:()=>e,r=lo(t),o=lo(n);return(e,t)=>i(e,t)?r(e,t):o(e,t)}const uo=class extends ro{}.compose({baseName:"dropdown",template:(e,t)=>Pt`
    <template
        class="${e=>[e.collapsible&&"collapsible",e.collapsible&&e.open&&"open",e.disabled&&"disabled",e.collapsible&&e.position].filter(Boolean).join(" ")}"
        aria-activedescendant="${e=>e.ariaActiveDescendant}"
        aria-controls="${e=>e.ariaControls}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-haspopup="${e=>e.collapsible?"listbox":null}"
        aria-multiselectable="${e=>e.ariaMultiSelectable}"
        ?open="${e=>e.open}"
        role="combobox"
        tabindex="${e=>e.disabled?null:"0"}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        @focusin="${(e,t)=>e.focusinHandler(t.event)}"
        @focusout="${(e,t)=>e.focusoutHandler(t.event)}"
        @keydown="${(e,t)=>e.keydownHandler(t.event)}"
        @mousedown="${(e,t)=>e.mousedownHandler(t.event)}"
    >
        ${co((e=>e.collapsible),Pt`
                <div
                    class="control"
                    part="control"
                    ?disabled="${e=>e.disabled}"
                    ${ui("control")}
                >
                    ${fi(0,t)}
                    <slot name="button-container">
                        <div class="selected-value" part="selected-value">
                            <slot name="selected-value">${e=>e.displayValue}</slot>
                        </div>
                        <div aria-hidden="true" class="indicator" part="indicator">
                            <slot name="indicator">
                                ${t.indicator||""}
                            </slot>
                        </div>
                    </slot>
                    ${pi(0,t)}
                </div>
            `)}
        <div
            class="listbox"
            id="${e=>e.listboxId}"
            part="listbox"
            role="listbox"
            ?disabled="${e=>e.disabled}"
            ?hidden="${e=>!!e.collapsible&&!e.open}"
            ${ui("listbox")}
        >
            <slot
                ${$i({filter:Qr.slottedOptionFilter,flatten:!0,property:"slottedOptions"})}
            ></slot>
        </div>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		background: ${Gn};
		border-radius: calc(${ln} * 1px);
		box-sizing: border-box;
		color: ${pn};
		contain: contents;
		font-family: ${hn};
		height: calc(${fn} * 1px);
		position: relative;
		user-select: none;
		min-width: ${mn};
		outline: none;
		vertical-align: top;
	}
	.control {
		align-items: center;
		box-sizing: border-box;
		border: calc(${on} * 1px) solid ${Yn};
		border-radius: calc(${ln} * 1px);
		cursor: pointer;
		display: flex;
		font-family: inherit;
		font-size: ${gn};
		line-height: ${vn};
		min-height: 100%;
		padding: 2px 6px 2px 8px;
		width: 100%;
	}
	.listbox {
		background: ${Gn};
		border: calc(${on} * 1px) solid ${un};
		border-radius: calc(${ln} * 1px);
		box-sizing: border-box;
		display: inline-flex;
		flex-direction: column;
		left: 0;
		max-height: ${Qn};
		padding: 0;
		overflow-y: auto;
		position: absolute;
		width: 100%;
		z-index: 1;
	}
	.listbox[hidden] {
		display: none;
	}
	:host(:${Hi}) .control {
		border-color: ${un};
	}
	:host(:not([disabled]):hover) {
		background: ${Gn};
		border-color: ${Yn};
	}
	:host(:${Hi}) ::slotted([aria-selected="true"][role="option"]:not([disabled])) {
		background: ${Hn};
		border: calc(${on} * 1px) solid transparent;
		color: ${Wn};
	}
	:host([disabled]) {
		cursor: ${Wi};
		opacity: ${dn};
	}
	:host([disabled]) .control {
		cursor: ${Wi};
		user-select: none;
	}
	:host([disabled]:hover) {
		background: ${Gn};
		color: ${pn};
		fill: currentcolor;
	}
	:host(:not([disabled])) .control:active {
		border-color: ${un};
	}
	:host(:empty) .listbox {
		display: none;
	}
	:host([open]) .control {
		border-color: ${un};
	}
	:host([open][position='above']) .listbox {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
	}
	:host([open][position='below']) .listbox {
		border-top-left-radius: 0;
		border-top-right-radius: 0;
	}
	:host([open][position='above']) .listbox {
		bottom: calc(${fn} * 1px);
	}
	:host([open][position='below']) .listbox {
		top: calc(${fn} * 1px);
	}
	.selected-value {
		flex: 1 1 auto;
		font-family: inherit;
		overflow: hidden;
		text-align: start;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
	.indicator {
		flex: 0 0 auto;
		margin-inline-start: 1em;
	}
	slot[name='listbox'] {
		display: none;
		width: 100%;
	}
	:host([open]) slot[name='listbox'] {
		display: flex;
		position: absolute;
	}
	.end {
		margin-inline-start: auto;
	}
	.start,
	.end,
	.indicator,
	.select-indicator,
	::slotted(svg),
	::slotted(span) {
		fill: currentcolor;
		height: 1em;
		min-height: calc(${cn} * 4px);
		min-width: calc(${cn} * 4px);
		width: 1em;
	}
	::slotted([role='option']),
	::slotted(option) {
		flex: 0 0 auto;
	}
`,indicator:'\n\t\t<svg \n\t\t\tclass="select-indicator"\n\t\t\tpart="select-indicator"\n\t\t\twidth="16" \n\t\t\theight="16" \n\t\t\tviewBox="0 0 16 16" \n\t\t\txmlns="http://www.w3.org/2000/svg" \n\t\t\tfill="currentColor"\n\t\t>\n\t\t\t<path \n\t\t\t\tfill-rule="evenodd" \n\t\t\t\tclip-rule="evenodd" \n\t\t\t\td="M7.976 10.072l4.357-4.357.62.618L8.284 11h-.618L3 6.333l.619-.618 4.357 4.357z"\n\t\t\t/>\n\t\t</svg>\n\t'});class ho extends qe{constructor(){super(...arguments),this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(e=this.$fastController.definition.shadowOptions)||void 0===e?void 0:e.delegatesFocus)&&(this.focus=()=>{var e;null===(e=this.control)||void 0===e||e.focus()})}}connectedCallback(){super.connectedCallback(),this.handleUnsupportedDelegatesFocus()}}Z([G],ho.prototype,"download",void 0),Z([G],ho.prototype,"href",void 0),Z([G],ho.prototype,"hreflang",void 0),Z([G],ho.prototype,"ping",void 0),Z([G],ho.prototype,"referrerpolicy",void 0),Z([G],ho.prototype,"rel",void 0),Z([G],ho.prototype,"target",void 0),Z([G],ho.prototype,"type",void 0),Z([R],ho.prototype,"defaultSlottedContent",void 0);class po{}Z([G({attribute:"aria-expanded"})],po.prototype,"ariaExpanded",void 0),mi(po,ci),mi(ho,hi,po);const fo=class extends ho{}.compose({baseName:"link",template:(e,t)=>Pt`
    <a
        class="control"
        part="control"
        download="${e=>e.download}"
        href="${e=>e.href}"
        hreflang="${e=>e.hreflang}"
        ping="${e=>e.ping}"
        referrerpolicy="${e=>e.referrerpolicy}"
        rel="${e=>e.rel}"
        target="${e=>e.target}"
        type="${e=>e.type}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${ui("control")}
    >
        ${fi(0,t)}
        <span class="content" part="content">
            <slot ${$i("defaultSlottedContent")}></slot>
        </span>
        ${pi(0,t)}
    </a>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		background: transparent;
		box-sizing: border-box;
		color: ${ei};
		cursor: pointer;
		fill: currentcolor;
		font-family: ${hn};
		font-size: ${gn};
		line-height: ${vn};
		outline: none;
	}
	.control {
		background: transparent;
		border: calc(${on} * 1px) solid transparent;
		border-radius: calc(${an} * 1px);
		box-sizing: border-box;
		color: inherit;
		cursor: inherit;
		fill: inherit;
		font-family: inherit;
		height: inherit;
		padding: 0;
		outline: none;
		text-decoration: none;
		word-break: break-word;
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host(:hover) {
		color: ${Zn};
	}
	:host(:hover) .content {
		text-decoration: underline;
	}
	:host(:active) {
		background: transparent;
		color: ${Zn};
	}
	:host(:${Hi}) .control,
	:host(:focus) .control {
		border: calc(${on} * 1px) solid ${un};
	}
`,shadowOptions:{delegatesFocus:!0}});const mo=class extends Gr{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Option")}}.compose({baseName:"option",template:(e,t)=>Pt`
    <template
        aria-checked="${e=>e.ariaChecked}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-posinset="${e=>e.ariaPosInSet}"
        aria-selected="${e=>e.ariaSelected}"
        aria-setsize="${e=>e.ariaSetSize}"
        class="${e=>[e.checked&&"checked",e.selected&&"selected",e.disabled&&"disabled"].filter(Boolean).join(" ")}"
        role="option"
    >
        ${fi(0,t)}
        <span class="content" part="content">
            <slot ${$i("content")}></slot>
        </span>
        ${pi(0,t)}
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		font-family: var(--body-font);
		border-radius: ${an};
		border: calc(${on} * 1px) solid transparent;
		box-sizing: border-box;
		color: ${pn};
		cursor: pointer;
		fill: currentcolor;
		font-size: ${gn};
		line-height: ${vn};
		margin: 0;
		outline: none;
		overflow: hidden;
		padding: 0 calc((${cn} / 2) * 1px)
			calc((${cn} / 4) * 1px);
		user-select: none;
		white-space: nowrap;
	}
	:host(:${Hi}) {
		border-color: ${un};
		background: ${Hn};
		color: ${pn};
	}
	:host([aria-selected='true']) {
		background: ${Hn};
		border: calc(${on} * 1px) solid transparent;
		color: ${Wn};
	}
	:host(:active) {
		background: ${Hn};
		color: ${Wn};
	}
	:host(:not([aria-selected='true']):hover) {
		background: ${Hn};
		border: calc(${on} * 1px) solid transparent;
		color: ${Wn};
	}
	:host(:not([aria-selected='true']):active) {
		background: ${Hn};
		color: ${pn};
	}
	:host([disabled]) {
		cursor: ${Wi};
		opacity: ${dn};
	}
	:host([disabled]:hover) {
		background-color: inherit;
	}
	.content {
		grid-column-start: 2;
		justify-self: start;
		overflow: hidden;
		text-overflow: ellipsis;
	}
`}),go="horizontal";class vo extends qe{constructor(){super(...arguments),this.orientation=go,this.activeindicator=!0,this.showActiveIndicator=!0,this.prevActiveTabIndex=0,this.activeTabIndex=0,this.ticking=!1,this.change=()=>{this.$emit("change",this.activetab)},this.isDisabledElement=e=>"true"===e.getAttribute("aria-disabled"),this.isHiddenElement=e=>e.hasAttribute("hidden"),this.isFocusableElement=e=>!this.isDisabledElement(e)&&!this.isHiddenElement(e),this.setTabs=()=>{const e="gridColumn",t="gridRow",n=this.isHorizontal()?e:t;this.activeTabIndex=this.getActiveIndex(),this.showActiveIndicator=!1,this.tabs.forEach(((i,r)=>{if("tab"===i.slot){const e=this.activeTabIndex===r&&this.isFocusableElement(i);this.activeindicator&&this.isFocusableElement(i)&&(this.showActiveIndicator=!0);const t=this.tabIds[r],n=this.tabpanelIds[r];i.setAttribute("id",t),i.setAttribute("aria-selected",e?"true":"false"),i.setAttribute("aria-controls",n),i.addEventListener("click",this.handleTabClick),i.addEventListener("keydown",this.handleTabKeyDown),i.setAttribute("tabindex",e?"0":"-1"),e&&(this.activetab=i,this.activeid=t)}i.style[e]="",i.style[t]="",i.style[n]=`${r+1}`,this.isHorizontal()?i.classList.remove("vertical"):i.classList.add("vertical")}))},this.setTabPanels=()=>{this.tabpanels.forEach(((e,t)=>{const n=this.tabIds[t],i=this.tabpanelIds[t];e.setAttribute("id",i),e.setAttribute("aria-labelledby",n),this.activeTabIndex!==t?e.setAttribute("hidden",""):e.removeAttribute("hidden")}))},this.handleTabClick=e=>{const t=e.currentTarget;1===t.nodeType&&this.isFocusableElement(t)&&(this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=this.tabs.indexOf(t),this.setComponent())},this.handleTabKeyDown=e=>{if(this.isHorizontal())switch(e.key){case bi:e.preventDefault(),this.adjustBackward(e);break;case yi:e.preventDefault(),this.adjustForward(e)}else switch(e.key){case xi:e.preventDefault(),this.adjustBackward(e);break;case vi:e.preventDefault(),this.adjustForward(e)}switch(e.key){case Ci:e.preventDefault(),this.adjust(-this.activeTabIndex);break;case Si:e.preventDefault(),this.adjust(this.tabs.length-this.activeTabIndex-1)}},this.adjustForward=e=>{const t=this.tabs;let n=0;for(n=this.activetab?t.indexOf(this.activetab)+1:1,n===t.length&&(n=0);n<t.length&&t.length>1;){if(this.isFocusableElement(t[n])){this.moveToTabByIndex(t,n);break}if(this.activetab&&n===t.indexOf(this.activetab))break;n+1>=t.length?n=0:n+=1}},this.adjustBackward=e=>{const t=this.tabs;let n=0;for(n=this.activetab?t.indexOf(this.activetab)-1:0,n=n<0?t.length-1:n;n>=0&&t.length>1;){if(this.isFocusableElement(t[n])){this.moveToTabByIndex(t,n);break}n-1<0?n=t.length-1:n-=1}},this.moveToTabByIndex=(e,t)=>{const n=e[t];this.activetab=n,this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=t,n.focus(),this.setComponent()}}orientationChanged(){this.$fastController.isConnected&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}activeidChanged(e,t){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.prevActiveTabIndex=this.tabs.findIndex((t=>t.id===e)),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabsChanged(){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabpanelsChanged(){this.$fastController.isConnected&&this.tabpanels.length<=this.tabs.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}getActiveIndex(){return void 0!==this.activeid?-1===this.tabIds.indexOf(this.activeid)?0:this.tabIds.indexOf(this.activeid):0}getTabIds(){return this.tabs.map((e=>{var t;return null!==(t=e.getAttribute("id"))&&void 0!==t?t:`tab-${qr()}`}))}getTabPanelIds(){return this.tabpanels.map((e=>{var t;return null!==(t=e.getAttribute("id"))&&void 0!==t?t:`panel-${qr()}`}))}setComponent(){this.activeTabIndex!==this.prevActiveTabIndex&&(this.activeid=this.tabIds[this.activeTabIndex],this.focusTab(),this.change())}isHorizontal(){return this.orientation===go}handleActiveIndicatorPosition(){this.showActiveIndicator&&this.activeindicator&&this.activeTabIndex!==this.prevActiveTabIndex&&(this.ticking?this.ticking=!1:(this.ticking=!0,this.animateActiveIndicator()))}animateActiveIndicator(){this.ticking=!0;const e=this.isHorizontal()?"gridColumn":"gridRow",t=this.isHorizontal()?"translateX":"translateY",n=this.isHorizontal()?"offsetLeft":"offsetTop",i=this.activeIndicatorRef[n];this.activeIndicatorRef.style[e]=`${this.activeTabIndex+1}`;const r=this.activeIndicatorRef[n];this.activeIndicatorRef.style[e]=`${this.prevActiveTabIndex+1}`;const o=r-i;this.activeIndicatorRef.style.transform=`${t}(${o}px)`,this.activeIndicatorRef.classList.add("activeIndicatorTransition"),this.activeIndicatorRef.addEventListener("transitionend",(()=>{this.ticking=!1,this.activeIndicatorRef.style[e]=`${this.activeTabIndex+1}`,this.activeIndicatorRef.style.transform=`${t}(0px)`,this.activeIndicatorRef.classList.remove("activeIndicatorTransition")}))}adjust(e){const t=this.tabs.filter((e=>this.isFocusableElement(e))),n=t.indexOf(this.activetab),i=function(e,t,n){return Math.min(Math.max(n,e),t)}(0,t.length-1,n+e),r=this.tabs.indexOf(t[i]);r>-1&&this.moveToTabByIndex(this.tabs,r)}focusTab(){this.tabs[this.activeTabIndex].focus()}connectedCallback(){super.connectedCallback(),this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.activeTabIndex=this.getActiveIndex()}}Z([G],vo.prototype,"orientation",void 0),Z([G],vo.prototype,"activeid",void 0),Z([R],vo.prototype,"tabs",void 0),Z([R],vo.prototype,"tabpanels",void 0),Z([G({mode:"boolean"})],vo.prototype,"activeindicator",void 0),Z([R],vo.prototype,"activeIndicatorRef",void 0),Z([R],vo.prototype,"showActiveIndicator",void 0),mi(vo,hi);class bo extends qe{}Z([G({mode:"boolean"})],bo.prototype,"disabled",void 0);class yo extends qe{}const xo=class extends vo{connectedCallback(){super.connectedCallback(),this.orientation&&(this.orientation=go);this.getAttribute("aria-label")||this.setAttribute("aria-label","Panels")}}.compose({baseName:"panels",template:(e,t)=>Pt`
    <template class="${e=>e.orientation}">
        ${fi(0,t)}
        <div class="tablist" part="tablist" role="tablist">
            <slot class="tab" name="tab" part="tab" ${$i("tabs")}></slot>

            ${co((e=>e.showActiveIndicator),Pt`
                    <div
                        ${ui("activeIndicatorRef")}
                        class="activeIndicator"
                        part="activeIndicator"
                    ></div>
                `)}
        </div>
        ${pi(0,t)}
        <div class="tabpanel" part="tabpanel">
            <slot name="tabpanel" ${$i("tabpanels")}></slot>
        </div>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("grid")} :host {
		box-sizing: border-box;
		font-family: ${hn};
		font-size: ${gn};
		line-height: ${vn};
		color: ${pn};
		grid-template-columns: auto 1fr auto;
		grid-template-rows: auto 1fr;
		overflow-x: auto;
	}
	.tablist {
		display: grid;
		grid-template-rows: auto auto;
		grid-template-columns: auto;
		column-gap: calc(${cn} * 8px);
		position: relative;
		width: max-content;
		align-self: end;
		padding: calc(${cn} * 1px) calc(${cn} * 1px) 0;
		box-sizing: border-box;
	}
	.start,
	.end {
		align-self: center;
	}
	.activeIndicator {
		grid-row: 2;
		grid-column: 1;
		width: 100%;
		height: calc((${cn} / 4) * 1px);
		justify-self: center;
		background: ${ii};
		margin: 0;
		border-radius: calc(${an} * 1px);
	}
	.activeIndicatorTransition {
		transition: transform 0.01s linear;
	}
	.tabpanel {
		grid-row: 2;
		grid-column-start: 1;
		grid-column-end: 4;
		position: relative;
	}
`});const ko=class extends bo{connectedCallback(){super.connectedCallback(),this.disabled&&(this.disabled=!1),this.textContent&&this.setAttribute("aria-label",this.textContent)}}.compose({baseName:"panel-tab",template:(e,t)=>Pt`
    <template slot="tab" role="tab" aria-disabled="${e=>e.disabled}">
        <slot></slot>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		box-sizing: border-box;
		font-family: ${hn};
		font-size: ${gn};
		line-height: ${vn};
		height: calc(${cn} * 7px);
		padding: calc(${cn} * 1px) 0;
		color: ${ri};
		fill: currentcolor;
		border-radius: calc(${an} * 1px);
		border: solid calc(${on} * 1px) transparent;
		align-items: center;
		justify-content: center;
		grid-row: 1;
		cursor: pointer;
	}
	:host(:hover) {
		color: ${ii};
		fill: currentcolor;
	}
	:host(:active) {
		color: ${ii};
		fill: currentcolor;
	}
	:host([aria-selected='true']) {
		background: transparent;
		color: ${ii};
		fill: currentcolor;
	}
	:host([aria-selected='true']:hover) {
		background: transparent;
		color: ${ii};
		fill: currentcolor;
	}
	:host([aria-selected='true']:active) {
		background: transparent;
		color: ${ii};
		fill: currentcolor;
	}
	:host(:${Hi}) {
		outline: none;
		border: solid calc(${on} * 1px) ${ni};
	}
	:host(:focus) {
		outline: none;
	}
	::slotted(vscode-badge) {
		margin-inline-start: calc(${cn} * 2px);
	}
`});const wo=class extends yo{}.compose({baseName:"panel-view",template:(e,t)=>Pt`
    <template slot="tabpanel" role="tabpanel">
        <slot></slot>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("flex")} :host {
		color: inherit;
		background-color: transparent;
		border: solid calc(${on} * 1px) transparent;
		box-sizing: border-box;
		font-size: ${gn};
		line-height: ${vn};
		padding: 10px calc((${cn} + 2) * 1px);
	}
`});class Co extends qe{constructor(){super(...arguments),this.percentComplete=0}valueChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}minChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}maxChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}connectedCallback(){super.connectedCallback(),this.updatePercentComplete()}updatePercentComplete(){const e="number"===typeof this.min?this.min:0,t="number"===typeof this.max?this.max:100,n="number"===typeof this.value?this.value:0,i=t-e;this.percentComplete=0===i?0:Math.fround((n-e)/i*100)}}Z([G({converter:q})],Co.prototype,"value",void 0),Z([G({converter:q})],Co.prototype,"min",void 0),Z([G({converter:q})],Co.prototype,"max",void 0),Z([G({mode:"boolean"})],Co.prototype,"paused",void 0),Z([R],Co.prototype,"percentComplete",void 0);const So=class extends Co{connectedCallback(){super.connectedCallback(),this.paused&&(this.paused=!1),this.setAttribute("aria-label","Loading"),this.setAttribute("aria-live","assertive"),this.setAttribute("role","alert")}attributeChangedCallback(e,t,n){"value"===e&&this.removeAttribute("value")}}.compose({baseName:"progress-ring",template:(e,t)=>Pt`
    <template
        role="progressbar"
        aria-valuenow="${e=>e.value}"
        aria-valuemin="${e=>e.min}"
        aria-valuemax="${e=>e.max}"
        class="${e=>e.paused?"paused":""}"
    >
        ${co((e=>"number"===typeof e.value),Pt`
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${e=>44*e.percentComplete/100}px ${44}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `,Pt`
                <slot name="indeterminate" slot="indeterminate">
                    ${t.indeterminateIndicator||""}
                </slot>
            `)}
    </template>
`,styles:(e,t)=>Ot`
	${Nt("flex")} :host {
		align-items: center;
		outline: none;
		height: calc(${cn} * 7px);
		width: calc(${cn} * 7px);
		margin: 0;
	}
	.progress {
		height: 100%;
		width: 100%;
	}
	.background {
		fill: none;
		stroke: transparent;
		stroke-width: calc(${cn} / 2 * 1px);
	}
	.indeterminate-indicator-1 {
		fill: none;
		stroke: ${ti};
		stroke-width: calc(${cn} / 2 * 1px);
		stroke-linecap: square;
		transform-origin: 50% 50%;
		transform: rotate(-90deg);
		transition: all 0.2s ease-in-out;
		animation: spin-infinite 2s linear infinite;
	}
	@keyframes spin-infinite {
		0% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(0deg);
		}
		50% {
			stroke-dasharray: 21.99px 21.99px;
			transform: rotate(450deg);
		}
		100% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(1080deg);
		}
	}
`,indeterminateIndicator:'\n\t\t<svg class="progress" part="progress" viewBox="0 0 16 16">\n\t\t\t<circle\n\t\t\t\tclass="background"\n\t\t\t\tpart="background"\n\t\t\t\tcx="8px"\n\t\t\t\tcy="8px"\n\t\t\t\tr="7px"\n\t\t\t></circle>\n\t\t\t<circle\n\t\t\t\tclass="indeterminate-indicator-1"\n\t\t\t\tpart="indeterminate-indicator-1"\n\t\t\t\tcx="8px"\n\t\t\t\tcy="8px"\n\t\t\t\tr="7px"\n\t\t\t></circle>\n\t\t</svg>\n\t'});class To extends qe{}class Eo extends(Oi(To)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class _o extends Eo{constructor(){super(),this.initialValue="on",this.keypressHandler=e=>{if(e.key!==Ti)return!0;this.checked||this.readOnly||(this.checked=!0)},this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){var e;this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=null!==(e=this.defaultChecked)&&void 0!==e&&e,this.dirtyChecked=!1))}connectedCallback(){var e,t;super.connectedCallback(),this.validate(),"radiogroup"!==(null===(e=this.parentElement)||void 0===e?void 0:e.getAttribute("role"))&&null===this.getAttribute("tabindex")&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=null!==(t=this.defaultChecked)&&void 0!==t&&t,this.dirtyChecked=!1))}isInsideRadioGroup(){return null!==this.closest("[role=radiogroup]")}clickHandler(e){this.disabled||this.readOnly||this.checked||(this.checked=!0)}}Z([G({attribute:"readonly",mode:"boolean"})],_o.prototype,"readOnly",void 0),Z([R],_o.prototype,"name",void 0),Z([R],_o.prototype,"defaultSlottedNodes",void 0);const Io=class extends _o{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Radio")}}.compose({baseName:"radio",template:(e,t)=>Pt`
    <template
        role="radio"
        class="${e=>e.checked?"checked":""} ${e=>e.readOnly?"readonly":""}"
        aria-checked="${e=>e.checked}"
        aria-required="${e=>e.required}"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @keypress="${(e,t)=>e.keypressHandler(t.event)}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${t.checkedIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${$i("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-flex")} :host {
		align-items: center;
		flex-direction: row;
		font-size: ${gn};
		line-height: ${vn};
		margin: calc(${cn} * 1px) 0;
		outline: none;
		position: relative;
		transition: all 0.2s ease-in-out;
		user-select: none;
	}
	.control {
		background: ${$n};
		border-radius: 999px;
		border: calc(${on} * 1px) solid ${zn};
		box-sizing: border-box;
		cursor: pointer;
		height: calc(${cn} * 4px);
		position: relative;
		outline: none;
		width: calc(${cn} * 4px);
	}
	.label {
		color: ${pn};
		cursor: pointer;
		font-family: ${hn};
		margin-inline-end: calc(${cn} * 2px + 2px);
		padding-inline-start: calc(${cn} * 2px + 2px);
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.control,
	.checked-indicator {
		flex-shrink: 0;
	}
	.checked-indicator {
		background: ${pn};
		border-radius: 999px;
		display: inline-block;
		inset: calc(${cn} * 1px);
		opacity: 0;
		pointer-events: none;
		position: absolute;
	}
	:host(:not([disabled])) .control:hover {
		background: ${$n};
		border-color: ${zn};
	}
	:host(:not([disabled])) .control:active {
		background: ${$n};
		border-color: ${un};
	}
	:host(:${Hi}) .control {
		border: calc(${on} * 1px) solid ${un};
	}
	:host([aria-checked='true']) .control {
		background: ${$n};
		border: calc(${on} * 1px) solid ${zn};
	}
	:host([aria-checked='true']:not([disabled])) .control:hover {
		background: ${$n};
		border: calc(${on} * 1px) solid ${zn};
	}
	:host([aria-checked='true']:not([disabled])) .control:active {
		background: ${$n};
		border: calc(${on} * 1px) solid ${un};
	}
	:host([aria-checked="true"]:${Hi}:not([disabled])) .control {
		border: calc(${on} * 1px) solid ${un};
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${Wi};
	}
	:host([aria-checked='true']) .checked-indicator {
		opacity: 1;
	}
	:host([disabled]) {
		opacity: ${dn};
	}
`,checkedIndicator:'\n\t\t<div part="checked-indicator" class="checked-indicator"></div>\n\t'});var Po;!function(e){e.ltr="ltr",e.rtl="rtl"}(Po||(Po={}));class Ro extends qe{constructor(){super(...arguments),this.orientation=$r,this.radioChangeHandler=e=>{const t=e.target;t.checked&&(this.slottedRadioButtons.forEach((e=>{e!==t&&(e.checked=!1,this.isInsideFoundationToolbar||e.setAttribute("tabindex","-1"))})),this.selectedRadio=t,this.value=t.value,t.setAttribute("tabindex","0"),this.focusedRadio=t),e.stopPropagation()},this.moveToRadioByIndex=(e,t)=>{const n=e[t];this.isInsideToolbar||(n.setAttribute("tabindex","0"),n.readOnly?this.slottedRadioButtons.forEach((e=>{e!==n&&e.setAttribute("tabindex","-1")})):(n.checked=!0,this.selectedRadio=n)),this.focusedRadio=n,n.focus()},this.moveRightOffGroup=()=>{var e;null===(e=this.nextElementSibling)||void 0===e||e.focus()},this.moveLeftOffGroup=()=>{var e;null===(e=this.previousElementSibling)||void 0===e||e.focus()},this.focusOutHandler=e=>{const t=this.slottedRadioButtons,n=e.target,i=null!==n?t.indexOf(n):0,r=this.focusedRadio?t.indexOf(this.focusedRadio):-1;return(0===r&&i===r||r===t.length-1&&r===i)&&(this.selectedRadio?(this.focusedRadio=this.selectedRadio,this.isInsideFoundationToolbar||(this.selectedRadio.setAttribute("tabindex","0"),t.forEach((e=>{e!==this.selectedRadio&&e.setAttribute("tabindex","-1")})))):(this.focusedRadio=t[0],this.focusedRadio.setAttribute("tabindex","0"),t.forEach((e=>{e!==this.focusedRadio&&e.setAttribute("tabindex","-1")})))),!0},this.clickHandler=e=>{const t=e.target;if(t){const e=this.slottedRadioButtons;t.checked||0===e.indexOf(t)?(t.setAttribute("tabindex","0"),this.selectedRadio=t):(t.setAttribute("tabindex","-1"),this.selectedRadio=null),this.focusedRadio=t}e.preventDefault()},this.shouldMoveOffGroupToTheRight=(e,t,n)=>e===t.length&&this.isInsideToolbar&&n===yi,this.shouldMoveOffGroupToTheLeft=(e,t)=>(this.focusedRadio?e.indexOf(this.focusedRadio)-1:0)<0&&this.isInsideToolbar&&t===bi,this.checkFocusedRadio=()=>{null===this.focusedRadio||this.focusedRadio.readOnly||this.focusedRadio.checked||(this.focusedRadio.checked=!0,this.focusedRadio.setAttribute("tabindex","0"),this.focusedRadio.focus(),this.selectedRadio=this.focusedRadio)},this.moveRight=e=>{const t=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?t.indexOf(this.focusedRadio)+1:1,this.shouldMoveOffGroupToTheRight(n,t,e.key))this.moveRightOffGroup();else for(n===t.length&&(n=0);n<t.length&&t.length>1;){if(!t[n].disabled){this.moveToRadioByIndex(t,n);break}if(this.focusedRadio&&n===t.indexOf(this.focusedRadio))break;if(n+1>=t.length){if(this.isInsideToolbar)break;n=0}else n+=1}},this.moveLeft=e=>{const t=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?t.indexOf(this.focusedRadio)-1:0,n=n<0?t.length-1:n,this.shouldMoveOffGroupToTheLeft(t,e.key))this.moveLeftOffGroup();else for(;n>=0&&t.length>1;){if(!t[n].disabled){this.moveToRadioByIndex(t,n);break}if(this.focusedRadio&&n===t.indexOf(this.focusedRadio))break;n-1<0?n=t.length-1:n-=1}},this.keydownHandler=e=>{const t=e.key;if(t in _i&&this.isInsideFoundationToolbar)return!0;switch(t){case ki:this.checkFocusedRadio();break;case yi:case vi:this.direction===Po.ltr?this.moveRight(e):this.moveLeft(e);break;case bi:case xi:this.direction===Po.ltr?this.moveLeft(e):this.moveRight(e);break;default:return!0}}}readOnlyChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{this.readOnly?e.readOnly=!0:e.readOnly=!1}))}disabledChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{this.disabled?e.disabled=!0:e.disabled=!1}))}nameChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{e.setAttribute("name",this.name)}))}valueChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{e.value===this.value&&(e.checked=!0,this.selectedRadio=e)})),this.$emit("change")}slottedRadioButtonsChanged(e,t){this.slottedRadioButtons&&this.slottedRadioButtons.length>0&&this.setupRadioButtons()}get parentToolbar(){return this.closest('[role="toolbar"]')}get isInsideToolbar(){var e;return null!==(e=this.parentToolbar)&&void 0!==e&&e}get isInsideFoundationToolbar(){var e;return!!(null===(e=this.parentToolbar)||void 0===e?void 0:e.$fastController)}connectedCallback(){super.connectedCallback(),this.direction=(e=>{const t=e.closest("[dir]");return null!==t&&"rtl"===t.dir?Po.rtl:Po.ltr})(this),this.setupRadioButtons()}disconnectedCallback(){this.slottedRadioButtons.forEach((e=>{e.removeEventListener("change",this.radioChangeHandler)}))}setupRadioButtons(){const e=this.slottedRadioButtons.filter((e=>e.hasAttribute("checked"))),t=e?e.length:0;if(t>1){e[t-1].checked=!0}let n=!1;if(this.slottedRadioButtons.forEach((e=>{void 0!==this.name&&e.setAttribute("name",this.name),this.disabled&&(e.disabled=!0),this.readOnly&&(e.readOnly=!0),this.value&&this.value===e.value?(this.selectedRadio=e,this.focusedRadio=e,e.checked=!0,e.setAttribute("tabindex","0"),n=!0):(this.isInsideFoundationToolbar||e.setAttribute("tabindex","-1"),e.checked=!1),e.addEventListener("change",this.radioChangeHandler)})),void 0===this.value&&this.slottedRadioButtons.length>0){const e=this.slottedRadioButtons.filter((e=>e.hasAttribute("checked"))),t=null!==e?e.length:0;if(t>0&&!n){const n=e[t-1];n.checked=!0,this.focusedRadio=n,n.setAttribute("tabindex","0")}else this.slottedRadioButtons[0].setAttribute("tabindex","0"),this.focusedRadio=this.slottedRadioButtons[0]}}}Z([G({attribute:"readonly",mode:"boolean"})],Ro.prototype,"readOnly",void 0),Z([G({attribute:"disabled",mode:"boolean"})],Ro.prototype,"disabled",void 0),Z([G],Ro.prototype,"name",void 0),Z([G],Ro.prototype,"value",void 0),Z([G],Ro.prototype,"orientation",void 0),Z([R],Ro.prototype,"childItems",void 0),Z([R],Ro.prototype,"slottedRadioButtons",void 0);const Ao=class extends Ro{connectedCallback(){super.connectedCallback();const e=this.querySelector("label");if(e){const t="radio-group-"+Math.random().toString(16).slice(2);e.setAttribute("id",t),this.setAttribute("aria-labelledby",t)}}}.compose({baseName:"radio-group",template:(e,t)=>Pt`
    <template
        role="radiogroup"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        @keydown="${(e,t)=>e.keydownHandler(t.event)}"
        @focusout="${(e,t)=>e.focusOutHandler(t.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${e=>e.orientation===$r?"horizontal":"vertical"}"
            part="positioning-region"
        >
            <slot
                ${$i({property:"slottedRadioButtons",filter:Fi("[role=radio]")})}
            ></slot>
        </div>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("flex")} :host {
		align-items: flex-start;
		margin: calc(${cn} * 1px) 0;
		flex-direction: column;
	}
	.positioning-region {
		display: flex;
		flex-wrap: wrap;
	}
	:host([orientation='vertical']) .positioning-region {
		flex-direction: column;
	}
	:host([orientation='horizontal']) .positioning-region {
		flex-direction: row;
	}
	::slotted([slot='label']) {
		color: ${pn};
		font-size: ${gn};
		margin: calc(${cn} * 1px) 0;
	}
`});const Mo=class extends nt{connectedCallback(){super.connectedCallback(),this.circular&&(this.circular=!1)}}.compose({baseName:"tag",template:Rt,styles:(e,t)=>Ot`
	${Nt("inline-block")} :host {
		box-sizing: border-box;
		font-family: ${hn};
		font-size: ${bn};
		line-height: ${yn};
	}
	.control {
		background-color: ${Tn};
		border: calc(${on} * 1px) solid ${_n};
		border-radius: ${oi};
		color: ${En};
		padding: calc(${cn} * 0.5px) calc(${cn} * 1px);
		text-transform: uppercase;
	}
`});class Oo extends qe{}class No extends(Mi(Oo)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}const jo="text";class Do extends No{constructor(){super(...arguments),this.type=jo}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly,this.validate())}autofocusChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.autofocus=this.autofocus,this.validate())}placeholderChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.placeholder=this.placeholder)}typeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type,this.validate())}listChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.setAttribute("list",this.list),this.validate())}maxlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.maxLength=this.maxlength,this.validate())}minlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.minLength=this.minlength,this.validate())}patternChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.pattern=this.pattern,this.validate())}sizeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.size=this.size)}spellcheckChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.spellcheck=this.spellcheck)}connectedCallback(){super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.validate(),this.autofocus&&E.queueUpdate((()=>{this.focus()}))}select(){this.control.select(),this.$emit("select")}handleTextInput(){this.value=this.control.value}handleChange(){this.$emit("change")}validate(){super.validate(this.control)}}Z([G({attribute:"readonly",mode:"boolean"})],Do.prototype,"readOnly",void 0),Z([G({mode:"boolean"})],Do.prototype,"autofocus",void 0),Z([G],Do.prototype,"placeholder",void 0),Z([G],Do.prototype,"type",void 0),Z([G],Do.prototype,"list",void 0),Z([G({converter:q})],Do.prototype,"maxlength",void 0),Z([G({converter:q})],Do.prototype,"minlength",void 0),Z([G],Do.prototype,"pattern",void 0),Z([G({converter:q})],Do.prototype,"size",void 0),Z([G({mode:"boolean"})],Do.prototype,"spellcheck",void 0),Z([R],Do.prototype,"defaultSlottedNodes",void 0);class Lo{}mi(Lo,ci),mi(Do,hi,Lo);class Fo extends qe{}class Bo extends(Mi(Fo)){constructor(){super(...arguments),this.proxy=document.createElement("textarea")}}const Uo="none";class $o extends Bo{constructor(){super(...arguments),this.resize=Uo,this.cols=20,this.handleTextInput=()=>{this.value=this.control.value}}readOnlyChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.readOnly=this.readOnly)}autofocusChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.autofocus=this.autofocus)}listChanged(){this.proxy instanceof HTMLTextAreaElement&&this.proxy.setAttribute("list",this.list)}maxlengthChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.maxLength=this.maxlength)}minlengthChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.minLength=this.minlength)}spellcheckChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.spellcheck=this.spellcheck)}select(){this.control.select(),this.$emit("select")}handleChange(){this.$emit("change")}validate(){super.validate(this.control)}}Z([G({mode:"boolean"})],$o.prototype,"readOnly",void 0),Z([G],$o.prototype,"resize",void 0),Z([G({mode:"boolean"})],$o.prototype,"autofocus",void 0),Z([G({attribute:"form"})],$o.prototype,"formId",void 0),Z([G],$o.prototype,"list",void 0),Z([G({converter:q})],$o.prototype,"maxlength",void 0),Z([G({converter:q})],$o.prototype,"minlength",void 0),Z([G],$o.prototype,"name",void 0),Z([G],$o.prototype,"placeholder",void 0),Z([G({converter:q,mode:"fromView"})],$o.prototype,"cols",void 0),Z([G({converter:q,mode:"fromView"})],$o.prototype,"rows",void 0),Z([G({mode:"boolean"})],$o.prototype,"spellcheck",void 0),Z([R],$o.prototype,"defaultSlottedNodes",void 0),mi($o,Lo);const zo=class extends $o{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Text area")}}.compose({baseName:"text-area",template:(e,t)=>Pt`
    <template
        class="
            ${e=>e.readOnly?"readonly":""}
            ${e=>e.resize!==Uo?`resize-${e.resize}`:""}"
    >
        <label
            part="label"
            for="control"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${$i("defaultSlottedNodes")}></slot>
        </label>
        <textarea
            part="control"
            class="control"
            id="control"
            ?autofocus="${e=>e.autofocus}"
            cols="${e=>e.cols}"
            ?disabled="${e=>e.disabled}"
            form="${e=>e.form}"
            list="${e=>e.list}"
            maxlength="${e=>e.maxlength}"
            minlength="${e=>e.minlength}"
            name="${e=>e.name}"
            placeholder="${e=>e.placeholder}"
            ?readonly="${e=>e.readOnly}"
            ?required="${e=>e.required}"
            rows="${e=>e.rows}"
            ?spellcheck="${e=>e.spellcheck}"
            :value="${e=>e.value}"
            aria-atomic="${e=>e.ariaAtomic}"
            aria-busy="${e=>e.ariaBusy}"
            aria-controls="${e=>e.ariaControls}"
            aria-current="${e=>e.ariaCurrent}"
            aria-describedby="${e=>e.ariaDescribedby}"
            aria-details="${e=>e.ariaDetails}"
            aria-disabled="${e=>e.ariaDisabled}"
            aria-errormessage="${e=>e.ariaErrormessage}"
            aria-flowto="${e=>e.ariaFlowto}"
            aria-haspopup="${e=>e.ariaHaspopup}"
            aria-hidden="${e=>e.ariaHidden}"
            aria-invalid="${e=>e.ariaInvalid}"
            aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
            aria-label="${e=>e.ariaLabel}"
            aria-labelledby="${e=>e.ariaLabelledby}"
            aria-live="${e=>e.ariaLive}"
            aria-owns="${e=>e.ariaOwns}"
            aria-relevant="${e=>e.ariaRelevant}"
            aria-roledescription="${e=>e.ariaRoledescription}"
            @input="${(e,t)=>e.handleTextInput()}"
            @change="${e=>e.handleChange()}"
            ${ui("control")}
        ></textarea>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-block")} :host {
		font-family: ${hn};
		outline: none;
		user-select: none;
	}
	.control {
		box-sizing: border-box;
		position: relative;
		color: ${Jn};
		background: ${Xn};
		border-radius: calc(${ln} * 1px);
		border: calc(${on} * 1px) solid ${Yn};
		font: inherit;
		font-size: ${gn};
		line-height: ${vn};
		padding: calc(${cn} * 2px + 1px);
		width: 100%;
		min-width: ${mn};
		resize: none;
	}
	.control:hover:enabled {
		background: ${Xn};
		border-color: ${Yn};
	}
	.control:active:enabled {
		background: ${Xn};
		border-color: ${un};
	}
	.control:hover,
	.control:${Hi},
	.control:disabled,
	.control:active {
		outline: none;
	}
	.control::-webkit-scrollbar {
		width: ${xn};
		height: ${kn};
	}
	.control::-webkit-scrollbar-corner {
		background: ${Xn};
	}
	.control::-webkit-scrollbar-thumb {
		background: ${wn};
	}
	.control::-webkit-scrollbar-thumb:hover {
		background: ${Cn};
	}
	.control::-webkit-scrollbar-thumb:active {
		background: ${Sn};
	}
	:host(:focus-within:not([disabled])) .control {
		border-color: ${un};
	}
	:host([resize='both']) .control {
		resize: both;
	}
	:host([resize='horizontal']) .control {
		resize: horizontal;
	}
	:host([resize='vertical']) .control {
		resize: vertical;
	}
	.label {
		display: block;
		color: ${pn};
		cursor: pointer;
		font-size: ${gn};
		line-height: ${vn};
		margin-bottom: 2px;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${Wi};
	}
	:host([disabled]) {
		opacity: ${dn};
	}
	:host([disabled]) .control {
		border-color: ${Yn};
	}
`,shadowOptions:{delegatesFocus:!0}});function Vo(e,t,n){return e.nodeType!==Node.TEXT_NODE||"string"===typeof e.nodeValue&&!!e.nodeValue.trim().length}const Ho=class extends Do{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Text field")}}.compose({baseName:"text-field",template:(e,t)=>Pt`
    <template
        class="
            ${e=>e.readOnly?"readonly":""}
        "
    >
        <label
            part="label"
            for="control"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot
                ${$i({property:"defaultSlottedNodes",filter:Vo})}
            ></slot>
        </label>
        <div class="root" part="root">
            ${fi(0,t)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${e=>e.handleTextInput()}"
                @change="${e=>e.handleChange()}"
                ?autofocus="${e=>e.autofocus}"
                ?disabled="${e=>e.disabled}"
                list="${e=>e.list}"
                maxlength="${e=>e.maxlength}"
                minlength="${e=>e.minlength}"
                pattern="${e=>e.pattern}"
                placeholder="${e=>e.placeholder}"
                ?readonly="${e=>e.readOnly}"
                ?required="${e=>e.required}"
                size="${e=>e.size}"
                ?spellcheck="${e=>e.spellcheck}"
                :value="${e=>e.value}"
                type="${e=>e.type}"
                aria-atomic="${e=>e.ariaAtomic}"
                aria-busy="${e=>e.ariaBusy}"
                aria-controls="${e=>e.ariaControls}"
                aria-current="${e=>e.ariaCurrent}"
                aria-describedby="${e=>e.ariaDescribedby}"
                aria-details="${e=>e.ariaDetails}"
                aria-disabled="${e=>e.ariaDisabled}"
                aria-errormessage="${e=>e.ariaErrormessage}"
                aria-flowto="${e=>e.ariaFlowto}"
                aria-haspopup="${e=>e.ariaHaspopup}"
                aria-hidden="${e=>e.ariaHidden}"
                aria-invalid="${e=>e.ariaInvalid}"
                aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
                aria-label="${e=>e.ariaLabel}"
                aria-labelledby="${e=>e.ariaLabelledby}"
                aria-live="${e=>e.ariaLive}"
                aria-owns="${e=>e.ariaOwns}"
                aria-relevant="${e=>e.ariaRelevant}"
                aria-roledescription="${e=>e.ariaRoledescription}"
                ${ui("control")}
            />
            ${pi(0,t)}
        </div>
    </template>
`,styles:(e,t)=>Ot`
	${Nt("inline-block")} :host {
		font-family: ${hn};
		outline: none;
		user-select: none;
	}
	.root {
		box-sizing: border-box;
		position: relative;
		display: flex;
		flex-direction: row;
		color: ${Jn};
		background: ${Xn};
		border-radius: calc(${ln} * 1px);
		border: calc(${on} * 1px) solid ${Yn};
		height: calc(${fn} * 1px);
		min-width: ${mn};
	}
	.control {
		-webkit-appearance: none;
		font: inherit;
		background: transparent;
		border: 0;
		color: inherit;
		height: calc(100% - (${cn} * 1px));
		width: 100%;
		margin-top: auto;
		margin-bottom: auto;
		border: none;
		padding: 0 calc(${cn} * 2px + 1px);
		font-size: ${gn};
		line-height: ${vn};
	}
	.control:hover,
	.control:${Hi},
	.control:disabled,
	.control:active {
		outline: none;
	}
	.label {
		display: block;
		color: ${pn};
		cursor: pointer;
		font-size: ${gn};
		line-height: ${vn};
		margin-bottom: 2px;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.start,
	.end {
		display: flex;
		margin: auto;
		fill: currentcolor;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${cn} * 4px);
		height: calc(${cn} * 4px);
	}
	.start {
		margin-inline-start: calc(${cn} * 2px);
	}
	.end {
		margin-inline-end: calc(${cn} * 2px);
	}
	:host(:hover:not([disabled])) .root {
		background: ${Xn};
		border-color: ${Yn};
	}
	:host(:active:not([disabled])) .root {
		background: ${Xn};
		border-color: ${un};
	}
	:host(:focus-within:not([disabled])) .root {
		border-color: ${un};
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${Wi};
	}
	:host([disabled]) {
		opacity: ${dn};
	}
	:host([disabled]) .control {
		border-color: ${Yn};
	}
`,shadowOptions:{delegatesFocus:!0}}),Wo=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),qo=new Map,Ko=new Map;let Go=null;const Yo=fe.createInterface((e=>e.cachedCallback((e=>(null===Go&&(Go=new Xo(null,e)),Go))))),Qo=Object.freeze({tagFor:e=>Ko.get(e),responsibleFor(e){const t=e.$$designSystem$$;if(t)return t;return fe.findResponsibleContainer(e).get(Yo)},getOrCreate(e){if(!e)return null===Go&&(Go=fe.getOrCreateDOMContainer().get(Yo)),Go;const t=e.$$designSystem$$;if(t)return t;const n=fe.getOrCreateDOMContainer(e);if(n.has(Yo,!1))return n.get(Yo);{const t=new Xo(e,n);return n.register(Ne.instance(Yo,t)),t}}});class Xo{constructor(e,t){this.owner=e,this.container=t,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>Wo.definitionCallbackOnly,null!==e&&(e.$$designSystem$$=this)}withPrefix(e){return this.prefix=e,this}withShadowRootMode(e){return this.shadowRootMode=e,this}withElementDisambiguation(e){return this.disambiguate=e,this}withDesignTokenRoot(e){return this.designTokenRoot=e,this}register(){const e=this.container,t=[],n=this.disambiguate,i=this.shadowRootMode,r={elementPrefix:this.prefix,tryDefineElement(r,o,s){const a=function(e,t,n){return"string"===typeof e?{name:e,type:t,callback:n}:e}(r,o,s),{name:l,callback:c,baseClass:d}=a;let{type:u}=a,h=l,p=qo.get(h),f=!0;for(;p;){const e=n(h,u,p);switch(e){case Wo.ignoreDuplicate:return;case Wo.definitionCallbackOnly:f=!1,p=void 0;break;default:h=e,p=qo.get(h)}}f&&((Ko.has(u)||u===qe)&&(u=class extends u{}),qo.set(h,u),Ko.set(u,h),d&&Ko.set(d,h)),t.push(new Jo(e,h,u,i,c,f))}};this.designTokensInitialized||(this.designTokensInitialized=!0,null!==this.designTokenRoot&&Jt.registerRoot(this.designTokenRoot));for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];e.registerWithContext(r,...s);for(const l of t)l.callback(l),l.willDefine&&null!==l.definition&&l.definition.define();return this}}class Jo{constructor(e,t,n,i,r,o){this.container=e,this.name=t,this.type=n,this.shadowRootMode=i,this.callback=r,this.willDefine=o,this.definition=null}definePresentation(e){He.define(this.name,e,this.container)}defineElement(e){this.definition=new J(this.type,Object.assign(Object.assign({},e),{name:this.name}))}tagFor(e){return Qo.tagFor(e)}}const{wrap:Zo}=function(e,t){let n=[];return{wrap:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o,s;i instanceof Ge&&(t?t.register(i):n.push(i),i=i.type);const a=Je.get(i);if(a){const e=a.get(null!==(o=r.name)&&void 0!==o?o:Xe);if(e)return e}class l extends e.Component{constructor(){super(...arguments),this._element=null}_updateElement(e){const t=this._element;if(null===t)return;const n=this.props,i=e||Qe,o=et(r);for(const r in this._elementProps){const e=n[r],s=o[r];if(void 0===s)t[r]=e;else{const n=i[r];if(e===n)continue;void 0!==n&&t.removeEventListener(s,n),void 0!==e&&t.addEventListener(s,e)}}}componentDidMount(){this._updateElement()}componentDidUpdate(e){this._updateElement(e)}render(){const t=this.props.__forwardedRef;void 0!==this._ref&&this._userRef===t||(this._ref=e=>{null===this._element&&(this._element=e),null!==t&&function(e,t){"function"===typeof e?e(t):e.current=t}(t,e),this._userRef=t});const n={ref:this._ref},o=this._elementProps={},s=function(e,t){if(!t.keys)if(t.properties)t.keys=new Set(t.properties.concat(Object.keys(et(t))));else{const n=new Set(Object.keys(et(t))),i=P.getAccessors(e.prototype);if(i.length>0)for(const r of i)tt(e,t,r.name)&&n.add(r.name);else for(const r in e.prototype)!(r in HTMLElement.prototype)&&tt(e,t,r)&&n.add(r);t.keys=n}return t.keys}(i,r),a=this.props;for(const e in a){const t=a[e];s.has(e)?o[e]=t:n["className"===e?"class":e]=t}return e.createElement(Ze(i,r),n)}}const c=e.forwardRef(((t,n)=>e.createElement(l,Object.assign(Object.assign({},t),{__forwardedRef:n}),null===t||void 0===t?void 0:t.children)));return Je.has(i)||Je.set(i,new Map),Je.get(i).set(null!==(s=r.name)&&void 0!==s?s:Xe,c),c},registry:{register(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];n.forEach((t=>t.register(e,...i))),n=[]}}}}(t,Qo.getOrCreate(es).withPrefix("vscode"));var es;Zo(si(),{name:"vscode-badge"});const ts=Zo(Xi(),{name:"vscode-button"}),ns=Zo(tr(),{name:"vscode-checkbox",events:{onChange:"change"}}),is=(Zo(Fr(),{name:"vscode-data-grid"}),Zo(Ur(),{name:"vscode-data-grid-cell"}),Zo(Br(),{name:"vscode-data-grid-row"}),Zo(Hr(),{name:"vscode-divider"}),Zo(uo(),{name:"vscode-dropdown",events:{onChange:"change"}})),rs=Zo(fo(),{name:"vscode-link"}),os=Zo(mo(),{name:"vscode-option"}),ss=Zo(xo(),{name:"vscode-panels",events:{onChange:"change"}}),as=Zo(ko(),{name:"vscode-panel-tab"}),ls=Zo(wo(),{name:"vscode-panel-view"}),cs=Zo(So(),{name:"vscode-progress-ring"}),ds=Zo(Io(),{name:"vscode-radio",events:{onChange:"change"}}),us=Zo(Ao(),{name:"vscode-radio-group",events:{onChange:"change"}}),hs=(Zo(Mo(),{name:"vscode-tag"}),Zo(zo(),{name:"vscode-text-area",events:{onChange:"change",onInput:"input"}})),ps=Zo(Ho(),{name:"vscode-text-field",events:{onChange:"change",onInput:"input"}});var fs=n(4695),ms=n.n(fs);const gs=function(e,n,i){var r=(0,t.useRef)(void 0);r.current&&i(n,r.current)||(r.current=n),(0,t.useEffect)(e,r.current)};var vs=n(809);const bs=n.n(vs)();const ys=function(e,t){gs(e,t,bs)};const xs=function(e){(0,t.useEffect)(e,[])};const ks=function(e){xs((function(){e()}))};var ws=n(7950);const Cs=0,Ss=1,Ts=2,Es=4;function _s(e,t){return n=>e(t(n))}function Is(e,t){return t(e)}function Ps(e,t){return n=>e(t,n)}function Rs(e,t){return()=>e(t)}function As(e,t){return t(e),e}function Ms(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function Os(e){e()}function Ns(e){return()=>e}function js(e){return void 0!==e}function Ds(){}function Ls(e,t){return e(Ss,t)}function Fs(e,t){e(Cs,t)}function Bs(e){e(Ts)}function Us(e){return e(Es)}function $s(e,t){return Ls(e,Ps(t,Cs))}function zs(e,t){const n=e(Ss,(e=>{n(),t(e)}));return n}function Vs(){const e=[];return(t,n)=>{switch(t){case Ts:return void e.splice(0,e.length);case Ss:return e.push(n),()=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)};case Cs:return void e.slice().forEach((e=>{e(n)}));default:throw new Error(`unrecognized action ${t}`)}}}function Hs(e){let t=e;const n=Vs();return(e,i)=>{switch(e){case Ss:i(t);break;case Cs:t=i;break;case Es:return t}return n(e,i)}}function Ws(e){return As(Vs(),(t=>$s(e,t)))}function qs(e,t){return As(Hs(t),(t=>$s(e,t)))}function Ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduceRight(Is,e)}(...n);return(t,n)=>{switch(t){case Ss:return Ls(e,r(n));case Ts:return void Bs(e)}}}function Gs(e,t){return e===t}function Ys(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gs;return n=>i=>{t(e,i)||(e=i,n(i))}}function Qs(e){return t=>n=>{e(n)&&t(n)}}function Xs(e){return t=>_s(t,e)}function Js(e){return t=>()=>t(e)}function Zs(e,t){return n=>i=>n(t=e(t,i))}function ea(e){return t=>n=>{e>0?e--:t(n)}}function ta(e){let t,n=null;return i=>r=>{n=r,t||(t=setTimeout((()=>{t=void 0,i(n)}),e))}}function na(e){let t,n;return i=>r=>{t=r,n&&clearTimeout(n),n=setTimeout((()=>{i(t)}),e)}}function ia(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=new Array(t.length);let r=0,o=null;const s=Math.pow(2,t.length)-1;return t.forEach(((e,t)=>{const n=Math.pow(2,t);Ls(e,(e=>{const a=r;r|=n,i[t]=e,a!==s&&r===s&&o&&(o(),o=null)}))})),e=>t=>{const n=()=>e([t].concat(i));r===s?n():o=n}}function ra(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){switch(e){case Ss:return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{t.map(Os)}}(...t.map((e=>Ls(e,n))));case Ts:return;default:throw new Error(`unrecognized action ${e}`)}}}function oa(e){return Ks(e,Ys(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gs))}function sa(){const e=Vs();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const r=new Array(n.length);let o=0;const s=Math.pow(2,n.length)-1;return n.forEach(((t,n)=>{const i=Math.pow(2,n);Ls(t,(t=>{r[n]=t,o|=i,o===s&&Fs(e,r)}))})),function(t,n){switch(t){case Ss:return o===s&&n(r),Ls(e,n);case Ts:return Bs(e);default:throw new Error(`unrecognized action ${t}`)}}}function aa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{singleton:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{singleton:!0};return{id:la(),constructor:e,dependencies:t,singleton:n}}const la=()=>Symbol();const ca="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function da(e,n,i){const r=Object.keys(n.required||{}),o=Object.keys(n.optional||{}),s=Object.keys(n.methods||{}),a=Object.keys(n.events||{}),l=t.createContext({});function c(e,t){e.propsReady&&Fs(e.propsReady,!1);for(const i of r){Fs(e[n.required[i]],t[i])}for(const i of o)if(i in t){Fs(e[n.optional[i]],t[i])}e.propsReady&&Fs(e.propsReady,!0)}function d(e){return a.reduce(((t,i)=>(t[i]=function(e){let t,n;const i=()=>t&&t();return function(r,o){switch(r){case Ss:if(o){if(n===o)return;return i(),n=o,t=Ls(e,o),t}return i(),Ds;case Ts:return i(),void(n=null);default:throw new Error(`unrecognized action ${r}`)}}}(e[n.events[i]]),t)),{})}const u=t.forwardRef(((u,h)=>{const{children:p,...f}=u,[m]=t.useState((()=>As(function(e){const t=new Map,n=e=>{let{id:i,constructor:r,dependencies:o,singleton:s}=e;if(s&&t.has(i))return t.get(i);const a=r(o.map((e=>n(e))));return s&&t.set(i,a),a};return n(e)}(e),(e=>c(e,f))))),[g]=t.useState(Rs(d,m));return ca((()=>{for(const e of a)e in f&&Ls(g[e],f[e]);return()=>{Object.values(g).map(Bs)}}),[f,g,m]),ca((()=>{c(m,f)})),t.useImperativeHandle(h,Ns(function(e){return s.reduce(((t,i)=>(t[i]=t=>{Fs(e[n.methods[i]],t)},t)),{})}(m))),t.createElement(l.Provider,{value:m},i?t.createElement(i,function(e,t){const n={},i={};let r=0;const o=e.length;for(;r<o;)i[e[r]]=1,r+=1;for(const s in t)i.hasOwnProperty(s)||(n[s]=t[s]);return n}([...r,...o,...a],f),p):p)})),h=t.version.startsWith("18")?e=>{const n=t.useContext(l)[e],i=t.useCallback((e=>Ls(n,e)),[n]);return t.useSyncExternalStore(i,(()=>Us(n)),(()=>Us(n)))}:e=>{const n=t.useContext(l)[e],[i,r]=t.useState(Rs(Us,n));return ca((()=>Ls(n,(e=>{e!==i&&r(Ns(e))}))),[n,i]),i};return{Component:u,usePublisher:e=>t.useCallback(Ps(Fs,t.useContext(l)[e]),[e]),useEmitterValue:h,useEmitter:(e,n)=>{const i=t.useContext(l)[e];ca((()=>Ls(i,n)),[n,i])}}}const ua="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;var ha=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(ha||{});const pa={0:"debug",1:"log",2:"warn",3:"error"},fa=aa((()=>{const e=Hs(3);return{log:Hs((function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;var r;i>=(null!=(r=("undefined"===typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?r:Us(e))&&console[pa[i]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function ma(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=t.useRef(null);let r=e=>{};if("undefined"!==typeof ResizeObserver){const o=t.useMemo((()=>new ResizeObserver((t=>{requestAnimationFrame((()=>{const n=t[0].target;null!==n.offsetParent&&e(n)}))}))),[e]);r=e=>{e&&n?(o.observe(e),i.current=e):(i.current&&o.unobserve(i.current),i.current=null)}}return{ref:i,callbackRef:r}}function ga(e){return ma(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]).callbackRef}function va(e,n,i,r,o,s,a){const l=t.useCallback((t=>{const i=function(e,t,n,i){const r=e.length;if(0===r)return null;const o=[];for(let s=0;s<r;s++){const r=e.item(s);if(!r||void 0===r.dataset.index)continue;const a=parseInt(r.dataset.index),l=parseFloat(r.dataset.knownSize),c=t(r,n);if(0===c&&i("Zero-sized element, this should not happen",{child:r},ha.ERROR),c===l)continue;const d=o[o.length-1];0===o.length||d.size!==c||d.endIndex!==a-1?o.push({startIndex:a,endIndex:a,size:c}):o[o.length-1].endIndex++}return o}(t.children,n,"offsetHeight",o);let l=t.parentElement;for(;!l.dataset.virtuosoScroller;)l=l.parentElement;const c="window"===l.lastElementChild.dataset.viewportType,d=a?a.scrollTop:c?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop,u=a?a.scrollHeight:c?document.documentElement.scrollHeight:l.scrollHeight,h=a?a.offsetHeight:c?window.innerHeight:l.offsetHeight;r({scrollTop:Math.max(d,0),scrollHeight:u,viewportHeight:h}),null==s||s(function(e,t,n){"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,ha.WARN);if("normal"===t)return 0;return parseInt(null!=t?t:"0",10)}("row-gap",getComputedStyle(t).rowGap,o)),null!==i&&e(i)}),[e,n,o,s,a,r]);return ma(l,i)}function ba(e,t){return Math.round(e.getBoundingClientRect()[t])}function ya(e,t){return Math.abs(e-t)<1.01}function xa(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ds,o=arguments.length>4?arguments[4]:void 0;const s=t.useRef(null),a=t.useRef(null),l=t.useRef(null),c=t.useCallback((t=>{const i=t.target,r=i===window||i===document,o=r?window.pageYOffset||document.documentElement.scrollTop:i.scrollTop,s=r?document.documentElement.scrollHeight:i.scrollHeight,c=r?window.innerHeight:i.offsetHeight,d=()=>{e({scrollTop:Math.max(o,0),scrollHeight:s,viewportHeight:c})};t.suppressFlushSync?d():ws.flushSync(d),null!==a.current&&(o===a.current||o<=0||o===s-c)&&(a.current=null,n(!0),l.current&&(clearTimeout(l.current),l.current=null))}),[e,n]);return t.useEffect((()=>{const e=o||s.current;return r(o||s.current),c({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",c,{passive:!0}),()=>{r(null),e.removeEventListener("scroll",c)}}),[s,c,i,r,o]),{scrollerRef:s,scrollByCallback:function(e){s.current.scrollBy(e)},scrollToCallback:function(t){const i=s.current;if(!i||"offsetHeight"in i&&0===i.offsetHeight)return;const r="smooth"===t.behavior;let o,c,d;i===window?(c=Math.max(ba(document.documentElement,"height"),document.documentElement.scrollHeight),o=window.innerHeight,d=document.documentElement.scrollTop):(c=i.scrollHeight,o=ba(i,"height"),d=i.scrollTop);const u=c-o;if(t.top=Math.ceil(Math.max(Math.min(u,t.top),0)),ya(o,c)||t.top===d)return e({scrollTop:d,scrollHeight:c,viewportHeight:o}),void(r&&n(!0));r?(a.current=t.top,l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{l.current=null,a.current=null,n(!0)}),1e3)):a.current=null,i.scrollTo(t)}}}const ka=aa((()=>{const e=Vs(),t=Vs(),n=Hs(0),i=Vs(),r=Hs(0),o=Vs(),s=Vs(),a=Hs(0),l=Hs(0),c=Hs(0),d=Hs(0),u=Vs(),h=Vs(),p=Hs(!1);return $s(Ks(e,Xs((e=>{let{scrollTop:t}=e;return t}))),t),$s(Ks(e,Xs((e=>{let{scrollHeight:t}=e;return t}))),s),$s(t,r),{scrollContainerState:e,scrollTop:t,viewportHeight:o,headerHeight:a,fixedHeaderHeight:l,fixedFooterHeight:c,footerHeight:d,scrollHeight:s,smoothScrollTargetReached:i,scrollTo:u,scrollBy:h,statefulScrollTop:r,deviation:n,scrollingInProgress:p}}),[],{singleton:!0}),wa={lvl:0};function Ca(e,t,n){return{k:e,v:t,lvl:n,l:arguments.length>3&&void 0!==arguments[3]?arguments[3]:wa,r:arguments.length>4&&void 0!==arguments[4]?arguments[4]:wa}}function Sa(e){return e===wa}function Ta(){return wa}function Ea(e,t){if(Sa(e))return wa;const{k:n,l:i,r:r}=e;if(t===n){if(Sa(i))return r;if(Sa(r))return i;{const[t,n]=Ma(i);return La(Na(e,{k:t,v:n,l:Oa(i)}))}}return La(Na(e,t<n?{l:Ea(i,t)}:{r:Ea(r,t)}))}function _a(e,t){if(!Sa(e))return t===e.k?e.v:t<e.k?_a(e.l,t):_a(e.r,t)}function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"k";if(Sa(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const i=Ia(e.r,t,n);return i[0]===-1/0?[e.k,e.v]:i}return Ia(e.l,t,n)}function Pa(e,t,n){return Sa(e)?Ca(t,n,1):t===e.k?Na(e,{k:t,v:n}):t<e.k?Da(Na(e,{l:Pa(e.l,t,n)})):Da(Na(e,{r:Pa(e.r,t,n)}))}function Ra(e,t,n){if(Sa(e))return[];const{k:i,v:r,l:o,r:s}=e;let a=[];return i>t&&(a=a.concat(Ra(o,t,n))),i>=t&&i<=n&&a.push({k:i,v:r}),i<=n&&(a=a.concat(Ra(s,t,n))),a}function Aa(e){return Sa(e)?[]:[...Aa(e.l),{k:e.k,v:e.v},...Aa(e.r)]}function Ma(e){return Sa(e.r)?[e.k,e.v]:Ma(e.r)}function Oa(e){return Sa(e.r)?e.l:La(Na(e,{r:Oa(e.r)}))}function Na(e,t){return Ca(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function ja(e){return Sa(e)||e.lvl>e.r.lvl}function Da(e){return Ua($a(e))}function La(e){const{l:t,r:n,lvl:i}=e;if(n.lvl>=i-1&&t.lvl>=i-1)return e;if(i>n.lvl+1){if(ja(t))return $a(Na(e,{lvl:i-1}));if(Sa(t)||Sa(t.r))throw new Error("Unexpected empty nodes");return Na(t.r,{l:Na(t,{r:t.r.l}),r:Na(e,{l:t.r.r,lvl:i-1}),lvl:i})}if(ja(e))return Ua(Na(e,{lvl:i-1}));if(Sa(n)||Sa(n.l))throw new Error("Unexpected empty nodes");{const t=n.l,r=ja(t)?n.lvl-1:n.lvl;return Na(t,{l:Na(e,{r:t.l,lvl:i-1}),r:Ua(Na(n,{l:t.r,lvl:r})),lvl:t.lvl+1})}}function Fa(e,t,n){if(Sa(e))return[];const i=Ia(e,t)[0];return Ba(Ra(e,i,n),(e=>{let{k:t,v:n}=e;return{index:t,value:n}}))}function Ba(e,t){const n=e.length;if(0===n)return[];let{index:i,value:r}=t(e[0]);const o=[];for(let s=1;s<n;s++){const{index:n,value:a}=t(e[s]);o.push({start:i,end:n-1,value:r}),i=n,r=a}return o.push({start:i,end:1/0,value:r}),o}function Ua(e){const{r:t,lvl:n}=e;return Sa(t)||Sa(t.r)||t.lvl!==n||t.r.lvl!==n?e:Na(t,{l:Na(e,{r:t.l}),lvl:n+1})}function $a(e){const{l:t}=e;return Sa(t)||t.lvl!==e.lvl?e:Na(t,{r:Na(e,{l:t.r})})}function za(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.length-1;for(;i<=r;){const o=Math.floor((i+r)/2),s=n(e[o],t);if(0===s)return o;if(-1===s){if(r-i<2)return o-1;r=o-1}else{if(r===i)return o;i=o+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Va(e,t,n){return e[za(e,t,n)]}const Ha=aa((()=>({recalcInProgress:Hs(!1)})),[],{singleton:!0});function Wa(e){const{size:t,startIndex:n,endIndex:i}=e;return e=>e.start===n&&(e.end===i||e.end===1/0)&&e.value===t}function qa(e,t){let n=0,i=0;for(;n<e;)n+=t[i+1]-t[i]-1,i++;return i-(n===e?0:1)}function Ka(e,t){let{index:n}=e;return t===n?0:t<n?-1:1}function Ga(e,t){let{offset:n}=e;return t===n?0:t<n?-1:1}function Ya(e){return{index:e.index,value:e}}function Qa(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i>0&&(t=Math.max(t,Va(e,i,Ka).offset)),Ba(function(e,t,n,i){const r=za(e,t,i),o=za(e,n,i,r);return e.slice(r,o+1)}(e,t,n,Ga),Ya)}function Xa(e,t,n,i){let r=e,o=0,s=0,a=0,l=0;if(0!==t){l=za(r,t-1,Ka);a=r[l].offset;const e=Ia(n,t-1);o=e[0],s=e[1],r.length&&r[l].size===Ia(n,t)[1]&&(l-=1),r=r.slice(0,l+1)}else r=[];for(const{start:c,value:d}of Fa(n,t,1/0)){const e=c-o,t=e*s+a+e*i;r.push({offset:t,size:d,index:c}),o=c,a=t,s=d}return{offsetTree:r,lastIndex:o,lastOffset:a,lastSize:s}}function Ja(e,t){let[n,i,r,o]=t;n.length>0&&r("received item sizes",n,ha.DEBUG);const s=e.sizeTree;let a=s,l=0;if(i.length>0&&Sa(s)&&2===n.length){const e=n[0].size,t=n[1].size;a=i.reduce(((n,i)=>Pa(Pa(n,i,e),i+1,t)),a)}else[a,l]=function(e,t){let n=Sa(e)?0:1/0;for(const i of t){const{size:t,startIndex:r,endIndex:o}=i;if(n=Math.min(n,r),Sa(e)){e=Pa(e,0,t);continue}const s=Fa(e,r-1,o+1);if(s.some(Wa(i)))continue;let a=!1,l=!1;for(const{start:n,end:i,value:c}of s)a?(o>=n||t===c)&&(e=Ea(e,n)):(l=c!==t,a=!0),i>o&&o>=n&&c!==t&&(e=Pa(e,o+1,c));l&&(e=Pa(e,r,t))}return[e,n]}(a,n);if(a===s)return e;const{offsetTree:c,lastIndex:d,lastSize:u,lastOffset:h}=Xa(e.offsetTree,l,a,o);return{sizeTree:a,offsetTree:c,lastIndex:d,lastOffset:h,lastSize:u,groupOffsetTree:i.reduce(((e,t)=>Pa(e,t,Za(t,c,o))),Ta()),groupIndices:i}}function Za(e,t,n){if(0===t.length)return 0;const{offset:i,index:r,size:o}=Va(t,e,Ka),s=e-r,a=o*s+(s-1)*n+i;return a>0?a+n:a}function el(e,t,n){if(function(e){return"undefined"!==typeof e.groupIndex}(e))return t.groupIndices[e.groupIndex]+1;{let i=tl("LAST"===e.index?n:e.index,t);return i=Math.max(0,i,Math.min(n,i)),i}}function tl(e,t){if(!nl(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function nl(e){return!Sa(e.groupOffsetTree)}const il={offsetHeight:"height",offsetWidth:"width"},rl=aa((e=>{let[{log:t},{recalcInProgress:n}]=e;const i=Vs(),r=Vs(),o=qs(r,0),s=Vs(),a=Vs(),l=Hs(0),c=Hs([]),d=Hs(void 0),u=Hs(void 0),h=Hs(((e,t)=>ba(e,il[t]))),p=Hs(void 0),f=Hs(0),m={offsetTree:[],sizeTree:Ta(),groupOffsetTree:Ta(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},g=qs(Ks(i,ia(c,t,f),Zs(Ja,m),Ys()),m),v=qs(Ks(c,Ys(),Zs(((e,t)=>({prev:e.current,current:t})),{prev:[],current:[]}),Xs((e=>{let{prev:t}=e;return t}))),[]);$s(Ks(c,Qs((e=>e.length>0)),ia(g,f),Xs((e=>{let[t,n,i]=e;const r=t.reduce(((e,t,r)=>Pa(e,t,Za(t,n.offsetTree,i)||r)),Ta());return{...n,groupIndices:t,groupOffsetTree:r}}))),g),$s(Ks(r,ia(g),Qs((e=>{let[t,{lastIndex:n}]=e;return t<n})),Xs((e=>{let[t,{lastIndex:n,lastSize:i}]=e;return[{startIndex:t,endIndex:n,size:i}]}))),i),$s(d,u);const b=qs(Ks(d,Xs((e=>void 0===e))),!0);$s(Ks(u,Qs((e=>void 0!==e&&Sa(Us(g).sizeTree))),Xs((e=>[{startIndex:0,endIndex:0,size:e}]))),i);const y=Ws(Ks(i,ia(g),Zs(((e,t)=>{let{sizes:n}=e,[i,r]=t;return{changed:r!==n,sizes:r}}),{changed:!1,sizes:m}),Xs((e=>e.changed))));Ls(Ks(l,Zs(((e,t)=>({diff:e.prev-t,prev:t})),{diff:0,prev:0}),Xs((e=>e.diff))),(e=>{const{groupIndices:t}=Us(g);if(e>0)Fs(n,!0),Fs(s,e+qa(e,t));else if(e<0){const t=Us(v);t.length>0&&(e-=qa(-e,t)),Fs(a,e)}})),Ls(Ks(l,ia(t)),(e=>{let[t,n]=e;t<0&&n("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},ha.ERROR)}));const x=Ws(s);$s(Ks(s,ia(g),Xs((e=>{let[t,n]=e;const i=n.groupIndices.length>0,r=[],o=n.lastSize;if(i){const e=_a(n.sizeTree,0);let i=0,s=0;for(;i<t;){const t=n.groupIndices[s],a=n.groupIndices.length===s+1?1/0:n.groupIndices[s+1]-t-1;r.push({startIndex:t,endIndex:t,size:e}),r.push({startIndex:t+1,endIndex:t+1+a-1,size:o}),s++,i+=a+1}const a=Aa(n.sizeTree);return i!==t&&a.shift(),a.reduce(((e,n)=>{let{k:i,v:r}=n,o=e.ranges;return 0!==e.prevSize&&(o=[...e.ranges,{startIndex:e.prevIndex,endIndex:i+t-1,size:e.prevSize}]),{ranges:o,prevIndex:i+t,prevSize:r}}),{ranges:r,prevIndex:t,prevSize:0}).ranges}return Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return{ranges:[...e.ranges,{startIndex:e.prevIndex,endIndex:i+t-1,size:e.prevSize}],prevIndex:i+t,prevSize:r}}),{ranges:[],prevIndex:0,prevSize:o}).ranges}))),i);const k=Ws(Ks(a,ia(g,f),Xs((e=>{let[t,{offsetTree:n},i]=e;return Za(-t,n,i)}))));return $s(Ks(a,ia(g,f),Xs((e=>{let[t,n,i]=e;if(n.groupIndices.length>0){if(Sa(n.sizeTree))return n;let e=Ta();const r=Us(v);let o=0,s=0,a=0;for(;o<-t;){a=r[s];const e=r[s+1]-a-1;s++,o+=e+1}e=Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return Pa(e,Math.max(0,i+t),r)}),e);if(o!==-t){e=Pa(e,0,_a(n.sizeTree,a));e=Pa(e,1,Ia(n.sizeTree,1-t)[1])}return{...n,sizeTree:e,...Xa(n.offsetTree,0,e,i)}}{const e=Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return Pa(e,Math.max(0,i+t),r)}),Ta());return{...n,sizeTree:e,...Xa(n.offsetTree,0,e,i)}}}))),g),{data:p,totalCount:r,sizeRanges:i,groupIndices:c,defaultItemSize:u,fixedItemSize:d,unshiftWith:s,shiftWith:a,shiftWithOffset:k,beforeUnshiftWith:x,firstItemIndex:l,gap:f,sizes:g,listRefresh:y,statefulTotalCount:o,trackItemSizes:b,itemSize:h}}),Ms(fa,Ha),{singleton:!0}),ol="undefined"!==typeof document&&"scrollBehavior"in document.documentElement.style;function sl(e){const t="number"===typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&ol||(t.behavior="auto"),t.offset||(t.offset=0),t}const al=aa((e=>{let[{sizes:t,totalCount:n,listRefresh:i,gap:r},{scrollingInProgress:o,viewportHeight:s,scrollTo:a,smoothScrollTargetReached:l,headerHeight:c,footerHeight:d,fixedHeaderHeight:u,fixedFooterHeight:h},{log:p}]=e;const f=Vs(),m=Vs(),g=Hs(0);let v=null,b=null,y=null;function x(){v&&(v(),v=null),y&&(y(),y=null),b&&(clearTimeout(b),b=null),Fs(o,!1)}return $s(Ks(f,ia(t,s,n,g,c,d,p),ia(r,u,h),Xs((e=>{let[[t,n,r,s,a,c,d,u],h,p,g]=e;const k=sl(t),{align:w,behavior:C,offset:S}=k,T=s-1,E=el(k,n,T);let _=Za(E,n.offsetTree,h)+c;"end"===w?(_+=p+Ia(n.sizeTree,E)[1]-r+g,E===T&&(_+=d)):"center"===w?_+=(p+Ia(n.sizeTree,E)[1]-r+g)/2:_-=a,S&&(_+=S);const I=e=>{x(),e?(u("retrying to scroll to",{location:t},ha.DEBUG),Fs(f,t)):(Fs(m,!0),u("list did not change, scroll successful",{},ha.DEBUG))};if(x(),"smooth"===C){let e=!1;y=Ls(i,(t=>{e=e||t})),v=zs(l,(()=>{I(e)}))}else v=zs(Ks(i,function(e){return t=>{const n=setTimeout((()=>{t(!1)}),e);return e=>{e&&(t(!0),clearTimeout(n))}}}(150)),I);return b=setTimeout((()=>{x()}),1200),Fs(o,!0),u("scrolling from index to",{index:E,top:_,behavior:C},ha.DEBUG),{top:_,behavior:C}}))),a),{scrollToIndex:f,scrollTargetReached:m,topListHeight:g}}),Ms(rl,ka,fa),{singleton:!0});const ll="up",cl="down",dl={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},ul=aa((e=>{let[{scrollContainerState:t,scrollTop:n,viewportHeight:i,headerHeight:r,footerHeight:o,scrollBy:s}]=e;const a=Hs(!1),l=Hs(!0),c=Vs(),d=Vs(),u=Hs(4),h=Hs(0),p=qs(Ks(ra(Ks(oa(n),ea(1),Js(!0)),Ks(oa(n),ea(1),Js(!1),na(100))),Ys()),!1),f=qs(Ks(ra(Ks(s,Js(!0)),Ks(s,Js(!1),na(200))),Ys()),!1);$s(Ks(sa(oa(n),oa(h)),Xs((e=>{let[t,n]=e;return t<=n})),Ys()),l),$s(Ks(l,ta(50)),d);const m=Ws(Ks(sa(t,oa(i),oa(r),oa(o),oa(u)),Zs(((e,t)=>{let[{scrollTop:n,scrollHeight:i},r,o,s,a]=t;const l={viewportHeight:r,scrollTop:n,scrollHeight:i};if(n+r-i>-a){let t,i;return n>e.state.scrollTop?(t="SCROLLED_DOWN",i=e.state.scrollTop-n):(t="SIZE_DECREASED",i=e.state.scrollTop-n||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:t,scrollTopDelta:i}}let c;return c=l.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":n<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:c,state:l}}),dl),Ys(((e,t)=>e&&e.atBottom===t.atBottom)))),g=qs(Ks(t,Zs(((e,t)=>{let{scrollTop:n,scrollHeight:i,viewportHeight:r}=t;if(ya(e.scrollHeight,i))return{scrollTop:n,scrollHeight:i,jump:0,changed:!1};{const t=i-(n+r)<1;return e.scrollTop!==n&&t?{scrollHeight:i,scrollTop:n,jump:e.scrollTop-n,changed:!0}:{scrollHeight:i,scrollTop:n,jump:0,changed:!0}}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Qs((e=>e.changed)),Xs((e=>e.jump))),0);$s(Ks(m,Xs((e=>e.atBottom))),a),$s(Ks(a,ta(50)),c);const v=Hs(cl);$s(Ks(t,Xs((e=>{let{scrollTop:t}=e;return t})),Ys(),Zs(((e,t)=>Us(f)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?ll:cl,prevScrollTop:t}),{direction:cl,prevScrollTop:0}),Xs((e=>e.direction))),v),$s(Ks(t,ta(50),Js("none")),v);const b=Hs(0);return $s(Ks(p,Qs((e=>!e)),Js(0)),b),$s(Ks(n,ta(100),ia(p),Qs((e=>{let[t,n]=e;return!!n})),Zs(((e,t)=>{let[n,i]=e,[r]=t;return[i,r]}),[0,0]),Xs((e=>{let[t,n]=e;return n-t}))),b),{isScrolling:p,isAtTop:l,isAtBottom:a,atBottomState:m,atTopStateChange:d,atBottomStateChange:c,scrollDirection:v,atBottomThreshold:u,atTopThreshold:h,scrollVelocity:b,lastJumpDueToItemResize:g}}),Ms(ka)),hl=aa((e=>{let[{log:t}]=e;const n=Hs(!1),i=Ws(Ks(n,Qs((e=>e)),Ys()));return Ls(n,(e=>{e&&Us(t)("props updated",{},ha.DEBUG)})),{propsReady:n,didMount:i}}),Ms(fa),{singleton:!0});function pl(e,t){0==e?t():requestAnimationFrame((()=>pl(e-1,t)))}function fl(e,t){const n=t-1;return"number"===typeof e?e:"LAST"===e.index?n:e.index}const ml=aa((e=>{let[{sizes:t,listRefresh:n,defaultItemSize:i},{scrollTop:r},{scrollToIndex:o,scrollTargetReached:s},{didMount:a}]=e;const l=Hs(!0),c=Hs(0),d=Hs(!0);return $s(Ks(a,ia(c),Qs((e=>{let[t,n]=e;return!!n})),Js(!1)),l),$s(Ks(a,ia(c),Qs((e=>{let[t,n]=e;return!!n})),Js(!1)),d),Ls(Ks(sa(n,a),ia(l,t,i,d),Qs((e=>{let[[,t],n,{sizeTree:i},r,o]=e;return t&&(!Sa(i)||js(r))&&!n&&!o})),ia(c)),(e=>{let[,t]=e;zs(s,(()=>{Fs(d,!0)})),pl(4,(()=>{zs(r,(()=>{Fs(l,!0)})),Fs(o,t)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:c,initialItemFinalLocationReached:d}}),Ms(rl,ka,al,hl),{singleton:!0});function gl(e){return!!e&&("smooth"===e?"smooth":"auto")}const vl=aa((e=>{let[{totalCount:t,listRefresh:n},{isAtBottom:i,atBottomState:r},{scrollToIndex:o},{scrolledToInitialItem:s},{propsReady:a,didMount:l},{log:c},{scrollingInProgress:d}]=e;const u=Hs(!1),h=Vs();let p=null;function f(e){Fs(o,{index:"LAST",align:"end",behavior:e})}function m(e){const t=zs(r,(t=>{!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||p||(Us(c)("scrolling to bottom due to increased size",{},ha.DEBUG),f("auto"))}));setTimeout(t,100)}return Ls(Ks(sa(Ks(oa(t),ea(1)),l),ia(oa(u),i,s,d),Xs((e=>{let[[t,n],i,r,o,s]=e,a=n&&o,l="auto";return a&&(l=((e,t)=>"function"===typeof e?gl(e(t)):t&&gl(e))(i,r||s),a=a&&!!l),{totalCount:t,shouldFollow:a,followOutputBehavior:l}})),Qs((e=>{let{shouldFollow:t}=e;return t}))),(e=>{let{totalCount:t,followOutputBehavior:i}=e;p&&(p(),p=null),p=zs(n,(()=>{Us(c)("following output to ",{totalCount:t},ha.DEBUG),f(i),p=null}))})),Ls(Ks(sa(oa(u),t,a),Qs((e=>{let[t,,n]=e;return t&&n})),Zs(((e,t)=>{let{value:n}=e,[,i]=t;return{refreshed:n===i,value:i}}),{refreshed:!1,value:0}),Qs((e=>{let{refreshed:t}=e;return t})),ia(u,t)),(e=>{let[,t]=e;Us(s)&&m(!1!==t)})),Ls(h,(()=>{m(!1!==Us(u))})),Ls(sa(oa(u),r),(e=>{let[t,n]=e;t&&!n.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===n.notAtBottomBecause&&f("auto")})),{followOutput:u,autoscrollToBottom:h}}),Ms(rl,ul,al,ml,hl,fa,ka));function bl(e){return e.reduce(((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e)),{totalCount:0,groupIndices:[]})}const yl=aa((e=>{let[{totalCount:t,groupIndices:n,sizes:i},{scrollTop:r,headerHeight:o}]=e;const s=Vs(),a=Vs(),l=Ws(Ks(s,Xs(bl)));return $s(Ks(l,Xs((e=>e.totalCount))),t),$s(Ks(l,Xs((e=>e.groupIndices))),n),$s(Ks(sa(r,i,o),Qs((e=>{let[t,n]=e;return nl(n)})),Xs((e=>{let[t,n,i]=e;return Ia(n.groupOffsetTree,Math.max(t-i,0),"v")[0]})),Ys(),Xs((e=>[e]))),a),{groupCounts:s,topItemsIndexes:a}}),Ms(rl,ka));function xl(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function kl(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}const wl="top",Cl="bottom",Sl="none";function Tl(e,t,n){return"number"===typeof e?n===ll&&t===wl||n===cl&&t===Cl?e:0:n===ll?t===wl?e.main:e.reverse:t===Cl?e.main:e.reverse}function El(e,t){return"number"===typeof e?e:e[t]||0}const _l=aa((e=>{let[{scrollTop:t,viewportHeight:n,deviation:i,headerHeight:r,fixedHeaderHeight:o}]=e;const s=Vs(),a=Hs(0),l=Hs(0),c=Hs(0),d=qs(Ks(sa(oa(t),oa(n),oa(r),oa(s,xl),oa(c),oa(a),oa(o),oa(i),oa(l)),Xs((e=>{let[t,n,i,[r,o],s,a,l,c,d]=e;const u=t-c,h=a+l,p=Math.max(i-u,0);let f=Sl;const m=El(d,wl),g=El(d,Cl);return r-=c,r+=i+l,o+=i+l,o-=c,r>t+h-m&&(f=ll),o<t-p+n+g&&(f=cl),f!==Sl?[Math.max(u-i-Tl(s,wl,f)-m,0),u-p-l+n+Tl(s,Cl,f)+g]:null})),Qs((e=>null!=e)),Ys(xl)),[0,0]);return{listBoundary:s,overscan:c,topListHeight:a,increaseViewportBy:l,visibleRange:d}}),Ms(ka),{singleton:!0});const Il={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function Pl(e,t,n){if(0===e.length)return[];if(!nl(t))return e.map((e=>({...e,index:e.index+n,originalIndex:e.index})));const i=e[0].index,r=e[e.length-1].index,o=[],s=Fa(t.groupOffsetTree,i,r);let a,l=0;for(const c of e){let e;(!a||a.end<c.index)&&(a=s.shift(),l=t.groupIndices.indexOf(a.start)),e=c.index===a.start?{type:"group",index:l}:{index:c.index-(l+1)+n,groupIndex:l},o.push({...e,size:c.size,offset:c.offset,originalIndex:c.index,data:c.data})}return o}function Rl(e,t,n,i,r,o){const{lastSize:s,lastOffset:a,lastIndex:l}=r;let c=0,d=0;if(e.length>0){c=e[0].offset;const t=e[e.length-1];d=t.offset+t.size}const u=n-l,h=c,p=a+u*s+(u-1)*i-d;return{items:Pl(e,r,o),topItems:Pl(t,r,o),topListHeight:t.reduce(((e,t)=>t.size+e),0),offsetTop:c,offsetBottom:p,top:h,bottom:d,totalCount:n,firstItemIndex:o}}function Al(e,t,n,i,r,o){let s=0;if(n.groupIndices.length>0)for(const d of n.groupIndices){if(d-s>=e)break;s++}const a=e+s,l=fl(t,a),c=Array.from({length:a}).map(((e,t)=>({index:t+l,size:0,offset:0,data:o[t+l]})));return Rl(c,[],a,r,n,i)}const Ml=aa((e=>{let[{sizes:t,totalCount:n,data:i,firstItemIndex:r,gap:o},s,{visibleRange:a,listBoundary:l,topListHeight:c},{scrolledToInitialItem:d,initialTopMostItemIndex:u},{topListHeight:h},p,{didMount:f},{recalcInProgress:m}]=e;const g=Hs([]),v=Hs(0),b=Vs();$s(s.topItemsIndexes,g);const y=qs(Ks(sa(f,m,oa(a,xl),oa(n),oa(t),oa(u),d,oa(g),oa(r),oa(o),i),Qs((e=>{let[t,n,,i,,,,,,,r]=e;const o=r&&r.length!==i;return t&&!n&&!o})),Xs((e=>{let[,,[t,n],i,r,o,s,a,l,c,d]=e;const u=r,{sizeTree:h,offsetTree:p}=u,f=Us(v);if(0===i)return{...Il,totalCount:i};if(0===t&&0===n)return 0===f?{...Il,totalCount:i}:Al(f,o,r,l,c,d||[]);if(Sa(h)){if(f>0)return null;const e=Rl(function(e,t,n){if(nl(t)){const i=tl(e,t);return[{index:Ia(t.groupOffsetTree,i)[0],size:0,offset:0},{index:i,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(fl(o,i),u,d),[],i,c,u,l);return e}const m=[];if(a.length>0){const e=a[0],t=a[a.length-1];let n=0;for(const i of Fa(h,e,t)){const r=i.value,o=Math.max(i.start,e),s=Math.min(i.end,t);for(let e=o;e<=s;e++)m.push({index:e,size:r,offset:n,data:d&&d[e]}),n+=r}}if(!s)return Rl([],m,i,c,u,l);const g=a.length>0?a[a.length-1]+1:0,b=Qa(p,t,n,g);if(0===b.length)return null;const y=i-1,x=As([],(e=>{for(const i of b){const r=i.value;let o=r.offset,s=i.start;const a=r.size;if(r.offset<t){s+=Math.floor((t-r.offset+c)/(a+c));const e=s-i.start;o+=e*a+e*c}s<g&&(o+=(g-s)*a,s=g);const l=Math.min(i.end,y);for(let t=s;t<=l&&!(o>=n);t++)e.push({index:t,size:a,offset:o,data:d&&d[t]}),o+=a+c}}));return Rl(x,m,i,c,u,l)})),Qs((e=>null!==e)),Ys()),Il);$s(Ks(i,Qs(js),Xs((e=>null==e?void 0:e.length))),n),$s(Ks(y,Xs((e=>e.topListHeight))),h),$s(h,c),$s(Ks(y,Xs((e=>[e.top,e.bottom]))),l),$s(Ks(y,Xs((e=>e.items))),b);return{listState:y,topItemsIndexes:g,endReached:Ws(Ks(y,Qs((e=>{let{items:t}=e;return t.length>0})),ia(n,i),Qs((e=>{let[{items:t},n]=e;return t[t.length-1].originalIndex===n-1})),Xs((e=>{let[,t,n]=e;return[t-1,n]})),Ys(xl),Xs((e=>{let[t]=e;return t})))),startReached:Ws(Ks(y,ta(200),Qs((e=>{let{items:t,topItems:n}=e;return t.length>0&&t[0].originalIndex===n.length})),Xs((e=>{let{items:t}=e;return t[0].index})),Ys())),rangeChanged:Ws(Ks(y,Qs((e=>{let{items:t}=e;return t.length>0})),Xs((e=>{let{items:t}=e,n=0,i=t.length-1;for(;"group"===t[n].type&&n<i;)n++;for(;"group"===t[i].type&&i>n;)i--;return{startIndex:t[n].index,endIndex:t[i].index}})),Ys(kl))),itemsRendered:b,initialItemCount:v,...p}}),Ms(rl,yl,_l,ml,al,ul,hl,Ha),{singleton:!0}),Ol=aa((e=>{let[{sizes:t,firstItemIndex:n,data:i,gap:r},{initialTopMostItemIndex:o},{initialItemCount:s,listState:a},{didMount:l}]=e;return $s(Ks(l,ia(s),Qs((e=>{let[,t]=e;return 0!==t})),ia(o,t,n,r,i),Xs((e=>{let[[,t],n,i,r,o,s=[]]=e;return Al(t,n,i,r,o,s)}))),a),{}}),Ms(rl,ml,Ml,hl),{singleton:!0}),Nl=aa((e=>{let[{scrollVelocity:t}]=e;const n=Hs(!1),i=Vs(),r=Hs(!1);return $s(Ks(t,ia(r,n,i),Qs((e=>{let[t,n]=e;return!!n})),Xs((e=>{let[t,n,i,r]=e;const{exit:o,enter:s}=n;if(i){if(o(t,r))return!1}else if(s(t,r))return!0;return i})),Ys()),n),Ls(Ks(sa(n,t,i),ia(r)),(e=>{let[[t,n,i],r]=e;return t&&r&&r.change&&r.change(n,i)})),{isSeeking:n,scrollSeekConfiguration:r,scrollVelocity:t,scrollSeekRangeChanged:i}}),Ms(ul),{singleton:!0}),jl=aa((e=>{let[{topItemsIndexes:t}]=e;const n=Hs(0);return $s(Ks(n,Qs((e=>e>0)),Xs((e=>Array.from({length:e}).map(((e,t)=>t))))),t),{topItemCount:n}}),Ms(Ml)),Dl=aa((e=>{let[{footerHeight:t,headerHeight:n,fixedHeaderHeight:i,fixedFooterHeight:r},{listState:o}]=e;const s=Vs(),a=qs(Ks(sa(t,r,n,i,o),Xs((e=>{let[t,n,i,r,o]=e;return t+n+i+r+o.offsetBottom+o.bottom}))),0);return $s(oa(a),s),{totalListHeight:a,totalListHeightChanged:s}}),Ms(ka,Ml),{singleton:!0});function Ll(e){let t,n=!1;return()=>(n||(n=!0,t=e()),t)}const Fl=Ll((()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))),Bl=aa((e=>{let[{scrollBy:t,scrollTop:n,deviation:i,scrollingInProgress:r},{isScrolling:o,isAtBottom:s,scrollDirection:a,lastJumpDueToItemResize:l},{listState:c},{beforeUnshiftWith:d,shiftWithOffset:u,sizes:h,gap:p},{log:f},{recalcInProgress:m}]=e;const g=Ws(Ks(c,ia(l),Zs(((e,t)=>{let[,n,i,r]=e,[{items:o,totalCount:s,bottom:a,offsetBottom:l},c]=t;const d=a+l;let u=0;if(i===s&&n.length>0&&o.length>0){0===o[0].originalIndex&&0===n[0].originalIndex||(u=d-r,0!==u&&(u+=c))}return[u,o,s,d]}),[0,[],0,0]),Qs((e=>{let[t]=e;return 0!==t})),ia(n,a,r,s,f,m),Qs((e=>{let[,t,n,i,,,r]=e;return!r&&!i&&0!==t&&n===ll})),Xs((e=>{let[[t],,,,,n]=e;return n("Upward scrolling compensation",{amount:t},ha.DEBUG),t}))));function v(e){e>0?(Fs(t,{top:-e,behavior:"auto"}),Fs(i,0)):(Fs(i,0),Fs(t,{top:-e,behavior:"auto"}))}return Ls(Ks(g,ia(i,o)),(e=>{let[t,n,r]=e;r&&Fl()?Fs(i,n-t):v(-t)})),Ls(Ks(sa(qs(o,!1),i,m),Qs((e=>{let[t,n,i]=e;return!t&&!i&&0!==n})),Xs((e=>{let[t,n]=e;return n})),ta(1)),v),$s(Ks(u,Xs((e=>({top:-e})))),t),Ls(Ks(d,ia(h,p),Xs((e=>{let[t,{lastSize:n,groupIndices:i,sizeTree:r},o]=e;function s(e){return e*(n+o)}if(0===i.length)return s(t);{let e=0;const n=_a(r,0);let o=0,a=0;for(;o<t;){o++,e+=n;let r=i.length===a+1?1/0:i[a+1]-i[a]-1;o+r>t&&(e-=n,r=t-o+1),o+=r,e+=s(r),a++}return e}}))),(e=>{Fs(i,e),requestAnimationFrame((()=>{Fs(t,{top:e}),requestAnimationFrame((()=>{Fs(i,0),Fs(m,!1)}))}))})),{deviation:i}}),Ms(ka,ul,Ml,rl,fa,Ha)),Ul=aa((e=>{let[{didMount:t},{scrollTo:n},{listState:i}]=e;const r=Hs(0);return Ls(Ks(t,ia(r),Qs((e=>{let[,t]=e;return 0!==t})),Xs((e=>{let[,t]=e;return{top:t}}))),(e=>{zs(Ks(i,ea(1),Qs((e=>e.items.length>1))),(()=>{requestAnimationFrame((()=>{Fs(n,e)}))}))})),{initialScrollTop:r}}),Ms(hl,ka,Ml),{singleton:!0}),$l=aa((e=>{let[{viewportHeight:t},{totalListHeight:n}]=e;const i=Hs(!1);return{alignToBottom:i,paddingTopAddition:qs(Ks(sa(i,t,n),Qs((e=>{let[t]=e;return t})),Xs((e=>{let[,t,n]=e;return Math.max(0,t-n)})),ta(0),Ys()),0)}}),Ms(ka,Dl),{singleton:!0}),zl=aa((e=>{let[{scrollTo:t,scrollContainerState:n}]=e;const i=Vs(),r=Vs(),o=Vs(),s=Hs(!1),a=Hs(void 0);return $s(Ks(sa(i,r),Xs((e=>{let[{viewportHeight:t,scrollTop:n,scrollHeight:i},{offsetTop:r}]=e;return{scrollTop:Math.max(0,n-r),scrollHeight:i,viewportHeight:t}}))),n),$s(Ks(t,ia(r),Xs((e=>{let[t,{offsetTop:n}]=e;return{...t,top:t.top+n}}))),o),{useWindowScroll:s,customScrollParent:a,windowScrollContainerState:i,windowViewportRect:r,windowScrollTo:o}}),Ms(ka)),Vl=e=>{let{itemTop:t,itemBottom:n,viewportTop:i,viewportBottom:r,locationParams:{behavior:o,align:s,...a}}=e;return t<i?{...a,behavior:o,align:null!=s?s:"start"}:n>r?{...a,behavior:o,align:null!=s?s:"end"}:null},Hl=aa((e=>{let[{sizes:t,totalCount:n,gap:i},{scrollTop:r,viewportHeight:o,headerHeight:s,fixedHeaderHeight:a,fixedFooterHeight:l,scrollingInProgress:c},{scrollToIndex:d}]=e;const u=Vs();return $s(Ks(u,ia(t,o,n,s,a,l,r),ia(i),Xs((e=>{let[[t,n,i,r,o,s,a,l],d]=e;const{done:u,behavior:h,align:p,calculateViewLocation:f=Vl,...m}=t,g=el(t,n,r-1),v=Za(g,n.offsetTree,d)+o+s,b=f({itemTop:v,itemBottom:v+Ia(n.sizeTree,g)[1],viewportTop:l+s,viewportBottom:l+i-a,locationParams:{behavior:h,align:p,...m}});return b?u&&zs(Ks(c,Qs((e=>!1===e)),ea(Us(c)?1:2)),u):u&&u(),b})),Qs((e=>null!==e))),d),{scrollIntoView:u}}),Ms(rl,ka,al,Ml,fa),{singleton:!0}),Wl=aa((e=>{let[{sizes:t,sizeRanges:n},{scrollTop:i,headerHeight:r},{initialTopMostItemIndex:o},{didMount:s},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:c}]=e;const d=Vs(),u=Hs(void 0),h=Hs(null),p=Hs(null);return $s(l,h),$s(c,p),Ls(Ks(d,ia(t,i,a,h,p,r)),(e=>{let[t,n,i,r,o,s,a]=e;const l=Aa(n.sizeTree).map(((e,t,n)=>{let{k:i,v:r}=e;const o=n[t+1];return{startIndex:i,endIndex:o?o.k-1:1/0,size:r}}));r&&null!==o&&null!==s&&(i=o.scrollTop-s.offsetTop),i-=a,t({ranges:l,scrollTop:i})})),$s(Ks(u,Qs(js),Xs(ql)),o),$s(Ks(s,ia(u),Qs((e=>{let[,t]=e;return void 0!==t})),Ys(),Xs((e=>{let[,t]=e;return t.ranges}))),n),{getState:d,restoreStateFrom:u}}),Ms(rl,ka,ml,hl,zl));function ql(e){return{offset:e.scrollTop,index:0,align:"start"}}const Kl=aa((e=>{let[t,n,i,r,o,s,a,l,c,d]=e;return{...t,...n,...i,...r,...o,...s,...a,...l,...c,...d}}),Ms(_l,Ol,hl,Nl,Dl,Ul,$l,zl,Hl,fa)),Gl=aa((e=>{let[{totalCount:t,sizeRanges:n,fixedItemSize:i,defaultItemSize:r,trackItemSizes:o,itemSize:s,data:a,firstItemIndex:l,groupIndices:c,statefulTotalCount:d,gap:u,sizes:h},{initialTopMostItemIndex:p,scrolledToInitialItem:f,initialItemFinalLocationReached:m},g,v,b,{listState:y,topItemsIndexes:x,...k},{scrollToIndex:w},C,{topItemCount:S},{groupCounts:T},E]=e;return $s(k.rangeChanged,E.scrollSeekRangeChanged),$s(Ks(E.windowViewportRect,Xs((e=>e.visibleHeight))),g.viewportHeight),{totalCount:t,data:a,firstItemIndex:l,sizeRanges:n,initialTopMostItemIndex:p,scrolledToInitialItem:f,initialItemFinalLocationReached:m,topItemsIndexes:x,topItemCount:S,groupCounts:T,fixedItemHeight:i,defaultItemHeight:r,gap:u,...b,statefulTotalCount:d,listState:y,scrollToIndex:w,trackItemSizes:o,itemSize:s,groupIndices:c,...k,...E,...g,sizes:h,...v}}),Ms(rl,ml,ka,Wl,vl,Ml,al,Bl,jl,yl,Kl)),Yl="-webkit-sticky",Ql="sticky",Xl=Ll((()=>{if("undefined"===typeof document)return Ql;const e=document.createElement("div");return e.style.position=Yl,e.style.position===Yl?Yl:Ql}));function Jl(e,n){const i=t.useRef(null),r=t.useCallback((t=>{if(null===t||!t.offsetParent)return;const r=t.getBoundingClientRect(),o=r.width;let s,a;if(n){const e=n.getBoundingClientRect(),t=r.top-e.top;s=e.height-Math.max(0,t),a=t+n.scrollTop}else s=window.innerHeight-Math.max(0,r.top),a=r.top+window.pageYOffset;i.current={offsetTop:a,visibleHeight:s,visibleWidth:o},e(i.current)}),[e,n]),{callbackRef:o,ref:s}=ma(r),a=t.useCallback((()=>{r(s.current)}),[r,s]);return t.useEffect((()=>{if(n){n.addEventListener("scroll",a);const e=new ResizeObserver((()=>{requestAnimationFrame(a)}));return e.observe(n),()=>{n.removeEventListener("scroll",a),e.unobserve(n)}}return window.addEventListener("scroll",a),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}}),[a,n]),o}const Zl=t.createContext(void 0),ec=t.createContext(void 0);function tc(e){return e}const nc=aa((()=>{const e=Hs((e=>`Item ${e}`)),t=Hs(null),n=Hs((e=>`Group ${e}`)),i=Hs({}),r=Hs(tc),o=Hs("div"),s=Hs(Ds),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return qs(Ks(i,Xs((t=>t[e])),Ys()),t)};return{context:t,itemContent:e,groupContent:n,components:i,computeItemKey:r,headerFooterTag:o,scrollerRef:s,FooterComponent:a("Footer"),HeaderComponent:a("Header"),TopItemListComponent:a("TopItemList"),ListComponent:a("List","div"),ItemComponent:a("Item","div"),GroupComponent:a("Group","div"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder")}})),ic=aa((e=>{let[t,n]=e;return{...t,...n}}),Ms(Gl,nc)),rc=e=>{let{height:n}=e;return t.createElement("div",{style:{height:n}})},oc={position:Xl(),zIndex:1,overflowAnchor:"none"},sc={overflowAnchor:"none"},ac=t.memo((function(e){let{showTopList:n=!1}=e;const i=Cc("listState"),r=wc("sizeRanges"),o=Cc("useWindowScroll"),s=Cc("customScrollParent"),a=wc("windowScrollContainerState"),l=wc("scrollContainerState"),c=s||o?a:l,d=Cc("itemContent"),u=Cc("context"),h=Cc("groupContent"),p=Cc("trackItemSizes"),f=Cc("itemSize"),m=Cc("log"),g=wc("gap"),{callbackRef:v}=va(r,f,p,n?Ds:c,m,g,s),[b,y]=t.useState(0);Sc("deviation",(e=>{b!==e&&y(e)}));const x=Cc("EmptyPlaceholder"),k=Cc("ScrollSeekPlaceholder")||rc,w=Cc("ListComponent"),C=Cc("ItemComponent"),S=Cc("GroupComponent"),T=Cc("computeItemKey"),E=Cc("isSeeking"),_=Cc("groupIndices").length>0,I=Cc("alignToBottom"),P=Cc("initialItemFinalLocationReached"),R=n?{}:{boxSizing:"border-box",paddingTop:i.offsetTop,paddingBottom:i.offsetBottom,marginTop:0!==b?b:I?"auto":0,...P?{}:{visibility:"hidden"}};return!n&&0===i.totalCount&&x?t.createElement(x,uc(x,u)):t.createElement(w,{...uc(w,u),ref:v,style:R,"data-testid":n?"virtuoso-top-item-list":"virtuoso-item-list"},(n?i.topItems:i.items).map((e=>{const n=e.originalIndex,r=T(n+i.firstItemIndex,e.data,u);return E?t.createElement(k,{...uc(k,u),key:r,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?t.createElement(S,{...uc(S,u),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:oc},h(e.index,u)):t.createElement(C,{...uc(C,u),...hc(C,e.data),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:sc},_?d(e.index,e.groupIndex,e.data,u):d(e.index,e.data,u))})))})),lc={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},cc=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),dc={width:"100%",position:Xl(),top:0,zIndex:1};function uc(e,t){if("string"!==typeof e)return{context:t}}function hc(e,t){return{item:"string"===typeof e?void 0:t}}const pc=t.memo((function(){const e=Cc("HeaderComponent"),n=wc("headerHeight"),i=Cc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Cc("context");return e?t.createElement(i,{ref:r},t.createElement(e,uc(e,o))):null})),fc=t.memo((function(){const e=Cc("FooterComponent"),n=wc("footerHeight"),i=Cc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Cc("context");return e?t.createElement(i,{ref:r},t.createElement(e,uc(e,o))):null}));function mc(e){let{usePublisher:n,useEmitter:i,useEmitterValue:r}=e;const o=t.memo((function(e){let{style:o,children:s,...a}=e;const l=n("scrollContainerState"),c=r("ScrollerComponent"),d=n("smoothScrollTargetReached"),u=r("scrollerRef"),h=r("context"),{scrollerRef:p,scrollByCallback:f,scrollToCallback:m}=xa(l,d,c,u);return i("scrollTo",m),i("scrollBy",f),t.createElement(c,{ref:p,style:{...lc,...o},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...a,...uc(c,h)},s)}));return o}function gc(e){let{usePublisher:n,useEmitter:i,useEmitterValue:r}=e;const o=t.memo((function(e){let{style:o,children:s,...a}=e;const l=n("windowScrollContainerState"),c=r("ScrollerComponent"),d=n("smoothScrollTargetReached"),u=r("totalListHeight"),h=r("deviation"),p=r("customScrollParent"),f=r("context"),{scrollerRef:m,scrollByCallback:g,scrollToCallback:v}=xa(l,d,c,Ds,p);return ua((()=>(m.current=p||window,()=>{m.current=null})),[m,p]),i("windowScrollTo",v),i("scrollBy",g),t.createElement(c,{style:{position:"relative",...o,...0!==u?{height:u+h}:{}},"data-virtuoso-scroller":!0,...a,...uc(c,f)},s)}));return o}const vc=e=>{let{children:n}=e;const i=t.useContext(Zl),r=wc("viewportHeight"),o=wc("fixedItemHeight"),s=Cc("alignToBottom"),a=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r]));return t.useEffect((()=>{i&&(r(i.viewportHeight),o(i.itemHeight))}),[i,r,o]),t.createElement("div",{style:cc(s),ref:a,"data-viewport-type":"element"},n)},bc=e=>{let{children:n}=e;const i=t.useContext(Zl),r=wc("windowViewportRect"),o=wc("fixedItemHeight"),s=Cc("customScrollParent"),a=Jl(r,s),l=Cc("alignToBottom");return t.useEffect((()=>{i&&(o(i.itemHeight),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(l),"data-viewport-type":"window"},n)},yc=e=>{let{children:n}=e;const i=Cc("TopItemListComponent")||"div",r=Cc("headerHeight"),o={...dc,marginTop:`${r}px`},s=Cc("context");return t.createElement(i,{style:o,...uc(i,s)},n)},xc=t.memo((function(e){const n=Cc("useWindowScroll"),i=Cc("topItemsIndexes").length>0,r=Cc("customScrollParent"),o=r||n?Ec:Tc,s=r||n?bc:vc;return t.createElement(o,{...e},i&&t.createElement(yc,null,t.createElement(ac,{showTopList:!0})),t.createElement(s,null,t.createElement(pc,null),t.createElement(ac,null),t.createElement(fc,null)))})),{Component:kc,usePublisher:wc,useEmitterValue:Cc,useEmitter:Sc}=da(ic,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},xc),Tc=mc({usePublisher:wc,useEmitterValue:Cc,useEmitter:Sc}),Ec=gc({usePublisher:wc,useEmitterValue:Cc,useEmitter:Sc}),_c=kc,Ic={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Pc={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:Rc,ceil:Ac,floor:Mc,min:Oc,max:Nc}=Math;function jc(e,t,n){return Array.from({length:t-e+1}).map(((t,i)=>{const r=null===n?null:n[i+e];return{index:i+e,data:r}}))}function Dc(e,t){return e&&e.column===t.column&&e.row===t.row}function Lc(e,t){return e&&e.width===t.width&&e.height===t.height}const Fc=aa((e=>{let[{overscan:t,visibleRange:n,listBoundary:i},{scrollTop:r,viewportHeight:o,scrollBy:s,scrollTo:a,smoothScrollTargetReached:l,scrollContainerState:c,footerHeight:d,headerHeight:u},h,p,{propsReady:f,didMount:m},{windowViewportRect:g,useWindowScroll:v,customScrollParent:b,windowScrollContainerState:y,windowScrollTo:x},k]=e;const w=Hs(0),C=Hs(0),S=Hs(Ic),T=Hs({height:0,width:0}),E=Hs({height:0,width:0}),_=Vs(),I=Vs(),P=Hs(0),R=Hs(null),A=Hs({row:0,column:0}),M=Vs(),O=Vs(),N=Hs(!1),j=Hs(0),D=Hs(!0),L=Hs(!1);Ls(Ks(m,ia(j),Qs((e=>{let[t,n]=e;return!!n}))),(()=>{Fs(D,!1),Fs(C,0)})),Ls(Ks(sa(m,D,E,T,j,L),Qs((e=>{let[t,n,i,r,,o]=e;return t&&!n&&0!==i.height&&0!==r.height&&!o}))),(e=>{let[,,,,t]=e;Fs(L,!0),pl(1,(()=>{Fs(_,t)})),zs(Ks(r),(()=>{Fs(i,[0,0]),Fs(D,!0)}))})),$s(Ks(O,Qs((e=>void 0!==e&&null!==e&&e.scrollTop>0)),Js(0)),C),Ls(Ks(m,ia(O),Qs((e=>{let[,t]=e;return void 0!==t&&null!==t}))),(e=>{let[,t]=e;t&&(Fs(T,t.viewport),Fs(E,null==t?void 0:t.item),Fs(A,t.gap),t.scrollTop>0&&(Fs(N,!0),zs(Ks(r,ea(1)),(e=>{Fs(N,!1)})),Fs(a,{top:t.scrollTop})))})),$s(Ks(T,Xs((e=>{let{height:t}=e;return t}))),o),$s(Ks(sa(oa(T,Lc),oa(E,Lc),oa(A,((e,t)=>e&&e.column===t.column&&e.row===t.row)),oa(r)),Xs((e=>{let[t,n,i,r]=e;return{viewport:t,item:n,gap:i,scrollTop:r}}))),M),$s(Ks(sa(oa(w),n,oa(A,Dc),oa(E,Lc),oa(T,Lc),oa(R),oa(C),oa(N),oa(D),oa(j)),Qs((e=>{let[,,,,,,,t]=e;return!t})),Xs((e=>{let[t,[n,i],r,o,s,a,l,,c,d]=e;const{row:u,column:h}=r,{height:p,width:f}=o,{width:m}=s;if(0===l&&(0===t||0===m))return Ic;if(0===f){const e=fl(d,t);return function(e){return{...Pc,items:e}}(jc(e,0===e?Math.max(l-1,0):e,a))}const g=$c(m,f,h);let v,b;c?0===n&&0===i&&l>0?(v=0,b=l-1):(v=g*Mc((n+u)/(p+u)),b=g*Ac((i+u)/(p+u))-1,b=Oc(t-1,Nc(b,g-1)),v=Oc(b,Nc(0,v))):(v=0,b=-1);const y=jc(v,b,a),{top:x,bottom:k}=Bc(s,r,o,y),w=Ac(t/g);return{items:y,offsetTop:x,offsetBottom:w*p+(w-1)*u-k,top:x,bottom:k,itemHeight:p,itemWidth:f}}))),S),$s(Ks(R,Qs((e=>null!==e)),Xs((e=>e.length))),w),$s(Ks(sa(T,E,S,A),Qs((e=>{let[t,n,{items:i}]=e;return i.length>0&&0!==n.height&&0!==t.height})),Xs((e=>{let[t,n,{items:i},r]=e;const{top:o,bottom:s}=Bc(t,r,n,i);return[o,s]})),Ys(xl)),i);const F=Hs(!1);$s(Ks(r,ia(F),Xs((e=>{let[t,n]=e;return n||0!==t}))),F);const B=Ws(Ks(oa(S),Qs((e=>{let{items:t}=e;return t.length>0})),ia(w,F),Qs((e=>{let[{items:t},n,i]=e;return i&&t[t.length-1].index===n-1})),Xs((e=>{let[,t]=e;return t-1})),Ys())),U=Ws(Ks(oa(S),Qs((e=>{let{items:t}=e;return t.length>0&&0===t[0].index})),Js(0),Ys())),$=Ws(Ks(oa(S),ia(N),Qs((e=>{let[{items:t},n]=e;return t.length>0&&!n})),Xs((e=>{let[{items:t}]=e;return{startIndex:t[0].index,endIndex:t[t.length-1].index}})),Ys(kl),ta(0)));$s($,p.scrollSeekRangeChanged),$s(Ks(_,ia(T,E,w,A),Xs((e=>{let[t,n,i,r,o]=e;const s=sl(t),{align:a,behavior:l,offset:c}=s;let d=s.index;"LAST"===d&&(d=r-1),d=Nc(0,d,Oc(r-1,d));let u=Uc(n,o,i,d);return"end"===a?u=Rc(u-n.height+i.height):"center"===a&&(u=Rc(u-n.height/2+i.height/2)),c&&(u+=c),{top:u,behavior:l}}))),a);const z=qs(Ks(S,Xs((e=>e.offsetBottom+e.bottom))),0);return $s(Ks(g,Xs((e=>({width:e.visibleWidth,height:e.visibleHeight})))),T),{data:R,totalCount:w,viewportDimensions:T,itemDimensions:E,scrollTop:r,scrollHeight:I,overscan:t,scrollBy:s,scrollTo:a,scrollToIndex:_,smoothScrollTargetReached:l,windowViewportRect:g,windowScrollTo:x,useWindowScroll:v,customScrollParent:b,windowScrollContainerState:y,deviation:P,scrollContainerState:c,footerHeight:d,headerHeight:u,initialItemCount:C,gap:A,restoreStateFrom:O,...p,initialTopMostItemIndex:j,gridState:S,totalListHeight:z,...h,startReached:U,endReached:B,rangeChanged:$,stateChanged:M,propsReady:f,stateRestoreInProgress:N,...k}}),Ms(_l,ka,ul,Nl,hl,zl,fa));function Bc(e,t,n,i){const{height:r}=n;if(void 0===r||0===i.length)return{top:0,bottom:0};return{top:Uc(e,t,n,i[0].index),bottom:Uc(e,t,n,i[i.length-1].index)+r}}function Uc(e,t,n,i){const r=$c(e.width,n.width,t.column),o=Mc(i/r),s=o*n.height+Nc(0,o-1)*t.row;return s>0?s+t.row:s}function $c(e,t,n){return Nc(1,Mc((e+n)/(Mc(t)+n)))}const zc=aa((()=>{const e=Hs((e=>`Item ${e}`)),t=Hs({}),n=Hs(null),i=Hs("virtuoso-grid-item"),r=Hs("virtuoso-grid-list"),o=Hs(tc),s=Hs("div"),a=Hs(Ds),l=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return qs(Ks(t,Xs((t=>t[e])),Ys()),n)};return{context:n,itemContent:e,components:t,computeItemKey:o,itemClassName:i,listClassName:r,headerFooterTag:s,scrollerRef:a,FooterComponent:l("Footer"),HeaderComponent:l("Header"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),ScrollerComponent:l("Scroller","div"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}})),Vc=aa((e=>{let[t,n]=e;return{...t,...n}}),Ms(Fc,zc)),Hc=t.memo((function(){const e=Jc("gridState"),n=Jc("listClassName"),i=Jc("itemClassName"),r=Jc("itemContent"),o=Jc("computeItemKey"),s=Jc("isSeeking"),a=Xc("scrollHeight"),l=Jc("ItemComponent"),c=Jc("ListComponent"),d=Jc("ScrollSeekPlaceholder"),u=Jc("context"),h=Xc("itemDimensions"),p=Xc("gap"),f=Jc("log"),m=Jc("stateRestoreInProgress"),g=ga(t.useMemo((()=>e=>{const t=e.parentElement.parentElement.scrollHeight;a(t);const n=e.firstChild;if(n){const{width:e,height:t}=n.getBoundingClientRect();h({width:e,height:t})}p({row:nd("row-gap",getComputedStyle(e).rowGap,f),column:nd("column-gap",getComputedStyle(e).columnGap,f)})}),[a,h,p,f]));return m?null:t.createElement(c,{ref:g,className:n,...uc(c,u),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list"},e.items.map((n=>{const a=o(n.index,n.data,u);return s?t.createElement(d,{key:a,...uc(d,u),index:n.index,height:e.itemHeight,width:e.itemWidth}):t.createElement(l,{...uc(l,u),className:i,"data-index":n.index,key:a},r(n.index,n.data,u))})))})),Wc=t.memo((function(){const e=Jc("HeaderComponent"),n=Xc("headerHeight"),i=Jc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Jc("context");return e?t.createElement(i,{ref:r},t.createElement(e,uc(e,o))):null})),qc=t.memo((function(){const e=Jc("FooterComponent"),n=Xc("footerHeight"),i=Jc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Jc("context");return e?t.createElement(i,{ref:r},t.createElement(e,uc(e,o))):null})),Kc=e=>{let{children:n}=e;const i=t.useContext(ec),r=Xc("itemDimensions"),o=Xc("viewportDimensions"),s=ga(t.useMemo((()=>e=>{o(e.getBoundingClientRect())}),[o]));return t.useEffect((()=>{i&&(o({height:i.viewportHeight,width:i.viewportWidth}),r({height:i.itemHeight,width:i.itemWidth}))}),[i,o,r]),t.createElement("div",{style:cc(!1),ref:s},n)},Gc=e=>{let{children:n}=e;const i=t.useContext(ec),r=Xc("windowViewportRect"),o=Xc("itemDimensions"),s=Jc("customScrollParent"),a=Jl(r,s);return t.useEffect((()=>{i&&(o({height:i.itemHeight,width:i.itemWidth}),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:i.viewportWidth}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(!1)},n)},Yc=t.memo((function(e){let{...n}=e;const i=Jc("useWindowScroll"),r=Jc("customScrollParent"),o=r||i?td:ed,s=r||i?Gc:Kc;return t.createElement(o,{...n},t.createElement(s,null,t.createElement(Wc,null),t.createElement(Hc,null),t.createElement(qc,null)))})),{Component:Qc,usePublisher:Xc,useEmitterValue:Jc,useEmitter:Zc}=da(Vc,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged"}},Yc),ed=mc({usePublisher:Xc,useEmitterValue:Jc,useEmitter:Zc}),td=gc({usePublisher:Xc,useEmitterValue:Jc,useEmitter:Zc});function nd(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,ha.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}const id=aa((()=>{const e=Hs((e=>t.createElement("td",null,"Item $",e))),n=Hs(null),i=Hs(null),r=Hs(null),o=Hs({}),s=Hs(tc),a=Hs(Ds),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return qs(Ks(o,Xs((t=>t[e])),Ys()),t)};return{context:n,itemContent:e,fixedHeaderContent:i,fixedFooterContent:r,components:o,computeItemKey:s,scrollerRef:a,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableFooterComponent:l("TableFoot","tfoot"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}})),rd=aa((e=>{let[t,n]=e;return{...t,...n}}),Ms(Gl,id)),od=e=>{let{height:n}=e;return t.createElement("tr",null,t.createElement("td",{style:{height:n}}))},sd=e=>{let{height:n}=e;return t.createElement("tr",null,t.createElement("td",{style:{height:n,padding:0,border:0}}))},ad={overflowAnchor:"none"},ld=t.memo((function(){const e=fd("listState"),n=pd("sizeRanges"),i=fd("useWindowScroll"),r=fd("customScrollParent"),o=pd("windowScrollContainerState"),s=pd("scrollContainerState"),a=r||i?o:s,l=fd("itemContent"),c=fd("trackItemSizes"),d=fd("itemSize"),u=fd("log"),{callbackRef:h,ref:p}=va(n,d,c,a,u,void 0,r),[f,m]=t.useState(0);md("deviation",(e=>{f!==e&&(p.current.style.marginTop=`${e}px`,m(e))}));const g=fd("EmptyPlaceholder"),v=fd("ScrollSeekPlaceholder")||od,b=fd("FillerRow")||sd,y=fd("TableBodyComponent"),x=fd("TableRowComponent"),k=fd("computeItemKey"),w=fd("isSeeking"),C=fd("paddingTopAddition"),S=fd("firstItemIndex"),T=fd("statefulTotalCount"),E=fd("context");if(0===T&&g)return t.createElement(g,uc(g,E));const _=e.offsetTop+C+f,I=e.offsetBottom,P=_>0?t.createElement(b,{height:_,key:"padding-top",context:E}):null,R=I>0?t.createElement(b,{height:I,key:"padding-bottom",context:E}):null,A=e.items.map((e=>{const n=e.originalIndex,i=k(n+S,e.data,E);return w?t.createElement(v,{...uc(v,E),key:i,index:e.index,height:e.size,type:e.type||"item"}):t.createElement(x,{...uc(x,E),...hc(x,e.data),key:i,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:ad},l(e.index,e.data,E))}));return t.createElement(y,{ref:h,"data-testid":"virtuoso-item-list",...uc(y,E)},[P,...A,R])})),cd=e=>{let{children:n}=e;const i=t.useContext(Zl),r=pd("viewportHeight"),o=pd("fixedItemHeight"),s=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r]));return t.useEffect((()=>{i&&(r(i.viewportHeight),o(i.itemHeight))}),[i,r,o]),t.createElement("div",{style:cc(!1),ref:s,"data-viewport-type":"element"},n)},dd=e=>{let{children:n}=e;const i=t.useContext(Zl),r=pd("windowViewportRect"),o=pd("fixedItemHeight"),s=fd("customScrollParent"),a=Jl(r,s);return t.useEffect((()=>{i&&(o(i.itemHeight),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(!1),"data-viewport-type":"window"},n)},ud=t.memo((function(e){const n=fd("useWindowScroll"),i=fd("customScrollParent"),r=pd("fixedHeaderHeight"),o=pd("fixedFooterHeight"),s=fd("fixedHeaderContent"),a=fd("fixedFooterContent"),l=fd("context"),c=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r])),d=ga(t.useMemo((()=>_s(o,(e=>ba(e,"height")))),[o])),u=i||n?vd:gd,h=i||n?dd:cd,p=fd("TableComponent"),f=fd("TableHeadComponent"),m=fd("TableFooterComponent"),g=s?t.createElement(f,{key:"TableHead",style:{zIndex:2,position:"sticky",top:0},ref:c,...uc(f,l)},s()):null,v=a?t.createElement(m,{key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:d,...uc(m,l)},a()):null;return t.createElement(u,{...e},t.createElement(h,null,t.createElement(p,{style:{borderSpacing:0,overflowAnchor:"none"},...uc(p,l)},[g,t.createElement(ld,{key:"TableBody"}),v])))})),{Component:hd,usePublisher:pd,useEmitterValue:fd,useEmitter:md}=da(rd,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ud),gd=mc({usePublisher:pd,useEmitterValue:fd,useEmitter:md}),vd=gc({usePublisher:pd,useEmitterValue:fd,useEmitter:md});var bd=function(){return bd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},bd.apply(this,arguments)};Object.create;function yd(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var xd=n(7324),kd=n.n(xd),wd="-ms-",Cd="-moz-",Sd="-webkit-",Td="comm",Ed="rule",_d="decl",Id="@import",Pd="@keyframes",Rd="@layer",Ad=Math.abs,Md=String.fromCharCode,Od=Object.assign;function Nd(e){return e.trim()}function jd(e,t){return(e=t.exec(e))?e[0]:e}function Dd(e,t,n){return e.replace(t,n)}function Ld(e,t,n){return e.indexOf(t,n)}function Fd(e,t){return 0|e.charCodeAt(t)}function Bd(e,t,n){return e.slice(t,n)}function Ud(e){return e.length}function $d(e){return e.length}function zd(e,t){return t.push(e),e}function Vd(e,t){return e.filter((function(e){return!jd(e,t)}))}var Hd=1,Wd=1,qd=0,Kd=0,Gd=0,Yd="";function Qd(e,t,n,i,r,o,s,a){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:Hd,column:Wd,length:s,return:"",siblings:a}}function Xd(e,t){return Od(Qd("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Jd(e){for(;e.root;)e=Xd(e.root,{children:[e]});zd(e,e.siblings)}function Zd(){return Gd=Kd>0?Fd(Yd,--Kd):0,Wd--,10===Gd&&(Wd=1,Hd--),Gd}function eu(){return Gd=Kd<qd?Fd(Yd,Kd++):0,Wd++,10===Gd&&(Wd=1,Hd++),Gd}function tu(){return Fd(Yd,Kd)}function nu(){return Kd}function iu(e,t){return Bd(Yd,e,t)}function ru(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ou(e){return Hd=Wd=1,qd=Ud(Yd=e),Kd=0,[]}function su(e){return Yd="",e}function au(e){return Nd(iu(Kd-1,du(91===e?e+2:40===e?e+1:e)))}function lu(e){for(;(Gd=tu())&&Gd<33;)eu();return ru(e)>2||ru(Gd)>3?"":" "}function cu(e,t){for(;--t&&eu()&&!(Gd<48||Gd>102||Gd>57&&Gd<65||Gd>70&&Gd<97););return iu(e,nu()+(t<6&&32==tu()&&32==eu()))}function du(e){for(;eu();)switch(Gd){case e:return Kd;case 34:case 39:34!==e&&39!==e&&du(Gd);break;case 40:41===e&&du(e);break;case 92:eu()}return Kd}function uu(e,t){for(;eu()&&e+Gd!==57&&(e+Gd!==84||47!==tu()););return"/*"+iu(t,Kd-1)+"*"+Md(47===e?e:eu())}function hu(e){for(;!ru(tu());)eu();return iu(e,Kd)}function pu(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i],i,e,t)||"";return n}function fu(e,t,n,i){switch(e.type){case Rd:if(e.children.length)break;case Id:case _d:return e.return=e.return||e.value;case Td:return"";case Pd:return e.return=e.value+"{"+pu(e.children,i)+"}";case Ed:if(!Ud(e.value=e.props.join(",")))return""}return Ud(n=pu(e.children,i))?e.return=e.value+"{"+n+"}":""}function mu(e,t,n){switch(function(e,t){return 45^Fd(e,0)?(((t<<2^Fd(e,0))<<2^Fd(e,1))<<2^Fd(e,2))<<2^Fd(e,3):0}(e,t)){case 5103:return Sd+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sd+e+e;case 4789:return Cd+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Sd+e+Cd+e+wd+e+e;case 5936:switch(Fd(e,t+11)){case 114:return Sd+e+wd+Dd(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Sd+e+wd+Dd(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Sd+e+wd+Dd(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Sd+e+wd+e+e;case 6165:return Sd+e+wd+"flex-"+e+e;case 5187:return Sd+e+Dd(e,/(\w+).+(:[^]+)/,Sd+"box-$1$2"+wd+"flex-$1$2")+e;case 5443:return Sd+e+wd+"flex-item-"+Dd(e,/flex-|-self/g,"")+(jd(e,/flex-|baseline/)?"":wd+"grid-row-"+Dd(e,/flex-|-self/g,""))+e;case 4675:return Sd+e+wd+"flex-line-pack"+Dd(e,/align-content|flex-|-self/g,"")+e;case 5548:return Sd+e+wd+Dd(e,"shrink","negative")+e;case 5292:return Sd+e+wd+Dd(e,"basis","preferred-size")+e;case 6060:return Sd+"box-"+Dd(e,"-grow","")+Sd+e+wd+Dd(e,"grow","positive")+e;case 4554:return Sd+Dd(e,/([^-])(transform)/g,"$1"+Sd+"$2")+e;case 6187:return Dd(Dd(Dd(e,/(zoom-|grab)/,Sd+"$1"),/(image-set)/,Sd+"$1"),e,"")+e;case 5495:case 3959:return Dd(e,/(image-set\([^]*)/,Sd+"$1$`$1");case 4968:return Dd(Dd(e,/(.+:)(flex-)?(.*)/,Sd+"box-pack:$3"+wd+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sd+e+e;case 4200:if(!jd(e,/flex-|baseline/))return wd+"grid-column-align"+Bd(e,t)+e;break;case 2592:case 3360:return wd+Dd(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,jd(e.props,/grid-\w+-end/)}))?~Ld(e+(n=n[t].value),"span",0)?e:wd+Dd(e,"-start","")+e+wd+"grid-row-span:"+(~Ld(n,"span",0)?jd(n,/\d+/):+jd(n,/\d+/)-+jd(e,/\d+/))+";":wd+Dd(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return jd(e.props,/grid-\w+-start/)}))?e:wd+Dd(Dd(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Dd(e,/(.+)-inline(.+)/,Sd+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ud(e)-1-t>6)switch(Fd(e,t+1)){case 109:if(45!==Fd(e,t+4))break;case 102:return Dd(e,/(.+:)(.+)-([^]+)/,"$1"+Sd+"$2-$3$1"+Cd+(108==Fd(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ld(e,"stretch",0)?mu(Dd(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Dd(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,i,r,o,s,a){return wd+n+":"+i+a+(r?wd+n+"-span:"+(o?s:+s-+i)+a:"")+e}));case 4949:if(121===Fd(e,t+6))return Dd(e,":",":"+Sd)+e;break;case 6444:switch(Fd(e,45===Fd(e,14)?18:11)){case 120:return Dd(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Sd+(45===Fd(e,14)?"inline-":"")+"box$3$1"+Sd+"$2$3$1"+wd+"$2box$3")+e;case 100:return Dd(e,":",":"+wd)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Dd(e,"scroll-","scroll-snap-")+e}return e}function gu(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case _d:return void(e.return=mu(e.value,e.length,n));case Pd:return pu([Xd(e,{value:Dd(e.value,"@","@"+Sd)})],i);case Ed:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(jd(t,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Jd(Xd(e,{props:[Dd(t,/:(read-\w+)/,":"+Cd+"$1")]})),Jd(Xd(e,{props:[t]})),Od(e,{props:Vd(n,i)});break;case"::placeholder":Jd(Xd(e,{props:[Dd(t,/:(plac\w+)/,":"+Sd+"input-$1")]})),Jd(Xd(e,{props:[Dd(t,/:(plac\w+)/,":"+Cd+"$1")]})),Jd(Xd(e,{props:[Dd(t,/:(plac\w+)/,wd+"input-$1")]})),Jd(Xd(e,{props:[t]})),Od(e,{props:Vd(n,i)})}return""}))}}function vu(e){return su(bu("",null,null,null,[""],e=ou(e),0,[0],e))}function bu(e,t,n,i,r,o,s,a,l){for(var c=0,d=0,u=s,h=0,p=0,f=0,m=1,g=1,v=1,b=0,y="",x=r,k=o,w=i,C=y;g;)switch(f=b,b=eu()){case 40:if(108!=f&&58==Fd(C,u-1)){-1!=Ld(C+=Dd(au(b),"&","&\f"),"&\f",Ad(c?a[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:C+=au(b);break;case 9:case 10:case 13:case 32:C+=lu(f);break;case 92:C+=cu(nu()-1,7);continue;case 47:switch(tu()){case 42:case 47:zd(xu(uu(eu(),nu()),t,n,l),l);break;default:C+="/"}break;case 123*m:a[c++]=Ud(C)*v;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+d:-1==v&&(C=Dd(C,/\f/g,"")),p>0&&Ud(C)-u&&zd(p>32?ku(C+";",i,n,u-1,l):ku(Dd(C," ","")+";",i,n,u-2,l),l);break;case 59:C+=";";default:if(zd(w=yu(C,t,n,c,d,r,a,y,x=[],k=[],u,o),o),123===b)if(0===d)bu(C,t,w,w,x,o,u,a,k);else switch(99===h&&110===Fd(C,3)?100:h){case 100:case 108:case 109:case 115:bu(e,w,w,i&&zd(yu(e,w,w,0,0,r,a,y,r,x=[],u,k),k),r,k,u,a,i?x:k);break;default:bu(C,w,w,w,[""],k,0,a,k)}}c=d=p=0,m=v=1,y=C="",u=s;break;case 58:u=1+Ud(C),p=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==Zd())continue;switch(C+=Md(b),b*m){case 38:v=d>0?1:(C+="\f",-1);break;case 44:a[c++]=(Ud(C)-1)*v,v=1;break;case 64:45===tu()&&(C+=au(eu())),h=tu(),d=u=Ud(y=C+=hu(nu())),b++;break;case 45:45===f&&2==Ud(C)&&(m=0)}}return o}function yu(e,t,n,i,r,o,s,a,l,c,d,u){for(var h=r-1,p=0===r?o:[""],f=$d(p),m=0,g=0,v=0;m<i;++m)for(var b=0,y=Bd(e,h+1,h=Ad(g=s[m])),x=e;b<f;++b)(x=Nd(g>0?p[b]+" "+y:Dd(y,/&\f/g,p[b])))&&(l[v++]=x);return Qd(e,t,n,0===r?Ed:a,l,c,d,u)}function xu(e,t,n,i){return Qd(e,t,n,Td,Md(Gd),Bd(e,2,-2),0,i)}function ku(e,t,n,i,r){return Qd(e,t,n,_d,Bd(e,0,i),Bd(e,i+1,-1),i,r)}var wu={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Cu="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Su="active",Tu="data-styled-version",Eu="6.1.13",_u="/*!sc*/\n",Iu="undefined"!=typeof window&&"HTMLElement"in window,Pu=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Ru=(new Set,Object.freeze([])),Au=Object.freeze({});function Mu(e,t,n){return void 0===n&&(n=Au),e.theme!==n.theme&&e.theme||t||n.theme}var Ou=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Nu=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ju=/(^-|-$)/g;function Du(e){return e.replace(Nu,"-").replace(ju,"")}var Lu=/(a)(d)/gi,Fu=52,Bu=function(e){return String.fromCharCode(e+(e>25?39:97))};function Uu(e){var t,n="";for(t=Math.abs(e);t>Fu;t=t/Fu|0)n=Bu(t%Fu)+n;return(Bu(t%Fu)+n).replace(Lu,"$1-$2")}var $u,zu=5381,Vu=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Hu=function(e){return Vu(zu,e)};function Wu(e){return Uu(Hu(e)>>>0)}function qu(e){return e.displayName||e.name||"Component"}function Ku(e){return"string"==typeof e&&!0}var Gu="function"==typeof Symbol&&Symbol.for,Yu=Gu?Symbol.for("react.memo"):60115,Qu=Gu?Symbol.for("react.forward_ref"):60112,Xu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ju={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Zu={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eh=(($u={})[Qu]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$u[Yu]=Zu,$u);function th(e){return("type"in(t=e)&&t.type.$$typeof)===Yu?Zu:"$$typeof"in e?eh[e.$$typeof]:Xu;var t}var nh=Object.defineProperty,ih=Object.getOwnPropertyNames,rh=Object.getOwnPropertySymbols,oh=Object.getOwnPropertyDescriptor,sh=Object.getPrototypeOf,ah=Object.prototype;function lh(e,t,n){if("string"!=typeof t){if(ah){var i=sh(t);i&&i!==ah&&lh(e,i,n)}var r=ih(t);rh&&(r=r.concat(rh(t)));for(var o=th(e),s=th(t),a=0;a<r.length;++a){var l=r[a];if(!(l in Ju||n&&n[l]||s&&l in s||o&&l in o)){var c=oh(t,l);try{nh(e,l,c)}catch(e){}}}}return e}function ch(e){return"function"==typeof e}function dh(e){return"object"==typeof e&&"styledComponentId"in e}function uh(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function hh(e,t){if(0===e.length)return"";for(var n=e[0],i=1;i<e.length;i++)n+=t?t+e[i]:e[i];return n}function ph(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function fh(e,t,n){if(void 0===n&&(n=!1),!n&&!ph(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=fh(e[i],t[i]);else if(ph(t))for(var i in t)e[i]=fh(e[i],t[i]);return e}function mh(e,t){Object.defineProperty(e,"toString",{value:t})}function gh(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var vh=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)if((r<<=1)<0)throw gh(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=i;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,o=i;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(_u);return t},e}(),bh=new Map,yh=new Map,xh=1,kh=function(e){if(bh.has(e))return bh.get(e);for(;yh.has(xh);)xh++;var t=xh++;return bh.set(e,t),yh.set(t,e),t},wh=function(e,t){xh=t+1,bh.set(e,t),yh.set(t,e)},Ch="style[".concat(Cu,"][").concat(Tu,'="').concat(Eu,'"]'),Sh=new RegExp("^".concat(Cu,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Th=function(e,t,n){for(var i,r=n.split(","),o=0,s=r.length;o<s;o++)(i=r[o])&&e.registerName(t,i)},Eh=function(e,t){for(var n,i=(null!==(n=t.textContent)&&void 0!==n?n:"").split(_u),r=[],o=0,s=i.length;o<s;o++){var a=i[o].trim();if(a){var l=a.match(Sh);if(l){var c=0|parseInt(l[1],10),d=l[2];0!==c&&(wh(d,c),Th(e,d,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(a)}}},_h=function(e){for(var t=document.querySelectorAll(Ch),n=0,i=t.length;n<i;n++){var r=t[n];r&&r.getAttribute(Cu)!==Su&&(Eh(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function Ih(){return n.nc}var Ph=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Cu,"]")));return t[t.length-1]}(n),o=void 0!==r?r.nextSibling:null;i.setAttribute(Cu,Su),i.setAttribute(Tu,Eu);var s=Ih();return s&&i.setAttribute("nonce",s),n.insertBefore(i,o),i},Rh=function(){function e(e){this.element=Ph(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}throw gh(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ah=function(){function e(e){this.element=Ph(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Mh=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Oh=Iu,Nh={isServer:!Iu,useCSSOMInjection:!Pu},jh=function(){function e(e,t,n){void 0===e&&(e=Au),void 0===t&&(t={});var i=this;this.options=bd(bd({},Nh),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Iu&&Oh&&(Oh=!1,_h(this)),mh(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=function(n){var r=function(e){return yh.get(e)}(n);if(void 0===r)return"continue";var o=e.names.get(r),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(Cu,".g").concat(n,'[id="').concat(r,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),i+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(_u)},o=0;o<n;o++)r(o);return i}(i)}))}return e.registerId=function(e){return kh(e)},e.prototype.rehydrate=function(){!this.server&&Iu&&_h(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(bd(bd({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Mh(n):t?new Rh(n):new Ah(n)}(this.options),new vh(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(kh(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(kh(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(kh(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Dh=/&/g,Lh=/^\s*\/\/.*$/gm;function Fh(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Fh(e.children,t)),e}))}function Bh(e){var t,n,i,r=void 0===e?Au:e,o=r.options,s=void 0===o?Au:o,a=r.plugins,l=void 0===a?Ru:a,c=function(e,i,r){return r.startsWith(n)&&r.endsWith(n)&&r.replaceAll(n,"").length>0?".".concat(t):e},d=l.slice();d.push((function(e){e.type===Ed&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Dh,n).replace(i,c))})),s.prefix&&d.push(gu),d.push(fu);var u=function(e,r,o,a){void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=r,i=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Lh,""),c=vu(o||r?"".concat(o," ").concat(r," { ").concat(l," }"):l);s.namespace&&(c=Fh(c,s.namespace));var u,h=[];return pu(c,function(e){var t=$d(e);return function(n,i,r,o){for(var s="",a=0;a<t;a++)s+=e[a](n,i,r,o)||"";return s}}(d.concat((u=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&u(e)})))),h};return u.hash=l.length?l.reduce((function(e,t){return t.name||gh(15),Vu(e,t.name)}),zu).toString():"",u}var Uh=new jh,$h=Bh(),zh=t.createContext({shouldForwardProp:void 0,styleSheet:Uh,stylis:$h}),Vh=(zh.Consumer,t.createContext(void 0));function Hh(){return(0,t.useContext)(zh)}function Wh(e){var n=(0,t.useState)(e.stylisPlugins),i=n[0],r=n[1],o=Hh().styleSheet,s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)((function(){return Bh({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:i})}),[e.enableVendorPrefixes,e.namespace,i]);(0,t.useEffect)((function(){kd()(i,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return t.createElement(zh.Provider,{value:l},t.createElement(Vh.Provider,{value:a},e.children))}var qh=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=$h);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,mh(this,(function(){throw gh(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=$h),this.name+e.hash},e}(),Kh=function(e){return e>="A"&&e<="Z"};function Gh(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(1===n&&"-"===i&&"-"===e[0])return e;Kh(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var Yh=function(e){return null==e||!1===e||""===e},Qh=function(e){var t,n,i=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!Yh(o)&&(Array.isArray(o)&&o.isCss||ch(o)?i.push("".concat(Gh(r),":"),o,";"):ph(o)?i.push.apply(i,yd(yd(["".concat(r," {")],Qh(o),!1),["}"],!1)):i.push("".concat(Gh(r),": ").concat((t=r,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in wu||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function Xh(e,t,n,i){return Yh(e)?[]:dh(e)?[".".concat(e.styledComponentId)]:ch(e)?!ch(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:Xh(e(t),t,n,i):e instanceof qh?n?(e.inject(n,i),[e.getName(i)]):[e]:ph(e)?Qh(e):Array.isArray(e)?Array.prototype.concat.apply(Ru,e.map((function(e){return Xh(e,t,n,i)}))):[e.toString()];var r}function Jh(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(ch(n)&&!dh(n))return!1}return!0}var Zh=Hu(Eu),ep=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Jh(e),this.componentId=t,this.baseHash=Vu(Zh,t),this.baseStyle=n,jh.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=uh(i,this.staticRulesId);else{var r=hh(Xh(this.rules,e,t,n)),o=Uu(Vu(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}i=uh(i,o),this.staticRulesId=o}else{for(var a=Vu(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var d=this.rules[c];if("string"==typeof d)l+=d;else if(d){var u=hh(Xh(d,e,t,n));a=Vu(a,u+c),l+=u}}if(l){var h=Uu(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),i=uh(i,h)}}return i},e}(),tp=t.createContext(void 0);tp.Consumer;var np={};new Set;function ip(e,n,i){var r=dh(e),o=e,s=!Ku(e),a=n.attrs,l=void 0===a?Ru:a,c=n.componentId,d=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Du(e);np[n]=(np[n]||0)+1;var i="".concat(n,"-").concat(Wu(Eu+n+np[n]));return t?"".concat(t,"-").concat(i):i}(n.displayName,n.parentComponentId):c,u=n.displayName,h=void 0===u?function(e){return Ku(e)?"styled.".concat(e):"Styled(".concat(qu(e),")")}(e):u,p=n.displayName&&n.componentId?"".concat(Du(n.displayName),"-").concat(n.componentId):n.componentId||d,f=r&&o.attrs?o.attrs.concat(l).filter(Boolean):l,m=n.shouldForwardProp;if(r&&o.shouldForwardProp){var g=o.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var b=new ep(i,p,r?o.componentStyle:void 0);function y(e,n){return function(e,n,i){var r=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,d=t.useContext(tp),u=Hh(),h=e.shouldForwardProp||u.shouldForwardProp,p=Mu(n,d,s)||Au,f=function(e,t,n){for(var i,r=bd(bd({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=ch(i=e[o])?i(r):i;for(var a in s)r[a]="className"===a?uh(r[a],s[a]):"style"===a?bd(bd({},r[a]),s[a]):s[a]}return t.className&&(r.className=uh(r.className,t.className)),r}(r,n,p),m=f.as||c,g={};for(var v in f)void 0===f[v]||"$"===v[0]||"as"===v||"theme"===v&&f.theme===p||("forwardedAs"===v?g.as=f.forwardedAs:h&&!h(v,m)||(g[v]=f[v]));var b=function(e,t){var n=Hh();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,f),y=uh(a,l);return b&&(y+=" "+b),f.className&&(y+=" "+f.className),g[Ku(m)&&!Ou.has(m)?"class":"className"]=y,g.ref=i,(0,t.createElement)(m,g)}(x,e,n)}y.displayName=h;var x=t.forwardRef(y);return x.attrs=f,x.componentStyle=b,x.displayName=h,x.shouldForwardProp=m,x.foldedComponentIds=r?uh(o.foldedComponentIds,o.styledComponentId):"",x.styledComponentId=p,x.target=r?o.target:e,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,r=t;i<r.length;i++)fh(e,r[i],!0);return e}({},o.defaultProps,e):e}}),mh(x,(function(){return".".concat(x.styledComponentId)})),s&&lh(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function rp(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n}var op=function(e){return Object.assign(e,{isCss:!0})};function sp(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ch(e)||ph(e))return op(Xh(rp(Ru,yd([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?Xh(i):op(Xh(rp(i,t)))}function ap(e,t,n){if(void 0===n&&(n=Au),!t)throw gh(1,t);var i=function(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,n,sp.apply(void 0,yd([i],r,!1)))};return i.attrs=function(i){return ap(e,t,bd(bd({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return ap(e,t,bd(bd({},n),i))},i}var lp=function(e){return ap(ip,e)},cp=lp;Ou.forEach((function(e){cp[e]=lp(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Jh(e),jh.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,i){var r=i(hh(Xh(this.rules,t,n,i)),""),o=this.componentId+e;n.insertRules(o,o,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,i){e>2&&jh.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Ih(),i=hh([n&&'nonce="'.concat(n,'"'),"".concat(Cu,'="true"'),"".concat(Tu,'="').concat(Eu,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw gh(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw gh(2);var i=e.instance.toString();if(!i)return[];var r=((n={})[Cu]="",n[Tu]=Eu,n.dangerouslySetInnerHTML={__html:i},n),o=Ih();return o&&(r.nonce=o),[t.createElement("style",bd({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new jh({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw gh(2);return t.createElement(Wh,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw gh(3)}})(),"__sc-".concat(Cu,"__");function dp(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}const up="Output:";const hp="claude-3-7-sonnet-20250219",pp={"claude-3-7-sonnet-20250219":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-sonnet-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-haiku-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!0,inputPrice:.8,outputPrice:4,cacheWritesPrice:1,cacheReadsPrice:.08},"claude-3-opus-20240229":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!0,inputPrice:15,outputPrice:75,cacheWritesPrice:18.75,cacheReadsPrice:1.5},"claude-3-haiku-20240307":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!0,inputPrice:.25,outputPrice:1.25,cacheWritesPrice:.3,cacheReadsPrice:.03}},fp={"anthropic.claude-3-5-sonnet-20241022-v2:0":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:15,supportsAnthropicPromptCache:!0},"anthropic.claude-3-5-haiku-20241022-v1:0":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!1,inputPrice:1,outputPrice:5,supportsAnthropicPromptCache:!1},"anthropic.claude-3-5-sonnet-20240620-v1:0":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:15,supportsAnthropicPromptCache:!1},"anthropic.claude-3-opus-20240229-v1:0":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:75,supportsAnthropicPromptCache:!1},"anthropic.claude-3-sonnet-20240229-v1:0":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:15,supportsAnthropicPromptCache:!1},"anthropic.claude-3-haiku-20240307-v1:0":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:.25,outputPrice:1.25,supportsAnthropicPromptCache:!1}},mp="anthropic/claude-3.5-sonnet:beta",gp={maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3,supportsAnthropicPromptCache:!1,description:"The new Claude 3.5 Sonnet delivers better-than-Opus capabilities, faster-than-Sonnet speeds, at the same Sonnet prices. Sonnet is particularly good at:\n\n- Coding: New Sonnet scores ~49% on SWE-Bench Verified, higher than the last best score, and without any fancy prompt scaffolding\n- Data science: Augments human data science expertise; navigates unstructured data while using multiple tools for insights\n- Visual processing: excelling at interpreting charts, graphs, and images, accurately transcribing text to derive insights beyond just the text alone\n- Agentic tasks: exceptional tool use, making it great at agentic tasks (i.e. complex, multi-step problem solving tasks that require engaging with other systems)\n\n#multimodal\n\n_This is a faster endpoint, made available in collaboration with Anthropic, that is self-moderated: response moderation happens on the provider's side instead of OpenRouter's. For requests that pass moderation, it's identical to the [Standard](/anthropic/claude-3.5-sonnet) variant._"},vp={"claude-3-5-sonnet-v2@20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:15,supportsAnthropicPromptCache:!0},"claude-3-5-sonnet@20240620":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:15,supportsAnthropicPromptCache:!1},"claude-3-5-haiku@20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!1,inputPrice:1,outputPrice:5,supportsAnthropicPromptCache:!1},"claude-3-opus@20240229":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:75,supportsAnthropicPromptCache:!1},"claude-3-haiku@20240307":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:.25,outputPrice:1.25,supportsAnthropicPromptCache:!1}},bp={maxTokens:-1,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},yp={"gemini-2.0-flash-exp":{maxTokens:8192,contextWindow:1048576,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},"gemini-1.5-flash-002":{maxTokens:8192,contextWindow:1048576,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},"gemini-1.5-flash-exp-0827":{maxTokens:8192,contextWindow:1048576,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},"gemini-1.5-flash-8b-exp-0827":{maxTokens:8192,contextWindow:1048576,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},"gemini-1.5-pro-002":{maxTokens:8192,contextWindow:2097152,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},"gemini-1.5-pro-exp-0827":{maxTokens:8192,contextWindow:2097152,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1}},xp={o1:{maxTokens:32768,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:60,requestPrice:.08,supportsAnthropicPromptCache:!1},"o1-mini":{maxTokens:65536,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:12,supportsAnthropicPromptCache:!1},"gpt-4o":{maxTokens:4096,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:2.5,outputPrice:10,supportsAnthropicPromptCache:!1},"gpt-4o-mini":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:.15,outputPrice:.6,supportsAnthropicPromptCache:!1}},kp={"deepseek-chat":{maxTokens:8e3,contextWindow:64e3,supportsAnthropicPromptCache:!1,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-reasoner":{maxTokens:8e3,contextWindow:64e3,supportsAnthropicPromptCache:!1,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14}},wp={"qwen2.5-coder-32b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-14b-instruct":{maxTokens:8192,contextWindow:131072,supportsAnthropicPromptCache:!1,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-7b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:.001,outputPrice:.002,cacheWritesPrice:.001,cacheReadsPrice:.002},"qwen2.5-coder-3b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-1.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-0.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,supportsAnthropicPromptCache:!1,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo-latest":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:2},"qwen-max-latest":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwen-coder-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,supportsAnthropicPromptCache:!1,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.6,cacheWritesPrice:.3,cacheReadsPrice:.6},"qwen-max":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,supportsAnthropicPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"deepseek-v3":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,supportsAnthropicPromptCache:!1,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-r1":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,supportsAnthropicPromptCache:!1,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14},"qwen-vl-max":{maxTokens:30720,contextWindow:32768,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-max-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-plus":{maxTokens:6e3,contextWindow:8e3,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5},"qwen-vl-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5}},Cp={"mistral-large-2411":{maxTokens:131e3,contextWindow:131e3,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:2,outputPrice:6},"pixtral-large-2411":{maxTokens:131e3,contextWindow:131e3,supportsAnthropicPromptCache:!1,supportsImages:!0,supportsPromptCache:!1,inputPrice:2,outputPrice:6},"ministral-3b-2410":{maxTokens:131e3,supportsAnthropicPromptCache:!1,contextWindow:131e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.04,outputPrice:.04},"ministral-8b-2410":{maxTokens:131e3,contextWindow:131e3,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.1,outputPrice:.1},"mistral-small-2501":{maxTokens:32e3,contextWindow:32e3,supportsAnthropicPromptCache:!1,supportsImages:!1,supportsPromptCache:!1,inputPrice:.1,outputPrice:.3},"pixtral-12b-2409":{maxTokens:131e3,contextWindow:131e3,supportsAnthropicPromptCache:!1,supportsImages:!0,supportsPromptCache:!1,inputPrice:.15,outputPrice:.15},"open-mistral-nemo-2407":{maxTokens:131e3,contextWindow:131e3,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.15,outputPrice:.15},"open-codestral-mamba":{maxTokens:256e3,contextWindow:256e3,supportsImages:!1,supportsAnthropicPromptCache:!1,supportsPromptCache:!1,inputPrice:.15,outputPrice:.15},"codestral-2501":{maxTokens:256e3,supportsAnthropicPromptCache:!1,contextWindow:256e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.9}};const Sp=new class{constructor(){this.vsCodeApi=void 0,"function"===typeof acquireVsCodeApi&&(this.vsCodeApi=acquireVsCodeApi())}postMessage(e){this.vsCodeApi?this.vsCodeApi.postMessage(e):console.log(e)}getState(){if(this.vsCodeApi)return this.vsCodeApi.getState();{const e=localStorage.getItem("vscodeState");return e?JSON.parse(e):void 0}}setState(e){return this.vsCodeApi?this.vsCodeApi.setState(e):(localStorage.setItem("vscodeState",JSON.stringify(e)),e)}},Tp={".hljs-comment":["comment"],".hljs-tag":["tag"],".hljs-doctag":["keyword"],".hljs-keyword":["keyword"],".hljs-meta .hljs-keyword":["keyword"],".hljs-template-tag":["keyword"],".hljs-template-variable":["keyword"],".hljs-type":["keyword"],".hljs-variable.language_":["keyword"],".hljs-title":["title","function","class"],".hljs-title.class_":["title","function","class","variable"],".hljs-title.class_.inherited__":["title","function","class","variable"],".hljs-title.function_":["support.function","entity.name.function","title","function","class"],".hljs-built_in":["support.function","entity.name.function","title","function","class"],".hljs-name":["constant"],".hljs-attr":["variable","operator","number"],".hljs-attribute":["attribute","variable","operator","number"],".hljs-literal":["variable","operator","number"],".hljs-meta":["variable","operator","number"],".hljs-number":["constant.numeric","number","variable","operator"],".hljs-operator":["variable","operator","number"],".hljs-variable":["variable","operator","number"],".hljs-selector-attr":["variable","operator","number"],".hljs-selector-class":["variable","operator","number"],".hljs-selector-id":["variable","operator","number"],".hljs-regexp":["string"],".hljs-string":["string"],".hljs-meta .hljs-string":["string"],".hljs-params":["variable","operator","number"]};function Ep(e){const t=e.rules||[],n={};t.forEach((e=>{let{token:t,foreground:i}=e;i&&t&&(n[t]=i)}));const i={};return Object.keys(Tp).forEach((e=>{const t=Tp[e];for(const r of t)if(n[r]){i[e]=n[r];break}})),0===Object.keys(i).length?function(){const e=getComputedStyle(document.body).getPropertyValue("--vscode-editor-background"),{r:t,g:n,b:i}=function(e){e.startsWith("#")&&(e=e.slice(1));e.length>6&&(e=e.slice(0,6));const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return{r:t,g:n,b:i}}(e),r=(t+n+i)/3;return r>=128?{".hljs-comment":"#008000",".hljs-doctag":"#0000ff",".hljs-keyword":"#0000ff",".hljs-meta .hljs-keyword":"#0000ff",".hljs-template-tag":"#0000ff",".hljs-template-variable":"#0000ff",".hljs-type":"#0000ff",".hljs-variable.language_":"#0000ff",".hljs-title.class_":"#001080",".hljs-title.class_.inherited__":"#001080",".hljs-title.function_":"#795E26",".hljs-built_in":"#795E26",".hljs-attr":"#001080",".hljs-attribute":"#001080",".hljs-literal":"#001080",".hljs-meta":"#001080",".hljs-number":"#098658",".hljs-operator":"#001080",".hljs-variable":"#001080",".hljs-selector-attr":"#001080",".hljs-selector-class":"#001080",".hljs-selector-id":"#001080",".hljs-regexp":"#a31515",".hljs-string":"#a31515",".hljs-meta .hljs-string":"#a31515",".hljs-params":"#001080"}:{".hljs-comment":"#6A9955",".hljs-doctag":"#569cd6",".hljs-keyword":"#569cd6",".hljs-meta .hljs-keyword":"#569cd6",".hljs-template-tag":"#569cd6",".hljs-template-variable":"#569cd6",".hljs-type":"#569cd6",".hljs-variable.language_":"#569cd6",".hljs-title.class_":"#9CDCFE",".hljs-title.class_.inherited__":"#9CDCFE",".hljs-title.function_":"#DCDCAA",".hljs-built_in":"#DCDCAA",".hljs-attr":"#9CDCFE",".hljs-attribute":"#9CDCFE",".hljs-literal":"#9CDCFE",".hljs-meta":"#9CDCFE",".hljs-number":"#b5cea8",".hljs-operator":"#9CDCFE",".hljs-variable":"#9CDCFE",".hljs-selector-attr":"#9CDCFE",".hljs-selector-class":"#9CDCFE",".hljs-selector-id":"#9CDCFE",".hljs-regexp":"#ce9178",".hljs-string":"#ce9178",".hljs-meta .hljs-string":"#ce9178",".hljs-params":"#9CDCFE"}}():i}const _p={mode:"act",autoMode:!1};var Ip=n(579);const Pp=(0,t.createContext)(void 0),Rp=e=>{let{children:n}=e;const[i,r]=(0,t.useState)({version:"",blackboxMessages:[],taskHistory:[],shouldShowAnnouncement:!1,alwaysAllowReadOnly:!0,chatModeEnabled:!1,useModelFromUserKey:!1,chatSettings:_p}),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(void 0),[f,m]=(0,t.useState)([]),[g,v]=(0,t.useState)({[mp]:gp}),[b,y]=(0,t.useState)([]),[x,k]=(0,t.useState)({items:[]}),[w,C]=(0,t.useState)({}),[S,T]=(0,t.useState)(void 0),[E,_]=(0,t.useState)({browserTool:!1}),I=(0,t.useCallback)((e=>{const t=e.data;switch(t.type){case"actionToDisableEnableChat":"chatModeEnabled"===t.value?r((e=>({...e,chatModeEnabled:!0}))):"chatModeDisabled"===t.value&&r((e=>({...e,chatModeEnabled:!1})));break;case"state":{var n,i,o;r(t.state),null!==(n=t.state)&&void 0!==n&&n.providerConfigurations?C(t.state.providerConfigurations):C({}),void 0!==(null===(i=t.state)||void 0===i?void 0:i.lastOpenProvider)?T(t.state.lastOpenProvider):T(void 0);const e=null===(o=t.state)||void 0===o?void 0:o.apiConfiguration,a=!!e&&[e.apiKey,e.openRouterApiKey,e.awsRegion,e.vertexProjectId,e.openAiApiKey,e.ollamaModelId,e.lmStudioModelId,e.liteLlmApiKey,e.geminiApiKey,e.openAiNativeApiKey,e.deepSeekApiKey,e.requestyApiKey,e.togetherApiKey,e.qwenApiKey,e.mistralApiKey,e.vsCodeLmModelSelector].some((e=>void 0!==e));l(!a),s(!0);break}case"theme":if(t.text){const e=JSON.parse(t.text);d(e.isDark),p(Ep(e||{}))}break;case"workspaceUpdated":var a;m(null!==(a=t.filePaths)&&void 0!==a?a:[]);break;case"partialMessage":{const e=t.partialMessage;r((t=>{const n=dp(t.blackboxMessages,(t=>t.ts===e.ts));if(-1!==n){const i=[...t.blackboxMessages];return i[n]=e,{...t,blackboxMessages:i}}return t}));break}case"openRouterModels":{var c;const e=null!==(c=t.openRouterModels)&&void 0!==c?c:{};v({[mp]:gp,...e});break}case"mcpServers":var u;y(null!==(u=t.mcpServers)&&void 0!==u?u:[]);break;case"mcpMarketplaceCatalog":t.mcpMarketplaceCatalog&&k(t.mcpMarketplaceCatalog);break;case"providerConfigurationLoaded":t.providerName&&t.apiConfiguration&&C((e=>({...e,[t.providerName]:t.apiConfiguration})));break;case"toolConfiguration":var h;null!==(h=t.apiConfiguration)&&void 0!==h&&h.toolConfiguration&&_(t.apiConfiguration.toolConfiguration)}}),[]);u("message",I);const P=(0,t.useCallback)(((e,t)=>{C((n=>({...n,[e]:t}))),T(e),Sp.postMessage({type:"saveProviderConfiguration",providerName:e,apiConfiguration:t})}),[]),R=(0,t.useCallback)((e=>{Sp.postMessage({type:"loadProviderConfiguration",providerName:e})}),[]),A=(0,t.useCallback)((e=>{_(e),Sp.postMessage({type:"toolConfiguration",apiConfiguration:{toolConfiguration:e}})}),[]);(0,t.useEffect)((()=>{Sp.postMessage({type:"webviewDidLaunch"})}),[]);const M={...i,didHydrateState:o,showWelcome:a,theme:h,isDarkTheme:c,openRouterModels:g,mcpServers:b,mcpMarketplaceCatalog:x,filePaths:f,providerConfigurations:w,lastOpenProvider:S,toolConfiguration:E,setApiConfiguration:e=>r((t=>({...t,apiConfiguration:e}))),setCustomApiConfiguration:e=>r((t=>({...t,customApiConfiguration:e}))),setCustomInstructions:e=>r((t=>({...t,customInstructions:e}))),setAlwaysAllowReadOnly:e=>r((t=>({...t,alwaysAllowReadOnly:e}))),setShowAnnouncement:e=>r((t=>({...t,shouldShowAnnouncement:e}))),setUseModelFromUserKey:e=>{r((t=>({...t,useModelFromUserKey:e}))),Sp.postMessage({type:"useModelFromUserKey",bool:e})},setToolConfiguration:A,saveProviderConfiguration:P,loadProviderConfiguration:R};return(0,Ip.jsx)(Pp.Provider,{value:M,children:n})},Ap=()=>{const e=(0,t.useContext)(Pp);if(void 0===e)throw new Error("useExtensionState must be used within an ExtensionStateContextProvider");return e},Mp=e=>{let{showHistoryView:t}=e;const{taskHistory:n}=Ap(),i=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()};return(0,Ip.jsxs)("div",{style:{flexShrink:0},children:[(0,Ip.jsx)("style",{children:'\n\t\t\t\t\t.history-preview-item {\n\t\t\t\t\t\tbackground-color: color-mix(in srgb, rgb(90 93 94 / 5%) 65%, #00000000);\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder: "1px solid var(--vscode-input-border)";\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t}\n\t\t\t\t\t.history-preview-item:hover {\n\t\t\t\t\t\tbackground-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 100%, transparent);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\tpointer-events: auto;\n\t\t\t\t\t}\n\t\t\t\t'}),(0,Ip.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",margin:"10px 20px 10px 20px",display:"flex",alignItems:"center"},children:[(0,Ip.jsx)("span",{className:"codicon codicon-comment-discussion",style:{marginRight:"4px",transform:"scale(0.9)"}}),(0,Ip.jsx)("span",{style:{fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:"Recent Tasks"})]}),(0,Ip.jsxs)("div",{style:{padding:"0px 20px 0 20px"},children:[n.filter((e=>e.ts&&e.task)).slice(0,1).map((e=>(0,Ip.jsx)("div",{className:"history-preview-item",onClick:()=>(e=>{Sp.postMessage({type:"showTaskWithId",text:e})})(e.id),children:(0,Ip.jsxs)("div",{style:{padding:"12px",border:"var(--vscode-input-border)"},children:[(0,Ip.jsx)("div",{style:{marginBottom:"8px"},children:(0,Ip.jsx)("span",{style:{color:"var(--vscode-descriptionForeground)",fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:i(e.ts)})}),(0,Ip.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-descriptionForeground)",marginBottom:"8px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:e.task}),(0,Ip.jsx)("div",{style:{fontSize:"0.85em",color:"var(--vscode-descriptionForeground)"},children:!!e.totalCost&&(0,Ip.jsx)(Ip.Fragment,{children:" \u2022 "})})]})},e.id))),(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ip.jsx)(ts,{appearance:"icon",onClick:()=>t(),style:{opacity:.9},children:(0,Ip.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-descriptionForeground)",border:"1px solid var(--vscode-editorGroup-border)",padding:"3px 5px",borderRadius:"4px"},children:"View all history"})})})]})]})},Op=(0,t.memo)(Mp);const Np=function(e,n){var i=(0,t.useRef)((function(){}));(0,t.useEffect)((function(){i.current=e})),(0,t.useEffect)((function(){if(null!==n){var e=setInterval((function(){return i.current()}),n||0);return function(){return clearInterval(e)}}}),[n])},jp=e=>{let{href:t,children:n,...i}=e;return(0,Ip.jsx)("a",{href:t,style:{textDecoration:"none",color:"inherit"},children:(0,Ip.jsx)(ts,{...i,children:n})})};function Dp(e){return Array.isArray?Array.isArray(e):"[object Array]"===Wp(e)}const Lp=1/0;function Fp(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-Lp?"-0":t}(e)}function Bp(e){return"string"===typeof e}function Up(e){return"number"===typeof e}function $p(e){return!0===e||!1===e||function(e){return zp(e)&&null!==e}(e)&&"[object Boolean]"==Wp(e)}function zp(e){return"object"===typeof e}function Vp(e){return void 0!==e&&null!==e}function Hp(e){return!e.trim().length}function Wp(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const qp=e=>`Missing ${e} property in key`,Kp=e=>`Property 'weight' in key '${e}' must be a positive integer`,Gp=Object.prototype.hasOwnProperty;class Yp{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Qp(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Qp(e){let t=null,n=null,i=null,r=1,o=null;if(Bp(e)||Dp(e))i=e,t=Xp(e),n=Jp(e);else{if(!Gp.call(e,"name"))throw new Error(qp("name"));const s=e.name;if(i=s,Gp.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(Kp(s));t=Xp(s),n=Jp(s),o=e.getFn}return{path:t,id:n,weight:r,src:i,getFn:o}}function Xp(e){return Dp(e)?e:e.split(".")}function Jp(e){return Dp(e)?e.join("."):e}const Zp={useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const r=(e,t,o)=>{if(Vp(e))if(t[o]){const s=e[t[o]];if(!Vp(s))return;if(o===t.length-1&&(Bp(s)||Up(s)||$p(s)))n.push(Fp(s));else if(Dp(s)){i=!0;for(let e=0,n=s.length;e<n;e+=1)r(s[e],t,o+1)}else t.length&&r(s,t,o+1)}else n.push(e)};return r(e,Bp(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ef={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...Zp};const tf=/[^ ]+/g;class nf{constructor(){let{getFn:e=ef.getFn,fieldNormWeight:t=ef.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,i=Math.pow(10,t);return{get(t){const r=t.match(tf).length;if(n.has(r))return n.get(r);const o=1/Math.pow(r,.5*e),s=parseFloat(Math.round(o*i)/i);return n.set(r,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Bp(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Bp(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Vp(e)||Hp(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Vp(r))if(Dp(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(Vp(i))if(Bp(i)&&!Hp(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else Dp(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(Bp(r)&&!Hp(r)){let e={v:r,n:this.norm.get(r)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function rf(e,t){let{getFn:n=ef.getFn,fieldNormWeight:i=ef.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new nf({getFn:n,fieldNormWeight:i});return r.setKeys(e.map(Qp)),r.setSources(t),r.create(),r}function of(e){let{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:r=ef.distance,ignoreLocation:o=ef.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t/e.length;if(o)return s;const a=Math.abs(i-n);return r?s+a/r:a?1:s}const sf=32;function af(e,t,n){let{location:i=ef.location,distance:r=ef.distance,threshold:o=ef.threshold,findAllMatches:s=ef.findAllMatches,minMatchCharLength:a=ef.minMatchCharLength,includeMatches:l=ef.includeMatches,ignoreLocation:c=ef.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>sf)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(sf));const d=t.length,u=e.length,h=Math.max(0,Math.min(i,u));let p=o,f=h;const m=a>1||l,g=m?Array(u):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=of(t,{currentLocation:v,expectedLocation:h,distance:r,ignoreLocation:c});if(p=Math.min(e,p),f=v+d,m){let e=0;for(;e<d;)g[v+e]=1,e+=1}}f=-1;let b=[],y=1,x=d+u;const k=1<<d-1;for(let C=0;C<d;C+=1){let i=0,o=x;for(;i<o;){of(t,{errors:C,currentLocation:h+o,expectedLocation:h,distance:r,ignoreLocation:c})<=p?i=o:x=o,o=Math.floor((x-i)/2+i)}x=o;let a=Math.max(1,h-o+1),l=s?u:Math.min(h+o,u)+d,v=Array(l+2);v[l+1]=(1<<C)-1;for(let s=l;s>=a;s-=1){let i=s-1,o=n[e.charAt(i)];if(m&&(g[i]=+!!o),v[s]=(v[s+1]<<1|1)&o,C&&(v[s]|=(b[s+1]|b[s])<<1|1|b[s+1]),v[s]&k&&(y=of(t,{errors:C,currentLocation:i,expectedLocation:h,distance:r,ignoreLocation:c}),y<=p)){if(p=y,f=i,f<=h)break;a=Math.max(1,2*h-f)}}if(of(t,{errors:C+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:c})>p)break;b=v}const w={isMatch:f>=0,score:Math.max(.001,y)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ef.minMatchCharLength,n=[],i=-1,r=-1,o=0;for(let s=e.length;o<s;o+=1){let s=e[o];s&&-1===i?i=o:s||-1===i||(r=o-1,r-i+1>=t&&n.push([i,r]),i=-1)}return e[o-1]&&o-i>=t&&n.push([i,o-1]),n}(g,a);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function lf(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<i-n-1}return t}class cf{constructor(e){let{location:t=ef.location,threshold:n=ef.threshold,distance:i=ef.distance,includeMatches:r=ef.includeMatches,findAllMatches:o=ef.findAllMatches,minMatchCharLength:s=ef.minMatchCharLength,isCaseSensitive:a=ef.isCaseSensitive,ignoreLocation:l=ef.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:lf(e),startIndex:t})},d=this.pattern.length;if(d>sf){let e=0;const t=d%sf,n=d-t;for(;e<n;)c(this.pattern.substr(e,sf),e),e+=sf;if(t){const e=d-sf;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],d=0,u=!1;this.chunks.forEach((t=>{let{pattern:h,alphabet:p,startIndex:f}=t;const{isMatch:m,score:g,indices:v}=af(e,h,p,{location:i+f,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});m&&(u=!0),d+=g,m&&v&&(c=[...c,...v])}));let h={isMatch:u,score:u?d/this.chunks.length:1};return u&&n&&(h.indices=c),h}}class df{constructor(e){this.pattern=e}static isMultiMatch(e){return uf(e,this.multiRegex)}static isSingleMatch(e){return uf(e,this.singleRegex)}search(){}}function uf(e,t){const n=e.match(t);return n?n[1]:null}class hf extends df{constructor(e){let{location:t=ef.location,threshold:n=ef.threshold,distance:i=ef.distance,includeMatches:r=ef.includeMatches,findAllMatches:o=ef.findAllMatches,minMatchCharLength:s=ef.minMatchCharLength,isCaseSensitive:a=ef.isCaseSensitive,ignoreLocation:l=ef.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new cf(e,{location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class pf extends df{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,i.push([t,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const ff=[class extends df{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},pf,class extends df{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends df{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends df{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends df{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends df{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},hf],mf=ff.length,gf=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const vf=new Set([hf.type,pf.type]);class bf{constructor(e){let{isCaseSensitive:t=ef.isCaseSensitive,includeMatches:n=ef.includeMatches,minMatchCharLength:i=ef.minMatchCharLength,ignoreLocation:r=ef.ignoreLocation,findAllMatches:o=ef.findAllMatches,location:s=ef.location,threshold:a=ef.threshold,distance:l=ef.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:s,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let n=e.trim().split(gf).filter((e=>e&&!!e.trim())),i=[];for(let r=0,o=n.length;r<o;r+=1){const e=n[r];let o=!1,s=-1;for(;!o&&++s<mf;){const n=ff[s];let r=n.isMultiMatch(e);r&&(i.push(new n(r,t)),o=!0)}if(!o)for(s=-1;++s<mf;){const n=ff[s];let r=n.isSingleMatch(e);if(r){i.push(new n(r,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],s=0;for(let a=0,l=t.length;a<l;a+=1){const i=t[a];o.length=0,r=0;for(let t=0,a=i.length;t<a;t+=1){const a=i[t],{isMatch:l,indices:c,score:d}=a.search(e);if(!l){s=0,r=0,o.length=0;break}if(r+=1,s+=d,n){const e=a.constructor.type;vf.has(e)?o=[...o,...c]:o.push(c)}}if(r){let e={isMatch:!0,score:s/r};return n&&(e.indices=o),e}}return{isMatch:!1,score:1}}}const yf=[];function xf(e,t){for(let n=0,i=yf.length;n<i;n+=1){let i=yf[n];if(i.condition(e,t))return new i(e,t)}return new cf(e,t)}const kf="$and",wf="$or",Cf="$path",Sf="$val",Tf=e=>!(!e[kf]&&!e[wf]),Ef=e=>({[kf]:Object.keys(e).map((t=>({[t]:e[t]})))});function _f(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e=>{let r=Object.keys(e);const o=(e=>!!e[Cf])(e);if(!o&&r.length>1&&!Tf(e))return i(Ef(e));if((e=>!Dp(e)&&zp(e)&&!Tf(e))(e)){const i=o?e[Cf]:r[0],s=o?e[Sf]:e[i];if(!Bp(s))throw new Error((e=>`Invalid value for key ${e}`)(i));const a={keyId:Jp(i),pattern:s};return n&&(a.searcher=xf(s,t)),a}let s={children:[],operator:r[0]};return r.forEach((t=>{const n=e[t];Dp(n)&&n.forEach((e=>{s.children.push(i(e))}))})),s};return Tf(e)||(e=Ef(e)),i(e)}function If(e,t){const n=e.matches;t.matches=[],Vp(n)&&n.forEach((e=>{if(!Vp(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let r={indices:n,value:i};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}))}function Pf(e,t){t.score=e.score}class Rf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...ef,...t},this.options.useExtendedSearch,this._keyStore=new Yp(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof nf))throw new Error("Incorrect 'index' type");this._myIndex=t||rf(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Vp(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:s}=this.options;let a=Bp(e)?Bp(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=ef.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:i,norm:r,score:o}=e;const s=i?i.weight:null;t*=Math.pow(0===o&&s?Number.EPSILON:o,(s||1)*(n?1:r))})),e.score=t}))}(a,{ignoreFieldNorm:s}),r&&a.sort(o),Up(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=ef.includeMatches,includeScore:i=ef.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];return n&&r.push(If),i&&r.push(Pf),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return r.length&&r.forEach((t=>{t(e,i)})),i}))}(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=xf(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((e=>{let{v:n,i:r,n:o}=e;if(!Vp(n))return;const{isMatch:s,score:a,indices:l}=t.searchIn(n);s&&i.push({item:n,idx:r,matches:[{score:a,value:n,norm:o,indices:l}]})})),i}_searchLogical(e){const t=_f(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:r}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return o&&o.length?[{idx:i,item:t,matches:o}]:[]}const r=[];for(let o=0,s=e.children.length;o<s;o+=1){const s=e.children[o],a=n(s,t,i);if(a.length)r.push(...a);else if(e.operator===kf)return[]}return r},i=this._myIndex.records,r={},o=[];return i.forEach((e=>{let{$:i,i:s}=e;if(Vp(i)){let e=n(t,i,s);e.length&&(r[s]||(r[s]={idx:s,item:i,matches:[]},o.push(r[s])),e.forEach((e=>{let{matches:t}=e;r[s].matches.push(...t)})))}})),o}_searchObjectList(e){const t=xf(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach((e=>{let{$:i,i:o}=e;if(!Vp(i))return;let s=[];n.forEach(((e,n)=>{s.push(...this._findMatches({key:e,value:i[n],searcher:t}))})),s.length&&r.push({idx:o,item:i,matches:s})})),r}_findMatches(e){let{key:t,value:n,searcher:i}=e;if(!Vp(n))return[];let r=[];if(Dp(n))n.forEach((e=>{let{v:n,i:o,n:s}=e;if(!Vp(n))return;const{isMatch:a,score:l,indices:c}=i.searchIn(n);a&&r.push({score:l,key:t,value:n,idx:o,norm:s,indices:c})}));else{const{v:e,n:o}=n,{isMatch:s,score:a,indices:l}=i.searchIn(e);s&&r.push({score:a,key:t,value:e,norm:o,indices:l})}return r}}Rf.version="7.0.0",Rf.createIndex=rf,Rf.parseIndex=function(e){let{getFn:t=ef.getFn,fieldNormWeight:n=ef.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:i,records:r}=e,o=new nf({getFn:t,fieldNormWeight:n});return o.setKeys(i),o.setIndexRecords(r),o},Rf.config=ef,Rf.parseQuery=_f,function(){yf.push(...arguments)}(bf);var Af=n(9212),Mf=n.n(Af),Of=n(6928),Nf=n.n(Of),jf=n(6248),Df=n.n(jf),Lf=n(3251),Ff=n.n(Lf);function Bf(){return Bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bf.apply(this,arguments)}var Uf=function(e){var n=void 0===e?{}:e,i=n.remarkParseOptions,r=n.remarkToRehypeOptions,o=n.rehypeReactOptions,s=n.remarkPlugins,a=void 0===s?[]:s,l=n.rehypePlugins,c=void 0===l?[]:l,d=n.onError,u=void 0===d?function(){}:d,h=(0,t.useState)(null),p=h[0],f=h[1],m=(0,t.useCallback)((function(e){Mf()().use(Nf(),i).use(a).use(Df(),r).use(c).use(Ff(),Bf({createElement:t.createElement,Fragment:t.Fragment},o)).process(e).then((function(e){return f(e.result)})).catch(u)}),[]);return[p,m]};const $f=e=>{let{onDone:n}=e;const{taskHistory:i}=Ap(),[r,o]=(0,t.useState)(""),[s,a]=(0,t.useState)("newest"),[l,c]=(0,t.useState)("newest");(0,t.useEffect)((()=>{r&&"mostRelevant"!==s&&!l?(c(s),a("mostRelevant")):!r&&"mostRelevant"===s&&l&&(a(l),c(null))}),[r,s,l]);const d=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()},u=(0,t.useMemo)((()=>i.filter((e=>e.ts&&e.task))),[i]),h=(0,t.useMemo)((()=>new Rf(u,{keys:["task"],threshold:.6,shouldSort:!0,isCaseSensitive:!1,ignoreLocation:!1,includeMatches:!0,minMatchCharLength:1})),[u]),p=(0,t.useMemo)((()=>{let e=r?Vf(h.search(r)):u;return e.sort(((e,t)=>{switch(s){case"oldest":return e.ts-t.ts;case"mostExpensive":return(t.totalCost||0)-(e.totalCost||0);case"mostTokens":return(t.tokensIn||0)+(t.tokensOut||0)+(t.cacheWrites||0)+(t.cacheReads||0)-((e.tokensIn||0)+(e.tokensOut||0)+(e.cacheWrites||0)+(e.cacheReads||0));case"mostRelevant":return r?0:t.ts-e.ts;default:return t.ts-e.ts}})),e}),[u,r,h,s]);return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("style",{children:"\n\t\t\t\t\t.history-item:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-list-hoverBackground);\n\t\t\t\t\t}\n\t\t\t\t\t.delete-button, .export-button {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t}\n\t\t\t\t\t.history-item:hover .delete-button,\n\t\t\t\t\t.history-item:hover .export-button {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\tpointer-events: auto;\n\t\t\t\t\t}\n\t\t\t\t\t.history-item-highlight {\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-findMatchHighlightBackground);\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,Ip.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 17px 10px 20px"},children:[(0,Ip.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"History"}),(0,Ip.jsx)(ts,{onClick:n,children:"Done"})]}),(0,Ip.jsx)("div",{style:{padding:"5px 17px 6px 17px"},children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,Ip.jsxs)(ps,{style:{width:"100%"},placeholder:"Fuzzy search history...",value:r,onInput:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;o(n),n&&!r&&"mostRelevant"!==s&&(c(s),a("mostRelevant"))},children:[(0,Ip.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,marginTop:2.5,opacity:.8}}),r&&(0,Ip.jsx)("div",{className:"input-icon-button codicon codicon-close","aria-label":"Clear search",onClick:()=>o(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}})]}),(0,Ip.jsxs)(us,{style:{display:"flex",flexWrap:"wrap"},value:s,onChange:e=>a(e.target.value),children:[(0,Ip.jsx)(ds,{value:"newest",children:"Newest"}),(0,Ip.jsx)(ds,{value:"oldest",children:"Oldest"}),(0,Ip.jsx)(ds,{value:"mostExpensive",children:"Most Expensive"}),(0,Ip.jsx)(ds,{value:"mostTokens",children:"Most Tokens"}),(0,Ip.jsx)(ds,{value:"mostRelevant",disabled:!r,style:{opacity:r?1:.5},children:"Most Relevant"})]})]})}),(0,Ip.jsx)("div",{style:{flexGrow:1,overflowY:"auto",margin:0},children:(0,Ip.jsx)(_c,{style:{flexGrow:1,overflowY:"scroll"},data:p,itemContent:(e,t)=>(0,Ip.jsx)("div",{className:"history-item",style:{cursor:"pointer",borderBottom:e<i.length-1?"1px solid var(--vscode-panel-border)":"none"},onClick:()=>(e=>{Sp.postMessage({type:"showTaskWithId",text:e})})(t.id),children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px 20px",position:"relative"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ip.jsx)("span",{style:{color:"var(--vscode-descriptionForeground)",fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:d(t.ts)}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:e=>{e.stopPropagation(),(e=>{Sp.postMessage({type:"deleteTaskWithId",text:e})})(t.id)},className:"delete-button",children:(0,Ip.jsx)("span",{className:"codicon codicon-trash"})})]}),(0,Ip.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-foreground)",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:t.task}}),(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"}}),!t.totalCost&&(0,Ip.jsx)(zf,{itemId:t.id})]}),!!t.cacheWrites&&(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"}}),!!t.totalCost&&(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:-2},children:(0,Ip.jsx)(zf,{itemId:t.id})})]})]})},t.id)})})]})]})},zf=e=>{let{itemId:t}=e;return(0,Ip.jsx)(Ip.Fragment,{})},Vf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"history-item-highlight";const n=e=>{if(0===e.length)return e;e.sort(((e,t)=>e[0]-t[0]));const t=[e[0]];for(let n=1;n<e.length;n++){const i=t[t.length-1],r=e[n];r[0]<=i[1]+1?i[1]=Math.max(i[1],r[1]):t.push(r)}return t};return e.filter((e=>{let{matches:t}=e;return t&&t.length})).map((e=>{let{item:i,matches:r}=e;const o={...i};return null===r||void 0===r||r.forEach((e=>{if(e.key&&"string"===typeof e.value&&e.indices){const i=n([...e.indices]);((e,t,n)=>{const i=t.split(".");let r;for(r=0;r<i.length-1;r++)e=e[i[r]];e[i[r]]=n})(o,e.key,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===i.length)return e;const r=n(i);let o="",s=0;return r.forEach((n=>{const i=n[0],r=n[1]+1;o+=[e.substring(s,i),`<span class="${t}">`,e.substring(i,r),"</span>"].join(""),s=r})),o+=e.substring(s),o}(e.value,i))}})),o}))},Hf=(0,t.memo)($f),Wf=function(e){if(null===e||void 0===e)return Kf;if("function"===typeof e)return qf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wf(e[n]);return qf(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e):function(e){const t=e;return qf(n);function n(n){const i=n;let r;for(r in e)if(i[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return qf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function qf(e){return function(t,n,i){return Boolean(Gf(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function Kf(){return!0}function Gf(e){return null!==e&&"object"===typeof e&&"type"in e}const Yf=function(e,t,n){const i=Wf(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if("number"===typeof t){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if((t=e.children.indexOf(t))<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(i(e.children[t],t,e))return e.children[t]},Qf=function(e){if(null===e||void 0===e)return Jf;if("string"===typeof e)return function(e){return Xf(t);function t(t){return t.tagName===e}}(e);if("object"===typeof e)return function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Qf(e[n]);return Xf(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e);if("function"===typeof e)return Xf(e);throw new Error("Expected function, string, or array as `test`")};function Xf(e){return function(t,n,i){return Boolean(Zf(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function Jf(e){return Boolean(e&&"object"===typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"===typeof e.tagName)}function Zf(e){return null!==e&&"object"===typeof e&&"type"in e&&"tagName"in e}const em=/\n/g,tm=/[\t ]+/g,nm=Qf("br"),im=Qf((function(e){return"td"===e.tagName||"th"===e.tagName})),rm=Qf("p"),om=Qf("tr"),sm=Qf(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",function(e){return Boolean((e.properties||{}).hidden)},function(e){return"dialog"===e.tagName&&!(e.properties||{}).open}]),am=Qf(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function lm(e,t){const n=t||{},i="children"in e?e.children:[],r=am(e),o=hm(e,{whitespace:n.whitespace||"normal",breakBefore:!1,breakAfter:!1}),s=[];"text"!==e.type&&"comment"!==e.type||s.push(...dm(e,{whitespace:o,breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<i.length;)s.push(...cm(i[a],e,{whitespace:o,breakBefore:a?void 0:r,breakAfter:a<i.length-1?nm(i[a+1]):r}));const l=[];let c;for(a=-1;++a<s.length;){const e=s[a];"number"===typeof e?void 0!==c&&e>c&&(c=e):e&&(void 0!==c&&c>-1&&l.push("\n".repeat(c)||" "),c=-1,l.push(e))}return l.join("")}function cm(e,t,n){return"element"===e.type?function(e,t,n){const i=hm(e,n),r=e.children||[];let o,s,a=-1,l=[];if(sm(e))return l;nm(e)||om(e)&&Yf(t,e,om)?s="\n":rm(e)?(o=2,s=2):am(e)&&(o=1,s=1);for(;++a<r.length;)l=l.concat(cm(r[a],e,{whitespace:i,breakBefore:a?void 0:o,breakAfter:a<r.length-1?nm(r[a+1]):s}));im(e)&&Yf(t,e,im)&&l.push("\t");o&&l.unshift(o);s&&l.push(s);return l}(e,t,n):"text"===e.type?"normal"===n.whitespace?dm(e,n):function(e){return[String(e.value)]}(e):[]}function dm(e,t){const n=String(e.value),i=[],r=[];let o=0;for(;o<=n.length;){em.lastIndex=o;const e=em.exec(n),r=e&&"index"in e?e.index:n.length;i.push(um(n.slice(o,r).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),0!==o||t.breakBefore,r!==n.length||t.breakAfter)),o=r+1}let s,a=-1;for(;++a<i.length;)8203===i[a].charCodeAt(i[a].length-1)||a<i.length-1&&8203===i[a+1].charCodeAt(0)?(r.push(i[a]),s=void 0):i[a]?("number"===typeof s&&r.push(s),r.push(i[a]),s=0):0!==a&&a!==i.length-1||r.push(0);return r}function um(e,t,n){const i=[];let r,o=0;for(;o<e.length;){tm.lastIndex=o;const n=tm.exec(e);r=n?n.index:e.length,o||r||!n||t||i.push(""),o!==r&&i.push(e.slice(o,r)),o=n?r+n[0].length:r}return o===r||n||i.push(""),i.join(" ")}function hm(e,t){if("element"===e.type){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}const pm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],fm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],mm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],gm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],vm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();var bm="[0-9](_*[0-9])*",ym=`\\.(${bm})`,xm="[0-9a-fA-F](_*[0-9a-fA-F])*",km={className:"number",variants:[{begin:`(\\b(${bm})((${ym})|\\.)?|(${ym}))[eE][+-]?(${bm})[fFdD]?\\b`},{begin:`\\b(${bm})((${ym})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${ym})[fFdD]?\\b`},{begin:`\\b(${bm})[fFdD]\\b`},{begin:`\\b0[xX]((${xm})\\.?|(${xm})?\\.(${xm}))[pP][+-]?(${bm})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${xm})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function wm(e,t,n){return-1===n?"":e.replace(t,(i=>wm(e,t,n-1)))}const Cm="[A-Za-z$_][0-9A-Za-z$_]*",Sm=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Tm=["true","false","null","undefined","NaN","Infinity"],Em=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_m=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Im=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Pm=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Rm=[].concat(Im,Em,_m);var Am="[0-9](_*[0-9])*",Mm=`\\.(${Am})`,Om="[0-9a-fA-F](_*[0-9a-fA-F])*",Nm={className:"number",variants:[{begin:`(\\b(${Am})((${Mm})|\\.)?|(${Mm}))[eE][+-]?(${Am})[fFdD]?\\b`},{begin:`\\b(${Am})((${Mm})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Mm})[fFdD]?\\b`},{begin:`\\b(${Am})[fFdD]\\b`},{begin:`\\b0[xX]((${Om})\\.?|(${Om})?\\.(${Om}))[pP][+-]?(${Am})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Om})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};const jm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Dm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Lm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Fm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Bm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),Um=Lm.concat(Fm);const $m=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],zm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Vm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Hm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Wm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function qm(e){return e?"string"===typeof e?e:e.source:null}function Km(e){return Gm("(?=",e,")")}function Gm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>qm(e))).join("")}function Ym(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=function(e){const t=e[e.length-1];return"object"===typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(t);return"("+(i.capture?"":"?:")+t.map((e=>qm(e))).join("|")+")"}const Qm=e=>Gm(/\b/,e,/\w$/.test(e)?/\b/:/\B/),Xm=["Protocol","Type"].map(Qm),Jm=["init","self"].map(Qm),Zm=["Any","Self"],eg=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],tg=["false","nil","true"],ng=["assignment","associativity","higherThan","left","lowerThan","none","right"],ig=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],rg=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],og=Ym(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),sg=Ym(og,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),ag=Gm(og,sg,"*"),lg=Ym(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),cg=Ym(lg,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),dg=Gm(lg,cg,"*"),ug=Gm(/[A-Z]/,cg,"*"),hg=["attached","autoclosure",Gm(/convention\(/,Ym("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Gm(/objc\(/,dg,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],pg=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];const fg="[A-Za-z$_][0-9A-Za-z$_]*",mg=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],gg=["true","false","null","undefined","NaN","Infinity"],vg=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bg=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],yg=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],xg=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],kg=[].concat(yg,vg,bg);const wg={arduino:function(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},u=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},f=[p,c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:f.concat([{begin:/\(/,end:/\)/,keywords:h,contains:f.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+o+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[a,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(m,g,p,f,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:h,contains:["self",s]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}(e),i=n.keywords;return i.type=[...i.type,...t.type],i.literal=[...i.literal,...t.literal],i.built_in=[...i.built_in,...t.built_in],i._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n},bash:function(e){const t=e.regex,n={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},s={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,r]};r.contains.push(s);const a={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},l=e.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),c={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[l,e.SHEBANG(),c,a,e.HASH_COMMENT_MODE,o,{match:/(\/[a-z._-]+)+/},s,{match:/\\"/},{className:"string",begin:/'/,end:/'/},{match:/\\'/},n]}},c:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},u=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal128","const","static","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},p=[c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],f={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:p.concat([{begin:/\(/,end:/\)/,keywords:h,contains:p.concat(["self"]),relevance:0}]),relevance:0},m={begin:"("+o+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[e.inherit(d,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C",aliases:["h"],keywords:h,disableAutodetect:!0,illegal:"</",contains:[].concat(f,m,p,[c,{begin:e.IDENT_RE+"::",keywords:h},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:c,strings:a,keywords:h}}},cpp:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},d={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},u=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},f=[p,c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:f.concat([{begin:/\(/,end:/\)/,keywords:h,contains:f.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+o+"[\\*&\\s]+)+"+u,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:u,returnBegin:!0,contains:[d],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[a,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(m,g,p,f,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:h,contains:["self",s]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}},csharp:function(e){const t={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},n=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),i={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},r={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},o=e.inherit(r,{illegal:/\n/}),s={className:"subst",begin:/\{/,end:/\}/,keywords:t},a=e.inherit(s,{illegal:/\n/}),l={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,a]},c={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},s]},d=e.inherit(c,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},a]});s.contains=[c,l,r,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.C_BLOCK_COMMENT_MODE],a.contains=[d,l,o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const u={variants:[c,l,r,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},h={begin:"<",end:">",contains:[{beginKeywords:"in out"},n]},p=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",f={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},u,i,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+p+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:t,contains:[{beginKeywords:["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"].join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,h],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[u,i,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},f]}},css:function(e){const t=e.regex,n=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),i=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+mm.join("|")+")"},{begin:":(:)?("+gm.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+vm.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...i,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...i,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:fm.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...i,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+pm.join("|")+")\\b"}]}},diff:function(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}},go:function(e){const t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}},graphql:function(e){const t=e.regex;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(/[_A-Za-z][_0-9A-Za-z]*/,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}},ini:function(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},i=e.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const r={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[i,o,r,s,n,"self"],relevance:0},l=t.either(/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/);return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{begin:t.concat(l,"(\\s*\\.\\s*",l,")*",t.lookahead(/\s*=\s*[^#\s]/)),className:"attr",starts:{end:/$/,contains:[i,a,o,r,s,n]}}]}},java:function(e){const t=e.regex,n="[\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*",i=n+wm("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),r={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},o={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},s={className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:r,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[s,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+i+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:r,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,km,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},km,o]}},javascript:function(e){const t=e.regex,n=Cm,i="<>",r="</>",o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,i=e.input[n];if("<"===i||","===i)return void t.ignoreMatch();let r;">"===i&&(((e,t)=>{let{after:n}=t;const i="</"+e[0].slice(1);return-1!==e.input.indexOf(i,n)})(e,{after:n})||t.ignoreMatch());const o=e.input.substring(n);((r=o.match(/^\s*=/))||(r=o.match(/^\s+extends\s+/))&&0===r.index)&&t.ignoreMatch()}},s={$pattern:Cm,keyword:Sm,literal:Tm,built_in:Rm,"variable.language":Pm},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"css"}},f={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,u]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},v=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,{match:/\$\d+/},d];u.contains=v.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(v)});const b=[].concat(g,u.contains),y=b.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(b)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y},k={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},w={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Em,..._m]}},C={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},S={match:t.concat(/\b/,(T=[...Im,"super","import"],t.concat("(?!",T.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var T;const E={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},_={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",P={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:w},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,g,{match:/\$\d+/},d,w,{className:"attr",begin:n+t.lookahead(":"),relevance:0},P,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i,end:r},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},C,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},S,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},k,_,{match:/\$[(.]/}]}},json:function(e){const t=["true","false","null"],n={scope:"literal",beginKeywords:t.join(" ")};return{name:"JSON",keywords:{literal:t},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},e.QUOTE_STRING_MODE,n,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}},kotlin:function(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},r={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[r,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,r,i]}]};i.contains.push(o);const s={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},a={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(o,{className:"string"}),"self"]}]},l=Nm,c=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},u=d;return u.variants[1].contains=[d],d.variants[1].contains=[u],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,c,{className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n,s,a,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,e.C_LINE_COMMENT_MODE,c],relevance:0},e.C_LINE_COMMENT_MODE,c,s,a,o,e.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},s,a]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},l]}},less:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Um,i="[\\w-]+",r="("+i+"|@\\{"+i+"\\})",o=[],s=[],a=function(e){return{className:"string",begin:"~?"+e+".*?"+e}},l=function(e,t,n){return{className:e,begin:t,relevance:n}},c={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:Dm.join(" ")},d={begin:"\\(",end:"\\)",contains:s,keywords:c,relevance:0};s.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,a("'"),a('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,d,l("variable","@@?"+i,10),l("variable","@\\{"+i+"\\}"),l("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const u=s.concat({begin:/\{/,end:/\}/,contains:o}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(s)},p={begin:r+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Bm.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:s}}]},f={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:s,relevance:0}},m={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:u}},g={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:r,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,h,l("keyword","all\\b"),l("variable","@\\{"+i+"\\}"),{begin:"\\b("+jm.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,l("selector-tag",r,0),l("selector-id","#"+r),l("selector-class","\\."+r,0),l("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Lm.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Fm.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:u},{begin:"!important"},t.FUNCTION_DISPATCH]},v={begin:i+":(:)?"+`(${n.join("|")})`,returnBegin:!0,contains:[g]};return o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,f,m,v,p,g,h,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:o}},lua:function(e){const t="\\[=*\\[",n="\\]=*\\]",i={begin:t,end:n,contains:["self"]},r=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[i],relevance:10})];return{name:"Lua",keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[i],relevance:5}])}},makefile:function(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},i={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t]},r={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,i,r,{className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o]}},markdown:function(e){const t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},i={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},r={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},o=e.inherit(i,{contains:[]}),s=e.inherit(r,{contains:[]});i.contains.push(s),r.contains.push(o);let a=[t,n];return[i,r,o,s].forEach((e=>{e.contains=e.contains.concat(a)})),a=a.concat(i,r),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:a},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:a}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i,r,{className:"quote",begin:"^>\\s+",contains:a,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}},objectivec:function(e){const t=/[a-zA-Z@][a-zA-Z0-9_]*/,n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}},perl:function(e){const t=e.regex,n=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},s={variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[e.BACKSLASH_ESCAPE,r,s],l=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\\1";const o="\\1"===r?r:t.concat(r,i);return t.concat(t.concat("(?:",e,")"),i,/(?:\\.|[^\\\/])*?/,o,/(?:\\.|[^\\\/])*?/,r,n)},d=(e,i,r)=>t.concat(t.concat("(?:",e,")"),i,/(?:\\.|[^\\\/])*?/,r,n),u=[s,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",t.either(...l,{capture:!0}))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:d("(?:m|qr)?",/\//,/\//)},{begin:d("m|qr",t.either(...l,{capture:!0}),/\1/)},{begin:d("m|qr",/\(/,/\)/)},{begin:d("m|qr",/\[/,/\]/)},{begin:d("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=u,o.contains=u,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:u}},php:function(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,i=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),r=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),o={scope:"variable",match:"\\$+"+i},s={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},a=e.inherit(e.APOS_STRING_MODE,{illegal:null}),l=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(s)}),c={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(s),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},d="[ \t\n]",u={scope:"string",variants:[l,a,c,e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/})]},h={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},p=["false","null","true"],f=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],m=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],g={keyword:f,literal:(e=>{const t=[];return e.forEach((e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())})),t})(p),built_in:m},v=e=>e.map((e=>e.replace(/\|\d+$/,""))),b={variants:[{match:[/new/,t.concat(d,"+"),t.concat("(?!",v(m).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},y=t.concat(i,"\\b(?!\\()"),x={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{1:"title.class",3:"variable.constant"}},{match:[r,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},k={scope:"attr",match:t.concat(i,t.lookahead(":"),t.lookahead(/(?!::)/))},w={relevance:0,begin:/\(/,end:/\)/,keywords:g,contains:[k,o,x,e.C_BLOCK_COMMENT_MODE,u,h,b]},C={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",v(f).join("\\b|"),"|",v(m).join("\\b|"),"\\b)"),i,t.concat(d,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[w]};w.contains.push(C);const S=[k,x,e.C_BLOCK_COMMENT_MODE,u,h,b];return{case_insensitive:!1,keywords:g,contains:[{begin:t.concat(/#\[\s*/,r),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:p,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:p,keyword:["new","array"]},contains:["self",...S]},...S,{scope:"meta",match:r}]},e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},o,C,x,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},b,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:g,contains:["self",o,x,e.C_BLOCK_COMMENT_MODE,u,h]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},u,h]}},"php-template":function(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}},plaintext:function(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}},python:function(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},o={className:"meta",begin:/^(>>>|\.\.\.) /},s={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},a={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o,a,s]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,s]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",d=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,u=`\\b|${i.join("|")}`,h={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${d}))[eE][+-]?(${c})[jJ]?(?=${u})`},{begin:`(${d})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${u})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${u})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${u})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${u})`},{begin:`\\b(${c})[jJ](?=${u})`}]},p={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},f={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",o,h,l,e.HASH_COMMENT_MODE]}]};return s.contains=[l,h,o],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|\?)|=>/,contains:[o,h,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},l,p,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[f]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[h,f,l]}]}},"python-repl":function(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}},r:function(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),r=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[r,i]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[o,i]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:r},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}},ruby:function(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=t.concat(i,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield","include","extend","prepend","public","private","protected","raise","throw"],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},s={className:"doctag",begin:"@[A-Za-z]+"},a={begin:"#<",end:">"},l=[e.COMMENT("#","$",{contains:[s]}),e.COMMENT("^=begin","^=end",{contains:[s],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:o},d={className:"string",contains:[e.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,c]})]}]},u="[0-9](_?[0-9])*",h={className:"number",relevance:0,variants:[{begin:`\\b([1-9](_?[0-9])*|0)(\\.(${u}))?([eE][+-]?(${u})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},p={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},f=[d,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:o},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[p]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},h,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(a,l),relevance:0}].concat(a,l);c.contains=f,p.contains=f;const m=[{begin:/^\s*=>/,starts:{end:"$",contains:f}},{className:"meta.prompt",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",keywords:o,contains:f}}];return l.unshift(a),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(m).concat(l).concat(f)}},rust:function(e){const t=e.regex,n={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",r=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],o=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:o,keyword:["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],literal:["true","false","Some","None","Ok","Err"],built_in:r},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:r,type:o}},{className:"punctuation",begin:"->"},n]}},scss:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Hm,i=Vm,r="@[a-z-]+",o={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+$m.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Wm.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,o,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:r,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:zm.join(" ")},contains:[{begin:r,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}},shell:function(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}},sql:function(e){const t=e.regex,n=e.COMMENT("--","$"),i=["true","false","unknown"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],o=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],s=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],a=o,l=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter((e=>!o.includes(e))),c={begin:t.concat(/\b/,t.either(...a),/\s*\(/),relevance:0,keywords:{built_in:a}};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(e){let{exceptions:t,when:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n;return t=t||[],e.map((e=>e.match(/\|\d+$/)||t.includes(e)?e:i(e)?`${e}|0`:e))}(l,{when:e=>e.length<3}),literal:i,type:r,built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{begin:t.either(...s),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:l.concat(s),literal:i,type:r}},{className:"type",begin:t.either("double precision","large object","with timezone","without timezone")},c,{className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},{className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{begin:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,{className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}},swift:function(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),i=[e.C_LINE_COMMENT_MODE,n],r={match:[/\./,Ym(...Xm,...Jm)],className:{2:"keyword"}},o={match:Gm(/\./,Ym(...eg)),relevance:0},s=eg.filter((e=>"string"===typeof e)).concat(["_|0"]),a={variants:[{className:"keyword",match:Ym(...eg.filter((e=>"string"!==typeof e)).concat(Zm).map(Qm),...Jm)}]},l={$pattern:Ym(/\b\w+/,/#\w+/),keyword:s.concat(ig),literal:tg},c=[r,o,a],d=[{match:Gm(/\./,Ym(...rg)),relevance:0},{className:"built_in",match:Gm(/\b/,Ym(...rg),/(?=\()/)}],u={match:/->/,relevance:0},h=[u,{className:"operator",relevance:0,variants:[{match:ag},{match:`\\.(\\.|${sg})+`}]}],p="([0-9]_*)+",f="([0-9a-fA-F]_*)+",m={className:"number",relevance:0,variants:[{match:`\\b(${p})(\\.(${p}))?([eE][+-]?(${p}))?\\b`},{match:`\\b0x(${f})(\\.(${f}))?([pP][+-]?(${p}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{className:"subst",variants:[{match:Gm(/\\/,e,/[0\\tnr"']/)},{match:Gm(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}},v=function(){return{className:"subst",match:Gm(/\\/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",/[\t ]*(?:[\r\n]|\r\n)/)}},b=function(){return{className:"subst",label:"interpol",begin:Gm(/\\/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",/\(/),end:/\)/}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{begin:Gm(e,/"""/),end:Gm(/"""/,e),contains:[g(e),v(e),b(e)]}},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{begin:Gm(e,/"/),end:Gm(/"/,e),contains:[g(e),b(e)]}},k={className:"string",variants:[y(),y("#"),y("##"),y("###"),x(),x("#"),x("##"),x("###")]},w=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],C={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:w},S=e=>{const t=Gm(e,/\//),n=Gm(/\//,e);return{begin:t,end:n,contains:[...w,{scope:"comment",begin:`#(?!.*${n})`,end:/$/}]}},T={scope:"regexp",variants:[S("###"),S("##"),S("#"),C]},E={match:Gm(/`/,dg,/`/)},_=[E,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${cg}+`}],I=[{match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:pg,contains:[...h,m,k]}]}},{scope:"keyword",match:Gm(/@/,Ym(...hg))},{scope:"meta",match:Gm(/@/,dg)}],P={match:Km(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Gm(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,cg,"+")},{className:"type",match:ug,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Gm(/\s+&\s+/,Km(ug)),relevance:0}]},R={begin:/</,end:/>/,keywords:l,contains:[...i,...c,...I,u,P]};P.contains.push(R);const A={begin:/\(/,end:/\)/,relevance:0,keywords:l,contains:["self",{match:Gm(dg,/\s*:/),keywords:"_|0",relevance:0},...i,T,...c,...d,...h,m,k,..._,...I,P]},M={begin:/</,end:/>/,keywords:"repeat each",contains:[...i,P]},O={begin:/\(/,end:/\)/,keywords:l,contains:[{begin:Ym(Km(Gm(dg,/\s*:/)),Km(Gm(dg,/\s+/,dg,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:dg}]},...i,...c,...h,m,k,...I,P,A],endsParent:!0,illegal:/["']/},N={match:[/(func|macro)/,/\s+/,Ym(E.match,dg,ag)],className:{1:"keyword",3:"title.function"},contains:[M,O,t],illegal:[/\[/,/%/]},j={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[M,O,t],illegal:/\[|%/},D={match:[/operator/,/\s+/,ag],className:{1:"keyword",3:"title"}},L={begin:[/precedencegroup/,/\s+/,ug],className:{1:"keyword",3:"title"},contains:[P],keywords:[...ng,...tg],end:/}/};for(const F of k.variants){const e=F.contains.find((e=>"interpol"===e.label));e.keywords=l;const t=[...c,...d,...h,m,k,..._];e.contains=[...t,{begin:/\(/,end:/\)/,contains:["self",...t]}]}return{name:"Swift",keywords:l,contains:[...i,N,j,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:l,contains:[e.inherit(e.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...c]},D,L,{beginKeywords:"import",end:/$/,contains:[...i],relevance:0},T,...c,...d,...h,m,k,..._,...I,P,A]}},typescript:function(e){const t=function(e){const t=e.regex,n=fg,i="<>",r="</>",o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,i=e.input[n];if("<"===i||","===i)return void t.ignoreMatch();let r;">"===i&&(((e,t)=>{let{after:n}=t;const i="</"+e[0].slice(1);return-1!==e.input.indexOf(i,n)})(e,{after:n})||t.ignoreMatch());const o=e.input.substring(n);((r=o.match(/^\s*=/))||(r=o.match(/^\s+extends\s+/))&&0===r.index)&&t.ignoreMatch()}},s={$pattern:fg,keyword:mg,literal:gg,built_in:kg,"variable.language":xg},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"css"}},f={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,u]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},v=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,{match:/\$\d+/},d];u.contains=v.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(v)});const b=[].concat(g,u.contains),y=b.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(b)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y},k={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},w={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...vg,...bg]}},C={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},S={match:t.concat(/\b/,(T=[...yg,"super","import"],t.concat("(?!",T.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var T;const E={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},_={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",P={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:w},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,g,{match:/\$\d+/},d,w,{className:"attr",begin:n+t.lookahead(":"),relevance:0},P,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i,end:r},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},C,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},S,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},k,_,{match:/\$[(.]/}]}}(e),n=fg,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],r={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[t.exports.CLASS_REFERENCE]},s={$pattern:fg,keyword:mg.concat(["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"]),literal:gg,built_in:kg.concat(i),"variable.language":xg},a={className:"meta",begin:"@"+n},l=(e,t,n)=>{const i=e.contains.findIndex((e=>e.label===t));if(-1===i)throw new Error("can not find mode to replace");e.contains.splice(i,1,n)};Object.assign(t.keywords,s),t.exports.PARAMS_CONTAINS.push(a),t.contains=t.contains.concat([a,r,o]),l(t,"shebang",e.SHEBANG()),l(t,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/});const c=t.contains.find((e=>"func.def"===e.label));return c.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t},vbnet:function(e){const t=e.regex,n=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,r=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,s={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,n),/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,r,/ *#/)},{begin:t.concat(/# */,t.either(i,n),/ +/,t.either(r,o),/ *#/)}]},a=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),l=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[{className:"string",begin:/"(""|[^/n])"C\b/},{className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s,{className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},{className:"label",begin:/^\w+:/},a,l,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[l]}]}},wasm:function(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);return t.contains.push("self"),{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"]},contains:[e.COMMENT(/;;/,/$/),t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},{className:"variable",begin:/\$[\w_]+/},{match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},{begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},e.QUOTE_STRING_MODE,{match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},{className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/},{className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/}]}},xml:function(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(r,{begin:/\(/,end:/\)/}),s=e.inherit(e.APOS_STRING_MODE,{className:"string"}),a=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),l={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,s,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,o,a,s]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[l],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[l],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:l}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}},yaml:function(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},r=e.inherit(i,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),o={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},s={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},a={begin:/\{/,end:/\}/,contains:[s],illegal:"\\n",relevance:0},l={begin:"\\[",end:"\\]",contains:[s],illegal:"\\n",relevance:0},c=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},o,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},a,l,i],d=[...c];return d.pop(),d.push(r),s.contains=d,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:c}}};const Cg=n(5891),Sg={},Tg="hljs-";class Eg{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(""===e)return;const t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const n=this.stack[this.stack.length-1],i=e.root.children;t?n.children.push({type:"element",tagName:"span",properties:{className:[t]},children:i}):n.children.push(...i)}openNode(e){const t=this,n={type:"element",tagName:"span",properties:{className:e.split(".").map((function(e,n){return n?e+"_".repeat(n):t.options.classPrefix+e}))},children:[]};this.stack[this.stack.length-1].children.push(n),this.stack.push(n)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const _g=[],Ig=!0,Pg=!1,Rg="skip";function Ag(e,t,n,i){let r;"function"===typeof t&&"function"!==typeof n?(i=n,n=t):r=t;const o=Wf(r),s=i?-1:1;!function e(r,a,l){const c=r&&"object"===typeof r?r:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=_g;if((!t||o(r,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Ig,e];return null===e||void 0===e?_g:[e]}(n(r,l)),h[0]===Pg))return h;if("children"in r&&r.children){const t=r;if(t.children&&h[0]!==Rg)for(d=(i?t.children.length:-1)+s,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===Pg)return c;d="number"===typeof c[1]?c[1]:d+s}}return h}}(e,void 0,[])()}function Mg(e,t,n,i){let r,o,s;"function"===typeof t&&"function"!==typeof n?(o=void 0,s=t,r=n):(o=t,s=n,r=i),Ag(e,o,(function(e,t){const n=t[t.length-1],i=n?n.children.indexOf(e):void 0;return s(e,i,n)}),r)}const Og={};function Ng(e){const t=e||Og,n=t.aliases,i=t.detect||!1,r=t.languages||wg,o=t.plainText,s=t.prefix,a=t.subset;let l="hljs";const c=function(e){const t=Cg.newInstance();return e&&r(e),{highlight:n,highlightAuto:function(e,r){const o=(r||Sg).subset||i();let s,a=-1,l=0;for(;++a<o.length;){const i=o[a];if(!t.getLanguage(i))continue;const c=n(i,e,r);c.data&&void 0!==c.data.relevance&&c.data.relevance>l&&(l=c.data.relevance,s=c)}return s||{type:"root",children:[],data:{language:void 0,relevance:l}}},listLanguages:i,register:r,registerAlias:function(e,n){if("string"===typeof e)t.registerAliases("string"===typeof n?n:[...n],{languageName:e});else{let n;for(n in e)if(Object.hasOwn(e,n)){const i=e[n];t.registerAliases("string"===typeof i?i:[...i],{languageName:n})}}},registered:function(e){return Boolean(t.getLanguage(e))}};function n(e,n,i){const r=i||Sg,o="string"===typeof r.prefix?r.prefix:Tg;if(!t.getLanguage(e))throw new Error("Unknown language: `"+e+"` is not registered");t.configure({__emitter:Eg,classPrefix:o});const s=t.highlight(n,{ignoreIllegals:!0,language:e});if(s.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:s.errorRaised});const a=s._emitter.root,l=a.data;return l.language=s.language,l.relevance=s.relevance,a}function i(){return t.listLanguages()}function r(e,n){if("string"===typeof e)t.registerLanguage(e,n);else{let n;for(n in e)Object.hasOwn(e,n)&&t.registerLanguage(n,e[n])}}}(r);if(n&&c.registerAlias(n),s){const e=s.indexOf("-");l=e>-1?s.slice(0,e):s}return function(e,t){Mg(e,"element",(function(e,n,r){if("code"!==e.tagName||!r||"element"!==r.type||"pre"!==r.tagName)return;const d=function(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;for(;++n<t.length;){const e=String(t[n]);if("no-highlight"===e||"nohighlight"===e)return!1;if("lang-"===e.slice(0,5))return e.slice(5);if("language-"===e.slice(0,9))return e.slice(9)}}(e);if(!1===d||!d&&!i||d&&o&&o.includes(d))return;let u;Array.isArray(e.properties.className)||(e.properties.className=[]),e.properties.className.includes(l)||e.properties.className.unshift(l);try{u=d?c.highlight(d,lm(r),{prefix:s}):c.highlightAuto(lm(r),{prefix:s,subset:a})}catch(h){const n=h;if(d&&/Unknown language/.test(n.message))return void t.message("Cannot highlight as `"+d+"`, it\u2019s not registered",{ancestors:[r,e],cause:n,place:e.position,ruleId:"missing-language",source:"rehype-highlight"});throw n}!d&&u.data&&u.data.language&&e.properties.className.push("language-"+u.data.language),u.children.length>0&&(e.children=u.children)}))}}const jg="var(--vscode-editor-background, --vscode-sideBar-background, rgb(30 30 30))",Dg="var(--vscode-diffEditor-removedTextBackground, rgba(255, 0, 0, 0.1))",Lg="var(--vscode-diffEditor-insertedTextBackground, rgba(0, 255, 0, 0.1))",Fg="var(--vscode-gitDecoration-deletedResourceForeground, var(--vscode-errorForeground, #f14c4c))",Bg="var(--vscode-gitDecoration-addedResourceForeground, var(--vscode-debugConsole-infoForeground, #3794ff))",Ug=cp.div`
	${e=>{let{forceWrap:t}=e;return t&&"\n    pre, code {\n      white-space: pre-wrap;\n      word-break: break-all;\n      overflow-wrap: anywhere;\n    }\n  "}}

	pre {
		background-color: ${jg};
		border-radius: 5px;
		margin: 0;
		min-width: ${e=>{let{forceWrap:t}=e;return t?"auto":"max-content"}};
		padding: 10px 10px;
	}

	pre > code {
		.hljs-deletion {
			color: ${Fg};
			background-color: ${Dg};
			display: inline-block;
			width: 100%;
			text-decoration: none;
		}
		.hljs-addition {
			color: ${Bg};
			background-color: ${Lg};
			display: inline-block;
			width: 100%;
			text-decoration: none;
		}
		
		/* Also target the actual diff syntax */
		&.language-diff {
			.hljs-deletion {
				color: ${Fg};
				background-color: ${Dg};
			}
			.hljs-addition {
				color: ${Bg};
				background-color: ${Lg};
			}
			
			/* Style the diff markers themselves */
			.hljs-meta {
				color: var(--vscode-descriptionForeground);
			}
		}
	}

	code {
		span.line:empty {
			display: none;
		}
		word-wrap: break-word;
		border-radius: 5px;
		background-color: ${jg};
		font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
		font-family: var(--vscode-editor-font-family);
	}

	code:not(pre > code) {
		font-family: var(--vscode-editor-font-family);
		color: #f78383;
	}

	background-color: ${jg};
	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
	color: var(--vscode-editor-foreground, #fff);

	p,
	li,
	ol,
	ul {
		line-height: 1.5;
	}
`,$g=cp.pre`
	& .hljs {
		color: var(--vscode-editor-foreground, #fff);
	}

	& .hljs-addition,
	& .hljs-addition *,
	& .language-diff .hljs-addition,
	& code .hljs-addition,
	& code.language-diff .hljs-addition {
		color: ${Bg};
		background-color: ${Lg};
	}
	
	& .hljs-deletion,
	& .hljs-deletion *,
	& .language-diff .hljs-deletion,
	& code .hljs-deletion,
	& code.language-diff .hljs-deletion {
		color: ${Fg};
		background-color: ${Dg};
	}

	${e=>Object.keys(e.theme).map(((t,n)=>`\n      & ${t} {\n        color: ${e.theme[t]};\n      }\n    `)).join("")}
`,zg=(0,t.memo)((e=>{let{source:n,forceWrap:i=!1}=e;const{theme:r}=Ap(),[o,s]=Uf({remarkPlugins:[()=>e=>{Mg(e,"code",(e=>{e.lang?e.lang.includes(".")&&(e.lang=e.lang.split(".").slice(-1)[0]):e.lang="javascript"}))}],rehypePlugins:[Ng,{}],rehypeReactOptions:{components:{pre:e=>{let{node:t,...n}=e;return(0,Ip.jsx)($g,{...n,theme:r})}}}});return(0,t.useEffect)((()=>{s(n||"")}),[n,s,r]),(0,Ip.jsx)("div",{style:{overflowY:i?"visible":"auto",maxHeight:i?"none":"100%",backgroundColor:jg},children:(0,Ip.jsx)(Ug,{forceWrap:i,children:o})})})),Vg=zg,Hg=e=>{let{isPopup:n}=e;const{apiConfiguration:i,setApiConfiguration:r,openRouterModels:o}=Ap(),[s,a]=(0,t.useState)((null===i||void 0===i?void 0:i.openRouterModelId)||mp),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(-1),h=(0,t.useRef)(null),p=(0,t.useRef)([]),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null),v=e=>{r({...i,openRouterModelId:e,openRouterModelInfo:o[e]}),a(e)},{selectedModelId:b,selectedModelInfo:y}=(0,t.useMemo)((()=>rv(i)),[i]);ks((()=>{Sp.postMessage({type:"refreshOpenRouterModels"})})),(0,t.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const x=(0,t.useMemo)((()=>Object.keys(o).sort(((e,t)=>e.localeCompare(t)))),[o]),k=(0,t.useMemo)((()=>x.map((e=>({id:e,html:e})))),[x]),w=(0,t.useMemo)((()=>new Rf(k,{keys:["html"],threshold:.6,shouldSort:!0,isCaseSensitive:!1,ignoreLocation:!1,includeMatches:!0,minMatchCharLength:1})),[k]),C=(0,t.useMemo)((()=>s?Vf(w.search(s),"model-item-highlight"):k),[k,s,w]),S=(0,t.useMemo)((()=>x.some((e=>e.toLowerCase()===s.toLowerCase()))),[x,s]);return(0,t.useEffect)((()=>{u(-1),g.current&&(g.current.scrollTop=0)}),[s]),(0,t.useEffect)((()=>{var e;d>=0&&p.current[d]&&(null===(e=p.current[d])||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"}))}),[d]),(0,Ip.jsxs)("div",{style:{width:"100%"},children:[(0,Ip.jsx)("style",{children:"\n\t\t\t\t.model-item-highlight {\n\t\t\t\t\tbackground-color: var(--vscode-editor-findMatchHighlightBackground);\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t}\n\t\t\t\t"}),(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Ip.jsx)("label",{htmlFor:"model-search",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model"})}),(0,Ip.jsxs)(Wg,{ref:h,children:[(0,Ip.jsx)(ps,{id:"model-search",placeholder:"Search and select a model...",value:s,onInput:e=>{var t,n;v(null===(t=e.target)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.toLowerCase()),c(!0)},onFocus:()=>c(!0),onKeyDown:e=>{if(l)switch(e.key){case"ArrowDown":e.preventDefault(),u((e=>e<C.length-1?e+1:e));break;case"ArrowUp":e.preventDefault(),u((e=>e>0?e-1:e));break;case"Enter":e.preventDefault(),d>=0&&d<C.length&&(v(C[d].id),c(!1));break;case"Escape":c(!1),u(-1)}},style:{width:"100%",zIndex:qg,position:"relative"},children:s&&(0,Ip.jsx)("div",{className:"input-icon-button codicon codicon-close","aria-label":"Clear search",onClick:()=>{v(""),c(!0)},slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}})}),l&&(0,Ip.jsx)(Kg,{ref:g,children:C.map(((e,t)=>(0,Ip.jsx)(Gg,{ref:e=>p.current[t]=e,isSelected:t===d,onMouseEnter:()=>u(t),onClick:()=>{v(e.id),c(!1)},dangerouslySetInnerHTML:{__html:e.html}},e.id)))})]})]}),S?(0,Ip.jsx)(nv,{selectedModelId:b,modelInfo:y,isDescriptionExpanded:f,setIsDescriptionExpanded:m,isPopup:n}):(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:0,color:"var(--vscode-descriptionForeground)"},children:(0,Ip.jsxs)(Ip.Fragment,{children:["The extension automatically fetches the latest list of models available on"," ",(0,Ip.jsx)(rs,{style:{display:"inline",fontSize:"inherit"},href:"https://openrouter.ai/models",children:"OpenRouter."}),"If you're unsure which model to choose, blackbox works best with"," ",(0,Ip.jsx)(rs,{style:{display:"inline",fontSize:"inherit"},onClick:()=>v("anthropic/claude-3.5-sonnet:beta"),children:"anthropic/claude-3.5-sonnet:beta."}),'You can also try searching "free" for no-cost options currently available.']})})]})},Wg=cp.div`
	position: relative;
	width: 100%;
`,qg=1e3,Kg=cp.div`
	position: absolute;
	top: calc(100% - 3px);
	left: 0;
	width: calc(100% - 2px);
	max-height: 200px;
	overflow-y: auto;
	background-color: var(--vscode-dropdown-background);
	border: 1px solid var(--vscode-list-activeSelectionBackground);
	z-index: ${qg-1};
	border-bottom-left-radius: 3px;
	border-bottom-right-radius: 3px;
`,Gg=cp.div`
	padding: 5px 10px;
	cursor: pointer;
	word-break: break-all;
	white-space: normal;

	background-color: ${e=>{let{isSelected:t}=e;return t?"var(--vscode-list-activeSelectionBackground)":"inherit"}};

	&:hover {
		background-color: var(--vscode-list-activeSelectionBackground);
	}
`,Yg=cp.div`
	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: 12px;
	color: var(--vscode-descriptionForeground);

	p,
	li,
	ol,
	ul {
		line-height: 1.25;
		margin: 0;
	}

	ol,
	ul {
		padding-left: 1.5em;
		margin-left: 0;
	}

	p {
		white-space: pre-wrap;
	}

	a {
		text-decoration: none;
	}
	a {
		&:hover {
			text-decoration: underline;
		}
	}
`,Qg=(0,t.memo)((e=>{let{markdown:n,key:i,isExpanded:r,setIsExpanded:o,isPopup:s}=e;const[a,l]=Uf(),[c,d]=(0,t.useState)(!1),u=(0,t.useRef)(null),h=(0,t.useRef)(null);return(0,t.useEffect)((()=>{l(n||"")}),[n,l]),(0,t.useEffect)((()=>{if(h.current&&u.current){const{scrollHeight:e}=h.current,{clientHeight:t}=u.current;d(e>t)}}),[a,o]),(0,Ip.jsx)(Yg,{style:{display:"inline-block",marginBottom:0},children:(0,Ip.jsxs)("div",{ref:u,style:{overflowY:r?"auto":"hidden",position:"relative",wordBreak:"break-word",overflowWrap:"anywhere"},children:[(0,Ip.jsx)("div",{ref:h,style:{display:"-webkit-box",WebkitLineClamp:r?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a}),!r&&c&&(0,Ip.jsxs)("div",{style:{position:"absolute",right:0,bottom:0,display:"flex",alignItems:"center"},children:[(0,Ip.jsx)("div",{style:{width:30,height:"1.2em",background:"linear-gradient(to right, transparent, var(--vscode-sideBar-background))"}}),(0,Ip.jsx)(rs,{style:{fontSize:"inherit",paddingRight:0,paddingLeft:3,backgroundColor:s?jg:"var(--vscode-sideBar-background)"},onClick:()=>o(!0),children:"See more"})]})]})},i)}));const Xg=1001,Jg=cp.div`
	position: relative;
	z-index: ${e=>e.zIndex||Xg};
	// Force dropdowns to open downward
	& vscode-dropdown::part(listbox) {
		position: absolute !important;
		top: 100% !important;
		bottom: auto !important;
	}
`,Zg=e=>{var n,i,r,o,s,a,l,c,d,h,f;let{showModelOptions:m,apiErrorMessage:g,modelIdErrorMessage:v,isPopup:b}=e;const{apiConfiguration:y,setApiConfiguration:x,uriScheme:k,providerConfigurations:w,loadProviderConfiguration:C}=Ap(),[S,T]=(0,t.useState)([]),[E,_]=(0,t.useState)([]),[I,P]=(0,t.useState)([]),[R,A]=(0,t.useState)(!(null===y||void 0===y||!y.anthropicBaseUrl)),[M,O]=(0,t.useState)(!(null===y||void 0===y||!y.azureApiVersion)),[N,j]=(0,t.useState)(!1),[D,L]=(0,t.useState)(!1),F=e=>t=>{x({...y,[e]:t.target.value})},B=(0,t.useCallback)((e=>{const t=e.target.value;if(x({...y,apiProvider:t}),t&&w[t]){const e=w[t];x(e),A(!!e.anthropicBaseUrl),O(!!e.azureApiVersion)}else t&&C(t)}),[y,x,w,C]),{selectedProvider:U,selectedModelId:$,selectedModelInfo:z}=(0,t.useMemo)((()=>rv(y)),[y]),V=(0,t.useCallback)((()=>{"ollama"===U?Sp.postMessage({type:"requestOllamaModels",text:null===y||void 0===y?void 0:y.ollamaBaseUrl}):"lmstudio"===U?Sp.postMessage({type:"requestLmStudioModels",text:null===y||void 0===y?void 0:y.lmStudioBaseUrl}):"vscode-lm"===U&&Sp.postMessage({type:"requestVsCodeLmModels"})}),[U,null===y||void 0===y?void 0:y.ollamaBaseUrl,null===y||void 0===y?void 0:y.lmStudioBaseUrl]);(0,t.useEffect)((()=>{"ollama"!==U&&"lmstudio"!==U&&"vscode-lm"!==U||V()}),[U,V]),Np(V,"ollama"===U||"lmstudio"===U||"vscode-lm"===U?2e3:null);const H=(0,t.useCallback)((e=>{const t=e.data;"ollamaModels"===t.type&&t.ollamaModels?T(t.ollamaModels):"lmStudioModels"===t.type&&t.lmStudioModels?_(t.lmStudioModels):"vsCodeLmModels"===t.type&&t.vsCodeLmModels&&P(t.vsCodeLmModels)}),[]);u("message",H);const W=e=>(0,Ip.jsxs)(is,{id:"model-id",value:$,onChange:F("apiModelId"),style:{width:"100%"},children:[(0,Ip.jsx)(os,{value:"",children:"Select a model..."}),Object.keys(e).map((e=>(0,Ip.jsx)(os,{value:e,style:{whiteSpace:"normal",wordWrap:"break-word",maxWidth:"100%"},children:e},e)))]});return(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:5,marginBottom:b?-10:0},children:[(0,Ip.jsxs)(Jg,{className:"dropdown-container",children:[(0,Ip.jsx)("label",{htmlFor:"api-provider",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"API Provider"})}),(0,Ip.jsxs)(is,{id:"api-provider",value:U,onChange:B,style:{minWidth:130,position:"relative"},children:[(0,Ip.jsx)(os,{value:"",children:"Select"}),(0,Ip.jsx)(os,{value:"openrouter",children:"OpenRouter"}),(0,Ip.jsx)(os,{value:"anthropic",children:"Anthropic"}),(0,Ip.jsx)(os,{value:"bedrock",children:"AWS Bedrock"}),(0,Ip.jsx)(os,{value:"openai",children:"OpenAI Compatible"}),(0,Ip.jsx)(os,{value:"vertex",children:"GCP Vertex AI"}),(0,Ip.jsx)(os,{value:"gemini",children:"Google Gemini"}),(0,Ip.jsx)(os,{value:"deepseek",children:"DeepSeek"}),(0,Ip.jsx)(os,{value:"mistral",children:"Mistral"}),(0,Ip.jsx)(os,{value:"openai-native",children:"OpenAI"}),(0,Ip.jsx)(os,{value:"vscode-lm",children:"VS Code LM API"}),(0,Ip.jsx)(os,{value:"requesty",children:"Requesty"}),(0,Ip.jsx)(os,{value:"together",children:"Together"}),(0,Ip.jsx)(os,{value:"qwen",children:"Alibaba Qwen"}),(0,Ip.jsx)(os,{value:"lmstudio",children:"LM Studio"}),(0,Ip.jsx)(os,{value:"ollama",children:"Ollama"}),(0,Ip.jsx)(os,{value:"litellm",children:"LiteLLM"})]})]}),p.includes(U)&&(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"8px",padding:"8px",border:"1px solid var(--vscode-inputValidation-infoBorder)",borderRadius:"3px",color:"var(--vscode-inputValidation-infoForeground)"},children:"You are on blackbox provider, select Api Provider to use this feature"}),"anthropic"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.apiKey)||"",style:{width:"100%"},type:"password",onInput:F("apiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Anthropic API Key"})}),(0,Ip.jsx)(ns,{checked:R,onChange:e=>{const t=!0===e.target.checked;A(t),t||x({...y,anthropicBaseUrl:""})},children:"Use custom base URL"}),R&&(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.anthropicBaseUrl)||"",style:{width:"100%",marginTop:3},type:"url",onInput:F("anthropicBaseUrl"),placeholder:"Default: https://api.anthropic.com"}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.apiKey)&&(0,Ip.jsx)(rs,{href:"https://console.anthropic.com/settings/keys",style:{display:"inline",fontSize:"inherit"},children:"You can get an Anthropic API key by signing up here."})]})]}),"openai-native"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.openAiNativeApiKey)||"",style:{width:"100%"},type:"password",onInput:F("openAiNativeApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"OpenAI API Key"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.openAiNativeApiKey)&&(0,Ip.jsx)(rs,{href:"https://platform.openai.com/api-keys",style:{display:"inline",fontSize:"inherit"},children:"You can get an OpenAI API key by signing up here."})]})]}),"deepseek"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.deepSeekApiKey)||"",style:{width:"100%"},type:"password",onInput:F("deepSeekApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"DeepSeek API Key"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.deepSeekApiKey)&&(0,Ip.jsx)(rs,{href:"https://www.deepseek.com/",style:{display:"inline",fontSize:"inherit"},children:"You can get a DeepSeek API key by signing up here."})]})]}),"qwen"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsxs)(Jg,{className:"dropdown-container",style:{position:"inherit"},children:[(0,Ip.jsx)("label",{htmlFor:"qwen-line-provider",children:(0,Ip.jsx)("span",{style:{fontWeight:500,marginTop:5},children:"Alibaba API Line"})}),(0,Ip.jsxs)(is,{id:"qwen-line-provider",value:(null===y||void 0===y?void 0:y.qwenApiLine)||"china",onChange:F("qwenApiLine"),style:{minWidth:130,position:"relative"},children:[(0,Ip.jsx)(os,{value:"china",children:"China API"}),(0,Ip.jsx)(os,{value:"international",children:"International API"})]})]}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:"Please select the appropriate API interface based on your location. If you are in China, choose the China API interface. Otherwise, choose the International API interface."}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.qwenApiKey)||"",style:{width:"100%"},type:"password",onInput:F("qwenApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Qwen API Key"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.qwenApiKey)&&(0,Ip.jsx)(rs,{href:"https://bailian.console.aliyun.com/",style:{display:"inline",fontSize:"inherit"},children:"You can get a Qwen API key by signing up here."})]})]}),"mistral"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.mistralApiKey)||"",style:{width:"100%"},type:"password",onInput:F("mistralApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Mistral API Key"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.mistralApiKey)&&(0,Ip.jsx)(rs,{href:"https://console.mistral.ai/codestral",style:{display:"inline",fontSize:"inherit"},children:"You can get a Mistral API key by signing up here."})]})]}),"openrouter"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.openRouterApiKey)||"",style:{width:"100%"},type:"password",onInput:F("openRouterApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"OpenRouter API Key"})}),!(null!==y&&void 0!==y&&y.openRouterApiKey)&&(0,Ip.jsx)(jp,{href:ev(k),style:{margin:"5px 0 0 0"},appearance:"secondary",children:"Get OpenRouter API Key"}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension."," "]})]}),"bedrock"===U&&(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[(0,Ip.jsxs)(us,{value:null!==y&&void 0!==y&&y.awsUseProfile?"profile":"credentials",onChange:e=>{var t;const n="profile"===(null===(t=e.target)||void 0===t?void 0:t.value);x({...y,awsUseProfile:n})},children:[(0,Ip.jsx)(ds,{value:"credentials",children:"AWS Credentials"}),(0,Ip.jsx)(ds,{value:"profile",children:"AWS Profile"})]}),null!==y&&void 0!==y&&y.awsUseProfile?(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.awsProfile)||"",style:{width:"100%"},onInput:F("awsProfile"),placeholder:"Enter profile name (default if empty)",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"AWS Profile Name"})}):(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.awsAccessKey)||"",style:{width:"100%"},type:"password",onInput:F("awsAccessKey"),placeholder:"Enter Access Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"AWS Access Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.awsSecretKey)||"",style:{width:"100%"},type:"password",onInput:F("awsSecretKey"),placeholder:"Enter Secret Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"AWS Secret Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.awsSessionToken)||"",style:{width:"100%"},type:"password",onInput:F("awsSessionToken"),placeholder:"Enter Session Token...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"AWS Session Token"})})]}),(0,Ip.jsxs)(Jg,{zIndex:1e3,className:"dropdown-container",children:[(0,Ip.jsx)("label",{htmlFor:"aws-region-dropdown",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"AWS Region"})}),(0,Ip.jsxs)(is,{id:"aws-region-dropdown",value:(null===y||void 0===y?void 0:y.awsRegion)||"",style:{width:"100%"},onChange:F("awsRegion"),children:[(0,Ip.jsx)(os,{value:"",children:"Select a region..."}),(0,Ip.jsx)(os,{value:"us-east-1",children:"us-east-1"}),(0,Ip.jsx)(os,{value:"us-east-2",children:"us-east-2"}),(0,Ip.jsx)(os,{value:"us-west-2",children:"us-west-2"}),(0,Ip.jsx)(os,{value:"ap-south-1",children:"ap-south-1"}),(0,Ip.jsx)(os,{value:"ap-northeast-1",children:"ap-northeast-1"}),(0,Ip.jsx)(os,{value:"ap-northeast-2",children:"ap-northeast-2"}),(0,Ip.jsx)(os,{value:"ap-southeast-1",children:"ap-southeast-1"}),(0,Ip.jsx)(os,{value:"ap-southeast-2",children:"ap-southeast-2"}),(0,Ip.jsx)(os,{value:"ca-central-1",children:"ca-central-1"}),(0,Ip.jsx)(os,{value:"eu-central-1",children:"eu-central-1"}),(0,Ip.jsx)(os,{value:"eu-central-2",children:"eu-central-2"}),(0,Ip.jsx)(os,{value:"eu-west-1",children:"eu-west-1"}),(0,Ip.jsx)(os,{value:"eu-west-2",children:"eu-west-2"}),(0,Ip.jsx)(os,{value:"eu-west-3",children:"eu-west-3"}),(0,Ip.jsx)(os,{value:"sa-east-1",children:"sa-east-1"}),(0,Ip.jsx)(os,{value:"us-gov-east-1",children:"us-gov-east-1"}),(0,Ip.jsx)(os,{value:"us-gov-west-1",children:"us-gov-west-1"})]})]}),(0,Ip.jsx)(ns,{checked:(null===y||void 0===y?void 0:y.awsUseCrossRegionInference)||!1,onChange:e=>{const t=!0===e.target.checked;x({...y,awsUseCrossRegionInference:t})},children:"Use cross-region inference"}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:null!==y&&void 0!==y&&y.awsUseProfile?(0,Ip.jsx)(Ip.Fragment,{children:"Using AWS Profile credentials from ~/.aws/credentials. Leave profile name empty to use the default profile. These credentials are only used locally to make API requests from this extension."}):(0,Ip.jsx)(Ip.Fragment,{children:"Authenticate by either providing the keys above or use the default AWS credential providers, i.e. ~/.aws/credentials or environment variables. These credentials are only used locally to make API requests from this extension."})})]}),"vertex"===(null===y||void 0===y?void 0:y.apiProvider)&&(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.vertexProjectId)||"",style:{width:"100%"},onInput:F("vertexProjectId"),placeholder:"Enter Project ID...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Google Cloud Project ID"})}),(0,Ip.jsxs)(Jg,{zIndex:999,className:"dropdown-container",children:[(0,Ip.jsx)("label",{htmlFor:"vertex-region-dropdown",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Google Cloud Region"})}),(0,Ip.jsxs)(is,{id:"vertex-region-dropdown",value:(null===y||void 0===y?void 0:y.vertexRegion)||"",style:{width:"100%"},onChange:F("vertexRegion"),children:[(0,Ip.jsx)(os,{value:"",children:"Select a region..."}),(0,Ip.jsx)(os,{value:"us-east5",children:"us-east5"}),(0,Ip.jsx)(os,{value:"us-central1",children:"us-central1"}),(0,Ip.jsx)(os,{value:"europe-west1",children:"europe-west1"}),(0,Ip.jsx)(os,{value:"europe-west4",children:"europe-west4"}),(0,Ip.jsx)(os,{value:"asia-southeast1",children:"asia-southeast1"})]})]}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:["To use Google Cloud Vertex AI, you need to",(0,Ip.jsx)(rs,{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/use-claude#before_you_begin",style:{display:"inline",fontSize:"inherit"},children:"1) create a Google Cloud account \u203a enable the Vertex AI API \u203a enable the desired Claude models,"})," ",(0,Ip.jsx)(rs,{href:"https://cloud.google.com/docs/authentication/provide-credentials-adc#google-idp",style:{display:"inline",fontSize:"inherit"},children:"2) install the Google Cloud CLI \u203a configure Application Default Credentials."})]})]}),"gemini"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.geminiApiKey)||"",style:{width:"100%"},type:"password",onInput:F("geminiApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Gemini API Key"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:["This key is stored locally and only used to make API requests from this extension.",!(null!==y&&void 0!==y&&y.geminiApiKey)&&(0,Ip.jsx)(rs,{href:"https://ai.google.dev/",style:{display:"inline",fontSize:"inherit"},children:"You can get a Gemini API key by signing up here."})]})]}),"openai"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.openAiBaseUrl)||"",style:{width:"100%"},type:"url",onInput:F("openAiBaseUrl"),placeholder:"Enter base URL...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Base URL"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.openAiApiKey)||"",style:{width:"100%"},type:"password",onInput:F("openAiApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"API Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.openAiModelId)||"",style:{width:"100%"},onInput:F("openAiModelId"),placeholder:"Enter Model ID...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),(0,Ip.jsx)(ns,{checked:M,onChange:e=>{const t=!0===e.target.checked;O(t),t||x({...y,azureApiVersion:""})},children:"Set Azure API version"}),M&&(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.azureApiVersion)||"",style:{width:"100%",marginTop:3},onInput:F("azureApiVersion"),placeholder:"Default: 2024-08-01-preview"}),(0,Ip.jsxs)("div",{style:{color:(q="--vscode-descriptionForeground",`var(${q})`),display:"flex",margin:"10px 0",cursor:"pointer",alignItems:"center"},onClick:()=>j((e=>!e)),children:[(0,Ip.jsx)("span",{className:"codicon "+(N?"codicon-chevron-down":"codicon-chevron-right"),style:{marginRight:"4px"}}),(0,Ip.jsx)("span",{style:{fontWeight:700,textTransform:"uppercase"},children:"Model Configuration"})]}),N&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)(ns,{checked:null===y||void 0===y||null===(n=y.openAiModelInfo)||void 0===n?void 0:n.supportsImages,onChange:e=>{const t=!0===e.target.checked;let n=null!==y&&void 0!==y&&y.openAiModelInfo?y.openAiModelInfo:{...bp};n.supportsImages=t,x({...y,openAiModelInfo:n})},children:"Supports Images"}),(0,Ip.jsxs)("div",{style:{display:"flex",gap:10,marginTop:"5px"},children:[(0,Ip.jsx)(ps,{value:null!==y&&void 0!==y&&null!==(i=y.openAiModelInfo)&&void 0!==i&&i.contextWindow?y.openAiModelInfo.contextWindow.toString():null===(r=bp.contextWindow)||void 0===r?void 0:r.toString(),style:{flex:1},onInput:e=>{let t=null!==y&&void 0!==y&&y.openAiModelInfo?y.openAiModelInfo:{...bp};t.contextWindow=Number(e.target.value),x({...y,openAiModelInfo:t})},children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Context Window Size"})}),(0,Ip.jsx)(ps,{value:null!==y&&void 0!==y&&null!==(o=y.openAiModelInfo)&&void 0!==o&&o.maxTokens?y.openAiModelInfo.maxTokens.toString():null===(s=bp.maxTokens)||void 0===s?void 0:s.toString(),style:{flex:1},onInput:e=>{let t=null!==y&&void 0!==y&&y.openAiModelInfo?y.openAiModelInfo:{...bp};t.maxTokens=e.target.value,x({...y,openAiModelInfo:t})},children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Max Output Tokens"})})]}),(0,Ip.jsxs)("div",{style:{display:"flex",gap:10,marginTop:"5px"},children:[(0,Ip.jsx)(ps,{value:null!==y&&void 0!==y&&null!==(a=y.openAiModelInfo)&&void 0!==a&&a.inputPrice?y.openAiModelInfo.inputPrice.toString():null===(l=bp.inputPrice)||void 0===l?void 0:l.toString(),style:{flex:1},onInput:e=>{let t=null!==y&&void 0!==y&&y.openAiModelInfo?y.openAiModelInfo:{...bp};t.inputPrice=e.target.value,x({...y,openAiModelInfo:t})},children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Input Price / 1M tokens"})}),(0,Ip.jsx)(ps,{value:null!==y&&void 0!==y&&null!==(c=y.openAiModelInfo)&&void 0!==c&&c.outputPrice?y.openAiModelInfo.outputPrice.toString():null===(d=bp.outputPrice)||void 0===d?void 0:d.toString(),style:{flex:1},onInput:e=>{let t=null!==y&&void 0!==y&&y.openAiModelInfo?y.openAiModelInfo:{...bp};t.outputPrice=e.target.value,x({...y,openAiModelInfo:t})},children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Output Price / 1M tokens"})})]})]}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:(0,Ip.jsxs)("span",{style:{color:"var(--vscode-errorForeground)"},children:["(",(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Note:"})," blackbox uses complex prompts and works best with Claude models. Less capable models may not work as expected.)"]})})]}),"requesty"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.requestyApiKey)||"",style:{width:"100%"},type:"password",onInput:F("requestyApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"API Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.requestyModelId)||"",style:{width:"100%"},onInput:F("requestyModelId"),placeholder:"Enter Model ID...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:(0,Ip.jsxs)("span",{style:{color:"var(--vscode-errorForeground)"},children:["(",(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Note:"})," blackbox uses complex prompts and works best with Claude models. Less capable models may not work as expected.)"]})})]}),"together"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.togetherApiKey)||"",style:{width:"100%"},type:"password",onInput:F("togetherApiKey"),placeholder:"Enter API Key...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"API Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.togetherModelId)||"",style:{width:"100%"},onInput:F("togetherModelId"),placeholder:"Enter Model ID...",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:3,color:"var(--vscode-descriptionForeground)"},children:(0,Ip.jsxs)("span",{style:{color:"var(--vscode-errorForeground)"},children:["(",(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Note:"})," blackbox uses complex prompts and works best with Claude models. Less capable models may not work as expected.)"]})})]}),"vscode-lm"===U&&(0,Ip.jsx)("div",{children:(0,Ip.jsxs)(Jg,{zIndex:999,className:"dropdown-container",children:[(0,Ip.jsx)("label",{htmlFor:"vscode-lm-model",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Language Model"})}),I.length>0?(0,Ip.jsxs)(is,{id:"vscode-lm-model",value:null!==y&&void 0!==y&&y.vsCodeLmModelSelector?`${null!==(h=y.vsCodeLmModelSelector.vendor)&&void 0!==h?h:""}/${null!==(f=y.vsCodeLmModelSelector.family)&&void 0!==f?f:""}`:"",onChange:e=>{const t=e.target.value;if(!t)return;const[n,i]=t.split("/");F("vsCodeLmModelSelector")({target:{value:{vendor:n,family:i}}})},style:{width:"100%"},children:[(0,Ip.jsx)(os,{value:"",children:"Select a model..."}),I.map((e=>(0,Ip.jsxs)(os,{value:`${e.vendor}/${e.family}`,children:[e.vendor," - ",e.family]},`${e.vendor}/${e.family}`)))]}):(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:"The VS Code Language Model API allows you to run models provided by other VS Code extensions (including but not limited to GitHub Copilot). The easiest way to get started is to install the Copilot extension from the VS Marketplace and enabling Claude 3.5 Sonnet."}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-errorForeground)",fontWeight:500},children:"Note: This is a very experimental integration and may not work as expected."})]})}),"lmstudio"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.lmStudioBaseUrl)||"",style:{width:"100%"},type:"url",onInput:F("lmStudioBaseUrl"),placeholder:"Default: http://localhost:1234",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Base URL (optional)"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.lmStudioModelId)||"",style:{width:"100%"},onInput:F("lmStudioModelId"),placeholder:"e.g. meta-llama-3.1-8b-instruct",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),E.length>0&&(0,Ip.jsx)(us,{value:E.includes((null===y||void 0===y?void 0:y.lmStudioModelId)||"")?null===y||void 0===y?void 0:y.lmStudioModelId:"",onChange:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;n&&F("lmStudioModelId")({target:{value:n}})},children:E.map((e=>(0,Ip.jsx)(ds,{value:e,checked:(null===y||void 0===y?void 0:y.lmStudioModelId)===e,children:e},e)))}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:["LM Studio allows you to run models locally on your computer. For instructions on how to get started, see their",(0,Ip.jsx)(rs,{href:"https://lmstudio.ai/docs",style:{display:"inline",fontSize:"inherit"},children:"quickstart guide."}),"You will also need to start LM Studio's"," ",(0,Ip.jsx)(rs,{href:"https://lmstudio.ai/docs/basics/server",style:{display:"inline",fontSize:"inherit"},children:"local server"})," ","feature to use it with this extension."," ",(0,Ip.jsxs)("span",{style:{color:"var(--vscode-errorForeground)"},children:["(",(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Note:"})," blackbox uses complex prompts and works best with Claude models. Less capable models may not work as expected.)"]})]})]}),"litellm"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.liteLlmApiKey)||"",style:{width:"100%"},type:"password",onInput:F("liteLlmApiKey"),placeholder:"Default: noop",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"API Key"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.liteLlmBaseUrl)||"",style:{width:"100%"},type:"url",onInput:F("liteLlmBaseUrl"),placeholder:"Default: http://localhost:4000",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Base URL (optional)"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.liteLlmModelId)||"",style:{width:"100%"},onInput:F("liteLlmModelId"),placeholder:"e.g. gpt-4",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:["LiteLLM provides a unified interface to access various LLM providers' models. See their"," ",(0,Ip.jsx)(rs,{href:"https://docs.litellm.ai/docs/",style:{display:"inline",fontSize:"inherit"},children:"quickstart guide"})," ","for more information."]})]}),"ollama"===U&&(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.ollamaBaseUrl)||"",style:{width:"100%"},type:"url",onInput:F("ollamaBaseUrl"),placeholder:"Default: http://localhost:11434",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Base URL (optional)"})}),(0,Ip.jsx)(ps,{value:(null===y||void 0===y?void 0:y.ollamaModelId)||"",style:{width:"100%"},onInput:F("ollamaModelId"),placeholder:"e.g. llama3.1",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model ID"})}),S.length>0&&(0,Ip.jsx)(us,{value:S.includes((null===y||void 0===y?void 0:y.ollamaModelId)||"")?null===y||void 0===y?void 0:y.ollamaModelId:"",onChange:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;n&&F("ollamaModelId")({target:{value:n}})},children:S.map((e=>(0,Ip.jsx)(ds,{value:e,checked:(null===y||void 0===y?void 0:y.ollamaModelId)===e,children:e},e)))}),(0,Ip.jsxs)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:["Ollama allows you to run models locally on your computer. For instructions on how to get started, see their",(0,Ip.jsx)(rs,{href:"https://github.com/ollama/ollama/blob/main/README.md",style:{display:"inline",fontSize:"inherit"},children:"quickstart guide."}),(0,Ip.jsxs)("span",{style:{color:"var(--vscode-errorForeground)"},children:["(",(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Note:"})," blackbox uses complex prompts and works best with Claude models. Less capable models may not work as expected.)"]})]})]}),g&&(0,Ip.jsx)("p",{style:{margin:"-10px 0 4px 0",fontSize:12,color:"var(--vscode-errorForeground)"},children:g}),"openrouter"!==U&&"openai"!==U&&"ollama"!==U&&"lmstudio"!==U&&"vscode-lm"!==U&&m&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)(Jg,{zIndex:999,className:"dropdown-container",children:[(0,Ip.jsx)("label",{htmlFor:"model-id",children:(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Model"})}),"anthropic"===U&&W(pp),"bedrock"===U&&W(fp),"vertex"===U&&W(vp),"gemini"===U&&W(yp),"openai-native"===U&&W(xp),"deepseek"===U&&W(kp),"qwen"===U&&W(wp),"mistral"===U&&W(Cp)]}),(0,Ip.jsx)(nv,{selectedModelId:$,modelInfo:z,isDescriptionExpanded:D,setIsDescriptionExpanded:L,isPopup:b})]}),"openrouter"===U&&m&&(0,Ip.jsx)(Hg,{isPopup:b}),v&&(0,Ip.jsx)("p",{style:{margin:"-10px 0 4px 0",fontSize:12,color:"var(--vscode-errorForeground)"},children:v})]});var q};function ev(e){return`https://openrouter.ai/auth?callback_url=${e||"vscode"}://Blackboxapp.blackboxagent/openrouter`}const tv=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),nv=e=>{var n,i,r;let{selectedModelId:o,modelInfo:s,isDescriptionExpanded:a,setIsDescriptionExpanded:l,isPopup:c}=e;const d=Object.keys(yp).includes(o),u=[s.description&&(0,Ip.jsx)(Qg,{markdown:s.description,isExpanded:a,setIsExpanded:l,isPopup:c},"description"),(0,Ip.jsx)(iv,{isSupported:null!==(n=s.supportsImages)&&void 0!==n&&n,supportsLabel:"Supports images",doesNotSupportLabel:"Does not support images"},"supportsImages"),(0,Ip.jsx)(iv,{isSupported:null!==(i=s.supportsComputerUse)&&void 0!==i&&i,supportsLabel:"Supports computer use",doesNotSupportLabel:"Does not support computer use"},"supportsComputerUse"),!d&&(0,Ip.jsx)(iv,{isSupported:s.supportsPromptCache,supportsLabel:"Supports prompt caching",doesNotSupportLabel:"Does not support prompt caching"},"supportsPromptCache"),void 0!==s.maxTokens&&s.maxTokens>0&&(0,Ip.jsxs)("span",{children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Max output:"})," ",null===(r=s.maxTokens)||void 0===r?void 0:r.toLocaleString()," tokens"]},"maxTokens"),void 0!==s.inputPrice&&s.inputPrice>0&&(0,Ip.jsxs)("span",{children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Input price:"})," ",tv(s.inputPrice),"/million tokens"]},"inputPrice"),s.supportsPromptCache&&s.cacheWritesPrice&&(0,Ip.jsxs)("span",{children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Cache writes price:"})," ",tv(s.cacheWritesPrice||0),"/million tokens"]},"cacheWritesPrice"),s.supportsPromptCache&&s.cacheReadsPrice&&(0,Ip.jsxs)("span",{children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Cache reads price:"})," ",tv(s.cacheReadsPrice||0),"/million tokens"]},"cacheReadsPrice"),void 0!==s.outputPrice&&s.outputPrice>0&&(0,Ip.jsxs)("span",{children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Output price:"})," ",tv(s.outputPrice),"/million tokens"]},"outputPrice"),d&&(0,Ip.jsxs)("span",{style:{fontStyle:"italic"},children:["* Free up to ",o&&o.includes("flash")?"15":"2"," requests per minute. After that, billing depends on prompt size."," ",(0,Ip.jsx)(rs,{href:"https://ai.google.dev/pricing",style:{display:"inline",fontSize:"inherit"},children:"For more info, see pricing details."})]},"geminiInfo")].filter(Boolean);return(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"2px",color:"var(--vscode-descriptionForeground)"},children:u.map(((e,n)=>(0,Ip.jsxs)(t.Fragment,{children:[e,n<u.length-1&&(0,Ip.jsx)("br",{})]},n)))})},iv=e=>{let{isSupported:t,supportsLabel:n,doesNotSupportLabel:i}=e;return(0,Ip.jsxs)("span",{style:{fontWeight:500,color:t?"var(--vscode-charts-green)":"var(--vscode-errorForeground)"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-"+(t?"check":"x"),style:{marginRight:4,marginBottom:t?1:-1,fontSize:t?11:13,fontWeight:700,display:"inline-block",verticalAlign:"bottom"}}),t?n:i]})};function rv(e){const t=(null===e||void 0===e?void 0:e.apiProvider)||"anthropic",n=null===e||void 0===e?void 0:e.apiModelId,i=(e,i)=>{let r,o;return n&&n in e?(r=n,o=e[n]):(r=i,o=e[i]),{selectedProvider:t,selectedModelId:r,selectedModelInfo:o}};switch(t){case"anthropic":default:return i(pp,hp);case"bedrock":return i(fp,"anthropic.claude-3-5-sonnet-20241022-v2:0");case"vertex":return i(vp,"claude-3-5-sonnet-v2@20241022");case"gemini":return i(yp,"gemini-2.0-flash-exp");case"openai-native":return i(xp,"gpt-4o");case"deepseek":return i(kp,"deepseek-chat");case"qwen":return i(wp,"qwen-coder-plus-latest");case"mistral":return i(Cp,"codestral-2501");case"openrouter":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.openRouterModelId)||mp,selectedModelInfo:(null===e||void 0===e?void 0:e.openRouterModelInfo)||gp};case"openai":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.openAiModelId)||"",selectedModelInfo:bp};case"ollama":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.ollamaModelId)||"",selectedModelInfo:bp};case"lmstudio":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.lmStudioModelId)||"",selectedModelInfo:bp};case"vscode-lm":return{selectedProvider:t,selectedModelId:null!==e&&void 0!==e&&e.vsCodeLmModelSelector?`${e.vsCodeLmModelSelector.vendor}/${e.vsCodeLmModelSelector.family}`:"",selectedModelInfo:{...bp,supportsImages:!1}};case"litellm":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.liteLlmModelId)||"",selectedModelInfo:bp}}}const ov=(0,t.memo)(Zg);var sv=n(122),av=n.n(sv),lv=t.useState,cv=t.useEffect,dv=t.useRef;const uv=function(e,n){var r=void 0===n?{}:n,l=r.width,c=void 0===l?1/0:l,d=r.height,u=void 0===d?1/0:d;if(!a)return["function"===typeof e?e({width:c,height:u}):e,{width:c,height:u}];var h=lv({width:c,height:u}),p=h[0],f=h[1];"function"===typeof e&&(e=e(p));var m=e.props.style||{},g=dv(null),v=null,b=function(){var e=g.current,t=e?{width:e.offsetWidth,height:e.offsetHeight}:{width:c,height:u};f(t)},y=function(e){o(e,"resize",b),setTimeout(b,35)};return cv((function(){var e=g.current;if(e){if(e.contentWindow)v=e.contentWindow,y(v);else{var t=function(){o(e,"load",t),v=e.contentWindow,y(v)};s(e,"load",t)}return function(){v&&v.removeEventListener&&s(v,"resize",b)}}}),[]),m.position="relative",[t.cloneElement.apply(i,li([e,{style:m}],li([t.createElement("iframe",{ref:g,style:{background:"transparent",border:"none",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:-1}})],t.Children.toArray(e.props.children)))),p]};function hv(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((t=>t.uri===e));return n||function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((t=>{const n=String(t.uriTemplate).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\\\{([^}]+)\\\}/g,"([^/]+)");return new RegExp(`^${n}$`).test(e)}))}(e,t)}function pv(e,t){const n=t.items.find((t=>t.mcpId===e));return(null===n||void 0===n?void 0:n.name)||e}const fv={html:"html",htm:"html",css:"css",js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",py:"python",rb:"ruby",php:"php",java:"java",cs:"csharp",go:"go",rs:"rust",scala:"scala",kt:"kotlin",swift:"swift",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",md:"markdown",csv:"csv",sh:"bash",bash:"bash",zsh:"bash",ps1:"powershell",toml:"toml",ini:"ini",cfg:"ini",conf:"ini",sql:"sql",graphql:"graphql",gql:"graphql",tex:"latex",svg:"svg",txt:"text",c:"c",cpp:"cpp",h:"c",hpp:"cpp",hs:"haskell",lhs:"haskell",elm:"elm",clj:"clojure",cljs:"clojure",erl:"erlang",ex:"elixir",exs:"elixir",dart:"dart",m:"objectivec",mm:"objectivec",lua:"lua",gd:"gdscript",unity:"csharp",r:"r",jl:"julia",ipynb:"jupyter"};const mv=e=>e.replace(/^[^a-zA-Z0-9]+/,""),gv=e=>{var n;let{code:i,diff:r,language:o,path:s,isFeedback:a,isConsoleLogs:l,isExpanded:c,onToggleExpand:d,isLoading:u}=e;const h=(0,t.useMemo)((()=>i&&(null!==o&&void 0!==o?o:s?function(e){var t;const n=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return fv[n]}(s):void 0)),[s,o,i]),{additions:p,deletions:f}=(0,t.useMemo)((()=>{if(!r)return{additions:0,deletions:0};try{const e=r.match(/^(\+)(?!\+{2,})/gm),t=r.match(/^(-)(?!-{2,})/gm);return{additions:(null===e||void 0===e?void 0:e.length)||0,deletions:(null===t||void 0===t?void 0:t.length)||0}}catch(e){return console.error("Error parsing diff:",e),{additions:0,deletions:0}}}),[r]);return(0,Ip.jsxs)("div",{style:{borderRadius:3,backgroundColor:jg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:[(s||a||l)&&(0,Ip.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",display:"flex",alignItems:"center",padding:"9px 10px",cursor:u?"wait":"pointer",opacity:u?.7:1,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:u?void 0:d,children:[a||l?(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Ip.jsx)("span",{className:"codicon codicon-"+(a?"feedback":"output"),style:{marginRight:"6px"}}),(0,Ip.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:a?"User Edits":"Console Logs"})]}):(0,Ip.jsxs)(Ip.Fragment,{children:[(null===s||void 0===s?void 0:s.startsWith("."))&&(0,Ip.jsx)("span",{children:"."}),(0,Ip.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px",direction:"rtl",textAlign:"left"},children:mv(null!==s&&void 0!==s?s:"")+"\u200e"})]}),(0,Ip.jsx)("div",{style:{flexGrow:1}}),r&&(p>0||f>0)&&(0,Ip.jsxs)("div",{style:{display:"flex",gap:"10px",marginRight:"10px",fontSize:"12px"},children:[p>0&&(0,Ip.jsxs)("span",{style:{color:"#22863a",fontWeight:"bold"},children:["+",p]}),f>0&&(0,Ip.jsxs)("span",{style:{color:"#cb2431",fontWeight:"bold"},children:["-",f]})]}),(0,Ip.jsx)("span",{className:"codicon codicon-chevron-"+(c?"up":"down")})]}),(!(s||a||l)||c)&&(0,Ip.jsx)("div",{style:{overflowX:"auto",overflowY:"hidden",maxWidth:"100%"},children:(0,Ip.jsx)(Vg,{source:`\`\`\`${void 0!==r?"diff":h}\n${(null!==(n=null!==i&&void 0!==i?i:r)&&void 0!==n?n:"").trim()}\n\`\`\``})})]})},vv=(0,t.memo)(gv),bv=()=>e=>{Mg(e,"text",((e,t,n)=>{const i=/https?:\/\/[^\s<>)"]+/g,r=e.value.match(i);if(!r)return;const o=e.value.split(i),s=[];o.forEach(((e,t)=>{e&&s.push({type:"text",value:e}),r[t]&&s.push({type:"link",url:r[t],children:[{type:"text",value:r[t]}]})})),n&&n.children.splice(t,1,...s)}))},yv=cp.div`
	pre {
		background-color: ${jg};
		border-radius: 3px;
		margin: 13x 0;
		padding: 10px 10px;
		max-width: calc(100vw - 20px);
		overflow-x: auto;
		overflow-y: hidden;
	}

	pre > code {
		.hljs-deletion {
			background-color: var(--vscode-diffEditor-removedTextBackground);
			display: inline-block;
			width: 100%;
		}
		.hljs-addition {
			background-color: var(--vscode-diffEditor-insertedTextBackground);
			display: inline-block;
			width: 100%;
		}
	}

	code {
		span.line:empty {
			display: none;
		}
		word-wrap: break-word;
		border-radius: 3px;
		background-color: ${jg};
		font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
		font-family: var(--vscode-editor-font-family);
	}

	code:not(pre > code) {
		font-family: var(--vscode-editor-font-family, monospace);
		color: var(--vscode-textPreformat-foreground, #f78383);
		background-color: var(--vscode-textCodeBlock-background, #1e1e1e);
		padding: 0px 2px;
		border-radius: 3px;
		border: 1px solid var(--vscode-textSeparator-foreground, #424242);
		white-space: pre-line;
		word-break: break-word;
		overflow-wrap: anywhere;
	}

	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: var(--vscode-font-size, 13px);

	p,
	li,
	ol,
	ul {
		line-height: 1.25;
	}

	ol,
	ul {
		padding-left: 2.5em;
		margin-left: 0;
	}

	p {
		white-space: pre-wrap;
	}

	a {
		text-decoration: none;
	}
	a {
		&:hover {
			text-decoration: underline;
		}
	}
`,xv=cp.button`
  position: absolute;
  top: 5px;
  right: 5px;
  background: var(--vscode-button-secondaryBackground);
  border: 1px solid var(--vscode-button-border, transparent);
  color: var(--vscode-button-secondaryForeground);
  padding: 4px;
  border-radius: 3px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;

  &:hover {
    background: var(--vscode-button-secondaryHoverBackground);
  }

  &:active {
    background: var(--vscode-button-activeBackground);
  }

  & > i {
    font-family: codicon;
    font-style: normal;
    font-size: 16px;
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    line-height: 16px;
    transition: transform 0.2s ease;
  }

  & > i.codicon-check {
    transform: scale(1.1);
    color: var(--vscode-testing-iconPassed, #73c991);
  }
`,kv=e=>{let{children:n,theme:i}=e;const[r,o]=(0,t.useState)(!1),s=e=>{var t;return"string"===typeof e?e:Array.isArray(e)?e.map(s).join(""):null!==e&&void 0!==e&&null!==(t=e.props)&&void 0!==t&&t.children?s(e.props.children):""};return(0,Ip.jsxs)(wv,{children:[(0,Ip.jsx)(xv,{onClick:()=>{try{var e,t;const i=null===n||void 0===n||null===(e=n[0])||void 0===e||null===(t=e.props)||void 0===t?void 0:t.children;if(!i)return void console.error("No code content found");const r=s(i);r?(navigator.clipboard.writeText(r),o(!0),setTimeout((()=>o(!1)),2e3)):console.error("Could not extract code text",{codeElement:i})}catch(i){console.error("Error copying code:",i)}},title:r?"Copied!":"Copy",children:(0,Ip.jsx)("i",{className:r?"codicon codicon-check":"codicon codicon-copy"})}),(0,Ip.jsx)(Cv,{theme:i,children:n})]})},wv=cp.div`
  position: relative;
  
  &:hover ${xv} {
    opacity: 1;
  }
`,Cv=cp.pre`
	& .hljs {
		color: var(--vscode-editor-foreground, #fff);
	}

	${e=>Object.keys(e.theme).map(((t,n)=>`\n      & ${t} {\n        color: ${e.theme[t]};\n      }\n    `)).join("")}
`,Sv=(0,t.memo)((e=>{let{markdown:n}=e;const{theme:i}=Ap(),[r,o]=Uf({remarkPlugins:[bv,()=>e=>{Mg(e,"code",(e=>{e.lang?e.lang.includes(".")&&(e.lang=e.lang.split(".").slice(-1)[0]):e.lang="javascript"}))}],rehypePlugins:[Ng,{}],rehypeReactOptions:{components:{pre:e=>(0,Ip.jsx)(kv,{...e,theme:i})}}});return(0,t.useEffect)((()=>{o(n||"")}),[n,o,i]),(0,Ip.jsx)("div",{style:{},children:(0,Ip.jsx)(yv,{children:r})})})),Tv=Sv;const Ev=function(e){var n=(0,t.useRef)(e);n.current=e,xs((function(){return function(){return n.current()}}))};const _v=function(e){var n=(0,t.useRef)(0),i=(0,t.useState)(e),r=i[0],o=i[1],s=(0,t.useCallback)((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){o(e)}))}),[]);return Ev((function(){cancelAnimationFrame(n.current)})),[r,s]};const Iv=function(e,n){void 0===e&&(e=1/0),void 0===n&&(n=1/0);var i=_v({width:a?window.innerWidth:e,height:a?window.innerHeight:n}),r=i[0],l=i[1];return(0,t.useEffect)((function(){if(a){var e=function(){l({width:window.innerWidth,height:window.innerHeight})};return o(window,"resize",e),function(){s(window,"resize",e)}}}),[]),r},Pv=e=>{let{images:n,style:i,setImages:r,onHeightChange:o}=e;const[s,a]=(0,t.useState)(null),l=(0,t.useRef)(null),{width:c}=Iv();(0,t.useLayoutEffect)((()=>{if(l.current){let e=l.current.clientHeight;e||(e=l.current.getBoundingClientRect().height),null===o||void 0===o||o(e)}a(null)}),[n,c,o]);const d=void 0!==r;return(0,Ip.jsx)("div",{ref:l,style:{display:"flex",gap:5,rowGap:3,...i},children:(0,Ip.jsx)("div",{style:{overflowX:"auto",overflowY:"hidden",display:"flex",gap:"5px",flexWrap:"nowrap",paddingTop:"5px",paddingRight:"5px",scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map(((e,t)=>(0,Ip.jsxs)("div",{style:{position:"relative",flexShrink:0,minWidth:"24px"},onMouseEnter:()=>a(t),onMouseLeave:()=>a(null),children:[(0,Ip.jsx)("img",{src:e,alt:`Thumbnail ${t+1}`,style:{width:24,height:24,objectFit:"cover",borderRadius:4,cursor:"pointer"},onClick:()=>(e=>{Sp.postMessage({type:"openImage",text:e})})(e),height:24,width:24}),d&&s===t&&(0,Ip.jsx)("div",{onClick:()=>(e=>{null===r||void 0===r||r((t=>t.filter(((t,n)=>n!==e))))})(t),style:{position:"absolute",top:-4,right:-4,width:13,height:13,borderRadius:"50%",backgroundColor:"var(--vscode-badge-background)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,Ip.jsx)("span",{className:"codicon codicon-close",style:{color:"var(--vscode-foreground)",fontSize:10,fontWeight:"bold"}})})]},t)))})})},Rv=(0,t.memo)(Pv),Av=e=>{let{item:t}=e;const n="uri"in t?t.uri:t.uriTemplate;return(0,Ip.jsxs)("div",{style:{padding:"3px 0"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[(0,Ip.jsx)("span",{className:"codicon codicon-symbol-file",style:{marginRight:"6px"}}),(0,Ip.jsx)("span",{style:{fontWeight:500,wordBreak:"break-all"},children:n})]}),(0,Ip.jsx)("div",{style:{fontSize:"12px",opacity:.8,margin:"4px 0"},children:t.name&&t.description?`${t.name}: ${t.description}`:!t.name&&t.description?t.description:!t.description&&t.name?t.name:"No description"}),(0,Ip.jsxs)("div",{style:{fontSize:"12px"},children:[(0,Ip.jsx)("span",{style:{opacity:.8},children:"Returns "}),(0,Ip.jsx)("code",{style:{color:"var(--vscode-textPreformat-foreground)",background:"var(--vscode-textPreformat-background)",padding:"1px 4px",borderRadius:"3px"},children:t.mimeType||"Unknown"})]})]},n)},Mv=e=>{let{tool:t,serverName:n}=e;return(0,Ip.jsxs)("div",{style:{padding:"3px 0"},children:[(0,Ip.jsxs)("div",{style:{display:"flex"},children:[(0,Ip.jsx)("span",{className:"codicon codicon-symbol-method",style:{marginRight:"6px"}}),(0,Ip.jsx)("span",{style:{fontWeight:500},children:t.name})]}),t.description&&(0,Ip.jsx)("div",{style:{marginLeft:"0px",marginTop:"4px",opacity:.8,fontSize:"12px"},children:t.description}),t.inputSchema&&"properties"in t.inputSchema&&Object.keys(t.inputSchema.properties).length>0&&(0,Ip.jsxs)("div",{style:{marginTop:"8px",fontSize:"12px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 30%, transparent)",borderRadius:"3px",padding:"8px"},children:[(0,Ip.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"11px",textTransform:"uppercase"},children:"Parameters"}),Object.entries(t.inputSchema.properties).map((e=>{let[n,i]=e;const r=t.inputSchema&&"required"in t.inputSchema&&Array.isArray(t.inputSchema.required)&&t.inputSchema.required.includes(n);return(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"baseline",marginTop:"4px"},children:[(0,Ip.jsxs)("code",{style:{color:"var(--vscode-textPreformat-foreground)",marginRight:"8px"},children:[n,r&&(0,Ip.jsx)("span",{style:{color:"var(--vscode-errorForeground)"},children:"*"})]}),(0,Ip.jsx)("span",{style:{opacity:.8,overflowWrap:"break-word",wordBreak:"break-word"},children:i.description||"No description"})]},n)}))]})]},t.name)},Ov=/\/(explain\b|review\b|tests\b|test\b|improve\b|security\b|bugs\b|onboarding\b|pr\b|newtask\b|deep-planning\b)(?=[.,;:!?]?(?=[\s\r\n]|$))/,Nv=(new RegExp(Ov.source,"g"),[{command:"explain",description:"Explain the selected code or concept in simple terms",icon:"lightbulb",prompt:"Explain how the code in the active editor works, including its purpose and logic. If a specific file, terminal output, or code block is provided, use that instead."},{command:"review",description:"Review code for readability, quality, and issues",icon:"search",prompt:"Review the code in the active editor for structure, readability, and possible issues. If a file path, terminal output, or git commit is specified, review that instead."},{command:"tests",description:"Generate and run tests for the selected code",icon:"beaker",prompt:"Generate unit tests for the code in the active editor. If a different file or function is provided, generate tests for that instead."},{command:"improve",description:"Suggest improvements for code quality and maintainability",icon:"wand",prompt:"Suggest improvements to the code in the active editor, focusing on clarity, maintainability, and performance. If a specific file or snippet is mentioned, apply suggestions there instead."},{command:"security",description:"Scan code for security risks and vulnerabilities",icon:"shield",prompt:"Scan the code in the active editor for security vulnerabilities or unsafe patterns. Use another file or source if specifically provided."},{command:"bugs",description:"Detect potential bugs and edge case issues",icon:"bug",prompt:"Identify possible bugs, runtime errors, or logic flaws in the active editor. If a different input is given, analyze that instead."},{command:"onboarding",description:"Generate README or project onboarding materials",icon:"book",prompt:"Generate onboarding documentation including a README, setup instructions, and usage guide for the active project. Use another path or context if one is explicitly shared."},{command:"newtask",description:"Create a new task with context from the current task",icon:"book",prompt:"The user has explicitly asked you to help them create a new task with preloaded context, which you will generate. The user may have provided instructions or additional information for you to consider when summarizing existing work and creating the context for the new task.\nIrrespective of whether additional information or instructions are given, you are ONLY allowed to respond to this message by calling the new_task tool.\n\nThe new_task tool is defined below:\n\nDescription:\nYour task is to create a detailed summary of the conversation so far, paying close attention to the user's explicit requests and your previous actions. This summary should be thorough in capturing technical details, code patterns, and architectural decisions that would be essential for continuing with the new task.\nThe user will be presented with a preview of your generated context and can choose to create a new task or keep chatting in the current conversation.\n\nParameters:\n- Context: (required) The context to preload the new task with. If applicable based on the current task, this should include:\n  1. Current Work: Describe in detail what was being worked on prior to this request to create a new task. Pay special attention to the more recent messages / conversation.\n  2. Key Technical Concepts: List all important technical concepts, technologies, coding conventions, and frameworks discussed, which might be relevant for the new task.\n  3. Relevant Files and Code: If applicable, enumerate specific files and code sections examined, modified, or created for the task continuation. Pay special attention to the most recent messages and changes.\n  4. Problem Solving: Document problems solved thus far and any ongoing troubleshooting efforts.\n  5. Pending Tasks and Next Steps: Outline all pending tasks that you have explicitly been asked to work on, as well as list the next steps you will take for all outstanding work, if applicable. Include code snippets where they add clarity. For any next steps, include direct quotes from the most recent conversation showing exactly what task you were working on and where you left off. This should be verbatim to ensure there's no information loss in context between tasks.\n\nUsage:\n<new_task>\n<context>context to preload new task with</context>\n</new_task>\n\nBelow is the the user's input when they indicated that they wanted to create a new task.\n"},{command:"deep-planning",description:"Create a comprehensive implementation plan before coding",icon:"lightbulb",prompt:'Your task is to create a comprehensive implementation plan before writing any code. This process has four distinct steps that must be completed in order.\n\nYour behavior should be methodical and thorough - take time to understand the codebase completely before making any recommendations. The quality of your investigation directly impacts the success of the implementation.\n\n## STEP 1: Silent Investigation\n\n<important>\nuntil explicitly instructed by the user to proceed with coding.\nYou must thoroughly understand the existing codebase before proposing any changes.\nPerform your research without commentary or narration. Execute commands and read files without explaining what you\'re about to do. Only speak up if you have specific questions for the user.\n</important>\n\n### Required Research Activities\nYou must use the read_file tool to examine relevant source files, configuration files, and documentation. You must use terminal commands to gather information about the codebase structure and patterns. All terminal output must be piped to cat for visibility.\n\n### Essential Terminal Commands\nExecute these commands to build your understanding. You must tailor them to the codebase and ensure the output is not overly verbose. These are only examples, the exact commands will differ depending on the codebase.\n\n\n# Discover project structure and file types\nfind . -type f -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.java" -o -name "*.cpp" | head -30 | cat\n\n# Find all class and function definitions\ngrep -r "class|function|def|interface|struct" --include="*.py" --include="*.js" --include="*.ts" --include="*.java" --include="*.cpp" . | cat\n\n# Analyze import patterns and dependencies\ngrep -r "import|from|require|#include" --include="*.py" --include="*.js" --include="*.ts" --include="*.java" --include="*.cpp" . | sort | uniq | cat\n\n# Find dependency manifests\nfind . -name "requirements*.txt" -o -name "package.json" -o -name "Cargo.toml" -o -name "pom.xml" -o -name "Gemfile" | xargs cat\n\n# Identify technical debt and TODOs\ngrep -r "TODO|FIXME|XXX|HACK|NOTE" --include="*.py" --include="*.js" --include="*.ts" --include="*.java" --include="*.cpp" . | cat\n\n\n## STEP 2: Discussion and Questions\n\nAsk the user brief, targeted questions that will influence your implementation plan. Keep your questions concise and conversational. Ask only essential questions needed to create an accurate plan.\n\n**Ask questions only when necessary for:**\n- Clarifying ambiguous requirements or specifications\n- Choosing between multiple equally valid implementation approaches  \n- Confirming assumptions about existing system behavior or constraints\n- Understanding preferences for specific technical decisions that will affect the implementation\n\nYour questions should be direct and specific. Avoid long explanations or multiple questions in one response.\n\n## STEP 3: Create Implementation Plan Document\n\nCreate a structured markdown document containing your complete implementation plan. The document must follow this exact format with clearly marked sections:\n\n### Document Structure Requirements\n\nYour implementation plan must be saved as implementation_plan.md, and *must* be structured as follows:\n\n\n# Implementation Plan\n\n[Overview]\nSingle sentence describing the overall goal.\n\nMultiple paragraphs outlining the scope, context, and high-level approach. Explain why this implementation is needed and how it fits into the existing system.\n\n[Types]  \nSingle sentence describing the type system changes.\n\nDetailed type definitions, interfaces, enums, or data structures with complete specifications. Include field names, types, validation rules, and relationships.\n\n[Files]\nSingle sentence describing file modifications.\n\nDetailed breakdown:\n- New files to be created (with full paths and purpose)\n- Existing files to be modified (with specific changes)  \n- Files to be deleted or moved\n- Configuration file updates\n\n[Functions]\nSingle sentence describing function modifications.\n\nDetailed breakdown:\n- New functions (name, signature, file path, purpose)\n- Modified functions (exact name, current file path, required changes)\n- Removed functions (name, file path, reason, migration strategy)\n\n[Classes]\nSingle sentence describing class modifications.\n\nDetailed breakdown:\n- New classes (name, file path, key methods, inheritance)\n- Modified classes (exact name, file path, specific modifications)\n- Removed classes (name, file path, replacement strategy)\n\n[Dependencies]\nSingle sentence describing dependency modifications.\n\nDetails of new packages, version changes, and integration requirements.\n\n[Testing]\nSingle sentence describing testing approach.\n\nTest file requirements, existing test modifications, and validation strategies.\n\n[Implementation Order]\nSingle sentence describing the implementation sequence.\n\nNumbered steps showing the logical order of changes to minimize conflicts and ensure successful integration.\n\n\n## STEP 4: Implement the task\n\nUse the **plan document** as your single source of truth. Do NOT request additional codebase investigation unless the plan is incomplete or contradictory.  \nYou must periodically re-read the plan file to ensure strict alignment with it during implementation.  \n\n**Task Progress Format:**\n<IMPORTANT>\nYou absolutely must include the task_progress contents in context before executing the task. When providing it, do not wrap it in XML tags- instead provide it like this:\n\ntask_progress Items:\n- [ ] Step 1: Brief description of first implementation step\n- [ ] Step 2: Brief description of second implementation step  \n- [ ] Step 3: Brief description of third implementation step\n- [ ] Step N: Brief description of final implementation step\n\nAs you implement, update the checkboxes `[ ]` \u2192 `[x]` to reflect completed steps.  \n</IMPORTANT>\n\n## Quality Standards\n\nYou must be specific with exact file paths, function names, and class names. You must be comprehensive and avoid assuming implicit understanding. You must be practical and consider real-world constraints and edge cases. You must use precise technical language and avoid ambiguity.\n\nYour implementation plan should be detailed enough that another developer could execute it without additional investigation.\n\n---\n\n**Execute all four steps in sequence. Your role is to plan thoroughly and implement to complete the task successfully.**\n\nGiven the user\'s input when they indicated that they wanted to create a comprehensive implementation plan.'}]),jv=/@((?:\/|\w+:\/\/)[^\s]+?|"\/[^"]*?"|[a-f0-9]{7,40}\b|problems\b|terminal\b|git-changes\b)(?=[.,;:!?()]*(?=[\s\r\n]|$))/,Dv=new RegExp(jv.source,"g"),Lv=new RegExp(`(${jv.source})|(${Ov.source})`,"g"),Fv=e=>{let{task:n,tokensIn:i,tokensOut:r,doesModelSupportPromptCache:o,cacheWrites:s,cacheReads:a,totalCost:l,onClose:c,userCredits:d,onAddCredits:u,hasCouponRedeemed:h=!1}=e;const{apiConfiguration:p}=Ap(),[f,m]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[x,k]=(0,t.useState)(!1),w=(0,t.useRef)(null),C=(0,t.useRef)(null),{height:S,width:T}=Iv();(0,t.useEffect)((()=>{if(g&&w.current){const e=.5*S;w.current.style.maxHeight=`${e}px`}}),[g,S]),(0,t.useEffect)((()=>{if(C.current&&w.current){let e=w.current.clientHeight;e||(e=w.current.getBoundingClientRect().height);const t=C.current.scrollHeight>e;t||v(!1),y(t)}}),[n.text,T]);const E=(0,t.useMemo)((()=>"gpt4omini"!==(null===p||void 0===p?void 0:p.apiProvider)),[null===p||void 0===p?void 0:p.apiProvider]);return(0,Ip.jsxs)("div",{style:{padding:"10px 13px 10px 13px"},children:[(0,Ip.jsxs)("div",{className:"task-header-actions",style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-badge-foreground)",borderRadius:"3px",padding:"9px 10px 9px 14px",display:"flex",flexDirection:"column",gap:6,position:"relative",zIndex:1},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginLeft:-2,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",flexGrow:1,minWidth:0},onClick:()=>m(!f),children:[(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",flexShrink:0},children:(0,Ip.jsx)("span",{style:{color:"var(--vscode-foreground)"},className:"codicon codicon-chevron-"+(f?"down":"right")})}),(0,Ip.jsxs)("div",{style:{marginLeft:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexGrow:1,minWidth:0},children:[(0,Ip.jsxs)("span",{style:{fontWeight:"bold",color:"var(--vscode-foreground)"},children:["Task",!f&&":"]}),!f&&(0,Ip.jsx)("span",{style:{marginLeft:4,color:"var(--vscode-foreground)"},children:Bv(n.text,!1)})]})]}),!f&&E&&(0,Ip.jsx)("div",{style:{marginLeft:10,backgroundColor:"color-mix(in srgb, var(--vscode-badge-foreground) 70%, transparent)",color:"var(--vscode-badge-background)",padding:"2px 4px",borderRadius:"500px",fontSize:"11px",fontWeight:500,display:"inline-block",flexShrink:0}}),(0,Ip.jsx)("div",{className:"task-header-actions",children:(0,Ip.jsx)(ts,{appearance:"icon",title:"Copy task text",onClick:async()=>{if(n.text)try{await navigator.clipboard.writeText(n.text),k(!0),setTimeout((()=>k(!1)),2e3)}catch(e){console.error("Copy to clipboard failed:",e);const t=document.createElement("textarea");t.value=n.text,document.body.appendChild(t),t.select();try{document.execCommand("copy"),k(!0),setTimeout((()=>k(!1)),2e3)}catch(e){console.error("Fallback: Unable to copy",e)}document.body.removeChild(t)}},style:{marginLeft:6,flexShrink:0,opacity:0},className:"copy-button",children:(0,Ip.jsx)("span",{className:"codicon codicon-"+(x?"check":"copy")})})}),(0,Ip.jsx)("style",{children:"\n\t\t\t\t\t\t\t.task-header-actions:hover .copy-button,\n\t\t\t\t\t\t\t.task-header-actions:hover .mcp-button {\n\t\t\t\t\t\t\t\topacity: 1 !important;\n\t\t\t\t\t\t\t\ttransition: opacity 0.2s ease-in-out;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.copy-button,\n\t\t\t\t\t\t\t.mcp-button {\n\t\t\t\t\t\t\t\ttransition: opacity 0.2s ease-in-out;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:c,style:{marginLeft:6,flexShrink:0},children:(0,Ip.jsx)("span",{className:"codicon codicon-close"})})]}),f&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{ref:w,style:{marginTop:-2,fontSize:"var(--vscode-font-size)",overflowY:g?"auto":"hidden",wordBreak:"break-word",overflowWrap:"anywhere",position:"relative"},children:[(0,Ip.jsx)("div",{ref:C,style:{display:"-webkit-box",WebkitLineClamp:g?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",color:"var(--vscode-foreground)"},children:Bv(n.text,!1)}),!g&&b&&(0,Ip.jsxs)("div",{style:{position:"absolute",right:0,bottom:0,display:"flex",alignItems:"center"},children:[(0,Ip.jsx)("div",{style:{width:30,height:"1.2em",background:"linear-gradient(to right, transparent, var(--vscode-badge-background))"}}),(0,Ip.jsx)("div",{style:{cursor:"pointer",color:"var(--vscode-textLink-foreground)",paddingRight:0,paddingLeft:3,backgroundColor:"var(--vscode-badge-background)"},onClick:()=>v(!g),children:"See more"})]})]}),g&&b&&(0,Ip.jsx)("div",{style:{cursor:"pointer",color:"var(--vscode-textLink-foreground)",marginLeft:"auto",textAlign:"right",paddingRight:2},onClick:()=>v(!g),children:"See less"}),n.images&&n.images.length>0&&(0,Ip.jsx)(Rv,{images:n.images}),n.videos&&n.videos.length>0&&(0,Ip.jsx)(Rv,{images:[n.videos[0].frameDataUrls[0]]}),(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:!1})]})]}),!1]})},Bv=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return e;return e.split(Dv).map(((e,n)=>n%2===0?e:(0,Ip.jsxs)("span",{className:t?"mention-context-highlight-with-shadow":"mention-context-highlight",style:{cursor:"pointer"},onClick:()=>Sp.postMessage({type:"openMention",text:e}),children:["@",e]},n)))},Uv=(0,t.memo)(Fv);async function $v(e,t,n){try{fetch("https://www.useblackbox.io/tlm",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:t,eventName:e,eventMetadata:n})})}catch(K$){console.log("Error telemtry",K$)}}const zv="Other Engagement",Vv=e=>{let{path:t,revisionId:n}=e;return(0,Ip.jsx)("button",{style:{background:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"none",padding:"4px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"getRevisions",path:t,revisionId:n})},children:"Rollback"})},Hv=e=>{let{context:t}=e;return(0,Ip.jsxs)("div",{className:"bg-[var(--vscode-badge-background)] text-[var(--vscode-badge-foreground)] rounded-[3px] p-[14px] pb-[6px]",children:[(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"Task"}),(0,Ip.jsx)(Tv,{markdown:t})]})},Wv=(0,t.memo)((e=>{const{isLast:n,onHeightChange:i,message:r}=e,o=(0,t.useRef)(0),[s,{height:a}]=uv((0,Ip.jsx)("div",{style:{padding:"10px 6px 10px 15px"},children:(0,Ip.jsx)(qv,{...e})}));return(0,t.useEffect)((()=>{const e=0===o.current;n&&0!==a&&a!==1/0&&a!==o.current&&(e||i(a>o.current),o.current=a)}),[a,n,i,r]),s}),av()),qv=e=>{var n,i,r,o;let{message:s,isExpanded:a,onToggleExpand:l,lastModifiedMessage:c,getLatestCodeRevisions:d,isLast:u,upgradeForAccess:h}=e;const[p,f]=(0,t.useState)([]),{mcpServers:m,mcpMarketplaceCatalog:g,apiConfiguration:v}=Ap(),[b,y,x]=(0,t.useMemo)((()=>{if(null!=s.text&&"api_req_started"===s.say){const e=JSON.parse(s.text);return[e.cost,e.cancelReason,e.streamingFailedMessage]}return[void 0,void 0,void 0]}),[s.text,s.say]),k=u&&"api_req_failed"===(null===c||void 0===c?void 0:c.ask)?null===c||void 0===c?void 0:c.text:void 0,w=u&&"command"===(null===c||void 0===c?void 0:c.ask)&&(null===c||void 0===c||null===(n=c.text)||void 0===n?void 0:n.includes(up)),C=u&&"mcp_server_request_started"===(null===c||void 0===c?void 0:c.say),S="ask"===s.type?s.ask:s.say,T="var(--vscode-foreground)",E="var(--vscode-errorForeground)",_="var(--vscode-charts-green)";(0,t.useEffect)((()=>{setTimeout((()=>{const e=d();f(e)}),0)}),[s.ts,d]),(0,t.useEffect)((()=>{null!=s.text&&"api_req_started"===s.say&&setTimeout((()=>{const e=d();e.length!==p.length&&f(e)}),1e3)}),[s.text,s.say,d]);const[I,P]=(0,t.useMemo)((()=>{var e;switch(S){case"error":return!(null===(e=s.text)||void 0===e||!e.includes("Error writing file:"))&&(s.text="Attempting to write."),[(0,Ip.jsx)(Ip.Fragment,{})];case"mistake_limit_reached":return[(0,Ip.jsx)("span",{className:"codicon codicon-error",style:{color:E,marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{color:E,fontWeight:"bold"},children:"blackbox is having trouble..."})];case"command":return[w?(0,Ip.jsx)(Kv,{}):(0,Ip.jsx)("span",{className:"codicon codicon-terminal",style:{color:T,marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"blackbox wants to execute this command:"})];case"use_mcp_server":const t=JSON.parse(s.text||"{}");return[C?(0,Ip.jsx)(Kv,{}):(0,Ip.jsx)("span",{className:"codicon codicon-server",style:{color:T,marginBottom:"-1.5px"}}),(0,Ip.jsxs)("span",{style:{color:T,fontWeight:"bold",wordBreak:"break-word"},children:["Blackbox wants to ","use_mcp_tool"===t.type?"use a tool":"access a resource"," on the"," ",(0,Ip.jsx)("code",{style:{wordBreak:"break-all"},children:pv(t.serverName,g)})," ","MCP server:"]})];case"completion_result":return[(0,Ip.jsx)("span",{className:"codicon codicon-check",style:{color:_,marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"Task Completed"})];case"api_req_started":const n=(e,t)=>(0,Ip.jsx)("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ip.jsx)("span",{className:`codicon codicon-${e}`,style:{color:t,fontSize:16,marginBottom:"-1.5px"}})});return k&&$v("Other Engagement","",{tag:"vscode-agent",status:"request-fail"}),[null!=y?"user_cancelled"===y?n("error","var(--vscode-descriptionForeground)"):(0,Ip.jsx)(Ip.Fragment,{}):null!=b?n("check",_):k?(0,Ip.jsx)(Ip.Fragment,{}):(0,Ip.jsx)(Kv,{}),null!=y?"user_cancelled"===y?(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"API Request Cancelled"}):(()=>{const e=y.toLowerCase();return e.includes("powershell")&&e.includes("is not recognized")?(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"PowerShell Installation Required"}):(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"There was an error, please try again"}),(0,Ip.jsxs)("button",{onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"reloadWindow"})},style:{background:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",padding:"4px 8px",borderRadius:"2px",cursor:"pointer",fontSize:"12px"},children:[(0,Ip.jsx)("span",{className:"reload-btn-full",children:"Reload Window"}),(0,Ip.jsx)("span",{className:"reload-btn-short",children:"Reload"})]})]})})():null!=b?(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"BLACKBOXAI"}):k?(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:k}):(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"BLACKBOXAI Thinking..."})];case"followup":return[(0,Ip.jsx)("span",{className:"codicon codicon-question",style:{color:T,marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"blackbox has a question:"})];default:return[null,null]}}),[S,b,k,w,y,C,g,s.text]),R={display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},A={margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},M=(0,t.useMemo)((()=>"tool"===s.ask||"tool"===s.say?JSON.parse(s.text||"{}"):null),[s.ask,s.say,s.text]);if(M){const e=e=>(0,Ip.jsx)("span",{className:`codicon codicon-${e}`,style:{color:"var(--vscode-foreground)",marginBottom:"-1.5px"}});switch(M.tool){case"editedExistingFile":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("edit"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"blackbox wants to edit this file:"}),!s.partial&&p&&p.length>0&&M.revisionId&&(0,Ip.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:(0,Ip.jsx)(Vv,{path:M.path,revisionId:M.revisionId})})]}),(0,Ip.jsx)(vv,{diff:M.diff,path:M.path,isExpanded:!a,onToggleExpand:l})]});case"newFileCreated":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("new-file"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"blackbox wants to create a new file:"}),!s.partial&&p&&p.length>0&&M.revisionId&&(0,Ip.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:(0,Ip.jsx)(Vv,{path:M.path,revisionId:M.revisionId})})]}),(0,Ip.jsx)(vv,{isLoading:s.partial,code:M.content,path:M.path,isExpanded:a,onToggleExpand:l})]});case"readFile":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("file-code"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to read this file:":"blackbox read this file:"})]}),(0,Ip.jsx)("div",{style:{borderRadius:3,backgroundColor:jg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:(0,Ip.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",display:"flex",alignItems:"center",padding:"9px 10px",cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:()=>{Sp.postMessage({type:"openFile",text:M.content})},children:[(null===(i=M.path)||void 0===i?void 0:i.startsWith("."))&&(0,Ip.jsx)("span",{children:"."}),(0,Ip.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px",direction:"rtl",textAlign:"left"},children:mv(null!==(r=M.path)&&void 0!==r?r:"")+"\u200e"}),(0,Ip.jsx)("div",{style:{flexGrow:1}}),(0,Ip.jsx)("span",{className:"codicon codicon-link-external",style:{fontSize:13.5,margin:"1px 0"}})]})})]});case"listFilesTopLevel":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("folder-opened"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to view the top level files in this directory:":"blackbox viewed the top level files in this directory:"})]}),(0,Ip.jsx)(vv,{code:M.content,path:M.path,language:"shell-session",isExpanded:a,onToggleExpand:l})]});case"listFilesRecursive":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("folder-opened"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to recursively view all files in this directory:":"blackbox recursively viewed all files in this directory:"})]}),(0,Ip.jsx)(vv,{code:M.content,path:M.path,language:"shell-session",isExpanded:a,onToggleExpand:l})]});case"listCodeDefinitionNames":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("file-code"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to view source code definition names used in this directory:":"blackbox viewed source code definition names used in this directory:"})]}),(0,Ip.jsx)(vv,{code:M.content,path:M.path,isExpanded:a,onToggleExpand:l})]});case"searchFiles":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[e("search"),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to search this directory for":"blackbox searched this directory for"})]}),(0,Ip.jsx)("div",{style:{marginBottom:"10px"},children:(0,Ip.jsx)("code",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",overflowWrap:"anywhere",maxWidth:"100%",display:"inline-block"},children:M.regex})}),(0,Ip.jsx)(vv,{code:M.content,path:M.path+(M.filePattern?`/(${M.filePattern})`:""),language:"plaintext",isExpanded:a,onToggleExpand:l})]});default:return null}}if("use_mcp_server"===s.ask||"use_mcp_server"===s.say){var O,N,j,D;const e=JSON.parse(s.text||"{}"),t=m.find((t=>t.name===e.serverName));return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsxs)("div",{style:{background:"var(--vscode-textCodeBlock-background)",borderRadius:"3px",padding:"8px 10px",marginTop:"8px"},children:["access_mcp_resource"===e.type&&(0,Ip.jsx)(Av,{item:{...hv(e.uri||"",null===t||void 0===t?void 0:t.resources,null===t||void 0===t?void 0:t.resourceTemplates)||{name:"",mimeType:"",description:""},uri:e.uri||""}}),"use_mcp_tool"===e.type&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,Ip.jsx)(Mv,{tool:{name:e.toolName||"",description:(null===t||void 0===t||null===(O=t.tools)||void 0===O||null===(N=O.find((t=>t.name===e.toolName)))||void 0===N?void 0:N.description)||"",autoApprove:(null===t||void 0===t||null===(j=t.tools)||void 0===j||null===(D=j.find((t=>t.name===e.toolName)))||void 0===D?void 0:D.autoApprove)||!1},serverName:e.serverName})}),e.arguments&&"{}"!==e.arguments&&(0,Ip.jsxs)("div",{style:{marginTop:"8px"},children:[(0,Ip.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"12px",textTransform:"uppercase"},children:"Arguments"}),(0,Ip.jsx)(vv,{code:e.arguments,language:"json",isExpanded:!0,onToggleExpand:l})]})]})]})]})}switch(s.type){case"say":switch(s.say){case"api_req_started":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:{...R,marginBottom:null==b&&k||x?10:0,justifyContent:"space-between",cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:l,children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[I,P]}),(0,Ip.jsx)("span",{className:"codicon codicon-chevron-"+(a?"up":"down")})]}),(null==b&&k||x||null!=y&&"user_cancelled"!==y)&&(0,Ip.jsx)(Ip.Fragment,{children:(()=>{const e=(y||k||x||"").toLowerCase();if(e.includes("powershell")&&e.includes("is not recognized"))return(0,Ip.jsxs)("div",{style:{backgroundColor:"rgba(255, 191, 0, 0.1)",padding:"12px",borderRadius:"4px",border:"1px solid rgba(255, 191, 0, 0.3)"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-warning",style:{marginRight:"8px",fontSize:"16px",color:"#FFA500"}}),(0,Ip.jsx)("span",{style:{fontWeight:"bold",color:"#FFA500"},children:"PowerShell Not Found"})]}),(0,Ip.jsx)("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.4"},children:"blackbox tried to execute a command but PowerShell is not installed or not recognized on your system."}),(0,Ip.jsxs)("div",{style:{marginTop:12},children:[(0,Ip.jsx)("strong",{style:{fontSize:13},children:"To fix this issue:"}),(0,Ip.jsxs)("ol",{style:{marginTop:8,marginBottom:0,paddingLeft:24,lineHeight:1.6},children:[(0,Ip.jsxs)("li",{style:{marginBottom:6},children:[(0,Ip.jsx)("strong",{children:"Install PowerShell 7:"}),(0,Ip.jsx)("div",{style:{marginTop:4,marginLeft:8},children:(0,Ip.jsx)("a",{href:"https://github.com/PowerShell/PowerShell/releases/latest",style:{color:"#3794ff",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",children:"Download PowerShell 7"})})]}),(0,Ip.jsxs)("li",{style:{marginBottom:6},children:[(0,Ip.jsx)("strong",{children:"Restart VSCode"})," after installation"]}),(0,Ip.jsxs)("li",{children:[(0,Ip.jsx)("strong",{children:"Retry the task"})," or"," ",(0,Ip.jsx)("button",{onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"reloadWindow"})},style:{background:"transparent",color:"#3794ff",border:"none",padding:"0",cursor:"pointer",textDecoration:"underline",fontSize:"inherit"},children:"reload the window"})]})]})]}),(0,Ip.jsxs)("div",{style:{marginTop:12,padding:8,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:2,fontSize:11,opacity:.8},children:[(0,Ip.jsx)("strong",{children:"Note:"})," PowerShell is required for blackbox to execute commands and monitor their output on Windows systems."]})]});if((null===k||void 0===k?void 0:k.includes("status code 429"))||(null===k||void 0===k?void 0:k.toLowerCase().includes("rate limit"))||(null===k||void 0===k?void 0:k.toLowerCase().includes("too many requests"))||(null===k||void 0===k?void 0:k.toLowerCase().includes("quota exceeded"))||(null===k||void 0===k?void 0:k.toLowerCase().includes("resource exhausted"))){return"gemini-cli"===(null===v||void 0===v?void 0:v.apiProvider)?(0,Ip.jsxs)("div",{style:{backgroundColor:"rgba(255, 191, 0, 0.1)",padding:"12px",borderRadius:"4px",border:"1px solid rgba(255, 191, 0, 0.3)"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-warning",style:{marginRight:"8px",fontSize:"16px",color:"#FFA500"}}),(0,Ip.jsx)("span",{style:{fontWeight:"bold",color:"#FFA500"},children:"Rate Limit Exceeded"})]}),(0,Ip.jsx)("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.4"},children:"You've hit the API rate limit. This is likely due to free tier limits."}),(0,Ip.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",lineHeight:"1.4"},children:["You can read about the tier limits"," ",(0,Ip.jsx)("a",{href:"https://codeassist.google/",style:{color:"inherit",textDecoration:"underline"},children:"here"}),", or alternatively, you can use the Gemini Flash Model that will give you better limits."]})]}):(0,Ip.jsx)("div",{children:(0,Ip.jsx)("button",{onClick:()=>{h()},style:{marginTop:"8px",background:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:"Upgrade to unlock higher rate limits"})})}return k||x?(0,Ip.jsx)("p",{style:{...A,color:"var(--vscode-errorForeground)"},children:k||x}):null})()}),a&&(0,Ip.jsx)("div",{style:{marginTop:"10px"},children:(0,Ip.jsx)(vv,{code:JSON.parse(s.text||"{}").request,language:"markdown",isExpanded:!0,onToggleExpand:l})})]});case"api_req_finished":return null;case"text":return(0,Ip.jsx)("div",{children:(0,Ip.jsx)(Gv,{markdown:s.text})});case"user_feedback":return(0,Ip.jsxs)("div",{style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-badge-foreground)",borderRadius:"3px",padding:"9px",whiteSpace:"pre-line",wordWrap:"break-word"},children:[(0,Ip.jsx)("span",{style:{display:"block"},children:Bv(s.text)}),s.images&&s.images.length>0&&(0,Ip.jsx)(Rv,{images:s.images,style:{marginTop:"8px"}})]});case"user_feedback_diff":const e=JSON.parse(s.text||"{}");return(0,Ip.jsx)("div",{style:{marginTop:-10,width:"100%"},children:(0,Ip.jsx)(vv,{diff:e.diff,isFeedback:!0,isExpanded:a,onToggleExpand:l})});case"error":null===(o=s.text)||void 0===o||o.includes("Error writing file:");return(0,Ip.jsx)(Ip.Fragment,{});case"completion_result":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsx)("div",{style:{color:T,paddingTop:10},children:(0,Ip.jsx)(Gv,{markdown:s.text})})]});case"shell_integration_warning":const t=s.text?JSON.parse(s.text):null,n=null!==t&&!t.isPowerShellInstalled&&!t.isGitBashInstalled;return(0,Ip.jsx)(Ip.Fragment,{children:n&&(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 191, 0, 0.1)",padding:12,borderRadius:3,fontSize:12,border:"1px solid rgba(255, 191, 0, 0.3)"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,Ip.jsx)("i",{className:"codicon codicon-warning",style:{marginRight:8,fontSize:18,color:"#FFA500"}}),(0,Ip.jsx)("span",{style:{fontWeight:600,color:"#FFA500",fontSize:13},children:"Shell Integration Unavailable"})]}),(0,Ip.jsxs)("div",{children:["blackbox won't be able to view the command's output.",n?(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:{marginTop:12},children:[(0,Ip.jsx)("strong",{style:{fontSize:13},children:"Additional steps required for Windows:"}),(0,Ip.jsxs)("ol",{style:{marginTop:8,marginBottom:0,paddingLeft:24,lineHeight:1.6},children:[(0,Ip.jsxs)("li",{style:{marginBottom:6},children:[(0,Ip.jsx)("strong",{children:"Install supported terminal:"}),(0,Ip.jsxs)("div",{style:{marginTop:4,marginLeft:8},children:["\u2022 ",(0,Ip.jsx)("a",{href:"https://github.com/PowerShell/PowerShell/releases/latest",style:{color:"#3794ff",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",children:"PowerShell 7 (download)"})]})]}),(0,Ip.jsxs)("li",{style:{marginBottom:6},children:[(0,Ip.jsx)("strong",{children:"Restart VSCode"})," after installation"]}),(0,Ip.jsxs)("li",{children:[(0,Ip.jsx)("strong",{children:"Resume task"})," to continue"]})]})]}),(0,Ip.jsxs)("div",{style:{marginTop:12,padding:8,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:2,fontSize:11,opacity:.8},children:[(0,Ip.jsx)("strong",{children:"Note:"})," Shell integration is required for blackbox to monitor command execution and output in real-time."]})]}):(0,Ip.jsxs)(Ip.Fragment,{children:[" ","Please update VSCode (",(0,Ip.jsx)("code",{children:"CMD/CTRL + Shift + P"}),' \u2192 "Update") and make sure you\'re using a supported shell: zsh, bash, fish, or PowerShell (',(0,Ip.jsx)("code",{children:"CMD/CTRL + Shift + P"}),' \u2192 "Terminal: Select Default Profile").']})]})]})});case"mcp_server_response":return(0,Ip.jsx)(Ip.Fragment,{children:(0,Ip.jsxs)("div",{style:{paddingTop:0},children:[(0,Ip.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"12px",textTransform:"uppercase"},children:"Response"}),(0,Ip.jsx)(vv,{code:s.text,language:"json",isExpanded:!0,onToggleExpand:l})]})});default:return(0,Ip.jsxs)(Ip.Fragment,{children:[P&&(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsx)("div",{style:{paddingTop:10},children:(0,Ip.jsx)(Gv,{markdown:s.text})})]})}case"ask":switch(s.ask){case"mistake_limit_reached":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsx)("p",{style:{...A,color:"var(--vscode-errorForeground)"},children:s.text})]});case"command":const e=e=>{const t=e.indexOf(up);let n=e;const i=" --template typescript";return-1===t?(n.includes("npx create-react-app")&&n.includes(i)&&(n=n.replace(i,"")),{command:n,output:""}):(n=e.slice(0,t).trim(),n.includes("npx create-react-app")&&n.includes(i)&&(n=n.replace(i,"")),{command:e.slice(0,t).trim(),output:e.slice(t+up.length).trim().split("").map((e=>{switch(e){case"\t":return"\u2192   ";case"\b":return"\u232b";case"\f":return"\u23cf";case"\v":return"\u21f3";default:return e}})).join("")})},{command:t,output:n}=e(s.text||"");return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsxs)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:jg},children:[(0,Ip.jsx)(Vg,{source:`\`\`\`shell\n${t}\n\`\`\``,forceWrap:!0}),n.length>0&&(0,Ip.jsxs)("div",{style:{width:"100%"},children:[(0,Ip.jsxs)("div",{onClick:l,style:{display:"flex",alignItems:"center",gap:"4px",width:"100%",justifyContent:"flex-start",cursor:"pointer",padding:`2px 8px ${a?0:8}px 8px`},children:[(0,Ip.jsx)("span",{className:"codicon codicon-chevron-"+(a?"down":"right")}),(0,Ip.jsx)("span",{style:{fontSize:"0.8em"},children:"Command Output"})]}),a&&(0,Ip.jsx)(Vg,{source:`\`\`\`shell\n${n}\n\`\`\``})]})]})]});case"completion_result":return s.text?(0,Ip.jsxs)("div",{children:[(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsx)("div",{style:{color:T,paddingTop:10},children:(0,Ip.jsx)(Gv,{markdown:s.text})})]}):null;case"followup":return(0,Ip.jsxs)(Ip.Fragment,{children:[P&&(0,Ip.jsxs)("div",{style:R,children:[I,P]}),(0,Ip.jsx)("div",{style:{paddingTop:10},children:(0,Ip.jsx)(Gv,{markdown:s.text})})]});case"new_task":return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{style:R,children:[(0,Ip.jsx)("span",{className:"codicon codicon-new-file",style:{color:T,marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{color:T,fontWeight:"bold"},children:"BLACKBOX wants to start a new task:"})]}),(0,Ip.jsx)(Hv,{context:s.text||""})]});default:return null}}},Kv=()=>(0,Ip.jsx)("div",{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ip.jsx)("div",{style:{transform:"scale(0.55)",transformOrigin:"center"},children:(0,Ip.jsx)(cs,{})})}),Gv=(0,t.memo)((e=>{let{markdown:t}=e;return(0,Ip.jsx)("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere",marginBottom:-15,marginTop:-15},children:(0,Ip.jsx)(Tv,{markdown:t})})})),Yv=(0,t.memo)((e=>{var n,i;const{messages:r,isLast:o,onHeightChange:s,lastModifiedMessage:a}=e,l=(0,t.useRef)(0),[c,d]=(0,t.useState)(0),[u,h]=(0,t.useState)(!1),p=(0,t.useMemo)((()=>{const e=[...r].reverse().find((e=>"api_req_started"===e.say));if(null!=(null===e||void 0===e?void 0:e.text)){if(null!=JSON.parse(e.text).cancelReason)return!0}return!(!o||"api_req_failed"!==(null===a||void 0===a?void 0:a.ask))}),[r,a,o]),f=(0,t.useMemo)((()=>o&&r.some((e=>"browser_action_result"===e.say))&&!p),[o,r,p]),m=(0,t.useMemo)((()=>{const e=[];let t=[],n=[];return r.forEach((i=>{if("browser_action_launch"===i.ask)t=[i];else if("browser_action_result"===i.say){if(""===i.text)return;t.push(i);const r=JSON.parse(i.text||"{}");e.push({currentState:{url:r.currentUrl,screenshot:r.screenshot,mousePosition:r.currentMousePosition,consoleLogs:r.logs,messages:[...t]},nextAction:n.length>0?{messages:[...n]}:void 0}),t=[],n=[]}else"api_req_started"===i.say||"text"===i.say||"browser_action"===i.say?n.push(i):t.push(i)})),(t.length>0||n.length>0)&&e.push({currentState:{messages:[...t]},nextAction:n.length>0?{messages:[...n]}:void 0}),e}),[r]),[g,v]=(0,t.useState)(0);(0,t.useEffect)((()=>{v(m.length-1)}),[m.length]);const b=(0,t.useMemo)((()=>{const e=r.find((e=>"browser_action_launch"===e.ask));return(null===e||void 0===e?void 0:e.text)||""}),[r]),y=(0,t.useMemo)((()=>{for(let e=m.length-1;e>=0;e--){const t=m[e];if(t.currentState.url||t.currentState.screenshot)return{url:t.currentState.url,mousePosition:t.currentState.mousePosition,consoleLogs:t.currentState.consoleLogs,screenshot:t.currentState.screenshot}}return{url:void 0,mousePosition:void 0,consoleLogs:void 0,screenshot:void 0}}),[m]),x=m[g],k=g===m.length-1?{url:(null===x||void 0===x?void 0:x.currentState.url)||y.url||b,mousePosition:(null===x||void 0===x?void 0:x.currentState.mousePosition)||y.mousePosition||"700,400",consoleLogs:null===x||void 0===x?void 0:x.currentState.consoleLogs,screenshot:(null===x||void 0===x?void 0:x.currentState.screenshot)||y.screenshot}:{url:(null===x||void 0===x?void 0:x.currentState.url)||b,mousePosition:(null===x||void 0===x?void 0:x.currentState.mousePosition)||"700,400",consoleLogs:null===x||void 0===x?void 0:x.currentState.consoleLogs,screenshot:null===x||void 0===x?void 0:x.currentState.screenshot},[w,{height:C}]=uv((0,Ip.jsxs)("div",{children:[null===x||void 0===x||null===(n=x.nextAction)||void 0===n?void 0:n.messages.map((t=>(0,Ip.jsx)(Qv,{...e,message:t,setMaxActionHeight:d},t.ts))),!f&&r.some((e=>"browser_action_result"===e.say))&&0===g&&(0,Ip.jsx)(Xv,{action:"launch",text:b})]}));(0,t.useEffect)((()=>{0!==C&&C!==1/0&&C>c&&d(C)}),[C,c]);const S=(0,t.useMemo)((()=>{var e;if(!f)return;const t=(null===x||void 0===x||null===(e=x.nextAction)||void 0===e?void 0:e.messages)||[];for(let n=t.length-1;n>=0;n--){const e=t[n];if("browser_action"===e.say){const t=JSON.parse(e.text||"{}");if("click"===t.action&&t.coordinate)return t.coordinate}}}),[f,null===x||void 0===x||null===(i=x.nextAction)||void 0===i?void 0:i.messages]),T=f&&S||k.mousePosition,[E,{height:_}]=uv((0,Ip.jsxs)("div",{style:{padding:"10px 6px 10px 15px",marginBottom:-10},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[f?(0,Ip.jsx)(Kv,{}):(0,Ip.jsx)("span",{className:"codicon codicon-inspect",style:{color:"var(--vscode-foreground)",marginBottom:"-1.5px"}}),(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:(0,Ip.jsx)(Ip.Fragment,{children:"blackbox wants to use the browser:"})})]}),(0,Ip.jsxs)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:jg,marginBottom:10},children:[(0,Ip.jsx)("div",{style:{margin:"5px auto",width:"calc(100% - 10px)",boxSizing:"border-box",backgroundColor:"var(--vscode-input-background)",border:"1px solid var(--vscode-input-border)",borderRadius:"4px",padding:"3px 5px",display:"flex",alignItems:"center",justifyContent:"center",color:k.url?"var(--vscode-input-foreground)":"var(--vscode-descriptionForeground)",fontSize:"12px"},children:(0,Ip.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",textAlign:"center"},children:k.url||"http"})}),(0,Ip.jsxs)("div",{style:{width:"100%",paddingBottom:"calc(200%/3)",position:"relative",backgroundColor:"var(--vscode-input-background)"},children:[k.screenshot?(0,Ip.jsx)("img",{src:k.screenshot,alt:"Browser screenshot",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",cursor:"pointer"},onClick:()=>Sp.postMessage({type:"openImage",text:k.screenshot})}):(0,Ip.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Ip.jsx)("span",{className:"codicon codicon-globe",style:{fontSize:"80px",color:"var(--vscode-descriptionForeground)"}})}),k.mousePosition&&(0,Ip.jsx)(Jv,{style:{position:"absolute",top:parseInt(T.split(",")[1])/600*100+"%",left:parseInt(T.split(",")[0])/900*100+"%",transition:"top 0.3s ease-out, left 0.3s ease-out"}})]}),(0,Ip.jsxs)("div",{style:{width:"100%"},children:[(0,Ip.jsxs)("div",{onClick:()=>{h(!u)},style:{display:"flex",alignItems:"center",gap:"4px",width:"100%",justifyContent:"flex-start",cursor:"pointer",padding:`9px 8px ${u?0:8}px 8px`},children:[(0,Ip.jsx)("span",{className:"codicon codicon-chevron-"+(u?"down":"right")}),(0,Ip.jsx)("span",{style:{fontSize:"0.8em"},children:"Console Logs"})]}),u&&(0,Ip.jsx)(Vg,{source:`\`\`\`shell\n${k.consoleLogs||"(No new logs)"}\n\`\`\``})]})]}),(0,Ip.jsx)("div",{style:{minHeight:c},children:w}),m.length>1&&(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0px",marginTop:"15px",borderTop:"1px solid var(--vscode-editorGroup-border)"},children:[(0,Ip.jsxs)("div",{children:["Step ",g+1," of ",m.length]}),(0,Ip.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,Ip.jsx)(ts,{disabled:0===g||f,onClick:()=>v((e=>e-1)),children:"Previous"}),(0,Ip.jsx)(ts,{disabled:g===m.length-1||f,onClick:()=>v((e=>e+1)),children:"Next"})]})]})]}));return(0,t.useEffect)((()=>{const e=0===l.current;o&&0!==_&&_!==1/0&&_!==l.current&&(e||s(_>l.current),l.current=_)}),[_,o,s]),E}),av()),Qv=e=>{let{message:t,isExpanded:n,onToggleExpand:i,lastModifiedMessage:r,getLatestCodeRevisions:o,isLast:s,setMaxActionHeight:a}=e;const l={display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"};switch(t.type){case"say":switch(t.say){case"api_req_started":case"text":return(0,Ip.jsx)("div",{style:{padding:"10px 0 10px 0"},children:(0,Ip.jsx)(qv,{message:t,isExpanded:n(t.ts),onToggleExpand:()=>{"api_req_started"===t.say&&a(0),i(t.ts)},getLatestCodeRevisions:o,lastModifiedMessage:r,isLast:s})});case"browser_action":const e=JSON.parse(t.text||"{}");return(0,Ip.jsx)(Xv,{action:e.action,coordinate:e.coordinate,text:e.text});default:return null}case"ask":return"browser_action_launch"===t.ask?(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:l,children:(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:"Browser Session Started"})}),(0,Ip.jsx)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:jg},children:(0,Ip.jsx)(Vg,{source:`\`\`\`shell\n${t.text}\n\`\`\``,forceWrap:!0})})]}):null}},Xv=e=>{let{action:t,coordinate:n,text:i}=e;return(0,Ip.jsx)("div",{style:{padding:"10px 0 0 0"},children:(0,Ip.jsx)("div",{style:{borderRadius:3,backgroundColor:jg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",padding:"9px 10px"},children:(0,Ip.jsxs)("span",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:[(0,Ip.jsx)("span",{style:{fontWeight:500},children:"Browse Action: "}),((e,t,n)=>{switch(e){case"launch":return`Launch browser at ${n}`;case"click":return`Click (${null===t||void 0===t?void 0:t.replace(",",", ")})`;case"type":return`Type "${n}"`;case"scroll_down":return"Scroll down";case"scroll_up":return"Scroll up";case"close":return"Close browser";default:return e}})(t,n,i)]})})})})},Jv=e=>{let{style:t}=e;return(0,Ip.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFaADAAQAAAABAAAAGAAAAADwi9a/AAADGElEQVQ4EZ2VbUiTURTH772be/PxZdsz3cZwC4RVaB8SAjMpxQwSWZbQG/TFkN7oW1Df+h6IRV9C+hCpKUSIZUXOfGM5tAKViijFFEyfZ7Ol29S1Pbdzl8Uw9+aBu91zzv3/nt17zt2DEZjBYOAkKrtFMXIghAWM8U2vMN/FctsxGRMpM7NbEEYNMM2CYUSInlJx3OpawO9i+XSNQYkmk2uFb9njzkcfVSr1p/GJiQKMULVaw2WuBv296UKRxWJR6wxGCmM1EAhSNppv33GBH9qI32cPTAtss9lUm6EM3N7R+RbigT+5/CeosFCZKpjEW+iorS1pb30wDUXzQfHqtD/9L3ieZ2ee1OJCmbL8QHnRs+4uj0wmW4QzrpCwvJ8zGg3JqAmhTLynuLiwv8/5KyND8Q3cEkUEDWu15oJE4KRQJt5hs1rcriGNRqP+DK4dyyWXXm/aFQ+cEpSJ8/LyDGPuEZNOmzsOroUSOqzXG/dtBU4ZysTZYKNut91sNo2Cq6cE9enz86s2g9OCMrFSqVC5hgb32u072W3jKMU90Hb1seC0oUwsB+t92bO/rKx0EFGkgFCnjjc1/gVvC8rE0L+4o63t4InjxwbAJQjTe3qD8QrLkXA4DC24fWtuajp06cLFYSBIFKGmXKPRRmAnME9sPt+yLwIWb9WN69fKoTneQz4Dh2mpPNkvfeV0jjecb9wNAkwIEVQq5VJOds4Kb+DXoAsiVquVwI1Dougpij6UyGYx+5cKroeDEFibm5lWRRMbH1+npmYrq6qhwlQHIbajZEf1fElcqGGFpGg9HMuKzpfBjhytCTMgkJ56RX09zy/ysENTBElmjIgJnmNChJqohDVQqpEfwkILE8v/o0GAnV9F1eEvofVQCbiTBEXOIPQh5PGgefDZeAcjrpGZjULBr/m3tZOnz7oEQWRAQZLjWlEU/XEJWySiILgRc5Cz1DkcAyuBFcnpfF0JiXWKpcolQXizhS5hKAqFpr0MVbgbuxJ6+5xX+P4wNpbqPPrugZfbmIbLmgQR3Aw8QSi66hUXulOFbF73GxqjE5BNXWNeAAAAAElFTkSuQmCC",style:{width:"17px",height:"22px",...t},alt:"cursor"})},Zv=Yv;function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eb.apply(null,arguments)}const tb=t.useLayoutEffect;var nb=function(e,t){"function"!==typeof e?e.current=t:e(t)};const ib=function(e,n){var i=(0,t.useRef)();return(0,t.useCallback)((function(t){e.current=t,i.current&&nb(i.current,null),i.current=n,n&&nb(n,t)}),[n])};var rb={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ob=function(e){Object.keys(rb).forEach((function(t){e.style.setProperty(t,rb[t],"important")}))},sb=null,ab=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize};var lb=function(){},cb=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],db=!!document.documentElement.currentStyle,ub=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,i=(n=t,cb.reduce((function(e,t){return e[t]=n[t],e}),{})),r=i.boxSizing;return""===r?null:(db&&"border-box"===r&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px"),{sizingStyle:i,paddingSize:parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),borderSize:parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth)})};function hb(e,n,i){var r=function(e){var n=t.useRef(e);return tb((function(){n.current=e})),n}(i);t.useLayoutEffect((function(){var t=function(e){return r.current(e)};if(e)return e.addEventListener(n,t),function(){return e.removeEventListener(n,t)}}),[])}var pb=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],fb=function(e,n){var i=e.cacheMeasurements,r=e.maxRows,o=e.minRows,s=e.onChange,a=void 0===s?lb:s,l=e.onHeightChange,c=void 0===l?lb:l,d=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,pb),u=void 0!==d.value,h=t.useRef(null),p=ib(h,n),f=t.useRef(0),m=t.useRef(),g=function(){var e=h.current,t=i&&m.current?m.current:ub(e);if(t){m.current=t;var n=function(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=1/0),sb||((sb=document.createElement("textarea")).setAttribute("tabindex","-1"),sb.setAttribute("aria-hidden","true"),ob(sb)),null===sb.parentNode&&document.body.appendChild(sb);var r=e.paddingSize,o=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach((function(e){var t=e;sb.style[t]=s[t]})),ob(sb),sb.value=t;var l=ab(sb,e);sb.value=t,l=ab(sb,e),sb.value="x";var c=sb.scrollHeight-r,d=c*n;"border-box"===a&&(d=d+r+o),l=Math.max(d,l);var u=c*i;return"border-box"===a&&(u=u+r+o),[l=Math.min(u,l),c]}(t,e.value||e.placeholder||"x",o,r),s=n[0],a=n[1];f.current!==s&&(f.current=s,e.style.setProperty("height",s+"px","important"),c(s,{rowHeight:a}))}};return t.useLayoutEffect(g),hb(window,"resize",g),function(e){hb(document.fonts,"loadingdone",e)}(g),t.createElement("textarea",eb({},d,{onChange:function(e){u||g(),a(e)},ref:p}))},mb=t.forwardRef(fb);function gb(e){if(e)switch(e.apiProvider){case"anthropic":if(!e.apiKey)return"You must provide a valid API key or choose a different provider.";break;case"bedrock":if(!e.awsRegion)return"You must choose a region to use with AWS Bedrock.";break;case"openrouter":if(!e.openRouterApiKey)return"You must provide a valid API key or choose a different provider.";break;case"vertex":if(!e.vertexProjectId||!e.vertexRegion)return"You must provide a valid Google Cloud Project ID and Region.";break;case"gemini":if(!e.geminiApiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai-native":if(!e.openAiNativeApiKey)return"You must provide a valid API key or choose a different provider.";break;case"deepseek":if(!e.deepSeekApiKey)return"You must provide a valid API key or choose a different provider.";break;case"qwen":if(!e.qwenApiKey)return"You must provide a valid API key or choose a different provider.";break;case"mistral":if(!e.mistralApiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai":if(!e.openAiBaseUrl||!e.openAiApiKey||!e.openAiModelId)return"You must provide a valid base URL, API key, and model ID.";break;case"requesty":if(!e.requestyApiKey||!e.requestyModelId)return"You must provide a valid API key or choose a different provider.";break;case"together":if(!e.togetherApiKey||!e.togetherModelId)return"You must provide a valid API key or choose a different provider.";break;case"ollama":if(!e.ollamaModelId)return"You must provide a valid model ID.";break;case"lmstudio":if(!e.lmStudioModelId)return"You must provide a valid model ID.";break;case"vscode-lm":if(!e.vsCodeLmModelSelector)return"You must provide a valid model selector."}}function vb(e,t){if(e&&"openrouter"===e.apiProvider){const n=e.openRouterModelId||mp;if(!n)return"You must provide a model ID.";if(t&&!Object.keys(t).includes(n))return"The model ID you provided is not available. Please choose a different model."}}const bb={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let n="\u0300".codePointAt(0);n<="\u036f".codePointAt(0);++n){const e=String.fromCodePoint(n);for(const t of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const n=(t+e).normalize().codePointAt(0);n>126&&(bb[n]=t)}}const yb={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const n of Object.keys(yb)){const e=n.toUpperCase();for(let t=yb[n][0];t<=yb[n][1];++t)bb[t]=t%2===0?e:n}function xb(e){if(e<192||e>8580)return e;const t=bb[e];return void 0!==t?t.codePointAt(0):e}function kb(e,t){return e>t?e:t}const wb=e=>e.split("").map((e=>e.codePointAt(0))),Cb=new Set(" \f\n\r\t\v\xa0\u1680\u2028\u2029\u202f\u205f\u3000\ufeff".split("").map((e=>e.codePointAt(0))));for(let n="\u2000".codePointAt(0);n<="\u200a".codePointAt(0);n++)Cb.add(n);const Sb="\x7f".codePointAt(0),Tb="A".codePointAt(0),Eb="Z".codePointAt(0),_b="a".codePointAt(0),Ib="z".codePointAt(0),Pb="0".codePointAt(0),Rb="9".codePointAt(0);function Ab(e,t,n){return n?e:t-e-1}const Mb=16,Ob=8,Nb=8,jb=Ob+-1;function Db(e){return e?new Set:null}function Lb(e,t,n){if(null!==t&&t.i16.length>e+n){return[e+n,t.i16.subarray(e,e+n)]}return[e,new Int16Array(n)]}function Fb(e,t,n){if(null!==t&&t.i32.length>e+n){return[e+n,t.i32.subarray(e,e+n)]}return[e,new Int32Array(n)]}function Bb(e){return e>=_b&&e<=Ib?1:e>=Tb&&e<=Eb?2:e>=Pb&&e<=Rb?4:0}function Ub(e){const t=String.fromCodePoint(e);return t!==t.toUpperCase()?1:t!==t.toLowerCase()?2:null!==t.match(/\p{Number}/gu)?4:null!==t.match(/\p{Letter}/gu)?3:0}function $b(e){return e<=Sb?Bb(e):Ub(e)}function zb(e,t){return 0===e&&0!==t?Ob:1===e&&2===t||4!==e&&4===t?jb:0===t?Nb:0}function Vb(e,t,n,i){let r=e.slice(i),o=r.indexOf(n);if(0===o)return i;if(!t&&n>=_b&&n<=Ib){o>0&&(r=r.slice(0,o));const e=r.indexOf(n-32);e>=0&&(o=e)}return o<0?-1:i+o}function Hb(e){for(const t of e)if(t>=128)return!1;return!0}function Wb(e,t,n){if(!Hb(e))return 0;if(!Hb(t))return-1;let i=0,r=0;for(let o=0;o<t.length;o++){if(r=Vb(e,n,t[o],r),r<0)return-1;0===o&&r>0&&(i=r-1),r++}return i}const qb=(e,t,n,i,r,o,s)=>{const a=r.length;if(0===a)return[{start:0,end:0,score:0},Db(o)];const l=i.length;if(null!==s&&l*a>s.i16.length)return Gb(e,t,n,i,r,o);const c=Wb(i,r,e);if(c<0)return[{start:-1,end:-1,score:0},null];let d=0,u=0,h=null,p=null,f=null,m=null;[d,h]=Lb(d,s,l),[d,p]=Lb(d,s,l),[d,f]=Lb(d,s,l),[u,m]=Fb(u,s,a);const[,g]=Fb(u,s,l);for(let F=0;F<g.length;F++)g[F]=i[F];let v=0,b=0,y=0,x=0;const k=r[0];let w=r[0],C=0,S=0,T=!1,E=g.subarray(c),_=h.subarray(c).subarray(0,E.length),I=p.subarray(c).subarray(0,E.length),P=f.subarray(c).subarray(0,E.length);for(let[F,B]of E.entries()){let i=null;B<=Sb?(i=Bb(B),e||2!==i||(B+=32)):(i=Ub(B),e||2!==i||(B=String.fromCodePoint(B).toLowerCase().codePointAt(0)),t&&(B=xb(B))),E[F]=B;const o=zb(S,i);if(P[F]=o,S=i,B===w&&(y<a&&(m[y]=c+F,y++,w=r[Math.min(y,a-1)]),x=c+F),B===k){const e=Mb+2*o;if(_[F]=e,I[F]=1,1===a&&(n&&e>v||!n&&e>=v)&&(v=e,b=c+F,n&&o===Ob))break;T=!1}else _[F]=kb(T?C+-1:C+-3,0),I[F]=0,T=!0;C=_[F]}if(y!==a)return[{start:-1,end:-1,score:0},null];if(1===a){const e={start:b,end:b+1,score:v};if(!o)return[e,null];const t=new Set;return t.add(b),[e,t]}const R=m[0],A=x-R+1;let M=null;[d,M]=Lb(d,s,A*a);{const e=h.subarray(R,x+1);for(const[t,n]of e.entries())M[t]=n}let[,O]=Lb(d,s,A*a);{const e=p.subarray(R,x+1);for(const[t,n]of e.entries())O[t]=n}const N=m.subarray(1),j=r.slice(1).slice(0,N.length);for(const[F,B]of N.entries()){let e=!1;const t=j[F],i=F+1,r=i*A,o=g.subarray(B,x+1),s=f.subarray(B).subarray(0,o.length),l=O.subarray(r+B-R).subarray(0,o.length),c=O.subarray(r+B-R-1-A).subarray(0,o.length),d=M.subarray(r+B-R).subarray(0,o.length),u=M.subarray(r+B-R-1-A).subarray(0,o.length),h=M.subarray(r+B-R-1).subarray(0,o.length);h[0]=0;for(const[p,m]of o.entries()){const r=p+B;let o=0,g=0,y=0;if(g=e?h[p]+-1:h[p]+-3,t===m){o=u[p]+Mb;let e=s[p];y=c[p]+1,e===Ob?y=1:y>1&&(e=kb(e,kb(4,f[r-y+1]))),o+e<g?(o+=s[p],y=0):o+=e}l[p]=y,e=o<g;const x=kb(kb(o,g),0);i===a-1&&(n&&x>v||!n&&x>=v)&&(v=x,b=r),d[p]=x}}const D=Db(o);let L=R;if(o&&null!==D){let e=a-1;L=b;let t=!0;for(;;){const n=e*A,i=L-R,r=M[n+i];let o=0,s=0;if(e>0&&L>=m[e]&&(o=M[n-A+i-1]),L>m[e]&&(s=M[n+i-1]),r>o&&(r>s||r===s&&t)){if(D.add(L),0===e)break;e--}t=O[n+i]>1||n+A+i+1<O.length&&O[n+A+i+1]>0,L--}}return[{start:L,end:b+1,score:v},D]};function Kb(e,t,n,i,r,o,s){let a=0,l=0,c=!1,d=0,u=0;const h=Db(s);let p=0;r>0&&(p=$b(n[r-1]));for(let f=r;f<o;f++){let r=n[f];const o=$b(r);if(e||(r>=Tb&&r<=Eb?r+=32:r>Sb&&(r=String.fromCodePoint(r).toLowerCase().codePointAt(0))),t&&(r=xb(r)),r===i[a]){s&&null!==h&&h.add(f),l+=Mb;let e=zb(p,o);0===d?u=e:(e===Ob&&(u=e),e=kb(kb(e,u),4)),l+=0===a?2*e:e,c=!1,d++,a++}else l+=c?-1:-3,c=!0,d=0,u=0;p=o}return[l,h]}const Gb=(e,t,n,i,r,o,s)=>{if(0===r.length)return[{start:0,end:0,score:0},null];if(Wb(i,r,e)<0)return[{start:-1,end:-1,score:0},null];let a=0,l=-1,c=-1;const d=i.length,u=r.length;for(let h=0;h<d;h++){let o=i[Ab(h,d,n)];e||(o>=Tb&&o<=Eb?o+=32:o>Sb&&(o=String.fromCodePoint(o).toLowerCase().codePointAt(0))),t&&(o=xb(o));if(o===r[Ab(a,u,n)]&&(l<0&&(l=h),a++,a===u)){c=h+1;break}}if(l>=0&&c>=0){a--;for(let t=c-1;t>=l;t--){let o=i[Ab(t,d,n)];e||(o>=Tb&&o<=Eb?o+=32:o>Sb&&(o=String.fromCodePoint(o).toLowerCase().codePointAt(0)));if(o===r[Ab(a,u,n)]&&(a--,a<0)){l=t;break}}if(!n){const e=l;l=d-c,c=d-e}const[s,h]=Kb(e,t,i,r,l,c,o);return[{start:l,end:c,score:s},h]}return[{start:-1,end:-1,score:0},null]},Yb=(e,t,n,i,r,o,s)=>{if(0===r.length)return[{start:0,end:0,score:0},null];const a=i.length,l=r.length;if(a<l)return[{start:-1,end:-1,score:0},null];if(Wb(i,r,e)<0)return[{start:-1,end:-1,score:0},null];let c=0,d=-1,u=0,h=-1;for(let m=0;m<a;m++){const o=Ab(m,a,n);let s=i[o];e||(s>=Tb&&s<=Eb?s+=32:s>Sb&&(s=String.fromCodePoint(s).toLowerCase().codePointAt(0))),t&&(s=xb(s));const g=Ab(c,l,n);if(r[g]===s){if(0===g&&(p=i,u=0===(f=o)?Ob:zb($b(p[f-1]),$b(p[f]))),c++,c===l){if(u>h&&(d=m,h=u),u===Ob)break;m-=c-1,c=0,u=0}}else m-=c,c=0,u=0}var p,f;if(d>=0){let o=0,s=0;n?(o=d-l+1,s=d+1):(o=a-(d+1),s=a-(d-l+1));const[c]=Kb(e,t,i,r,o,s,!1);return[{start:o,end:s,score:c},null]}return[{start:-1,end:-1,score:0},null]};const Qb=(Xb=2048,{i16:new Int16Array(102400),i32:new Int32Array(Xb)});var Xb;const Jb=(e,t,n)=>{let i=!1;switch(t){case"smart-case":e.toLowerCase()!==e&&(i=!0);break;case"case-sensitive":i=!0;break;case"case-insensitive":e=e.toLowerCase(),i=!1}let r=wb(e);return n&&(r=r.map(xb)),{queryRunes:r,caseSensitive:i}};function Zb(e,t){const n=Object.keys(e).map((e=>parseInt(e,10))).sort(((e,t)=>t-e));let i=[];for(const r of n)if(i=i.concat(e[r]),i.length>=t)break;return i}function ey(e,t,n){return i=>{const r=this.runesList[i];if(t.length>r.length)return;let[o,s]=this.algoFn(n,this.opts.normalize,this.opts.forward,r,t,!0,Qb);if(-1===o.start)return;if(!1===this.opts.fuzzy){s=new Set;for(let e=o.start;e<o.end;++e)s.add(e)}const a=this.opts.sort?o.score:0;void 0===e[a]&&(e[a]=[]),e[a].push({item:this.items[i],...o,positions:null!=s?s:new Set})}}const ty="undefined"!==typeof require&&"undefined"===typeof window;function ny(e,t,n,i){return new Promise(((r,o)=>{let s=0,a=Math.min(1e3,t);const l=()=>{if(e.cancelled)return o("search cancelled");for(;s<a;++s)n(s);a<t?(Math.min(a+1e3,t),ty?setImmediate(l):setTimeout(l)):r(i())};l()}))}const iy={limit:1/0,selector:e=>e,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class ry{constructor(e){switch(this.opts={...iy,...arguments.length<=1?void 0:arguments[1]},this.items=e,this.runesList=e.map((e=>wb(this.opts.selector(e).normalize()))),this.algoFn=Yb,this.opts.fuzzy){case"v2":this.algoFn=qb;break;case"v1":this.algoFn=Gb}}}const oy={...iy,match:function(e){const{queryRunes:t,caseSensitive:n}=Jb(e,this.opts.casing,this.opts.normalize),i={},r=ey.bind(this)(i,t,n);for(let o=0,s=this.runesList.length;o<s;++o)r(o);return Zb(i,this.opts.limit)}};class sy extends ry{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];super(e,...n),this.opts={...oy,...n[0]}}find(e){if(0===e.length||0===this.items.length)return this.items.slice(0,this.opts.limit).map(ay);return e=e.normalize(),ly(this.opts.match.bind(this)(e),this.opts)}}const ay=e=>({item:e,start:-1,end:-1,score:0,positions:new Set});function ly(e,t){if(t.sort){const{selector:n}=t;e.sort(((e,i)=>{if(e.score===i.score)for(const r of t.tiebreakers){const t=r(e,i,n);if(0!==t)return t}return 0}))}return Number.isFinite(t.limit)&&e.splice(t.limit),e}class cy{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.finder=new sy(e,...n),this.find=this.finder.find.bind(this.finder)}}let dy=function(e){return e.File="file",e.Folder="folder",e.Problems="problems",e.Terminal="terminal",e.URL="url",e.Git="git",e.NoResults="noResults",e}({});function uy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const i={type:dy.Git,value:"git-changes",label:"Working changes",description:"Current uncommitted changes"};if(""===e){if(t===dy.File){const e=n.filter((e=>e.type===dy.File)).map((e=>({type:dy.File,value:e.value})));return e.length>0?e:[{type:dy.NoResults}]}if(t===dy.Folder){const e=n.filter((e=>e.type===dy.Folder)).map((e=>({type:dy.Folder,value:e.value})));return e.length>0?e:[{type:dy.NoResults}]}if(t===dy.Git){const e=n.filter((e=>e.type===dy.Git));return e.length>0?[i,...e]:[i]}return[{type:dy.URL},{type:dy.Problems},{type:dy.Terminal},{type:dy.Git},{type:dy.Folder},{type:dy.File}]}const r=e.toLowerCase(),o=[];if("git".startsWith(r)?o.push({type:dy.Git,label:"Git Commits",description:"Search repository history"}):"git-changes".startsWith(r)&&o.push(i),"problems".startsWith(r)&&o.push({type:dy.Problems}),e.startsWith("http")&&o.push({type:dy.URL,value:e}),/^[a-f0-9]{7,40}$/i.test(r)){const e=n.filter((e=>{var t;return e.type===dy.Git&&(null===(t=e.value)||void 0===t?void 0:t.toLowerCase())===r}));e.length>0?o.push(...e):o.push({type:dy.Git,value:r,label:`Commit ${r}`,description:"Git commit hash"})}const s=n.map((e=>({original:e,searchStr:[e.value,e.label,e.description].filter(Boolean).join(" ")}))),a=new cy(s,{selector:e=>e.searchStr}),l=e?a.find(e).map((e=>e.item.original)):[],c=l.filter((e=>e.type===dy.File||e.type===dy.Folder)),d=l.filter((e=>e.type===dy.Git)),u=l.filter((e=>e.type!==dy.File&&e.type!==dy.Folder&&e.type!==dy.Git));if(o.length>0||l.length>0){const e=[...o,...c,...d,...u],t=new Set;return e.filter((e=>{const n=`${e.type}-${e.value}`;return!t.has(n)&&(t.add(n),!0)}))}return[{type:dy.NoResults}]}let hy=function(e){return e.Explain="explain",e.Review="review",e.Tests="tests",e.Test="test",e.Improve="improve",e.Security="security",e.Bugs="bugs",e.Onboarding="onboarding",e.PR="pr",e.NoResults="noResults",e}({});function py(e){if(""===e)return Nv.map((e=>({type:e.command,command:e.command,label:e.command,description:e.description})));const t=e.toLowerCase(),n=Nv.filter((e=>e.command.toLowerCase().startsWith(t)||e.description.toLowerCase().includes(t)));return 0===n.length?[{type:hy.NoResults}]:n.map((e=>({type:e.command,command:e.command,label:e.command,description:e.description})))}const fy=e=>{let{onSelect:n,searchQuery:i,onMouseDown:r,selectedIndex:o,setSelectedIndex:s,selectedType:a,queryItems:l}=e;const c=(0,t.useRef)(null),d=(0,t.useMemo)((()=>uy(i,a,l)),[i,a,l]);(0,t.useEffect)((()=>{if(c.current){const e=c.current.children[o];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[o]);const u=e=>{switch(e.type){case dy.Problems:return(0,Ip.jsx)("span",{children:"Problems"});case dy.Terminal:return(0,Ip.jsx)("span",{children:"Terminal"});case dy.URL:return(0,Ip.jsx)("span",{children:"Paste URL to fetch contents"});case dy.NoResults:return(0,Ip.jsx)("span",{children:"No results found"});case dy.Git:return e.value?(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[(0,Ip.jsx)("span",{style:{lineHeight:"1.2"},children:e.label}),(0,Ip.jsx)("span",{style:{fontSize:"0.85em",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:e.description})]}):(0,Ip.jsx)("span",{children:"Git Commits"});case dy.File:case dy.Folder:var t;return e.value?(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("span",{children:"/"}),(null===(t=e.value)||void 0===t?void 0:t.startsWith("/."))&&(0,Ip.jsx)("span",{children:"."}),(0,Ip.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",direction:"rtl",textAlign:"left"},children:mv(e.value||"")+"\u200e"})]}):(0,Ip.jsxs)("span",{children:["Add ",e.type===dy.File?"File":"Folder"]})}},h=e=>{switch(e.type){case dy.File:return"file";case dy.Folder:return"folder";case dy.Problems:return"warning";case dy.Terminal:return"terminal";case dy.URL:return"link";case dy.Git:return"git-commit";case dy.NoResults:return"info";default:return"file"}},p=e=>e.type!==dy.NoResults&&e.type!==dy.URL;return(0,Ip.jsx)("div",{style:{position:"absolute",bottom:"calc(100%)",left:15,right:15,overflowX:"hidden"},onMouseDown:r,children:(0,Ip.jsx)("div",{ref:c,style:{backgroundColor:"var(--vscode-sideBar-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"10px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"200px",overflowY:"auto"},children:d.map(((e,t)=>(0,Ip.jsxs)("div",{onClick:()=>p(e)&&n(e.type,e.value),style:{padding:"8px 12px",cursor:p(e)?"pointer":"default",color:"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t===o&&p(e)?"var(--vscode-editorGroup-border)":"",opacity:t===o&&p(e)?".8":"1"},onMouseEnter:()=>p(e)&&s(t),children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:[(0,Ip.jsx)("i",{className:`codicon codicon-${h(e)}`,style:{marginRight:"8px",flexShrink:0,fontSize:"14px"}}),u(e)]}),(e.type===dy.File||e.type===dy.Folder||e.type===dy.Git)&&!e.value&&(0,Ip.jsx)("i",{className:"codicon codicon-chevron-right",style:{fontSize:"14px",flexShrink:0,marginLeft:8}}),(e.type===dy.Problems||e.type===dy.Terminal||(e.type===dy.File||e.type===dy.Folder||e.type===dy.Git)&&e.value)&&(0,Ip.jsx)("i",{className:"codicon codicon-add",style:{fontSize:"14px",flexShrink:0,marginLeft:8}})]},`${e.type}-${e.value||t}`)))})})},my=e=>{let{onSelect:n,searchQuery:i,onMouseDown:r,selectedIndex:o,setSelectedIndex:s}=e;const a=(0,t.useRef)(null),l=(0,t.useMemo)((()=>py(i)),[i]);(0,t.useEffect)((()=>{if(a.current){const e=a.current.children[o];if(e){const t=a.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?a.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(a.current.scrollTop-=t.top-n.top)}}}),[o]);const c=e=>e.type===hy.NoResults?(0,Ip.jsx)("span",{children:"No results found"}):(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[(0,Ip.jsxs)("span",{style:{lineHeight:"1.2",fontWeight:"500"},children:["/",e.label]}),(0,Ip.jsx)("span",{style:{fontSize:"0.85em",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:e.description})]}),d=e=>{if(e.type===hy.NoResults)return"info";const t=Nv.find((t=>t.command===e.command));return(null===t||void 0===t?void 0:t.icon)||"terminal"},u=e=>e.type!==hy.NoResults;return(0,Ip.jsx)("div",{style:{position:"absolute",bottom:"calc(100% - 10px)",left:15,right:15,overflowX:"hidden"},onMouseDown:r,children:(0,Ip.jsx)("div",{ref:a,style:{backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"200px",overflowY:"auto"},children:l.map(((e,t)=>(0,Ip.jsxs)("div",{onClick:()=>u(e)&&n(e.type,e.command),style:{padding:"8px 12px",cursor:u(e)?"pointer":"default",color:"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t===o&&u(e)?"var(--vscode-list-activeSelectionBackground)":""},onMouseEnter:()=>u(e)&&s(t),children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:[(0,Ip.jsx)("i",{className:`codicon codicon-${d(e)}`,style:{marginRight:"8px",flexShrink:0,fontSize:"14px"}}),c(e)]}),u(e)&&(0,Ip.jsx)("i",{className:"codicon codicon-add",style:{fontSize:"14px",flexShrink:0,marginLeft:8}})]},`${e.type}-${e.command||t}`)))})})},gy=["blackbox-base","blackbox-pro","blackbox-pro-plus","claude","anthropic/claude-sonnet-4","anthropic/claude-opus-4","gpt-5","google/gemini-2.5-pro-preview","moonshotai/kimi-k2","claude-sonnet-3-7","deepseek-r1","deepseek-v3","llama-4-maverick-17b-128e-instruct-fp8","grok-3-beta","grok-4","gemini-2.5-pro-preview-03-25","o3-mini","o1"],vy={"blackbox-base":{modelId:"custom/blackbox-base",modelName:"Blackbox Base",apiProvider:"blackbox-base",icon:"sparkle"},"blackbox-pro":{modelId:"custom/blackbox-pro",modelName:"Blackbox Pro",apiProvider:"blackbox-pro",icon:"rocket"},claude:{modelId:"claude-3-5-sonnet-20241022",modelName:"Claude Sonnet 3.5",apiProvider:"sonnet",icon:"hubot"},"deepseek-v3":{modelId:"deepseek-v3",modelName:"Deepseek-V3",apiProvider:"deepseek-v3",icon:"zap"},"deepseek-r1":{modelId:"deepseek-r1",modelName:"Deepseek-R1",apiProvider:"deepseek-r1",icon:"light-bulb"},"claude-sonnet-3-7":{modelId:"claude-3-7-sonnet-20250219",modelName:"Claude Sonnet 3.7",apiProvider:"sonnet",icon:"hubot"},"blackbox-pro-plus":{modelId:"blackbox-pro-plus",modelName:"Blackbox Pro Plus",apiProvider:"sonnet",icon:"hubot"},"llama-4-maverick-17b-128e-instruct-fp8":{modelId:"llama-4-maverick-17b-128e-instruct-fp8",modelName:"Llama 4 Maverick",apiProvider:"llama-4-maverick-17b-128e-instruct-fp8",icon:"sparkle"},"moonshotai/kimi-k2":{modelId:"moonshotai/kimi-k2",modelName:"Moonshotai Kimi K2",apiProvider:"moonshotai/kimi-k2",icon:"sparkle"},"anthropic/claude-sonnet-4":{modelId:"anthropic/claude-sonnet-4",modelName:"Claude Sonnet 4.5",apiProvider:"anthropic/claude-sonnet-4",icon:"sparkle"},"anthropic/claude-opus-4":{modelId:"anthropic/claude-opus-4",modelName:"Claude Opus 4.1",apiProvider:"anthropic/claude-opus-4",icon:"sparkle"},"gpt-5":{modelId:"gpt-5",modelName:"OpenAI GPT-5",apiProvider:"gpt-5",icon:"sparkle"},"google/gemini-2.5-pro-preview":{modelId:"google/gemini-2.5-pro-preview",modelName:"Gemini 2.5 Pro Preview 06-05",apiProvider:"google/gemini-2.5-pro-preview",icon:"sparkle"},"o3-mini":{modelId:"o3-mini",modelName:"O3 Mini",apiProvider:"o3-mini",icon:"sparkle"},o1:{modelId:"o1",modelName:"OpenAI o1",apiProvider:"o1",icon:"sparkle"},"grok-3-beta":{modelId:"grok-3-beta",modelName:"Grok 3 Beta",apiProvider:"grok-3-beta",icon:"sparkle"},"grok-4":{modelId:"grok-4",modelName:"Grok 4",apiProvider:"grok-4",icon:"sparkle"},"gemini-2.5-pro-preview-03-25":{modelId:"gemini-2.5-pro-preview-03-25",modelName:"Gemini 2.5 Pro Preview",apiProvider:"gemini-2.5-pro-preview-03-25",icon:"sparkle"}},by=(vy["blackbox-base"].icon,vy["blackbox-pro"].icon,vy.claude.icon,vy["deepseek-v3"].icon,vy["deepseek-r1"].icon,vy["claude-sonnet-3-7"].icon,vy["llama-4-maverick-17b-128e-instruct-fp8"].icon,vy["moonshotai/kimi-k2"].icon,vy["anthropic/claude-sonnet-4"].icon,vy["anthropic/claude-opus-4"].icon,vy["gpt-5"].icon,vy["google/gemini-2.5-pro-preview"].icon,vy["o3-mini"].icon,vy.o1.icon,vy["blackbox-pro-plus"].icon,vy["grok-3-beta"].icon,vy["grok-4"].icon,vy["gemini-2.5-pro-preview-03-25"].icon,"undefined"!==typeof window&&localStorage.getItem("blackbox_redeem_success"),e=>{let{onSelect:n,onMouseDown:i,selectedIndex:r,setSelectedIndex:o,upgradeForAccess:s,apiConfiguration:a,setApiConfiguration:l}=e;const c=(0,t.useRef)(null),d=(0,t.useRef)(null),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(0),m=gy.filter((e=>vy[e].modelName.toLowerCase().includes(u.toLowerCase())));(0,t.useEffect)((()=>{f(0)}),[u]);const[g,v]=(0,t.useState)({top:0,left:15,width:320});(0,t.useEffect)((()=>{const e=()=>{const e=document.getElementById("model-selection-dropdown");if(e){const t=e.getBoundingClientRect(),n=window.innerWidth,i=15,r=n-2*i,o=n>350?Math.min(350,r):r,s=t.left+t.width/2-o/2,a=i,l=n-o-i,c=Math.max(a,Math.min(s,l));v({top:t.top-10,left:c,width:o})}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const b=(0,t.useCallback)(((e,t)=>{const i="true"===localStorage.getItem("blackbox_redeem_success");if(!i&&"blackbox-base"!==e)return void s();const r=vy[e];if(!r)return;if("gemini-cli"===e){"true"===localStorage.getItem("blackbox_gemini_docs_seen")||(Sp.postMessage({type:"showDocs",section:"Gemini CLI"}),localStorage.setItem("blackbox_gemini_docs_seen","true"))}n(e);const c=gy.findIndex((t=>t===e));o(c);const d={...a,apiProvider:r.apiProvider,apiModelId:r.modelId,hasRedeemedCoupon:i};l(d),Sp.postMessage({type:"apiConfiguration",apiConfiguration:d})}),[a,s,l,o]);(0,t.useEffect)((()=>{if(c.current&&m.length>0){const e=c.current.children[p];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[p,m.length]),(0,t.useEffect)((()=>{d.current&&d.current.focus()}),[]);const y=(0,t.useCallback)((e=>{"ArrowDown"===e.key?(e.preventDefault(),f((e=>Math.min(e+1,m.length-1)))):"ArrowUp"===e.key?(e.preventDefault(),f((e=>Math.max(e-1,0)))):"Enter"===e.key&&(e.preventDefault(),m[p]&&b(m[p],p))}),[m,p,b]);return(0,Ip.jsx)("div",{style:{position:"fixed",top:g.top,left:g.left,width:g.width,zIndex:1e3,overflowX:"hidden",transform:"translateY(-100%)"},onMouseDown:i,children:(0,Ip.jsxs)("div",{className:"model-menu",style:{backgroundColor:"var(--vscode-sideBar-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"400px",overflowY:"auto",width:"100%"},children:[(0,Ip.jsx)("div",{style:{flexShrink:0,padding:"8px",borderBottom:"1px solid var(--vscode-editorGroup-border)"},children:(0,Ip.jsx)("input",{ref:d,type:"text",placeholder:"Search models...",value:u,onChange:e=>h(e.target.value),onKeyDown:y,style:{width:"100%",padding:"8px 12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",fontSize:"14px",outline:"none",boxSizing:"border-box"},onFocus:e=>e.target.style.borderColor="var(--vscode-focusBorder)",onBlur:e=>e.target.style.borderColor="var(--vscode-input-border)"})}),(0,Ip.jsx)("div",{ref:c,style:{flex:1,overflowY:"auto",minHeight:0},children:0===m.length?(0,Ip.jsx)("div",{className:"model-menu-item",children:(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden",justifyContent:"center",color:"var(--vscode-descriptionForeground)"},children:(0,Ip.jsx)("span",{children:"No models found"})})}):m.map(((e,t)=>(0,Ip.jsx)("div",{className:"model-menu-item "+(t===p?"selected":""),onClick:()=>{b(e,t)},onMouseEnter:()=>f(t),children:(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:(0,Ip.jsx)("span",{children:vy[e].modelName})})},e)))})]})})}),yy=e=>{let{type:n,items:i,selectedRepo:r,onSelect:o,onMouseDown:s,selectedIndex:a,setSelectedIndex:l}=e;const c=(0,t.useRef)(null),d=(0,t.useCallback)((e=>{o(e)}),[o]);(0,t.useEffect)((()=>{if(c.current){const e=c.current.children[a];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[a]);const[u,h]=(0,t.useState)(""),p=i.filter((e=>e.name.toLowerCase().includes(u.toLowerCase())));return(0,Ip.jsx)("div",{style:{position:"absolute",bottom:"calc(100% - 10px)",left:15,right:15,overflowX:"hidden"},onMouseDown:s,children:(0,Ip.jsxs)("div",{ref:c,style:{backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"400px",overflowY:"auto"},children:[(0,Ip.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--vscode-editorGroup-border)"},children:"repo"===n?"Select Repository:":`Select Branch for ${r}:`}),(0,Ip.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex"},children:(0,Ip.jsx)("input",{type:"text",value:u,onChange:e=>{h(e.target.value),l(0)},placeholder:`Search ${n}s...`,style:{width:"100%",padding:"4px 8px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"1px solid var(--vscode-input-border)",borderRadius:"2px",outline:"none"}})}),p.map(((e,t)=>(0,Ip.jsx)("div",{onClick:()=>d(e),style:{padding:"8px 12px",cursor:"pointer",color:t===a?"var(--background)":"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",backgroundColor:t===a?"var(--vscode-list-activeSelectionBackground)":""},onMouseEnter:()=>l(t),children:(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:(0,Ip.jsx)("span",{children:e.name})})},e.name)))]})})},xy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.flatMap((e=>Array.isArray(e)?e:[e])).filter((e=>"string"===typeof e||"number"===typeof e)).join(" ")};function ky(e){let{className:t,...n}=e;return(0,Ip.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-audio-lines-icon lucide-audio-lines",...n,children:[(0,Ip.jsx)("path",{d:"M2 10v3"}),(0,Ip.jsx)("path",{d:"M6 6v11"}),(0,Ip.jsx)("path",{d:"M10 3v18"}),(0,Ip.jsx)("path",{d:"M14 8v7"}),(0,Ip.jsx)("path",{d:"M18 5v13"}),(0,Ip.jsx)("path",{d:"M22 10v3"})]})}function wy(e){let{className:t,...n}=e;return(0,Ip.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:24,height:24,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-phone-off-icon lucide-phone-off",...n,children:[(0,Ip.jsx)("path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272"}),(0,Ip.jsx)("path",{d:"M22 2 2 22"}),(0,Ip.jsx)("path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473"})]})}function Cy(e){let{className:t,...n}=e;return(0,Ip.jsxs)("svg",{fill:"currentColor",height:"17px",width:"16px",viewBox:"0 0 36 36",version:"1.1",preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,Ip.jsx)("path",{d:"M30,17h-2c0,1.8-0.5,3.5-1.4,5l1.5,1.5C29.3,21.5,29.9,19.3,30,17z"}),(0,Ip.jsx)("path",{d:"M18,4c2.8,0,5,2.2,5,5v8c0,0.4-0.1,0.8-0.2,1.2l1.6,1.6c0.4-0.9,0.6-1.8,0.6-2.8V9c0-3.9-3.2-7-7.1-6.9 c-2.9,0-5.6,1.9-6.5,4.7L13,8.3C13.5,5.9,15.6,4.2,18,4z"}),(0,Ip.jsx)("path",{d:"M25.2,26.6l6.9,6.9l1.4-1.4L4,2.6L2.6,4l8.4,8.4V17c0,3.9,3.1,7,7,7c1.3,0,2.5-0.3,3.6-1l2.2,2.2C22.1,26.4,20.1,27,18,27 c-5.4,0.2-9.8-4.1-10-9.4c0-0.2,0-0.4,0-0.6H6c0.1,6.2,4.8,11.4,11,12v3h-3c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1 s-0.4-1-1-1h-3v-3C21.2,28.8,23.4,28,25.2,26.6z M13.8,19.7C13.3,18.9,13,18,13,17v-2.6l7.1,7.1C17.9,22.5,15.2,21.8,13.8,19.7z"})]})}function Sy(e){let{className:t,...n}=e;return(0,Ip.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:xy("h-4 w-4",t),viewBox:"0 0 512 512",...n,version:"1.1",children:(0,Ip.jsx)("g",{children:(0,Ip.jsxs)("g",{children:[(0,Ip.jsx)("path",{d:"M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5 C149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5 c0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"}),(0,Ip.jsx)("path",{d:"M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3 s5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8 c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9 C106.6,220,101.2,214.5,94.4,214.5z"})]})})})}function Ty(e){let{className:t,...n}=e;return(0,Ip.jsx)("svg",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:xy("size-5 animate-spin stroke-zinc-400",t),...n,children:(0,Ip.jsx)("path",{d:"M12 3v3m6.366-.366-2.12 2.12M21 12h-3m.366 6.366-2.12-2.12M12 21v-3m-6.366.366 2.12-2.12M3 12h3m-.366-6.366 2.12 2.12"})})}function Ey(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var _y=Object.defineProperty,Iy=(e,t,n)=>((e,t,n)=>t in e?_y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Py{constructor(){Iy(this,"_locking"),Iy(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){let e;this._locks+=1;const t=new Promise((t=>e=()=>{this._locks-=1,t()})),n=this._locking.then((()=>e));return this._locking=this._locking.then((()=>t)),n}}function Ry(e,t){if(!e)throw new Error(t)}const Ay=34028234663852886e22,My=-34028234663852886e22,Oy=4294967295,Ny=2147483647,jy=-2147483648;function Dy(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Ny||e<jy)throw new Error("invalid int 32: "+e)}function Ly(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Oy||e<0)throw new Error("invalid uint 32: "+e)}function Fy(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Ay||e<My))throw new Error("invalid float 32: "+e)}const By=Symbol("@bufbuild/protobuf/enum-type");function Uy(e){const t=e[By];return Ry(t,"missing enum type on enum object"),t}function $y(e,t,n,i){e[By]=zy(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function zy(e,t,n){const i=Object.create(null),r=Object.create(null),o=[];for(const s of t){const e=Hy(s);o.push(e),i[s.name]=e,r[s.no]=e}return{typeName:e,values:o,findName:e=>i[e],findNumber:e=>r[e]}}function Vy(e,t,n){const i={};for(const r of t){const e=Hy(r);i[e.localName]=e.no,i[e.no]=e.localName}return $y(i,e,t),i}function Hy(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Wy{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,i=n.makeReadOptions(t);return n.readMessage(this,i.readerFactory(e),e.byteLength,i),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,r=i.makeReadOptions(t);return i.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(K$){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(K$ instanceof Error?K$.message:String(K$)))}return this.fromJson(n,t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),i=n.writerFactory();return t.writeMessage(this,i,n),i.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null===e||void 0===e?void 0:e.prettySpaces)&&void 0!==t?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function qy(){let e=0,t=0;for(let i=0;i<28;i+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Ky(e,t,n){for(let o=0;o<28;o+=7){const i=e>>>o,r=!(i>>>7==0&&0==t),s=255&(r?128|i:i);if(n.push(s),!r)return}const i=e>>>28&15|(7&t)<<4,r=!(t>>3==0);if(n.push(255&(r?128|i:i)),r){for(let e=3;e<31;e+=7){const i=t>>>e,r=!(i>>>7==0),o=255&(r?128|i:i);if(n.push(o),!r)return}n.push(t>>>31&1)}}const Gy=4294967296;function Yy(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function o(t,o){const s=Number(e.slice(t,o));r*=n,i=i*n+s,i>=Gy&&(r+=i/Gy|0,i%=Gy)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?Jy(i,r):Xy(i,r)}function Qy(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Gy*t+e);const n=16777215&(e>>>24|t<<8),i=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*i,o=n+8147497*i,s=2*i;const a=1e7;return r>=a&&(o+=Math.floor(r/a),r%=a),o>=a&&(s+=Math.floor(o/a),o%=a),s.toString()+Zy(o)+Zy(r)}function Xy(e,t){return{lo:0|e,hi:0|t}}function Jy(e,t){return t=~t,e?e=1+~e:t+=1,Xy(e,t)}const Zy=e=>{const t=String(e);return"0000000".slice(t.length)+t};function ex(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function tx(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const nx=function(){const e=new DataView(new ArrayBuffer(8));if("function"===typeof BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64&&("object"!=typeof process||"1"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),i=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const i="bigint"==typeof e?e:BigInt(e);if(i>n||i<t)throw new Error("int64 invalid: ".concat(e));return i},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>r||t<i)throw new Error("uint64 invalid: ".concat(e));return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>Ry(/^-?[0-9]+$/.test(e),"int64 invalid: ".concat(e)),n=e=>Ry(/^[0-9]+$/.test(e),"uint64 invalid: ".concat(e));return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),Yy(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),Yy(e)),dec:(e,t)=>function(e,t){let n=Xy(e,t);const i=2147483648&n.hi;i&&(n=Jy(n.lo,n.hi));const r=Qy(n.lo,n.hi);return i?"-"+r:r}(e,t),uDec:(e,t)=>Qy(e,t)}}();var ix,rx,ox;function sx(e,t,n){if(t===n)return!0;if(e==ix.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case ix.UINT64:case ix.FIXED64:case ix.INT64:case ix.SFIXED64:case ix.SINT64:return t==n}return!1}function ax(e,t){switch(e){case ix.BOOL:return!1;case ix.UINT64:case ix.FIXED64:case ix.INT64:case ix.SFIXED64:case ix.SINT64:return 0==t?nx.zero:"0";case ix.DOUBLE:case ix.FLOAT:return 0;case ix.BYTES:return new Uint8Array(0);case ix.STRING:return"";default:return 0}}function lx(e,t){switch(e){case ix.BOOL:return!1===t;case ix.STRING:return""===t;case ix.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(ix||(ix={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"}(rx||(rx={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(ox||(ox={}));class cx{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Ly(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Dy(e),ex(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Fy(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Ly(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Dy(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Dy(e),ex(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=nx.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=nx.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=nx.enc(e);return Ky(t.lo,t.hi,this.buf),this}sint64(e){let t=nx.enc(e),n=t.hi>>31;return Ky(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=nx.uEnc(e);return Ky(t.lo,t.hi,this.buf),this}}class dx{constructor(e,t){this.varint64=qy,this.uint32=tx,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case ox.Varint:for(;128&this.buf[this.pos++];);break;case ox.Bit64:this.pos+=4;case ox.Bit32:this.pos+=4;break;case ox.LengthDelimited:let n=this.uint32();this.pos+=n;break;case ox.StartGroup:for(;;){const[e,n]=this.tag();if(n===ox.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return nx.dec(...this.varint64())}uint64(){return nx.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,nx.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return nx.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return nx.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function ux(e){const t=e.field.localName,n=Object.create(null);return n[t]=function(e){const t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return ax(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}let hx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),px=[];for(let n=0;n<hx.length;n++)px[hx[n].charCodeAt(0)]=n;px["-".charCodeAt(0)]=hx.indexOf("+"),px["_".charCodeAt(0)]=hx.indexOf("/");const fx={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,i=new Uint8Array(t),r=0,o=0,s=0;for(let a=0;a<e.length;a++){if(n=px[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:s=n,o=1;break;case 1:i[r++]=s<<2|(48&n)>>4,s=n,o=2;break;case 2:i[r++]=(15&s)<<4|(60&n)>>2,s=n,o=3;break;case 3:i[r++]=(3&s)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return i.subarray(0,r)},enc(e){let t,n="",i=0,r=0;for(let o=0;o<e.length;o++)switch(t=e[o],i){case 0:n+=hx[t>>2],r=(3&t)<<4,i=1;break;case 1:n+=hx[r|t>>4],r=(15&t)<<2,i=2;break;case 2:n+=hx[r|t>>6],n+=hx[63&t],i=0}return i&&(n+=hx[r],n+="=",1==i&&(n+="=")),n}};function mx(e,t,n){bx(t,e);const i=t.runtime.bin.makeReadOptions(n),r=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter((e=>e.no===t.no))}(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=ux(t);for(const a of r)t.runtime.bin.readField(o,i.readerFactory(a.data),t.field,a.wireType,i);return s()}function gx(e,t,n,i){bx(t,e);const r=t.runtime.bin.makeReadOptions(i),o=t.runtime.bin.makeWriteOptions(i);if(vx(e,t)){const n=e.getType().runtime.bin.listUnknownFields(e).filter((e=>e.no!=t.field.no));e.getType().runtime.bin.discardUnknownFields(e);for(const t of n)e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}const s=o.writerFactory();let a=t.field;a.opt||a.repeated||"enum"!=a.kind&&"scalar"!=a.kind||(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,s,o);const l=r.readerFactory(s.finish());for(;l.pos<l.len;){const[t,n]=l.tag(),i=l.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,i)}}function vx(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find((e=>e.no==t.field.no))}function bx(e,t){Ry(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function yx(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==t[n]:"enum"==e.kind?t[n]!==e.T.values[0].no:!lx(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function xx(e,t){const n=e.localName,i=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=i?e.T.values[0].no:void 0;break;case"scalar":t[n]=i?ax(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function kx(e,t){if(null===e||"object"!=typeof e)return!1;if(!Object.getOwnPropertyNames(Wy.prototype).every((t=>t in e&&"function"==typeof e[t])))return!1;const n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function wx(e,t){return kx(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}ix.DOUBLE,ix.FLOAT,ix.INT64,ix.UINT64,ix.INT32,ix.UINT32,ix.BOOL,ix.STRING,ix.BYTES;const Cx={ignoreUnknownFields:!1},Sx={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Tx(e){return e?Object.assign(Object.assign({},Cx),e):Cx}function Ex(e){return e?Object.assign(Object.assign({},Sx),e):Sx}const _x=Symbol(),Ix=Symbol();function Px(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Rx(e,t,n,i,r){let o=n.localName;if(n.repeated){if(Ry("map"!=n.kind),null===t)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(t)));const s=e[o];for(const e of t){if(null===e)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(e)));switch(n.kind){case"message":s.push(n.T.fromJson(e,i));break;case"enum":const t=Ox(n.T,e,i.ignoreUnknownFields,!0);t!==Ix&&s.push(t);break;case"scalar":try{s.push(Mx(n.T,e,n.L,!0))}catch(K$){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(e));throw K$ instanceof Error&&K$.message.length>0&&(i+=": ".concat(K$.message)),new Error(i)}}}}else if("map"==n.kind){if(null===t)return;if("object"!=typeof t||Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(t)));const s=e[o];for(const[e,o]of Object.entries(t)){if(null===o)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let a;try{a=Ax(n.K,e)}catch(K$){let i="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(t));throw K$ instanceof Error&&K$.message.length>0&&(i+=": ".concat(K$.message)),new Error(i)}switch(n.V.kind){case"message":s[a]=n.V.T.fromJson(o,i);break;case"enum":const e=Ox(n.V.T,o,i.ignoreUnknownFields,!0);e!==Ix&&(s[a]=e);break;case"scalar":try{s[a]=Mx(n.V.T,o,rx.BIGINT,!0)}catch(K$){let i="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(t));throw K$ instanceof Error&&K$.message.length>0&&(i+=": ".concat(K$.message)),new Error(i)}}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(null===t&&"google.protobuf.Value"!=s.typeName)return;let a=e[o];kx(a)?a.fromJson(t,i):(e[o]=a=s.fromJson(t,i),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(a)));break;case"enum":const l=Ox(n.T,t,i.ignoreUnknownFields,!1);switch(l){case _x:xx(n,e);break;case Ix:break;default:e[o]=l}break;case"scalar":try{const i=Mx(n.T,t,n.L,!1);if(i===_x)xx(n,e);else e[o]=i}catch(K$){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Px(t));throw K$ instanceof Error&&K$.message.length>0&&(i+=": ".concat(K$.message)),new Error(i)}}}function Ax(e,t){if(e===ix.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return Mx(e,t,rx.BIGINT,!0).toString()}function Mx(e,t,n,i){if(null===t)return i?ax(e,n):_x;switch(e){case ix.DOUBLE:case ix.FLOAT:if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const i=Number(t);if(Number.isNaN(i))break;if(!Number.isFinite(i))break;return e==ix.FLOAT&&Fy(i),i;case ix.INT32:case ix.FIXED32:case ix.SFIXED32:case ix.SINT32:case ix.UINT32:let r;if("number"==typeof t?r=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(r=Number(t)),void 0===r)break;return e==ix.UINT32||e==ix.FIXED32?Ly(r):Dy(r),r;case ix.INT64:case ix.SFIXED64:case ix.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;const o=nx.parse(t);return n?o.toString():o;case ix.FIXED64:case ix.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;const s=nx.uParse(t);return n?s.toString():s;case ix.BOOL:if("boolean"!==typeof t)break;return t;case ix.STRING:if("string"!==typeof t)break;try{encodeURIComponent(t)}catch(K$){throw new Error("invalid UTF8")}return t;case ix.BYTES:if(""===t)return new Uint8Array(0);if("string"!==typeof t)break;return fx.dec(t)}throw new Error}function Ox(e,t,n,i){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:i?e.values[0].no:_x;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(void 0!==i)return i.no;if(n)return Ix}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Px(t)))}function Nx(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function jx(e,t,n){if("map"==e.kind){Ry("object"==typeof t&&null!=t);const i={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[n,o]of r)i[n.toString()]=Lx(e.V.T,o);break;case"message":for(const[e,o]of r)i[e.toString()]=o.toJson(n);break;case"enum":const t=e.V.T;for(const[e,o]of r)i[e.toString()]=Dx(t,o,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?i:void 0}if(e.repeated){Ry(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++)i.push(Lx(e.T,t[n]));break;case"enum":for(let r=0;r<t.length;r++)i.push(Dx(e.T,t[r],n.enumAsInteger));break;case"message":for(let e=0;e<t.length;e++)i.push(t[e].toJson(n))}return n.emitDefaultValues||i.length>0?i:void 0}switch(e.kind){case"scalar":return Lx(e.T,t);case"enum":return Dx(e.T,t,n.enumAsInteger);case"message":return wx(e.T,t).toJson(n)}}function Dx(e,t,n){var i;if(Ry("number"==typeof t),"google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const r=e.findNumber(t);return null!==(i=null===r||void 0===r?void 0:r.name)&&void 0!==i?i:t}function Lx(e,t){switch(e){case ix.INT32:case ix.SFIXED32:case ix.SINT32:case ix.FIXED32:case ix.UINT32:return Ry("number"==typeof t),t;case ix.FLOAT:case ix.DOUBLE:return Ry("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case ix.STRING:return Ry("string"==typeof t),t;case ix.BOOL:return Ry("boolean"==typeof t),t;case ix.UINT64:case ix.FIXED64:case ix.INT64:case ix.SFIXED64:case ix.SINT64:return Ry("bigint"==typeof t||"string"==typeof t||"number"==typeof t),t.toString();case ix.BYTES:return Ry(t instanceof Uint8Array),fx.enc(t)}}const Fx=Symbol("@bufbuild/protobuf/unknown-fields"),Bx={readUnknownFields:!0,readerFactory:e=>new dx(e)},Ux={writeUnknownFields:!0,writerFactory:()=>new cx};function $x(e){return e?Object.assign(Object.assign({},Bx),e):Bx}function zx(e){return e?Object.assign(Object.assign({},Ux),e):Ux}function Vx(e,t,n,i,r){let{repeated:o,localName:s}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const a="enum"==n.kind?ix.INT32:n.T;let l=qx;if("scalar"==n.kind&&n.L>0&&(l=Wx),o){let n=e[s];if(i==ox.LengthDelimited&&a!=ix.STRING&&a!=ix.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(l(t,a))}else n.push(l(t,a))}else e[s]=l(t,a);break;case"message":const c=n.T;o?e[s].push(Hx(t,new c,r,n)):kx(e[s])?Hx(t,e[s],r,n):(e[s]=Hx(t,new c,r,n),!c.fieldWrapper||n.oneof||n.repeated||(e[s]=c.fieldWrapper.unwrapField(e[s])));break;case"map":let[d,u]=function(e,t,n){const i=t.uint32(),r=t.pos+i;let o,s;for(;t.pos<r;){const[i]=t.tag();switch(i){case 1:o=qx(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=qx(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=Hx(t,new e.V.T,n,void 0)}}}void 0===o&&(o=ax(e.K,rx.BIGINT));"string"!=typeof o&&"number"!=typeof o&&(o=o.toString());if(void 0===s)switch(e.V.kind){case"scalar":s=ax(e.V.T,rx.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T}return[o,s]}(n,t,r);e[s][d]=u}}function Hx(e,t,n,i){const r=t.getType().runtime.bin,o=null===i||void 0===i?void 0:i.delimited;return r.readMessage(t,e,o?i.no:e.uint32(),n,o),t}function Wx(e,t){const n=qx(e,t);return"bigint"==typeof n?n.toString():n}function qx(e,t){switch(t){case ix.STRING:return e.string();case ix.BOOL:return e.bool();case ix.DOUBLE:return e.double();case ix.FLOAT:return e.float();case ix.INT32:return e.int32();case ix.INT64:return e.int64();case ix.UINT64:return e.uint64();case ix.FIXED64:return e.fixed64();case ix.BYTES:return e.bytes();case ix.FIXED32:return e.fixed32();case ix.SFIXED32:return e.sfixed32();case ix.SFIXED64:return e.sfixed64();case ix.SINT64:return e.sint64();case ix.UINT32:return e.uint32();case ix.SINT32:return e.sint32()}}function Kx(e,t,n,i){Ry(void 0!==t);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let o="enum"==e.kind?ix.INT32:e.T;if(r)if(Ry(Array.isArray(t)),e.packed)!function(e,t,n,i){if(!i.length)return;e.tag(n,ox.LengthDelimited).fork();let[,r]=Xx(t);for(let o=0;o<i.length;o++)e[r](i[o]);e.join()}(n,o,e.no,t);else for(const i of t)Qx(n,o,e.no,i);else Qx(n,o,e.no,t);break;case"message":if(r){Ry(Array.isArray(t));for(const r of t)Yx(n,i,e,r)}else Yx(n,i,e,t);break;case"map":Ry("object"==typeof t&&null!=t);for(const[r,s]of Object.entries(t))Gx(n,i,e,r,s)}}function Gx(e,t,n,i,r){e.tag(n.no,ox.LengthDelimited),e.fork();let o=i;switch(n.K){case ix.INT32:case ix.FIXED32:case ix.UINT32:case ix.SFIXED32:case ix.SINT32:o=Number.parseInt(i);break;case ix.BOOL:Ry("true"==i||"false"==i),o="true"==i}switch(Qx(e,n.K,1,o),n.V.kind){case"scalar":Qx(e,n.V.T,2,r);break;case"enum":Qx(e,ix.INT32,2,r);break;case"message":Ry(void 0!==r),e.tag(2,ox.LengthDelimited).bytes(r.toBinary(t))}e.join()}function Yx(e,t,n,i){const r=wx(n.T,i);n.delimited?e.tag(n.no,ox.StartGroup).raw(r.toBinary(t)).tag(n.no,ox.EndGroup):e.tag(n.no,ox.LengthDelimited).bytes(r.toBinary(t))}function Qx(e,t,n,i){Ry(void 0!==i);let[r,o]=Xx(t);e.tag(n,r)[o](i)}function Xx(e){let t=ox.Varint;switch(e){case ix.BYTES:case ix.STRING:t=ox.LengthDelimited;break;case ix.DOUBLE:case ix.FIXED64:case ix.SFIXED64:t=ox.Bit64;break;case ix.FIXED32:case ix.SFIXED32:case ix.FLOAT:t=ox.Bit32}return[t,ix[e].toLowerCase()]}function Jx(e){if(void 0===e)return e;if(kx(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Zx(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class ek{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function tk(e,t){const n=ik(e);return t?n:lk(ak(n))}const nk=ik;function ik(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const rk=new Set(["constructor","toString","toJSON","valueOf"]),ok=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),sk=e=>"".concat(e,"$"),ak=e=>ok.has(e)?sk(e):e,lk=e=>rk.has(e)?sk(e):e;class ck{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=tk(e,!1)}addField(e){Ry(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const dk=(uk=e=>new ek(e,(e=>function(e,t){var n,i,r,o,s,a;const l=[];let c;for(const d of"function"==typeof e?e():e){const e=d;if(e.localName=tk(d.name,void 0!==d.oneof),e.jsonName=null!==(n=d.jsonName)&&void 0!==n?n:nk(d.name),e.repeated=null!==(i=d.repeated)&&void 0!==i&&i,"scalar"==d.kind&&(e.L=null!==(r=d.L)&&void 0!==r?r:rx.BIGINT),e.delimited=null!==(o=d.delimited)&&void 0!==o&&o,e.req=null!==(s=d.req)&&void 0!==s&&s,e.opt=null!==(a=d.opt)&&void 0!==a&&a,void 0===d.packed&&(e.packed="enum"==d.kind||"scalar"==d.kind&&d.T!=ix.BYTES&&d.T!=ix.STRING),void 0!==d.oneof){const t="string"==typeof d.oneof?d.oneof:d.oneof.name;c&&c.name==t||(c=new ck(t)),e.oneof=c,c.addField(e)}l.push(e)}return l}(e))),hk=e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated)i[n]=[];else switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=ax(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:Tx,makeWriteOptions:Ex,readMessage(e,t,n,i){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Px(t)));i=null!==i&&void 0!==i?i:new e;const r=new Map,o=n.typeRegistry;for(const[s,a]of Object.entries(t)){const t=e.fields.findJsonName(s);if(t){if(t.oneof){if(null===a&&"scalar"==t.kind)continue;const n=r.get(t.oneof);if(void 0!==n)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(t.oneof.name,'" present: "').concat(n,'", "').concat(s,'"'));r.set(t.oneof,s)}Rx(i,a,t,n,e)}else{let t=!1;if((null===o||void 0===o?void 0:o.findExtension)&&s.startsWith("[")&&s.endsWith("]")){const r=o.findExtension(s.substring(1,s.length-1));if(r&&r.extendee.typeName==e.typeName){t=!0;const[e,o]=ux(r);Rx(e,a,r.field,n,r),gx(i,r,o(),n)}}if(!t&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return i},writeMessage(e,t){const n=e.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!yx(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues)continue;if(!Nx(r))continue}const n=jx(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t);void 0!==n&&(i[t.useProtoFieldName?r.name:r.jsonName]=n)}const o=t.typeRegistry;if(null===o||void 0===o?void 0:o.findExtensionFor)for(const r of n.runtime.bin.listUnknownFields(e)){const s=o.findExtensionFor(n.typeName,r.no);if(s&&vx(e,s)){const n=mx(e,s,t),r=jx(s.field,n,t);void 0!==r&&(i[s.field.jsonName]=r)}}}catch(K$){const t=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),i=K$ instanceof Error?K$.message:String(K$);throw new Error(t+(i.length>0?": ".concat(i):""))}return i},readScalar:(e,t,n)=>Mx(e,t,null!==n&&void 0!==n?n:rx.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t)return n||lx(e,t)?Lx(e,t):void 0},debug:Px},bin:{makeReadOptions:$x,makeWriteOptions:zx,listUnknownFields(e){var t;return null!==(t=e[Fx])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[Fx]},writeUnknownFields(e,t){const n=e[Fx];if(n)for(const i of n)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,i){const r=e;Array.isArray(r[Fx])||(r[Fx]=[]),r[Fx].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i,r){const o=e.getType(),s=r?t.len:t.pos+n;let a,l;for(;t.pos<s&&([a,l]=t.tag(),!0!==r||l!=ox.EndGroup);){const n=o.fields.find(a);if(n)Vx(e,t,n,l,i);else{const n=t.skip(l,a);i.readUnknownFields&&this.onUnknownField(e,a,l,n)}}if(r&&(l!=ox.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Vx,writeMessage(e,t,n){const i=e.getType();for(const r of i.fields.byNumber())if(yx(r,e))Kx(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t,n);else if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,i){void 0!==t&&Kx(e,t,n,i)}},util:Object.assign(Object.assign({},{setEnumType:$y,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const i of n.fields.byMember()){const n=i.localName,r=t,o=e;if(null!=o[n])switch(i.kind){case"oneof":const e=o[n].case;if(void 0===e)continue;const t=i.findField(e);let s=o[n].value;t&&"message"==t.kind&&!kx(s,t.T)?s=new t.T(s):t&&"scalar"===t.kind&&t.T===ix.BYTES&&(s=Zx(s)),r[n]={case:e,value:s};break;case"scalar":case"enum":let a=o[n];i.T===ix.BYTES&&(a=i.repeated?a.map(Zx):Zx(a)),r[n]=a;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===ix.BYTES)for(const[t,i]of Object.entries(o[n]))r[n][t]=Zx(i);else Object.assign(r[n],o[n]);break;case"message":const e=i.V.T;for(const t of Object.keys(o[n])){let i=o[n][t];e.fieldWrapper||(i=new e(i)),r[n][t]=i}}break;case"message":const l=i.T;if(i.repeated)r[n]=o[n].map((e=>kx(e,l)?e:new l(e)));else{const e=o[n];l.fieldWrapper?"google.protobuf.BytesValue"===l.typeName?r[n]=Zx(e):r[n]=e:r[n]=kx(e,l)?e:new l(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const i=t[e.localName],r=n[e.localName];if(e.repeated){if(i.length!==r.length)return!1;switch(e.kind){case"message":return i.every(((t,n)=>e.T.equals(t,r[n])));case"scalar":return i.every(((t,n)=>sx(e.T,t,r[n])));case"enum":return i.every(((e,t)=>sx(ix.INT32,e,r[t])))}throw new Error("repeated cannot contain ".concat(e.kind))}switch(e.kind){case"message":return e.T.equals(i,r);case"enum":return sx(ix.INT32,i,r);case"scalar":return sx(e.T,i,r);case"oneof":if(i.case!==r.case)return!1;const t=e.findField(i.case);if(void 0===t)return!0;switch(t.kind){case"message":return t.T.equals(i.value,r.value);case"enum":return sx(ix.INT32,i.value,r.value);case"scalar":return sx(t.T,i.value,r.value)}throw new Error("oneof cannot contain ".concat(t.kind));case"map":const n=Object.keys(i).concat(Object.keys(r));switch(e.V.kind){case"message":const t=e.V.T;return n.every((e=>t.equals(i[e],r[e])));case"enum":return n.every((e=>sx(ix.INT32,i[e],r[e])));case"scalar":const o=e.V.T;return n.every((e=>sx(o,i[e],r[e])))}}})),clone(e){const t=e.getType(),n=new t,i=n;for(const r of t.fields.byMember()){const t=e[r.localName];let n;if(r.repeated)n=t.map(Jx);else if("map"==r.kind){n=i[r.localName];for(const[e,i]of Object.entries(t))n[e]=Jx(i)}else n="oneof"==r.kind?r.findField(t.case)?{case:t.case,value:Jx(t.value)}:{case:void 0}:Jx(t);i[r.localName]=n}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}),{newFieldList:uk,initFields:hk}),makeMessageType(e,t,n){return function(e,t,n,i){var r;const o=null!==(r=null===i||void 0===i?void 0:i.localName)&&void 0!==r?r:t.substring(t.lastIndexOf(".")+1),s={[o]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[o];return Object.setPrototypeOf(s.prototype,new Wy),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new s).fromBinary(e,t),fromJson:(e,t)=>(new s).fromJson(e,t),fromJsonString:(e,t)=>(new s).fromJsonString(e,t),equals:(t,n)=>e.util.equals(s,t,n)}),s}(this,e,t,n)},makeEnum:Vy,makeEnumType:zy,getEnumType:Uy,makeExtension(e,t,n){return function(e,t,n,i){let r;return{typeName:t,extendee:n,get field(){if(!r){const n="function"==typeof i?i():i;n.name=t.split(".").pop(),n.jsonName="[".concat(t,"]"),r=e.util.newFieldList([n]).list()[0]}return r},runtime:e}}(this,e,t,n)}});var uk,hk;class pk extends Wy{constructor(e){super(),this.seconds=nx.zero,this.nanos=0,dk.util.initPartial(e,this)}fromJson(e,t){if("string"!==typeof e)throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(dk.json.debug(e)));const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=nx.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return pk.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new pk({seconds:nx.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new pk).fromBinary(e,t)}static fromJson(e,t){return(new pk).fromJson(e,t)}static fromJsonString(e,t){return(new pk).fromJsonString(e,t)}static equals(e,t){return dk.util.equals(pk,e,t)}}pk.runtime=dk,pk.typeName="google.protobuf.Timestamp",pk.fields=dk.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]));const fk=dk.makeMessageType("livekit.MetricsBatch",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:pk},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:mk,repeated:!0},{no:5,name:"events",kind:"message",T:vk,repeated:!0}])),mk=dk.makeMessageType("livekit.TimeSeriesMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:gk,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}])),gk=dk.makeMessageType("livekit.MetricSample",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:pk},{no:3,name:"value",kind:"scalar",T:2}])),vk=dk.makeMessageType("livekit.EventMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:pk},{no:7,name:"normalized_end_timestamp",kind:"message",T:pk,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}])),bk=dk.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),yk=dk.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),xk=dk.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),kk=dk.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),wk=dk.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Ck=dk.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Sk=dk.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),Tk=dk.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Ek=dk.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),_k=dk.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),Ik=dk.makeMessageType("livekit.Room",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Pk,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:sw}])),Pk=dk.makeMessageType("livekit.Codec",(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}])),Rk=dk.makeMessageType("livekit.ParticipantPermission",(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:dk.getEnumType(xk),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}])),Ak=dk.makeMessageType("livekit.ParticipantInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:dk.getEnumType(Mk)},{no:4,name:"tracks",kind:"message",T:Lk,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Rk},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:dk.getEnumType(Ok)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:dk.getEnumType(Sk)},{no:18,name:"kind_details",kind:"enum",T:dk.getEnumType(Nk),repeated:!0}])),Mk=dk.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Ok=dk.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Nk=dk.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),jk=dk.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),Dk=dk.makeMessageType("livekit.SimulcastCodecInfo",(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Fk,repeated:!0}])),Lk=dk.makeMessageType("livekit.TrackInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:dk.getEnumType(yk)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:dk.getEnumType(xk)},{no:10,name:"layers",kind:"message",T:Fk,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Dk,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:dk.getEnumType(jk)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:sw},{no:19,name:"audio_features",kind:"enum",T:dk.getEnumType(_k),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:dk.getEnumType(bk)}])),Fk=dk.makeMessageType("livekit.VideoLayer",(()=>[{no:1,name:"quality",kind:"enum",T:dk.getEnumType(kk)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}])),Bk=dk.makeMessageType("livekit.DataPacket",(()=>[{no:1,name:"kind",kind:"enum",T:dk.getEnumType(Uk)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Vk,oneof:"value"},{no:3,name:"speaker",kind:"message",T:$k,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Hk,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Wk,oneof:"value"},{no:8,name:"metrics",kind:"message",T:fk,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Kk,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Gk,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Yk,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Qk,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:dw,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:uw,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:hw,oneof:"value"}])),Uk=dk.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),$k=dk.makeMessageType("livekit.ActiveSpeakerUpdate",(()=>[{no:1,name:"speakers",kind:"message",T:zk,repeated:!0}])),zk=dk.makeMessageType("livekit.SpeakerInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}])),Vk=dk.makeMessageType("livekit.UserPacket",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}])),Hk=dk.makeMessageType("livekit.SipDTMF",(()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}])),Wk=dk.makeMessageType("livekit.Transcription",(()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:qk,repeated:!0}])),qk=dk.makeMessageType("livekit.TranscriptionSegment",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}])),Kk=dk.makeMessageType("livekit.ChatMessage",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}])),Gk=dk.makeMessageType("livekit.RpcRequest",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}])),Yk=dk.makeMessageType("livekit.RpcAck",(()=>[{no:1,name:"request_id",kind:"scalar",T:9}])),Qk=dk.makeMessageType("livekit.RpcResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:Xk,oneof:"value"}])),Xk=dk.makeMessageType("livekit.RpcError",(()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}])),Jk=dk.makeMessageType("livekit.ParticipantTracks",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}])),Zk=dk.makeMessageType("livekit.ServerInfo",(()=>[{no:1,name:"edition",kind:"enum",T:dk.getEnumType(ew)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}])),ew=dk.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),tw=dk.makeMessageType("livekit.ClientInfo",(()=>[{no:1,name:"sdk",kind:"enum",T:dk.getEnumType(nw)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}])),nw=dk.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),iw=dk.makeMessageType("livekit.ClientConfiguration",(()=>[{no:1,name:"video",kind:"message",T:rw},{no:2,name:"screen",kind:"message",T:rw},{no:3,name:"resume_connection",kind:"enum",T:dk.getEnumType(Ck)},{no:4,name:"disabled_codecs",kind:"message",T:ow},{no:5,name:"force_relay",kind:"enum",T:dk.getEnumType(Ck)}])),rw=dk.makeMessageType("livekit.VideoConfiguration",(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:dk.getEnumType(Ck)}])),ow=dk.makeMessageType("livekit.DisabledCodecs",(()=>[{no:1,name:"codecs",kind:"message",T:Pk,repeated:!0},{no:2,name:"publish",kind:"message",T:Pk,repeated:!0}])),sw=dk.makeMessageType("livekit.TimedVersion",(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}])),aw=dk.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),lw=dk.makeMessageType("livekit.DataStream.TextHeader",(()=>[{no:1,name:"operation_type",kind:"enum",T:dk.getEnumType(aw)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}]),{localName:"DataStream_TextHeader"}),cw=dk.makeMessageType("livekit.DataStream.ByteHeader",(()=>[{no:1,name:"name",kind:"scalar",T:9}]),{localName:"DataStream_ByteHeader"}),dw=dk.makeMessageType("livekit.DataStream.Header",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:dk.getEnumType(jk)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:lw,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:cw,oneof:"content_header"}]),{localName:"DataStream_Header"}),uw=dk.makeMessageType("livekit.DataStream.Chunk",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}]),{localName:"DataStream_Chunk"}),hw=dk.makeMessageType("livekit.DataStream.Trailer",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]),{localName:"DataStream_Trailer"}),pw=dk.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),fw=dk.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),mw=dk.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),gw=dk.makeMessageType("livekit.SignalRequest",(()=>[{no:1,name:"offer",kind:"message",T:Ew,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ew,oneof:"message"},{no:3,name:"trickle",kind:"message",T:xw,oneof:"message"},{no:4,name:"add_track",kind:"message",T:yw,oneof:"message"},{no:5,name:"mute",kind:"message",T:kw,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Iw,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Pw,oneof:"message"},{no:8,name:"leave",kind:"message",T:Mw,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Nw,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Kw,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Yw,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Xw,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:jw,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Jw,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Rw,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Aw,oneof:"message"}])),vw=dk.makeMessageType("livekit.SignalResponse",(()=>[{no:1,name:"join",kind:"message",T:ww,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ew,oneof:"message"},{no:3,name:"offer",kind:"message",T:Ew,oneof:"message"},{no:4,name:"trickle",kind:"message",T:xw,oneof:"message"},{no:5,name:"update",kind:"message",T:_w,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Sw,oneof:"message"},{no:8,name:"leave",kind:"message",T:Mw,oneof:"message"},{no:9,name:"mute",kind:"message",T:kw,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Lw,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Fw,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Uw,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:zw,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Ww,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Gw,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Tw,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Cw,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Zw,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:nC,oneof:"message"},{no:22,name:"request_response",kind:"message",T:iC,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:oC,oneof:"message"}])),bw=dk.makeMessageType("livekit.SimulcastCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}])),yw=dk.makeMessageType("livekit.AddTrackRequest",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:dk.getEnumType(yk)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:dk.getEnumType(xk)},{no:9,name:"layers",kind:"message",T:Fk,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:bw,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:dk.getEnumType(jk)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:dk.getEnumType(bk)}])),xw=dk.makeMessageType("livekit.TrickleRequest",(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:dk.getEnumType(pw)},{no:3,name:"final",kind:"scalar",T:8}])),kw=dk.makeMessageType("livekit.MuteTrackRequest",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}])),ww=dk.makeMessageType("livekit.JoinResponse",(()=>[{no:1,name:"room",kind:"message",T:Ik},{no:2,name:"participant",kind:"message",T:Ak},{no:3,name:"other_participants",kind:"message",T:Ak,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Dw,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:iw},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Zk},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Pk,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}])),Cw=dk.makeMessageType("livekit.ReconnectResponse",(()=>[{no:1,name:"ice_servers",kind:"message",T:Dw,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:iw}])),Sw=dk.makeMessageType("livekit.TrackPublishedResponse",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Lk}])),Tw=dk.makeMessageType("livekit.TrackUnpublishedResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}])),Ew=dk.makeMessageType("livekit.SessionDescription",(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}])),_w=dk.makeMessageType("livekit.ParticipantUpdate",(()=>[{no:1,name:"participants",kind:"message",T:Ak,repeated:!0}])),Iw=dk.makeMessageType("livekit.UpdateSubscription",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Jk,repeated:!0}])),Pw=dk.makeMessageType("livekit.UpdateTrackSettings",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:dk.getEnumType(kk)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}])),Rw=dk.makeMessageType("livekit.UpdateLocalAudioTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:dk.getEnumType(_k),repeated:!0}])),Aw=dk.makeMessageType("livekit.UpdateLocalVideoTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}])),Mw=dk.makeMessageType("livekit.LeaveRequest",(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:dk.getEnumType(Sk)},{no:3,name:"action",kind:"enum",T:dk.getEnumType(Ow)},{no:4,name:"regions",kind:"message",T:eC}])),Ow=dk.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),Nw=dk.makeMessageType("livekit.UpdateVideoLayers",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Fk,repeated:!0}])),jw=dk.makeMessageType("livekit.UpdateParticipantMetadata",(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}])),Dw=dk.makeMessageType("livekit.ICEServer",(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}])),Lw=dk.makeMessageType("livekit.SpeakersChanged",(()=>[{no:1,name:"speakers",kind:"message",T:zk,repeated:!0}])),Fw=dk.makeMessageType("livekit.RoomUpdate",(()=>[{no:1,name:"room",kind:"message",T:Ik}])),Bw=dk.makeMessageType("livekit.ConnectionQualityInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:dk.getEnumType(wk)},{no:3,name:"score",kind:"scalar",T:2}])),Uw=dk.makeMessageType("livekit.ConnectionQualityUpdate",(()=>[{no:1,name:"updates",kind:"message",T:Bw,repeated:!0}])),$w=dk.makeMessageType("livekit.StreamStateInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:dk.getEnumType(fw)}])),zw=dk.makeMessageType("livekit.StreamStateUpdate",(()=>[{no:1,name:"stream_states",kind:"message",T:$w,repeated:!0}])),Vw=dk.makeMessageType("livekit.SubscribedQuality",(()=>[{no:1,name:"quality",kind:"enum",T:dk.getEnumType(kk)},{no:2,name:"enabled",kind:"scalar",T:8}])),Hw=dk.makeMessageType("livekit.SubscribedCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Vw,repeated:!0}])),Ww=dk.makeMessageType("livekit.SubscribedQualityUpdate",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Vw,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Hw,repeated:!0}])),qw=dk.makeMessageType("livekit.TrackPermission",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}])),Kw=dk.makeMessageType("livekit.SubscriptionPermission",(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:qw,repeated:!0}])),Gw=dk.makeMessageType("livekit.SubscriptionPermissionUpdate",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}])),Yw=dk.makeMessageType("livekit.SyncState",(()=>[{no:1,name:"answer",kind:"message",T:Ew},{no:2,name:"subscription",kind:"message",T:Iw},{no:3,name:"publish_tracks",kind:"message",T:Sw,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Qw,repeated:!0},{no:5,name:"offer",kind:"message",T:Ew},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}])),Qw=dk.makeMessageType("livekit.DataChannelInfo",(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:dk.getEnumType(pw)}])),Xw=dk.makeMessageType("livekit.SimulateScenario",(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:dk.getEnumType(mw),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}])),Jw=dk.makeMessageType("livekit.Ping",(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}])),Zw=dk.makeMessageType("livekit.Pong",(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}])),eC=dk.makeMessageType("livekit.RegionSettings",(()=>[{no:1,name:"regions",kind:"message",T:tC,repeated:!0}])),tC=dk.makeMessageType("livekit.RegionInfo",(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}])),nC=dk.makeMessageType("livekit.SubscriptionResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:dk.getEnumType(Ek)}])),iC=dk.makeMessageType("livekit.RequestResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:dk.getEnumType(rC)},{no:3,name:"message",kind:"scalar",T:9}])),rC=dk.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),oC=dk.makeMessageType("livekit.TrackSubscribed",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]));function sC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aC,lC={exports:{}},cC=lC.exports;var dC,uC,hC=function(){return aC||(aC=1,e=lC,function(t,n){e.exports?e.exports=n():t.log=n()}(cC,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function s(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(K$){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function d(i,r,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?s(console,i):void 0!==console.log?s(console,"log"):e)}(i)||c.apply(this,arguments)}function u(e,n){var s,a,c,u=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(ye){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch(ye){}return void 0===u.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"===typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"===typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"===typeof e?h+=":"+e:"symbol"===typeof e&&(h=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||d,u.getLevel=function(){return null!=c?c:null!=a?a:s},u.setLevel=function(e,n){return c=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch(ye){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(ye){}}}(c),l.call(u)},u.setDefaultLevel=function(e){a=f(e),p()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(ye){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(ye){}}}(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(o!==u&&(s=f(o.getLevel())),l.call(u),o===u)for(var e in r)r[e].rebuild()},s=f(o?o.getLevel():"WARN");var m=p();null!=m&&(c=f(m)),l.call(u)}(o=new u).getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new u(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return r},o.default=o,o}))),lC.exports;var e}();!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(dC||(dC={})),function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"}(uC||(uC={}));let pC=hC.getLogger("livekit");Object.values(uC).map((e=>hC.getLogger(e)));function fC(e){const t=hC.getLogger(e);return t.setDefaultLevel(pC.getLevel()),t}pC.setDefaultLevel(dC.info);const mC=hC.getLogger("lk-e2ee"),gC=7e3,vC=[0,300,1200,2700,4800,gC,gC,gC,gC,gC];function bC(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(K$){o(K$)}}function a(e){try{l(i.throw(e))}catch(K$){o(K$)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function yC(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=yC(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}"function"===typeof SuppressedError&&SuppressedError;var kC,wC={exports:{}};var CC=function(){if(kC)return wC.exports;kC=1;var e,t="object"===typeof Reflect?Reflect:null,n=t&&"function"===typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"===typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function r(){r.init.call(this)}wC.exports=r,wC.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&f(e,"error",t,n)}(e,r,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,o,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),l=o[t]),void 0===l)l=o[t]=n,++e._eventsCount;else if("function"===typeof l?l=o[t]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(r=a(e))>0&&l.length>r&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,function(e){console&&console.warn&&console.warn(e)}(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function u(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}return Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"===typeof l)n(l,this,t);else{var c=l.length,d=p(l,c);for(i=0;i<c;++i)n(d[i],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,r,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return u(this,e,!0)},r.prototype.rawListeners=function(e){return u(this,e,!1)},r.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},wC.exports}();let SC=!0,TC=!0;function EC(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function _C(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};const o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function IC(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(SC=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function PC(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(TC=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function RC(){if("object"===typeof window){if(SC)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function AC(e,t){TC&&console.warn(e+" is deprecated, please use "+t+" instead.")}function MC(e){return"[object Object]"===Object.prototype.toString.call(e)}function OC(e){return MC(e)?Object.keys(e).reduce((function(t,n){const i=MC(e[n]),r=i?OC(e[n]):e[n],o=i&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[n]:r})}),{}):e}function NC(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?NC(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{NC(e,e.get(t),n)}))})))}function jC(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&NC(e,n,r)}))})),r}const DC=RC;function LC(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"===typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===typeof e.video){let o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=i(e.video),DC("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return DC("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function FC(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function BC(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else _C(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function UC(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function $C(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>jC(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),_C(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>jC(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function zC(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function VC(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return zC(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const r=this._streams[n.id];if(r)r.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function HC(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function WC(e,t){_C(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var qC=Object.freeze({__proto__:null,fixNegotiationNeeded:WC,shimAddTrackRemoveTrack:VC,shimAddTrackRemoveTrackWithNative:zC,shimGetSendersWithDtmf:UC,shimGetUserMedia:LC,shimMediaStream:FC,shimOnTrack:BC,shimPeerConnection:HC,shimSenderReceiverGetStats:$C});function KC(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){AC("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function GC(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function YC(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(K$){if("TypeError"!==K$.name)throw K$;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}function QC(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function XC(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),_C(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function JC(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){AC("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function ZC(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function eS(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function tS(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function nS(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function iS(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var rS=Object.freeze({__proto__:null,shimAddTransceiver:eS,shimCreateAnswer:iS,shimCreateOffer:nS,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:tS,shimGetUserMedia:KC,shimOnTrack:GC,shimPeerConnection:YC,shimRTCDataChannel:ZC,shimReceiverGetStats:XC,shimRemoveStream:JC,shimSenderGetStats:QC});function oS(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function sS(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function aS(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function lS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(cS(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function cS(e){return e&&void 0!==e.video?Object.assign({},e,{video:OC(e.video)}):e}function dS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];void 0===i.urls&&i.url?(AC("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function uS(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function pS(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var fS,mS=Object.freeze({__proto__:null,shimAudioContext:pS,shimCallbacksAPI:aS,shimConstraints:cS,shimCreateOfferLegacy:hS,shimGetUserMedia:lS,shimLocalStreamsAPI:oS,shimRTCIceServerUrls:dS,shimRemoteStreamsAPI:sS,shimTrackEventTransceiver:uS}),gS={exports:{}};var vS=(fS||(fS=1,function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<i.length;r++)n=i[r].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substring(t+1,i),n.value=e.substring(i+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");n.profile=i[2];for(let o=3;o<i.length;o++){const r=i[o],s=t.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(s){const i=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+r+" ");switch(i.parameters=o.length?t.parseFmtp(o[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===a&&(l=c[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&l&&(t.rtx={ssrc:l}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substring(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,i){let r;const o=void 0!==n?n:2;return r=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(gS)),gS.exports),bS=sC(vS),yS=Ey({__proto__:null,default:bS},[vS]);function xS(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),i=bS.parseCandidate(e.candidate);for(const e in i)e in n||Object.defineProperty(n,e,{value:i[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,_C(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function kS(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||_C(e,"icecandidate",(e=>{if(e.candidate){const t=bS.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function wS(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=bS.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=bS.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),i=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=bS.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],e);let r;r=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>r}),this._sctp=o}return n.apply(this,arguments)}}function CS(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},_C(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function SS(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function TS(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function ES(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function _S(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var IS=Object.freeze({__proto__:null,removeExtmapAllowMixed:TS,shimAddIceCandidateNullOrEmpty:ES,shimConnectionState:SS,shimMaxMessageSize:wS,shimParameterlessSetLocalDescription:_S,shimRTCIceCandidate:xS,shimRTCIceCandidateRelayProtocol:kS,shimSendThrowTypeError:CS});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=RC,i=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find((e=>"Chromium"===e.brand));if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=EC(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=EC(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=EC(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:i,commonShim:IS,extractVersion:EC,disableLog:IC,disableWarnings:PC,sdp:yS};switch(i.browser){case"chrome":if(!qC||!HC||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=qC,ES(e,i),_S(e),LC(e,i),FC(e),HC(e,i),BC(e),VC(e,i),UC(e),$C(e),WC(e,i),xS(e),kS(e),SS(e),wS(e,i),CS(e),TS(e,i);break;case"firefox":if(!rS||!YC||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=rS,ES(e,i),_S(e),KC(e,i),YC(e,i),GC(e),JC(e),QC(e),XC(e),ZC(e),eS(e),tS(e),nS(e),iS(e),xS(e),SS(e),wS(e,i),CS(e);break;case"safari":if(!mS||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=mS,ES(e,i),_S(e),dS(e),hS(e),aS(e),oS(e),sS(e),uS(e),lS(e),pS(e),xS(e),kS(e),wS(e,i),CS(e),TS(e,i);break;default:n("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const PS="lk_e2ee";var RS,AS,MS,OS;function NS(){return"undefined"!==typeof window.RTCRtpSender&&"undefined"!==typeof window.RTCRtpSender.prototype.createEncodedStreams||jS()}function jS(){return"undefined"!==typeof window.RTCRtpScriptTransform}!function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"}(RS||(RS={})),function(e){e.KeyRatcheted="keyRatcheted"}(AS||(AS={})),function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"}(MS||(MS={})),function(e){e.Error="cryptorError"}(OS||(OS={}));CC.EventEmitter;class DS extends Error{constructor(e,t){super(t||"an error has occured"),this.name="LiveKitError",this.code=e}}var LS,FS,BS,US,$S,zS,VS;!function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest"}(LS||(LS={}));class HS extends DS{constructor(e,t,n,i){super(1,e),this.name="ConnectionError",this.status=n,this.reason=t,this.context=i,this.reasonName=LS[t]}}class WS extends DS{constructor(e){super(21,null!==e&&void 0!==e?e:"device is unsupported"),this.name="DeviceUnsupportedError"}}class qS extends DS{constructor(e){super(20,null!==e&&void 0!==e?e:"track is invalid"),this.name="TrackInvalidError"}}class KS extends DS{constructor(e){super(10,null!==e&&void 0!==e?e:"unsupported server"),this.name="UnsupportedServer"}}class GS extends DS{constructor(e){super(12,null!==e&&void 0!==e?e:"unexpected connection state"),this.name="UnexpectedConnectionState"}}class YS extends DS{constructor(e){super(13,null!==e&&void 0!==e?e:"unable to negotiate"),this.name="NegotiationError"}}class QS extends DS{constructor(e,t){super(15,e),this.name="PublishTrackError",this.status=t}}class XS extends DS{constructor(e,t){super(15,e),this.reason=t,this.reasonName="string"===typeof t?t:rC[t]}}!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(FS||(FS={})),function(e){e.getFailure=function(t){if(t&&"name"in t)return"NotFoundError"===t.name||"DevicesNotFoundError"===t.name?e.NotFound:"NotAllowedError"===t.name||"PermissionDeniedError"===t.name?e.PermissionDenied:"NotReadableError"===t.name||"TrackStartError"===t.name?e.DeviceInUse:e.Other}}(FS||(FS={})),function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"}(BS||(BS={}));function JS(e){return"undefined"===typeof e?e:"function"===typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}!function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"}(US||(US={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage"}($S||($S={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected"}(zS||(zS={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate"}(VS||(VS={}));const ZS=/version\/(\d+(\.?_?\d+)+)/i;let eT;function tT(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"===typeof e&&"undefined"===typeof navigator)return;const n=(null!==e&&void 0!==e?e:navigator.userAgent).toLowerCase();if(void 0===eT||t){const e=nT.find((e=>{let{test:t}=e;return t.test(n)}));eT=null===e||void 0===e?void 0:e.describe(n)}return eT}const nT=[{test:/firefox|iceweasel|fxios/i,describe:e=>({name:"Firefox",version:iT(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:rT(e)})},{test:/chrom|crios|crmo/i,describe:e=>({name:"Chrome",version:iT(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:rT(e)})},{test:/safari|applewebkit/i,describe:e=>({name:"Safari",version:iT(ZS,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:rT(e)})}];function iT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=t.match(e);return i&&i.length>=n&&i[n]||""}function rT(e){return e.includes("mac os")?iT(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}class oT{}oT.setTimeout=function(){return setTimeout(...arguments)},oT.setInterval=function(){return setInterval(...arguments)},oT.clearTimeout=function(){return clearTimeout(...arguments)},oT.clearInterval=function(){return clearInterval(...arguments)};const sT=[];var aT;!function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"}(aT||(aT={}));class lT extends CC.EventEmitter{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=lT.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=pC,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),"hidden"===document.visibilityState?this.backgroundTimeout=setTimeout((()=>this.handleAppVisibilityChanged()),5e3):this.handleAppVisibilityChanged()},this.log=fC(null!==(i=n.loggerName)&&void 0!==i?i:uC.Track),this.loggerContextCb=n.loggerContextCb,this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=lT.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),gE(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let t="audio";this.kind===lT.Kind.Video&&(t="video"),0===this.attachedElements.length&&this.kind===lT.Kind.Video&&this.addAppVisibilityListener(),e||("audio"===t&&(sT.forEach((t=>{null!==t.parentElement||e||(e=t)})),e&&sT.splice(sT.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),cT(this.mediaStreamTrack,e);const n=e.srcObject.getTracks(),i=n.some((e=>"audio"===e.kind));return e.play().then((()=>{this.emit(i?VS.AudioPlaybackStarted:VS.VideoPlaybackStarted)})).catch((t=>{"NotAllowedError"===t.name?this.emit(i?VS.AudioPlaybackFailed:VS.VideoPlaybackFailed,t):"AbortError"===t.name?pC.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):pC.warn("could not playback ".concat(i?"audio":"video"),t),i&&e&&n.some((e=>"video"===e.kind))&&"NotAllowedError"===t.name&&(e.muted=!0,e.play().catch((()=>{})))})),this.emit(VS.ElementAttached,e),e}detach(e){try{if(e){dT(this.mediaStreamTrack,e);const t=this.attachedElements.indexOf(e);return t>=0&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(VS.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach((e=>{dT(this.mediaStreamTrack,e),t.push(e),this.recycleElement(e),this.emit(VS.ElementDetached,e)})),this.attachedElements=[],t}finally{0===this.attachedElements.length&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=fC(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),sT.forEach((e=>{e.parentElement||(t=!1)})),t&&sT.push(e)}}handleAppVisibilityChanged(){return bC(this,void 0,void 0,(function*(){this.isInBackground="hidden"===document.visibilityState,this.isInBackground||this.kind!==lT.Kind.Video||setTimeout((()=>this.attachedElements.forEach((e=>e.play().catch((()=>{}))))),0)}))}addAppVisibilityListener(){RT()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){RT()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function cT(e,t){let n,i;n=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream,i="audio"===e.kind?n.getAudioTracks():n.getVideoTracks(),i.includes(e)||(i.forEach((e=>{n.removeTrack(e)})),n.addTrack(e)),_T()&&t instanceof HTMLVideoElement||(t.autoplay=!0),t.muted=0===n.getAudioTracks().length,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(_T()||ET())&&t instanceof HTMLVideoElement&&setTimeout((()=>{t.srcObject=n,t.play().catch((()=>{}))}),0))}function dT(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}!function(e){let t,n,i;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(n=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(i=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case t.Audio:return yk.AUDIO;case t.Video:return yk.VIDEO;default:return yk.DATA}},e.kindFromProto=function(e){switch(e){case yk.AUDIO:return t.Audio;case yk.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case n.Camera:return xk.CAMERA;case n.Microphone:return xk.MICROPHONE;case n.ScreenShare:return xk.SCREEN_SHARE;case n.ScreenShareAudio:return xk.SCREEN_SHARE_AUDIO;default:return xk.UNKNOWN}},e.sourceFromProto=function(e){switch(e){case xk.CAMERA:return n.Camera;case xk.MICROPHONE:return n.Microphone;case xk.SCREEN_SHARE:return n.ScreenShare;case xk.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}},e.streamStateFromProto=function(e){switch(e){case fw.ACTIVE:return i.Active;case fw.PAUSED:return i.Paused;default:return i.Unknown}}}(lT||(lT={}));class uT{constructor(e,t,n,i,r){if("object"===typeof e)this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else{if(void 0===t||void 0===n)throw new TypeError("Unsupported options: provide at least width, height and maxBitrate");this.width=e,this.height=t,this.aspectRatio=e/t,this.encoding={maxBitrate:n,maxFramerate:i,priority:r}}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const hT=["vp8","h264"],pT=["vp8","h264","vp9","av1"];function fT(e){return!!hT.find((t=>t===e))}var mT,gT;!function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"}(mT||(mT={})),function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}}(gT||(gT={}));const vT={h90:new uT(160,90,9e4,20),h180:new uT(320,180,16e4,20),h216:new uT(384,216,18e4,20),h360:new uT(640,360,45e4,20),h540:new uT(960,540,8e5,25),h720:new uT(1280,720,17e5,30),h1080:new uT(1920,1080,3e6,30),h1440:new uT(2560,1440,5e6,30),h2160:new uT(3840,2160,8e6,30)},bT={h120:new uT(160,120,7e4,20),h180:new uT(240,180,125e3,20),h240:new uT(320,240,14e4,20),h360:new uT(480,360,33e4,20),h480:new uT(640,480,5e5,20),h540:new uT(720,540,6e5,25),h720:new uT(960,720,13e5,30),h1080:new uT(1440,1080,23e5,30),h1440:new uT(1920,1440,38e5,30)},yT={h360fps3:new uT(640,360,2e5,3,"medium"),h360fps15:new uT(640,360,4e5,15,"medium"),h720fps5:new uT(1280,720,8e5,5,"medium"),h720fps15:new uT(1280,720,15e5,15,"medium"),h720fps30:new uT(1280,720,2e6,30,"medium"),h1080fps15:new uT(1920,1080,25e5,15,"medium"),h1080fps30:new uT(1920,1080,5e6,30,"medium"),original:new uT(0,0,7e6,30,"medium")},xT="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function kT(e){return bC(this,void 0,void 0,(function*(){return new Promise((t=>oT.setTimeout(t,e)))}))}function wT(){return"addTransceiver"in RTCPeerConnection.prototype}function CT(){return"addTrack"in RTCPeerConnection.prototype}function ST(e){return"av1"===e||"vp9"===e}function TT(e){return!!document&&(e||(e=document.createElement("audio")),"setSinkId"in e)}function ET(){var e;return"Firefox"===(null===(e=tT())||void 0===e?void 0:e.name)}function _T(){var e;return"Safari"===(null===(e=tT())||void 0===e?void 0:e.name)}function IT(){const e=tT();return"Safari"===(null===e||void 0===e?void 0:e.name)&&e.version.startsWith("17.")}function PT(){var e,t;return!!RT()&&(null!==(t=null===(e=navigator.userAgentData)||void 0===e?void 0:e.mobile)&&void 0!==t?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent))}function RT(){return"undefined"!==typeof document}function AT(){return"ReactNative"==navigator.product}function MT(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function OT(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function NT(){if(!AT())return;let e=OT();return e?e.platform:void 0}function jT(){if(RT())return window.devicePixelRatio;if(AT()){let e=OT();if(e)return e.devicePixelRatio}return 1}function DT(e,t){const n=e.split("."),i=t.split("."),r=Math.min(n.length,i.length);for(let o=0;o<r;++o){const e=parseInt(n[o],10),t=parseInt(i[o],10);if(e>t)return 1;if(e<t)return-1;if(o===r-1&&e===t)return 0}return""===e&&""!==t?-1:""===t?1:n.length==i.length?0:n.length<i.length?-1:1}function LT(e){for(const t of e)t.target.handleResize(t)}function FT(e){for(const t of e)t.target.handleVisibilityChanged(t)}let BT=null;const UT=()=>(BT||(BT=new ResizeObserver(LT)),BT);let $T=null;const zT=()=>($T||($T=new IntersectionObserver(FT,{root:null,rootMargin:"0px"})),$T);let VT;function HT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=document.createElement("canvas");r.width=e,r.height=t;const o=r.getContext("2d");null===o||void 0===o||o.fillRect(0,0,r.width,r.height),i&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,2*Math.PI,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=r.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}function WT(){if(!VT){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const i=e.createMediaStreamDestination();if(t.connect(n),n.connect(i),t.start(),[VT]=i.stream.getAudioTracks(),!VT)throw Error("Could not get empty media stream audio track");VT.enabled=!1}return VT.clone()}class qT{constructor(e,t){this.onFinally=t,this.promise=new Promise(((t,n)=>bC(this,void 0,void 0,(function*(){this.resolve=t,this.reject=n,e&&(yield e(t,n))})))).finally((()=>{var e;return null===(e=this.onFinally)||void 0===e?void 0:e.call(this)}))}}function KT(e){if("string"===typeof e||"number"===typeof e)return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function GT(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function YT(e){switch(e.reason){case LS.LeaveRequest:return e.context;case LS.Cancelled:return Sk.CLIENT_INITIATED;case LS.NotAllowed:return Sk.USER_REJECTED;case LS.ServerUnreachable:return Sk.JOIN_FAILURE;default:return Sk.UNKNOWN_REASON}}function QT(e){return void 0!==e?Number(e):void 0}function XT(e){return void 0!==e?BigInt(e):void 0}function JT(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function ZT(e){return!!e&&e.kind==lT.Kind.Audio}function eE(e){return!!e&&e.kind==lT.Kind.Video}function tE(e){return JT(e)&&eE(e)}function nE(e){return JT(e)&&ZT(e)}function iE(e){return!!e&&!e.isLocal}function rE(e){return!!e&&!e.isLocal}function oE(e){return iE(e)&&eE(e)}function sE(e,t,n){var i,r,o,s;const{optionsWithoutProcessor:a,audioProcessor:l,videoProcessor:c}=vE(null!==e&&void 0!==e?e:{}),d=null===t||void 0===t?void 0:t.processor,u=null===n||void 0===n?void 0:n.processor,h=null!==a&&void 0!==a?a:{};return!0===h.audio&&(h.audio={}),!0===h.video&&(h.video={}),h.audio&&(aE(h.audio,t),null!==(i=(o=h.audio).deviceId)&&void 0!==i||(o.deviceId={ideal:"default"}),(l||d)&&(h.audio.processor=null!==l&&void 0!==l?l:d)),h.video&&(aE(h.video,n),null!==(r=(s=h.video).deviceId)&&void 0!==r||(s.deviceId={ideal:"default"}),(c||u)&&(h.video.processor=null!==c&&void 0!==c?c:u)),h}function aE(e,t){return Object.keys(t).forEach((n=>{void 0===e[n]&&(e[n]=t[n])})),e}function lE(e){var t,n,i,r;const o={};if(e.video)if("object"===typeof e.video){const n={},r=n,s=e.video;Object.keys(s).forEach((e=>{if("resolution"===e)aE(r,s.resolution);else r[e]=s[e]})),o.video=n,null!==(t=(i=o.video).deviceId)&&void 0!==t||(i.deviceId={ideal:"default"})}else o.video=!!e.video&&{deviceId:{ideal:"default"}};else o.video=!1;return e.audio?"object"===typeof e.audio?(o.audio=e.audio,null!==(n=(r=o.audio).deviceId)&&void 0!==n||(r.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function cE(e){return bC(this,arguments,void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function*(){const n=dE();if(n){const i=n.createAnalyser();i.fftSize=2048;const r=i.frequencyBinCount,o=new Uint8Array(r);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield kT(t),i.getByteTimeDomainData(o);const s=o.some((e=>128!==e&&0!==e));return n.close(),!s}return!1}()}))}function dE(){var e;const t="undefined"!==typeof window&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if("suspended"===n.state&&"undefined"!==typeof window&&(null===(e=window.document)||void 0===e?void 0:e.body)){const e=()=>bC(this,void 0,void 0,(function*(){var t;try{"suspended"===n.state&&(yield n.resume())}catch(K$){console.warn("Error trying to auto-resume audio context",K$)}null===(t=window.document.body)||void 0===t||t.removeEventListener("click",e)}));window.document.body.addEventListener("click",e)}return n}}function uE(e){return"audioinput"===e?lT.Source.Microphone:"videoinput"===e?lT.Source.Camera:lT.Source.Unknown}function hE(e){return e===lT.Source.Microphone?"audioinput":e===lT.Source.Camera?"videoinput":void 0}function pE(e){var t,n;let i=null===(t=e.video)||void 0===t||t;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(i="boolean"===typeof i?{}:i,i=_T()?Object.assign(Object.assign({},i),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):Object.assign(Object.assign({},i),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:null!==(n=e.audio)&&void 0!==n&&n,video:i,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function fE(e){return e.split("/")[1].toLowerCase()}function mE(e){const t=[];return e.forEach((e=>{void 0!==e.track&&t.push(new Sw({cid:e.track.mediaStreamID,track:e.trackInfo}))})),t}function gE(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?gE(e.track):{})}}function vE(e){const t=Object.assign({},e);let n,i;return"object"===typeof t.audio&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),"object"===typeof t.video&&t.video.processor&&(i=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:JS(t)}}class bE extends CC.EventEmitter{constructor(e){super(),this.onWorkerMessage=e=>{var t,n;const{kind:i,data:r}=e.data;switch(i){case"error":pC.error(r.error.message),this.emit(MS.EncryptionError,r.error);break;case"initAck":r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)}));break;case"enable":if(r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)})),this.encryptionEnabled!==r.enabled&&r.participantIdentity===(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))this.emit(MS.ParticipantEncryptionStatusChanged,r.enabled,this.room.localParticipant),this.encryptionEnabled=r.enabled;else if(r.participantIdentity){const e=null===(n=this.room)||void 0===n?void 0:n.getParticipantByIdentity(r.participantIdentity);if(!e)throw TypeError("couldn't set encryption status, participant not found".concat(r.participantIdentity));this.emit(MS.ParticipantEncryptionStatusChanged,r.enabled,e)}break;case"ratchetKey":this.keyProvider.emit(RS.KeyRatcheted,r.material,r.keyIndex)}},this.onWorkerError=e=>{pC.error("e2ee worker encountered an error:",{error:e.error}),this.emit(MS.EncryptionError,e.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!NS())throw new WS("tried to setup end-to-end encryption on an unsupported browser");if(pC.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const t={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:mC.getLevel()}};this.worker&&(pC.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(t))}}setParticipantCryptorEnabled(e,t){pC.debug("set e2ee to ".concat(e," for participant ").concat(t)),this.postEnable(e,t)}setSifTrailer(e){e&&0!==e.length?this.postSifTrailer(e):pC.warn("ignoring server sent trailer as it's empty")}setupEngine(e){e.on(zS.RTPVideoMapUpdate,(e=>{this.postRTPMap(e)}))}setupEventListeners(e,t){e.on(US.TrackPublished,((e,t)=>this.setParticipantCryptorEnabled(e.trackInfo.encryption!==jk.NONE,t.identity))),e.on(US.ConnectionStateChanged,(t=>{t===J_.Connected&&e.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{this.setParticipantCryptorEnabled(t.trackInfo.encryption!==jk.NONE,e.identity)}))}))})).on(US.TrackUnsubscribed,((e,t,n)=>{var i;const r={kind:"removeTransform",data:{participantIdentity:n.identity,trackId:e.mediaStreamID}};null===(i=this.worker)||void 0===i||i.postMessage(r)})).on(US.TrackSubscribed,((e,t,n)=>{this.setupE2EEReceiver(e,n.identity,t.trackInfo)})).on(US.SignalConnected,(()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");t.getKeys().forEach((e=>{this.postKey(e)})),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)})),e.localParticipant.on($S.LocalTrackPublished,(e=>bC(this,void 0,void 0,(function*(){this.setupE2EESender(e.track,e.track.sender)})))),t.on(RS.SetKey,(e=>this.postKey(e))).on(RS.RatchetRequest,((e,t)=>this.postRatchetRequest(e,t)))}postRatchetRequest(e,t){if(!this.worker)throw Error("could not ratchet key, worker is missing");const n={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:t}};this.worker.postMessage(n)}postKey(e){let{key:t,participantIdentity:n,keyIndex:i}=e;var r;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:n,isPublisher:n===(null===(r=this.room)||void 0===r?void 0:r.localParticipant.identity),key:t,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,t){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");{const n={kind:"enable",data:{enabled:e,participantIdentity:t}};this.worker.postMessage(n)}}postRTPMap(e){var t;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const n={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(n)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const t={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(t)}setupE2EEReceiver(e,t,n){if(e.receiver){if(!(null===n||void 0===n?void 0:n.mimeType)||""===n.mimeType)throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,t,"video"===e.kind?fE(n.mimeType):void 0)}}setupE2EESender(e,t){JT(e)&&t?this.handleSender(t,e.mediaStreamID,void 0):t||pC.warn("early return because sender is not ready")}handleReceiver(e,t,n,i){return bC(this,void 0,void 0,(function*(){if(this.worker){if(jS()){const r={kind:"decode",participantIdentity:n,trackId:t,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,r)}else{if(PS in e&&i){const e={kind:"updateCodec",data:{trackId:t,codec:i,participantIdentity:n}};return void this.worker.postMessage(e)}let r=e.writableStream,o=e.readableStream;if(!r||!o){const t=e.createEncodedStreams();e.writableStream=t.writable,r=t.writable,e.readableStream=t.readable,o=t.readable}const s={kind:"decode",data:{readableStream:o,writableStream:r,trackId:t,codec:i,participantIdentity:n}};this.worker.postMessage(s,[o,r])}e[PS]=!0}}))}handleSender(e,t,n){var i;if(!(PS in e)&&this.worker){if(!(null===(i=this.room)||void 0===i?void 0:i.localParticipant.identity)||""===this.room.localParticipant.identity)throw TypeError("local identity needs to be known in order to set up encrypted sender");if(jS()){pC.info("initialize script transform");const i={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:t,codec:n};e.transform=new RTCRtpScriptTransform(this.worker,i)}else{pC.info("initialize encoded streams");const i=e.createEncodedStreams(),r={kind:"encode",data:{readableStream:i.readable,writableStream:i.writable,codec:n,trackId:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r,[i.readable,i.writable])}e[PS]=!0}}}const yE="default";class xE{constructor(){this._previousDevices=[]}static getInstance(){return void 0===this.instance&&(this.instance=new xE),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;if((null===(i=xE.userMediaPromiseMap)||void 0===i?void 0:i.size)>0){pC.debug("awaiting getUserMedia promise");try{e?yield xE.userMediaPromiseMap.get(e):yield Promise.all(xE.userMediaPromiseMap.values())}catch(K$){pC.warn("error waiting for media permissons")}}let r=yield navigator.mediaDevices.enumerateDevices();if(n&&(!_T()||!t.hasDeviceInUse(e))){if(0===r.filter((t=>t.kind===e)).length||r.some((t=>{const n=""===t.label,i=!e||t.kind===e;return n&&i}))){const t={video:"audioinput"!==e&&"audiooutput"!==e,audio:"videoinput"!==e&&{deviceId:{ideal:"default"}}},n=yield navigator.mediaDevices.getUserMedia(t);r=yield navigator.mediaDevices.enumerateDevices(),n.getTracks().forEach((e=>{e.stop()}))}}return t._previousDevices=r,e&&(r=r.filter((t=>t.kind===e))),r}()}))}normalizeDeviceId(e,t,n){return bC(this,void 0,void 0,(function*(){if(t!==yE)return t;const i=yield this.getDevices(e),r=i.find((e=>e.deviceId===yE));if(!r)return void pC.warn("could not reliably determine default device");const o=i.find((e=>e.deviceId!==yE&&e.groupId===(null!==n&&void 0!==n?n:r.groupId)));if(o)return null===o||void 0===o?void 0:o.deviceId;pC.warn("could not reliably determine default device")}))}hasDeviceInUse(e){return e?xE.userMediaPromiseMap.has(e):xE.userMediaPromiseMap.size>0}}var kE;xE.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],xE.userMediaPromiseMap=new Map,function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"}(kE||(kE={}));class wE{constructor(){this.pendingTasks=new Map,this.taskMutex=new Py,this.nextTaskIndex=0}run(e){return bC(this,void 0,void 0,(function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:kE.WAITING};this.pendingTasks.set(t.id,t);const n=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=kE.RUNNING,yield e()}finally{t.status=kE.COMPLETED,this.pendingTasks.delete(t.id),n()}}))}flush(){return bC(this,void 0,void 0,(function*(){return this.run((()=>bC(this,void 0,void 0,(function*(){}))))}))}snapshot(){return Array.from(this.pendingTasks.values())}}function CE(e,t){return e.pathname="".concat(function(e){return e.endsWith("/")?e:"".concat(e,"/")}(e.pathname)).concat(t),e.toString()}const SE=["syncState","trickle","offer","answer","simulate","leave"];var TE;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"}(TE||(TE={}));class EE{get currentState(){return this.state}get isDisconnected(){return this.state===TE.DISCONNECTING||this.state===TE.DISCONNECTED}get isEstablishingConnection(){return this.state===TE.CONNECTING||this.state===TE.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this.rtt=0,this.state=TE.DISCONNECTED,this.log=pC,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=fC(null!==(n=t.loggerName)&&void 0!==n?n:uC.Signal),this.loggerContextCb=t.loggerContextCb,this.useJSON=e,this.requestQueue=new wE,this.queuedRequests=[],this.closingLock=new Py,this.connectionLock=new Py,this.state=TE.DISCONNECTED}get logContext(){var e,t;return null!==(t=null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this))&&void 0!==t?t:{}}join(e,t,n,i){return bC(this,void 0,void 0,(function*(){this.state=TE.CONNECTING,this.options=n;return yield this.connect(e,t,n,i)}))}reconnect(e,t,n,i){return bC(this,void 0,void 0,(function*(){if(!this.options)return void this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);this.state=TE.RECONNECTING,this.clearPingInterval();return yield this.connect(e,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:n,reconnectReason:i}))}))}connect(e,t,n,i){this.connectOptions=n;const r=function(e,t,n){var i;const r=new URLSearchParams;r.set("access_token",e),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid));r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",AT()?"reactnative":"js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel);t.os&&r.set("os",t.os);t.osVersion&&r.set("os_version",t.osVersion);t.browser&&r.set("browser",t.browser);t.browserVersion&&r.set("browser_version",t.browserVersion);n.adaptiveStream&&r.set("adaptive_stream","1");n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString());(null===(i=navigator.connection)||void 0===i?void 0:i.type)&&r.set("network",navigator.connection.type);return r}(t,function(){var e;const t=new tw({sdk:nw.JS,protocol:15,version:"2.11.4"});return AT()&&(t.os=null!==(e=NT())&&void 0!==e?e:""),t}(),n),o=function(e,t){const n=new URL(function(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}(e));return t.forEach(((e,t)=>{n.searchParams.set(t,e)})),CE(n,"rtc")}(e,r),s=CE(new URL(GT(o)),"validate");return new Promise(((e,t)=>bC(this,void 0,void 0,(function*(){const r=yield this.connectionLock.lock();try{const r=()=>bC(this,void 0,void 0,(function*(){this.close(),clearTimeout(a),t(new HS("room connection has been cancelled (signal)",LS.Cancelled))})),a=setTimeout((()=>{this.close(),t(new HS("room connection has timed out (signal)",LS.ServerUnreachable))}),n.websocketTimeout);(null===i||void 0===i?void 0:i.aborted)&&r(),null===i||void 0===i||i.addEventListener("abort",r);const l=new URL(o);l.searchParams.has("access_token")&&l.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(l),Object.assign({reconnect:n.reconnect,reconnectReason:n.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(a)},this.ws.onerror=e=>bC(this,void 0,void 0,(function*(){if(this.state===TE.CONNECTED)this.handleWSError(e);else{this.state=TE.DISCONNECTED,clearTimeout(a);try{const n=yield fetch(s);if(n.status.toFixed(0).startsWith("4")){const e=yield n.text();t(new HS(e,LS.NotAllowed,n.status))}else t(new HS("Encountered unknown websocket error during connection: ".concat(e.toString()),LS.InternalError,n.status))}catch(K$){t(new HS(K$ instanceof Error?K$.message:"server was not reachable",LS.ServerUnreachable))}}})),this.ws.onmessage=o=>bC(this,void 0,void 0,(function*(){var s,a,l;let c;if("string"===typeof o.data){const e=JSON.parse(o.data);c=vw.fromJson(e,{ignoreUnknownFields:!0})}else{if(!(o.data instanceof ArrayBuffer))return void this.log.error("could not decode websocket message: ".concat(typeof o.data),this.logContext);c=vw.fromBinary(new Uint8Array(o.data))}if(this.state!==TE.CONNECTED){let o=!1;if("join"===(null===(s=c.message)||void 0===s?void 0:s.case)?(this.state=TE.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.pingTimeoutDuration=c.message.value.pingTimeout,this.pingIntervalDuration=c.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),e(c.message.value)):this.state===TE.RECONNECTING&&"leave"!==c.message.case?(this.state=TE.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.startPingInterval(),"reconnect"===(null===(a=c.message)||void 0===a?void 0:a.case)?e(c.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),e(void 0),o=!0)):this.isEstablishingConnection&&"leave"===c.message.case?t(new HS("Received leave request while trying to (re)connect",LS.LeaveRequest,void 0,c.message.value.reason)):n.reconnect||t(new HS("did not receive join response, got ".concat(null===(l=c.message)||void 0===l?void 0:l.case," instead"),LS.InternalError)),!o)return}this.signalLatency&&(yield kT(this.signalLatency)),this.handleSignalResponse(c)})),this.ws.onclose=e=>{this.isEstablishingConnection&&t(new HS("Websocket got closed during a (re)connection attempt",LS.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:e.reason,code:e.code,wasClean:e.wasClean,state:this.state})),this.handleOnClose(e.reason)}}finally{r()}}))))}close(){return bC(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){const n=yield e.closingLock.lock();try{if(e.clearPingInterval(),t&&(e.state=TE.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const t=new Promise((t=>{e.ws?e.ws.onclose=()=>{t()}:t()}));e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([t,kT(250)])),e.ws=void 0}}finally{t&&(e.state=TE.DISCONNECTED),n()}}()}))}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:IE(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:IE(e)})}sendIceCandidate(e,t){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new xw({candidateInit:JSON.stringify(e),target:t})})}sendMuteTrack(e,t){return this.sendRequest({case:"mute",value:new kw({sid:e,muted:t})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,t){return bC(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const r=n.getNextRequestId();return yield n.sendRequest({case:"updateMetadata",value:new jw({requestId:r,metadata:e,name:t,attributes:i})}),r}()}))}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,t){return this.sendRequest({case:"updateLayers",value:new Nw({trackSid:e,layers:t})})}sendUpdateSubscriptionPermissions(e,t){return this.sendRequest({case:"subscriptionPermission",value:new Kw({allParticipants:e,trackPermissions:t})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:nx.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Jw({timestamp:nx.parse(Date.now()),rtt:nx.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,t){return this.sendRequest({case:"updateAudioTrack",value:new Rw({trackSid:e,features:t})})}sendLeave(){return this.sendRequest({case:"leave",value:new Mw({reason:Sk.CLIENT_INITIATED,action:Ow.DISCONNECT})})}sendRequest(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const i=!n&&!function(e){const t=SE.indexOf(e.case)>=0;return pC.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}(e);if(i&&t.state===TE.RECONNECTING)return void t.queuedRequests.push((()=>bC(t,void 0,void 0,(function*(){yield this.sendRequest(e,!0)}))));if(n||(yield t.requestQueue.flush()),t.signalLatency&&(yield kT(t.signalLatency)),!t.ws||t.ws.readyState!==t.ws.OPEN)return void t.log.error("cannot send signal request before connected, type: ".concat(null===e||void 0===e?void 0:e.case),t.logContext);const r=new gw({message:e});try{t.useJSON?t.ws.send(r.toJsonString()):t.ws.send(r.toBinary())}catch(K$){t.log.error("error sending signal message",Object.assign(Object.assign({},t.logContext),{error:K$}))}}()}))}handleSignalResponse(e){var t,n;const i=e.message;if(void 0==i)return void this.log.debug("received unsupported message",this.logContext);let r=!1;if("answer"===i.case){const e=_E(i.value);this.onAnswer&&this.onAnswer(e)}else if("offer"===i.case){const e=_E(i.value);this.onOffer&&this.onOffer(e)}else if("trickle"===i.case){const e=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(e,i.value.target)}else"update"===i.case?this.onParticipantUpdate&&this.onParticipantUpdate(null!==(t=i.value.participants)&&void 0!==t?t:[]):"trackPublished"===i.case?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):"speakersChanged"===i.case?this.onSpeakersChanged&&this.onSpeakersChanged(null!==(n=i.value.speakers)&&void 0!==n?n:[]):"leave"===i.case?this.onLeave&&this.onLeave(i.value):"mute"===i.case?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):"roomUpdate"===i.case?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):"connectionQuality"===i.case?this.onConnectionQuality&&this.onConnectionQuality(i.value):"streamStateUpdate"===i.case?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):"subscribedQualityUpdate"===i.case?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):"subscriptionPermissionUpdate"===i.case?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):"refreshToken"===i.case?this.onTokenRefresh&&this.onTokenRefresh(i.value):"trackUnpublished"===i.case?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):"subscriptionResponse"===i.case?this.onSubscriptionError&&this.onSubscriptionError(i.value):"pong"===i.case||("pongResp"===i.case?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),r=!0):"requestResponse"===i.case?this.onRequestResponse&&this.onRequestResponse(i.value):"trackSubscribed"===i.case?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));r||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return bC(this,void 0,void 0,(function*(){if(this.state===TE.DISCONNECTED)return;const t=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),t&&t(e)}))}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){this.clearPingTimeout(),this.pingTimeoutDuration?this.pingTimeout=oT.setTimeout((()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-1e3*this.pingTimeoutDuration).toUTCString()),this.logContext),this.handleOnClose("ping timeout")}),1e3*this.pingTimeoutDuration):this.log.warn("ping timeout duration not set",this.logContext)}clearPingTimeout(){this.pingTimeout&&oT.clearTimeout(this.pingTimeout)}startPingInterval(){this.clearPingInterval(),this.resetPingTimeout(),this.pingIntervalDuration?(this.log.debug("start ping interval",this.logContext),this.pingInterval=oT.setInterval((()=>{this.sendPing()}),1e3*this.pingIntervalDuration)):this.log.warn("ping interval duration not set",this.logContext)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&oT.clearInterval(this.pingInterval)}}function _E(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function IE(e){return new Ew({sdp:e.sdp,type:e.type})}var PE,RE,AE,ME,OE,NE={},jE={},DE={exports:{}};function LE(){if(PE)return DE.exports;PE=1;var e=DE.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach((function(t){e[t].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),DE.exports}function FE(){return RE||(RE=1,function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,i){var r=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:r&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:r?n[e.name]:n;!function(e,n,i,r){if(r&&!i)n[r]=t(e[1]);else for(var o=0;o<i.length;o+=1)null!=e[o+1]&&(n[i[o]]=t(e[o+1]))}(i.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},i=LE(),r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],s=t;return e.split(/(\r\n|\r|\n)/).filter(r).forEach((function(e){var t=e[0],r=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),s=o[o.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var l=i[t][a];if(l.reg.test(r))return n(l,s,r)}})),t.media=o,t};var o=function(e,n){var i=n.split(/=(.+)/,2);return 2===i.length?e[i[0]]=t(i[1]):1===i.length&&n.length>1&&(e[i[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],i=e.split(" ").map(t),r=0;r<i.length;r+=3)n.push({component:i[r],ip:i[r+1],port:i[r+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,i=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),i=!0),{scid:n,paused:i}}))}))}}(jE)),jE}function BE(){if(ME)return AE;ME=1;var e=LE(),t=/%[sdv%]/g,n=function(e){var n=1,i=arguments,r=i.length;return e.replace(t,(function(e){if(n>=r)return e;var t=i[n];switch(n+=1,e){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}}))},i=function(e,t,i){var r=[e+"="+(t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var s=t.names[o];t.name?r.push(i[t.name][s]):r.push(i[t.names[o]])}else r.push(i[t.name]);return n.apply(null,r)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return AE=function(t,n){n=n||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var s=n.outerOrder||r,a=n.innerOrder||o,l=[];return s.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?l.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){l.push(i(n,e,t))}))}))})),t.media.forEach((function(t){l.push(i("m",e.m[0],t)),a.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?l.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){l.push(i(n,e,t))}))}))}))})),l.join("\r\n")+"\r\n"},AE}var UE=function(){if(OE)return NE;OE=1;var e=FE(),t=BE(),n=LE();return NE.grammar=n,NE.write=t,NE.parse=e.parse,NE.parseParams=e.parseParams,NE.parseFmtpConfig=e.parseFmtpConfig,NE.parsePayloads=e.parsePayloads,NE.parseRemoteCandidates=e.parseRemoteCandidates,NE.parseImageAttributes=e.parseImageAttributes,NE.parseSimulcastStreamList=e.parseSimulcastStreamList,NE}();function $E(e,t,n){var i,r,o;void 0===t&&(t=50),void 0===n&&(n={});var s=null!=(i=n.isImmediate)&&i,a=null!=(r=n.callback)&&r,l=n.maxWait,c=Date.now(),d=[];function u(){if(void 0!==l){var e=Date.now()-c;if(e+t>=l)return l-e}return t}var h=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,r){var l=s&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,c=Date.now(),!s){var i=e.apply(n,t);a&&a(i),d.forEach((function(e){return(0,e.resolve)(i)})),d=[]}}),u()),l){var h=e.apply(n,t);return a&&a(h),i(h)}d.push({resolve:i,reject:r})}))};return h.cancel=function(e){void 0!==o&&clearTimeout(o),d.forEach((function(t){return(0,t.reject)(e)})),d=[]},h}const zE="negotiationStarted",VE="negotiationComplete",HE="rtpVideoPayloadTypes";class WE extends CC.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;super(),this.log=pC,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=$E((e=>bC(this,void 0,void 0,(function*(){this.emit(zE);try{yield this.createAndSendOffer()}catch(K$){if(!e)throw K$;e(K$)}}))),20),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=fC(null!==(n=t.loggerName)&&void 0!==n?n:uC.PCTransport),this.loggerOptions=t,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=e=>{var t;e.candidate&&(null===(t=this.onIceCandidate)||void 0===t||t.call(this,e.candidate))},e.onicecandidateerror=e=>{var t;null===(t=this.onIceCandidateError)||void 0===t||t.call(this,e)},e.oniceconnectionstatechange=()=>{var t;null===(t=this.onIceConnectionStateChange)||void 0===t||t.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var t;null===(t=this.onSignalingStatechange)||void 0===t||t.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var t;null===(t=this.onConnectionStateChange)||void 0===t||t.call(this,e.connectionState)},e.ondatachannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},e.ontrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},e}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}get isICEConnected(){return null!==this._pc&&("connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState)}addIceCandidate(e){return bC(this,void 0,void 0,(function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)}))}setRemoteDescription(e){return bC(this,void 0,void 0,(function*(){var t;let n;if("offer"===e.type){let{stereoMids:t,nackMids:n}=function(e){var t;const n=[],i=[],r=UE.parse(null!==(t=e.sdp)&&void 0!==t?t:"");let o=0;return r.media.forEach((e=>{var t;"audio"===e.type&&(e.rtp.some((e=>"opus"===e.codec&&(o=e.payload,!0))),(null===(t=e.rtcpFb)||void 0===t?void 0:t.some((e=>e.payload===o&&"nack"===e.type)))&&i.push(e.mid),e.fmtp.some((t=>t.payload===o&&(t.config.includes("sprop-stereo=1")&&n.push(e.mid),!0))))})),{stereoMids:n,nackMids:i}}(e);this.remoteStereoMids=t,this.remoteNackMids=n}else if("answer"===e.type){const i=UE.parse(null!==(t=e.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{"audio"===e.type&&this.trackBitrates.some((t=>{if(!t.transceiver||e.mid!=t.transceiver.mid)return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;let i=!1;for(const r of e.fmtp)if(r.payload===n){r.config=r.config.split(";").filter((e=>!e.includes("maxaveragebitrate"))).join(";"),t.maxbr>0&&(r.config+=";maxaveragebitrate=".concat(1e3*t.maxbr)),i=!0;break}return i||t.maxbr>0&&e.fmtp.push({payload:n,config:"maxaveragebitrate=".concat(1e3*t.maxbr)}),!0}))})),n=UE.write(i)}if(yield this.setMungedSDP(e,n,!0),this.pendingCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate)this.renegotiate=!1,yield this.createAndSendOffer();else if("answer"===e.type&&(this.emit(VE),e.sdp)){UE.parse(e.sdp).media.forEach((e=>{"video"===e.type&&this.emit(HE,e.rtp)}))}}))}createAndSendOffer(e){return bC(this,void 0,void 0,(function*(){var t;if(void 0===this.onOffer)return;if((null===e||void 0===e?void 0:e.iceRestart)&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&"have-local-offer"===this._pc.signalingState){const t=this._pc.remoteDescription;if(!(null===e||void 0===e?void 0:e.iceRestart)||!t)return void(this.renegotiate=!0);yield this._pc.setRemoteDescription(t)}else if(!this._pc||"closed"===this._pc.signalingState)return void this.log.warn("could not createOffer with closed peer connection",this.logContext);this.log.debug("starting to negotiate",this.logContext);const n=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:n.sdp},this.logContext));const i=UE.parse(null!==(t=n.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{KE(e),"audio"===e.type?qE(e,[],[]):"video"===e.type&&this.trackBitrates.some((t=>{if(!e.msid||!t.cid||!e.msid.includes(t.cid))return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;if(ST(t.codec)&&this.ensureVideoDDExtensionForSVC(e,i),"av1"!==t.codec)return!0;const r=Math.round(.7*t.maxbr);for(const i of e.fmtp)if(i.payload===n){i.config.includes("x-google-start-bitrate")||(i.config+=";x-google-start-bitrate=".concat(r));break}return!0}))})),yield this.setMungedSDP(n,UE.write(i)),this.onOffer(n)}))}createAndSetAnswer(){return bC(this,void 0,void 0,(function*(){var e;const t=yield this.pc.createAnswer(),n=UE.parse(null!==(e=t.sdp)&&void 0!==e?e:"");return n.media.forEach((e=>{KE(e),"audio"===e.type&&qE(e,this.remoteStereoMids,this.remoteNackMids)})),yield this.setMungedSDP(t,UE.write(n)),t}))}createDataChannel(e,t){return this.pc.createDataChannel(e,t)}addTransceiver(e,t){return this.pc.addTransceiver(e,t)}addTrack(e){if(!this._pc)throw new GS("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var t;if(!this._pc)throw new GS("PC closed, cannot configure");return null===(t=this._pc)||void 0===t?void 0:t.setConfiguration(e)}canRemoveTrack(){var e;return!!(null===(e=this._pc)||void 0===e?void 0:e.removeTrack)}removeTrack(e){var t;return null===(t=this._pc)||void 0===t?void 0:t.removeTrack(e)}getConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.connectionState)&&void 0!==t?t:"closed"}getICEConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.iceConnectionState)&&void 0!==t?t:"closed"}getSignallingState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.signalingState)&&void 0!==t?t:"closed"}getTransceivers(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getTransceivers())&&void 0!==t?t:[]}getSenders(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getSenders())&&void 0!==t?t:[]}getLocalDescription(){var e;return null===(e=this._pc)||void 0===e?void 0:e.localDescription}getRemoteDescription(){var e;return null===(e=this.pc)||void 0===e?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return bC(this,void 0,void 0,(function*(){var e;if(!this._pc)return;let t="";const n=new Map,i=new Map;if((yield this._pc.getStats()).forEach((e=>{switch(e.type){case"transport":t=e.selectedCandidatePairId;break;case"candidate-pair":""===t&&e.selected&&(t=e.id),n.set(e.id,e);break;case"remote-candidate":i.set(e.id,"".concat(e.address,":").concat(e.port))}})),""===t)return;const r=null===(e=n.get(t))||void 0===e?void 0:e.remoteCandidateId;return void 0!==r?i.get(r):void 0}))}setMungedSDP(e,t,n){return bC(this,void 0,void 0,(function*(){if(t){const i=e.sdp;e.sdp=t;try{return this.log.debug("setting munged ".concat(n?"remote":"local"," description"),this.logContext),void(n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e))}catch(K$){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:K$,sdp:t})),e.sdp=i}}try{n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(K$){let i="unknown error";K$ instanceof Error?i=K$.message:"string"===typeof K$&&(i=K$);const r={error:i,sdp:e.sdp};throw!n&&this.pc.remoteDescription&&(r.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:r})),new YS(i)}}))}ensureVideoDDExtensionForSVC(e,t){var n,i;if(!(null===(n=e.ext)||void 0===n?void 0:n.some((e=>e.uri===xT)))){if(0===this.ddExtID){let e=0;t.media.forEach((t=>{var n;"video"===t.type&&(null===(n=t.ext)||void 0===n||n.forEach((t=>{t.value>e&&(e=t.value)})))})),this.ddExtID=e+1}null===(i=e.ext)||void 0===i||i.push({value:this.ddExtID,uri:xT})}}}function qE(e,t,n){let i=0;e.rtp.some((e=>"opus"===e.codec&&(i=e.payload,!0))),i>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some((e=>e.payload===i&&"nack"===e.type))&&e.rtcpFb.push({payload:i,type:"nack"}),t.includes(e.mid)&&e.fmtp.some((e=>e.payload===i&&(e.config.includes("stereo=1")||(e.config+=";stereo=1"),!0))))}function KE(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(4===e.connection.version&&t||6===e.connection.version&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}const GE="vp8",YE={audioPreset:gT.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:yT.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:GE,backupCodec:!0},QE={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},XE={deviceId:{ideal:"default"},resolution:vT.h720.resolution},JE={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new class{constructor(e){this._retryDelays=void 0!==e?[...e]:vC}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+1e3*Math.random()}},disconnectOnPageLeave:!0,webAudioMix:!1},ZE={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var e_;!function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"}(e_||(e_={}));class t_{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,t,n){var i;this.peerConnectionTimeout=ZE.peerConnectionTimeout,this.log=pC,this.updateState=()=>{var e;const t=this.state,n=this.requiredTransports.map((e=>e.getConnectionState()));n.every((e=>"connected"===e))?this.state=e_.CONNECTED:n.some((e=>"failed"===e))?this.state=e_.FAILED:n.some((e=>"connecting"===e))?this.state=e_.CONNECTING:n.every((e=>"closed"===e))?this.state=e_.CLOSED:n.some((e=>"closed"===e))?this.state=e_.CLOSING:n.every((e=>"new"===e))&&(this.state=e_.NEW),t!==this.state&&(this.log.debug("pc state change: from ".concat(e_[t]," to ").concat(e_[this.state]),this.logContext),null===(e=this.onStateChange)||void 0===e||e.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=fC(null!==(i=n.loggerName)&&void 0!==i?i:uC.PCManager),this.loggerOptions=n,this.isPublisherConnectionRequired=!t,this.isSubscriberConnectionRequired=t,this.publisher=new WE(e,n),this.subscriber=new WE(e,n),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,pw.PUBLISHER)},this.subscriber.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,pw.SUBSCRIBER)},this.subscriber.onDataChannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},this.subscriber.onTrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},this.publisher.onOffer=e=>{var t;null===(t=this.onPublisherOffer)||void 0===t||t.call(this,e)},this.state=e_.NEW,this.connectionLock=new Py,this.remoteOfferLock=new Py}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}requirePublisher(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return bC(this,void 0,void 0,(function*(){if(this.publisher&&"closed"!==this.publisher.getSignallingState()){const e=this.publisher;for(const t of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(t)}catch(K$){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:K$}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()}))}triggerIceRestart(){return bC(this,void 0,void 0,(function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))}))}addIceCandidate(e,t){return bC(this,void 0,void 0,(function*(){t===pw.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)}))}createSubscriberAnswerFromOffer(e){return bC(this,void 0,void 0,(function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const t=yield this.remoteOfferLock.lock();try{yield this.subscriber.setRemoteDescription(e);return yield this.subscriber.createAndSetAnswer()}finally{t()}}))}updateConfiguration(e,t){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),t&&this.triggerIceRestart()}ensurePCTransportConnection(e,t){return bC(this,void 0,void 0,(function*(){var n;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&"connected"!==this.publisher.getConnectionState()&&"connecting"!==this.publisher.getConnectionState()&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all(null===(n=this.requiredTransports)||void 0===n?void 0:n.map((n=>this.ensureTransportConnected(n,e,t))))}finally{i()}}))}negotiate(e){return bC(this,void 0,void 0,(function*(){return new Promise(((t,n)=>bC(this,void 0,void 0,(function*(){const i=setTimeout((()=>{n("negotiation timed out")}),this.peerConnectionTimeout);e.signal.addEventListener("abort",(()=>{clearTimeout(i),n("negotiation aborted")})),this.publisher.once(zE,(()=>{e.signal.aborted||this.publisher.once(VE,(()=>{clearTimeout(i),t()}))})),yield this.publisher.negotiate((e=>{clearTimeout(i),n(e)}))}))))}))}addPublisherTransceiver(e,t){return this.publisher.addTransceiver(e,t)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,t){return this.publisher.createDataChannel(e,t)}getConnectedAddress(e){return e===pw.PUBLISHER||e===pw.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,t){return bC(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.peerConnectionTimeout;return function*(){if("connected"!==e.getConnectionState())return new Promise(((e,r)=>bC(n,void 0,void 0,(function*(){const n=()=>{this.log.warn("abort transport connection",this.logContext),oT.clearTimeout(o),r(new HS("room connection has been cancelled",LS.Cancelled))};(null===t||void 0===t?void 0:t.signal.aborted)&&n(),null===t||void 0===t||t.signal.addEventListener("abort",n);const o=oT.setTimeout((()=>{null===t||void 0===t||t.signal.removeEventListener("abort",n),r(new HS("could not establish pc connection",LS.InternalError))}),i);for(;this.state!==e_.CONNECTED;)if(yield kT(50),null===t||void 0===t?void 0:t.signal.aborted)return void r(new HS("room connection has been cancelled",LS.Cancelled));oT.clearTimeout(o),null===t||void 0===t||t.signal.removeEventListener("abort",n),e()}))))}()}))}}class n_ extends Error{constructor(e,t,n){super(t),this.code=e,this.message=r_(t,n_.MAX_MESSAGE_BYTES),this.data=n?r_(n,n_.MAX_DATA_BYTES):void 0}static fromProto(e){return new n_(e.code,e.message,e.data)}toProto(){return new Xk({code:this.code,message:this.message,data:this.data})}static builtIn(e,t){return new n_(n_.ErrorCode[e],n_.ErrorMessage[e],t)}}n_.MAX_MESSAGE_BYTES=256,n_.MAX_DATA_BYTES=15360,n_.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},n_.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};function i_(e){return(new TextEncoder).encode(e).length}function r_(e,t){if(i_(e)<=t)return e;let n=0,i=e.length;const r=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);r.encode(e.slice(0,o)).length<=t?n=o:i=o-1}return e.slice(0,n)}const o_=2e3;function s_(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),void 0===n||void 0===i||void 0===e.timestamp||void 0===t.timestamp?0:8*(n-i)*1e3/(e.timestamp-t.timestamp)}class a_ extends lT{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(e,t,arguments.length>4?arguments[4]:void 0),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch((()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext))),this.debouncedTrackMuteHandler=$E((()=>bC(this,void 0,void 0,(function*(){yield this.pauseUpstream()}))),5e3),this.handleTrackUnmuteEvent=()=>bC(this,void 0,void 0,(function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()})),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(VS.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Py,this.pauseUpstreamLock=new Py,this.processorLock=new Py,this.restartLock=new Py,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),n&&(this._constraints=n)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==lT.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();return e&&t?{width:e,height:t}:void 0}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,t;return null!==(t=null===(e=this.processor)||void 0===e?void 0:e.processedTrack)&&void 0!==t?t:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,t){return bC(this,void 0,void 0,(function*(){var n;if(e===this._mediaStreamTrack&&!t)return;let i;if(this._mediaStreamTrack&&(this.attachedElements.forEach((e=>{dT(this._mediaStreamTrack,e)})),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints()),this.processor&&e){const t=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),"unknown"===this.kind)throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(cT(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{t()}}this.sender&&"closed"!==(null===(n=this.sender.transport)||void 0===n?void 0:n.state)&&(yield this.sender.replaceTrack(null!==i&&void 0!==i?i:e)),this.providedByUser||this._mediaStreamTrack===e||this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach((t=>{cT(null!==i&&void 0!==i?i:e,t)})))}))}waitForDimensions(){return bC(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function*(){var n;if(e.kind===lT.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");"iOS"===(null===(n=tT())||void 0===n?void 0:n.os)&&(yield kT(10));const i=Date.now();for(;Date.now()-i<t;){const t=e.dimensions;if(t)return t;yield kT(50)}throw new qS("unable to get track dimensions after timeout")}()}))}setDeviceId(e){return bC(this,void 0,void 0,(function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===KT(e)||(this._constraints.deviceId=e,!!this.isMuted||(yield this.restartTrack(),KT(e)===this._mediaStreamTrack.getSettings().deviceId))}))}getDeviceId(){return bC(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){if(e.source===lT.Source.ScreenShare)return;const{deviceId:n,groupId:i}=e._mediaStreamTrack.getSettings(),r=e.kind===lT.Kind.Audio?"audioinput":"videoinput";return t?xE.getInstance().normalizeDeviceId(r,n,i):n}()}))}mute(){return bC(this,void 0,void 0,(function*(){return this.setTrackMuted(!0),this}))}unmute(){return bC(this,void 0,void 0,(function*(){return this.setTrackMuted(!1),this}))}replaceTrack(e,t){return bC(this,void 0,void 0,(function*(){if(!this.sender)throw new qS("unable to replace an unpublished track");let n,i;return"boolean"===typeof t?n=t:void 0!==t&&(n=t.userProvidedTrack,i=t.stopProcessor),this.providedByUser=null===n||void 0===n||n,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this}))}restart(e){return bC(this,void 0,void 0,(function*(){this.manuallyStopped=!1;const t=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:t,facingMode:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const r={audio:!1,video:!1};this.kind===lT.Kind.Video?r.video=!t&&!n||{deviceId:t,facingMode:n}:r.audio=!t||{deviceId:t},this.attachedElements.forEach((e=>{dT(this.mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const o=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return yield o.applyConstraints(i),o.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(o),this._constraints=e,this.emit(VS.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{t()}}))}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),this.isMuted===e&&this._mediaStreamTrack.enabled!==e||(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?VS.Muted:VS.Unmuted,this))}get needsReAcquisition(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return bC(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),PT()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),this.isInBackground||!this.needsReAcquisition||this.isUserProvided||this.isMuted||(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))}))}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),null===(e=this.processor)||void 0===e||e.destroy(),this.processor=void 0}pauseUpstream(){return bC(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!0===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to pause upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!0,this.emit(VS.UpstreamPaused,this);const t=tT();if("Safari"===(null===t||void 0===t?void 0:t.name)&&DT(t.version,"12.0")<0)throw new WS("pauseUpstream is not supported on Safari < 12.");"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(null))}finally{t()}}))}resumeUpstream(){return bC(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!1===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to resume upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!1,this.emit(VS.UpstreamResumed,this),"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{t()}}))}getRTCStatsReport(){return bC(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;return yield this.sender.getStats()}))}setProcessor(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;const r=yield t.processorLock.lock();try{t.log.debug("setting up processor",t.logContext);const r=document.createElement(t.kind),o={kind:t.kind,track:t._mediaStreamTrack,element:r,audioContext:t.audioContext};if(yield e.init(o),t.log.debug("processor initialized",t.logContext),t.processor&&(yield t.stopProcessor()),"unknown"===t.kind)throw TypeError("cannot set processor on track of unknown kind");if(cT(t._mediaStreamTrack,r),r.muted=!0,r.play().catch((e=>t.log.error("failed to play processor element",Object.assign(Object.assign({},t.logContext),{error:e})))),t.processor=e,t.processorElement=r,t.processor.processedTrack){for(const e of t.attachedElements)e!==t.processorElement&&n&&(dT(t._mediaStreamTrack,e),cT(t.processor.processedTrack,e));yield null===(i=t.sender)||void 0===i?void 0:i.replaceTrack(t.processor.processedTrack)}t.emit(VS.TrackProcessorUpdate,t.processor)}finally{r()}}()}))}getProcessor(){return this.processor}stopProcessor(){return bC(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i;e.processor&&(e.log.debug("stopping processor",e.logContext),null===(n=e.processor.processedTrack)||void 0===n||n.stop(),yield e.processor.destroy(),e.processor=void 0,t||(null===(i=e.processorElement)||void 0===i||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(VS.TrackProcessorUpdate))}()}))}}class l_ extends a_{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;super(e,lT.Kind.Audio,t,n,r),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>bC(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(K$){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:K$}))}e&&this.prevStats&&(this._currentBitrate=s_(e,this.prevStats)),this.prevStats=e})),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(VS.AudioTrackFeatureUpdate,this,_k.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(VS.AudioTrackFeatureUpdate,this,_k.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return bC(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===lT.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return bC(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const t=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==KT(this._constraints.deviceId);return this.source!==lT.Source.Microphone||!this.stopOnMute&&"ended"!==this._mediaStreamTrack.readyState&&!t||this.isUserProvided||(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{t()}}))}restartTrack(e){return bC(this,void 0,void 0,(function*(){let t;if(e){const n=lE({audio:e});"boolean"!==typeof n.audio&&(t=n.audio)}yield this.restart(t)}))}restart(e){const t=Object.create(null,{restart:{get:()=>super.restart}});return bC(this,void 0,void 0,(function*(){const n=yield t.restart.call(this,e);return this.checkForSilence(),n}))}startMonitor(){RT()&&(this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),o_)))}setProcessor(e){return bC(this,void 0,void 0,(function*(){var t;const n=yield this.processorLock.lock();try{if(!AT()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const n={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(n),this.processor=e,this.processor.processedTrack&&(yield null===(t=this.sender)||void 0===t?void 0:t.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(VS.TrackProcessorUpdate,this.processor)}finally{n()}}))}setAudioContext(e){this.audioContext=e}getSenderStats(){return bC(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;let t;return(yield this.sender.getStats()).forEach((e=>{"outbound-rtp"===e.type&&(t={type:"audio",streamId:e.id,packetsSent:e.packetsSent,packetsLost:e.packetsLost,bytesSent:e.bytesSent,timestamp:e.timestamp,roundTripTime:e.roundTripTime,jitter:e.jitter})})),t}))}checkForSilence(){return bC(this,void 0,void 0,(function*(){const e=yield cE(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(VS.AudioSilenceDetected)),e}))}}const c_=Object.values(vT),d_=Object.values(bT),u_=Object.values(yT),h_=[vT.h180,vT.h360],p_=[bT.h180,bT.h360],f_=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map((t=>{var n,i;return new uT(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*((null!==(n=e.encoding.maxFramerate)&&void 0!==n?n:30)/(null!==(i=t.fps)&&void 0!==i?i:30))))),t.fps,e.encoding.priority)})),m_=["q","h","f"];function g_(e,t,n,i){var r,o;let s=null===i||void 0===i?void 0:i.videoEncoding;e&&(s=null===i||void 0===i?void 0:i.screenShareEncoding);const a=null===i||void 0===i?void 0:i.simulcast,l=null===i||void 0===i?void 0:i.scalabilityMode,c=null===i||void 0===i?void 0:i.videoCodec;if(!s&&!a&&!l||!t||!n)return[{}];s||(s=function(e,t,n,i){const r=function(e,t,n){if(e)return u_;const i=t>n?t/n:n/t;if(Math.abs(i-16/9)<Math.abs(i-4/3))return c_;return d_}(e,t,n);let{encoding:o}=r[0];const s=Math.max(t,n);for(let a=0;a<r.length;a+=1){const e=r[a];if(o=e.encoding,e.width>=s)break}if(i)switch(i){case"av1":o=Object.assign({},o),o.maxBitrate=.7*o.maxBitrate;break;case"vp9":o=Object.assign({},o),o.maxBitrate=.85*o.maxBitrate}return o}(e,t,n,c),pC.debug("using video encoding",s));const d=s.maxFramerate,u=new uT(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(l&&ST(c)){const e=new x_(l),t=[];if(e.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const n=tT();if(_T()||AT()||"Chrome"===(null===n||void 0===n?void 0:n.name)&&DT(null===n||void 0===n?void 0:n.version,"113")<0){const n="h"==e.suffix?2:3;for(let i=0;i<e.spatial;i+=1)t.push({rid:m_[2-i],maxBitrate:s.maxBitrate/Math.pow(n,i),maxFramerate:u.encoding.maxFramerate});t[0].scalabilityMode=l}else t.push({maxBitrate:s.maxBitrate,maxFramerate:u.encoding.maxFramerate,scalabilityMode:l});return u.encoding.priority&&(t[0].priority=u.encoding.priority,t[0].networkPriority=u.encoding.priority),pC.debug("using svc encoding",{encodings:t}),t}if(!a)return[s];let h,p=[];if(p=e?null!==(r=y_(null===i||void 0===i?void 0:i.screenShareSimulcastLayers))&&void 0!==r?r:v_(e,u):null!==(o=y_(null===i||void 0===i?void 0:i.videoSimulcastLayers))&&void 0!==o?o:v_(e,u),p.length>0){const e=p[0];p.length>1&&([,h]=p);const i=Math.max(t,n);if(i>=960&&h)return b_(t,n,[e,h,u],d);if(i>=480)return b_(t,n,[e,u],d)}return b_(t,n,[u])}function v_(e,t){if(e)return f_(t);const{width:n,height:i}=t,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?h_:p_}function b_(e,t,n,i){const r=[];if(n.forEach(((n,o)=>{if(o>=m_.length)return;const s=Math.min(e,t),a={rid:m_[o],scaleResolutionDownBy:Math.max(1,s/Math.min(n.width,n.height)),maxBitrate:n.encoding.maxBitrate},l=i&&n.encoding.maxFramerate?Math.min(i,n.encoding.maxFramerate):n.encoding.maxFramerate;l&&(a.maxFramerate=l);const c=ET()||0===o;n.encoding.priority&&c&&(a.priority=n.encoding.priority,a.networkPriority=n.encoding.priority),r.push(a)})),AT()&&"ios"===NT()){let e;r.forEach((t=>{e?t.maxFramerate&&t.maxFramerate>e&&(e=t.maxFramerate):e=t.maxFramerate}));let t=!0;r.forEach((n=>{var i;n.maxFramerate!=e&&(t&&(t=!1,pC.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),pC.info('Setting framerate of encoding "'.concat(null!==(i=n.rid)&&void 0!==i?i:"",'" to ').concat(e)),n.maxFramerate=e)}))}return r}function y_(e){if(e)return e.sort(((e,t)=>{const{encoding:n}=e,{encoding:i}=t;return n.maxBitrate>i.maxBitrate?1:n.maxBitrate<i.maxBitrate?-1:n.maxBitrate===i.maxBitrate&&n.maxFramerate&&i.maxFramerate?n.maxFramerate>i.maxFramerate?1:-1:0}))}class x_{constructor(e){const t=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!t)throw new Error("invalid scalability mode");if(this.spatial=parseInt(t[1]),this.temporal=parseInt(t[2]),t.length>3)switch(t[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=t[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat(null!==(e=this.suffix)&&void 0!==e?e:"")}}class k_ extends a_{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;super(e,lT.Kind.Video,t,n,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>bC(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(K$){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:K$}))}const t=new Map(e.map((e=>[e.rid,e])));if(this.prevStats){let e=0;t.forEach(((t,n)=>{var i;const r=null===(i=this.prevStats)||void 0===i?void 0:i.get(n);e+=s_(t,r)})),this._currentBitrate=e}this.prevStats=t})),this.senderLock=new Py}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;if(this.signalClient=e,!RT())return;const n=null===(t=this.sender)||void 0===t?void 0:t.getParameters();n&&(this.encodings=n.encodings),this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),o_))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach((e=>{e.mediaStreamTrack.stop()})),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return bC(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.pauseUpstream.call(this);try{for(var s,a=!0,l=xC(this.simulcastCodecs.values());!(t=(s=yield l.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(null)}}catch(c){n={error:c}}finally{try{a||t||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}}))}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return bC(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.resumeUpstream.call(this);try{for(var s,a=!0,l=xC(this.simulcastCodecs.values());!(t=(s=yield l.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(e.mediaStreamTrack)}}catch(c){n={error:c}}finally{try{a||t||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}}))}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return bC(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source!==lT.Source.Camera||this.isUserProvided||(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return bC(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.source!==lT.Source.Camera||this.isUserProvided||(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{t()}}))}setTrackMuted(e){super.setTrackMuted(e);for(const t of this.simulcastCodecs.values())t.mediaStreamTrack.enabled=!e}getSenderStats(){return bC(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return[];const t=[],n=yield this.sender.getStats();return n.forEach((e=>{var i;if("outbound-rtp"===e.type){const r={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,bytesSent:e.bytesSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationDurations:e.qualityLimitationDurations,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges,rid:null!==(i=e.rid)&&void 0!==i?i:e.id,retransmittedPacketsSent:e.retransmittedPacketsSent,targetBitrate:e.targetBitrate,timestamp:e.timestamp},o=n.get(e.remoteId);o&&(r.jitter=o.jitter,r.packetsLost=o.packetsLost,r.roundTripTime=o.roundTripTime),t.push(r)}})),t.sort(((e,t)=>{var n,i;return(null!==(n=t.frameWidth)&&void 0!==n?n:0)-(null!==(i=e.frameWidth)&&void 0!==i?i:0)})),t}))}setPublishingQuality(e){const t=[];for(let n=aT.LOW;n<=aT.HIGH;n+=1)t.push(new Vw({quality:n,enabled:n<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(t)}restartTrack(e){return bC(this,void 0,void 0,(function*(){var t,n,i,r,o;let s;if(e){const t=lE({video:e});"boolean"!==typeof t.video&&(s=t.video)}yield this.restart(s);try{for(var a,l=!0,c=xC(this.simulcastCodecs.values());!(t=(a=yield c.next()).done);l=!0){r=a.value,l=!1;const e=r;e.sender&&"closed"!==(null===(o=e.sender.transport)||void 0===o?void 0:o.state)&&(e.mediaStreamTrack=this.mediaStreamTrack.clone(),yield e.sender.replaceTrack(e.mediaStreamTrack))}}catch(d){n={error:d}}finally{try{l||t||!(i=c.return)||(yield i.call(c))}finally{if(n)throw n.error}}}))}setProcessor(e){const t=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return bC(this,arguments,void 0,(function(e){var n=this;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var r,o,s,a,l,c;if(yield t.setProcessor.call(n,e,i),null===(l=n.processor)||void 0===l?void 0:l.processedTrack)try{for(var d,u=!0,h=xC(n.simulcastCodecs.values());!(r=(d=yield h.next()).done);u=!0){a=d.value,u=!1;const e=a;yield null===(c=e.sender)||void 0===c?void 0:c.replaceTrack(n.processor.processedTrack)}}catch(p){o={error:p}}finally{try{u||r||!(s=h.return)||(yield s.call(h))}finally{if(o)throw o.error}}}()}))}setDegradationPreference(e){return bC(this,void 0,void 0,(function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const t=this.sender.getParameters();t.degradationPreference=e,this.sender.setParameters(t)}catch(K$){this.log.warn("failed to set degradationPreference",Object.assign({error:K$},this.logContext))}}))}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e))return void this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);const n={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,n),n}setSimulcastTrackSender(e,t){const n=this.simulcastCodecs.get(e);n&&(n.sender=t,setTimeout((()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)}),5e3))}setPublishingCodecs(e){return bC(this,void 0,void 0,(function*(){var t,n,i,r,o,s,a;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(t=!0,n=xC(e);!(r=(i=yield n.next()).done);t=!0){a=i.value,t=!1;const e=a;if(this.codec&&this.codec!==e.codec){const t=this.simulcastCodecs.get(e.codec);if(this.log.debug("try setPublishingCodec for ".concat(e.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:t})),t&&t.sender)t.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(e.codec),this.logContext),yield w_(t.sender,t.encodings,e.qualities,this.senderLock,this.log,this.logContext));else for(const n of e.qualities)if(n.enabled){l.push(e.codec);break}}else yield this.setPublishingLayers(e.qualities)}}catch(c){o={error:c}}finally{try{t||r||!(s=n.return)||(yield s.call(n))}finally{if(o)throw o.error}}return l}))}setPublishingLayers(e){return bC(this,void 0,void 0,(function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),this.sender&&this.encodings&&(yield w_(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))}))}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return bC(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),PT()&&this.isInBackground&&this.source===lT.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}))}}function w_(e,t,n,i,r,o){return bC(this,void 0,void 0,(function*(){const s=yield i.lock();r.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const i=e.getParameters(),{encodings:s}=i;if(!s)return;if(s.length!==t.length)return void r.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:s,senderEncodings:t}));let a=!1;const l=tT();if("Chrome"===(null===l||void 0===l?void 0:l.name)&&DT(null===l||void 0===l?void 0:l.version,"133")>0&&s[0].scalabilityMode){const e=s[0],i=new x_(e.scalabilityMode);let r=kk.OFF;if(n.forEach((e=>{e.enabled&&(r===kk.OFF||e.quality>r)&&(r=e.quality)})),r===kk.OFF)e.active&&(e.active=!1,a=!0);else if(!e.active||i.spatial!==r+1){a=!0,e.active=!0;const n=new x_(t[0].scalabilityMode);i.spatial=r+1,i.suffix=n.suffix,1===i.spatial&&(i.suffix=void 0),e.scalabilityMode=i.toString(),e.scaleResolutionDownBy=Math.pow(2,2-r),t[0].maxBitrate&&(e.maxBitrate=t[0].maxBitrate/(e.scaleResolutionDownBy*e.scaleResolutionDownBy))}}else s.forEach(((e,i)=>{var s;let l=null!==(s=e.rid)&&void 0!==s?s:"";""===l&&(l="q");const c=C_(l),d=n.find((e=>e.quality===c));d&&e.active!==d.enabled&&(a=!0,e.active=d.enabled,r.debug("setting layer ".concat(d.quality," to ").concat(e.active?"enabled":"disabled"),o),ET()&&(d.enabled?(e.scaleResolutionDownBy=t[i].scaleResolutionDownBy,e.maxBitrate=t[i].maxBitrate,e.maxFrameRate=t[i].maxFrameRate):(e.scaleResolutionDownBy=4,e.maxBitrate=10,e.maxFrameRate=2)))}));a&&(i.encodings=s,r.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:i.encodings})),yield e.setParameters(i))}finally{s()}}))}function C_(e){switch(e){case"f":default:return aT.HIGH;case"h":return aT.MEDIUM;case"q":return aT.LOW}}function S_(e,t,n,i){if(!n)return[new Fk({quality:aT.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(i){const i=n[0].scalabilityMode,r=new x_(i),o=[],s="h"==r.suffix?1.5:2,a="h"==r.suffix?2:3;for(let l=0;l<r.spatial;l+=1)o.push(new Fk({quality:Math.min(aT.HIGH,r.spatial-1)-l,width:Math.ceil(e/Math.pow(s,l)),height:Math.ceil(t/Math.pow(s,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(a,l)):0,ssrc:0}));return o}return n.map((n=>{var i,r,o;const s=null!==(i=n.scaleResolutionDownBy)&&void 0!==i?i:1;let a=C_(null!==(r=n.rid)&&void 0!==r?r:"");return new Fk({quality:a,width:Math.ceil(e/s),height:Math.ceil(t/s),bitrate:null!==(o=n.maxBitrate)&&void 0!==o?o:0,ssrc:0})}))}const T_="_lossy",E_="_reliable",__="leave-reconnect";var I_;!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(I_||(I_={}));class P_ extends CC.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var t;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=ZE.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=I_.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=pC,this.handleDataChannel=e=>bC(this,[e],void 0,(function(e){var t=this;let{channel:n}=e;return function*(){if(n){if(n.label===E_)t.reliableDCSub=n;else{if(n.label!==T_)return;t.lossyDCSub=n}t.log.debug("on data channel ".concat(n.id,", ").concat(n.label),t.logContext),n.onmessage=t.handleDataMessage}}()})),this.handleDataMessage=e=>bC(this,void 0,void 0,(function*(){var t,n;const i=yield this.dataProcessLock.lock();try{let i;if(e.data instanceof ArrayBuffer)i=e.data;else{if(!(e.data instanceof Blob))return void this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:e.data}));i=yield e.data.arrayBuffer()}const r=Bk.fromBinary(new Uint8Array(i));"speaker"===(null===(t=r.value)||void 0===t?void 0:t.case)?this.emit(zS.ActiveSpeakersUpdate,r.value.value.speakers):("user"===(null===(n=r.value)||void 0===n?void 0:n.case)&&function(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const i=0!==e.destinationIdentities.length?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=i,t.destinationIdentities=i}(r,r.value.value),this.emit(zS.DataPacketReceived,r))}finally{i()}})),this.handleDataError=e=>{const t=0===e.currentTarget.maxRetransmits?"lossy":"reliable";if(e instanceof ErrorEvent&&e.error){const{error:n}=e.error;this.log.error("DataChannel error on ".concat(t,": ").concat(e.message),Object.assign(Object.assign({},this.logContext),{error:n}))}else this.log.error("Unknown DataChannel error on ".concat(t),Object.assign(Object.assign({},this.logContext),{event:e}))},this.handleBufferedAmountLow=e=>{const t=0===e.currentTarget.maxRetransmits?Uk.LOSSY:Uk.RELIABLE;this.updateAndEmitDCBufferStatus(t)},this.handleDisconnect=(e,t)=>{if(this._isClosed)return;this.log.warn("".concat(e," disconnected"),this.logContext),0===this.reconnectAttempts&&(this.reconnectStart=Date.now());const n=e=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(e,"ms. giving up"),this.logContext),this.emit(zS.Disconnected),this.close()},i=Date.now()-this.reconnectStart;let r=this.getNextRetryDelay({elapsedMs:i,retryCount:this.reconnectAttempts});null!==r?(e===__&&(r=0),this.log.debug("reconnecting in ".concat(r,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=oT.setTimeout((()=>this.attemptReconnect(t).finally((()=>this.reconnectTimeout=void 0))),r)):n(i)},this.waitForRestarted=()=>new Promise(((e,t)=>{this.pcState===I_.Connected&&e();const n=()=>{this.off(zS.Disconnected,i),e()},i=()=>{this.off(zS.Restarted,n),t()};this.once(zS.Restarted,n),this.once(zS.Disconnected,i)})),this.updateAndEmitDCBufferStatus=e=>{const t=this.isBufferStatusLow(e);"undefined"!==typeof t&&t!==this.dcBufferStatus.get(e)&&(this.dcBufferStatus.set(e,t),this.emit(zS.DCBufferStatusChanged,t,e))},this.isBufferStatusLow=e=>{const t=this.dataChannelForKind(e);if(t)return t.bufferedAmount<=t.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===TE.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Tk.RR_SIGNAL_DISCONNECTED))},this.log=fC(null!==(t=e.loggerName)&&void 0!==t?t:uC.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new EE(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Py,this.dataProcessLock=new Py,this.dcBufferStatus=new Map([[Uk.LOSSY,!0],[Uk.RELIABLE,!0]]),this.client.onParticipantUpdate=e=>this.emit(zS.ParticipantUpdate,e),this.client.onConnectionQuality=e=>this.emit(zS.ConnectionQualityUpdate,e),this.client.onRoomUpdate=e=>this.emit(zS.RoomUpdate,e),this.client.onSubscriptionError=e=>this.emit(zS.SubscriptionError,e),this.client.onSubscriptionPermissionUpdate=e=>this.emit(zS.SubscriptionPermissionUpdate,e),this.client.onSpeakersChanged=e=>this.emit(zS.SpeakersChanged,e),this.client.onStreamStateUpdate=e=>this.emit(zS.StreamStateChanged,e),this.client.onRequestResponse=e=>this.emit(zS.SignalRequestResponse,e)}get logContext(){var e,t,n,i,r,o,s,a;return{room:null===(t=null===(e=this.latestJoinResponse)||void 0===e?void 0:e.room)||void 0===t?void 0:t.name,roomID:null===(i=null===(n=this.latestJoinResponse)||void 0===n?void 0:n.room)||void 0===i?void 0:i.sid,participant:null===(o=null===(r=this.latestJoinResponse)||void 0===r?void 0:r.participant)||void 0===o?void 0:o.identity,pID:null===(a=null===(s=this.latestJoinResponse)||void 0===s?void 0:s.participant)||void 0===a?void 0:a.sid}}join(e,t,n,i){return bC(this,void 0,void 0,(function*(){this.url=e,this.token=t,this.signalOpts=n,this.maxJoinAttempts=n.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const r=yield this.client.join(e,t,n,i);return this._isClosed=!1,this.latestJoinResponse=r,this.subscriberPrimary=r.subscriberPrimary,this.pcManager||(yield this.configure(r)),this.subscriberPrimary&&!r.fastPublish||this.negotiate(),this.clientConfiguration=r.clientConfiguration,setTimeout((()=>{this.emit(zS.SignalConnected)}),10),r}catch(K$){if(K$ instanceof HS&&K$.reason===LS.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,t,n,i);throw K$}}))}close(){return bC(this,void 0,void 0,(function*(){const e=yield this.closingLock.lock();if(this.isClosed)e();else try{this._isClosed=!0,this.joinAttempts=0,this.emit(zS.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}}))}cleanupPeerConnections(){return bC(this,void 0,void 0,(function*(){var e;yield null===(e=this.pcManager)||void 0===e?void 0:e.close(),this.pcManager=void 0;const t=e=>{e&&(e.close(),e.onbufferedamountlow=null,e.onclose=null,e.onclosing=null,e.onerror=null,e.onmessage=null,e.onopen=null)};t(this.lossyDC),t(this.lossyDCSub),t(this.reliableDC),t(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0}))}cleanupClient(){return bC(this,void 0,void 0,(function*(){yield this.client.close(),this.client.resetCallbacks()}))}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new qS("a track with the same ID has already been published");return new Promise(((t,n)=>{const i=setTimeout((()=>{delete this.pendingTrackResolvers[e.cid],n(new HS("publication of local track timed out, no response from server",LS.InternalError))}),1e4);this.pendingTrackResolvers[e.cid]={resolve:e=>{clearTimeout(i),t(e)},reject:()=>{clearTimeout(i),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)}))}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:t}=this.pendingTrackResolvers[e.track.id];t&&t(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(K$){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:K$}))}return!1}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return null===(e=this.reliableDCSub)||void 0===e?void 0:e.readyState}getConnectedServerAddress(){return bC(this,void 0,void 0,(function*(){var e;return null===(e=this.pcManager)||void 0===e?void 0:e.getConnectedAddress()}))}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return bC(this,void 0,void 0,(function*(){var t,n;if(this.pcManager&&this.pcManager.currentState!==e_.NEW)return;this.participantSid=null===(t=e.participant)||void 0===t?void 0:t.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new t_(i,e.subscriberPrimary,this.loggerOptions),this.emit(zS.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(e,t)=>{this.client.sendIceCandidate(e,t)},this.pcManager.onPublisherOffer=e=>{this.client.sendOffer(e)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(t,n,i)=>bC(this,void 0,void 0,(function*(){if(this.log.debug("primary PC state changed ".concat(t),this.logContext),["closed","disconnected","failed"].includes(n)&&(this.publisherConnectionPromise=void 0),t===e_.CONNECTED){const t=this.pcState===I_.New;this.pcState=I_.Connected,t&&this.emit(zS.Connected,e)}else t===e_.FAILED&&this.pcState===I_.Connected&&(this.pcState=I_.Disconnected,this.handleDisconnect("peerconnection failed","failed"===i?Tk.RR_SUBSCRIBER_FAILED:Tk.RR_PUBLISHER_FAILED));const r=this.client.isDisconnected||this.client.currentState===TE.RECONNECTING,o=[e_.FAILED,e_.CLOSING,e_.CLOSED].includes(t);r&&o&&!this._isClosed&&this.emit(zS.Offline)})),this.pcManager.onTrack=e=>{this.emit(zS.MediaTrackAdded,e.track,e.streams[0],e.receiver)},function(e){return void 0!==e&&e>13}(null===(n=e.serverInfo)||void 0===n?void 0:n.protocol)||this.createDataChannels()}))}setupSignalClientCallbacks(){this.client.onAnswer=e=>bC(this,void 0,void 0,(function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))})),this.client.onTrickle=(e,t)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:t})),this.pcManager.addIceCandidate(e,t))},this.client.onOffer=e=>bC(this,void 0,void 0,(function*(){if(!this.pcManager)return;const t=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(t)})),this.client.onLocalTrackPublished=e=>{var t;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:null===(t=e.track)||void 0===t?void 0:t.sid})),!this.pendingTrackResolvers[e.cid])return void this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));const{resolve:n}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],n(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(zS.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(zS.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,t)=>{this.emit(zS.RemoteMute,e,t)},this.client.onSubscribedQualityUpdate=e=>{this.emit(zS.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Tk.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:null===e||void 0===e?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Ow.DISCONNECT:this.emit(zS.Disconnected,null===e||void 0===e?void 0:e.reason),this.close();break;case Ow.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(__);break;case Ow.RESUME:this.handleDisconnect(__)}}}makeRTCConfiguration(e){var t;const n=Object.assign({},this.rtcConfig);if((null===(t=this.signalOpts)||void 0===t?void 0:t.e2eeEnabled)&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),n.encodedInsertableStreams=!0),e.iceServers&&!n.iceServers){const t=[];e.iceServers.forEach((e=>{const n={urls:e.urls};e.username&&(n.username=e.username),e.credential&&(n.credential=e.credential),t.push(n)})),n.iceServers=t}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Ck.ENABLED&&(n.iceTransportPolicy="relay"),n.sdpSemantics="unified-plan",n.continualGatheringPolicy="gather_continually",n}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(T_,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(E_,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,t,n){return bC(this,void 0,void 0,(function*(){if(wT()){return yield this.createTransceiverRTCRtpSender(e,t,n)}if(CT()){this.log.warn("using add-track fallback",this.logContext);return yield this.createRTCRtpSender(e.mediaStreamTrack)}throw new GS("Required webRTC APIs not supported on this device")}))}createSimulcastSender(e,t,n,i){return bC(this,void 0,void 0,(function*(){if(wT())return this.createSimulcastTransceiverSender(e,t,n,i);if(CT())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new GS("Cannot stream on this device")}))}createTransceiverRTCRtpSender(e,t,n){return bC(this,void 0,void 0,(function*(){if(!this.pcManager)throw new GS("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),eE(e)&&(e.codec=t.videoCodec);const r={direction:"sendonly",streams:i};n&&(r.sendEncodings=n);return(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,r)).sender}))}createSimulcastTransceiverSender(e,t,n,i){return bC(this,void 0,void 0,(function*(){if(!this.pcManager)throw new GS("publisher is closed");const r={direction:"sendonly"};i&&(r.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,r);if(n.videoCodec)return e.setSimulcastTrackSender(n.videoCodec,o.sender),o.sender}))}createRTCRtpSender(e){return bC(this,void 0,void 0,(function*(){if(!this.pcManager)throw new GS("publisher is closed");return this.pcManager.addPublisherTrack(e)}))}attemptReconnect(e){return bC(this,void 0,void 0,(function*(){var t,n,i;if(!this._isClosed)if(this.attemptingReconnect)pC.warn("already attempting reconnect, returning early",this.logContext);else{(null===(t=this.clientConfiguration)||void 0===t?void 0:t.resumeConnection)!==Ck.DISABLED&&(null!==(i=null===(n=this.pcManager)||void 0===n?void 0:n.currentState)&&void 0!==i?i:e_.NEW)!==e_.NEW||(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(K$){this.reconnectAttempts+=1;let t=!0;K$ instanceof GS?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:K$})),t=!1):K$ instanceof R_||(this.fullReconnectOnNext=!0),t?this.handleDisconnect("reconnect",Tk.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(zS.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}}))}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(K$){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:K$}))}return null}restartConnection(e){return bC(this,void 0,void 0,(function*(){var t,n,i;try{if(!this.url||!this.token)throw new GS("could not reconnect, url or token not saved");let n;this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(zS.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new R_;n=yield this.join(null!==e&&void 0!==e?e:this.url,this.token,this.signalOpts)}catch(K$){if(K$ instanceof HS&&K$.reason===LS.NotAllowed)throw new GS("could not reconnect, token might be expired");throw new R_}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(zS.SignalRestarted,n),yield this.waitForPCReconnected(),this.client.currentState!==TE.CONNECTED)throw new R_("Signal connection got severed during reconnect");null===(t=this.regionUrlProvider)||void 0===t||t.resetAttempts(),this.emit(zS.Restarted)}catch(r){const e=yield null===(n=this.regionUrlProvider)||void 0===n?void 0:n.getNextBestRegionUrl();if(e)return void(yield this.restartConnection(e));throw null===(i=this.regionUrlProvider)||void 0===i||i.resetAttempts(),r}}))}resumeConnection(e){return bC(this,void 0,void 0,(function*(){var t;if(!this.url||!this.token)throw new GS("could not reconnect, url or token not saved");if(!this.pcManager)throw new GS("publisher and subscriber connections unset");let n;this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(zS.Resuming);try{this.setupSignalClientCallbacks(),n=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let e="";if(i instanceof Error&&(e=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof HS&&i.reason===LS.NotAllowed)throw new GS("could not reconnect, token might be expired");if(i instanceof HS&&i.reason===LS.LeaveRequest)throw i;throw new R_(e)}if(this.emit(zS.SignalResumed),n){const e=this.makeRTCConfiguration(n);this.pcManager.updateConfiguration(e)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==TE.CONNECTED)throw new R_("Signal connection got severed during reconnect");this.client.setReconnected(),"open"===(null===(t=this.reliableDC)||void 0===t?void 0:t.readyState)&&null===this.reliableDC.id&&this.createDataChannels(),this.emit(zS.Resumed)}))}waitForPCInitialConnection(e,t){return bC(this,void 0,void 0,(function*(){if(!this.pcManager)throw new GS("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(t,e)}))}waitForPCReconnected(){return bC(this,void 0,void 0,(function*(){this.pcState=I_.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield kT(2e3),!this.pcManager)throw new GS("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=I_.Connected}catch(K$){throw this.pcState=I_.Disconnected,new HS("could not establish PC connection, ".concat(K$.message),LS.InternalError)}}))}publishRpcResponse(e,t,n,i){return bC(this,void 0,void 0,(function*(){const r=new Bk({destinationIdentities:[e],kind:Uk.RELIABLE,value:{case:"rpcResponse",value:new Qk({requestId:t,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:null!==n&&void 0!==n?n:""}})}});yield this.sendDataPacket(r,Uk.RELIABLE)}))}publishRpcAck(e,t){return bC(this,void 0,void 0,(function*(){const n=new Bk({destinationIdentities:[e],kind:Uk.RELIABLE,value:{case:"rpcAck",value:new Yk({requestId:t})}});yield this.sendDataPacket(n,Uk.RELIABLE)}))}sendDataPacket(e,t){return bC(this,void 0,void 0,(function*(){const n=e.toBinary();yield this.ensurePublisherConnected(t);const i=this.dataChannelForKind(t);i&&i.send(n),this.updateAndEmitDCBufferStatus(t)}))}waitForBufferStatusLow(e){return new Promise(((t,n)=>bC(this,void 0,void 0,(function*(){if(this.isBufferStatusLow(e))t();else{const i=()=>n("Engine closed");for(this.once(zS.Closing,i);!this.dcBufferStatus.get(e);)yield kT(10);this.off(zS.Closing,i),t()}}))))}ensureDataTransportConnected(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subscriberPrimary;return function*(){var i;if(!t.pcManager)throw new GS("PC manager is closed");const r=n?t.pcManager.subscriber:t.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!r)throw new HS("".concat(o," connection not set"),LS.InternalError);let s=!1;n||t.dataChannelForKind(e,n)||(t.createDataChannels(),s=!0),s||n||t.pcManager.publisher.isICEConnected||"checking"===t.pcManager.publisher.getICEConnectionState()||(s=!0),s&&t.negotiate();const a=t.dataChannelForKind(e,n);if("open"===(null===a||void 0===a?void 0:a.readyState))return;const l=(new Date).getTime()+t.peerConnectionTimeout;for(;(new Date).getTime()<l;){if(r.isICEConnected&&"open"===(null===(i=t.dataChannelForKind(e,n))||void 0===i?void 0:i.readyState))return;yield kT(50)}throw new HS("could not establish ".concat(o," connection, state: ").concat(r.getICEConnectionState()),LS.InternalError)}()}))}ensurePublisherConnected(e){return bC(this,void 0,void 0,(function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise}))}verifyTransport(){return!!this.pcManager&&(this.pcManager.currentState===e_.CONNECTED&&!(!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED))}negotiate(){return bC(this,void 0,void 0,(function*(){return new Promise(((e,t)=>bC(this,void 0,void 0,(function*(){if(!this.pcManager)return void t(new YS("PC manager is closed"));this.pcManager.requirePublisher(),0!=this.pcManager.publisher.getTransceivers().length||this.lossyDC||this.reliableDC||this.createDataChannels();const n=new AbortController,i=()=>{n.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&t("cannot negotiate on closed engine"),this.on(zS.Closing,i),this.pcManager.publisher.once(HE,(e=>{const t=new Map;e.forEach((e=>{const n=e.codec.toLowerCase();var i;i=n,pT.includes(i)&&t.set(e.payload,n)})),this.emit(zS.RTPVideoMapUpdate,t)}));try{yield this.pcManager.negotiate(n),e()}catch(K$){K$ instanceof YS&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Tk.RR_UNKNOWN),t(K$)}finally{this.off(zS.Closing,i)}}))))}))}dataChannelForKind(e,t){if(t){if(e===Uk.LOSSY)return this.lossyDCSub;if(e===Uk.RELIABLE)return this.reliableDCSub}else{if(e===Uk.LOSSY)return this.lossyDC;if(e===Uk.RELIABLE)return this.reliableDC}}sendSyncState(e,t){var n,i;if(!this.pcManager)return void this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);const r=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),s=null===(i=null===(n=this.signalOpts)||void 0===n?void 0:n.autoSubscribe)||void 0===i||i,a=new Array,l=new Array;e.forEach((e=>{e.isDesired!==s&&a.push(e.trackSid),e.isEnabled||l.push(e.trackSid)})),this.client.sendSyncState(new Yw({answer:r?IE({sdp:r.sdp,type:r.type}):void 0,offer:o?IE({sdp:o.sdp,type:o.type}):void 0,subscription:new Iw({trackSids:a,subscribe:!s,participantTracks:[]}),publishTracks:mE(t),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],t=(t,n)=>{void 0!==(null===t||void 0===t?void 0:t.id)&&null!==t.id&&e.push(new Qw({label:t.label,id:t.id,target:n}))};return t(this.dataChannelForKind(Uk.LOSSY),pw.PUBLISHER),t(this.dataChannelForKind(Uk.RELIABLE),pw.PUBLISHER),t(this.dataChannelForKind(Uk.LOSSY,!0),pw.SUBSCRIBER),t(this.dataChannelForKind(Uk.RELIABLE,!0),pw.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&oT.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){RT()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){RT()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class R_ extends Error{}class A_{constructor(e,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=t}updateToken(e){this.token=e}isCloud(){return MT(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return bC(this,void 0,void 0,(function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const t=this.regionSettings.regions.filter((e=>!this.attemptedRegions.find((t=>t.url===e.url))));if(t.length>0){const e=t[0];return this.attemptedRegions.push(e),pC.debug("next region: ".concat(e.region)),e.url}return null}))}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return bC(this,void 0,void 0,(function*(){const t=yield fetch("".concat((n=this.serverUrl,"".concat(n.protocol.replace("ws","http"),"//").concat(n.host,"/settings")),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});var n;if(t.ok){const e=yield t.json();return this.lastUpdateAt=Date.now(),e}throw new HS("Could not fetch region settings: ".concat(t.statusText),401===t.status?LS.NotAllowed:LS.InternalError,t.status)}))}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}class M_{get info(){return this._info}constructor(e,t,n){this.reader=t,this.totalByteSize=n,this._info=e,this.bytesReceived=0}}class O_ extends M_{handleChunkReceived(e){var t;this.bytesReceived+=e.content.byteLength;const n=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,n)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>bC(this,void 0,void 0,(function*(){try{const{done:t,value:n}=yield e.read();return t?{done:!0,value:void 0}:(this.handleChunkReceived(n),{done:!1,value:n.content})}catch(t){return{done:!0,value:void 0}}})),return(){return bC(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return bC(this,void 0,void 0,(function*(){var e,t,n,i;let r=new Set;try{for(var o,s=!0,a=xC(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;const e=i;r.add(e)}}catch(l){t={error:l}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return Array.from(r)}))}}class N_ extends M_{constructor(e,t,n){super(e,t,n),this.receivedChunks=new Map}handleChunkReceived(e){var t;const n=QT(e.chunkIndex),i=this.receivedChunks.get(n);if(i&&i.version>e.version)return;this.receivedChunks.set(n,e),this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader(),t=new TextDecoder;return{next:()=>bC(this,void 0,void 0,(function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:t.decode(i.content)})}catch(n){return{done:!0,value:void 0}}})),return(){return bC(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return bC(this,void 0,void 0,(function*(){var e,t,n,i;let r="";try{for(var o,s=!0,a=xC(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;r+=i}}catch(l){t={error:l}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return r}))}}class j_{constructor(e,t,n){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=n,this.info=t}write(e){return this.defaultWriter.write(e)}close(){return bC(this,void 0,void 0,(function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),null===(e=this.onClose)||void 0===e||e.call(this)}))}}class D_ extends j_{}class L_ extends j_{}class F_ extends lT{constructor(e,t,n,i,r){super(e,n,r),this.sid=t,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?VS.Muted:VS.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const t=n=>{n.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",t),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(VS.Ended,this))};e.addEventListener("removetrack",t)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return bC(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.receiver)||void 0===e?void 0:e.getStats))return;return yield this.receiver.getStats()}))}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval((()=>this.monitorReceiver()),o_)),"undefined"!==typeof RTCRtpReceiver&&"getSynchronizationSources"in RTCRtpReceiver&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var t;this.timeSyncHandle=requestAnimationFrame((()=>e()));const n=null===(t=this.receiver)||void 0===t?void 0:t.getSynchronizationSources()[0];if(n){const{timestamp:e,rtpTimestamp:t}=n;t&&this.rtpTimestamp!==t&&(this.emit(VS.TimeSyncUpdate,{timestamp:e,rtpTimestamp:t}),this.rtpTimestamp=t)}};e()}}class B_ extends F_{constructor(e,t,n,i,r,o){super(e,t,lT.Kind.Audio,n,o),this.monitorReceiver=()=>bC(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=s_(e,this.prevStats)),this.prevStats=e})),this.audioContext=i,this.webAudioPluginNodes=[],r&&(this.sinkId=r.deviceId)}setVolume(e){var t;for(const n of this.attachedElements)this.audioContext?null===(t=this.gainNode)||void 0===t||t.gain.setTargetAtTime(e,0,.1):n.volume=e;AT()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(AT())return 1;let e=0;return this.attachedElements.forEach((t=>{t.volume>e&&(e=t.volume)})),e}setSinkId(e){return bC(this,void 0,void 0,(function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map((t=>{if(TT(t))return t.setSinkId(e)})))}))}attach(e){const t=0===this.attachedElements.length;return e?super.attach(e):e=super.attach(),this.sinkId&&TT(e)&&e.setSinkId(this.sinkId),this.audioContext&&t&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let t;return e?(t=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,t){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach((e=>{n.connect(e),n=e})),this.gainNode=e.createGain(),n.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),"running"!==e.state&&e.resume().then((()=>{"running"!==e.state&&this.emit(VS.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))})).catch((e=>{this.emit(VS.AudioPlaybackFailed,e)}))}disconnectWebAudio(){var e,t;null===(e=this.gainNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return bC(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;let e;return(yield this.receiver.getStats()).forEach((t=>{"inbound-rtp"===t.type&&(e={type:"audio",streamId:t.id,timestamp:t.timestamp,jitter:t.jitter,bytesReceived:t.bytesReceived,concealedSamples:t.concealedSamples,concealmentEvents:t.concealmentEvents,silentConcealedSamples:t.silentConcealedSamples,silentConcealmentEvents:t.silentConcealmentEvents,totalAudioEnergy:t.totalAudioEnergy,totalSamplesDuration:t.totalSamplesDuration})})),e}))}}class U_ extends F_{constructor(e,t,n,i,r){super(e,t,lT.Kind.Video,n,r),this.elementInfos=[],this.monitorReceiver=()=>bC(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=s_(e,this.prevStats)),this.prevStats=e})),this.debouncedHandleResize=$E((()=>{this.updateDimensions()}),100),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return void 0!==this.adaptiveStreamSettings}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach((t=>{e?dT(this._mediaStreamTrack,t):cT(this._mediaStreamTrack,t)}))}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t.element===e))){const t=new $_(e);this.observeElementInfo(t)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t===e))?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream)return void this.log.warn("stopObservingElementInfo ignored",this.logContext);const t=this.elementInfos.filter((t=>t===e));for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter((t=>t!==e)),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var e;return null===(e=this.prevStats)||void 0===e?void 0:e.decoderImplementation}getReceiverStats(){return bC(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t,n="",i=new Map;return e.forEach((e=>{"inbound-rtp"===e.type?(n=e.codecId,t={type:"video",streamId:e.id,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesReceived:e.framesReceived,packetsReceived:e.packetsReceived,packetsLost:e.packetsLost,frameWidth:e.frameWidth,frameHeight:e.frameHeight,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,jitter:e.jitter,timestamp:e.timestamp,bytesReceived:e.bytesReceived,decoderImplementation:e.decoderImplementation}):"codec"===e.type&&i.set(e.id,e)})),t&&""!==n&&i.get(n)&&(t.mimeType=i.get(n).mimeType),t}))}stopObservingElement(e){const t=this.elementInfos.filter((t=>t.element===e));for(const n of t)this.stopObservingElementInfo(n)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return bC(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()}))}updateVisibility(){var e,t;const n=this.elementInfos.reduce(((e,t)=>Math.max(e,t.visibilityChangedAt||0)),0),i=!(null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pauseVideoInBackground)&&void 0!==t&&!t)&&this.isInBackground,r=this.elementInfos.some((e=>e.pictureInPicture)),o=this.elementInfos.some((e=>e.visible))&&!i||r;this.lastVisible!==o&&(!o&&Date.now()-n<100?oT.setTimeout((()=>{this.updateVisibility()}),100):(this.lastVisible=o,this.emit(VS.VisibilityChanged,o,this)))}updateDimensions(){var e,t;let n=0,i=0;const r=this.getPixelDensity();for(const o of this.elementInfos){const e=o.width()*r,t=o.height()*r;e+t>n+i&&(n=e,i=t)}(null===(e=this.lastDimensions)||void 0===e?void 0:e.width)===n&&(null===(t=this.lastDimensions)||void 0===t?void 0:t.height)===i||(this.lastDimensions={width:n,height:i},this.emit(VS.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pixelDensity;if("screen"===t)return jT();if(!t){return jT()>2?2:1}return t}}class $_{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,t){this.onVisibilityChanged=e=>{var t;const{target:n,isIntersecting:i}=e;n===this.element&&(this.isIntersecting=i,this.isPiP=z_(this.element),this.visibilityChangedAt=Date.now(),null===(t=this.handleVisibilityChanged)||void 0===t||t.call(this))},this.onEnterPiP=()=>{var e,t,n;null===(t=null===(e=window.documentPictureInPicture)||void 0===e?void 0:e.window)||void 0===t||t.addEventListener("pagehide",this.onLeavePiP),this.isPiP=z_(this.element),null===(n=this.handleVisibilityChanged)||void 0===n||n.call(this)},this.onLeavePiP=()=>{var e;this.isPiP=z_(this.element),null===(e=this.handleVisibilityChanged)||void 0===e||e.call(this)},this.element=e,this.isIntersecting=null!==t&&void 0!==t?t:V_(e),this.isPiP=RT()&&z_(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,t,n;this.isIntersecting=V_(this.element),this.isPiP=z_(this.element),this.element.handleResize=()=>{var e;null===(e=this.handleResize)||void 0===e||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,zT().observe(this.element),UT().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),null===(e=window.documentPictureInPicture)||void 0===e||e.addEventListener("enter",this.onEnterPiP),null===(n=null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)||void 0===n||n.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,t,n,i,r;null===(e=zT())||void 0===e||e.unobserve(this.element),null===(t=UT())||void 0===t||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),null===(n=window.documentPictureInPicture)||void 0===n||n.removeEventListener("enter",this.onEnterPiP),null===(r=null===(i=window.documentPictureInPicture)||void 0===i?void 0:i.window)||void 0===r||r.removeEventListener("pagehide",this.onLeavePiP)}}function z_(e){var t,n;return document.pictureInPictureElement===e||!!(null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)&&V_(e,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.window)}function V_(e,t){const n=t||window;let i=e.offsetTop,r=e.offsetLeft;const o=e.offsetWidth,s=e.offsetHeight,{hidden:a}=e,{display:l}=getComputedStyle(e);for(;e.offsetParent;)i+=(e=e.offsetParent).offsetTop,r+=e.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+s>n.pageYOffset&&r+o>n.pageXOffset&&!a&&"none"!==l}class H_ extends CC.EventEmitter{constructor(e,t,n,i){var r;super(),this.metadataMuted=!1,this.encryption=jk.NONE,this.log=pC,this.handleMuted=()=>{this.emit(VS.Muted)},this.handleUnmuted=()=>{this.emit(VS.Unmuted)},this.log=fC(null!==(r=null===i||void 0===i?void 0:i.loggerName)&&void 0!==r?r:uC.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=t,this.trackName=n,this.source=lT.Source.Unknown}setTrack(e){this.track&&(this.track.off(VS.Muted,this.handleMuted),this.track.off(VS.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(VS.Muted,this.handleMuted),e.on(VS.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),gE(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return void 0!==this.track}get isEncrypted(){return this.encryption!==jk.NONE}get audioTrack(){if(ZT(this.track))return this.track}get videoTrack(){if(eE(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=lT.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===lT.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}!function(e){var t,n;(t=e.SubscriptionStatus||(e.SubscriptionStatus={})).Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",(n=e.PermissionStatus||(e.PermissionStatus={})).Allowed="allowed",n.NotAllowed="not_allowed"}(H_||(H_={}));class W_ extends H_{get isUpstreamPaused(){var e;return null===(e=this.track)||void 0===e?void 0:e.isUpstreamPaused}constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(VS.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(e){this.track&&this.track.off(VS.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(VS.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return bC(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.mute()}))}unmute(){return bC(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.unmute()}))}pauseUpstream(){return bC(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.pauseUpstream()}))}resumeUpstream(){return bC(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.resumeUpstream()}))}getTrackFeatures(){var e;if(ZT(this.track)){const t=this.track.getSourceTrackSettings(),n=new Set;return t.autoGainControl&&n.add(_k.TF_AUTO_GAIN_CONTROL),t.echoCancellation&&n.add(_k.TF_ECHO_CANCELLATION),t.noiseSuppression&&n.add(_k.TF_NOISE_SUPPRESSION),t.channelCount&&t.channelCount>1&&n.add(_k.TF_STEREO),(null===(e=this.options)||void 0===e?void 0:e.dtx)||n.add(_k.TF_NO_DTX),this.track.enhancedNoiseCancellation&&n.add(_k.TF_ENHANCED_NOISE_CANCELLATION),Array.from(n.values())}return[]}}function q_(e,t){return bC(this,void 0,void 0,(function*(){null!==e&&void 0!==e||(e={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:o}=vE(e);let s=o.audio,a=o.video;if(i&&"object"===typeof o.audio&&(o.audio.processor=i),r&&"object"===typeof o.video&&(o.video.processor=r),e.audio&&"object"===typeof o.audio&&"string"===typeof o.audio.deviceId){const e=o.audio.deviceId;o.audio.deviceId={exact:e},n=!0,s=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:e}})}if(o.video&&"object"===typeof o.video&&"string"===typeof o.video.deviceId){const e=o.video.deviceId;o.video.deviceId={exact:e},n=!0,a=Object.assign(Object.assign({},o.video),{deviceId:{ideal:e}})}(!0===o.audio||"object"===typeof o.audio&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),(!0===o.video||"object"===typeof o.video&&!o.video.deviceId)&&(o.video={deviceId:"default"});const l=sE(o,QE,XE),c=lE(l),d=navigator.mediaDevices.getUserMedia(c);o.audio&&(xE.userMediaPromiseMap.set("audioinput",d),d.catch((()=>xE.userMediaPromiseMap.delete("audioinput")))),o.video&&(xE.userMediaPromiseMap.set("videoinput",d),d.catch((()=>xE.userMediaPromiseMap.delete("videoinput"))));try{const e=yield d;return yield Promise.all(e.getTracks().map((n=>bC(this,void 0,void 0,(function*(){const o="audio"===n.kind;let s,a=o?l.audio:l.video;"boolean"!==typeof a&&a||(a={});const d=o?c.audio:c.video;"boolean"!==typeof d&&(s=d);const u=n.getSettings().deviceId;(null===s||void 0===s?void 0:s.deviceId)&&KT(s.deviceId)!==u?s.deviceId=u:s||(s={deviceId:u});const h=function(e,t,n){switch(e.kind){case"audio":return new l_(e,t,!1,void 0,n);case"video":return new k_(e,t,!1,n);default:throw new qS("unsupported track type: ".concat(e.kind))}}(n,s,t);return h.kind===lT.Kind.Video?h.source=lT.Source.Camera:h.kind===lT.Kind.Audio&&(h.source=lT.Source.Microphone),h.mediaStream=e,ZT(h)&&i?yield h.setProcessor(i):eE(h)&&r&&(yield h.setProcessor(r)),h})))))}catch(K$){if(!n)throw K$;return q_(Object.assign(Object.assign({},e),{audio:s,video:a}),t)}}))}var K_;!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"}(K_||(K_={}));class G_ extends CC.EventEmitter{get logContext(){var e,t;return Object.assign({},null===(t=null===(e=this.loggerOptions)||void 0===e?void 0:e.loggerContextCb)||void 0===t?void 0:t.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every((e=>e.isEncrypted))}get isAgent(){var e;return(null===(e=this.permissions)||void 0===e?void 0:e.agent)||this.kind===Ok.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ok.STANDARD;var a;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=K_.Unknown,this.log=pC,this.log=fC(null!==(a=null===o||void 0===o?void 0:o.loggerName)&&void 0!==a?a:uC.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=t,this.name=n,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes=null!==r&&void 0!==r?r:{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,t]of this.trackPublications)if(t.source===e)return t}getTrackPublicationByName(e){for(const[,t]of this.trackPublications)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrackPublication(lT.Source.Camera);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isMicrophoneEnabled(){var e;const t=this.getTrackPublication(lT.Source.Microphone);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(lT.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(1e3*Number.parseInt(this.participantInfo.joinedAt.toString())):new Date}updateInfo(e){return!(this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version)&&(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&this.emit($S.ParticipantMetadataChanged,n)}_setName(e){const t=this.name!==e;this.name=e,t&&this.emit($S.ParticipantNameChanged,e)}_setAttributes(e){const t=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={});const i=[...Object.keys(t),...Object.keys(e)],r={};for(const o of i)e[o]!==t[o]&&(r[o]=null!==(n=t[o])&&void 0!==n?n:"");return r}(this.attributes,e);this._attributes=e,Object.keys(t).length>0&&this.emit($S.AttributesChanged,t)}setPermissions(e){var t,n,i,r,o,s;const a=this.permissions,l=e.canPublish!==(null===(t=this.permissions)||void 0===t?void 0:t.canPublish)||e.canSubscribe!==(null===(n=this.permissions)||void 0===n?void 0:n.canSubscribe)||e.canPublishData!==(null===(i=this.permissions)||void 0===i?void 0:i.canPublishData)||e.hidden!==(null===(r=this.permissions)||void 0===r?void 0:r.hidden)||e.recorder!==(null===(o=this.permissions)||void 0===o?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some(((e,t)=>{var n;return e!==(null===(n=this.permissions)||void 0===n?void 0:n.canPublishSources[t])}))||e.canSubscribeMetrics!==(null===(s=this.permissions)||void 0===s?void 0:s.canSubscribeMetrics);return this.permissions=e,l&&this.emit($S.ParticipantPermissionsChanged,a),l}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit($S.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=function(e){switch(e){case wk.EXCELLENT:return K_.Excellent;case wk.GOOD:return K_.Good;case wk.POOR:return K_.Poor;case wk.LOST:return K_.Lost;default:return K_.Unknown}}(e),t!==this._connectionQuality&&this.emit($S.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach((t=>ZT(t.track)&&t.track.setAudioContext(e)))}addTrackPublication(e){e.on(VS.Muted,(()=>{this.emit($S.TrackMuted,e)})),e.on(VS.Unmuted,(()=>{this.emit($S.TrackUnmuted,e)}));const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case lT.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case lT.Kind.Video:this.videoTrackPublications.set(e.trackSid,e)}}}class Y_ extends G_{constructor(e,t,n,i,r){super(e,t,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=jk.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new qT)},this.handleReconnected=()=>{var e,t;null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.resolve)||void 0===t||t.call(e),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var e,t;this.reconnectFuture&&(this.reconnectFuture.promise.catch((e=>this.log.warn(e.message,this.logContext))),null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.reject)||void 0===t||t.call(e,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=e=>{const{requestId:t,reason:n,message:i}=e,r=this.pendingSignalRequests.get(t);r&&(n!==rC.OK&&r.reject(new XS(i,n)),this.pendingSignalRequests.delete(t))},this.handleDataPacket=e=>{switch(e.value.case){case"rpcResponse":let t=e.value.value,n=null,i=null;"payload"===t.value.case?n=t.value.value:"error"===t.value.case&&(i=n_.fromProto(t.value.value)),this.handleIncomingRpcResponse(t.requestId,n,i);break;case"rpcAck":let r=e.value.value;this.handleIncomingRpcAck(r.requestId)}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map((e=>function(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new qw({participantIdentity:null!==(t=e.participantIdentity)&&void 0!==t?t:"",participantSid:null!==(n=e.participantSid)&&void 0!==n?n:"",allTracks:null!==(i=e.allowAll)&&void 0!==i&&i,trackSids:e.allowedTrackSids||[]})}(e))))},this.onTrackUnmuted=e=>{this.onTrackMuted(e,e.isUpstreamPaused)},this.onTrackMuted=(e,t)=>{void 0===t&&(t=!0),e.sid?this.engine.updateMuteStatus(e.sid,t):this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),gE(e)))},this.onTrackUpstreamPaused=e=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),gE(e))),this.onTrackMuted(e,!0)},this.onTrackUpstreamResumed=e=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),gE(e))),this.onTrackMuted(e,e.isMuted)},this.onTrackFeatureUpdate=e=>{const t=this.audioTrackPublications.get(e.sid);t?this.engine.client.sendUpdateLocalAudioTrack(t.trackSid,t.getTrackFeatures()):this.log.warn("Could not update local audio track settings, missing publication for track ".concat(e.sid),this.logContext)},this.handleSubscribedQualityUpdate=e=>bC(this,void 0,void 0,(function*(){var t,n,i,r,o,s;if(!(null===(o=this.roomOptions)||void 0===o?void 0:o.dynacast))return;const a=this.videoTrackPublications.get(e.trackSid);if(a)if(e.subscribedCodecs.length>0){if(!a.videoTrack)return;const o=yield a.videoTrack.setPublishingCodecs(e.subscribedCodecs);try{for(var l,c=!0,d=xC(o);!(t=(l=yield d.next()).done);c=!0){r=l.value,c=!1;const e=r;fT(e)&&(this.log.debug("publish ".concat(e," for ").concat(a.videoTrack.sid),Object.assign(Object.assign({},this.logContext),gE(a))),yield this.publishAdditionalCodecForTrack(a.videoTrack,e,a.options))}}catch(u){n={error:u}}finally{try{c||t||!(i=d.return)||(yield i.call(d))}finally{if(n)throw n.error}}}else e.subscribedQualities.length>0&&(yield null===(s=a.videoTrack)||void 0===s?void 0:s.setPublishingLayers(e.subscribedQualities));else this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}))})),this.handleLocalTrackUnpublished=e=>{const t=this.trackPublications.get(e.trackSid);t?this.unpublishTrack(t.track):this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}))},this.handleTrackEnded=e=>bC(this,void 0,void 0,(function*(){if(e.source===lT.Source.ScreenShare||e.source===lT.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),gE(e))),this.unpublishTrack(e);else if(e.isUserProvided)yield e.mute();else if(nE(e)||tE(e))try{if(RT())try{const t=yield null===navigator||void 0===navigator?void 0:navigator.permissions.query({name:e.source===lT.Source.Camera?"camera":"microphone"});if(t&&"denied"===t.state)throw this.log.warn("user has revoked access to ".concat(e.source),Object.assign(Object.assign({},this.logContext),gE(e))),t.onchange=()=>{"denied"!==t.state&&(e.isMuted||e.restartTrack(),t.onchange=null)},new Error("GetUserMedia Permission denied")}catch(K$){}e.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),gE(e))),nE(e)?yield e.restartTrack({deviceId:"default"}):yield e.restartTrack())}catch(K$){this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),gE(e))),yield e.mute()}})),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=n,this.roomOptions=i,this.setupEngine(n),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=r}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==jk.NONE}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setupEngine(e){this.engine=e,this.engine.on(zS.RemoteMute,((e,t)=>{const n=this.trackPublications.get(e);n&&n.track&&(t?n.mute():n.unmute())})),this.engine.on(zS.Connected,this.handleReconnected).on(zS.SignalRestarted,this.handleReconnected).on(zS.SignalResumed,this.handleReconnected).on(zS.Restarting,this.handleReconnecting).on(zS.Resuming,this.handleReconnecting).on(zS.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(zS.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(zS.Disconnected,this.handleDisconnected).on(zS.SignalRequestResponse,this.handleSignalRequestResponse).on(zS.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return bC(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({metadata:e})}))}setName(e){return bC(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({name:e})}))}setAttributes(e){return bC(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({attributes:e})}))}requestMetadataUpdate(e){return bC(this,arguments,void 0,(function(e){var t=this;let{metadata:n,name:i,attributes:r}=e;return function*(){return new Promise(((e,o)=>bC(t,void 0,void 0,(function*(){var t,s;try{let a=!1;const l=yield this.engine.client.sendUpdateLocalMetadata(null!==(t=null!==n&&void 0!==n?n:this.metadata)&&void 0!==t?t:"",null!==(s=null!==i&&void 0!==i?i:this.name)&&void 0!==s?s:"",r),c=performance.now();for(this.pendingSignalRequests.set(l,{resolve:e,reject:e=>{o(e),a=!0},values:{name:i,metadata:n,attributes:r}});performance.now()-c<5e3&&!a;){if((!i||this.name===i)&&(!n||this.metadata===n)&&(!r||Object.entries(r).every((e=>{let[t,n]=e;return this.attributes[t]===n||""===n&&!this.attributes[t]}))))return this.pendingSignalRequests.delete(l),void e();yield kT(50)}o(new XS("Request to update local metadata timed out","TimeoutError"))}catch(K$){K$ instanceof Error&&o(K$)}}))))}()}))}setCameraEnabled(e,t,n){return this.setTrackEnabled(lT.Source.Camera,e,t,n)}setMicrophoneEnabled(e,t,n){return this.setTrackEnabled(lT.Source.Microphone,e,t,n)}setScreenShareEnabled(e,t,n){return this.setTrackEnabled(lT.Source.ScreenShare,e,t,n)}setPermissions(e){const t=this.permissions,n=super.setPermissions(e);return n&&t&&this.emit($S.ParticipantPermissionsChanged,t),n}setE2EEEnabled(e){return bC(this,void 0,void 0,(function*(){this.encryptionType=e?jk.GCM:jk.NONE,yield this.republishAllTracks(void 0,!1)}))}setTrackEnabled(e,t,n,i){return bC(this,void 0,void 0,(function*(){var r,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:t})),this.republishPromise&&(yield this.republishPromise);let s=this.getTrackPublication(e);if(t)if(s)yield s.unmute();else{let t;if(this.pendingPublishing.has(e)){const t=yield this.waitForPendingPublicationOfSource(e);return t||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield null===t||void 0===t?void 0:t.unmute(),t}this.pendingPublishing.add(e);try{switch(e){case lT.Source.Camera:t=yield this.createTracks({video:null===(r=n)||void 0===r||r});break;case lT.Source.Microphone:t=yield this.createTracks({audio:null===(o=n)||void 0===o||o});break;case lT.Source.ScreenShare:t=yield this.createScreenTracks(Object.assign({},n));break;default:throw new qS(e)}}catch(K$){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),K$ instanceof Error&&this.emit($S.MediaDevicesError,K$),this.pendingPublishing.delete(e),K$}try{const e=[];for(const r of t)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),gE(r))),e.push(this.publishTrack(r,i));const n=yield Promise.all(e);[s]=n}catch(K$){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),K$}finally{this.pendingPublishing.delete(e)}}else if(!(null===s||void 0===s?void 0:s.track)&&this.pendingPublishing.has(e)&&(s=yield this.waitForPendingPublicationOfSource(e),s||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),s&&s.track)if(e===lT.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const e=this.getTrackPublication(lT.Source.ScreenShareAudio);e&&e.track&&this.unpublishTrack(e.track)}else yield s.mute();return s}))}enableCameraAndMicrophone(){return bC(this,void 0,void 0,(function*(){if(!this.pendingPublishing.has(lT.Source.Camera)&&!this.pendingPublishing.has(lT.Source.Microphone)){this.pendingPublishing.add(lT.Source.Camera),this.pendingPublishing.add(lT.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map((e=>this.publishTrack(e))))}finally{this.pendingPublishing.delete(lT.Source.Camera),this.pendingPublishing.delete(lT.Source.Microphone)}}}))}createTracks(e){return bC(this,void 0,void 0,(function*(){var t,n;null!==e&&void 0!==e||(e={});const i=sE(e,null===(t=this.roomOptions)||void 0===t?void 0:t.audioCaptureDefaults,null===(n=this.roomOptions)||void 0===n?void 0:n.videoCaptureDefaults);try{const e=yield q_(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return e.map((e=>(ZT(e)&&(this.microphoneError=void 0,e.setAudioContext(this.audioContext),e.source=lT.Source.Microphone,this.emit($S.AudioStreamAcquired)),eE(e)&&(this.cameraError=void 0,e.source=lT.Source.Camera),e)))}catch(r){throw r instanceof Error&&(e.audio&&(this.microphoneError=r),e.video&&(this.cameraError=r)),r}}))}createScreenTracks(e){return bC(this,void 0,void 0,(function*(){if(void 0===e&&(e={}),void 0===navigator.mediaDevices.getDisplayMedia)throw new WS("getDisplayMedia not supported");void 0!==e.resolution||IT()||(e.resolution=yT.h1080fps30.resolution);const t=pE(e),n=yield navigator.mediaDevices.getDisplayMedia(t),i=n.getVideoTracks();if(0===i.length)throw new qS("no video track found");const r=new k_(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});r.source=lT.Source.ScreenShare,e.contentHint&&(r.mediaStreamTrack.contentHint=e.contentHint);const o=[r];if(n.getAudioTracks().length>0){this.emit($S.AudioStreamAcquired);const e=new l_(n.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e.source=lT.Source.ScreenShareAudio,o.push(e)}return o}))}publishTrack(e,t){return bC(this,void 0,void 0,(function*(){return this.publishOrRepublishTrack(e,t)}))}publishOrRepublishTrack(e,t){return bC(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var r,o,s,a;let l,c;if(nE(e)&&e.setAudioContext(n.audioContext),yield null===(r=n.reconnectFuture)||void 0===r?void 0:r.promise,n.republishPromise&&!i&&(yield n.republishPromise),JT(e)&&n.pendingPublishPromises.has(e)&&(yield n.pendingPublishPromises.get(e)),e instanceof MediaStreamTrack)l=e.getConstraints();else{let t;switch(l=e.constraints,e.source){case lT.Source.Microphone:t="audioinput";break;case lT.Source.Camera:t="videoinput"}t&&n.activeDeviceMap.has(t)&&(l=Object.assign(Object.assign({},l),{deviceId:n.activeDeviceMap.get(t)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new l_(e,l,!0,n.audioContext,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;case"video":e=new k_(e,l,!0,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;default:throw new qS("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});if(n.trackPublications.forEach((t=>{t.track&&t.track===e&&(c=t)})),c)return n.log.warn("track has already been published, skipping",Object.assign(Object.assign({},n.logContext),gE(c))),c;const d="channelCount"in e.mediaStreamTrack.getSettings()&&2===e.mediaStreamTrack.getSettings().channelCount||2===e.mediaStreamTrack.getConstraints().channelCount,u=null!==(o=null===t||void 0===t?void 0:t.forceStereo)&&void 0!==o?o:d;u&&(t||(t={}),void 0===t.dtx&&n.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},n.logContext),gE(e))),void 0===t.red&&n.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),null!==(s=t.dtx)&&void 0!==s||(t.dtx=!1),null!==(a=t.red)&&void 0!==a||(t.red=!1));const h=Object.assign(Object.assign({},n.roomOptions.publishDefaults),t);!function(){const e=tT(),t="17.2";if(e)return"Safari"!==e.name&&"iOS"!==e.os||!!("iOS"===e.os&&e.osVersion&&DT(t,e.osVersion)>=0)||"Safari"===e.name&&DT(t,e.version)>=0}()&&n.roomOptions.e2ee&&(n.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},n.logContext)),h.simulcast=!1),h.source&&(e.source=h.source);const p=new Promise(((t,i)=>bC(n,void 0,void 0,(function*(){try{if(this.engine.client.currentState!==TE.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:gE(e)}));const n=()=>bC(this,void 0,void 0,(function*(){try{const n=yield this.publish(e,h,u);t(n)}catch(K$){i(K$)}}));setTimeout((()=>{this.engine.off(zS.SignalConnected,n),i(new QS("publishing rejected as engine not connected within timeout",408))}),15e3),this.engine.once(zS.SignalConnected,n),this.engine.on(zS.Closing,(()=>{this.engine.off(zS.SignalConnected,n),i(new QS("publishing rejected as engine closed",499))}))}else try{const n=yield this.publish(e,h,u);t(n)}catch(K$){i(K$)}}catch(K$){i(K$)}}))));n.pendingPublishPromises.set(e,p);try{return yield p}catch(K$){throw K$}finally{n.pendingPublishPromises.delete(e)}}()}))}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),gE(e))),!1;const{canPublish:t,canPublishSources:n}=this.permissions;return!(!t||0!==n.length&&!n.map((e=>function(e){switch(e){case xk.CAMERA:return lT.Source.Camera;case xk.MICROPHONE:return lT.Source.Microphone;case xk.SCREEN_SHARE:return lT.Source.ScreenShare;case xk.SCREEN_SHARE_AUDIO:return lT.Source.ScreenShareAudio;default:return lT.Source.Unknown}}(e))).includes(e.source))||(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),gE(e))),!1)}publish(e,t,n){return bC(this,void 0,void 0,(function*(){var i,r,o,s,a,l,c,d,u,h;if(!this.hasPermissionsToPublish(e))throw new QS("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find((t=>JT(e)&&t.source===e.source))&&e.source!==lT.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),gE(e))),t.stopMicTrackOnMute&&ZT(e)&&(e.stopOnMute=!0),e.source===lT.Source.ScreenShare&&ET()&&(t.simulcast=!1),"av1"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(_T())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/AV1"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),"vp9"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(ET())return!1;if(_T()){const e=tT();if((null===e||void 0===e?void 0:e.version)&&DT(e.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/VP9"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),void 0===t.videoCodec&&(t.videoCodec=GE),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some((e=>t.videoCodec===fE(e.mime)))||(t.videoCodec=fE(this.enabledPublishVideoCodecs[0].mime)));const p=t.videoCodec;e.on(VS.Muted,this.onTrackMuted),e.on(VS.Unmuted,this.onTrackUnmuted),e.on(VS.Ended,this.handleTrackEnded),e.on(VS.UpstreamPaused,this.onTrackUpstreamPaused),e.on(VS.UpstreamResumed,this.onTrackUpstreamResumed),e.on(VS.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const f=new yw({cid:e.mediaStreamTrack.id,name:t.name,type:lT.kindToProto(e.kind),muted:e.isMuted,source:lT.sourceToProto(e.source),disableDtx:!(null===(i=t.dtx)||void 0===i||i),encryption:this.encryptionType,stereo:n,disableRed:this.isE2EEEnabled||!(null===(r=t.red)||void 0===r||r),stream:null===t||void 0===t?void 0:t.stream,backupCodecPolicy:null===t||void 0===t?void 0:t.backupCodecPolicy});let m;if(e.kind===lT.Kind.Video){let n={width:0,height:0};try{n=yield e.waitForDimensions()}catch(K$){const i=null!==(s=null===(o=this.roomOptions.videoCaptureDefaults)||void 0===o?void 0:o.resolution)&&void 0!==s?s:vT.h720.resolution;n={width:i.width,height:i.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),gE(e)),{dims:n}))}f.width=n.width,f.height=n.height,tE(e)&&(ST(p)&&(e.source===lT.Source.ScreenShare&&(t.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),gE(e))))),t.scalabilityMode=null!==(a=t.scalabilityMode)&&void 0!==a?a:"L3T3_KEY"),f.simulcastCodecs=[new bw({codec:p,cid:e.mediaStreamTrack.id})],!0===t.backupCodec&&(t.backupCodec={codec:GE}),t.backupCodec&&p!==t.backupCodec.codec&&f.encryption===jk.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),f.simulcastCodecs.push(new bw({codec:t.backupCodec.codec,cid:""})))),m=g_(e.source===lT.Source.ScreenShare,f.width,f.height,t),f.layers=S_(f.width,f.height,m,ST(t.videoCodec))}else e.kind===lT.Kind.Audio&&(m=[{maxBitrate:null===(l=t.audioPreset)||void 0===l?void 0:l.maxBitrate,priority:null!==(d=null===(c=t.audioPreset)||void 0===c?void 0:c.priority)&&void 0!==d?d:"high",networkPriority:null!==(h=null===(u=t.audioPreset)||void 0===u?void 0:u.priority)&&void 0!==h?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new GS("cannot publish track when not connected");const g=()=>bC(this,void 0,void 0,(function*(){var n,i,r;if(!this.engine.pcManager)throw new GS("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,t,m),tE(e)&&(null!==(n=t.degradationPreference)&&void 0!==n||(t.degradationPreference=function(e){return e.source===lT.Source.ScreenShare||e.constraints.height&&KT(e.constraints.height)>=1080?"maintain-resolution":"balanced"}(e)),e.setDegradationPreference(t.degradationPreference)),m)if(ET()&&e.kind===lT.Kind.Audio){let t;for(const n of this.engine.pcManager.publisher.getTransceivers())if(n.sender===e.sender){t=n;break}t&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:t,codec:"opus",maxbr:(null===(i=m[0])||void 0===i?void 0:i.maxBitrate)?m[0].maxBitrate/1e3:0})}else e.codec&&ST(e.codec)&&(null===(r=m[0])||void 0===r?void 0:r.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:f.cid,codec:e.codec,maxbr:m[0].maxBitrate/1e3});yield this.engine.negotiate()}));let v;if(this.enabledPublishVideoCodecs.length>0){v=(yield Promise.all([this.engine.addTrack(f),g()]))[0]}else{let n;if(v=yield this.engine.addTrack(f),v.codecs.forEach((e=>{void 0===n&&(n=e.mimeType)})),n&&e.kind===lT.Kind.Video){const i=fE(n);i!==p&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),gE(e)),{codec:i})),t.videoCodec=i,m=g_(e.source===lT.Source.ScreenShare,f.width,f.height,t))}yield g()}const b=new W_(e.kind,v,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return b.options=t,e.sid=v.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:m,trackInfo:v})),tE(e)?e.startMonitor(this.engine.client):nE(e)&&e.startMonitor(),this.addTrackPublication(b),this.emit($S.LocalTrackPublished,b),b}))}get isLocal(){return!0}publishAdditionalCodecForTrack(e,t,n){return bC(this,void 0,void 0,(function*(){var i;if(this.encryptionType!==jk.NONE)return;let r;if(this.trackPublications.forEach((t=>{t.track&&t.track===e&&(r=t)})),!r)throw new qS("track is not published");if(!tE(e))throw new qS("track is not a video track");const o=Object.assign(Object.assign({},null===(i=this.roomOptions)||void 0===i?void 0:i.publishDefaults),n),s=function(e,t,n){var i,r,o,s;if(!n.backupCodec||!0===n.backupCodec||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&pC.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),l=null!==(i=a.width)&&void 0!==i?i:null===(r=e.dimensions)||void 0===r?void 0:r.width,c=null!==(o=a.height)&&void 0!==o?o:null===(s=e.dimensions)||void 0===s?void 0:s.height;return e.source===lT.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),g_(e.source===lT.Source.ScreenShare,l,c,n)}(e,t,o);if(!s)return void this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),gE(e)));const a=e.addSimulcastTrack(t,s);if(!a)return;const l=new yw({cid:a.mediaStreamTrack.id,type:lT.kindToProto(e.kind),muted:e.isMuted,source:lT.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:a.mediaStreamTrack.id}]});if(l.layers=S_(l.width,l.height,s),!this.engine||this.engine.isClosed)throw new GS("cannot publish track when not connected");const c=(yield Promise.all([this.engine.addTrack(l),(()=>bC(this,void 0,void 0,(function*(){yield this.engine.createSimulcastSender(e,a,o,s),yield this.engine.negotiate()})))()]))[0];this.log.debug("published ".concat(t," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:s,trackInfo:c}))}))}unpublishTrack(e,t){return bC(this,void 0,void 0,(function*(){var n,i;if(JT(e)){const t=this.pendingPublishPromises.get(e);t&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),gE(e))),yield t)}const r=this.getPublicationForTrack(e),o=r?gE(r):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!r||!r.track)return void this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));(e=r.track).off(VS.Muted,this.onTrackMuted),e.off(VS.Unmuted,this.onTrackUnmuted),e.off(VS.Ended,this.handleTrackEnded),e.off(VS.UpstreamPaused,this.onTrackUpstreamPaused),e.off(VS.UpstreamResumed,this.onTrackUpstreamResumed),e.off(VS.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),void 0===t&&(t=null===(i=null===(n=this.roomOptions)||void 0===n?void 0:n.stopLocalTrackOnUnpublish)||void 0===i||i),t?e.stop():e.stopMonitor();let s=!1;const a=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<e_.FAILED&&a)try{for(const e of this.engine.pcManager.publisher.getTransceivers())e.sender===a&&(e.direction="inactive",s=!0);if(this.engine.removeTrack(a)&&(s=!0),tE(e)){for(const[,t]of e.simulcastCodecs)t.sender&&(this.engine.removeTrack(t.sender)&&(s=!0),t.sender=void 0);e.simulcastCodecs.clear()}}catch(K$){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:K$}))}switch(this.trackPublications.delete(r.trackSid),r.kind){case lT.Kind.Audio:this.audioTrackPublications.delete(r.trackSid);break;case lT.Kind.Video:this.videoTrackPublications.delete(r.trackSid)}return this.emit($S.LocalTrackUnpublished,r),r.setTrack(void 0),s&&(yield this.engine.negotiate()),r}))}unpublishTracks(e){return bC(this,void 0,void 0,(function*(){return(yield Promise.all(e.map((e=>this.unpublishTrack(e))))).filter((e=>!!e))}))}republishAllTracks(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){t.republishPromise&&(yield t.republishPromise),t.republishPromise=new Promise(((i,r)=>bC(t,void 0,void 0,(function*(){try{const t=[];this.trackPublications.forEach((n=>{n.track&&(e&&(n.options=Object.assign(Object.assign({},n.options),e)),t.push(n))})),yield Promise.all(t.map((e=>bC(this,void 0,void 0,(function*(){const t=e.track;yield this.unpublishTrack(t,!1),!n||t.isMuted||t.source===lT.Source.ScreenShare||t.source===lT.Source.ScreenShareAudio||!nE(t)&&!tE(t)||t.isUserProvided||(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:e.trackSid})),yield t.restartTrack()),yield this.publishOrRepublishTrack(t,e.options,!0)}))))),i()}catch(t){r(t)}finally{this.republishPromise=void 0}})))),yield t.republishPromise}()}))}publishData(e){return bC(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const i=n.reliable?Uk.RELIABLE:Uk.LOSSY,r=n.destinationIdentities,o=n.topic,s=new Bk({kind:i,value:{case:"user",value:new Vk({participantIdentity:t.identity,payload:e,destinationIdentities:r,topic:o})}});yield t.engine.sendDataPacket(s,i)}()}))}publishDtmf(e,t){return bC(this,void 0,void 0,(function*(){const n=new Bk({kind:Uk.RELIABLE,value:{case:"sipDtmf",value:new Hk({code:e,digit:t})}});yield this.engine.sendDataPacket(n,Uk.RELIABLE)}))}sendChatMessage(e,t){return bC(this,void 0,void 0,(function*(){const n={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:null===t||void 0===t?void 0:t.attachments},i=new Bk({value:{case:"chatMessage",value:new Kk(Object.assign(Object.assign({},n),{timestamp:nx.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(i,Uk.RELIABLE),this.emit($S.ChatMessage,n),n}))}editChatMessage(e,t){return bC(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},t),{message:e,editTimestamp:Date.now()}),i=new Bk({value:{case:"chatMessage",value:new Kk(Object.assign(Object.assign({},n),{timestamp:nx.parse(n.timestamp),editTimestamp:nx.parse(n.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,Uk.RELIABLE),this.emit($S.ChatMessage,n),n}))}sendText(e,t){return bC(this,void 0,void 0,(function*(){var n;const i=crypto.randomUUID(),r=(new TextEncoder).encode(e).byteLength,o=null===(n=null===t||void 0===t?void 0:t.attachments)||void 0===n?void 0:n.map((()=>crypto.randomUUID())),s=new Array(o?o.length+1:1).fill(0),a=(e,n)=>{var i;s[n]=e;const r=s.reduce(((e,t)=>e+t),0);null===(i=null===t||void 0===t?void 0:t.onProgress)||void 0===i||i.call(t,r)},l=yield this.streamText({streamId:i,totalSize:r,destinationIdentities:null===t||void 0===t?void 0:t.destinationIdentities,topic:null===t||void 0===t?void 0:t.topic,attachedStreamIds:o,attributes:null===t||void 0===t?void 0:t.attributes});return yield l.write(e),a(1,0),yield l.close(),(null===t||void 0===t?void 0:t.attachments)&&o&&(yield Promise.all(t.attachments.map(((e,n)=>bC(this,void 0,void 0,(function*(){return this._sendFile(o[n],e,{topic:t.topic,mimeType:e.type,onProgress:e=>{a(e,n+1)}})})))))),l.info}))}streamText(e){return bC(this,void 0,void 0,(function*(){var t,n;const i=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),r={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:null!==(n=null===e||void 0===e?void 0:e.topic)&&void 0!==n?n:"",size:null===e||void 0===e?void 0:e.totalSize,attributes:null===e||void 0===e?void 0:e.attributes},o=new dw({streamId:i,mimeType:r.mimeType,topic:r.topic,timestamp:XT(r.timestamp),totalLength:XT(null===e||void 0===e?void 0:e.totalSize),attributes:r.attributes,contentHeader:{case:"textHeader",value:new lw({version:null===e||void 0===e?void 0:e.version,attachedStreamIds:null===e||void 0===e?void 0:e.attachedStreamIds,replyToStreamId:null===e||void 0===e?void 0:e.replyToStreamId,operationType:"update"===(null===e||void 0===e?void 0:e.type)?aw.UPDATE:aw.CREATE})}}),s=null===e||void 0===e?void 0:e.destinationIdentities,a=new Bk({destinationIdentities:s,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(a,Uk.RELIABLE);let l=0;const c=this,d=new WritableStream({write(e){return bC(this,void 0,void 0,(function*(){for(const t of function(e,t){const n=[];let i=(new TextEncoder).encode(e);for(;i.length>t;){let e=t;for(;e>0;){const t=i[e];if(void 0!==t&&128!==(192&t))break;e--}n.push(i.slice(0,e)),i=i.slice(e)}return i.length>0&&n.push(i),n}(e,15e3)){yield c.engine.waitForBufferStatusLow(Uk.RELIABLE);const e=new uw({content:t,streamId:i,chunkIndex:XT(l)}),n=new Bk({destinationIdentities:s,value:{case:"streamChunk",value:e}});yield c.engine.sendDataPacket(n,Uk.RELIABLE),l+=1}}))},close(){return bC(this,void 0,void 0,(function*(){const e=new hw({streamId:i}),t=new Bk({destinationIdentities:s,value:{case:"streamTrailer",value:e}});yield c.engine.sendDataPacket(t,Uk.RELIABLE)}))},abort(e){console.log("Sink error:",e)}});let u=()=>bC(this,void 0,void 0,(function*(){yield h.close()}));c.engine.once(zS.Closing,u);const h=new D_(d,r,(()=>this.engine.off(zS.Closing,u)));return h}))}sendFile(e,t){return bC(this,void 0,void 0,(function*(){const n=crypto.randomUUID();return yield this._sendFile(n,e,t),{id:n}}))}_sendFile(e,t,n){return bC(this,void 0,void 0,(function*(){var i;const r=yield this.streamBytes({streamId:e,totalSize:t.size,name:t.name,mimeType:null!==(i=null===n||void 0===n?void 0:n.mimeType)&&void 0!==i?i:t.type,topic:null===n||void 0===n?void 0:n.topic,destinationIdentities:null===n||void 0===n?void 0:n.destinationIdentities}),o=t.stream().getReader();for(;;){const{done:e,value:t}=yield o.read();if(e)break;yield r.write(t)}return yield r.close(),r.info}))}streamBytes(e){return bC(this,void 0,void 0,(function*(){var t,n,i,r,o;const s=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),a=null===e||void 0===e?void 0:e.destinationIdentities,l={id:s,mimeType:null!==(n=null===e||void 0===e?void 0:e.mimeType)&&void 0!==n?n:"application/octet-stream",topic:null!==(i=null===e||void 0===e?void 0:e.topic)&&void 0!==i?i:"",timestamp:Date.now(),attributes:null===e||void 0===e?void 0:e.attributes,size:null===e||void 0===e?void 0:e.totalSize,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"unknown"},c=new dw({totalLength:XT(null!==(o=l.size)&&void 0!==o?o:0),mimeType:l.mimeType,streamId:s,topic:l.topic,timestamp:XT(Date.now()),contentHeader:{case:"byteHeader",value:new cw({name:l.name})}}),d=new Bk({destinationIdentities:a,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(d,Uk.RELIABLE);let u=0;const h=new Py,p=this.engine,f=this.log,m=new WritableStream({write(e){return bC(this,void 0,void 0,(function*(){const t=yield h.lock();let n=0;try{for(;n<e.byteLength;){const t=e.slice(n,n+15e3);yield p.waitForBufferStatusLow(Uk.RELIABLE);const i=new Bk({destinationIdentities:a,value:{case:"streamChunk",value:new uw({content:t,streamId:s,chunkIndex:XT(u)})}});yield p.sendDataPacket(i,Uk.RELIABLE),u+=1,n+=t.byteLength}}finally{t()}}))},close(){return bC(this,void 0,void 0,(function*(){const e=new hw({streamId:s}),t=new Bk({destinationIdentities:a,value:{case:"streamTrailer",value:e}});yield p.sendDataPacket(t,Uk.RELIABLE)}))},abort(e){f.error("Sink error:",e)}});return new L_(m,l)}))}performRpc(e){return bC(this,arguments,void 0,(function(e){var t=this;let{destinationIdentity:n,method:i,payload:r,responseTimeout:o=1e4}=e;return function*(){return new Promise(((e,s)=>bC(t,void 0,void 0,(function*(){var t,a,l,c;if(i_(r)>15360)return void s(n_.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));if((null===(a=null===(t=this.engine.latestJoinResponse)||void 0===t?void 0:t.serverInfo)||void 0===a?void 0:a.version)&&DT(null===(c=null===(l=this.engine.latestJoinResponse)||void 0===l?void 0:l.serverInfo)||void 0===c?void 0:c.version,"1.8.0")<0)return void s(n_.builtIn("UNSUPPORTED_SERVER"));const d=crypto.randomUUID();yield this.publishRpcRequest(n,d,i,r,o-2e3);const u=setTimeout((()=>{this.pendingAcks.delete(d),s(n_.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(d),clearTimeout(h)}),2e3);this.pendingAcks.set(d,{resolve:()=>{clearTimeout(u)},participantIdentity:n});const h=setTimeout((()=>{this.pendingResponses.delete(d),s(n_.builtIn("RESPONSE_TIMEOUT"))}),o);this.pendingResponses.set(d,{resolve:(t,n)=>{clearTimeout(h),this.pendingAcks.has(d)&&(console.warn("RPC response received before ack",d),this.pendingAcks.delete(d),clearTimeout(u)),n?s(n):e(null!==t&&void 0!==t?t:"")},participantIdentity:n})}))))}()}))}registerRpcMethod(e,t){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const t=this.pendingAcks.get(e);t?(t.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,t,n){const i=this.pendingResponses.get(e);i?(i.resolve(t,n),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,t,n,i,r){return bC(this,void 0,void 0,(function*(){const o=new Bk({destinationIdentities:[e],kind:Uk.RELIABLE,value:{case:"rpcRequest",value:new Gk({id:t,method:n,payload:i,responseTimeoutMs:r,version:1})}});yield this.engine.sendDataPacket(o,Uk.RELIABLE)}))}handleParticipantDisconnected(e){for(const[t,{participantIdentity:n}]of this.pendingAcks)n===e&&this.pendingAcks.delete(t);for(const[t,{participantIdentity:n,resolve:i}]of this.pendingResponses)n===e&&(i(null,n_.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(t))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter((e=>"video"===e.mime.split("/")[0].toLowerCase()))}updateInfo(e){return e.sid===this.sid&&(!!super.updateInfo(e)&&(e.tracks.forEach((e=>{var t,n;const i=this.trackPublications.get(e.sid);if(i){const r=i.isMuted||null!==(n=null===(t=i.track)||void 0===t?void 0:t.isUpstreamPaused)&&void 0!==n&&n;r!==e.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),gE(i)),{mutedOnServer:r})),this.engine.client.sendMuteTrack(e.sid,r))}})),!0))}getPublicationForTrack(e){let t;return this.trackPublications.forEach((n=>{const i=n.track;i&&(e instanceof MediaStreamTrack?(nE(i)||tE(i))&&i.mediaStreamTrack===e&&(t=n):e===i&&(t=n))})),t}waitForPendingPublicationOfSource(e){return bC(this,void 0,void 0,(function*(){const t=Date.now();for(;Date.now()<t+1e4;){const t=Array.from(this.pendingPublishPromises.entries()).find((t=>{let[n]=t;return n.source===e}));if(t)return t[1];yield kT(20)}}))}}class Q_ extends H_{constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=aT.HIGH,this.handleEnded=e=>{this.setTrack(void 0),this.emit(VS.Ended,e)},this.handleVisibilityChange=e=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(e),this.logContext),this.disabled=!e,this.emitTrackUpdate()},this.handleVideoDimensionsChange=e=>{this.log.debug("adaptivestream video dimensions ".concat(e.width,"x").concat(e.height),this.logContext),this.videoDimensions=e,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Iw({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Jk({participantSid:"",trackSids:[this.trackSid]})]});this.emit(VS.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return!1===this.subscribed?H_.SubscriptionStatus.Unsubscribed:super.isSubscribed?H_.SubscriptionStatus.Subscribed:H_.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?H_.PermissionStatus.Allowed:H_.PermissionStatus.NotAllowed}get isSubscribed(){return!1!==this.subscribed&&super.isSubscribed}get isDesired(){return!1!==this.subscribed}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,n;this.isManualOperationAllowed()&&((null===(t=this.videoDimensions)||void 0===t?void 0:t.width)===e.width&&(null===(n=this.videoDimensions)||void 0===n?void 0:n.height)===e.height||(oE(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&oE(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const t=this.subscriptionStatus,n=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(VS.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(VS.VisibilityChanged,this.handleVisibilityChange),i.off(VS.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(VS.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(VS.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(VS.VisibilityChanged,this.handleVisibilityChange),e.on(VS.Ended,this.handleEnded),this.emit(VS.Subscribed,e)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}setSubscriptionError(e){this.emit(VS.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?VS.Muted:VS.Unmuted)}emitSubscriptionUpdateIfChanged(e){const t=this.subscriptionStatus;e!==t&&this.emit(VS.SubscriptionStatusChanged,t,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(VS.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===lT.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):!!this.isDesired||(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return oE(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Pw({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=aT.HIGH,this.emit(VS.UpdateSettings,e)}}class X_ extends G_{static fromParticipantInfo(e,t,n){return new X_(e,t.sid,t.identity,t.name,t.metadata,t.attributes,n,t.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,t,n,i,r,o,s){super(t,n||"",i,r,o,s,arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ok.STANDARD),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(VS.UpdateSettings,(t=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),gE(e))),this.signalClient.sendUpdateTrackSettings(t)})),e.on(VS.UpdateSubscription,(e=>{e.participantTracks.forEach((e=>{e.participantSid=this.sid})),this.signalClient.sendUpdateSubscription(e)})),e.on(VS.SubscriptionPermissionChanged,(t=>{this.emit($S.TrackSubscriptionPermissionChanged,e,t)})),e.on(VS.SubscriptionStatusChanged,(t=>{this.emit($S.TrackSubscriptionStatusChanged,e,t)})),e.on(VS.Subscribed,(t=>{this.emit($S.TrackSubscribed,t,e)})),e.on(VS.Unsubscribed,(t=>{this.emit($S.TrackUnsubscribed,t,e)})),e.on(VS.SubscriptionFailed,(t=>{this.emit($S.TrackSubscriptionFailed,e.trackSid,t)}))}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setVolume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lT.Source.Microphone;this.volumeMap.set(t,e);const n=this.getTrackPublication(t);n&&n.track&&n.track.setVolume(e)}getVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lT.Source.Microphone;const t=this.getTrackPublication(e);return t&&t.track?t.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,t,n,i,r,o){let s=this.getTrackPublicationBySid(t);if(s||t.startsWith("TR")||this.trackPublications.forEach((t=>{s||e.kind!==t.kind.toString()||(s=t)})),!s)return 0===o?(this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:t})),void this.emit($S.TrackSubscriptionFailed,t)):(void 0===o&&(o=20),void setTimeout((()=>{this.addSubscribedMediaTrack(e,t,n,i,r,o-1)}),150));if("ended"===e.readyState)return this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),gE(s))),void this.emit($S.TrackSubscriptionFailed,t);let a;return a="video"===e.kind?new U_(e,t,i,r):new B_(e,t,i,this.audioContext,this.audioOutput),a.source=s.source,a.isMuted=s.isMuted,a.setMediaStream(n),a.start(),s.setTrack(a),this.volumeMap.has(s.source)&&iE(a)&&ZT(a)&&a.setVolume(this.volumeMap.get(s.source)),s}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const t=new Map,n=new Map;return e.tracks.forEach((e=>{var i,r;let o=this.getTrackPublicationBySid(e.sid);if(o)o.updateInfo(e);else{const t=lT.kindFromProto(e.type);if(!t)return;o=new Q_(t,e,null===(i=this.signalClient.connectOptions)||void 0===i?void 0:i.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:null===(r=this.loggerOptions)||void 0===r?void 0:r.loggerName}),o.updateInfo(e),n.set(e.sid,o);const s=Array.from(this.trackPublications.values()).find((e=>e.source===(null===o||void 0===o?void 0:o.source)));s&&o.source!==lT.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:gE(s),newTrack:gE(o)})),this.addTrackPublication(o)}t.set(e.sid,o)})),this.trackPublications.forEach((e=>{t.has(e.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),gE(e))),this.unpublishTrack(e.trackSid,!0))})),n.forEach((e=>{this.emit($S.TrackPublished,e)})),!0}unpublishTrack(e,t){const n=this.trackPublications.get(e);if(!n)return;const{track:i}=n;switch(i&&(i.stop(),n.setTrack(void 0)),this.trackPublications.delete(e),n.kind){case lT.Kind.Audio:this.audioTrackPublications.delete(e);break;case lT.Kind.Video:this.videoTrackPublications.delete(e)}t&&this.emit($S.TrackUnpublished,n)}setAudioOutput(e){return bC(this,void 0,void 0,(function*(){this.audioOutput=e;const t=[];this.audioTrackPublications.forEach((n=>{var i;ZT(n.track)&&iE(n.track)&&t.push(n.track.setSinkId(null!==(i=e.deviceId)&&void 0!==i?i:"default"))})),yield Promise.all(t)}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:n})),super.emit(e,...n)}}var J_;!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"}(J_||(J_={}));class Z_ extends CC.EventEmitter{constructor(e){var t,n,i,r;if(super(),t=this,this.state=J_.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=pC,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(e,t,n)=>bC(this,void 0,void 0,(function*(){var i;if("undefined"===typeof RTCPeerConnection||!wT()&&!CT())throw AT()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const r=yield this.disconnectLock.lock();if(this.state===J_.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),r(),Promise.resolve();if(this.connectFuture)return r(),this.connectFuture.promise;this.setAndEmitConnectionState(J_.Connecting),(null===(i=this.regionUrlProvider)||void 0===i?void 0:i.getServerUrl().toString())!==e&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),MT(new URL(e))&&(void 0===this.regionUrlProvider?this.regionUrlProvider=new A_(e,t):this.regionUrlProvider.updateToken(t),this.regionUrlProvider.fetchRegionSettings().then((e=>{var t;null===(t=this.regionUrlProvider)||void 0===t||t.setServerReportedRegions(e)})).catch((e=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:e}))})));const o=(i,s,a)=>bC(this,void 0,void 0,(function*(){var l,c;this.abortController&&this.abortController.abort();const d=new AbortController;this.abortController=d,null===r||void 0===r||r();try{yield this.attemptConnection(null!==a&&void 0!==a?a:e,t,n,d),this.abortController=void 0,i()}catch(K$){if(this.regionUrlProvider&&K$ instanceof HS&&K$.reason!==LS.Cancelled&&K$.reason!==LS.NotAllowed){let t=null;try{t=yield this.regionUrlProvider.getNextBestRegionUrl(null===(l=this.abortController)||void 0===l?void 0:l.signal)}catch(u){if(u instanceof HS&&(401===u.status||u.reason===LS.Cancelled))return this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),void s(u)}t&&!(null===(c=this.abortController)||void 0===c?void 0:c.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(K$.message,". Retrying with another region: ").concat(t),this.logContext),this.recreateEngine(),yield o(i,s,t)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,YT(K$)),s(K$))}else{let t=Sk.UNKNOWN_REASON;K$ instanceof HS&&(t=YT(K$)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t),s(K$)}}})),s=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new qT(((e,t)=>{o(e,t,s)}),(()=>{this.clearConnectionFutures()})),this.connectFuture.promise})),this.connectSignal=(e,t,n,i,r,o)=>bC(this,void 0,void 0,(function*(){var s,a,l;const c=yield n.join(e,t,{autoSubscribe:i.autoSubscribe,adaptiveStream:"object"===typeof r.adaptiveStream||r.adaptiveStream,maxRetries:i.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:i.websocketTimeout},o.signal);let d=c.serverInfo;if(d||(d={version:c.serverVersion,region:c.serverRegion}),this.serverInfo=d,this.log.debug("connected to Livekit Server ".concat(Object.entries(d).map((e=>{let[t,n]=e;return"".concat(t,": ").concat(n)})).join(", ")),{room:null===(s=c.room)||void 0===s?void 0:s.name,roomSid:null===(a=c.room)||void 0===a?void 0:a.sid,identity:null===(l=c.participant)||void 0===l?void 0:l.identity}),!d.version)throw new KS("unknown server version");return"0.15.1"===d.version&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),r.dynacast=!1),c})),this.applyJoinResponse=e=>{const t=e.participant;if(this.localParticipant.sid=t.sid,this.localParticipant.identity=t.identity,this.localParticipant.setEnabledPublishCodecs(e.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(e.sifTrailer)}catch(K$){this.log.error(K$ instanceof Error?K$.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:K$}))}this.handleParticipantUpdates([t,...e.otherParticipants]),e.room&&this.handleRoomUpdate(e.room)},this.attemptConnection=(e,t,n,i)=>bC(this,void 0,void 0,(function*(){var r,o;this.state===J_.Reconnecting||this.isResuming||(null===(r=this.engine)||void 0===r?void 0:r.pendingReconnect)?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),(null===(o=this.regionUrlProvider)||void 0===o?void 0:o.isCloud())&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},ZE),n),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const n=yield this.connectSignal(e,t,this.engine,this.connOptions,this.options,i);this.applyJoinResponse(n),this.setupLocalParticipantEvents(),this.emit(US.SignalConnected)}catch(s){yield this.engine.close(),this.recreateEngine();const e=new HS("could not establish signal connection",LS.ServerUnreachable);throw s instanceof Error&&(e.message="".concat(e.message,": ").concat(s.message)),s instanceof HS&&(e.reason=s.reason,e.status=s.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:s})),e}if(i.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new HS("Connection attempt aborted",LS.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,i)}catch(K$){throw yield this.engine.close(),this.recreateEngine(),K$}RT()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),RT()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(J_.Connected),this.emit(US.Connected),this.registerConnectionReconcile()})),this.disconnect=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return bC(t,[...n],void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i,r,o;const s=yield e.disconnectLock.lock();try{if(e.state===J_.Disconnected)return void e.log.debug("already disconnected",e.logContext);e.log.info("disconnect from room",Object.assign({},e.logContext)),(e.state===J_.Connecting||e.state===J_.Reconnecting||e.isResuming)&&(e.log.warn("abort connection attempt",e.logContext),null===(n=e.abortController)||void 0===n||n.abort(),null===(r=null===(i=e.connectFuture)||void 0===i?void 0:i.reject)||void 0===r||r.call(i,new HS("Client initiated disconnect",LS.Cancelled)),e.connectFuture=void 0),(null===(o=e.engine)||void 0===o?void 0:o.client.isDisconnected)||(yield e.engine.client.sendLeave()),e.engine&&(yield e.engine.close()),e.handleDisconnect(t,Sk.CLIENT_INITIATED),e.engine=void 0}finally{s()}}()}))},this.onPageLeave=()=>bC(this,void 0,void 0,(function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()})),this.startAudio=()=>bC(this,void 0,void 0,(function*(){const e=[],t=tT();if(t&&"iOS"===t.os){const t="livekit-dummy-audio-el";let n=document.getElementById(t);if(!n){n=document.createElement("audio"),n.id=t,n.autoplay=!0,n.hidden=!0;const e=WT();e.enabled=!0;const i=new MediaStream([e]);n.srcObject=i,document.addEventListener("visibilitychange",(()=>{n&&(n.srcObject=document.hidden?null:i,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))})),document.body.append(n),this.once(US.Disconnected,(()=>{null===n||void 0===n||n.remove(),n=null}))}e.push(n)}this.remoteParticipants.forEach((t=>{t.audioTrackPublications.forEach((t=>{t.track&&t.track.attachedElements.forEach((t=>{e.push(t)}))}))}));try{yield Promise.all([this.acquireAudioContext(),...e.map((e=>(e.muted=!1,e.play())))]),this.handleAudioPlaybackStarted()}catch(n){throw this.handleAudioPlaybackFailed(n),n}})),this.startVideo=()=>bC(this,void 0,void 0,(function*(){const e=[];for(const t of this.remoteParticipants.values())t.videoTrackPublications.forEach((t=>{var n;null===(n=t.track)||void 0===n||n.attachedElements.forEach((t=>{e.includes(t)||e.push(t)}))}));yield Promise.all(e.map((e=>e.play()))).then((()=>{this.handleVideoPlaybackStarted()})).catch((e=>{"NotAllowedError"===e.name?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)}))})),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const e of this.remoteParticipants.values())this.handleParticipantDisconnected(e.identity,e);this.setAndEmitConnectionState(J_.Reconnecting)&&this.emit(US.Reconnecting)},this.handleSignalRestarted=e=>bC(this,void 0,void 0,(function*(){this.log.debug("signal reconnected to server, region ".concat(e.serverRegion),Object.assign(Object.assign({},this.logContext),{region:e.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(e);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(t){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:t}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:e.serverRegion}))}catch(n){return}this.setAndEmitConnectionState(J_.Connected),this.emit(US.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()})),this.handleParticipantUpdates=e=>{e.forEach((e=>{var t;if(e.identity===this.localParticipant.identity)return void this.localParticipant.updateInfo(e);""===e.identity&&(e.identity=null!==(t=this.sidToIdentity.get(e.sid))&&void 0!==t?t:"");let n=this.remoteParticipants.get(e.identity);e.state===Mk.DISCONNECTED?this.handleParticipantDisconnected(e.identity,n):n=this.getOrCreateParticipant(e.identity,e)}))},this.handleActiveSpeakersUpdate=e=>{const t=[],n={};e.forEach((e=>{if(n[e.sid]=!0,e.sid===this.localParticipant.sid)this.localParticipant.audioLevel=e.level,this.localParticipant.setIsSpeaking(!0),t.push(this.localParticipant);else{const n=this.getRemoteParticipantBySid(e.sid);n&&(n.audioLevel=e.level,n.setIsSpeaking(!0),t.push(n))}})),n[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach((e=>{n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),this.activeSpeakers=t,this.emitWhenConnected(US.ActiveSpeakersChanged,t)},this.handleSpeakersChanged=e=>{const t=new Map;this.activeSpeakers.forEach((e=>{const n=this.remoteParticipants.get(e.identity);n&&n.sid!==e.sid||t.set(e.sid,e)})),e.forEach((e=>{let n=this.getRemoteParticipantBySid(e.sid);e.sid===this.localParticipant.sid&&(n=this.localParticipant),n&&(n.audioLevel=e.level,n.setIsSpeaking(e.active),e.active?t.set(e.sid,n):t.delete(e.sid))}));const n=Array.from(t.values());n.sort(((e,t)=>t.audioLevel-e.audioLevel)),this.activeSpeakers=n,this.emitWhenConnected(US.ActiveSpeakersChanged,n)},this.handleStreamStateUpdate=e=>{e.streamStates.forEach((e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);if(!n||!n.track)return;const i=lT.streamStateFromProto(e.state);i!==n.track.streamState&&(n.track.streamState=i,t.emit($S.TrackStreamStateChanged,n,n.track.streamState),this.emitWhenConnected(US.TrackStreamStateChanged,n,n.track.streamState,t))}))},this.handleSubscriptionPermissionUpdate=e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setAllowed(e.allowed)},this.handleSubscriptionError=e=>{const t=Array.from(this.remoteParticipants.values()).find((t=>t.trackPublications.has(e.trackSid)));if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setSubscriptionError(e.err)},this.handleDataPacket=e=>{const t=this.remoteParticipants.get(e.participantIdentity);if("user"===e.value.case)this.handleUserPacket(t,e.value.value,e.kind);else if("transcription"===e.value.case)this.handleTranscription(t,e.value.value);else if("sipDtmf"===e.value.case)this.handleSipDtmf(t,e.value.value);else if("chatMessage"===e.value.case)this.handleChatMessage(t,e.value.value);else if("metrics"===e.value.case)this.handleMetrics(e.value.value,t);else if("streamHeader"===e.value.case)this.handleStreamHeader(e.value.value,e.participantIdentity);else if("streamChunk"===e.value.case)this.handleStreamChunk(e.value.value);else if("streamTrailer"===e.value.case)this.handleStreamTrailer(e.value.value);else if("rpcRequest"===e.value.case){const t=e.value.value;this.handleIncomingRpcRequest(e.participantIdentity,t.id,t.method,t.payload,t.responseTimeoutMs,t.version)}},this.handleUserPacket=(e,t,n)=>{this.emit(US.DataReceived,t.payload,e,n,t.topic),null===e||void 0===e||e.emit($S.DataReceived,t.payload,n)},this.handleSipDtmf=(e,t)=>{this.emit(US.SipDTMFReceived,t,e),null===e||void 0===e||e.emit($S.SipDTMFReceived,t)},this.bufferedSegments=new Map,this.handleTranscription=(e,t)=>{const n=t.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(t.transcribedParticipantIdentity),i=null===n||void 0===n?void 0:n.trackPublications.get(t.trackId),r=function(e,t){return e.segments.map((e=>{let{id:n,text:i,language:r,startTime:o,endTime:s,final:a}=e;var l;const c=null!==(l=t.get(n))&&void 0!==l?l:Date.now(),d=Date.now();return a?t.delete(n):t.set(n,c),{id:n,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(s.toString()),final:a,language:r,firstReceivedTime:c,lastReceivedTime:d}}))}(t,this.transcriptionReceivedTimes);null===i||void 0===i||i.emit(VS.TranscriptionReceived,r),null===n||void 0===n||n.emit($S.TranscriptionReceived,r,i),this.emit(US.TranscriptionReceived,r,n,i)},this.handleChatMessage=(e,t)=>{const n=function(e){const{id:t,timestamp:n,message:i,editTimestamp:r}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}(t);this.emit(US.ChatMessage,n,e)},this.handleMetrics=(e,t)=>{this.emit(US.MetricsReceived,e,t)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(US.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=e=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:e})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(US.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(US.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(US.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>bC(this,void 0,void 0,(function*(){var e,t,n;const i=xE.getInstance().previousDevices,r=yield xE.getInstance().getDevices(void 0,!1),o=tT();if("Chrome"===(null===o||void 0===o?void 0:o.name)&&"iOS"!==o.os)for(let a of r){const e=i.find((e=>e.deviceId===a.deviceId));e&&""!==e.label&&e.kind===a.kind&&e.label!==a.label&&"default"===this.getActiveDevice(a.kind)&&this.emit(US.ActiveDeviceChanged,a.kind,a.deviceId)}const s=["audiooutput","audioinput","videoinput"];for(let a of s){const o=uE(a),s=this.localParticipant.getTrackPublication(o);if(s&&(null===(e=s.track)||void 0===e?void 0:e.isUserProvided))continue;const l=r.filter((e=>e.kind===a)),c=this.getActiveDevice(a);c===(null===(t=i.filter((e=>e.kind===a))[0])||void 0===t?void 0:t.deviceId)&&l.length>0&&(null===(n=l[0])||void 0===n?void 0:n.deviceId)!==c?yield this.switchActiveDevice(a,l[0].deviceId):"audioinput"===a&&!_T()||"videoinput"===a||l.length>0&&!l.find((e=>e.deviceId===this.getActiveDevice(a)))&&(yield this.switchActiveDevice(a,l[0].deviceId))}this.emit(US.MediaDevicesChanged)})),this.handleRoomUpdate=e=>{const t=this.roomInfo;this.roomInfo=e,t&&t.metadata!==e.metadata&&this.emitWhenConnected(US.RoomMetadataChanged,e.metadata),(null===t||void 0===t?void 0:t.activeRecording)!==e.activeRecording&&this.emitWhenConnected(US.RecordingStatusChanged,e.activeRecording)},this.handleConnectionQualityUpdate=e=>{e.updates.forEach((e=>{if(e.participantSid===this.localParticipant.sid)return void this.localParticipant.setConnectionQuality(e.quality);const t=this.getRemoteParticipantBySid(e.participantSid);t&&t.setConnectionQuality(e.quality)}))},this.onLocalParticipantMetadataChanged=e=>{this.emit(US.ParticipantMetadataChanged,e,this.localParticipant)},this.onLocalParticipantNameChanged=e=>{this.emit(US.ParticipantNameChanged,e,this.localParticipant)},this.onLocalAttributesChanged=e=>{this.emit(US.ParticipantAttributesChanged,e,this.localParticipant)},this.onLocalTrackMuted=e=>{this.emit(US.TrackMuted,e,this.localParticipant)},this.onLocalTrackUnmuted=e=>{this.emit(US.TrackUnmuted,e,this.localParticipant)},this.onTrackProcessorUpdate=e=>{var t;null===(t=null===e||void 0===e?void 0:e.onPublish)||void 0===t||t.call(e,this)},this.onLocalTrackPublished=e=>bC(this,void 0,void 0,(function*(){var t,n,i,r,o,s;if(null===(t=e.track)||void 0===t||t.on(VS.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.on(VS.Restarted,this.onLocalTrackRestarted),null===(o=null===(r=null===(i=e.track)||void 0===i?void 0:i.getProcessor())||void 0===r?void 0:r.onPublish)||void 0===o||o.call(r,this),this.emit(US.LocalTrackPublished,e,this.localParticipant),nE(e.track)){(yield e.track.checkForSilence())&&this.emit(US.LocalAudioSilenceDetected,e)}const a=yield null===(s=e.track)||void 0===s?void 0:s.getDeviceId(!1),l=hE(e.source);l&&a&&a!==this.localParticipant.activeDeviceMap.get(l)&&(this.localParticipant.activeDeviceMap.set(l,a),this.emit(US.ActiveDeviceChanged,l,a))})),this.onLocalTrackUnpublished=e=>{var t,n;null===(t=e.track)||void 0===t||t.off(VS.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.off(VS.Restarted,this.onLocalTrackRestarted),this.emit(US.LocalTrackUnpublished,e,this.localParticipant)},this.onLocalTrackRestarted=e=>bC(this,void 0,void 0,(function*(){const t=yield e.getDeviceId(!1),n=hE(e.source);n&&t&&t!==this.localParticipant.activeDeviceMap.get(n)&&(this.log.debug("local track restarted, setting ".concat(n," ").concat(t," active"),this.logContext),this.localParticipant.activeDeviceMap.set(n,t),this.emit(US.ActiveDeviceChanged,n,t))})),this.onLocalConnectionQualityChanged=e=>{this.emit(US.ConnectionQualityChanged,e,this.localParticipant)},this.onMediaDevicesError=e=>{this.emit(US.MediaDevicesError,e)},this.onLocalParticipantPermissionsChanged=e=>{this.emit(US.ParticipantPermissionsChanged,e,this.localParticipant)},this.onLocalChatMessageSent=e=>{this.emit(US.ChatMessage,e,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},JE),e),this.log=fC(null!==(n=this.options.loggerName)&&void 0!==n?n:uC.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},QE),null===e||void 0===e?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},XE),null===e||void 0===e?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},YE),null===e||void 0===e?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Py,this.localParticipant=new Y_("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",KT(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",KT(this.options.audioCaptureDefaults.deviceId)),(null===(i=this.options.audioOutput)||void 0===i?void 0:i.deviceId)&&this.switchActiveDevice("audiooutput",KT(this.options.audioOutput.deviceId)).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),this.options.e2ee&&this.setupE2EE(),RT()){const e=new AbortController;null===(r=navigator.mediaDevices)||void 0===r||r.addEventListener("devicechange",this.handleDeviceChange,{signal:e.signal}),Z_.cleanupRegistry&&Z_.cleanupRegistry.register(this,(()=>{e.abort()}))}}registerTextStreamHandler(e,t){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,t)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,t){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,t)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,t){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,t,n,i,r,o){return bC(this,void 0,void 0,(function*(){if(yield this.engine.publishRpcAck(e,t),1!==o)return void(yield this.engine.publishRpcResponse(e,t,null,n_.builtIn("UNSUPPORTED_VERSION")));const s=this.rpcHandlers.get(n);if(!s)return void(yield this.engine.publishRpcResponse(e,t,null,n_.builtIn("UNSUPPORTED_METHOD")));let a=null,l=null;try{const o=yield s({requestId:t,callerIdentity:e,payload:i,responseTimeout:r});i_(o)>15360?(a=n_.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(n))):l=o}catch(c){c instanceof n_?a=c:(console.warn("Uncaught error returned by RPC handler for ".concat(n,". Returning APPLICATION_ERROR instead."),c),a=n_.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,t,l,a)}))}setE2EEEnabled(e){return bC(this,void 0,void 0,(function*(){if(!this.e2eeManager)throw Error("e2ee not configured, please set e2ee settings within the room options");yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),""!==this.localParticipant.identity&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity)}))}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new bE(this.options.e2ee),this.e2eeManager.on(MS.ParticipantEncryptionStatusChanged,((e,t)=>{(function(e){return e.isLocal})(t)&&(this.isE2EEEnabled=e),this.emit(US.ParticipantEncryptionStatusChanged,e,t)})),this.e2eeManager.on(MS.EncryptionError,(e=>this.emit(US.EncryptionError,e))),null===(e=this.e2eeManager)||void 0===e||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:null===(e=this.roomInfo)||void 0===e?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.activeRecording)&&void 0!==t&&t}getSid(){return bC(this,void 0,void 0,(function*(){return this.state===J_.Disconnected?"":this.roomInfo&&""!==this.roomInfo.sid?this.roomInfo.sid:new Promise(((e,t)=>{const n=t=>{""!==t.sid&&(this.engine.off(zS.RoomUpdate,n),e(t.sid))};this.engine.on(zS.RoomUpdate,n),this.once(US.Disconnected,(()=>{this.engine.off(zS.RoomUpdate,n),t("Room disconnected before room server id was available")}))}))}))}get name(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.name)&&void 0!==t?t:""}get metadata(){var e;return null===(e=this.roomInfo)||void 0===e?void 0:e.metadata}get numParticipants(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numParticipants)&&void 0!==t?t:0}get numPublishers(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numPublishers)&&void 0!==t?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new P_(this.options),this.engine.on(zS.ParticipantUpdate,this.handleParticipantUpdates).on(zS.RoomUpdate,this.handleRoomUpdate).on(zS.SpeakersChanged,this.handleSpeakersChanged).on(zS.StreamStateChanged,this.handleStreamStateUpdate).on(zS.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(zS.SubscriptionError,this.handleSubscriptionError).on(zS.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(zS.MediaTrackAdded,((e,t,n)=>{this.onTrackAdded(e,t,n)})).on(zS.Disconnected,(e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)})).on(zS.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(zS.DataPacketReceived,this.handleDataPacket).on(zS.Resuming,(()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(J_.SignalReconnecting)&&this.emit(US.SignalReconnecting)})).on(zS.Resumed,(()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(J_.Connected)&&this.emit(US.Reconnected)})).on(zS.SignalResumed,(()=>{this.bufferedEvents=[],(this.state===J_.Reconnecting||this.isResuming)&&this.sendSyncState()})).on(zS.Restarting,this.handleRestarting).on(zS.SignalRestarted,this.handleSignalRestarted).on(zS.Offline,(()=>{this.setAndEmitConnectionState(J_.Reconnecting)&&this.emit(US.Reconnecting)})).on(zS.DCBufferStatusChanged,((e,t)=>{this.emit(US.DCBufferStatusChanged,e,t)})).on(zS.LocalTrackSubscribed,(e=>{const t=this.localParticipant.getTrackPublications().find((t=>{let{trackSid:n}=t;return n===e}));t?(this.localParticipant.emit($S.LocalTrackSubscribed,t),this.emitWhenConnected(US.LocalTrackSubscribed,t,this.localParticipant)):this.log.warn("could not find local track subscription for subscribed event",this.logContext)})),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return xE.getInstance().getDevices(e,t)}prepareConnection(e,t){return bC(this,void 0,void 0,(function*(){if(this.state===J_.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(MT(new URL(e))&&t){this.regionUrlProvider=new A_(e,t);const n=yield this.regionUrlProvider.getNextBestRegionUrl();n&&this.state===J_.Disconnected&&(this.regionUrl=n,yield fetch(GT(n),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(n),this.logContext))}else yield fetch(GT(e),{method:"HEAD"})}catch(K$){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:K$}))}}}))}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,t){return bC(this,void 0,void 0,(function*(){let n,i=()=>{};switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":n=new Xw({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":n=new Xw({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":n=new Xw({scenario:{case:"serverLeave",value:!0}});break;case"migration":n=new Xw({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>bC(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new Xw({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>bC(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new Xw({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":n=new Xw({scenario:{case:"switchCandidateProtocol",value:"force-tls"===e?2:1}}),i=()=>bC(this,void 0,void 0,(function*(){const e=this.engine.client.onLeave;e&&e(new Mw({reason:Sk.CLIENT_INITIATED,action:Ow.RECONNECT}))}));break;case"subscriber-bandwidth":if(void 0===t||"number"!==typeof t)throw new Error("subscriber-bandwidth requires a number as argument");n=new Xw({scenario:{case:"subscriberBandwidth",value:XT(t)}});break;case"leave-full-reconnect":n=new Xw({scenario:{case:"leaveRequestFullReconnect",value:!0}})}n&&(yield this.engine.client.sendSimulateScenario(n),yield i())}))}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,t){return bC(this,arguments,void 0,(function(e,t){var n=this;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function*(){var r,o,s,a,l,c,d,u;let h=!0,p=!1;const f=i?{exact:t}:t;if("audioinput"===e){p=0===n.localParticipant.audioTrackPublications.size;const t=null!==(r=n.getActiveDevice(e))&&void 0!==r?r:n.options.audioCaptureDefaults.deviceId;n.options.audioCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.audioTrackPublications.values()).filter((e=>e.source===lT.Source.Microphone));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.audioTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(K$){throw n.options.audioCaptureDefaults.deviceId=t,K$}}else if("videoinput"===e){p=0===n.localParticipant.videoTrackPublications.size;const t=null!==(o=n.getActiveDevice(e))&&void 0!==o?o:n.options.videoCaptureDefaults.deviceId;n.options.videoCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.videoTrackPublications.values()).filter((e=>e.source===lT.Source.Camera));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.videoTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(K$){throw n.options.videoCaptureDefaults.deviceId=t,K$}}else if("audiooutput"===e){if(!TT()&&!n.options.webAudioMix||n.options.webAudioMix&&n.audioContext&&!("setSinkId"in n.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");n.options.webAudioMix&&(t=null!==(s=yield xE.getInstance().normalizeDeviceId("audiooutput",t))&&void 0!==s?s:""),null!==(a=(u=n.options).audioOutput)&&void 0!==a||(u.audioOutput={});const i=null!==(l=n.getActiveDevice(e))&&void 0!==l?l:n.options.audioOutput.deviceId;n.options.audioOutput.deviceId=t;try{n.options.webAudioMix&&(null===(c=n.audioContext)||void 0===c||c.setSinkId(t)),yield Promise.all(Array.from(n.remoteParticipants.values()).map((e=>e.setAudioOutput({deviceId:t}))))}catch(K$){throw n.options.audioOutput.deviceId=i,K$}}return(p||"audiooutput"===e)&&(n.localParticipant.activeDeviceMap.set(e,"audiooutput"===e&&(null===(d=n.options.audioOutput)||void 0===d?void 0:d.deviceId)||t),n.emit(US.ActiveDeviceChanged,e,t)),h}()}))}setupLocalParticipantEvents(){this.localParticipant.on($S.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on($S.ParticipantNameChanged,this.onLocalParticipantNameChanged).on($S.AttributesChanged,this.onLocalAttributesChanged).on($S.TrackMuted,this.onLocalTrackMuted).on($S.TrackUnmuted,this.onLocalTrackUnmuted).on($S.LocalTrackPublished,this.onLocalTrackPublished).on($S.LocalTrackUnpublished,this.onLocalTrackUnpublished).on($S.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on($S.MediaDevicesError,this.onMediaDevicesError).on($S.AudioStreamAcquired,this.startAudio).on($S.ChatMessage,this.onLocalChatMessageSent).on($S.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;null===(e=this.engine)||void 0===e||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,t,n){if(this.state===J_.Connecting||this.state===J_.Reconnecting){const i=()=>{this.onTrackAdded(e,t,n),r()},r=()=>{this.off(US.Reconnected,i),this.off(US.Connected,i),this.off(US.Disconnected,r)};return this.once(US.Reconnected,i),this.once(US.Connected,i),void this.once(US.Disconnected,r)}if(this.state===J_.Disconnected)return void this.log.warn("skipping incoming track after Room disconnected",this.logContext);if("ended"===e.readyState)return void this.log.info("skipping incoming track as it already ended",this.logContext);const i=function(e){const t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}(t.id),r=i[0];let o=i[1],s=e.id;if(o&&o.startsWith("TR")&&(s=o),r===this.localParticipant.sid)return void this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);const a=Array.from(this.remoteParticipants.values()).find((e=>e.sid===r));if(!a)return void this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(r),this.logContext);let l;this.options.adaptiveStream&&(l="object"===typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),a.addSubscribedMediaTrack(e,s,t,n,l)}handleDisconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==J_.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{e.unpublishTrack(t.trackSid)}))})),this.localParticipant.trackPublications.forEach((t=>{var n,i,r;t.track&&this.localParticipant.unpublishTrack(t.track,e),e?(null===(n=t.track)||void 0===n||n.detach(),null===(i=t.track)||void 0===i||i.stop()):null===(r=t.track)||void 0===r||r.stopMonitor()})),this.localParticipant.off($S.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off($S.ParticipantNameChanged,this.onLocalParticipantNameChanged).off($S.AttributesChanged,this.onLocalAttributesChanged).off($S.TrackMuted,this.onLocalTrackMuted).off($S.TrackUnmuted,this.onLocalTrackUnmuted).off($S.LocalTrackPublished,this.onLocalTrackPublished).off($S.LocalTrackUnpublished,this.onLocalTrackUnpublished).off($S.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off($S.MediaDevicesError,this.onMediaDevicesError).off($S.AudioStreamAcquired,this.startAudio).off($S.ChatMessage,this.onLocalChatMessageSent).off($S.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&"boolean"===typeof this.options.webAudioMix&&(this.audioContext.close(),this.audioContext=void 0),RT()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),null===(n=navigator.mediaDevices)||void 0===n||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(J_.Disconnected),this.emit(US.Disconnected,t)}}}handleParticipantDisconnected(e,t){var n;this.remoteParticipants.delete(e),t&&(t.trackPublications.forEach((e=>{t.unpublishTrack(e.trackSid,!0)})),this.emit(US.ParticipantDisconnected,t),null===(n=this.localParticipant)||void 0===n||n.handleParticipantDisconnected(t.identity))}handleStreamHeader(e,t){return bC(this,void 0,void 0,(function*(){var n;if("byteHeader"===e.contentHeader.case){const i=this.byteStreamHandlers.get(e.topic);if(!i)return void this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);let r;const o={id:e.streamId,name:null!==(n=e.contentHeader.value.name)&&void 0!==n?n:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:QT(e.timestamp),attributes:e.attributes},s=new ReadableStream({start:t=>{r=t,this.byteStreamControllers.set(e.streamId,{info:o,controller:r,startTime:Date.now()})}});i(new O_(o,s,QT(e.totalLength)),{identity:t})}else if("textHeader"===e.contentHeader.case){const n=this.textStreamHandlers.get(e.topic);if(!n)return void this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);let i;const r={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},o=new ReadableStream({start:t=>{i=t,this.textStreamControllers.set(e.streamId,{info:r,controller:i,startTime:Date.now()})}});n(new N_(r,o,QT(e.totalLength)),{identity:t})}}))}handleStreamChunk(e){const t=this.byteStreamControllers.get(e.streamId);t&&e.content.length>0&&t.controller.enqueue(e);const n=this.textStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e)}handleStreamTrailer(e){const t=this.textStreamControllers.get(e.streamId);t&&(t.info.attributes=Object.assign(Object.assign({},t.info.attributes),e.attributes),t.controller.close(),this.textStreamControllers.delete(e.streamId));const n=this.byteStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.byteStreamControllers.delete(e.streamId))}acquireAudioContext(){return bC(this,void 0,void 0,(function*(){var e,t;if("boolean"!==typeof this.options.webAudioMix&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:this.audioContext&&"closed"!==this.audioContext.state||(this.audioContext=null!==(e=dE())&&void 0!==e?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach((e=>e.setAudioContext(this.audioContext))),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&"suspended"===this.audioContext.state)try{yield Promise.race([this.audioContext.resume(),kT(200)])}catch(K$){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:K$}))}const n="running"===(null===(t=this.audioContext)||void 0===t?void 0:t.state);n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(US.AudioPlaybackStatusChanged,n))}))}createParticipant(e,t){var n;let i;return i=t?X_.fromParticipantInfo(this.engine.client,t,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):new X_(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),(null===(n=this.options.audioOutput)||void 0===n?void 0:n.deviceId)&&i.setAudioOutput(this.options.audioOutput).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),i}getOrCreateParticipant(e,t){if(this.remoteParticipants.has(e)){const n=this.remoteParticipants.get(e);if(t){n.updateInfo(t)&&this.sidToIdentity.set(t.sid,t.identity)}return n}const n=this.createParticipant(e,t);return this.remoteParticipants.set(e,n),this.sidToIdentity.set(t.sid,t.identity),this.emitWhenConnected(US.ParticipantConnected,n),n.on($S.TrackPublished,(e=>{this.emitWhenConnected(US.TrackPublished,e,n)})).on($S.TrackSubscribed,((e,t)=>{e.kind===lT.Kind.Audio?(e.on(VS.AudioPlaybackStarted,this.handleAudioPlaybackStarted),e.on(VS.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):e.kind===lT.Kind.Video&&(e.on(VS.VideoPlaybackFailed,this.handleVideoPlaybackFailed),e.on(VS.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(US.TrackSubscribed,e,t,n)})).on($S.TrackUnpublished,(e=>{this.emit(US.TrackUnpublished,e,n)})).on($S.TrackUnsubscribed,((e,t)=>{this.emit(US.TrackUnsubscribed,e,t,n)})).on($S.TrackMuted,(e=>{this.emitWhenConnected(US.TrackMuted,e,n)})).on($S.TrackUnmuted,(e=>{this.emitWhenConnected(US.TrackUnmuted,e,n)})).on($S.ParticipantMetadataChanged,(e=>{this.emitWhenConnected(US.ParticipantMetadataChanged,e,n)})).on($S.ParticipantNameChanged,(e=>{this.emitWhenConnected(US.ParticipantNameChanged,e,n)})).on($S.AttributesChanged,(e=>{this.emitWhenConnected(US.ParticipantAttributesChanged,e,n)})).on($S.ConnectionQualityChanged,(e=>{this.emitWhenConnected(US.ConnectionQualityChanged,e,n)})).on($S.ParticipantPermissionsChanged,(e=>{this.emitWhenConnected(US.ParticipantPermissionsChanged,e,n)})).on($S.TrackSubscriptionStatusChanged,((e,t)=>{this.emitWhenConnected(US.TrackSubscriptionStatusChanged,e,t,n)})).on($S.TrackSubscriptionFailed,((e,t)=>{this.emit(US.TrackSubscriptionFailed,e,n,t)})).on($S.TrackSubscriptionPermissionChanged,((e,t)=>{this.emitWhenConnected(US.TrackSubscriptionPermissionChanged,e,t,n)})),t&&n.updateInfo(t),n}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce(((e,t)=>(e.push(...t.getTrackPublications()),e)),[]),t=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,t)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const t of e.videoTrackPublications.values())t.isSubscribed&&rE(t)&&t.emitTrackUpdate()}getRemoteParticipantBySid(e){const t=this.sidToIdentity.get(e);if(t)return this.remoteParticipants.get(t)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=oT.setInterval((()=>{this.engine&&!this.engine.isClosed&&this.engine.verifyTransport()?e=0:(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Sk.STATE_MISMATCH)))}),4e3)}clearConnectionReconcile(){this.connectionReconcileInterval&&oT.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e!==this.state&&(this.state=e,this.emit(US.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach((e=>{let[t,n]=e;this.emit(t,...n)})),this.bufferedEvents=[]}emitWhenConnected(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.state===J_.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,n]);else if(this.state===J_.Connected)return this.emit(e,...n);return!1}simulateParticipants(e){return bC(this,void 0,void 0,(function*(){var t,n;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),r=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Ik({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:nx.parse((new Date).getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ak({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(US.SignalConnected),this.emit(US.Connected),this.setAndEmitConnectionState(J_.Connected),i.video){const e=new W_(lT.Kind.Video,new Lk({source:xk.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:yk.AUDIO,name:"video-dummy"}),new k_(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:HT(160*(null!==(t=r.aspectRatios[0])&&void 0!==t?t:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit($S.LocalTrackPublished,e)}if(i.audio){const e=new W_(lT.Kind.Audio,new Lk({source:xk.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:yk.AUDIO}),new l_(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:WT(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit($S.LocalTrackPublished,e)}for(let e=0;e<r.count-1;e+=1){let t=new Ak({sid:Math.floor(1e4*Math.random()).toString(),identity:"simulated-".concat(e),state:Mk.ACTIVE,tracks:[],joinedAt:nx.parse(Date.now())});const i=this.getOrCreateParticipant(t.identity,t);if(r.video){const o=HT(160*(null!==(n=r.aspectRatios[e%r.aspectRatios.length])&&void 0!==n?n:1),160,!1,!0),s=new Lk({source:xk.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:yk.AUDIO});i.addSubscribedMediaTrack(o,s.sid,new MediaStream([o]),new RTCRtpReceiver),t.tracks=[...t.tracks,s]}if(r.audio){const e=WT(),n=new Lk({source:xk.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:yk.AUDIO});i.addSubscribedMediaTrack(e,n.sid,new MediaStream([e]),new RTCRtpReceiver),t.tracks=[...t.tracks,n]}i.updateInfo(t)}}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e!==US.ActiveSpeakersChanged&&e!==US.TranscriptionReceived){const t=eI(n).filter((e=>void 0!==e));this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:t}))}return super.emit(e,...n)}}function eI(e){return e.map((e=>{if(e)return Array.isArray(e)?eI(e):"object"===typeof e?"logContext"in e?e.logContext:void 0:e}))}var tI;Z_.cleanupRegistry="undefined"!==typeof FinalizationRegistry&&new FinalizationRegistry((e=>{e()})),function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"}(tI||(tI={}));CC.EventEmitter;CC.EventEmitter;new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);const nI=e=>new Promise((t=>setTimeout(t,e))),iI=(0,t.createContext)(void 0),rI=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(null),[o,s]=(0,t.useState)(null),[a,l]=(0,t.useState)(0),[c,d]=(0,t.useState)(0),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),m=(0,t.useCallback)((async()=>{try{console.log("user manually interrupted agent"),Sp.postMessage({type:"VoiceAssistnatSendText",value:"[<<<Interrupt>>]"})}catch(e){s("Failed to connect to voice assistant. Please try again."),console.error(e)}}),[]),g=(0,t.useCallback)((e=>{console.error(e),Sp.postMessage({type:"showInformationMessage",text:"Error acquiring camera or microphone permissions. Please make sure you grant the necessary permissions and reload."})}),[]),v=(0,t.useCallback)((()=>{s(null),l(0),d(0),f(!1),h(!1)}),[]),b=(0,t.useCallback)((async()=>{i&&(console.log("Disconnecting room and cleaning up"),await i.off(US.MediaDevicesError,g),await i.disconnect(),v(),r(null))}),[i,g,v]),y=(0,t.useCallback)((async()=>{i?(console.log("Room already exists, disconnecting first"),await b(),await nI(800)):v();const e=new Z_;e.on(US.MediaDevicesError,g),r(e);try{console.log("Starting voice assistant room"),Sp.postMessage({type:"voiceAssistantConnect"})}catch(t){s("Failed to connect to voice assistant. Please try again."),console.error(t)}}),[i,g,b,v]);(0,t.useEffect)((()=>{if(!i)return;const e=async e=>{const t=e.data;switch(t.type){case"VoiceAssistantRTCDownloading":f(!0);break;case"VoiceAssistantRTCDownloaded":break;case"voiceAssistantConnectionDetails":if(!i)return;const{serverUrl:e,participantToken:n}=t.data;console.log(e,n),await i.connect(e,n,{autoSubscribe:!1}).catch((e=>{s("Failed to connect to voice assistant. Please try again."),console.error("connection error",e)})),console.log("Remote participants",i.remoteParticipants),console.log("Remote participants",i.localParticipant);console.log(i);break;case"VoiceAssistantError":s(t.text||"An error occurred")}};window.addEventListener("message",e);const t=async()=>{Sp.postMessage({type:"VoiceAssistantStopRecording",data:{immediate:!0}}),i&&i.disconnect()};return window.addEventListener("beforeunload",t,{capture:!0}),window.addEventListener("unload",t,{capture:!0}),window.addEventListener("freeze",t,{capture:!0}),()=>{console.log("Cleaning up useEffect"),b(),Sp.postMessage({type:"VoiceAssistantStopRecording"}),window.removeEventListener("message",e),window.removeEventListener("beforeunload",t),window.removeEventListener("unload",t),window.removeEventListener("freeze",t)}}),[i,g,b]);const x={room:i,error:o,remoteVolumeLevel:a,localVolumeLevel:c,isMicActive:u,isDownloadingNodeRTC:p,onInterruptAgentStream:m,setIsMicActive:h,startRoom:y,disconnectRoom:b};return(0,Ip.jsx)(iI.Provider,{value:x,children:n})},oI=()=>{const e=(0,t.useContext)(iI);if(void 0===e)throw new Error("useVoiceAssistantState must be used within a VoiceAssistantProvider");return e},sI=()=>{const[e,n]=(0,t.useState)({isSmallScreen:!1,isVerySmallScreen:!1,isExtraSmallScreen:!1});return(0,t.useEffect)((()=>{const e=()=>{const e=window.innerWidth;n({isSmallScreen:e<440,isVerySmallScreen:e<360,isExtraSmallScreen:e<280})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e};function aI(e){let{options:n,active:i,onChange:r,disabled:o=!1}=e;n.length;const s=(0,t.useMemo)((()=>Math.max(0,n.findIndex((e=>e.value===i)))),[n,i]),[a,l]=(0,t.useState)([]),c=(0,t.useRef)([]);(0,t.useLayoutEffect)((()=>{c.current=c.current.slice(0,n.length);const e=c.current.map((e=>{const t=null===e||void 0===e?void 0:e.getBoundingClientRect();return t?t.width:0}));l(e)}),[n]);const d=(0,t.useCallback)((e=>()=>{o||r(e)}),[r,o]);return(0,Ip.jsxs)(lI,{disabled:o,children:[(0,Ip.jsx)(dI,{style:{width:a[s]||0,transform:`translateX(${a.slice(0,s).reduce(((e,t)=>e+t),0)}px)`,transition:"width 0.2s ease, transform 0.2s ease"}}),n.map(((e,t)=>{let{label:n,value:r}=e;return(0,Ip.jsx)(cI,{ref:e=>c.current[t]=e,isActive:r===i,style:{width:"fit",color:r===i?"#fff":"var(--vscode-input-foreground)"},onClick:d(r),children:n},t)}))]})}const lI=cp.div`
	position: relative;
	display: flex;
	background-color: var(--vscode-editor-background);
	border: 1px solid var(--vscode-editorGroup-border);
	border-radius: 5px;
	overflow: hidden;
	cursor: ${e=>{let{disabled:t}=e;return t?"not-allowed":"pointer"}};
	opacity: ${e=>{let{disabled:t}=e;return t?.5:1}};
`,cI=cp.div`
	padding: 3px 8px;
	text-align: center;
	overflow: hidden;
    text-overflow: ellipsis;
	font-size: 12px;
	color: ${e=>{let{isActive:t}=e;return t?"#fff":"var(--vscode-input-foreground)"}};
	background-color: ${e=>{let{isActive:t}=e;return t?"":"var(--vscode-sideBar-background)"}};
	transition: background-color 0.2s ease;
	z-index: 1;
	position: relative;
`,dI=cp.div`
	position: absolute;
	top: 0; bottom: 0; left: 0;
	background-color: var(--vscode-button-background);
	transition: transform 0.2s ease;
	z-index: 0;
`,uI=(cp.div`
	padding: 8px;
	cursor: pointer;
	&:hover {
		background-color: var(--vscode-editorGroup-border);
	}
`,cp.div`
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: -5px;
	padding: 0px 15px 5px 15px;
`,cp.div`
	display: flex;
	align-items: center;
	gap: 8px;
`,cp.div`
	position: fixed;
	bottom: calc(100% + 9px);
	left: 15px;
	right: 15px;
	background: ${jg};
	border: 1px solid var(--vscode-editorGroup-border);
	padding: 12px;
	border-radius: 3px;
	z-index: 1000;
	max-height: calc(100vh - 100px);
	overflow-y: auto;
	overscroll-behavior: contain;
	// Add invisible padding for hover zone
	&::before {
		content: "";
		position: fixed;
		bottom: ${e=>`calc(100vh - ${e.menuPosition}px - 2px)`};
		left: 0;
		right: 0;
		height: 8px;
	}
	// Arrow pointing down
	&::after {
		content: "";
		position: fixed;
		bottom: ${e=>`calc(100vh - ${e.menuPosition}px)`};
		right: ${e=>e.arrowPosition}px;
		width: 10px;
		height: 10px;
		background: ${jg};
		border-right: 1px solid var(--vscode-editorGroup-border);
		border-bottom: 1px solid var(--vscode-editorGroup-border);
		transform: rotate(45deg);
		z-index: -1;
	}
`),hI=cp.div`
	position: relative;
	display: flex;
	flex: 1;
	min-width: 0;
`,pI=cp.div`
	display: inline-flex; // Make it shrink to content
	min-width: 0; // Allow shrinking
	max-width: 100%; // Don't overflow parent
`,fI=cp.a`
	padding: 0px 0px;
	height: 20px;
	width: 100%;
	min-width: 0;
	cursor: ${e=>e.disabled?"not-allowed":"pointer"};
	text-decoration: ${e=>e.isActive?"underline":"none"};
	color: ${e=>e.isActive?"var(--vscode-foreground)":"var(--vscode-descriptionForeground)"};
	display: flex;
	align-items: center;
	font-size: 10px;
	outline: none;
	user-select: none;
	opacity: ${e=>e.disabled?.5:1};
	pointer-events: ${e=>e.disabled?"none":"auto"};
	&:hover,
	&:focus {
		color: ${e=>e.disabled?"var(--vscode-descriptionForeground)":"var(--vscode-foreground)"};
		text-decoration: ${e=>e.disabled?"none":"underline"};
		outline: none;
	}
	&:active {
		color: ${e=>e.disabled?"var(--vscode-descriptionForeground)":"var(--vscode-foreground)"};
		text-decoration: ${e=>e.disabled?"none":"underline"};
		outline: none;
	}
	&:focus-visible {
		outline: none;
	}
`,mI=cp.div`
	width: 100%;
	min-width: 0;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
`,gI=(cp.div`
	position: absolute;
	height: 100%;
	width: 50%;
	background-color: var(--vscode-badge-background);
	transition: transform 0.2s ease;
	transform: translateX(${e=>e.isAuto?"100%":"0%"});
`,(0,t.forwardRef)(((e,n)=>{let{inputValue:i,setInputValue:r,textAreaDisabled:o,placeholderText:s,setSelectedModel:a=(()=>null),showModelMenu:l=!1,setShowModelMenu:c=(()=>null),selectedImages:d=[],setSelectedImages:h,selectedVideos:f=[],setSelectedVideos:m,showVoiceAssistant:g,setShowVoiceAssistant:v,onSend:b,onSelectImages:y,hideFileUpload:x=!1,shouldDisableImages:k=!0,onHeightChange:w,onModelChange:C,upgradeForAccess:S=(()=>{}),setToggleUseModel:T,toggleUseModel:E,isAutoApprove:_=!0,setIsAutoApprove:I=(()=>{}),apiConfiguration:P,setApiConfiguration:R,isMediaLoading:A=!1,gitHubToken:M,setGitHubToken:O,selectedRepo:N,setSelectedRepo:j,selectedBranch:D,setSelectedBranch:L,showGitHubRepoMenu:F,setShowGitHubRepoMenu:B,showGitHubBranchMenu:U,setShowGitHubBranchMenu:$,selectedModel:z,isPro:V=!1}=e;const{startRoom:H}=oI(),{filePaths:W,chatSettings:q,apiConfiguration:K,providerConfigurations:G,lastOpenProvider:Y,customInstructions:Q,openRouterModels:X,useModelFromUserKey:J,setUseModelFromUserKey:Z,saveProviderConfiguration:ee}=Ap(),{isVerySmallScreen:te,isSmallScreen:ne,isExtraSmallScreen:ie}=sI(),[re,oe]=(0,t.useState)([]),[se,ae]=(0,t.useState)([]),[le,ce]=(0,t.useState)([]),[de,ue]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),[fe,me]=(0,t.useState)(0),[ge,ve]=(0,t.useState)(void 0),[be,ye]=(0,t.useState)(void 0),[xe,ke]=(0,t.useState)(!1),[we,Ce]=(0,t.useState)(!1),[Se,Te]=(0,t.useState)(0),[Ee,_e]=(0,t.useState)(""),[Ie,Pe]=(0,t.useState)(""),Re=(0,t.useRef)(null),[Ae,Me]=(0,t.useState)(!1),[Oe,Ne]=(0,t.useState)(0),je=(0,t.useRef)(null),[De,Le]=(0,t.useState)(!1),{width:Fe,height:Be}=Iv(),Ue=(0,t.useRef)(null),[$e,ze]=(0,t.useState)(0),[Ve,He]=(0,t.useState)(0),We=(0,t.useRef)(null),qe=(0,t.useRef)(null),[Ke,Ge]=(0,t.useState)(-1),[Ye,Qe]=(0,t.useState)(-1),[Xe,Je]=(0,t.useState)(null),[Ze,et]=(0,t.useState)(!1),tt=(0,t.useRef)(null),[nt,it]=(0,t.useState)(!1),rt=(0,t.useRef)(null),[ot,st]=(0,t.useState)(!1),[at,lt]=(0,t.useState)(null),ct=(0,t.useRef)(null),dt=(0,t.useRef)(null),ut=(0,t.useRef)(null),ht=(0,t.useRef)(null),pt=(0,t.useRef)(De),[ft,mt]=(0,t.useState)(void 0),[gt,vt]=(0,t.useState)(void 0);(0,t.useEffect)((()=>{(Xe===dy.Git||/^[a-f0-9]+$/i.test(Ee))&&Sp.postMessage({type:"searchCommits",text:Ee||""})}),[Xe,Ee]);const bt=(0,t.useCallback)((e=>{const t=e.data;switch(t.type){case"commitSearchResults":{var n;const e=(null===(n=t.commits)||void 0===n?void 0:n.map((e=>({type:dy.Git,value:e.hash,label:e.subject,description:`${e.shortHash} by ${e.author} on ${e.date}`}))))||[];oe(e);break}case"gitConnected":null===B||void 0===B||B(!0),t.value?(null===O||void 0===O||O(t.value),localStorage.setItem("github_token",t.value),Sp.postMessage({type:"fetchGitHubRepos",value:t.value||""})):t.error&&console.error("Couldn't connect with git",t.error);break;case"githubRepos":var i;ae((null===(i=t.repos)||void 0===i?void 0:i.map((e=>({name:e.full_name}))))||[]);break;case"githubBranches":var r;ce((null===(r=t.branches)||void 0===r?void 0:r.map((e=>({name:e.name}))))||[])}}),[]);u("message",bt);const yt=(0,t.useMemo)((()=>[{type:dy.Problems,value:"problems"},{type:dy.Terminal,value:"terminal"},...re,...W.map((e=>"/"+e)).map((e=>({type:e.endsWith("/")?dy.Folder:dy.File,value:e})))]),[W,re]);(0,t.useEffect)((()=>{const e=e=>{ct.current&&!ct.current.contains(e.target)&&ke(!1),dt.current&&!dt.current.contains(e.target)&&Ce(!1),We.current&&!We.current.contains(e.target)&&c(!1),ut.current&&!ut.current.contains(e.target)&&(null===B||void 0===B||B(!1)),ht.current&&!ht.current.contains(e.target)&&(null===$||void 0===$||$(!1))};return(xe||we||l||F||U)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[xe,we,ke,l,c,F,U]);const xt=(0,t.useCallback)(((e,t)=>{if(e!==dy.NoResults){if((e===dy.File||e===dy.Folder||e===dy.Git)&&!t)return Je(e),_e(""),Ge(0),void setTimeout((()=>{Re.current&&Re.current.focus()}),0);if(ke(!1),Je(null),Re.current){let n=t||"";e===dy.URL||e===dy.File||e===dy.Folder?n=t||"":e===dy.Problems?n="problems":e===dy.Terminal?n="terminal":e===dy.Git&&(n=t||"");const{newValue:i,mentionIndex:o}=function(e,t,n){const i=e.slice(0,t),r=e.slice(t),o=i.lastIndexOf("@");let s,a;-1!==o?(s=e.slice(0,o)+"@"+n+" "+r.replace(/^[^\s]*/,""),a=o):(s=i+"@"+n+" "+r,a=t);return{newValue:s,mentionIndex:a}}(Re.current.value,Se,n);r(i);const s=i.indexOf(" ",o+n.length)+1;Te(s),lt(s),setTimeout((()=>{Re.current&&(Re.current.blur(),Re.current.focus())}),0)}}}),[r,Se]),kt=(0,t.useCallback)(((e,t)=>{if(e!==hy.NoResults&&(Ce(!1),Re.current&&t)){const{newValue:e,actionIndex:n}=function(e,t,n){const i=e.slice(0,t),r=e.slice(t),o=i.lastIndexOf("/");let s,a;-1!==o?(s=e.slice(0,o)+"/"+n+" "+r.replace(/^[^\s]*/,""),a=o):(s=i+"/"+n+" "+r,a=t);return{newValue:s,actionIndex:a}}(Re.current.value,Se,t);r(e);const i=e.indexOf(" ",n+t.length+1)+1;Te(i),lt(i),setTimeout((()=>{Re.current&&(Re.current.blur(),Re.current.focus())}),0)}}),[r,Se]),wt=(0,t.useCallback)((e=>{var t,n;if(l){if("Escape"===e.key)return void c(!1);if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void Ne((t=>(t+("ArrowUp"===e.key?-1:1)+gy.length)%gy.length));if("Enter"===e.key||"Tab"===e.key){e.preventDefault();const t=gy[Oe];return a(t),c(!1),void(null===C||void 0===C||C(t))}}if(xe){if("Escape"===e.key)return Je(null),void Ge(3);if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void Ge((t=>{const n="ArrowUp"===e.key?-1:1,i=uy(Ee,Xe,yt);if(0===i.length)return t;const r=i.filter((e=>e.type!==dy.URL&&e.type!==dy.NoResults));if(0===r.length)return-1;const o=(r.findIndex((e=>e===i[t]))+n+r.length)%r.length;return i.findIndex((e=>e===r[o]))}));if(("Enter"===e.key||"Tab"===e.key)&&-1!==Ke){const t=uy(Ee,Xe,yt)[Ke];if(t&&t.type!==dy.URL&&t.type!==dy.NoResults)return e.preventDefault(),void xt(t.type,t.value);if(!t||t.type!==dy.NoResults)return void e.preventDefault()}}if(we){if("Escape"===e.key)return Ce(!1),void Qe(-1);if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void Qe((t=>{const n="ArrowUp"===e.key?-1:1,i=py(Ie);if(0===i.length)return t;const r=i.filter((e=>e.type!==hy.NoResults));if(0===r.length)return-1;const o=(r.findIndex((e=>e===i[t]))+n+r.length)%r.length;return i.findIndex((e=>e===r[o]))}));if(("Enter"===e.key||"Tab"===e.key)&&-1!==Ye){const t=py(Ie)[Ye];if(t&&t.type!==hy.NoResults)return e.preventDefault(),void kt(t.type,t.command);if(!t||t.type!==hy.NoResults)return void e.preventDefault();Ce(!1)}}const o=null!==(t=null===(n=e.nativeEvent)||void 0===n?void 0:n.isComposing)&&void 0!==t&&t;if("Enter"!==e.key||e.shiftKey||o||(e.preventDefault(),b()),"Backspace"===e.key&&!o){const t=i[Se-1],n=i[Se+1],o=" "===t||"\n"===t||"\r\n"===t,a=" "===n||"\n"===n||"\r\n"===n;if(o&&i.slice(0,Se-1).match(new RegExp(Ov.source+"$"))){const t=Se-1;var s;if(!a)e.preventDefault(),null===(s=Re.current)||void 0===s||s.setSelectionRange(t,t),Te(t);Te(t),st(!0)}else if(o&&i.slice(0,Se-1).match(new RegExp(jv.source+"$"))){const t=Se-1;var d;if(!a)e.preventDefault(),null===(d=Re.current)||void 0===d||d.setSelectionRange(t,t),Te(t);Te(t),st(!0)}else if(ot){const t=function(e,t){const n=e.slice(0,t),i=e.slice(t),r=n.match(new RegExp(Ov.source+"$"));if(r)return{newText:e.slice(0,t-r[0].length)+i.replace(" ",""),newPosition:t-r[0].length};return{newText:e,newPosition:t}}(i,Se);if(t.newText!==i)e.preventDefault(),r(t.newText),lt(t.newPosition),Ce(!1);else{const t=function(e,t){const n=e.slice(0,t),i=e.slice(t),r=n.match(new RegExp(jv.source+"$"));if(r)return{newText:e.slice(0,t-r[0].length)+i.replace(" ",""),newPosition:t-r[0].length};return{newText:e,newPosition:t}}(i,Se);t.newText!==i&&(e.preventDefault(),r(t.newText),lt(t.newPosition),ke(!1))}st(!1)}else st(!1)}}),[b,l,xe,we,c,Oe,a,C,Ke,Ye,Ee,Ie,Xe,yt,xt,kt,i,Se,ot,r]),Ct=(0,t.useCallback)((()=>{const e=gb(K),t=vb(K,X);e||t?Sp.postMessage({type:"getLatestState"}):Sp.postMessage({type:"apiConfiguration",customApiConfiguration:K})}),[K,X]),St=(0,t.useCallback)((()=>{let e=0;De&&(Ct(),e=250),o||setTimeout((()=>{if(!localStorage.getItem("blackbox_redeem_success")&&"act"===q.mode)return void S();const e="mcp"===q.mode?"act":"mcp";Sp.postMessage({type:"chatSettings",chatSettings:{mode:e}}),setTimeout((()=>{var e;null===(e=Re.current)||void 0===e||e.focus()}),100)}),e)}),[q.mode,o,De,Ct]);(0,t.useCallback)((e=>{if(o)return;localStorage.getItem("blackbox_redeem_success")||"act"!==q.mode?(Sp.postMessage({type:"chatSettings",chatSettings:{mode:e}}),setTimeout((()=>{var e;return null===(e=Re.current)||void 0===e?void 0:e.focus()}),100)):S()}),[q.mode,o,S]),(0,t.useMemo)((()=>"act"===q.mode?1:0),[q.mode]);(0,t.useLayoutEffect)((()=>{null!==at&&Re.current&&(Re.current.setSelectionRange(at,at),lt(null))}),[i,at]);const Tt=(0,t.useCallback)((e=>{const t=e.target.value,n=e.target.selectionStart;r(t),Te(n);const i=function(e,t){const n=e.slice(0,t),i=n.lastIndexOf("@");if(-1===i)return!1;const r=n.slice(i+1);return!/\s/.test(r)&&!r.toLowerCase().startsWith("http")&&!r.toLowerCase().startsWith("problems")&&!r.toLowerCase().startsWith("terminal")}(t,n);if(ke(i),i){const e=t.lastIndexOf("@",n-1),i=t.slice(e+1,n);_e(i),i.length>0?Ge(0):Ge(3)}else _e(""),Ge(-1);const o=!i&&function(e,t){const n=e.slice(0,t),i=n.lastIndexOf("/");if(-1===i)return!1;const r=n.slice(i+1);return!/\s/.test(r)&&!r.includes("/")}(t,n);if(Ce(o),o){const e=t.lastIndexOf("/",n-1),i=t.slice(e+1,n);Pe(i),i.length,Qe(0)}else Pe(""),Qe(-1)}),[r]);(0,t.useEffect)((()=>{xe||Je(null)}),[xe]),(0,t.useEffect)((()=>{we||Qe(-1)}),[we]);const Et=(0,t.useCallback)((()=>{Ae||(ke(!1),Ce(!1)),ue(!1)}),[Ae]),_t=(0,t.useCallback)((async e=>{const t=e.clipboardData.items,n=e.clipboardData.getData("text");if(/^\S+:\/\/\S+$/.test(n.trim())){e.preventDefault();const t=n.trim(),o=i.slice(0,Se)+t+" "+i.slice(Se);r(o);const s=Se+t.length+1;return Te(s),lt(s),ke(!1),void setTimeout((()=>{Re.current&&(Re.current.blur(),Re.current.focus())}),0)}const o=["png","jpeg","webp"],s=Array.from(t).filter((e=>{const[t,n]=e.type.split("/");return"image"===t&&o.includes(n)}));if(!k&&s.length>0){if(!V)return e.preventDefault(),void S();e.preventDefault();const t=s.map((e=>new Promise((t=>{const n=e.getAsFile();if(!n)return void t(null);const i=new FileReader;i.onloadend=()=>{if(i.error)console.error("Error reading file:",i.error),t(null);else{const e=i.result;t("string"===typeof e?e:null)}},i.readAsDataURL(n)})))),n=(await Promise.all(t)).filter((e=>null!==e));n.length>0?h&&h((e=>[...e,...n].slice(0,JF))):console.warn("No valid images were processed")}}),[k,h,Se,r,i]),It=(0,t.useCallback)((e=>{me(e)}),[]);(0,t.useEffect)((()=>{0===d.length&&me(0)}),[d]);const Pt=(0,t.useCallback)((()=>{Me(!0)}),[]),Rt=(0,t.useCallback)((()=>{if(!Re.current||!qe.current)return;const e=Re.current.value;qe.current.innerHTML=e.replace(/\n$/,"\n\n").replace(/[<>&]/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;"}[e]||e))).replace(Lv,'<mark class="mention-context-textarea-highlight">$&</mark>'),qe.current.scrollTop=Re.current.scrollTop,qe.current.scrollLeft=Re.current.scrollLeft}),[]);(0,t.useLayoutEffect)((()=>{Rt()}),[i,Rt]);const At=(0,t.useCallback)((()=>{Re.current&&Te(Re.current.selectionStart)}),[]),Mt=(0,t.useCallback)((e=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key)&&At()}),[At]);!function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableTextInputs:!0};const r=(0,t.useRef)(n),[o,s]=(0,t.useState)([]);(0,t.useLayoutEffect)((()=>{r.current=n}));const a=(0,t.useCallback)((t=>{const n=t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&(!t.target.type||"text"===t.target.type)||t.target.isContentEditable,a={Control:t.ctrlKey,Alt:t.altKey,Meta:t.metaKey,Shift:t.shiftKey};if(t.repeat)return null;if(i.disableTextInputs&&n)return t.stopPropagation();if(e.includes("+")){const n=e.split("+");if(Object.keys(a).includes(n[0])){const e=n.pop();if(n.every((e=>a[e]))&&e===t.key)return r.current(t)}else{if(n[o.length]===t.key)return n[n.length-1]===t.key&&o.length===n.length-1?(r.current(t),s([])):s((e=>[...e,t.key]));if(o.length>0)return s([])}}return e===t.key?r.current(t):void 0}),[o.length,i.disableTextInputs,e]);(0,t.useEffect)((()=>(window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)})),[a])}("Meta+Shift+a",St,{disableTextInputs:!1});(0,t.useCallback)((()=>{var e;if(o)return;if(null===(e=Re.current)||void 0===e||e.focus(),!i.trim()){return Tt({target:{value:"@",selectionStart:1}}),void Rt()}if(i.endsWith(" ")){const e={target:{value:i+"@",selectionStart:i.length+1}};return Tt(e),void Rt()}const t={target:{value:i+" @",selectionStart:i.length+2}};Tt(t),Rt()}),[i,o,Tt,Rt]);(0,t.useEffect)((()=>{pt.current&&!De&&Ct(),pt.current=De}),[De,Ct]),(0,t.useEffect)((()=>{mt(void 0),vt(void 0)}),[P]);const Ot=(0,t.useMemo)((()=>{var e,t;const{selectedProvider:n,selectedModelId:i}=rv(K);if(!K)return"qwen";switch(n){case"anthropic":case"openrouter":default:return`${n}:${i}`;case"openai":return`openai-compat:${i}`;case"vscode-lm":return"vscode-lm:"+(K.vsCodeLmModelSelector?`${null!==(e=K.vsCodeLmModelSelector.vendor)&&void 0!==e?e:""}/${null!==(t=K.vsCodeLmModelSelector.family)&&void 0!==t?t:""}`:"unknown");case"together":return`${n}:${K.togetherModelId}`;case"lmstudio":return`${n}:${K.lmStudioModelId}`;case"ollama":return`${n}:${K.ollamaModelId}`;case"litellm":return`${n}:${K.liteLlmModelId}`;case"requesty":return`${n}:${K.requestyModelId}`}}),[K]);(0,t.useEffect)((()=>{if(De&&Ue.current){const e=Ue.current.getBoundingClientRect(),t=e.left+e.width/2,n=document.documentElement.clientWidth-t-5;ze(n),He(e.top+1)}}),[De,Fe,Be]),(0,t.useEffect)((()=>{if(!De){var e;const t=null===(e=Ue.current)||void 0===e?void 0:e.querySelector("a");t&&t.blur()}}),[De]);const Nt=()=>{Le(!De)};(0,t.useEffect)((()=>{J&&Y&&G[Y]&&(Sp.postMessage({type:"apiConfiguration",apiConfiguration:G[Y]}),Sp.postMessage({type:"toggleUseSelectedModel",bool:!1}),T(!1))}),[]),(0,t.useEffect)((()=>{const e=e=>{const t=e.data;"copyFileContent"===t.type&&t.content&&(r(t.content),null!==Re&&void 0!==Re&&Re.current&&(Re.current.focus(),setTimeout((()=>{Re.current&&(Re.current.scrollTo({top:Re.current.scrollHeight,behavior:"smooth"}),setTimeout((()=>{Re.current&&Re.current.scrollTo({top:Re.current.scrollHeight,behavior:"smooth"})}),300))}),0)),Te(t.content.length))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const jt=(0,t.useCallback)((()=>{it(!0),rt.current&&clearTimeout(rt.current),rt.current=setTimeout((()=>{it(!1),rt.current=null}),3e3)}),[]),Dt=e=>Promise.all(e.map((e=>new Promise((t=>{const n=new FileReader;n.onloadend=async()=>{if(n.error)console.error("Error reading file:",n.error),t(null);else{const r=n.result;if("string"===typeof r)try{await(e=r,new Promise(((t,n)=>{const i=new Image;i.onload=()=>{i.naturalWidth>7500||i.naturalHeight>7500?n(new Error("Image dimensions exceed maximum allowed size of 7500px.")):t({width:i.naturalWidth,height:i.naturalHeight})},i.onerror=e=>{console.error("Failed to load image for dimension check:",e),n(new Error("Failed to load image to check dimensions."))},i.src=e}))),t(r)}catch(i){console.warn(i.message),jt(),t(null)}else t(null)}var e},n.readAsDataURL(e)}))))),Lt=f.length>0||d.length>0;return(0,Ip.jsxs)("div",{children:[(0,Ip.jsx)("div",{style:{padding:"3px 0 0 15px"},children:(0,Ip.jsxs)(hI,{ref:je,children:[!E&&(0,Ip.jsx)(pI,{ref:Ue,children:(0,Ip.jsx)(fI,{role:"button",isActive:De,disabled:!(null!==K&&void 0!==K&&K.apiProvider)||p.includes(K.apiProvider),onClick:Nt,tabIndex:0,children:(0,Ip.jsx)(mI,{children:null===K||void 0===K||!K.apiProvider||p.includes(K.apiProvider)?"":Ot})})}),De&&(0,Ip.jsxs)(uI,{arrowPosition:$e,menuPosition:Ve,style:{bottom:`calc(100vh - ${Ve}px + 6px)`},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"17px",paddingRight:17},children:[(0,Ip.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"Settings"}),(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Ip.jsx)(ts,{onClick:()=>{if(null===K||void 0===K||!K.apiProvider||p.includes(K.apiProvider))return void mt("Select api provider to preoceed");const e=gb(K),t=vb(K,X);mt(e),vt(t),e||t||(null!==K&&void 0!==K&&K.apiProvider&&ee(K.apiProvider,K),Sp.postMessage({type:"apiConfiguration",apiConfiguration:K}),Sp.postMessage({type:"customInstructions",text:Q}),Nt())},children:"Save"}),(0,Ip.jsx)("span",{onClick:()=>{Y||(Sp.postMessage({type:"toggleUseSelectedModel",bool:!0}),T(!0),Sp.postMessage({type:"apiConfiguration",apiConfiguration:P})),Nt()},style:{marginLeft:"0.5rem",cursor:"pointer"},children:"Discard"})]})]}),(0,Ip.jsx)(ov,{showModelOptions:!0,apiErrorMessage:ft,modelIdErrorMessage:gt,isPopup:!0})]})]})}),(0,Ip.jsxs)("div",{style:{padding:"5px 15px 10px 15px",opacity:o?.5:1,position:"relative",display:"flex",flexDirection:"column",minHeight:"auto",height:"auto"},onDrop:async e=>{e.preventDefault(),pe(!1),et(!1),tt.current&&(clearTimeout(tt.current),tt.current=null);let t=[];const n=e.dataTransfer.getData("resourceurls"),o=e.dataTransfer.getData("application/vnd.code.uri-list");if(n)try{t=JSON.parse(n),t=t.map((e=>decodeURIComponent(e)))}catch(p){console.error("Failed to parse resourceurls JSON:",p),t=[]}0===t.length&&o&&(t=o.split("\n").map((e=>e.trim())));const s=t.filter((e=>e&&(e.startsWith("vscode-file:")||e.startsWith("file:"))));if(s.length>0){const e=Re.current?Re.current.selectionStart:i.length,t=s[0],n=decodeURIComponent(t.replace(/^(vscode-file|file):\/\//,"")),o=[...W].sort(((e,t)=>t.length-e.length)),a=o.find((e=>n.endsWith("/"+e)));if(a){const{newValue:t,mentionIndex:n}=function(e,t,n){return{newValue:e.slice(0,t)+"@"+n+" "+e.slice(t),mentionIndex:t}}(i,e,"/"+a);r(t);const o=n+a.length+2;lt(o)}return}const a=e.dataTransfer.getData("text");if(a)return void(e=>{const t=i.slice(0,Se)+e+i.slice(Se);r(t);const n=Se+e.length;Te(n),lt(n)})(a);const l=Array.from(e.dataTransfer.files),c=["png","jpeg","webp"],d=l.filter((e=>{const[t,n]=e.type.split("/");return"image"===t&&c.includes(n)}));if(k||0===d.length)return;if(!V&&d.length>0)return void S();const u=(await Dt(d)).filter((e=>null!==e));u.length>0?null===h||void 0===h||h((e=>[...e,...u].slice(0,JF))):console.warn("No valid images were processed")},onDragOver:e=>{e.preventDefault(),he||pe(!0)},onDragEnter:e=>{if(e.preventDefault(),pe(!0),e.dataTransfer.types.includes("Files")){Array.from(e.dataTransfer.items).some((e=>{if("file"===e.kind){return"image"!==e.type.split("/")[0]}return!1}))&&(et(!0),tt.current&&clearTimeout(tt.current),tt.current=setTimeout((()=>{et(!1),tt.current=null}),3e3))}},onDragLeave:e=>{e.preventDefault();e.currentTarget.contains(e.relatedTarget)||pe(!1)},children:[nt&&(0,Ip.jsx)("div",{style:{position:"absolute",inset:"10px 15px",backgroundColor:"var(--vscode-editorGroup-border)",border:"2px solid var(--vscode-errorForeground)",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,pointerEvents:"none"},children:(0,Ip.jsx)("span",{style:{color:"var(--vscode-errorForeground)",fontWeight:"bold",fontSize:"12px",textAlign:"center"},children:"Image dimensions exceed 7500px"})}),Ze&&(0,Ip.jsx)("div",{style:{position:"absolute",inset:"10px 15px",backgroundColor:"rgba(var(--vscode-foreground-rgb), 0.1)",border:"2px solid var(--vscode-foreground)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,pointerEvents:"none"},children:(0,Ip.jsx)("span",{style:{color:"var(--vscode-foreground)",fontWeight:"bold",fontSize:"12px"},children:"File Type Not Supported"})}),F&&(0,Ip.jsx)("div",{ref:ut,children:(0,Ip.jsx)(yy,{type:"repo",items:se,onSelect:e=>{null===j||void 0===j||j(e.name),null===B||void 0===B||B(!1),null===$||void 0===$||$(!0),Sp.postMessage({type:"fetchGitHubBranches",data:{token:M,repo:e.name}})},onMouseDown:()=>Me(!0),selectedIndex:Ke,setSelectedIndex:Ge})}),U&&(0,Ip.jsx)("div",{ref:ht,children:(0,Ip.jsx)(yy,{type:"branch",items:le,selectedRepo:N,onSelect:e=>{if(null===L||void 0===L||L(e.name),null===$||void 0===$||$(!1),M&&N&&e.name){const t={...P,gitInfo:{token:M,repo:N,branch:e.name}};R(t),Sp.postMessage({type:"apiConfiguration",apiConfiguration:t})}},onMouseDown:()=>Me(!0),selectedIndex:Ke,setSelectedIndex:Ge})}),xe&&(0,Ip.jsx)("div",{ref:ct,children:(0,Ip.jsx)(fy,{onSelect:xt,searchQuery:Ee,onMouseDown:Pt,selectedIndex:Ke,setSelectedIndex:Ge,selectedType:Xe,queryItems:yt})}),we&&(0,Ip.jsx)("div",{ref:dt,children:(0,Ip.jsx)(my,{onSelect:kt,searchQuery:Ie,onMouseDown:Pt,selectedIndex:Ye,setSelectedIndex:Qe})}),(0,Ip.jsx)("div",{style:{position:"absolute",inset:"5px 15px 10px 15px",border:"0.5px solid var(--vscode-editorGroup-border)",borderRadius:12,pointerEvents:"none",zIndex:5,outline:he&&!Ze?"2px dashed var(--vscode-focusBorder)":"none",outlineOffset:he&&!Ze?"1px":"0px"}}),(0,Ip.jsxs)("div",{style:{position:"relative"},children:[(0,Ip.jsx)("div",{ref:qe,style:{position:"absolute",top:0,left:0,right:0,bottom:"3.25px",pointerEvents:"none",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"transparent",overflow:"hidden",overflowX:"hidden",overflowY:"auto",backgroundColor:"transparent",border:"none",borderRadius:12,fontFamily:"var(--vscode-font-family)",fontSize:"var(--vscode-editor-font-size)",lineHeight:"var(--vscode-editor-line-height)",padding:fe>0?`9px 9px ${fe+6}px 9px`:"9px",boxSizing:"border-box",resize:"none",scrollbarWidth:"none",width:"100%",opacity:.8,margin:0,verticalAlign:"top"}}),(0,Ip.jsx)(mb,{ref:e=>{"function"===typeof n?n(e):n&&(n.current=e),Re.current=e},value:i,disabled:o,onChange:e=>{Tt(e),Rt()},onKeyDown:wt,onKeyUp:Mt,onFocus:()=>ue(!0),onBlur:Et,onPaste:_t,onSelect:At,onMouseUp:At,onHeightChange:e=>{ve(e),ye(e),null===w||void 0===w||w(e)},placeholder:s,maxRows:8,minRows:3,autoFocus:!0,cacheMeasurements:!1,style:{width:"100%",boxSizing:"border-box",backgroundColor:"transparent",color:"var(--vscode-input-foreground)",borderRadius:12,fontFamily:"var(--vscode-font-family)",fontSize:"var(--vscode-editor-font-size)",lineHeight:"var(--vscode-editor-line-height)",resize:"none",overflowX:"hidden",overflowY:"auto",scrollbarWidth:"none",border:"none",padding:fe>0?`9px 9px ${fe+6}px 9px`:"9px",cursor:o?"not-allowed":void 0,zIndex:1,outline:"none"},onScroll:()=>Rt()})]}),d.length>0&&(0,Ip.jsx)(Rv,{images:d,setImages:h,onHeightChange:It,style:{position:"absolute",padding:"0 5px",zIndex:10,bottom:"14px",width:"20%",maxWidth:"100px"}}),f.length>0&&(0,Ip.jsx)(Rv,{images:[f[0].frameDataUrls[0]],setImages:m,onHeightChange:It,style:{position:"absolute",padding:"0 5px",zIndex:10,bottom:"14px",width:"25%"}}),A&&(0,Ip.jsx)("div",{style:{position:"absolute",bottom:14,left:22,width:24,height:24,zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ip.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:24,color:"var(--vscode-descriptionForeground)"}})}),(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"end",alignItems:"flex-center",padding:"0 7px 7px"},children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",overflow:"hiddens",width:Lt?"auto":"100%",justifyContent:Lt?"flex-start":te?"flex-end":"space-between"},children:[!te&&(0,Ip.jsx)("div",{style:{marginRight:"5px"},children:(0,Ip.jsx)(aI,{options:[{label:"Manual",value:!1},{label:"Auto",value:!0}],active:_,disabled:!1,onChange:async e=>{I(e),Sp.postMessage({type:"isAutoApprove",bool:e})}})}),(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",overflow:"hiddens"},children:[(0,Ip.jsxs)("div",{style:{position:"relative"},children:[l&&(0,Ip.jsx)("div",{ref:We,children:(0,Ip.jsx)(by,{onSelect:e=>{a(e),c(!1),null===C||void 0===C||C(e),$v(zv,"",{tag:"model_selected",type:e})},onMouseDown:()=>Me(!0),selectedIndex:Oe,setSelectedIndex:Ne,upgradeForAccess:S,apiConfiguration:P,setApiConfiguration:R})}),(0,Ip.jsx)("div",{className:"input-icon-button",onClick:()=>c(!0),style:{display:"flex",alignItems:"center",padding:"3px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"5px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-sideBar-background)",color:"var(--vscode-input-foreground)",marginRight:"5px"},children:Lt?(0,Ip.jsx)("i",{className:"codicon codicon-chip",style:{fontSize:"15px"}}):(0,Ip.jsx)(Ip.Fragment,{children:ie?(0,Ip.jsx)("i",{className:"codicon codicon-chip",style:{fontSize:"15px"}}):(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"74px"},children:z&&vy[z].modelName}),(0,Ip.jsx)("i",{className:"codicon codicon-chevron-down",style:{marginLeft:"4px",fontSize:"12px"}})]})})})]}),!x&&(0,Ip.jsxs)("div",{className:"input-icon-button",id:"model-selection-dropdown",onClick:()=>{!o&&Re.current&&(ke(!0),Ge(3))},style:{display:"flex",alignItems:"center",padding:"3px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"5px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-sideBar-background)",color:"var(--vscode-input-foreground)",marginRight:"5px"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-attach",style:{marginRight:ne?0:"4px",fontSize:"15px"}}),!ne&&(0,Ip.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Add Context"})]}),(0,Ip.jsx)("div",{style:{marginRight:5.5,marginTop:"2px"},className:"input-icon-button "+(o?"disabled":""),onClick:async()=>{localStorage.getItem("blackbox_redeem_success")?!g&&v&&(v(!0),H()):S()},children:(0,Ip.jsx)(ky,{style:{width:"1.1rem",height:"1.1rem"}})}),y&&(0,Ip.jsx)("div",{className:`input-icon-button ${k?"disabled":""} codicon codicon-device-camera`,onClick:()=>{V?k||y():S()},style:{marginRight:5.5,fontSize:16.5}}),(0,Ip.jsx)("div",{className:`input-icon-button ${o?"disabled":""} codicon codicon-send`,onClick:()=>{o||b()},style:{fontSize:15}})]})]})})]})]})}))),vI=gI;let bI="https://invite-server.onrender.com";function yI(){let e=localStorage.getItem("blackbox_userId");return e||(e=crypto.randomUUID(),localStorage.setItem("blackbox_userId",e)),e}const xI="https://payment.blackbox.ai",kI=cp.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  border-bottom: 1px solid rgba(128, 128, 128, 0.1);

  &:last-child {
    border-bottom: none;
  }
`,wI=e=>{let{email:t,isSelected:n,onToggle:i}=e;return(0,Ip.jsx)(kI,{children:(0,Ip.jsx)(ns,{checked:n,onChange:e=>{e.preventDefault(),e.stopPropagation(),i()},children:t})})},CI=e=>{try{null===e||void 0===e||e.push("gisele@blackbox.ai");const t=encodeURIComponent("Your Invite to BLACKBOX.AI!"),n=encodeURIComponent("I'm excited to share a referral to BLACKBOX.AI, the BEST AI Coding Agent ever made. You can fly through your coding tasks faster then ever. It's  packed with powerful AI that helps you autonomously go through the full implementation without you having to break a sweat, create new projects, fix bugs, add new features, run terminal commands and more!\n\nI love the product and I think you will too! I've been using it on VSCode https://marketplace.visualstudio.com/items?itemName=Blackboxapp.blackbox!\n\nClick here https://www.blackbox.ai to get started with BLACKBOXAI.\n\nI've cc'ed Gisele from their team to help :)");return`https://mail.google.com/mail/u/0/?fs=1&su=${t}&body=${n}&tf=cm${null!==e&&void 0!==e&&e.length?`&bcc=${e.join(",")}`:""}`}catch(t){return console.error(t),""}},SI=cp.div`
  padding: 16px;
  border-top: 1px solid var(--vscode-panel-border);
  margin-top: auto;
`,TI=cp.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
`,EI=cp.div`
  background-color: var(--vscode-editor-background);
  border-radius: 4px;
  width: 90%;
  max-width: 500px;
  height: 500px;
  display: flex;
  flex-direction: column;
`,_I=cp.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--vscode-panel-border);

  h3 {
    margin: 0;
    color: var(--vscode-foreground);
  }
`,II=cp.button`
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: var(--vscode-foreground);
  padding: 0;
  
  &:hover {
    opacity: 0.8;
  }
`,PI=cp.div`
  padding: 16px;
  overflow-y: auto;
  flex: 1;
  display: flex;
  flex-direction: column;
  scrollbar-width: none;
  -ms-overflow-style: none;
  
  &::-webkit-scrollbar {
    display: none;
  }
`,RI=cp.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  gap: 12px;
  color: var(--vscode-descriptionForeground);

  .codicon {
    font-size: 24px;
  }
`,AI=cp.div`
  text-align: center;
  color: var(--vscode-descriptionForeground);
  padding: 20px;
`,MI=e=>{let{onClose:n}=e;const[i,r]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{l(!0),Sp.postMessage({type:"getGitRepoUsers"});const e=e=>{const t=e.data;if("gitRepoUsers"===t.type&&(r(t.users),s(t.users),l(!1),0===t.users.length)){const e=CI();Sp.postMessage({type:"openBrowserLink",text:e}),n()}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[n]);return(0,Ip.jsx)(TI,{onClick:n,children:(0,Ip.jsxs)(EI,{onClick:e=>e.stopPropagation(),children:[(0,Ip.jsxs)(_I,{children:[(0,Ip.jsx)("h3",{children:"Repository Collaborators"}),(0,Ip.jsx)(II,{onClick:n,children:"\xd7"})]}),(0,Ip.jsx)(PI,{children:a?(0,Ip.jsxs)(RI,{children:[(0,Ip.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin"}),(0,Ip.jsx)("span",{children:"Loading collaborators..."})]}):0===i.length?(0,Ip.jsx)(AI,{children:"No collaborators found"}):i.map(((e,t)=>(0,Ip.jsx)(wI,{email:e,isSelected:o.includes(e),onToggle:()=>(e=>{s((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))})(e)},t)))}),(0,Ip.jsx)(SI,{children:(0,Ip.jsxs)(ts,{disabled:0===o.length,onClick:()=>{$v(zv,"",{tag:"vscode-invite-sent"});const e=CI(o);Sp.postMessage({type:"openBrowserLink",text:e}),n()},style:{width:"100%"},children:["Send Invites (",o.length,")"]})})]})})},OI=e=>{var n;let{onClose:i,customerId:r,refreshPlans:o}=e;const[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[y,x]=(0,t.useState)(null),[k,w]=(0,t.useState)({}),[C,S]=(0,t.useState)(!1),[T,E]=(0,t.useState)(""),_={"Content-Type":"application/json","X-Customer-Id":r||"","X-Api-Key":""},I=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&c(!0),u(null);const r=await fetch(`${h}/api/public/extension/gpu`,{method:"GET",headers:_});if(!r.ok)throw new Error("Failed to fetch instances");const o=await r.json();if(Array.isArray(o)){var t,n,i;const e=localStorage.getItem("SSH_KEY_NAME"),r=o.length>0?null===(t=o[o.length-1])||void 0===t?void 0:t.data:null,s=null!==(n=null===r||void 0===r||null===(i=r.ssh_key_names)||void 0===i?void 0:i[0])&&void 0!==n?n:null;e&&s&&e!==s&&["SSH_KEY_NAME","PUBLIC_SSH_KEY","PRIVATE_SSH_KEY"].forEach((e=>localStorage.removeItem(e))),(async()=>{const e=localStorage.getItem("PRIVATE_SSH_KEY"),t=localStorage.getItem("PUBLIC_SSH_KEY");if(!e||!t)try{var n;const e=await fetch(`${h}/api/public/extension/gpu/ssh-keys`,{method:"GET",headers:_});if(!e.ok)throw new Error("Failed to fetch SSH keys");const t=await e.json();if(null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n[0]){const e=t.data[0];e.name&&localStorage.setItem("SSH_KEY_NAME",e.name),e.public_key&&localStorage.setItem("PUBLIC_SSH_KEY",e.public_key),e.private_key&&localStorage.setItem("PRIVATE_SSH_KEY",e.private_key)}}catch(i){console.error("Error fetching SSH keys:",i)}})(),a(o.map((e=>e.data)))}else a([])}catch(r){u(r instanceof Error?r.message:"Failed to fetch instances")}finally{e&&c(!1)}};(0,t.useEffect)((()=>{const e=s.some((e=>"booting"===e.status||"terminating"===e.status));let t=null;return e&&(t=setInterval((()=>I(!1)),6e4)),()=>{t&&clearInterval(t)}}),[s]),(0,t.useEffect)((()=>{I(),(async()=>{try{const e=await fetch(`${h}/api/public/extension/gpu/list`,{headers:_});if(!e.ok)throw new Error("Failed to fetch GPU plans");const t=await e.json(),n=Object.entries(t.data).reduce(((e,t)=>{let[n,i]=t;return i.regions_with_capacity_available.length>0&&(e[n]=i),e}),{});w(n)}catch(e){console.error("Error fetching GPU plans:",e),u(e instanceof Error?e.message:"Failed to fetch GPU plans")}})(),o&&o()}),[]);const P=async(e,t)=>{try{if(u(null),"launch"===t){const t=localStorage.getItem("PRIVATE_SSH_KEY"),n=(localStorage.getItem("PUBLIC_SSH_KEY"),s.find((t=>t.id===e)));return void Sp.postMessage({type:"openRemoteSSH",data:{sshKey:t,sshKeyName:null===n||void 0===n?void 0:n.ssh_key_names[0],ip:(null===n||void 0===n?void 0:n.ip)||"",instanceId:e}})}if(!(await fetch(`${h}/api/public/extension/gpu/${e}`,{method:"POST",headers:_,body:JSON.stringify({action:t})})).ok)throw new Error(`Failed to ${t} instance`);I()}catch(n){u(n instanceof Error?n.message:`Failed to ${t} instance`)}};return(0,Ip.jsx)("div",{className:"modal-overlay",onClick:()=>{v?(b(!1),x(null)):i()},children:(0,Ip.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Ip.jsxs)("div",{className:"modal-header",children:[(0,Ip.jsx)("h2",{children:p?"Create Instance":"GPU Instances"}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:()=>{v?(b(!1),x(null)):i()},children:(0,Ip.jsx)("i",{className:"codicon codicon-close"})})]}),!l&&!v&&(0,Ip.jsxs)("div",{className:"modal-header-actions",children:[p&&(0,Ip.jsx)("div",{className:"back-button-container",children:(0,Ip.jsxs)(ts,{onClick:()=>f(!1),children:[(0,Ip.jsx)("i",{className:"codicon codicon-arrow-left"})," Back"]})}),!p||s.length>0&&(0,Ip.jsx)("div",{})]}),l?(0,Ip.jsx)("div",{className:"loading",children:"Loading instances..."}):p||0===s.length?(0,Ip.jsx)("div",{className:"gpu-list",children:Object.entries(k).map((e=>{let[t,n]=e;const{instance_type:i}=n,r=(i.price_cents_per_hour/100).toFixed(2),o=(i.price_cents_per_hour/(100*i.specs.gpus||1)).toFixed(2);return(0,Ip.jsxs)("div",{className:"gpu-item "+(m?"disabled":""),onClick:()=>(async e=>{m||(x(e),b(!0))})(t),style:{cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:[(0,Ip.jsxs)("div",{className:"gpu-info",children:[(0,Ip.jsx)("div",{className:"gpu-name",children:i.description}),(0,Ip.jsxs)("div",{className:"gpu-specs",children:[i.specs.vcpus," vCPUs, ",i.specs.memory_gib," GiB RAM, ",(i.specs.storage_gib/1024).toFixed(1)," TiB SSD"]})]}),(0,Ip.jsxs)("div",{className:"gpu-price",children:["$",r,"/hr",(0,Ip.jsxs)("div",{className:"price-per-gpu",children:["$",o,"/GPU/hr"]})]})]},t)}))}):(0,Ip.jsxs)("div",{className:"instances-list",children:[d&&(0,Ip.jsx)("div",{className:"error-message",children:d}),(0,Ip.jsxs)("div",{className:"create-instance-row",onClick:()=>f(!0),children:[(0,Ip.jsxs)("div",{className:"instance-info",children:[(0,Ip.jsx)("div",{className:"instance-name",children:"Create New Instance"}),(0,Ip.jsx)("div",{className:"instance-details",children:(0,Ip.jsx)("span",{children:"Click to add a new GPU instance"})})]}),(0,Ip.jsx)("div",{className:"instance-actions",children:(0,Ip.jsx)("button",{className:"action-button","data-tooltip":"Create",children:(0,Ip.jsx)("i",{className:"codicon codicon-plus"})})})]}),s.map((e=>(0,Ip.jsxs)("div",{className:"instance-item",children:[(0,Ip.jsxs)("div",{className:"instance-info",children:[(0,Ip.jsx)("div",{className:"instance-name",children:e.name||"NO_NAME"}),(0,Ip.jsxs)("div",{className:"instance-details",children:[(0,Ip.jsx)("span",{children:e.instance_type.name}),(0,Ip.jsxs)("span",{className:"status",children:[(0,Ip.jsx)("span",{className:`status-dot ${e.status}`}),e.status]})]}),e.ip&&(0,Ip.jsx)("div",{className:"instance-ip",children:e.region.name})]}),(0,Ip.jsxs)("div",{className:"instance-actions",children:["active"===e.status&&(0,Ip.jsx)("button",{className:"action-button",onClick:()=>P(e.id,"launch"),"data-tooltip":"Launch",children:(0,Ip.jsx)("i",{className:"codicon codicon-play"})}),"active"===e.status&&(0,Ip.jsx)("button",{className:"action-button",onClick:()=>P(e.id,"restart"),"data-tooltip":"Restart",children:(0,Ip.jsx)("i",{className:"codicon codicon-refresh"})}),"active"===e.status&&e.actions.terminate.available&&(0,Ip.jsx)("button",{className:"action-button",onClick:()=>P(e.id,"terminate"),"data-tooltip":"Stop",children:(0,Ip.jsx)("i",{className:"codicon codicon-stop"})})]})]},e.id)))]}),v&&y&&(0,Ip.jsx)("div",{className:"launch-confirmation-overlay",onClick:()=>{b(!1),x(null)},children:(0,Ip.jsxs)("div",{className:"launch-confirmation",onClick:e=>e.stopPropagation(),children:[(0,Ip.jsxs)("div",{className:"confirmation-header",children:[(0,Ip.jsx)("h3",{children:"Instance type"}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:()=>{b(!1),x(null)},children:(0,Ip.jsx)("i",{className:"codicon codicon-close"})})]}),(0,Ip.jsx)("div",{className:"confirmation-details",children:(0,Ip.jsxs)("div",{className:"launch-button-container",children:[(0,Ip.jsxs)(ts,{onClick:async()=>{if(!m&&y)try{g(!0),b(!1);const t=k[y],n=await fetch(`${h}/api/public/extension/gpu`,{method:"POST",headers:_,body:JSON.stringify({region_name:(e=>{const n=t.regions_with_capacity_available.find((e=>e.name.startsWith("us-")));return(null===n||void 0===n?void 0:n.name)||(null===(e=t.regions_with_capacity_available[0])||void 0===e?void 0:e.name)})(),instance_type_name:y})}),i=await n.json();var e;if(i.error)return void(null!==i&&void 0!==i&&null!==(e=i.error)&&void 0!==e&&e.includes("Upgrade required")?(E(i.error),S(!0)):Sp.postMessage({type:"showInformationMessage",text:`GPU Creation Failed: ${i.error}`}));Sp.postMessage({type:"showInformationMessage",text:"GPU successfully created!"}),p&&f(!1),I()}catch(d){console.error("Error requesting GPU:",d),Sp.postMessage({type:"showInformationMessage",text:`Error requesting GPU: ${(null===d||void 0===d?void 0:d.message)||"Unknown error occurred"}`})}finally{g(!1)}},disabled:m,children:["Launch ",null===(n=k[y])||void 0===n?void 0:n.instance_type.description]}),(0,Ip.jsx)("p",{className:"launch-note",children:"Instances may take up to 20 minutes to boot, you will not be charged during this time."})]})})]})}),C&&(0,Ip.jsx)("div",{className:"launch-confirmation-overlay",onClick:()=>S(!1),children:(0,Ip.jsxs)("div",{className:"launch-confirmation",onClick:e=>e.stopPropagation(),children:[(0,Ip.jsxs)("div",{className:"confirmation-header",children:[(0,Ip.jsx)("h3",{children:"Upgrade Required"}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:()=>S(!1),children:(0,Ip.jsx)("i",{className:"codicon codicon-close"})})]}),(0,Ip.jsxs)("div",{className:"confirmation-details",children:[(0,Ip.jsx)("p",{children:T}),(0,Ip.jsx)("div",{className:"launch-button-container",children:(0,Ip.jsx)(ts,{onClick:()=>i(!0),children:"Upgrade"})})]})]})}),(0,Ip.jsx)("style",{children:"\n                        .launch-confirmation-overlay {\n                            position: fixed;\n                            top: 0;\n                            left: 0;\n                            right: 0;\n                            bottom: 0;\n                            background: rgba(0, 0, 0, 0.5);\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            z-index: 1000;\n                        }\n                        .launch-confirmation {\n                            position: relative;\n                            width: 90%;\n                            max-width: 500px;\n                            padding: 20px;\n                            background: var(--vscode-editor-background);\n                            border-radius: 6px;\n                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n                        }\n                        .confirmation-header {\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                            margin-bottom: 16px;\n                        }\n                        .confirmation-header h3 {\n                            margin: 0;\n                            color: var(--vscode-editor-foreground);\n                        }\n                        .confirmation-details {\n                            display: flex;\n                            flex-direction: column;\n                            gap: 16px;\n                        }\n                        .launch-button-container {\n                            display: flex;\n                            flex-direction: column;\n                            gap: 8px;\n                            margin-top: 16px;\n                        }\n                        .launch-note {\n                            font-size: 12px;\n                            color: var(--vscode-descriptionForeground);\n                            margin: 0;\n                        }\n                    "})]})})},NI={gpu_1x_gh200:{instance_type:{name:"gpu_1x_gh200",description:"1x GH200 (96 GB)",gpu_description:"GH200 (96 GB)",price_cents_per_hour:149,specs:{vcpus:64,memory_gib:432,storage_gib:4096,gpus:1}},regions_with_capacity_available:[]},gpu_8x_h100_sxm5:{instance_type:{name:"gpu_8x_h100_sxm5",description:"8x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:2392,specs:{vcpus:208,memory_gib:1800,storage_gib:22528,gpus:8}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_4x_h100_sxm5:{instance_type:{name:"gpu_4x_h100_sxm5",description:"4x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:1236,specs:{vcpus:104,memory_gib:900,storage_gib:11264,gpus:4}},regions_with_capacity_available:[]},gpu_2x_h100_sxm5:{instance_type:{name:"gpu_2x_h100_sxm5",description:"2x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:638,specs:{vcpus:52,memory_gib:450,storage_gib:5632,gpus:2}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_1x_h100_sxm5:{instance_type:{name:"gpu_1x_h100_sxm5",description:"1x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:329,specs:{vcpus:26,memory_gib:225,storage_gib:2816,gpus:1}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_1x_h100_pcie:{instance_type:{name:"gpu_1x_h100_pcie",description:"1x H100 (80 GB PCIe)",gpu_description:"H100 (80 GB PCIe)",price_cents_per_hour:249,specs:{vcpus:26,memory_gib:200,storage_gib:1024,gpus:1}},regions_with_capacity_available:[{name:"us-west-3",description:"Utah, USA"}]},gpu_8x_a100_80gb_sxm4:{instance_type:{name:"gpu_8x_a100_80gb_sxm4",description:"8x A100 (80 GB SXM4)",gpu_description:"A100 (80 GB SXM4)",price_cents_per_hour:1432,specs:{vcpus:240,memory_gib:1800,storage_gib:20480,gpus:8}},regions_with_capacity_available:[{name:"us-midwest-1",description:"Illinois, USA"},{name:"australia-east-1",description:"Sydney, Australia"},{name:"us-east-1",description:"Virginia, USA"}]},gpu_1x_a10:{instance_type:{name:"gpu_1x_a10",description:"1x A10 (24 GB PCIe)",gpu_description:"A10 (24 GB PCIe)",price_cents_per_hour:75,specs:{vcpus:30,memory_gib:200,storage_gib:1400,gpus:1}},regions_with_capacity_available:[{name:"us-east-1",description:"Virginia, USA"},{name:"us-west-1",description:"California, USA"}]},gpu_1x_rtx6000:{instance_type:{name:"gpu_1x_rtx6000",description:"1x RTX 6000 (24 GB)",gpu_description:"RTX 6000 (24 GB)",price_cents_per_hour:50,specs:{vcpus:14,memory_gib:46,storage_gib:512,gpus:1}},regions_with_capacity_available:[]},gpu_1x_a100:{instance_type:{name:"gpu_1x_a100",description:"1x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:129,specs:{vcpus:30,memory_gib:200,storage_gib:512,gpus:1}},regions_with_capacity_available:[]},gpu_1x_a100_sxm4:{instance_type:{name:"gpu_1x_a100_sxm4",description:"1x A100 (40 GB SXM4)",gpu_description:"A100 (40 GB SXM4)",price_cents_per_hour:129,specs:{vcpus:30,memory_gib:200,storage_gib:512,gpus:1}},regions_with_capacity_available:[{name:"us-east-1",description:"Virginia, USA"}]},gpu_2x_a100:{instance_type:{name:"gpu_2x_a100",description:"2x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:258,specs:{vcpus:60,memory_gib:400,storage_gib:1024,gpus:2}},regions_with_capacity_available:[]},gpu_4x_a100:{instance_type:{name:"gpu_4x_a100",description:"4x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:516,specs:{vcpus:120,memory_gib:800,storage_gib:1024,gpus:4}},regions_with_capacity_available:[]},gpu_8x_a100:{instance_type:{name:"gpu_8x_a100",description:"8x A100 (40 GB SXM4)",gpu_description:"A100 (40 GB SXM4)",price_cents_per_hour:1032,specs:{vcpus:124,memory_gib:1800,storage_gib:6144,gpus:8}},regions_with_capacity_available:[{name:"asia-northeast-2",description:"Tokyo, Japan"},{name:"us-west-2",description:"Arizona, USA"},{name:"europe-central-1",description:"Germany"}]},gpu_1x_a6000:{instance_type:{name:"gpu_1x_a6000",description:"1x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:80,specs:{vcpus:14,memory_gib:100,storage_gib:200,gpus:1}},regions_with_capacity_available:[]},gpu_2x_a6000:{instance_type:{name:"gpu_2x_a6000",description:"2x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:160,specs:{vcpus:28,memory_gib:200,storage_gib:1024,gpus:2}},regions_with_capacity_available:[]},gpu_4x_a6000:{instance_type:{name:"gpu_4x_a6000",description:"4x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:320,specs:{vcpus:56,memory_gib:400,storage_gib:1024,gpus:4}},regions_with_capacity_available:[{name:"us-south-1",description:"Texas, USA"}]},gpu_8x_v100:{instance_type:{name:"gpu_8x_v100",description:"8x Tesla V100 (16 GB)",gpu_description:"Tesla V100 (16 GB)",price_cents_per_hour:440,specs:{vcpus:92,memory_gib:448,storage_gib:6041,gpus:8}},regions_with_capacity_available:[{name:"us-south-1",description:"Texas, USA"}]},cpu_4x_general:{instance_type:{name:"cpu_4x_general",description:"4x CPU General (16 GiB)",gpu_description:"N/A",price_cents_per_hour:20,specs:{vcpus:4,memory_gib:16,storage_gib:100,gpus:0}},regions_with_capacity_available:[]}},jI=e=>{let{onDone:n,isLoading:i=!1}=e;const{taskHistory:r}=Ap(),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("newest"),[c,d]=(0,t.useState)("newest"),[u,h]=(0,t.useState)(""),p=(0,t.useRef)(null);(0,t.useEffect)((()=>{o&&"mostRelevant"!==a&&!c?(d(a),l("mostRelevant")):!o&&"mostRelevant"===a&&c&&(l(c),d(null))}),[o,a,c]);const f=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()},m=(0,t.useMemo)((()=>{const e=r.filter((e=>e.ts&&e.task&&!0===e.isRemote));return h(`Found ${e.length} remote tasks out of ${r.length} total tasks`),e}),[r]),g=(0,t.useMemo)((()=>new Rf(m,{keys:["task"],threshold:.6,shouldSort:!0,isCaseSensitive:!1,ignoreLocation:!1,includeMatches:!0,minMatchCharLength:1})),[m]),v=(0,t.useMemo)((()=>{let e=o?LI(g.search(o)):m;return e.sort(((e,t)=>{switch(a){case"oldest":return e.ts-t.ts;case"mostRelevant":return o?0:t.ts-e.ts;default:return t.ts-e.ts}})),e}),[m,o,g,a]);return(0,t.useEffect)((()=>{var e;p.current&&(null===(e=p.current)||void 0===e||e.scrollToIndex({index:0}))}),[v]),(0,Ip.jsx)("div",{className:"modal-overlay",children:(0,Ip.jsxs)("div",{className:"modal-content",children:[(0,Ip.jsxs)("div",{className:"modal-header",children:[(0,Ip.jsx)("h2",{children:"Remote Tasks"}),(0,Ip.jsx)(ts,{appearance:"icon",onClick:n,children:(0,Ip.jsx)("i",{className:"codicon codicon-close"})})]}),(0,Ip.jsxs)("div",{className:"modal-body",children:[(0,Ip.jsxs)("div",{className:"search-container",children:[(0,Ip.jsxs)(ps,{style:{width:"100%"},placeholder:"Search remote tasks...",value:o,onInput:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;s(n),n&&!o&&"mostRelevant"!==a&&(d(a),l("mostRelevant"))},children:[(0,Ip.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,marginTop:2.5,opacity:.8}}),o&&(0,Ip.jsx)("div",{className:"input-icon-button codicon codicon-close","aria-label":"Clear search",onClick:()=>s(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}})]}),(0,Ip.jsxs)(us,{className:"sort-options",value:a,onChange:e=>l(e.target.value),children:[(0,Ip.jsx)(ds,{value:"newest",children:"Newest"}),(0,Ip.jsx)(ds,{value:"oldest",children:"Oldest"})]})]}),(0,Ip.jsx)("div",{className:"tasks-container",children:i?(0,Ip.jsxs)("div",{className:"empty-state",children:[(0,Ip.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:"32px",marginBottom:"10px"}}),(0,Ip.jsx)("div",{children:"Loading tasks..."})]}):0===v.length?(0,Ip.jsx)("div",{className:"empty-state",children:(0,Ip.jsx)("div",{children:"No remote tasks found"})}):(0,Ip.jsx)(_c,{ref:p,className:"tasks-list",style:{height:"400px"},data:v,itemContent:(e,t)=>{var n;return(0,Ip.jsx)("div",{className:"task-item",onClick:()=>(e=>{Sp.postMessage({type:"showTaskWithId",text:e})})(t.id),children:(0,Ip.jsxs)("div",{className:"task-content",children:[(0,Ip.jsxs)("div",{className:"task-header",children:[(0,Ip.jsx)("span",{className:"task-date",children:f(t.ts)}),(0,Ip.jsx)("div",{className:"task-actions",children:(0,Ip.jsx)(ts,{appearance:"icon",onClick:e=>{e.stopPropagation(),(e=>{Sp.postMessage({type:"deleteTaskWithId",text:e})})(t.id)},className:"delete-button",children:(0,Ip.jsx)("span",{className:"codicon codicon-trash"})})})]}),(0,Ip.jsx)("div",{className:"task-description",dangerouslySetInnerHTML:{__html:t.task}}),(0,Ip.jsxs)("div",{className:"task-details",style:{display:"none"},children:[(0,Ip.jsx)("div",{className:"task-model-info",children:t.selectedModel&&(0,Ip.jsxs)("span",{className:"model-name",children:["Model: ",t.selectedModel.displayName||t.selectedModel.id]})}),!!t.totalCost&&(0,Ip.jsxs)("div",{className:"task-cost",children:[(0,Ip.jsxs)("div",{className:"cost-label",children:[(0,Ip.jsx)("span",{children:"API Cost:"}),(0,Ip.jsxs)("span",{children:["$",null===(n=t.totalCost)||void 0===n?void 0:n.toFixed(4)]})]}),(0,Ip.jsx)(DI,{itemId:t.id})]}),!t.totalCost&&(0,Ip.jsx)(DI,{itemId:t.id})]})]})},t.id)}})})]}),(0,Ip.jsx)("div",{style:{borderTop:"1px solid var(--vscode-panel-border)",padding:"16px",display:"flex"},children:(0,Ip.jsx)(ts,{style:{width:"100%"},onClick:()=>{Sp.postMessage({type:"chatSettings",chatSettings:{mode:"remote",autoMode:!1}}),n()},children:"New Remote Task"})})]})})},DI=e=>{let{itemId:t}=e;return(0,Ip.jsx)(ts,{className:"export-button",appearance:"icon",onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"exportTaskWithId",text:t})},title:"Export task",children:(0,Ip.jsx)("span",{className:"codicon codicon-export"})})},LI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"task-item-highlight";const n=e=>{if(0===e.length)return e;e.sort(((e,t)=>e[0]-t[0]));const t=[e[0]];for(let n=1;n<e.length;n++){const i=t[t.length-1],r=e[n];r[0]<=i[1]+1?i[1]=Math.max(i[1],r[1]):t.push(r)}return t};return e.filter((e=>{let{matches:t}=e;return t&&t.length})).map((e=>{let{item:i,matches:r}=e;const o={...i};return null===r||void 0===r||r.forEach((e=>{if(e.key&&"string"===typeof e.value&&e.indices){const i=n([...e.indices]);((e,t,n)=>{const i=t.split(".");let r;for(r=0;r<i.length-1;r++)e=e[i[r]];e[i[r]]=n})(o,e.key,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===i.length)return e;const r=n(i);let o="",s=0;return r.forEach((n=>{const i=n[0],r=n[1]+1;o+=[e.substring(s,i),`<span class="${t}">`,e.substring(i,r),"</span>"].join(""),s=r})),o+=e.substring(s),o}(e.value,i))}})),o}))},FI=(0,t.memo)(jI),BI=e=>{let{version:t,hideAnnouncement:n}=e;const i=t.split(".").slice(0,2).join(".");return(0,Ip.jsxs)("div",{style:{border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"12px",padding:"12px 16px",margin:"15px",position:"relative",flexShrink:0},children:[(0,Ip.jsx)(ts,{appearance:"icon",onClick:n,style:{position:"absolute",top:"8px",right:"8px"},children:(0,Ip.jsx)("span",{className:"codicon codicon-close"})}),(0,Ip.jsxs)("h3",{style:{margin:"0 0 8px"},children:["\ud83c\udf89","  ","New in v",i]}),(0,Ip.jsx)("p",{style:{margin:"5px 0px",fontWeight:"bold"},children:"OpenAI GPT-5"}),(0,Ip.jsx)("p",{style:{margin:"5px 0px"},children:"BLACKBOXAI Coding Agent now also with GPT-5 is OpenAI's most advanced model, offering major improvements in reasoning, code quality, and user experience."}),(0,Ip.jsx)("p",{style:{margin:"5px 0px",fontWeight:"bold"},children:"Deep Planning Command"}),(0,Ip.jsx)("p",{style:{margin:"5px 0px"},children:"New /deep-planning command helps you create comprehensive implementation plans before coding."})]})},UI=(0,t.memo)(BI);Math.min,Math.max,Math.round,Math.floor;typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function $I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zI,VI={exports:{}},HI=VI.exports;var WI=(zI||(zI=1,function(e){!function(t,n){e.exports?e.exports=n():t.log=n()}(HI,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function d(i,r,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?s(console,i):void 0!==console.log?s(console,"log"):e)}(i)||c.apply(this,arguments)}function u(e,n){var s,a,c,u=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch{}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch{}return void 0===u.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||d,u.getLevel=function(){return c??a??s},u.setLevel=function(e,n){return c=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch{}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch{}}}(c),l.call(u)},u.setDefaultLevel=function(e){a=f(e),p()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch{}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(o!==u&&(s=f(o.getLevel())),l.call(u),o===u)for(var e in r)r[e].rebuild()},s=f(o?o.getLevel():"WARN");var m=p();null!=m&&(c=f(m)),l.call(u)}(o=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new u(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return r},o.default=o,o}))}(VI)),VI.exports);const qI=$I(WI);var KI=function(e,t){return(KI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function GI(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}KI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function YI(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(Cu){o(Cu)}}function a(e){try{l(i.throw(e))}catch(Cu){o(Cu)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function QI(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function XI(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function JI(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function ZI(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function eP(e){return this instanceof eP?(this.v=e,this):new eP(e)}function tP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function s(e,t){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))},t&&(i[e]=t(i[e])))}function a(e,t){try{!function(e){e.value instanceof eP?Promise.resolve(e.value.v).then(l,c):d(o[0][2],e)}(r[e](t))}catch(rm){d(o[0][3],rm)}}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function nP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=XI(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function iP(e){return"function"==typeof e}function rP(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var oP=rP((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function sP(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var aP=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=XI(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(rm){e={error:rm}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(iP(l))try{l()}catch(rm){r=rm instanceof oP?rm.errors:[rm]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var d=XI(c),u=d.next();!u.done;u=d.next()){var h=u.value;try{dP(h)}catch(rm){r=r??[],rm instanceof oP?r=ZI(ZI([],JI(r)),JI(rm.errors)):r.push(rm)}}}catch(rm){n={error:rm}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(r)throw new oP(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)dP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&sP(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&sP(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),lP=aP.EMPTY;function cP(e){return e instanceof aP||e&&"closed"in e&&iP(e.remove)&&iP(e.add)&&iP(e.unsubscribe)}function dP(e){iP(e)?e():e.unsubscribe()}var uP=void 0,hP={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,ZI([e,t],JI(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function pP(e){hP.setTimeout((function(){throw e}))}function fP(){}function mP(e){e()}var gP=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,cP(t)&&t.add(n)):n.destination=xP,n}return GI(t,e),t.create=function(e,t,n){return new bP(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(aP),vP=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){yP(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){yP(n)}else yP(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){yP(t)}},e}(),bP=function(e){function t(t,n,i){var r,o=e.call(this)||this;return r=iP(t)||!t?{next:t??void 0,error:n??void 0,complete:i??void 0}:t,o.destination=new vP(r),o}return GI(t,e),t}(gP);function yP(e){pP(e)}var xP={closed:!0,next:fP,error:function(e){throw e},complete:fP},kP="function"==typeof Symbol&&Symbol.observable||"@@observable";function wP(e){return e}var CP=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this,r=function(e){return e&&e instanceof gP||function(e){return e&&iP(e.next)&&iP(e.error)&&iP(e.complete)}(e)&&cP(e)}(e)?e:new bP(e,t,n);return mP((function(){var e=i,t=e.operator,n=e.source;r.add(t?t.call(r,n):n?i._subscribe(r):i._trySubscribe(r))})),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=SP(t))((function(t,i){var r=new bP({next:function(t){try{e(t)}catch(n){i(n),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[kP]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return 0===e.length?wP:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=SP(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function SP(e){var t;return null!==(t=e??uP)&&void 0!==t?t:Promise}function TP(e){return function(t){if(function(e){return iP(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function EP(e,t,n,i,r){return new _P(e,t,n,i,r)}var _P=function(e){function t(t,n,i,r,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(i){t.error(i)}}:e.prototype._next,a._error=r?function(e){try{r(e)}catch(n){t.error(n)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return GI(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(gP),IP=rP((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),PP=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return GI(t,e),t.prototype.lift=function(e){var t=new RP(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new IP},t.prototype.next=function(e){var t=this;mP((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var r=XI(t.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;mP((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;mP((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,r=n.isStopped,o=n.observers;return i||r?lP:(this.currentObservers=null,o.push(e),new aP((function(){t.currentObservers=null,sP(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,r=t.isStopped;n?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new CP;return e.source=this,e},t.create=function(e,t){return new RP(e,t)},t}(CP),RP=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return GI(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:lP},t}(PP),AP=(function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}GI(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,i=e._value;if(t)throw n;return this._throwIfClosed(),i},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)}}(PP),function(){return Date.now()}),MP=function(e){function t(t,n){return e.call(this)||this}return GI(t,e),t.prototype.schedule=function(e,t){return this},t}(aP),OP=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,ZI([e,t],JI(n)))},NP=function(e){return clearInterval(e)},jP=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return GI(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),OP(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&NP(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(r){i=!0,n=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,sP(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(MP),DP=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=AP,e}();new(function(e){function t(t,n){void 0===n&&(n=DP.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return GI(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(DP))(jP);function LP(e){return function(e){return e&&iP(e.schedule)}(function(e){return e[e.length-1]}(e))?e.pop():void 0}var FP=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function BP(e){return iP(null==e?void 0:e.then)}function UP(e){return iP(e[kP])}function $P(e){return Symbol.asyncIterator&&iP(null==e?void 0:e[Symbol.asyncIterator])}function zP(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var VP="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function HP(e){return iP(null==e?void 0:e[VP])}function WP(e){return tP(this,arguments,(function(){var t,n,i;return QI(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,eP(t.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,eP(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,eP(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function qP(e){return iP(null==e?void 0:e.getReader)}function KP(e){if(e instanceof CP)return e;if(null!=e){if(UP(e))return function(e){return new CP((function(t){var n=e[kP]();if(iP(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(FP(e))return function(e){return new CP((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}(e);if(BP(e))return function(e){return new CP((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,pP)}))}(e);if($P(e))return GP(e);if(HP(e))return function(e){return new CP((function(t){var n,i;try{for(var r=XI(e),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()}))}(e);if(qP(e))return function(e){return GP(WP(e))}(e)}throw zP(e)}function GP(e){return new CP((function(t){(function(e,t){var n,i,r,o;return YI(this,void 0,void 0,(function(){var s,a;return QI(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=nP(e),l.label=1;case 1:return[4,n.next()];case 2:if((i=l.sent()).done)return[3,4];if(s=i.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),r={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function YP(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var o=t.schedule((function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(o),!r)return o}function QP(e,t){return void 0===t&&(t=0),TP((function(n,i){n.subscribe(EP(i,(function(n){return YP(i,e,(function(){return i.next(n)}),t)}),(function(){return YP(i,e,(function(){return i.complete()}),t)}),(function(n){return YP(i,e,(function(){return i.error(n)}),t)})))}))}function XP(e,t){return void 0===t&&(t=0),TP((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}function JP(e,t){if(!e)throw new Error("Iterable cannot be null");return new CP((function(n){YP(n,t,(function(){var i=e[Symbol.asyncIterator]();YP(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function ZP(e,t){if(null!=e){if(UP(e))return function(e,t){return KP(e).pipe(XP(t),QP(t))}(e,t);if(FP(e))return function(e,t){return new CP((function(n){var i=0;return t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())}))}))}(e,t);if(BP(e))return function(e,t){return KP(e).pipe(XP(t),QP(t))}(e,t);if($P(e))return JP(e,t);if(HP(e))return function(e,t){return new CP((function(n){var i;return YP(n,t,(function(){i=e[VP](),YP(n,t,(function(){var e,t,r;try{t=(e=i.next()).value,r=e.done}catch(o){return void n.error(o)}r?n.complete():n.next(t)}),0,!0)})),function(){return iP(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(qP(e))return function(e,t){return JP(WP(e),t)}(e,t)}throw zP(e)}function eR(e,t){return t?ZP(e,t):KP(e)}rP((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function tR(e,t){return TP((function(n,i){var r=0;n.subscribe(EP(i,(function(n){i.next(e.call(t,n,r++))})))}))}Array.isArray;function nR(e,t,n){return void 0===n&&(n=1/0),iP(t)?nR((function(n,i){return tR((function(e,r){return t(n,e,i,r)}))(KP(e(n,i)))}),n):("number"==typeof t&&(n=t),TP((function(t,i){return function(e,t,n,i,r,o,s,a){var l=[],c=0,d=0,u=!1,h=function(){u&&!l.length&&!c&&t.complete()},p=function(e){c++;var r=!1;KP(n(e,d++)).subscribe(EP(t,(function(e){t.next(e)}),(function(){r=!0}),void 0,(function(){if(r)try{c--;for(var e=function(){var e=l.shift();s||p(e)};l.length&&c<i;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(EP(t,(function(e){return c<i?p(e):l.push(e)}),(function(){u=!0,h()}))),function(){}}(t,i,e,n)})))}function iR(){return function(e){return nR(wP,e)}(1)}function rR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return iR()(eR(e,LP(e)))}function oR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=LP(e);return TP((function(t,i){(n?rR(e,t,n):rR(e,t)).subscribe(i)}))}var sR=Object.defineProperty,aR=Object.defineProperties,lR=Object.getOwnPropertyDescriptors,cR=Object.getOwnPropertySymbols,dR=Object.prototype.hasOwnProperty,uR=Object.prototype.propertyIsEnumerable,hR=(e,t,n)=>t in e?sR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pR=(e,t)=>{for(var n in t||(t={}))dR.call(t,n)&&hR(e,n,t[n]);if(cR)for(var n of cR(t))uR.call(t,n)&&hR(e,n,t[n]);return e},fR=(e,t)=>aR(e,lR(t)),mR="lk";function gR(e){return!(typeof e>"u")&&(function(e){var t;return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof(null==(t=e.publication)?void 0:t.track)<"u")}(e)||function(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u")}(e))}function vR(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u")}function bR(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(vR(e))return`${e.participant.identity}_${e.source}_placeholder`;if(gR(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}var yR=[...[US.ConnectionStateChanged,US.RoomMetadataChanged,US.ActiveSpeakersChanged,US.ConnectionQualityChanged,US.ParticipantConnected,US.ParticipantDisconnected,US.ParticipantPermissionsChanged,US.ParticipantMetadataChanged,US.ParticipantNameChanged,US.ParticipantAttributesChanged,US.TrackMuted,US.TrackUnmuted,US.TrackPublished,US.TrackUnpublished,US.TrackStreamStateChanged,US.TrackSubscriptionFailed,US.TrackSubscriptionPermissionChanged,US.TrackSubscriptionStatusChanged],US.LocalTrackPublished,US.LocalTrackUnpublished],xR=[$S.TrackPublished,$S.TrackUnpublished,$S.TrackMuted,$S.TrackUnmuted,$S.TrackStreamStateChanged,$S.TrackSubscribed,$S.TrackUnsubscribed,$S.TrackSubscriptionPermissionChanged,$S.TrackSubscriptionFailed,$S.LocalTrackPublished,$S.LocalTrackUnpublished],kR=($S.ConnectionQualityChanged,$S.IsSpeakingChanged,$S.ParticipantMetadataChanged,$S.ParticipantPermissionsChanged,$S.TrackMuted,$S.TrackUnmuted,$S.TrackPublished,$S.TrackUnpublished,$S.TrackStreamStateChanged,$S.TrackSubscriptionFailed,$S.TrackSubscriptionPermissionChanged,$S.TrackSubscriptionStatusChanged,$S.LocalTrackPublished,$S.LocalTrackUnpublished,qI.getLogger("lk-components-js"));kR.setDefaultLevel("WARN");function wR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new CP((t=>{const i=()=>{t.next(e)};return n.forEach((t=>{e.on(t,i)})),()=>{n.forEach((t=>{e.off(t,i)}))}})).pipe(oR(e))}function CR(e,t){return new CP((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}function SR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new CP((t=>{const i=()=>{t.next(e)};return n.forEach((t=>{e.on(t,i)})),()=>{n.forEach((t=>{e.off(t,i)}))}})).pipe(oR(e))}function TR(e,t){return new CP((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}function ER(e){return typeof e>"u"?new CP:TR(e,$S.AttributesChanged).pipe(tR((t=>{let[n]=t;return{changed:n,attributes:e.attributes}})),oR({changed:e.attributes,attributes:e.attributes}))}function _R(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{sources:i,kind:r,name:o}=t;return Array.from(e.trackPublications.values()).filter((e=>(!i||i.includes(e.source))&&(!r||e.kind===r)&&(!o||e.trackName===o)&&(!n||e.track))).map((t=>({participant:e,publication:t,source:t.source})))}function IR(e,t){return new CP((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}var PR=`${mR}-user-choices`,{load:RR,save:AR}=function(e){return{load:()=>function(e){if(typeof localStorage>"u")kR.error("Local storage is not available.");else try{const t=localStorage.getItem(e);return t?JSON.parse(t):void kR.warn(`Item with key ${e} does not exist in local storage.`)}catch(t){return void kR.error(`Error getting item from local storage: ${t}`)}}(e),save:t=>function(e,t){if(typeof localStorage>"u")kR.error("Local storage is not available.");else try{if(t){const n=Object.fromEntries(Object.entries(t).filter((e=>{let[,t]=e;return""!==t})));localStorage.setItem(e,JSON.stringify(n))}}catch(n){kR.error(`Error setting item to local storage: ${n}`)}}(e,t)}}(PR);t.createContext(void 0);t.createContext(void 0);const MR=t.createContext(void 0);function OR(){return t.useContext(MR)}const NR=t.createContext(void 0);function jR(){const e=t.useContext(NR);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function DR(e){const n=t.useContext(NR),i=e??n;if(!i)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return i}t.createContext(void 0);function LR(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r,o]=t.useState(n);return t.useEffect((()=>{if(i&&o(n),typeof window>"u"||!e)return;const t=e.subscribe(o);return()=>t.unsubscribe()}),[e,i]),r}function FR(e){const n=DR(e),i=t.useMemo((()=>function(e){return CR(e,US.ConnectionStateChanged).pipe(tR((e=>{let[t]=e;return t})),oR(e.state))}(n)),[n]);return LR(i,n.state)}function BR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=DR(e.room),[i,r]=t.useState([]);return t.useEffect((()=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let i;const r=new CP((e=>(i=e,()=>s.unsubscribe()))).pipe(oR(Array.from(e.remoteParticipants.values()))),o=null!=(n=t.additionalRoomEvents)?n:yR,s=wR(e,...Array.from(new Set([US.ParticipantConnected,US.ParticipantDisconnected,US.ConnectionStateChanged,...o]))).subscribe((e=>null==i?void 0:i.next(Array.from(e.remoteParticipants.values()))));return e.remoteParticipants.size>0&&(null==i||i.next(Array.from(e.remoteParticipants.values()))),r}(n,{additionalRoomEvents:e.updateOnlyOn}).subscribe(r);return()=>t.unsubscribe()}),[n,JSON.stringify(e.updateOnlyOn)]),i}function UR(e,n){const i=jR(),r=OR(),o=n?i.getParticipantByIdentity(n):r,s=t.useMemo((()=>o?function(e,t){return SR(e,...xR).pipe(tR((e=>{const n=_R(e,t);return kR.debug(`TrackReference[] was updated. (length ${n.length})`,n),n})),oR(_R(e,t)))}(o,{sources:e}):void 0),[null==o?void 0:o.sid,null==o?void 0:o.identity,JSON.stringify(e)]);return LR(s,[])}function $R(e){var n,i,r;return LR(t.useMemo((()=>{var t;return null!=(t=null==e?void 0:e.publication)&&t.track?function(e){return IR(e,VS.TimeSyncUpdate).pipe(tR((e=>{let[t]=e;return t})))}(null==e?void 0:e.publication.track):void 0}),[null==(n=null==e?void 0:e.publication)?void 0:n.track]),{timestamp:Date.now(),rtpTimestamp:null==(r=null==(i=null==e?void 0:e.publication)?void 0:i.track)?void 0:r.rtpTimestamp})}const zR={bufferSize:100};function VR(e,n){const i={...zR,...n},[r,o]=t.useState([]),s=$R(e),a=e=>{var t;null==(t=i.onTranscription)||t.call(i,e),o((t=>function(e,t,n){return[...e,...t].reduceRight(((e,t)=>(e.find((e=>e.id===t.id))||e.unshift(t),e)),[]).slice(0-n)}(t,e.map((e=>function(e,t){var n;return fR(pR({},e),{receivedAtMediaTimestamp:null!=(n=t.rtpTimestamp)?n:0,receivedAt:t.timestamp})}(e,s))),i.bufferSize)))};return t.useEffect((()=>{if(null==e||!e.publication)return;const t=function(e){return IR(e,VS.TranscriptionReceived)}(e.publication).subscribe((e=>{a(...e)}));return()=>{t.unsubscribe()}}),[e&&bR(e),a]),{segments:r}}const HR="lk.agent.state";function WR(){const e=BR(),n=e.find((e=>e.kind===Ok.AGENT&&!("lk.publish_on_behalf"in e.attributes))),i=e.find((e=>e.kind===Ok.AGENT&&e.attributes["lk.publish_on_behalf"]===(null==n?void 0:n.identity))),r=UR([lT.Source.Microphone,lT.Source.Camera],null==n?void 0:n.identity),o=UR([lT.Source.Microphone,lT.Source.Camera],null==i?void 0:i.identity),s=r.find((e=>e.source===lT.Source.Microphone))??o.find((e=>e.source===lT.Source.Microphone)),a=r.find((e=>e.source===lT.Source.Camera))??o.find((e=>e.source===lT.Source.Camera)),{segments:l}=VR(s),c=FR(),{attributes:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=OR(),i=e.participant??n;return LR(t.useMemo((()=>ER(i)),[i]),{attributes:null==i?void 0:i.attributes})}({participant:n}),u=t.useMemo((()=>c===J_.Disconnected?"disconnected":c!==J_.Connecting&&n&&null!=d&&d[HR]?d[HR]:"connecting"),[d,n,c]);return{agent:n,state:u,audioTrack:s,videoTrack:a,agentTranscriptions:l,agentAttributes:d}}function qR(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,i)=>"create"===i?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function KR(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const GR=e=>Array.isArray(e);function YR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function QR(e){return"string"===typeof e||Array.isArray(e)}function XR(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function JR(e,t,n,i){if("function"===typeof t){const[r,o]=XR(i);t=t(void 0!==n?n:e.custom,r,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,o]=XR(i);t=t(void 0!==n?n:e.custom,r,o)}return t}function ZR(e,t,n){const i=e.getProps();return JR(i,t,void 0!==n?n:i.custom,e)}const eA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tA=["initial",...eA];function nA(e){let t;return()=>(void 0===t&&(t=e()),t)}const iA=nA((()=>void 0!==window.ScrollTimeline));class rA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>iA()&&n.attachTimeline?n.attachTimeline(e):"function"===typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class oA extends rA{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function sA(e,t){return e?e[t]||e.default||e:void 0}const aA=2e4;function lA(e){let t=0;let n=e.next(t);for(;!n.done&&t<aA;)t+=50,n=e.next(t);return t>=aA?1/0:t}function cA(e){return"function"===typeof e}function dA(e,t){e.timeline=t,e.onfinish=null}const uA=e=>Array.isArray(e)&&"number"===typeof e[0],hA={linearEasing:void 0};function pA(e,t){const n=nA(e);return()=>{var e;return null!==(e=hA[t])&&void 0!==e?e:n()}}const fA=pA((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(K$){return!1}return!0}),"linearEasing"),mA=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},gA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="";const r=Math.max(Math.round(t/n),2);for(let o=0;o<r;o++)i+=e(mA(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function vA(e){return Boolean("function"===typeof e&&fA()||!e||"string"===typeof e&&(e in yA||fA())||uA(e)||Array.isArray(e)&&e.every(vA))}const bA=e=>{let[t,n,i,r]=e;return`cubic-bezier(${t}, ${n}, ${i}, ${r})`},yA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bA([0,.65,.55,1]),circOut:bA([.55,0,1,.45]),backIn:bA([.31,.01,.66,-.59]),backOut:bA([.33,1.53,.69,.99])};function xA(e,t){return e?"function"===typeof e&&fA()?gA(e,t):uA(e)?bA(e):Array.isArray(e)?e.map((e=>xA(e,t)||yA.easeOut)):yA[e]:void 0}const kA={x:!1,y:!1};function wA(){return kA.x||kA.y}function CA(e,t){const n=function(e,t,n){var i;if(e instanceof Element)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const o=null!==(i=null===n||void 0===n?void 0:n[e])&&void 0!==i?i:r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function SA(e){return t=>{"touch"===t.pointerType||wA()||e(t)}}const TA=(e,t)=>!!t&&(e===t||TA(e,t.parentElement)),EA=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,_A=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const IA=new WeakSet;function PA(e){return t=>{"Enter"===t.key&&e(t)}}function RA(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function AA(e){return EA(e)&&!wA()}function MA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,r,o]=CA(e,n),s=e=>{const i=e.currentTarget;if(!AA(e)||IA.has(i))return;IA.add(i);const o=t(e),s=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),AA(e)&&IA.has(i)&&(IA.delete(i),"function"===typeof o&&o(e,{success:t}))},a=e=>{s(e,n.useGlobalTarget||TA(i,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",a,r),window.addEventListener("pointercancel",l,r)};return i.forEach((e=>{(function(e){return _A.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,r),e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const i=PA((()=>{if(IA.has(n))return;RA(n,"down");const e=PA((()=>{RA(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>RA(n,"cancel")),t)}));n.addEventListener("keydown",i,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",i)),t)})(e,r)),r)})),o}const OA=e=>1e3*e,NA=e=>e/1e3,jA=e=>e;const DA=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],LA=new Set(DA),FA=new Set(["width","height","top","left","right","bottom",...DA]),BA=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),UA=e=>GR(e)?e[e.length-1]||0:e,$A=!1,zA=!1;const VA=["read","resolveKeyframes","update","preRender","render","postRender"];function HA(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=VA.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(t){o.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:function(e){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),r.has(e)||r.add(e),e},cancel:e=>{n.delete(e),o.delete(e)},process:e=>{s=e,i?r=!0:(i=!0,[t,n]=[n,t],t.forEach(a),t.clear(),i=!1,r&&(r=!1,l.process(e)))}};return l}(o),e)),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:h}=s,p=()=>{const o=zA?r.timestamp:performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(o-r.timestamp,40),1),r.timestamp=o,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(p))},f=VA.reduce(((t,o)=>{const a=s[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(p)),a.schedule(t,o,s)},t}),{});return{schedule:f,cancel:e=>{for(let t=0;t<VA.length;t++)s[VA[t]].cancel(e)},state:r,steps:s}}const{schedule:WA,cancel:qA,state:KA,steps:GA}=HA("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:jA,!0);let YA;function QA(){YA=void 0}const XA={now:()=>(void 0===YA&&XA.set(KA.isProcessing||zA?KA.timestamp:performance.now()),YA),set:e=>{YA=e,queueMicrotask(QA)}};function JA(e,t){-1===e.indexOf(t)&&e.push(t)}function ZA(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class eM{constructor(){this.subscriptions=[]}add(e){return JA(this.subscriptions,e),()=>ZA(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tM(e,t){return t?e*(1e3/t):0}const nM={current:void 0};class iM{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=XA.now();t.updatedAt!==i&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=XA.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new eM);const n=this.events[e].add(t);return"change"===e?()=>{n(),WA.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return nM.current&&nM.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=XA.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return tM(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rM(e,t){return new iM(e,t)}function oM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,rM(n))}const sM=e=>Boolean(e&&e.getVelocity);function aM(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(sM(e)&&e.add)}(n))return n.add(t)}const lM=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cM="data-"+lM("framerAppearId");function dM(e){return e.props[cM]}const uM=!1,hM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,pM=1e-7,fM=12;function mM(e,t,n,i){if(e===t&&n===i)return jA;const r=t=>function(e,t,n,i,r){let o,s,a=0;do{s=t+(n-t)/2,o=hM(s,i,r)-e,o>0?n=s:t=s}while(Math.abs(o)>pM&&++a<fM);return s}(t,0,1,e,n);return e=>0===e||1===e?e:hM(r(e),t,i)}const gM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vM=e=>t=>1-e(1-t),bM=mM(.33,1.53,.69,.99),yM=vM(bM),xM=gM(yM),kM=e=>(e*=2)<1?.5*yM(e):.5*(2-Math.pow(2,-10*(e-1))),wM=e=>1-Math.sin(Math.acos(e)),CM=vM(wM),SM=gM(wM),TM=e=>/^0[^.\s]+$/u.test(e);function EM(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||TM(e))}const _M=(e,t,n)=>n>t?t:n<e?e:n,IM={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},PM={...IM,transform:e=>_M(0,1,e)},RM={...IM,default:1},AM=e=>Math.round(1e5*e)/1e5,MM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const OM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,NM=(e,t)=>n=>Boolean("string"===typeof n&&OM.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),jM=(e,t,n)=>i=>{if("string"!==typeof i)return i;const[r,o,s,a]=i.match(MM);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},DM={...IM,transform:e=>Math.round((e=>_M(0,255,e))(e))},LM={test:NM("rgb","red"),parse:jM("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+DM.transform(t)+", "+DM.transform(n)+", "+DM.transform(i)+", "+AM(PM.transform(r))+")"}};const FM={test:NM("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:LM.transform},BM=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),UM=BM("deg"),$M=BM("%"),zM=BM("px"),VM=BM("vh"),HM=BM("vw"),WM={...$M,parse:e=>$M.parse(e)/100,transform:e=>$M.transform(100*e)},qM={test:NM("hsl","hue"),parse:jM("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+$M.transform(AM(n))+", "+$M.transform(AM(i))+", "+AM(PM.transform(r))+")"}},KM={test:e=>LM.test(e)||FM.test(e)||qM.test(e),parse:e=>LM.test(e)?LM.parse(e):qM.test(e)?qM.parse(e):FM.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?LM.transform(e):qM.transform(e)},GM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const YM="number",QM="color",XM="var",JM="var(",ZM="${}",eO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tO(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const s=t.replace(eO,(e=>(KM.test(e)?(i.color.push(o),r.push(QM),n.push(KM.parse(e))):e.startsWith(JM)?(i.var.push(o),r.push(XM),n.push(e)):(i.number.push(o),r.push(YM),n.push(parseFloat(e))),++o,ZM))).split(ZM);return{values:n,split:s,indexes:i,types:r}}function nO(e){return tO(e).values}function iO(e){const{split:t,types:n}=tO(e),i=t.length;return e=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],void 0!==e[o]){const t=n[o];r+=t===YM?AM(e[o]):t===QM?KM.transform(e[o]):e[o]}return r}}const rO=e=>"number"===typeof e?0:e;const oO={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(MM))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(GM))||void 0===n?void 0:n.length)||0)>0},parse:nO,createTransformer:iO,getAnimatableNone:function(e){const t=nO(e);return iO(e)(t.map(rO))}},sO=new Set(["brightness","contrast","saturate","opacity"]);function aO(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(MM)||[];if(!i)return e;const r=n.replace(i,"");let o=sO.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+r+")"}const lO=/\b([a-z-]*)\(.*?\)/gu,cO={...oO,getAnimatableNone:e=>{const t=e.match(lO);return t?t.map(aO).join(" "):e}},dO={borderWidth:zM,borderTopWidth:zM,borderRightWidth:zM,borderBottomWidth:zM,borderLeftWidth:zM,borderRadius:zM,radius:zM,borderTopLeftRadius:zM,borderTopRightRadius:zM,borderBottomRightRadius:zM,borderBottomLeftRadius:zM,width:zM,maxWidth:zM,height:zM,maxHeight:zM,top:zM,right:zM,bottom:zM,left:zM,padding:zM,paddingTop:zM,paddingRight:zM,paddingBottom:zM,paddingLeft:zM,margin:zM,marginTop:zM,marginRight:zM,marginBottom:zM,marginLeft:zM,backgroundPositionX:zM,backgroundPositionY:zM},uO={rotate:UM,rotateX:UM,rotateY:UM,rotateZ:UM,scale:RM,scaleX:RM,scaleY:RM,scaleZ:RM,skew:UM,skewX:UM,skewY:UM,distance:zM,translateX:zM,translateY:zM,translateZ:zM,x:zM,y:zM,z:zM,perspective:zM,transformPerspective:zM,opacity:PM,originX:WM,originY:WM,originZ:zM},hO={...IM,transform:Math.round},pO={...dO,...uO,zIndex:hO,size:zM,fillOpacity:PM,strokeOpacity:PM,numOctaves:hO},fO={...pO,color:KM,backgroundColor:KM,outlineColor:KM,fill:KM,stroke:KM,borderColor:KM,borderTopColor:KM,borderRightColor:KM,borderBottomColor:KM,borderLeftColor:KM,filter:cO,WebkitFilter:cO},mO=e=>fO[e];function gO(e,t){let n=mO(e);return n!==cO&&(n=oO),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const vO=new Set(["auto","none","0"]);const bO=e=>e===IM||e===zM,yO=(e,t)=>parseFloat(e.split(", ")[t]),xO=(e,t)=>(n,i)=>{let{transform:r}=i;if("none"===r||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return yO(o[1],t);{const t=r.match(/^matrix\((.+)\)$/u);return t?yO(t[1],e):0}},kO=new Set(["x","y","z"]),wO=DA.filter((e=>!kO.has(e)));const CO={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:xO(4,13),y:xO(5,14)};CO.translateX=CO.x,CO.translateY=CO.y;const SO=new Set;let TO=!1,EO=!1;function _O(){if(EO){const e=Array.from(SO).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return wO.forEach((n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,i]=t;var r;null===(r=e.getValue(n))||void 0===r||r.set(i)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}EO=!1,TO=!1,SO.forEach((e=>e.complete())),SO.clear()}function IO(){SO.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(EO=!0)}))}class PO{constructor(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(SO.add(this),TO||(TO=!0,WA.read(IO),WA.resolveKeyframes(_O))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null===i||void 0===i?void 0:i.get(),o=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const i=n.readValue(t,o);void 0!==i&&null!==i&&(e[0]=i)}void 0===e[0]&&(e[0]=o),i&&void 0===r&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),SO.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,SO.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let RO=jA,AO=jA;const MO=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),OO=e=>t=>"string"===typeof t&&t.startsWith(e),NO=OO("--"),jO=OO("var(--"),DO=e=>!!jO(e)&&LO.test(e.split("/*")[0].trim()),LO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,FO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;AO(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[i,r]=function(e){const t=FO.exec(e);if(!t)return[,];const[,n,i,r]=t;return[`--${null!==n&&void 0!==n?n:i}`,r]}(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const e=o.trim();return MO(e)?parseFloat(e):e}return DO(r)?BO(r,t,n+1):r}const UO=e=>t=>t.test(e),$O=[IM,zM,$M,UM,HM,VM,{test:e=>"auto"===e,parse:e=>e}],zO=e=>$O.find(UO(e));class VO extends PO{constructor(e,t,n,i,r){super(e,t,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),DO(n))){const i=BO(n,t.current);void 0!==i&&(e[a]=i),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!FA.has(n)||2!==e.length)return;const[i,r]=e,o=zO(i),s=zO(r);if(o!==s)if(bO(o)&&bO(s))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)EM(e[i])&&n.push(i);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){const t=e[r];"string"===typeof t&&!vO.has(t)&&tO(t).values.length&&(i=e[r]),r++}if(i&&n)for(const o of t)e[o]=gO(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=CO[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,s=i[o];i[o]=CO[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,i]=e;t.getValue(n).set(i)})),this.resolveNoneKeyframes()}}const HO=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!oO.test(e)&&"0"!==e||e.startsWith("url(")));function WO(e,t,n,i){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],s=HO(r,t),a=HO(o,t);return RO(s===a,`You are trying to animate ${t} from "${r}" to "${o}". ${r} is not an animatable value - to enable this animation set ${r} to a value animatable to ${o} via the \`style\` property.`),!(!s||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||cA(n))&&i)}const qO=e=>null!==e;function KO(e,t,n){let{repeat:i,repeatType:r="loop"}=t;const o=e.filter(qO),s=i&&"loop"!==r&&i%2===1?0:o.length-1;return s&&void 0!==n?n:o[s]}class GO{constructor(e){let{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s="loop",...a}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=XA.now(),this.options={autoplay:t,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(IO(),_O()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=XA.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:o,onComplete:s,onUpdate:a,isGenerator:l}=this.options;if(!l&&!WO(e,n,i,r)){if(uM||!o)return a&&a(KO(e,this.options,t)),s&&s(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const YO=(e,t,n)=>e+(t-e)*n;function QO(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function XO(e,t){return n=>n>0?t:e}const JO=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},ZO=[FM,LM,qM];function eN(e){const t=(e=>ZO.find((t=>t.test(e))))(e);if(RO(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let n=t.parse(e);return t===qM&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let o=0,s=0,a=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;o=QO(r,e,t+1/3),s=QO(r,e,t),a=QO(r,e,t-1/3)}else o=s=a=i;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(n)),n}const tN=(e,t)=>{const n=eN(e),i=eN(t);if(!n||!i)return XO(e,t);const r={...n};return e=>(r.red=JO(n.red,i.red,e),r.green=JO(n.green,i.green,e),r.blue=JO(n.blue,i.blue,e),r.alpha=YO(n.alpha,i.alpha,e),LM.transform(r))},nN=(e,t)=>n=>t(e(n)),iN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(nN)},rN=new Set(["none","hidden"]);function oN(e,t){return n=>YO(e,t,n)}function sN(e){return"number"===typeof e?oN:"string"===typeof e?DO(e)?XO:KM.test(e)?tN:cN:Array.isArray(e)?aN:"object"===typeof e?KM.test(e)?tN:lN:XO}function aN(e,t){const n=[...e],i=n.length,r=e.map(((e,n)=>sN(e)(e,t[n])));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function lN(e,t){const n={...e,...t},i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=sN(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const cN=(e,t)=>{const n=oO.createTransformer(t),i=tO(e),r=tO(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?rN.has(e)&&!r.values.length||rN.has(t)&&!i.values.length?function(e,t){return rN.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):iN(aN(function(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],a=e.indexes[s][r[s]],l=null!==(n=e.values[a])&&void 0!==n?n:0;i[o]=l,r[s]++}return i}(i,r),r.values),n):(RO(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),XO(e,t))};function dN(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return YO(e,t,n);return sN(e)(e,t)}const uN=5;function hN(e,t,n){const i=Math.max(t-uN,0);return tM(n-e(i),t-i)}const pN={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fN=.001;function mN(e){let t,n,{duration:i=pN.duration,bounce:r=pN.bounce,velocity:o=pN.velocity,mass:s=pN.mass}=e;RO(i<=OA(pN.maxDuration),"Spring duration must be 10 seconds or less");let a=1-r;a=_M(pN.minDamping,pN.maxDamping,a),i=_M(pN.minDuration,pN.maxDuration,NA(i)),a<1?(t=e=>{const t=e*a,n=t*i,r=t-o,s=vN(e,a),l=Math.exp(-n);return fN-r/s*l},n=e=>{const n=e*a*i,r=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=vN(Math.pow(e,2),a);return(-t(e)+fN>0?-1:1)*((r-s)*l)/c}):(t=e=>Math.exp(-e*i)*((e-o)*i+1)-fN,n=e=>Math.exp(-e*i)*(i*i*(o-e)));const l=function(e,t,n){let i=n;for(let r=1;r<gN;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=OA(i),isNaN(l))return{stiffness:pN.stiffness,damping:pN.damping,duration:i};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:i}}}const gN=12;function vN(e,t){return e*Math.sqrt(1-t*t)}const bN=["duration","bounce"],yN=["stiffness","damping","mass"];function xN(e,t){return t.some((t=>void 0!==e[t]))}function kN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pN.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pN.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:pN.velocity,stiffness:pN.stiffness,damping:pN.damping,mass:pN.mass,isResolvedFromDuration:!1,...e};if(!xN(e,yN)&&xN(e,bN))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(1.2*n),r=i*i,o=2*_M(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:pN.mass,stiffness:r,damping:o}}else{const n=mN(e);t={...t,...n,mass:pN.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-NA(n.velocity||0)}),f=h||0,m=c/(2*Math.sqrt(l*d)),g=s-o,v=NA(Math.sqrt(l/d)),b=Math.abs(g)<5;let y;if(i||(i=b?pN.restSpeed.granular:pN.restSpeed.default),r||(r=b?pN.restDelta.granular:pN.restDelta.default),m<1){const e=vN(v,m);y=t=>{const n=Math.exp(-m*v*t);return s-n*((f+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)y=e=>s-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(m*m-1);y=t=>{const n=Math.exp(-m*v*t),i=Math.min(e*t,300);return s-n*((f+m*v*g)*Math.sinh(i)+e*g*Math.cosh(i))/e}}const x={calculatedDuration:p&&u||null,next:e=>{const t=y(e);if(p)a.done=e>=u;else{let n=0;m<1&&(n=0===e?OA(f):hN(y,e,t));const o=Math.abs(n)<=i,l=Math.abs(s-t)<=r;a.done=o&&l}return a.value=a.done?s:t,a},toString:()=>{const e=Math.min(lA(x),aA),t=gA((t=>x.next(e*t).value),e,30);return e+"ms "+t}};return x}function wN(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=i*n;const g=h+m,v=void 0===a?g:a(g);v!==g&&(m=v-h);const b=e=>-m*Math.exp(-e/r),y=e=>v+b(e),x=e=>{const t=b(e),n=y(e);p.done=Math.abs(t)<=d,p.value=p.done?v:n};let k,w;const C=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(k=e,w=kN({keyframes:[p.value,f(p.value)],velocity:hN(y,e,p.value),damping:o,stiffness:s,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==k||(t=!0,x(e),C(e)),void 0!==k&&e>=k?w.next(e-k):(!t&&x(e),p)}}}const CN=mM(.42,0,1,1),SN=mM(0,0,.58,1),TN=mM(.42,0,.58,1),EN={linear:jA,easeIn:CN,easeInOut:TN,easeOut:SN,circIn:wM,circInOut:SM,circOut:CM,backIn:yM,backInOut:xM,backOut:bM,anticipate:kM},_N=e=>{if(uA(e)){AO(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,r]=e;return mM(t,n,i,r)}return"string"===typeof e?(AO(void 0!==EN[e],`Invalid easing type '${e}'`),EN[e]):e};function IN(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(AO(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const i=[],r=n||dN,o=e.length-1;for(let s=0;s<o;s++){let n=r(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||jA:t;n=iN(e,n)}i.push(n)}return i}(t,i,r),l=a.length,c=n=>{if(s&&n<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(n<e[i+1]);i++);const r=mA(e[i],e[i+1],n);return a[i](r)};return n?t=>c(_M(e[0],e[o-1],t)):c}function PN(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=mA(0,t,i);e.push(YO(n,1,r))}}(t,e.length-1),t}function RN(e){let{duration:t=300,keyframes:n,times:i,ease:r="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(_N):_N(r),s={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(i&&i.length===n.length?i:PN(n),t),l=IN(a,n,{ease:Array.isArray(o)?o:(c=n,d=o,c.map((()=>d||TN)).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const AN=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>WA.update(t,!0),stop:()=>qA(t),now:()=>KA.isProcessing?KA.timestamp:XA.now()}},MN={decay:wN,inertia:wN,tween:RN,keyframes:RN,spring:kN},ON=e=>e/100;class NN extends GO{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:i,keyframes:r}=this.options,o=(null===i||void 0===i?void 0:i.KeyframeResolver)||PO;this.resolver=new o(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,s=cA(t)?t:MN[t]||RN;let a,l;s!==RN&&"number"!==typeof e[0]&&(a=iN(ON,dN(e[0],e[1])),e=[0,100]);const c=s({...this.options,keyframes:e});"mirror"===r&&(l=s({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===c.calculatedDuration&&(c.calculatedDuration=lA(c));const{calculatedDuration:d}=c,u=d+i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:d,resolvedDuration:u,totalDuration:u*(n+1)-i}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:d}=n;if(null===this.startTime)return r.next(0);const{delay:u,repeat:h,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-u*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let b=this.currentTime,y=r;if(h){const e=Math.min(this.currentTime,c)/d;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===p?(n=1-n,f&&(n-=f/d)):"mirror"===p&&(y=o)),b=_M(0,1,n)*d}const x=v?{done:!1,value:a[0]}:y.next(b);s&&(x.value=s(x.value));let{done:k}=x;v||null===l||(k=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&k);return w&&void 0!==i&&(x.value=KO(a,this.options,i)),m&&m(x.value),w&&this.finish(),x}get duration(){const{resolved:e}=this;return e?NA(e.calculatedDuration):0}get time(){return NA(this.currentTime)}set time(e){e=OA(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=NA(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=AN,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=null!==n&&void 0!==n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const jN=new Set(["opacity","clipPath","filter","transform"]);const DN=nA((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const LN={anticipate:kM,backInOut:xM,circInOut:SM};class FN extends GO{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:r}=this.options;this.resolver=new VO(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:i,ease:r,type:o,motionValue:s,name:a,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;var c;if("string"===typeof r&&fA()&&r in LN&&(r=LN[r]),cA((c=this.options).type)||"spring"===c.type||!vA(c.ease)){const{onComplete:t,onUpdate:s,motionValue:a,element:l,...c}=this.options,d=function(e,t){const n=new NN({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const r=[];let o=0;for(;!i.done&&o<2e4;)i=n.sample(o),r.push(i.value),o+=10;return{times:void 0,keyframes:r,duration:o-10,ease:"linear"}}(e,c);1===(e=d.keyframes).length&&(e[1]=e[0]),n=d.duration,i=d.times,r=d.ease,o="keyframes"}const d=function(e,t,n){let{delay:i=0,duration:r=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const d=xA(a,r);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"})}(s.owner.current,a,e,{...this.options,duration:n,times:i,ease:r});return d.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(dA(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:n}=this.options;s.set(KO(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:i,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return NA(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return NA(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=OA(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return jA;const{animation:n}=t;dA(n,e)}else this.pendingTimeline=e;return jA}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:r,ease:o,times:s}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,d=new NN({...c,keyframes:n,duration:i,type:r,ease:o,times:s,isGenerator:!0}),u=OA(this.time);e.setWithVelocity(d.sample(u-10).value,d.sample(u).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:o,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return DN()&&n&&jN.has(n)&&!a&&!l&&!i&&"mirror"!==r&&0!==o&&"inertia"!==s}}const BN={type:"spring",stiffness:500,damping:25,restSpeed:10},UN={type:"keyframes",duration:.8},$N={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zN=(e,t)=>{let{keyframes:n}=t;return n.length>2?UN:LA.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:BN:$N};const VN=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return s=>{const a=sA(i,e)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c-=OA(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:o?void 0:r};(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length})(a)||(d={...d,...zN(e,d)}),d.duration&&(d.duration=OA(d.duration)),d.repeatDelay&&(d.repeatDelay=OA(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(u=!0)),(uM||$A)&&(u=!0,d.duration=0,d.delay=0),u&&!o&&void 0!==t.get()){const e=KO(d.keyframes,a);if(void 0!==e)return WA.update((()=>{d.onUpdate(e),d.onComplete()})),new oA([])}return!o&&FN.supports(d)?new FN(d):new NN(d)}};function HN(e,t){let{protectedKeys:n,needsAnimating:i}=e;const r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}function WN(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let{transition:s=e.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(s=i);const c=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const u in l){const t=e.getValue(u,null!==(o=e.latestValues[u])&&void 0!==o?o:null),i=l[u];if(void 0===i||d&&HN(d,u))continue;const r={delay:n,...sA(s||{},u)};let a=!1;if(window.MotionHandoffAnimation){const t=dM(e);if(t){const e=window.MotionHandoffAnimation(t,u,WA);null!==e&&(r.startTime=e,a=!0)}}aM(e,u),t.start(VN(u,t,i,e.shouldReduceMotion&&FA.has(u)?{type:!1}:r,e,a));const h=t.animation;h&&c.push(h)}return a&&Promise.all(c).then((()=>{WA.update((()=>{a&&function(e,t){const n=ZR(e,t);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const s in o)oM(e,s,UA(o[s]))}(e,a)}))})),c}function qN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const r=ZR(e,t,"exit"===n.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all(WN(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:s,staggerDirection:a}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*i,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(KN).forEach(((e,i)=>{e.notify("AnimationStart",t),s.push(qN(e,t,{...o,delay:n+l(i)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,r+i,s,a,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[s,a]:[a,s];return e().then((()=>t()))}return Promise.all([s(),a(n.delay)])}function KN(e,t){return e.sortNodePosition(t)}const GN=tA.length;function YN(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&YN(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<GN;n++){const i=tA[n],r=e.props[i];(QR(r)||!1===r)&&(t[i]=r)}return t}const QN=[...eA].reverse(),XN=eA.length;function JN(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>qN(e,t,i)));n=Promise.all(r)}else if("string"===typeof t)n=qN(e,t,i);else{const r="function"===typeof t?ZR(e,t,i.custom):t;n=Promise.all(WN(e,r,i))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,i)})))}function ZN(e){let t=JN(e),n=nj(),i=!0;const r=t=>(n,i)=>{var r;const o=ZR(e,i,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(o){const{transition:e,transitionEnd:t,...i}=o;n={...n,...i,...t}}return n};function o(o){const{props:s}=e,a=YN(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<XN;t++){const h=QN[t],p=n[h],f=void 0!==s[h]?s[h]:a[h],m=QR(f),g=h===o?p.isActive:null;!1===g&&(u=t);let v=f===a[h]&&f!==s[h]&&m;if(v&&i&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...d},!p.isActive&&null===g||!f&&!p.prevProp||KR(f)||"boolean"===typeof f)continue;const b=ej(p.prevProp,f);let y=b||h===o&&p.isActive&&!v&&m||t>u&&m,x=!1;const k=Array.isArray(f)?f:[f];let w=k.reduce(r(h),{});!1===g&&(w={});const{prevResolvedValues:C={}}=p,S={...C,...w},T=t=>{y=!0,c.has(t)&&(x=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=w[e],n=C[e];if(d.hasOwnProperty(e))continue;let i=!1;i=GR(t)&&GR(n)?!YR(t,n):t!==n,i?void 0!==t&&null!==t?T(e):c.add(e):void 0!==t&&c.has(e)?T(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=w,p.isActive&&(d={...d,...w}),i&&e.blockInitialAnimation&&(y=!1);y&&(!(v&&b)||x)&&l.push(...k.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};c.forEach((n=>{const i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==i&&void 0!==i?i:null})),l.push({animation:t})}let h=Boolean(l.length);return!i||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),i=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;const s=o(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=nj(),i=!0}}}function ej(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!YR(t,e)}function tj(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nj(){return{animate:tj(!0),whileInView:tj(),whileHover:tj(),whileTap:tj(),whileDrag:tj(),whileFocus:tj(),exit:tj()}}class ij{constructor(e){this.isMounted=!1,this.node=e}update(){}}let rj=0;const oj={animation:{Feature:class extends ij{constructor(e){super(e),e.animationState||(e.animationState=ZN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();KR(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends ij{constructor(){super(...arguments),this.id=rj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function sj(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function aj(e){return{point:{x:e.pageX,y:e.pageY}}}function lj(e,t,n,i){return sj(e,t,(e=>t=>EA(t)&&e(t,aj(t)))(n),i)}const cj=(e,t)=>Math.abs(e-t);class dj{constructor(e,t){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=pj(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=cj(e.x,t.x),i=cj(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=KA;this.history.push({...i,timestamp:r});const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=uj(t,this.transformPagePoint),WA.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=pj("pointercancel"===e.type?this.lastMoveEventInfo:uj(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),i&&i(e,o)},!EA(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=uj(aj(e),this.transformPagePoint),{point:s}=o,{timestamp:a}=KA;this.history=[{...s,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,pj(o,this.history)),this.removeListeners=iN(lj(this.contextWindow,"pointermove",this.handlePointerMove),lj(this.contextWindow,"pointerup",this.handlePointerUp),lj(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qA(this.updatePoint)}}function uj(e,t){return t?{point:t(e.point)}:e}function hj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pj(e,t){let{point:n}=e;return{point:n,delta:hj(n,mj(t)),offset:hj(n,fj(t)),velocity:gj(t,.1)}}function fj(e){return e[0]}function mj(e){return e[e.length-1]}function gj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=mj(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>OA(t)));)n--;if(!i)return{x:0,y:0};const o=NA(r.timestamp-i.timestamp);if(0===o)return{x:0,y:0};const s={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function vj(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const bj=.9999,yj=1.0001,xj=-.01,kj=.01;function wj(e){return e.max-e.min}function Cj(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=YO(t.min,t.max,e.origin),e.scale=wj(n)/wj(t),e.translate=YO(n.min,n.max,e.origin)-e.originPoint,(e.scale>=bj&&e.scale<=yj||isNaN(e.scale))&&(e.scale=1),(e.translate>=xj&&e.translate<=kj||isNaN(e.translate))&&(e.translate=0)}function Sj(e,t,n,i){Cj(e.x,t.x,n.x,i?i.originX:void 0),Cj(e.y,t.y,n.y,i?i.originY:void 0)}function Tj(e,t,n){e.min=n.min+t.min,e.max=e.min+wj(t)}function Ej(e,t,n){e.min=t.min-n.min,e.max=e.min+wj(t)}function _j(e,t,n){Ej(e.x,t.x,n.x),Ej(e.y,t.y,n.y)}function Ij(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Pj(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const Rj=.35;function Aj(e,t,n){return{min:Mj(e,t),max:Mj(e,n)}}function Mj(e,t){return"number"===typeof e?e:e[t]||0}const Oj=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Nj=()=>({x:{min:0,max:0},y:{min:0,max:0}});function jj(e){return[e("x"),e("y")]}function Dj(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}function Lj(e){return void 0===e||1===e}function Fj(e){let{scale:t,scaleX:n,scaleY:i}=e;return!Lj(t)||!Lj(n)||!Lj(i)}function Bj(e){return Fj(e)||Uj(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Uj(e){return $j(e.x)||$j(e.y)}function $j(e){return e&&"0%"!==e}function zj(e,t,n){return n+t*(e-n)}function Vj(e,t,n,i,r){return void 0!==r&&(e=zj(e,r,i)),zj(e,n,i)+t}function Hj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Vj(e.min,t,n,i,r),e.max=Vj(e.max,t,n,i,r)}function Wj(e,t){let{x:n,y:i}=t;Hj(e.x,n.translate,n.scale,n.originPoint),Hj(e.y,i.translate,i.scale,i.originPoint)}const qj=.999999999999,Kj=1.0000000000001;function Gj(e,t){e.min=e.min+t,e.max=e.max+t}function Yj(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Hj(e,t,n,YO(e.min,e.max,r),i)}function Qj(e,t){Yj(e.x,t.x,t.scaleX,t.scale,t.originX),Yj(e.y,t.y,t.scaleY,t.scale,t.originY)}function Xj(e,t){return Dj(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const Jj=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Zj=new WeakMap;class eD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nj(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new dj(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(aj(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?kA[o]?null:(kA[o]=!0,()=>{kA[o]=!1}):kA.x||kA.y?null:(kA.x=kA.y=!0,()=>{kA.x=kA.y=!1}),!this.openDragLock))return;var o;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jj((e=>{let t=this.getAxisMotionValue(e).get()||0;if($M.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=wj(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),r&&WA.postRender((()=>r(e,t))),aM(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>jj((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:Jj(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&WA.postRender((()=>r(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!tD(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?YO(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?YO(r,e,n.max):Math.min(e,r)),e}(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&vj(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,t){let{top:n,left:i,bottom:r,right:o}=t;return{x:Ij(e.x,i,o),y:Ij(e.y,n,r)}}(i.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rj;return!1===e?e=0:!0===e&&(e=Rj),{x:Aj(e,"left","right"),y:Aj(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&jj((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!vj(e))return!1;const n=e.current;AO(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=Xj(e,n),{scroll:r}=t;return r&&(Gj(i.x,r.offset.x),Gj(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:Pj(e.x,t.x),y:Pj(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=Dj(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=jj((s=>{if(!tD(s,t,this.currentDirection))return;let l=a&&a[s]||{};o&&(l={min:0,max:0});const c=i?200:1e6,d=i?40:1e7,u={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(s,u)}));return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return aM(this.visualElement,e),n.start(VN(e,n,0,t,this.visualElement,!1))}stopAnimation(){jj((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){jj((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){jj((t=>{const{drag:n}=this.getProps();if(!tD(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:o}=i.layout.layoutBox[t];r.set(e[t]-YO(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!vj(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};jj((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=wj(e),r=wj(t);return r>i?n=mA(t.min,t.max-i,e.min):i>r&&(n=mA(e.min,e.max-r,t.min)),_M(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),jj((t=>{if(!tD(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:o}=this.constraints[t];n.set(YO(r,o,i[t]))}))}addListeners(){if(!this.visualElement.current)return;Zj.set(this.visualElement,this);const e=lj(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();vj(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),WA.read(t);const r=sj(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(jj((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{r(),e(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=Rj,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:s}}}function tD(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const nD=e=>(t,n)=>{e&&WA.postRender((()=>e(t,n)))};const iD=(0,t.createContext)(null);const rD=(0,t.createContext)({}),oD=(0,t.createContext)({}),sD={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const lD={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!zM.test(e))return e;e=parseFloat(e)}return`${aD(e,t.target.x)}% ${aD(e,t.target.y)}%`}},cD={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const r=e,o=oO.parse(e);if(o.length>5)return r;const s=oO.createTransformer(e),a="number"!==typeof o[0]?1:0,l=i.x.scale*n.x,c=i.y.scale*n.y;o[0+a]/=l,o[1+a]/=c;const d=YO(l,c,.5);return"number"===typeof o[2+a]&&(o[2+a]/=d),"number"===typeof o[3+a]&&(o[3+a]/=d),s(o)}},dD={};const{schedule:uD,cancel:hD}=HA(queueMicrotask,!1);class pD extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;var o;o=mD,Object.assign(dD,o),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(()=>{this.safeToRemove()})),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),sD.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,o=n.projection;return o?(o.isPresent=r,i||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||WA.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),uD.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fD(e){const[n,i]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(iD);if(null===n)return[!0,null];const{isPresent:i,onExitComplete:r,register:o}=n,s=(0,t.useId)();(0,t.useEffect)((()=>{e&&o(s)}),[e]);const a=(0,t.useCallback)((()=>e&&r&&r(s)),[s,r,e]);return!i&&r?[!1,a]:[!0]}(),r=(0,t.useContext)(rD);return(0,Ip.jsx)(pD,{...e,layoutGroup:r,switchLayoutGroup:(0,t.useContext)(oD),isPresent:n,safeToRemove:i})}const mD={borderRadius:{...lD,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lD,borderTopRightRadius:lD,borderBottomLeftRadius:lD,borderBottomRightRadius:lD,boxShadow:cD};const gD=(e,t)=>e.depth-t.depth;class vD{constructor(){this.children=[],this.isDirty=!1}add(e){JA(this.children,e),this.isDirty=!0}remove(e){ZA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gD),this.isDirty=!1,this.children.forEach(e)}}function bD(e,t){const n=XA.now(),i=r=>{let{timestamp:o}=r;const s=o-n;s>=t&&(qA(i),e(s-t))};return WA.read(i,!0),()=>qA(i)}function yD(e){const t=sM(e)?e.get():e;return BA(t)?t.toValue():t}const xD=["TopLeft","TopRight","BottomLeft","BottomRight"],kD=xD.length,wD=e=>"string"===typeof e?parseFloat(e):e,CD=e=>"number"===typeof e||zM.test(e);function SD(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const TD=_D(0,.5,CM),ED=_D(.5,.95,jA);function _D(e,t,n){return i=>i<e?0:i>t?1:n(mA(e,t,i))}function ID(e,t){e.min=t.min,e.max=t.max}function PD(e,t){ID(e.x,t.x),ID(e.y,t.y)}function RD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function AD(e,t,n,i,r){return e=zj(e-=t,1/n,i),void 0!==r&&(e=zj(e,1/r,i)),e}function MD(e,t,n,i,r){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;$M.test(t)&&(t=parseFloat(t),t=YO(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=YO(o.min,o.max,i);e===o&&(a-=t),e.min=AD(e.min,t,n,a,r),e.max=AD(e.max,t,n,a,r)}(e,t[o],t[s],t[a],t.scale,i,r)}const OD=["x","scaleX","originX"],ND=["y","scaleY","originY"];function jD(e,t,n,i){MD(e.x,t,OD,n?n.x:void 0,i?i.x:void 0),MD(e.y,t,ND,n?n.y:void 0,i?i.y:void 0)}function DD(e){return 0===e.translate&&1===e.scale}function LD(e){return DD(e.x)&&DD(e.y)}function FD(e,t){return e.min===t.min&&e.max===t.max}function BD(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function UD(e,t){return BD(e.x,t.x)&&BD(e.y,t.y)}function $D(e){return wj(e.x)/wj(e.y)}function zD(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class VD{constructor(){this.members=[]}add(e){JA(this.members,e),e.scheduleRender()}remove(e){if(ZA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const HD={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},WD="undefined"!==typeof window&&void 0!==window.MotionDebug,qD=["","X","Y","Z"],KD={visibility:"hidden"};let GD=0;function YD(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function QD(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=dM(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",WA,!(t||i))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&QD(i)}function XD(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=GD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,WD&&(HD.totalNodes=HD.resolvedTargetDeltas=HD.recalculatedProjection=0),this.nodes.forEach(eL),this.nodes.forEach(aL),this.nodes.forEach(lL),this.nodes.forEach(tL),WD&&window.MotionDebug.record(HD)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new vD)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new eM),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;this.isSVG=function(e){return e instanceof SVGElement&&"svg"!==e.tagName}(e),this.instance=e;const{layoutId:i,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),t){let n;const i=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=bD(i,250),sD.hasAnimatedSinceResize&&(sD.hasAnimatedSinceResize=!1,this.nodes.forEach(sL))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||r)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:i,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||o.getDefaultTransition()||fL,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!UD(this.targetLayout,r)||i,d=!n&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e={...sA(s,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||sL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qA(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cL),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(iL);this.isUpdating||this.nodes.forEach(rL),this.isUpdating=!1,this.nodes.forEach(oL),this.nodes.forEach(JD),this.nodes.forEach(ZD),this.clearAllSnapshots();const e=XA.now();KA.delta=_M(0,1e3/60,e-KA.timestamp),KA.timestamp=e,KA.isProcessing=!0,GA.update.process(KA),GA.preRender.process(KA),GA.render.process(KA),KA.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nL),this.sharedNodes.forEach(dL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,WA.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){WA.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nj(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!LD(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||Bj(this.latestValues)||r)&&(o(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),vL((i=n).x),vL(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return Nj();const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(yL))){const{scroll:e}=this.root;e&&(Gj(n.x,e.offset.x),Gj(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n=Nj();if(PD(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let i=0;i<this.path.length;i++){const t=this.path[i],{scroll:r,options:o}=t;t!==this.root&&r&&o.layoutScroll&&(r.wasRoot&&PD(n,e),Gj(n.x,r.offset.x),Gj(n.y,r.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Nj();PD(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Qj(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Bj(e.latestValues)&&Qj(n,e.latestValues)}return Bj(this.latestValues)&&Qj(n,this.latestValues),n}removeTransform(e){const t=Nj();PD(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Bj(e.latestValues))continue;Fj(e.latestValues)&&e.updateSnapshot();const i=Nj();PD(i,e.measurePageBox()),jD(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return Bj(this.latestValues)&&jD(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==KA.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:o}=this.options;if(this.layout&&(r||o)){if(this.resolvedRelativeTargetAt=KA.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nj(),this.relativeTargetOrigin=Nj(),_j(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),PD(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,l;if(this.target||(this.target=Nj(),this.targetWithTransforms=Nj()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,l=this.relativeParent.target,Tj(s.x,a.x,l.x),Tj(s.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):PD(this.target,this.layout.layoutBox),Wj(this.target,this.targetDelta)):PD(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nj(),this.relativeTargetOrigin=Nj(),_j(this.relativeTargetOrigin,this.target,e.target),PD(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}WD&&HD.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Fj(this.parent.latestValues)&&!Uj(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===KA.timestamp&&(i=!1),i)return;const{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!o)return;PD(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let o,s;t.x=t.y=1;for(let a=0;a<r;a++){o=n[a],s=o.projectionDelta;const{visualElement:r}=o.options;r&&r.props.style&&"contents"===r.props.style.display||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Qj(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Wj(e,s)),i&&Bj(o.latestValues)&&Qj(e,o.latestValues))}t.x<Kj&&t.x>qj&&(t.x=1),t.y<Kj&&t.y>qj&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=Nj());const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(RD(this.prevProjectionDelta.x,this.projectionDelta.x),RD(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Sj(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&zD(this.projectionDelta.x,this.prevProjectionDelta.x)&&zD(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),WD&&HD.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oj(),this.projectionDelta=Oj(),this.projectionDeltaWithTransform=Oj()}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},r={...this.latestValues},o=Oj();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s=Nj(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(pL));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;uL(o.x,e.x,n),uL(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_j(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){hL(e.x,t.x,n.x,i),hL(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,s,n),u&&function(e,t){return FD(e.x,t.x)&&FD(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u=Nj()),PD(u,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,i,r,o){r?(e.opacity=YO(0,void 0!==n.opacity?n.opacity:1,TD(i)),e.opacityExit=YO(void 0!==t.opacity?t.opacity:1,0,ED(i))):o&&(e.opacity=YO(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let s=0;s<kD;s++){const r=`border${xD[s]}Radius`;let o=SD(t,r),a=SD(n,r);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||CD(o)===CD(a)?(e[r]=Math.max(YO(wD(o),wD(a),i),0),($M.test(a)||$M.test(o))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=YO(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qA(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=WA.update((()=>{sD.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const i=sM(e)?e:rM(e);return i.start(VN("",i,t,n)),i.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&bL(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||Nj();const t=wj(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=wj(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}PD(t,n),Qj(t,r),Sj(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new VD);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&YD("z",e,i,this.animationValues);for(let r=0;r<qD.length;r++)YD(`rotate${qD[r]}`,e,i,this.animationValues),YD(`skew${qD[r]}`,e,i,this.animationValues);e.render();for(const r in i)e.setStaticValue(r,i[r]),this.animationValues&&(this.animationValues[r]=i[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return KD;const i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=yD(null===e||void 0===e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=yD(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Bj(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),i.transform=function(e,t,n){let i="";const r=e.x.translate/t.x,o=e.y.translate/t.y,s=(null===n||void 0===n?void 0:n.z)||0;if((r||o||s)&&(i=`translate3d(${r}px, ${o}px, ${s}px) `),1===t.x&&1===t.y||(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:o,skewX:s,skewY:a}=n;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),r&&(i+=`rotateX(${r}deg) `),o&&(i+=`rotateY(${o}deg) `),s&&(i+=`skewX(${s}deg) `),a&&(i+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(i+=`scale(${a}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),r&&(i.transform=r(s,i.transform));const{x:a,y:l}=this.projectionDelta;i.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,o.animationValues?i.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in dD){if(void 0===s[c])continue;const{correct:e,applyTo:t}=dD[c],n="none"===i.transform?s[c]:e(s[c],o);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[c]=n}return this.options.layoutId&&(i.pointerEvents=o===this?yD(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(iL),this.root.sharedNodes.clear()}}}function JD(e){e.updateLayout()}function ZD(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;"size"===r?jj((e=>{const i=o?n.measuredBox[e]:n.layoutBox[e],r=wj(i);i.min=t[e].min,i.max=i.min+r})):bL(r,n.layoutBox,t)&&jj((i=>{const r=o?n.measuredBox[i]:n.layoutBox[i],s=wj(t[i]);r.max=r.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+s)}));const s=Oj();Sj(s,t,n.layoutBox);const a=Oj();o?Sj(a,e.applyTransform(i,!0),n.measuredBox):Sj(a,t,n.layoutBox);const l=!LD(s);let c=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:o}=i;if(r&&o){const s=Nj();_j(s,n.layoutBox,r.layoutBox);const a=Nj();_j(a,t,o.layoutBox),UD(s,a)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function eL(e){WD&&HD.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nL(e){e.clearSnapshot()}function iL(e){e.clearMeasurements()}function rL(e){e.isLayoutDirty=!1}function oL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function aL(e){e.resolveTargetDelta()}function lL(e){e.calcProjection()}function cL(e){e.resetSkewAndRotation()}function dL(e){e.removeLeadSnapshot()}function uL(e,t,n){e.translate=YO(t.translate,0,n),e.scale=YO(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function hL(e,t,n,i){e.min=YO(t.min,n.min,i),e.max=YO(t.max,n.max,i)}function pL(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const fL={duration:.45,ease:[.4,0,.1,1]},mL=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gL=mL("applewebkit/")&&!mL("chrome/")?Math.round:jA;function vL(e){e.min=gL(e.min),e.max=gL(e.max)}function bL(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}($D(t),$D(n),.2)}function yL(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const xL=XD({attachResizeListener:(e,t)=>sj(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kL={current:void 0},wL=XD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!kL.current){const e=new xL({});e.mount(window),e.setOptions({layoutScroll:!0}),kL.current=e}return kL.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),CL={pan:{Feature:class extends ij{constructor(){super(...arguments),this.removePointerDownListener=jA}onPointerDown(e){this.session=new dj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:nD(e),onStart:nD(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&WA.postRender((()=>i(e,t)))}}}mount(){this.removePointerDownListener=lj(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ij{constructor(e){super(e),this.removeGroupControls=jA,this.removeListeners=jA,this.controls=new eD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jA}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:wL,MeasureLayout:fD}};function SL(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=i["onHover"+n];r&&WA.postRender((()=>r(t,aj(t))))}function TL(e,t,n){const{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=i["onTap"+("End"===n?"":n)];r&&WA.postRender((()=>r(t,aj(t))))}const EL=new WeakMap,_L=new WeakMap,IL=e=>{const t=EL.get(e.target);t&&t(e)},PL=e=>{e.forEach(IL)};function RL(e,t,n){const i=function(e){let{root:t,...n}=e;const i=t||document;_L.has(i)||_L.set(i,{});const r=_L.get(i),o=JSON.stringify(n);return r[o]||(r[o]=new IntersectionObserver(PL,{root:t,...n})),r[o]}(t);return EL.set(e,n),i.observe(e),()=>{EL.delete(e),i.unobserve(e)}}const AL={some:0,all:1};const ML={inView:{Feature:class extends ij{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:AL[i]};return RL(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),o=t?n:i;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ij{mount(){const{current:e}=this.node;e&&(this.unmount=MA(e,(e=>(TL(this.node,e,"Start"),(e,t)=>{let{success:n}=t;return TL(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ij{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(K$){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iN(sj(this.node.current,"focus",(()=>this.onFocus())),sj(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends ij{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,r,o]=CA(e,n),s=SA((e=>{const{target:n}=e,i=t(e);if("function"!==typeof i||!n)return;const o=SA((e=>{i(e),n.removeEventListener("pointerleave",o)}));n.addEventListener("pointerleave",o,r)}));return i.forEach((e=>{e.addEventListener("pointerenter",s,r)})),o}(e,(e=>(SL(this.node,e,"Start"),e=>SL(this.node,e,"End")))))}unmount(){}}}},OL={layout:{ProjectionNode:wL,MeasureLayout:fD}},NL=(0,t.createContext)({strict:!1}),jL=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),DL=(0,t.createContext)({});function LL(e){return KR(e.animate)||tA.some((t=>QR(e[t])))}function FL(e){return Boolean(LL(e)||e.variants)}function BL(e){const{initial:n,animate:i}=function(e,t){if(LL(e)){const{initial:t,animate:n}=e;return{initial:!1===t||QR(t)?t:void 0,animate:QR(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(DL));return(0,t.useMemo)((()=>({initial:n,animate:i})),[UL(n),UL(i)])}function UL(e){return Array.isArray(e)?e.join(" "):e}const $L="undefined"!==typeof window,zL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},VL={};for(const n in zL)VL[n]={isEnabled:e=>zL[n].some((t=>!!e[t]))};const HL=Symbol.for("motionComponentSymbol");function WL(e,n,i){return(0,t.useCallback)((t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):vj(i)&&(i.current=t))}),[n])}const qL=$L?t.useLayoutEffect:t.useEffect;function KL(e,n,i,r,o){var s,a;const{visualElement:l}=(0,t.useContext)(DL),c=(0,t.useContext)(NL),d=(0,t.useContext)(iD),u=(0,t.useContext)(jL).reducedMotion,h=(0,t.useRef)(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:n,parent:l,props:i,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const p=h.current,f=(0,t.useContext)(oD);!p||p.projection||!o||"html"!==p.type&&"svg"!==p.type||function(e,t,n,i){const{layoutId:r,layout:o,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:GL(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:Boolean(s)||a&&vj(a),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}(h.current,i,o,f);const m=(0,t.useRef)(!1);(0,t.useInsertionEffect)((()=>{p&&m.current&&p.update(i,d)}));const g=i[cM],v=(0,t.useRef)(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return qL((()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),uD.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())})),(0,t.useEffect)((()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),v.current=!1))})),p}function GL(e){if(e)return!1!==e.options.allowProjection?e.projection:GL(e.parent)}function YL(e){let{preloadedFeatures:n,createVisualElement:i,useRender:r,useVisualState:o,Component:s}=e;var a,l;function c(e,n){let a;const l={...(0,t.useContext)(jL),...e,layoutId:QL(e)},{isStatic:c}=l,d=BL(e),u=o(e,c);if(!c&&$L){!function(e,n){(0,t.useContext)(NL).strict;0}();const e=function(e){const{drag:t,layout:n}=VL;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);a=e.MeasureLayout,d.visualElement=KL(s,u,l,i,e.ProjectionNode)}return(0,Ip.jsxs)(DL.Provider,{value:d,children:[a&&d.visualElement?(0,Ip.jsx)(a,{visualElement:d.visualElement,...l}):null,r(s,e,WL(u,d.visualElement,n),u,c,d.visualElement)]})}n&&function(e){for(const t in e)VL[t]={...VL[t],...e[t]}}(n),c.displayName=`motion.${"string"===typeof s?s:`create(${null!==(l=null!==(a=s.displayName)&&void 0!==a?a:s.name)&&void 0!==l?l:""})`}`;const d=(0,t.forwardRef)(c);return d[HL]=s,d}function QL(e){let{layoutId:n}=e;const i=(0,t.useContext)(rD).id;return i&&void 0!==n?i+"-"+n:n}const XL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JL(e){return"string"===typeof e&&!e.includes("-")&&!!(XL.indexOf(e)>-1||/[A-Z]/u.test(e))}const ZL=e=>(n,i)=>{const r=(0,t.useContext)(DL),o=(0,t.useContext)(iD),s=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:o,onUpdate:s}=e;const a={latestValues:eF(t,n,i,r),renderState:o()};return s&&(a.onMount=e=>s({props:t,current:e,...a}),a.onUpdate=e=>s(e)),a}(e,n,r,o);return i?s():function(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}(s)};function eF(e,t,n,i){const r={},o=i(e,{});for(const h in o)r[h]=yD(o[h]);let{initial:s,animate:a}=e;const l=LL(e),c=FL(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let d=!!n&&!1===n.initial;d=d||!1===s;const u=d?a:s;if(u&&"boolean"!==typeof u&&!KR(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const i=JR(e,t[n]);if(i){const{transitionEnd:e,transition:t,...n}=i;for(const i in n){let e=n[i];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[i]=e)}for(const i in e)r[i]=e[i]}}}return r}const tF=(e,t)=>t&&"number"===typeof e?t.transform(e):e,nF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iF=DA.length;function rF(e,t,n){const{style:i,vars:r,transformOrigin:o}=e;let s=!1,a=!1;for(const l in t){const e=t[l];if(LA.has(l))s=!0;else if(NO(l))r[l]=e;else{const t=tF(e,pO[l]);l.startsWith("origin")?(a=!0,o[l]=t):i[l]=t}}if(t.transform||(s||n?i.transform=function(e,t,n){let i="",r=!0;for(let o=0;o<iF;o++){const s=DA[o],a=e[s];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(s.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=tF(a,pO[s]);l||(r=!1,i+=`${nF[s]||s}(${e}) `),n&&(t[s]=e)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin=`${e} ${t} ${n}`}}const oF={offset:"stroke-dashoffset",array:"stroke-dasharray"},sF={offset:"strokeDashoffset",array:"strokeDasharray"};function aF(e,t,n){return"string"===typeof e?e:zM.transform(t+n*e)}function lF(e,t,n,i){let{attrX:r,attrY:o,attrScale:s,originX:a,originY:l,pathLength:c,pathSpacing:d=1,pathOffset:u=0,...h}=t;if(rF(e,h,i),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==a||void 0!==l||f.transform)&&(f.transformOrigin=function(e,t,n){return`${aF(t,e.x,e.width)} ${aF(n,e.y,e.height)}`}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==r&&(p.x=r),void 0!==o&&(p.y=o),void 0!==s&&(p.scale=s),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=r?oF:sF;e[o.offset]=zM.transform(-i);const s=zM.transform(t),a=zM.transform(n);e[o.array]=`${s} ${a}`}(p,c,d,u,!1)}const cF=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dF=()=>({...cF(),attrs:{}}),uF=e=>"string"===typeof e&&"svg"===e.toLowerCase();function hF(e,t,n,i){let{style:r,vars:o}=t;Object.assign(e.style,r,i&&i.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const pF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fF(e,t,n,i){hF(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(pF.has(r)?r:lM(r),t.attrs[r])}function mF(e,t){let{layout:n,layoutId:i}=t;return LA.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!dD[e]||"opacity"===e)}function gF(e,t,n){var i;const{style:r}=e,o={};for(const s in r)(sM(r[s])||t.style&&sM(t.style[s])||mF(s,e)||void 0!==(null===(i=null===n||void 0===n?void 0:n.getValue(s))||void 0===i?void 0:i.liveStyle))&&(o[s]=r[s]);return o}function vF(e,t,n){const i=gF(e,t,n);for(const r in e)if(sM(e[r])||sM(t[r])){i[-1!==DA.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return i}const bF=["x","y","width","height","cx","cy","r"],yF={useVisualState:ZL({scrapeMotionValuesFromProps:vF,createRenderState:dF,onUpdate:e=>{let{props:t,prevProps:n,current:i,renderState:r,latestValues:o}=e;if(!i)return;let s=!!t.drag;if(!s)for(const l in o)if(LA.has(l)){s=!0;break}if(!s)return;let a=!n;if(n)for(let l=0;l<bF.length;l++){const e=bF[l];t[e]!==n[e]&&(a=!0)}a&&WA.read((()=>{!function(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(K$){t.dimensions={x:0,y:0,width:0,height:0}}}(i,r),WA.render((()=>{lF(r,o,uF(i.tagName),t.transformTemplate),fF(i,r)}))}))}})},xF={useVisualState:ZL({scrapeMotionValuesFromProps:gF,createRenderState:cF})};function kF(e,t,n){for(const i in t)sM(t[i])||mF(i,n)||(e[i]=t[i])}function wF(e,n){const i={};return kF(i,e.style||{},e),Object.assign(i,function(e,n){let{transformTemplate:i}=e;return(0,t.useMemo)((()=>{const e=cF();return rF(e,n,i),Object.assign({},e.vars,e.style)}),[n])}(e,n)),i}function CF(e,t){const n={},i=wF(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const SF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function TF(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||SF.has(e)}let EF=e=>!TF(e);try{(_F=require("@emotion/is-prop-valid").default)&&(EF=e=>e.startsWith("on")?!TF(e):_F(e))}catch(G$){}var _F;function IF(e,n,i,r){const o=(0,t.useMemo)((()=>{const t=dF();return lF(t,n,uF(r),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};kF(t,e.style,e),o.style={...t,...o.style}}return o}function PF(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,i,r,o,s)=>{let{latestValues:a}=o;const l=(JL(n)?IF:CF)(i,a,s,n),c=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"===typeof e.values||(EF(r)||!0===n&&TF(r)||!t&&!TF(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,e),d=n!==t.Fragment?{...c,...l,ref:r}:{},{children:u}=i,h=(0,t.useMemo)((()=>sM(u)?u.get():u),[u]);return(0,t.createElement)(n,{...d,children:h})}}function RF(e,t){return function(n){let{forwardMotionProps:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return YL({...JL(n)?yF:xF,preloadedFeatures:e,useRender:PF(i),createVisualElement:t,Component:n})}}const AF={current:null},MF={current:!1};const OF=[...$O,KM,oO],NF=new WeakMap;const jF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DF{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=PO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=XA.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,WA.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=s;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=LL(n),this.isVariantNode=FL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const e=h[p];void 0!==l[p]&&sM(e)&&e.set(l[p],!1)}}mount(e){this.current=e,NF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),MF.current||function(){if(MF.current=!0,$L)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>AF.current=e.matches;e.addListener(t),t()}else AF.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||AF.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){NF.delete(this.current),this.projection&&this.projection.unmount(),qA(this.notifyUpdate),qA(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=LA.has(e),i=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&WA.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),r=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{i(),r(),o&&o(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in VL){const t=VL[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nj()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<jF.length;n++){const t=jF[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){for(const i in t){const r=t[i],o=n[i];if(sM(r))e.addValue(i,r);else if(sM(o))e.addValue(i,rM(r,{owner:e}));else if(o!==r)if(e.hasValue(i)){const t=e.getValue(i);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(i);e.addValue(i,rM(void 0!==t?t:r,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=rM(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==i&&null!==i&&("string"===typeof i&&(MO(i)||TM(i))?i=parseFloat(i):!(e=>OF.find(UO(e)))(i)&&oO.test(t)&&(i=gO(e,t)),this.setBaseTarget(e,sM(i)?i.get():i)),sM(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if("string"===typeof n||"object"===typeof n){const r=JR(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(i=r[e])}if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||sM(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new eM),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}}class LF extends DF{constructor(){super(...arguments),this.KeyframeResolver=VO}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sM(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class FF extends LF{constructor(){super(...arguments),this.type="html",this.renderInstance=hF}readValueFromInstance(e,t){if(LA.has(t)){const e=mO(t);return e&&e.default||0}{const n=function(e){return window.getComputedStyle(e)}(e),i=(NO(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Xj(e,n)}build(e,t,n){rF(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return gF(e,t,n)}}class BF extends LF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nj}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(LA.has(t)){const e=mO(t);return e&&e.default||0}return t=pF.has(t)?t:lM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return vF(e,t,n)}build(e,t,n){lF(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){fF(e,t,0,i)}mount(e){this.isSVGTag=uF(e.tagName),super.mount(e)}}const UF=qR(RF({...oj,...ML,...CL,...OL},((e,n)=>JL(e)?new BF(n):new FF(n,{allowProjection:e!==t.Fragment}))));function $F(e){let{isMicActive:n,onMicToggle:i,onCloseCall:r}=e;const[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(void 0);(0,t.useEffect)((()=>{setTimeout((()=>{Sp.postMessage({type:"groupAudioType",data:{type:"get-audio-devices"}})}),2e3);const e=e=>{var t;const n=e.data;"audioData"===n.type&&"audio-devices-list"===(null===(t=n.data)||void 0===t?void 0:t.type)&&(s(n.data.devices),l(n.data.activeDevice))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);return(0,Ip.jsxs)("div",{className:"vc-control-panel",children:[(0,Ip.jsx)("style",{children:"\n                    .vc-control-panel {\n                        display: flex;\n                        flex-direction: row;\n                        gap: 12px;\n                        align-items: center;\n                        justify-content: center;\n                        background: transparent;\n                        position: relative;\n                        height: 48px;\n                        min-height: 48px;\n                        max-height: 48px;\n                    }\n                    \n                    .control-buttons {\n                        display: flex;\n                        gap: 12px;\n                        justify-content: center;\n                        align-items: center;\n                    }\n\n                    .control-button {\n                        width: 36px !important;\n                        height: 36px !important;\n                        border-radius: 18px !important;\n                        min-width: 36px !important;\n                        min-height: 36px !important;\n                        max-width: 36px !important;\n                        max-height: 36px !important;\n                        padding: 0 !important;\n                        display: flex !important;\n                        align-items: center !important;\n                        justify-content: center !important;\n                        border: none !important;\n                        transition: all 0.2s ease !important;\n                        position: relative !important;\n                        overflow: hidden !important;\n                    }\n\n                    .control-button::after {\n                        content: '';\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        right: 0;\n                        bottom: 0;\n                        background: rgba(255, 255, 255, 0.1);\n                        opacity: 0;\n                        transition: opacity 0.2s ease;\n                    }\n\n                    .control-button:hover::after {\n                        opacity: 1;\n                    }\n\n                    .control-button:hover {\n                        transform: translateY(-2px);\n                    }\n\n                    .control-button:active {\n                        transform: translateY(1px);\n                    }\n\n                    .button-icon {\n                        width: 24px;\n                        height: 24px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        color: var(--vscode-button-foreground);\n                    }\n\n                    .button-icon svg {\n                        width: 16px;\n                        height: 16px;\n                    }\n                "}),(0,Ip.jsxs)("div",{className:"control-buttons",children:[(0,Ip.jsx)(ts,{appearance:"secondary",className:"control-button "+(n?"active":""),onClick:()=>i(!n),children:(0,Ip.jsx)("div",{className:"button-icon",children:n?(0,Ip.jsx)(Cy,{}):(0,Ip.jsx)(Sy,{})})}),(0,Ip.jsx)(ts,{appearance:"secondary",className:"control-button",onClick:r,children:(0,Ip.jsx)("div",{className:"button-icon",children:(0,Ip.jsx)(wy,{})})})]})]})}const zF=e=>{let{children:t}=e;return(0,Ip.jsx)(Ip.Fragment,{children:t})};const VF=function(e){const t=jR(),{state:n}=WR(),{disconnectRoom:i}=oI(),{onCloseAssisstant:r,isMicActive:o,setIsMicActive:s}=e;return(0,Ip.jsx)("div",{className:"flex items-center justify-center w-full",style:{height:"48px",minHeight:"48px",maxHeight:"48px"},children:(0,Ip.jsx)(zF,{children:"disconnected"!==n&&(0,Ip.jsx)(UF.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex justify-start w-full h-full",children:(0,Ip.jsx)($F,{isMicActive:o,onMicToggle:async function(e){try{s(e),Sp.postMessage({type:"groupAudioType",data:{type:"toggle-audio-mute"}})}catch(t){console.error("Error in handleMicToggle:",t),s(!e)}},onCloseCall:async()=>{"connected"===t.state&&(await t.disconnect(),await i(),Sp.postMessage({type:"VoiceAssistantStopRecording"})),await new Promise((e=>setTimeout(e,100))),r()}})})})})};function HF(e){let{localVolumeLevel:n,remoteVolumeLevel:i,height:r=32}=e;const{isDarkTheme:o}=Ap(),s=(0,t.useRef)(null),a=(0,t.useRef)(0),l=(0,t.useRef)([]),[c,d]=(0,t.useState)(!1),u=()=>{var e;return(null===(e=s.current)||void 0===e?void 0:e.clientWidth)||300},h=()=>Math.floor(u()/12),p=()=>{const e=u(),t=h();return Math.max(2,(e-2*(t-1))/t)};return(0,t.useEffect)((()=>{l.current=Array(h()).fill(0).map((()=>.3*Math.random()+.1))}),[]),(0,t.useEffect)((()=>{d(n>.1||i>.1)}),[n,i]),(0,t.useEffect)((()=>{const e=()=>{const t=s.current,d=null===t||void 0===t?void 0:t.getContext("2d");if(!t||!d)return;d.clearRect(0,0,t.width,t.height);const u=Math.max(n,i),h=o?"255, 255, 255":"0, 0, 0";l.current.forEach(((e,t)=>{const n=c?(.2+.8*u+.1*Math.sin(.01*Date.now()+t))*r:(.1+.05*Math.sin(.005*Date.now()+t))*r;l.current[t]+=.15*(n-l.current[t]);const i=t*(p()+2),s=Math.max(2,l.current[t]),a=(r-s)/2,f=c?.7+.3*u:.3;d.fillStyle=`rgba(${h}, ${f})`,d.fillRect(i,a,p(),s),c&&u>.3&&(d.shadowColor=o?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.3)",d.shadowBlur=4,d.fillRect(i,a,p(),s),d.shadowBlur=0)})),a.current=requestAnimationFrame(e)};return s.current&&(s.current.width=u(),s.current.height=r,a.current=requestAnimationFrame(e)),()=>{a.current&&cancelAnimationFrame(a.current)}}),[n,i,o,c,r]),(0,Ip.jsx)(UF.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"flex items-center justify-center w-full h-full min-w-0",style:{height:`${r}px`},children:(0,Ip.jsx)("canvas",{ref:s,className:"rounded-sm",style:{width:"100%",height:`${r}px`,filter:c?"brightness(1.1)":"brightness(0.8)",maxWidth:"100%"}})})}const WF=e=>{let{children:t}=e;return(0,Ip.jsx)(Ip.Fragment,{children:t})},qF=e=>{const{state:t}=WR(),{error:n,localVolumeLevel:i,remoteVolumeLevel:r,isMicActive:o,setIsMicActive:s,isDownloadingNodeRTC:a,onInterruptAgentStream:l}=oI();return(0,Ip.jsx)(WF,{children:"connecting"!==t&&"disconnected"!==t||n?"disconnected"===t&&n?(0,Ip.jsx)(UF.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex items-center justify-center h-full px-4",style:{height:"60px",minHeight:"60px",maxHeight:"60px"},children:(0,Ip.jsx)("div",{className:"text-xs p-2 rounded max-w-full overflow-hidden",style:{backgroundColor:"var(--vscode-inputValidation-errorBackground)",border:"1px solid var(--vscode-inputValidation-errorBorder)",color:"var(--vscode-inputValidation-errorForeground)"},children:n})},"disconnected"):(0,Ip.jsx)(UF.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex items-center w-full h-full",style:{height:"60px",minHeight:"60px",maxHeight:"60px",padding:"5px 15px"},children:(0,Ip.jsxs)("div",{className:"flex items-center w-full gap-3",children:[(0,Ip.jsx)("div",{className:"flex-1 flex items-center justify-center min-w-0 overflow-hidden",children:(0,Ip.jsx)(HF,{localVolumeLevel:i,remoteVolumeLevel:r,height:32})}),(0,Ip.jsx)("div",{className:"flex-shrink-0 flex items-center",style:{width:"120px"},children:(0,Ip.jsx)(VF,{onCloseAssisstant:e.onCloseAssisstant,isMicActive:o,setIsMicActive:s})})]})},"connected"):(0,Ip.jsx)(UF.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex items-center justify-center h-full gap-3 px-4",style:{height:"60px",minHeight:"60px",maxHeight:"60px"},children:(0,Ip.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,Ip.jsx)(Ty,{}),(0,Ip.jsx)("p",{className:"text-sm",style:{margin:0,lineHeight:"1.2"},children:a?"Initializing Voice Mode...":"Initializing..."})]})},"connecting")})},KF=e=>{const{room:t}=oI();return t?(0,Ip.jsx)(NR.Provider,{value:t,children:(0,Ip.jsx)(qF,{onCloseAssisstant:e.onCloseAssisstant||(()=>{})})}):(0,Ip.jsx)(Ip.Fragment,{})},GF=cp.div`
	margin-right: 8px;
	cursor: pointer;
	width: 16px;
	height: 16px;
	position: relative;
	display: inline-flex;
	align-items: center;
	justify-content: center;
`,YF=cp.input`
	position: absolute;
	opacity: 0;
	cursor: pointer;
	width: 100%;
	height: 100%;
	margin: 0;
`,QF=cp.div`
	width: 16px;
	height: 16px;
	background-color: ${e=>e.checked?"var(--vscode-checkbox-background)":"var(--vscode-sideBar-background)"};
	border: 1px solid var(--vscode-checkbox-border);
	border-radius: 3px;
	display: flex;
	align-items: center;
	justify-content: center;
	pointer-events: none;
	
	&::after {
		content: '';
		display: ${e=>e.checked?"block":"none"};
		width: 4px;
		height: 8px;
		border: solid var(--vscode-checkbox-foreground, white);
		border-width: 0 2px 2px 0;
		transform: rotate(45deg);
		margin-bottom: 2px;
	}
`,XF=e=>{var t;let{toolConfiguration:n,onToolConfigurationChange:i,onClose:r,isPro:o=!1,upgradeForAccess:s}=e;const a=[{id:"browserTool",name:"Browser Tool",description:"Launch and control a browser to navigate websites, interact with web elements, capture screenshots, and test web applications in real-time",icon:"codicon-browser",enabled:!!o&&(null===(t=n.browserTool)||void 0===t||t),available:!0},{id:"fileSystemTool",name:"File System Tool",description:"Enhanced file operations and monitoring",icon:"codicon-file-directory",enabled:!1,available:!1,comingSoon:!0},{id:"terminalTool",name:"Terminal Tool",description:"Advanced terminal operations with persistent sessions",icon:"codicon-terminal",enabled:!1,available:!1,comingSoon:!0}],l=(e,t)=>{if(!o&&"browserTool"===e&&t)return void(s&&s());const r={...n,[e]:t};i(r)},c=a.filter((e=>e.available)),d=a.filter((e=>e.comingSoon));return(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.4)",zIndex:999}}),(0,Ip.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"400px",maxWidth:"90vw",backgroundColor:"var(--vscode-sideBar-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",zIndex:1e3,display:"flex",flexDirection:"column",overflow:"hidden",height:"fit-content",maxHeight:"90vh"},children:[(0,Ip.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Ip.jsx)("div",{style:{fontSize:"13px",fontWeight:"bold",color:"var(--vscode-dropdown-foreground)",display:"flex",alignItems:"center"},children:"Tools Configuration"}),(0,Ip.jsx)("i",{className:"codicon codicon-close",style:{fontSize:"16px",cursor:"pointer"},onClick:r})]}),c.map(((e,t)=>(0,Ip.jsxs)("div",{style:{padding:"12px 16px",cursor:"pointer",color:"var(--vscode-dropdown-foreground)",display:"flex",alignItems:"start",borderBottom:t<c.length-1||d.length>0?"1px solid var(--vscode-editorGroup-border)":"none"},onClick:()=>l(e.id,!e.enabled),children:[(0,Ip.jsxs)(GF,{onClick:t=>{t.stopPropagation(),l(e.id,!e.enabled)},style:{marginTop:"3px"},children:[(0,Ip.jsx)(YF,{type:"checkbox",checked:e.enabled,onChange:()=>{}}),(0,Ip.jsx)(QF,{checked:e.enabled})]}),(0,Ip.jsx)("i",{className:`codicon ${e.icon}`,style:{marginRight:"8px",fontSize:"14px",flexShrink:0,marginTop:"3px"}}),(0,Ip.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,Ip.jsx)("div",{children:e.name}),(0,Ip.jsx)("div",{style:{fontSize:"0.85em",color:"var(--vscode-descriptionForeground)",opacity:.7,lineHeight:"1.4",marginTop:"4px"},children:e.description})]})]},e.id)))]})]})},JF=20,ZF=cp.div`
	position: absolute;
	background-color: var(--vscode-menu-background);
	border: 1px solid var(--vscode-menu-border);
	border-radius: 4px;
	box-shadow: 0 2px 8px var(--vscode-widget-shadow);
	z-index: 100;
	right: 0;
	top: 100%;
	min-width: 140px;
`,eB=cp.div`
	padding: 8px 12px;
	cursor: pointer;
	&:hover {
		background-color: var(--vscode-list-hoverBackground);
	}
	color: var(--vscode-menu-foreground);
	font-size: 13px;
`,tB=cp.div`
	padding: 8px 12px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	color: var(--vscode-menu-foreground);
	font-size: 13px;
	border-bottom: 1px solid var(--vscode-menu-border);
`,nB=cp.span`
	flex: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	margin-right: 8px;
`,iB=(cp.button`
	background: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border: none;
	padding: 4px 8px;
	border-radius: 2px;
	font-size: 11px;
	cursor: pointer;
	&:hover {
		background: var(--vscode-button-hoverBackground);
	}
`,cp.div`
	padding: 8px 12px;
	display: flex;
	justify-content: center;
	align-items: center;
	color: var(--vscode-menu-foreground);
	font-size: 13px;
	border-bottom: 1px solid var(--vscode-menu-border);
`),rB=cp.button`
	background: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border: none;
	padding: 6px 12px;
	border-radius: 2px;
	font-size: 12px;
	cursor: pointer;
	width: 100%;
	&:hover {
		background: var(--vscode-button-hoverBackground);
	}
`,oB=cp.div`
	background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 55%, transparent);
	border-radius: 3px;
	overflow: hidden;
	cursor: pointer;
	display: flex;
	justify-content: center;
	align-items: center;
	flex: 1;
	height: 25px;

	&:hover {
		background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 90%, transparent);
	}

	&:active {
		background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 70%, transparent);
	}
`,sB=e=>{let{isHidden:n,showHistoryView:i,setToggleUseModel:r,toggleUseModel:o,redeemedSuccess:s,setRedeemedSuccess:a,isPro:l,setUserCredits:c,apiConfiguration:d,userCredits:p,setApiConfiguration:f,chatModeEnableDisable:m,setChatModeEnableDisable:g,upgradeForAccess:v,fetchUserCredits:b,customerId:y,setCustomerId:x,selectedModel:k,setSelectedModel:w,showVoiceAssistant:C,setShowVoiceAssistant:S,isAutoApprove:T,setIsAutoApprove:E,waitingToResume:_,setWaitingToResume:I,showOverflowMenu:P,setShowOverflowMenu:R}=e;const A=(0,t.useRef)(null),[M,O]=(0,t.useState)(window.innerWidth),N=(0,t.useRef)(null);(0,t.useEffect)((()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&R(!1)};return P&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[P]),(0,t.useEffect)((()=>{const e=()=>{O(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const{version:j,blackboxMessages:D,useModelFromUserKey:L,taskHistory:F,chatSettings:B,toolConfiguration:U,setToolConfiguration:$}=Ap();(0,t.useEffect)((()=>{!y&&U.browserTool&&$({...U,browserTool:!1})}),[y]);const z=(0,t.useMemo)((()=>D.at(0)),[D]),V=(0,t.useMemo)((()=>function(e){const t=[];for(let n=0;n<e.length;n++)if("say"===e[n].type&&"api_req_started"===e[n].say){let i=JSON.parse(e[n].text||"{}"),r=n+1;for(;r<e.length;){if("say"===e[r].type&&"api_req_finished"===e[r].say){let o={...i,...JSON.parse(e[r].text||"{}")};t.push({...e[n],text:JSON.stringify(o)}),n=r;break}r++}r===e.length&&t.push(e[n])}return e.filter((e=>!("say"===e.type&&"api_req_finished"===e.say))).map((e=>"say"===e.type&&"api_req_started"===e.say&&t.find((t=>t.ts===e.ts))||e))}(function(e){const t=[];for(let n=0;n<e.length;n++)if("ask"===e[n].type&&"command"===e[n].ask){let i=e[n].text||"",r=!1,o=n+1;for(;o<e.length&&("ask"!==e[o].type||"command"!==e[o].ask);){if("command_output"===e[o].ask||"command_output"===e[o].say){r||(i+=`\n${up}`,r=!0);const t=e[o].text||"";t.length>0&&(i+="\n"+t)}o++}t.push({...e[n],text:i}),n=o-1}return e.filter((e=>!("command_output"===e.ask||"command_output"===e.say))).map((e=>"ask"===e.type&&"command"===e.ask&&t.find((t=>t.ts===e.ts))||e))}(D.slice(1)))),[D]),H=(0,t.useMemo)((()=>function(e){const t={totalTokensIn:0,totalTokensOut:0,totalCacheWrites:void 0,totalCacheReads:void 0,totalCost:0};return e.forEach((e=>{if("say"===e.type&&"api_req_started"===e.say&&e.text)try{const r=JSON.parse(e.text),{tokensIn:o,tokensOut:s,cacheWrites:a,cacheReads:l,cost:c,isCreditDeducted:d}=r;if(!d)return;var n,i;"number"===typeof o&&(t.totalTokensIn+=o),"number"===typeof s&&(t.totalTokensOut+=s),"number"===typeof a&&(t.totalCacheWrites=(null!==(n=t.totalCacheWrites)&&void 0!==n?n:0)+a),"number"===typeof l&&(t.totalCacheReads=(null!==(i=t.totalCacheReads)&&void 0!==i?i:0)+l),"number"===typeof c&&(t.totalCost+=c)}catch(r){console.error("Error parsing JSON:",r)}})),t}(V)),[V]),[W,q]=(0,t.useState)(""),K=(0,t.useRef)(null),[G,Y]=(0,t.useState)(!1),[Q,X]=(0,t.useState)([]),[J,Z]=(0,t.useState)([]),[ee,te]=(0,t.useState)(!1),[ne,ie]=(0,t.useState)(void 0),[re,oe]=(0,t.useState)(!1),[se,ae]=(0,t.useState)(void 0),[le,ce]=(0,t.useState)(void 0),[de,ue]=(0,t.useState)(!1),he=(0,t.useRef)(null),[pe,fe]=(0,t.useState)({}),me=(0,t.useRef)(null),ge=(0,t.useRef)(!1),[ve,be]=(0,t.useState)(!1),[ye,xe]=(0,t.useState)(!1),[ke,we]=(0,t.useState)(!1),[Ce,Se]=(0,t.useState)([]),[Te,Ee]=(0,t.useState)(!1),[_e,Ie]=(0,t.useState)(!1),[Pe,Re]=(0,t.useState)(!1),[Ae,Me]=(0,t.useState)(!1),[Oe,Ne]=(0,t.useState)(!1),[je,De]=(0,t.useState)(NI),[Le,Fe]=(0,t.useState)(""),[Be,Ue]=(0,t.useState)(""),[$e,ze]=(0,t.useState)(""),[Ve,He]=(0,t.useState)(!1),[We,qe]=(0,t.useState)(!1),[Ke,Ge]=(0,t.useState)(!1),[Ye,Qe]=(0,t.useState)(!1),[Xe,Je]=(0,t.useState)(null),[Ze,et]=(0,t.useState)(!1),[tt,nt]=(0,t.useState)((()=>()=>{})),[it,rt]=(0,t.useState)(""),ot=y&&y.startsWith("tus_"),st=(0,t.useCallback)((async()=>{try{const e={"Content-Type":"application/json","X-Customer-Id":y||"","X-Api-Key":""},t=await fetch(`${h}/api/public/extension/gpu/list`,{headers:e});if(t.ok){const e=await t.json();De(e.data),Je(Date.now())}}catch(e){console.error("Error fetching GPU plans:",e)}}),[]),at=(0,t.useCallback)((()=>{const e=Date.now();(!Xe||e-Xe>3e5)&&st()}),[Xe,st]);(0,t.useEffect)((()=>{at()}),[at]),(0,t.useEffect)((()=>{const e=`announcement_${j}_mcp_tools`,t=JSON.parse(localStorage.getItem("dismissedAnnouncements")||"[]"),n=(t.includes(e),()=>{et(!1);const n=[...t,e];localStorage.setItem("dismissedAnnouncements",JSON.stringify(n))});nt((()=>n))}),[j]);const lt=(0,t.useCallback)((async e=>{var t;const n=e.data;switch(n.type){case"updateUserCredits":const e=n.value?parseFloat(n.value):0;c(e);break;case"updateUserEmail":rt(n.value||"");break;case"getRevisions":null!==n&&void 0!==n&&n.revisions?Se(n.revisions):Se([]);break;case"TRIGGER_UPGRADE_FLOW":v&&v();break;case"SHOW_ADD_CREDITS_DIALOG":I("wait_for_credits"),n.value&&x(n.value),v&&v();break;case"setPromptInput":null!==n&&void 0!==n&&n.text&&q(null===n||void 0===n?void 0:n.text);break;case"historyItemFetching":Ne(!0);break;case"historyItemFetched":Me(!1),Ne(!1),null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.mode&&"remote"===n.data.mode?we(!0):we(!1);break;case"historyItemFetchError":Ne(!1);break;case"githubRepos":n.repos&&He(!0);break;case"githubBranches":n.branches&&qe(!0);break;case"gitFolderExists":Ge(n.gitExists||!1)}}),[x,c,I,v]);u("message",lt),(0,t.useEffect)((()=>{L||async function(){const e=localStorage.getItem("github_token");e&&Fe(e);const t=l?"sonnet":"qwen",n="true"===localStorage.getItem("blackbox_redeem_success"),i={...d,apiProvider:t,hasRedeemedCoupon:n};f(i),Sp.postMessage({type:"apiConfiguration",apiConfiguration:i}),b(),Sp.postMessage({type:"checkGitFolder"})}()}),[]);const ct=(0,t.useMemo)((()=>D.at(-1)),[D]),dt=(0,t.useMemo)((()=>D.at(-2)),[D]);ys((()=>{if(ct)switch(ct.type){case"ask":const e=!0===ct.partial;switch(ct.ask){case"api_req_failed":ie("api_req_failed"),oe(!0),ae("Retry"),ce("Start New Task");break;case"mistake_limit_reached":ie("mistake_limit_reached"),oe(!0),ae("Proceed Anyways"),ce("Start New Task");break;case"followup":ie("followup"),oe(e);break;case"tool":ie("tool"),oe(!e);switch(JSON.parse(ct.text||"{}").tool){case"editedExistingFile":case"newFileCreated":if(!e&&T){ae(void 0),ce(void 0),vt("tool");break}ae("Save"),ce("Reject");break;default:if(!e&&T){ae(void 0),ce(void 0),vt("tool");break}ae("Approve"),ce("Reject")}break;case"browser_action_launch":if(ie("browser_action_launch"),oe(!e),!e&&T){ae(void 0),ce(void 0),vt("browser_action_launch");break}ae("Approve"),ce("Reject");break;case"command":if(ie("command"),oe(!e),!e&&T){ae(void 0),ce(void 0),vt("command");break}ae("Run Command"),ce("Reject");break;case"command_output":ie("command_output"),oe(!0),ae("Proceed While Running"),ce(void 0),!e&&T&&setTimeout((()=>{vt("command_output")}),3e3);break;case"use_mcp_server":if(ie("use_mcp_server"),oe(!e),!e&&T){ae(void 0),ce(void 0),vt("use_mcp_server");break}ae("Approve"),ce("Reject");break;case"completion_result":ie("completion_result"),oe(!e),ae("Start New Task"),ce(Ke?"Make a Pull Request":void 0);break;case"resume_task":ie("resume_task"),oe(!0),ae("Resume Task"),ce(void 0),ue(!1);break;case"resume_completed_task":ie("resume_completed_task"),oe(!0),ae("Start New Task"),ce(void 0),ue(!1);break;case"new_task":ie("new_task"),oe(!e),ae("Start New Task with Context"),ce(void 0)}break;case"say":if("api_req_started"===ct.say)"command_output"===(null===dt||void 0===dt?void 0:dt.ask)&&(q(""),X([]),ie(void 0),oe(!1))}}),[ct,dt]),(0,t.useEffect)((()=>{if(0===D.length){ie(void 0),oe(!1),ae(void 0),ce(void 0),$v("Blackbox Activated",yI(),{tag:"vscode-agent"})}else{const n=D[D.length-1];if(null!=n.text&&"api_req_started"===n.say)try{var e;const t=JSON.parse(n.text),i=/\[(create_file|edit_file) for '.*?'\]/;null!==(e=t.request)&&void 0!==e&&e.startsWith("[")&&i.test(t.request)&&Sp.postMessage({type:"getRevisions"})}catch(t){console.error("Error parsing message text:",t)}B.mode}}),[D.length]),(0,t.useEffect)((()=>{fe({}),null!==z&&void 0!==z&&z.ts&&Sp.postMessage({type:"getRevisions"})}),[null===z||void 0===z?void 0:z.ts]);const ut=(0,t.useMemo)((()=>{var e,t;if(!(null===(e=V.at(-1))||void 0===e||!e.ask)&&void 0!==ne&&re&&void 0!==se)return!1;if(!0===(null===(t=V.at(-1))||void 0===t?void 0:t.partial))return!0;{const e=function(e,t){const n=dp(e,t);return-1===n?void 0:e[n]}(V,(e=>"api_req_started"===e.say));if(e&&null!=e.text&&"api_req_started"===e.say){if(void 0===JSON.parse(e.text).cost)return!0}}return!1}),[V,ne,re,se]),ht=(0,t.useCallback)((async(e,t,n)=>{let i=!1;if((e=e.trim())||t.length>0||n.length>0){ut&&(i=!0,Sp.postMessage({type:"cancelTask"}),ue(!0),Y(!0),ae(void 0),await new Promise((e=>setTimeout(e,4e3))),Y(!1));localStorage.getItem("blackbox_redeem_success");if($v("Chat Request",yI(),{tag:"blackbox-vscode-agent"}),0===D.length){const i="true"===localStorage.getItem("blackbox_redeem_success");if(l&&!i&&!("blackbox-base"===k)&&0===p&&o)return void Sp.postMessage({type:"showInformationMessage",options:{prompt:ft(),title:"Add Credits",placeHolder:"Please add credits to continue"},text:"Add credits since credits are below threshold (0.4)"});const r={provider:vy[k].apiProvider,model:vy[k].modelId};Sp.postMessage({type:"newTask",text:e,images:t,videos:n,selectedModel:r}),we("remote"===B.mode)}else if(ne)switch(ne){case"followup":case"tool":case"browser_action_launch":case"command":case"command_output":case"use_mcp_server":case"completion_result":case"resume_task":case"resume_completed_task":case"new_task":case"mistake_limit_reached":Sp.postMessage({type:"askResponse",askResponse:"messageResponse",text:e,images:t,videos:n})}else i&&(Sp.postMessage({type:"askResponse",askResponse:"messageResponse",text:e,images:t,videos:n}),i=!1);q(""),X([]),Z([]),ie(void 0),oe(!1),ge.current=!1}}),[D.length,ne,l,p,k,v,ut]),pt=(0,t.useCallback)((()=>{Sp.postMessage({type:"clearTask"})}),[]);const ft=()=>`https://www.blackbox.ai/api/buy-credits?productId=${"prod_RI1k0eOeA1Xf5u"}&userId=${yI()}&productName=${"cybercoder"}`,mt=async()=>{let e=await async function(){try{let e=localStorage.getItem("referralId");if(!e)return null;let t=await fetch(`${bI}/api/referral/status/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return n?404===t.status?(console.error("Referral not found"),null):{isRedeemed:n.isRedeemed,senderId:n.senderId,receiverId:n.receiverId,redeemedAt:n.redeemedAt}:null}catch(e){return console.error("Error checking redemption status:",e),null}}();null!==e&&void 0!==e&&e.isRedeemed&&(a(!0),localStorage.setItem("blackbox_redeem_success","true"))};function gt(){let e=0,t=Math.floor(8640);const n=async()=>{if(e++,e>t)return;mt(),localStorage.getItem("blackbox_redeem_success")||setTimeout(n,1e4)};n()}(0,t.useEffect)((()=>{let e=localStorage.getItem("blackbox_redeem_success"),t=localStorage.getItem("referralId");if(!e&&t&&gt(),e&&!l&&!L){const t="qwen",n={...d,apiProvider:t,hasRedeemedCoupon:"true"===e};f(n),Sp.postMessage({type:"apiConfiguration",apiConfiguration:n})}}),[]);const vt=(0,t.useCallback)((e=>{switch(null!==e&&void 0!==e?e:ne){case"api_req_failed":case"command":case"command_output":case"tool":case"browser_action_launch":case"use_mcp_server":case"resume_task":case"mistake_limit_reached":Sp.postMessage({type:"askResponse",askResponse:"yesButtonClicked"});break;case"completion_result":case"resume_completed_task":pt();break;case"new_task":const e=D.slice().reverse().find((e=>"ask"===e.type&&"new_task"===e.ask)),t={provider:vy[k].apiProvider,model:vy[k].modelId};Sp.postMessage({type:"newTask",text:null===e||void 0===e?void 0:e.text,images:[],videos:[],selectedModel:t})}ie(void 0),oe(!1),ge.current=!1}),[ne,D,k,pt]),bt=(0,t.useCallback)((()=>{if(ut)return Sp.postMessage({type:"cancelTask"}),void ue(!0);switch(ne){case"api_req_failed":case"mistake_limit_reached":pt();break;case"command":case"tool":case"browser_action_launch":case"use_mcp_server":Sp.postMessage({type:"askResponse",askResponse:"noButtonClicked"});break;case"completion_result":if(Ke){const e="Create a pull request with the changes made in this task. Please analyze the current git status, stage the appropriate files, create a meaningful commit message, push the changes, and finally open a pull request to the target branch on Github.";Sp.postMessage({type:"askResponse",askResponse:"messageResponse",text:e,images:[],videos:[]})}}ie(void 0),oe(!1),ge.current=!1}),[ne,pt,ut]),yt=(0,t.useCallback)((()=>{pt()}),[pt]),{selectedModelInfo:xt}=(0,t.useMemo)((()=>rv(d)),[d]),kt=(0,t.useCallback)((()=>{te(!0),Sp.postMessage({type:"selectImages"})}),[]),wt=!xt.supportsImages||G||Q.length>=JF,Ct=(0,t.useCallback)((e=>{var t,i,r,o,s;const a=e.data;switch(a.type){case"action":var l;if("didBecomeVisible"===a.action)n||G||re||null===(l=K.current)||void 0===l||l.focus();break;case"selectedImages":const e=null!==(t=a.images)&&void 0!==t?t:[];e.length>0&&X((t=>[...t,...e].slice(0,JF))),te(!1);break;case"selectedVideos":const c=null!==(i=a.videos)&&void 0!==i?i:[];c.length>0&&Z((e=>[...c,...e].slice(0,1))),te(!1);break;case"selectMediaAbort":te(!1);break;case"invoke":switch(a.invoke){case"sendMessage":ht(null!==(r=a.text)&&void 0!==r?r:"",null!==(o=a.images)&&void 0!==o?o:[],null!==(s=a.videos)&&void 0!==s?s:[]);break;case"primaryButtonClick":vt();break;case"secondaryButtonClick":bt()}}}),[n,G,re,ht,vt,bt]);u("message",Ct),ks((()=>{var e;null===(e=K.current)||void 0===e||e.focus()})),(0,t.useEffect)((()=>{const e=setTimeout((()=>{var e;n||G||re||(null===(e=K.current)||void 0===e||e.focus())}),50);return()=>{clearTimeout(e)}}),[n,G,re]);const St=(0,t.useMemo)((()=>V.filter((e=>{var t,n,i;switch(e.ask){case"completion_result":if(""===e.text)return!1;break;case"api_req_failed":case"resume_task":case"resume_completed_task":return!1}switch(e.say){case"api_req_finished":case"api_req_retried":case"mcp_server_request_started":return!1;case"text":if(""===(null!==(t=e.text)&&void 0!==t?t:"")&&0===(null!==(n=null===(i=e.images)||void 0===i?void 0:i.length)&&void 0!==n?n:0))return!1}return!0}))),[V]),Tt=(0,t.useCallback)((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success");if(!t&&"blackbox-base"!==e)return void v();const n=vy[e];if(!n)return;w(e);const i={...d,apiProvider:n.apiProvider,hasRedeemedCoupon:t};f(i),Sp.postMessage({type:"apiConfiguration",apiConfiguration:i})}),[d,v,f]),Et=(0,t.useMemo)((()=>{const e=[];let t=[],n=!1;const i=()=>{t.length>0&&(e.push([...t]),t=[],n=!1)};return St.forEach((r=>{if("browser_action_launch"===r.ask)i(),n=!0,t.push(r);else if(n){if("api_req_started"===r.say){const n=[...t].reverse().find((e=>"api_req_started"===e.say));if(null!=(null===n||void 0===n?void 0:n.text)){if(null!=JSON.parse(n.text).cancelReason)return i(),void e.push(r)}}if((e=>"ask"===e.type?["browser_action_launch"].includes(e.ask):"say"===e.type&&["api_req_started","text","browser_action","browser_action_result"].includes(e.say))(r)){if(t.push(r),"browser_action"===r.say){"close"===JSON.parse(r.text||"{}").action&&i()}}else i(),e.push(r)}else e.push(r)})),t.length>0&&e.push([...t]),e}),[St]),_t=(0,t.useMemo)((()=>ms()((()=>{var e;null===(e=he.current)||void 0===e||e.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})}),10,{immediate:!0})),[]),It=(0,t.useCallback)((()=>Ce),[Ce]),Pt=(0,t.useCallback)((()=>{var e;null===(e=he.current)||void 0===e||e.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"auto"})}),[]),Rt=(0,t.useCallback)((e=>{var t;const n=null!==(t=pe[e])&&void 0!==t&&t,i=Et.at(-1),r=Array.isArray(i)?i[0].ts===e:(null===i||void 0===i?void 0:i.ts)===e,o=Et.at(-2),s=Array.isArray(o)?o[0].ts===e:(null===o||void 0===o?void 0:o.ts)===e,a=r&&!Array.isArray(i)&&"api_req_started"===(null===i||void 0===i?void 0:i.say)&&!pe[i.ts];if(fe((t=>({...t,[e]:!t[e]}))),n||(ge.current=!0),n&&ye){const e=setTimeout((()=>{Pt()}),0);return()=>clearTimeout(e)}if(r||s){if(n){if(s&&!a)return;const e=setTimeout((()=>{Pt()}),0);return()=>clearTimeout(e)}{const e=setTimeout((()=>{var e;null===(e=he.current)||void 0===e||e.scrollToIndex({index:Et.length-(r?1:2),align:"start"})}),0);return()=>clearTimeout(e)}}}),[Et,pe,Pt,ye]),At=(0,t.useCallback)((e=>{ge.current||(e?_t():setTimeout((()=>{Pt()}),0))}),[_t,Pt]);(0,t.useEffect)((()=>{ge.current||setTimeout((()=>{_t()}),50)}),[Et.length,_t]);const Mt=(0,t.useCallback)((e=>{const t=e;var n;t.deltaY&&t.deltaY<0&&(null!==(n=me.current)&&void 0!==n&&n.contains(t.target)&&(ge.current=!0))}),[]);u("wheel",Mt,window,{passive:!0});const Ot=(0,t.useMemo)((()=>z?"Type a message (@ to add files)...":"Type your task here (@ to add files)..."),[z]),Nt=(0,t.useCallback)(((e,t)=>{if(Array.isArray(t))return(0,Ip.jsx)(Zv,{messages:t,isLast:e===Et.length-1,lastModifiedMessage:V.at(-1),getLatestCodeRevisions:It,onHeightChange:At,isExpanded:e=>{var t;return null!==(t=pe[e])&&void 0!==t&&t},onToggleExpand:e=>{fe((t=>({...t,[e]:!t[e]})))}});if("say"===t.type&&"api_req_started"===t.say){const t=Et.filter((e=>!Array.isArray(e))).slice(e+1).find((e=>!Array.isArray(e)&&"say"===(null===e||void 0===e?void 0:e.type)));if(t&&("text"===(null===t||void 0===t?void 0:t.say)&&""===(null===t||void 0===t?void 0:t.text)||"text"!==(null===t||void 0===t?void 0:t.say)))return(0,Ip.jsx)(Ip.Fragment,{})}return Array.isArray(t)?null:(0,Ip.jsx)(Wv,{message:t,getLatestCodeRevisions:It,isExpanded:pe[t.ts]||!1,onToggleExpand:()=>Rt(t.ts),lastModifiedMessage:V.at(-1),isLast:e===Et.length-1,onHeightChange:At,upgradeForAccess:v},t.ts)}),[pe,V,Et.length,Ce,Rt,At]);return(0,t.useEffect)((()=>{"resume_task"===_&&("resume_task"===ne&&vt(),I(null))}),[_,ne,vt,I]),(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{ref:N,style:{position:"fixed",marginRight:"5px",top:"0",right:"0",zIndex:9999},children:P&&(0,Ip.jsxs)(ZF,{onClick:e=>e.stopPropagation(),children:[it?(0,Ip.jsx)(tB,{children:(0,Ip.jsxs)(nB,{title:it,children:[it,ot&&(0,Ip.jsx)("div",{style:{fontSize:"10px",color:"var(--vscode-descriptionForeground)",marginTop:"2px"},children:"Team Account"})]})}):(0,Ip.jsx)(iB,{children:(0,Ip.jsx)(rB,{onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/connect-vscode"}),R(!1)},children:"Login"})}),it&&(0,Ip.jsx)(eB,{onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/connect-vscode"}),R(!1)},children:"Switch Account"}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"openChatView"}),et(!0),R(!1)},children:"What's new!"}),l&&(0,Ip.jsx)(Ip.Fragment,{children:(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/tasks"}),R(!1)},children:"Remote Agent"})}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"showMcpView"}),R(!1)},children:"MCP"}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"openBrowserLink",text:"https://cloud.blackbox.ai"})},children:"Remote Agents"}),(0,Ip.jsx)(eB,{onClick:()=>y?void Sp.postMessage({type:"openBrowserLink",text:`https://www.blackbox.ai/api/stripe/billing-portal?customerId=${y}`}):(v(),void R(!1)),children:"Plan"}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"addBlackboxRules"}),R(!1)},children:"Rules"}),(0,Ip.jsx)(eB,{onClick:()=>{Qe(!0),R(!1)},children:"Tools"}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"openBrowserLink",text:"https://docs.blackbox.ai"}),R(!1)},children:"Docs"}),(0,Ip.jsx)(eB,{onClick:()=>{Sp.postMessage({type:"historyButtonClicked"}),R(!1)},children:"History"}),it&&(0,Ip.jsx)(eB,{onClick:e=>{e.stopPropagation(),Sp.postMessage({type:"logoutUser"}),R(!1)},children:"Logout"})]})}),(0,Ip.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:n?"none":"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:M>500?"space-between":"end",alignItems:"center",borderBottom:"1px solid var(--vscode-panel-border)",backgroundColor:"var(--vscode-sideBar-background)"}}),z?(0,Ip.jsx)(Uv,{task:z,tokensIn:H.totalTokensIn,tokensOut:H.totalTokensOut,doesModelSupportPromptCache:xt.supportsPromptCache,cacheWrites:H.totalCacheWrites,cacheReads:H.totalCacheReads,totalCost:H.totalCost,onClose:yt,userCredits:p,onAddCredits:()=>{v()},hasCouponRedeemed:"true"===localStorage.getItem("blackbox_redeem_success")}):(0,Ip.jsxs)("div",{style:{flexGrow:1,overflowY:"auto",display:"flex",flexDirection:"column"},children:[Ze?(0,Ip.jsx)(UI,{version:j,hideAnnouncement:tt}):(0,Ip.jsx)("div",{style:{padding:"0 20px",flexShrink:0,display:"flex",flexDirection:"column"},children:(0,Ip.jsx)(Ip.Fragment,{children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginBottom:"20px",textAlign:"center"},children:[(0,Ip.jsx)("h2",{style:{paddingTop:"200px",fontSize:"18px",margin:"0 0 10px 0"},children:"BLACKBOX Agent"}),(0,Ip.jsx)("p",{style:{fontSize:"14px",margin:"0",color:"var(--vscode-descriptionForeground)",maxWidth:"400px"},children:"+30M users choose BLACKBOX AI"})]})})}),(0,Ip.jsx)("div",{style:{padding:"0 20px",flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:!(localStorage.getItem("blackbox_redeem_success")||s)&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{onClick:v,style:{marginTop:"5px",marginBottom:"5px",width:"fit",background:"var(--vscode-toolbar-hoverBackground)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"4px 20px"},children:(0,Ip.jsx)("span",{style:{color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:"Get Started"})}),(0,Ip.jsxs)("div",{onClick:()=>Sp.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/connect-vscode"}),style:{marginTop:"5px",marginBottom:"5px",width:"fit",height:"20px",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"0 20px"},children:[(0,Ip.jsx)("span",{style:{color:"var(--vscode-foreground)",marginRight:"8px",fontWeight:"normal"},children:"Already subscribed?"}),(0,Ip.jsx)("span",{style:{color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:"\u2022 Connect"})]})]})}),F.length>0&&(0,Ip.jsx)(Op,{showHistoryView:i})]}),Oe&&(0,Ip.jsx)("div",{style:{position:"absolute",top:"48px",left:0,right:0,bottom:0,backgroundColor:"color-mix(in srgb, var(--vscode-editor-background) 80%, transparent)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",color:"var(--vscode-foreground)"},children:[(0,Ip.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:"32px"}}),(0,Ip.jsx)("div",{children:"Loading task..."})]})}),z&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:{flexGrow:1,display:"flex"},ref:me,children:(0,Ip.jsx)(_c,{ref:he,className:"scrollable",style:{flexGrow:1,overflowY:"scroll"},components:{Footer:()=>(0,Ip.jsx)("div",{style:{height:5}})},increaseViewportBy:{top:3e3,bottom:Number.MAX_SAFE_INTEGER},data:Et,itemContent:Nt,atBottomStateChange:e=>{xe(e),e&&(ge.current=!1),be(ge.current&&!e)},atBottomThreshold:10,initialTopMostItemIndex:Et.length-1},z.ts)}),G||"followup"!==ne||re?(0,Ip.jsx)(Ip.Fragment,{children:ve?(0,Ip.jsx)("div",{style:{display:"flex",padding:"10px 15px 0px 15px"},children:(0,Ip.jsx)(oB,{onClick:()=>{_t(),ge.current=!1},children:(0,Ip.jsx)("span",{className:"codicon codicon-chevron-down",style:{fontSize:"18px"}})})}):(0,Ip.jsxs)(Ip.Fragment,{children:[("remote"===B.mode||ke)&&ut&&(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 15px 0px 15px",color:"var(--vscode-foreground)",fontWeight:"bold"},children:[(0,Ip.jsx)(Kv,{}),"Running..."]}),(0,Ip.jsxs)("div",{style:{opacity:se||le||ut?re||ut&&!de?1:.5:0,display:!1===(le||ut)&&!1===(se&&!ut)?"none":"flex",padding:"10px 15px 0px 15px"},children:[se&&!ut&&(0,Ip.jsx)(ts,{appearance:"primary",disabled:!re,style:{flex:le?1:2,marginRight:le?"6px":"0"},onClick:()=>{vt()},children:se}),(le||ut)&&(0,Ip.jsx)(ts,{appearance:"secondary",disabled:!re&&!(ut&&!de),style:{flex:ut?2:1,marginLeft:ut?0:"6px"},onClick:bt,children:ut?"Cancel":le})]})]})}):(0,Ip.jsx)("div",{style:{marginTop:"10px",marginLeft:"15px",marginRight:"15px",display:"flex",alignItems:"center",position:"relative"},children:(0,Ip.jsx)("div",{style:{flex:"1",borderRadius:"3px",fontSize:"13.66px",backgroundColor:"var(--button-primary-background)",height:"inherit",flexGrow:"1",boxSizing:"border-box",display:"inline-flex",alignItems:"center",padding:"var(--button-padding-vertical) var(--button-padding-horizontal)",whiteSpace:"wrap",outline:"none",textDecoration:"none",border:"calc(var(--border-width)* 1px) solid var(--button-border)",color:"var(--button-primary-foreground",fill:"inherit",cursor:"inherit",fontFamily:"inherit"},children:"Please answer the question"})})]}),o&&(0,Ip.jsx)("div",{style:{marginTop:"10px",marginLeft:"15px",display:"flex",alignItems:"center",position:"relative"},ref:A,children:(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["blackbox-base"===k&&(l||"true"===localStorage.getItem("blackbox_redeem_success")?(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{onClick:()=>{Tt("gpt-5")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"OpenAI GPT-5"}),M>480&&(0,Ip.jsx)("div",{onClick:()=>{Tt("blackbox-pro")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"Blackbox Pro"}),M>480&&(0,Ip.jsx)("div",{onClick:()=>{Tt("deepseek-r1")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"Deepseek-R1"})]}):(0,Ip.jsx)(Ip.Fragment,{children:(0,Ip.jsx)("div",{onClick:()=>{localStorage.getItem("blackbox_redeem_success")||v()},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:M>380?"Upgrade to PRO":M>280?"Access all models":"Upgrade"})})),"remote"===B.mode&&(localStorage.getItem("github_token")?[(0,Ip.jsxs)("div",{className:"input-icon-button",onClick:()=>{const e=Le;e&&Sp.postMessage({type:"fetchGitHubRepos",value:e})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-repo",style:{marginRight:"4px",fontSize:"12px"}}),(0,Ip.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Be||"Select Repository"})]},"git-repo-select"),Be&&(0,Ip.jsxs)("div",{className:"input-icon-button",onClick:()=>{const e=Le;e&&Be&&Sp.postMessage({type:"fetchGitHubBranches",data:{token:e,repo:Be}})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-git-branch",style:{marginRight:"4px",fontSize:"12px"}}),(0,Ip.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:$e||"Select Branch"})]},"git-branch-select")]:(0,Ip.jsxs)("div",{className:"input-icon-button",onClick:()=>{Le||Sp.postMessage({type:"connectGithub"})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,Ip.jsx)("i",{className:"codicon codicon-github",style:{marginRight:"4px",fontSize:"12px"}}),(0,Ip.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Connect to Github"})]}))]})}),(0,Ip.jsx)(KF,{onCloseAssisstant:()=>null===S||void 0===S?void 0:S(!1)}),(0,Ip.jsx)(vI,{ref:K,inputValue:W,setInputValue:q,textAreaDisabled:G,placeholderText:Ot,setSelectedModel:w,showModelMenu:Te,setToggleUseModel:r,toggleUseModel:o,setShowModelMenu:Ee,selectedImages:Q,setSelectedImages:X,selectedVideos:J,setSelectedVideos:Z,showVoiceAssistant:C,setShowVoiceAssistant:S,onSend:()=>ht(W,Q,J),onSelectImages:kt,shouldDisableImages:wt,onHeightChange:()=>{ye&&Pt()},upgradeForAccess:v,isAutoApprove:T,setIsAutoApprove:e=>E(e),apiConfiguration:d,setApiConfiguration:f,isMediaLoading:ee,selectedRepo:Be,setSelectedRepo:Ue,selectedBranch:$e,setSelectedBranch:ze,showGitHubRepoMenu:Ve,setShowGitHubRepoMenu:He,showGitHubBranchMenu:We,setShowGitHubBranchMenu:qe,gitHubToken:Le,setGitHubToken:Fe,selectedModel:k,isPro:!!y}),_e&&(0,Ip.jsx)(MI,{onClose:()=>Ie(!1)}),Pe&&(0,Ip.jsx)(OI,{customerId:y,onClose:e=>{Re(!1),e&&v()},refreshPlans:at}),Ae&&(0,Ip.jsx)(FI,{isLoading:Oe,onDone:()=>Me(!1)}),Ye&&(0,Ip.jsx)(XF,{toolConfiguration:U,onToolConfigurationChange:$,onClose:()=>Qe(!1),isPro:!!y,upgradeForAccess:v})]})]})},aB=e=>{let{onDone:n}=e;const{apiConfiguration:i,version:r,alwaysAllowReadOnly:o,setAlwaysAllowReadOnly:s}=Ap(),[a,l]=(0,t.useState)(void 0),[c,d]=(0,t.useState)(void 0),u=(0,t.useCallback)((()=>{i?(Sp.postMessage({type:"apiConfiguration",apiConfiguration:i}),Sp.postMessage({type:"alwaysAllowReadOnly",bool:o}),n()):l("API configuration is required")}),[i,o,n]),h=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation();try{u()}catch(t){console.error("Change API model error:",t),l("Failed to change the model. Please try again.")}}),[u]);return(0,t.useEffect)((()=>{l(void 0),d(void 0)}),[i]),(0,Ip.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,padding:"10px 0px 0px 20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"17px",paddingRight:17},children:[(0,Ip.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"Settings"}),(0,Ip.jsx)("div",{children:(0,Ip.jsx)(ts,{onClick:h,onMouseDown:e=>e.preventDefault(),children:"Done"})})]}),a&&(0,Ip.jsx)("div",{style:{color:"var(--vscode-errorForeground)",marginBottom:"10px",padding:"8px",backgroundColor:"var(--vscode-inputValidation-errorBackground)",border:"1px solid var(--vscode-inputValidation-errorBorder)",borderRadius:"4px"},children:a}),(0,Ip.jsxs)("div",{style:{flexGrow:1,overflowY:"scroll",paddingRight:8,display:"flex",flexDirection:"column"},children:[(0,Ip.jsx)("div",{style:{marginBottom:5},children:(0,Ip.jsx)(ov,{showModelOptions:!0,apiErrorMessage:a,modelIdErrorMessage:c})}),(0,Ip.jsxs)("div",{style:{marginBottom:5},children:[(0,Ip.jsx)(ns,{checked:o,onChange:e=>s(e.target.checked),children:(0,Ip.jsx)("span",{style:{fontWeight:"500"},children:"Always approve read-only operations"})}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:"When enabled, BLACKBOX will automatically view directory contents and read files without requiring you to click the Approve button."})]}),(0,Ip.jsxs)("div",{style:{textAlign:"center",color:"var(--vscode-descriptionForeground)",fontSize:"12px",lineHeight:"1.2",marginTop:"auto",padding:"10px 8px 15px 0px"},children:[(0,Ip.jsxs)("p",{style:{wordWrap:"break-word",margin:0,padding:0},children:["If you have any questions or feedback, feel free to contact us at"," ",(0,Ip.jsx)(rs,{href:"mailto:team@blackbox.ai",style:{display:"inline"},children:"team@blackbox.ai"})]}),(0,Ip.jsxs)("p",{style:{fontStyle:"italic",margin:"10px 0 0 0",padding:0},children:["v",r]})]})]})]})},lB=(0,t.memo)(aB),cB=["chris","signal","stanfordmedical","neon","stellic","santiago","protrial"];const dB=Object.create(null);dB.open="0",dB.close="1",dB.ping="2",dB.pong="3",dB.message="4",dB.upgrade="5",dB.noop="6";const uB=Object.create(null);Object.keys(dB).forEach((e=>{uB[dB[e]]=e}));const hB={type:"error",data:"parser error"},pB="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),fB="function"===typeof ArrayBuffer,mB=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,gB=(e,t,n)=>{let{type:i,data:r}=e;return pB&&r instanceof Blob?t?n(r):vB(r,n):fB&&(r instanceof ArrayBuffer||mB(r))?t?n(r):vB(new Blob([r]),n):n(dB[i]+(r||""))},vB=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function bB(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let yB;const xB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kB="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)kB[xB.charCodeAt(n)]=n;const wB="function"===typeof ArrayBuffer,CB=(e,t)=>{if("string"!==typeof e)return{type:"message",data:TB(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:SB(e.substring(1),t)};return uB[n]?e.length>1?{type:uB[n],data:e.substring(1)}:{type:uB[n]}:hB},SB=(e,t)=>{if(wB){const n=(e=>{let t,n,i,r,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<a;t+=4)n=kB[e.charCodeAt(t)],i=kB[e.charCodeAt(t+1)],r=kB[e.charCodeAt(t+2)],o=kB[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|r>>2,d[l++]=(3&r)<<6|63&o;return c})(e);return TB(n,t)}return{base64:!0,data:e}},TB=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,EB=String.fromCharCode(30);function _B(){return new TransformStream({transform(e,t){!function(e,t){pB&&e.data instanceof Blob?e.data.arrayBuffer().then(bB).then(t):fB&&(e.data instanceof ArrayBuffer||mB(e.data))?t(bB(e.data)):gB(e,!1,(e=>{yB||(yB=new TextEncoder),t(yB.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let IB;function PB(e){return e.reduce(((e,t)=>e+t.length),0)}function RB(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function AB(e){if(e)return function(e){for(var t in AB.prototype)e[t]=AB.prototype[t];return e}(e)}AB.prototype.on=AB.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},AB.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},AB.prototype.off=AB.prototype.removeListener=AB.prototype.removeAllListeners=AB.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},AB.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},AB.prototype.emitReserved=AB.prototype.emit,AB.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},AB.prototype.hasListeners=function(e){return!!this.listeners(e).length};const MB="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),OB="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function NB(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const jB=OB.setTimeout,DB=OB.clearTimeout;function LB(e,t){t.useNativeTimers?(e.setTimeoutFn=jB.bind(OB),e.clearTimeoutFn=DB.bind(OB)):(e.setTimeoutFn=OB.setTimeout.bind(OB),e.clearTimeoutFn=OB.clearTimeout.bind(OB))}function FB(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class BB extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class UB extends AB{constructor(e){super(),this.writable=!1,LB(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new BB(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=CB(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class $B extends UB{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(EB),i=[];for(let r=0;r<n.length;r++){const e=CB(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,o)=>{gB(e,!1,(e=>{i[o]=e,++r===n&&t(i.join(EB))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=FB()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let zB=!1;try{zB="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Y$){}const VB=zB;function HB(){}class WB extends $B{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class qB extends AB{constructor(e,t,n){super(),this.createRequest=e,LB(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=NB(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(K$){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(K$){}try{n.setRequestHeader("Accept","*/*")}catch(K$){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(K$){return void this.setTimeoutFn((()=>{this._onError(K$)}),0)}"undefined"!==typeof document&&(this._index=qB.requestsCount++,qB.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=HB,e)try{this._xhr.abort()}catch(K$){}"undefined"!==typeof document&&delete qB.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(qB.requestsCount=0,qB.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",KB);else if("function"===typeof addEventListener){addEventListener("onpagehide"in OB?"pagehide":"unload",KB,!1)}function KB(){for(let e in qB.requests)qB.requests.hasOwnProperty(e)&&qB.requests[e].abort()}const GB=function(){const e=YB({xdomain:!1});return e&&null!==e.responseType}();function YB(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||VB))return new XMLHttpRequest}catch(K$){}if(!t)try{return new(OB[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(K$){}}const QB="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class XB extends UB{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=QB?{}:NB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(Y$){return this.emitReserved("error",Y$)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;gB(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(K$){}i&&MB((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=FB()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const JB=OB.WebSocket||OB.MozWebSocket;const ZB={websocket:class extends XB{createSocket(e,t,n){return QB?new JB(e,t,n):t?new JB(e,t):new JB(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends UB{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Y$){return this.emitReserved("error",Y$)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){IB||(IB=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===i){if(PB(n)<1)break;const e=RB(n,1);o=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(PB(n)<2)break;const e=RB(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(PB(n)<8)break;const e=RB(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(hB);break}r=o*Math.pow(2,32)+t.getUint32(4),i=3}else{if(PB(n)<r)break;const e=RB(n,r);a.enqueue(CB(o?e:IB.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(hB);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=_B();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then((()=>{i&&MB((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends WB{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=GB&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new qB(YB,this.uri(),e)}}},eU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nU(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=eU.exec(e||""),o={},s=14;for(;s--;)o[tU[s]]=r[s]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,o.query),o}const iU="function"===typeof addEventListener&&"function"===typeof removeEventListener,rU=[];iU&&addEventListener("offline",(()=>{rU.forEach((e=>e()))}),!1);class oU extends AB{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=nU(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=nU(t.host).host);LB(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),iU&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},rU.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&oU.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",oU.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,MB((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(oU.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),iU&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=rU.indexOf(this._offlineEventListener);-1!==e&&rU.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}oU.protocol=4;class sU extends oU{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;oU.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;oU.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,c(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class aU extends sU{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>ZB[e])).filter((e=>!!e))),super(e,t)}}const lU="function"===typeof ArrayBuffer,cU=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,dU=Object.prototype.toString,uU="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===dU.call(Blob),hU="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===dU.call(File);function pU(e){return lU&&(e instanceof ArrayBuffer||cU(e))||uU&&e instanceof Blob||hU&&e instanceof File}function fU(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(fU(e[t]))return!0;return!1}if(pU(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return fU(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&fU(e[n]))return!0;return!1}function mU(e){const t=[],n=e.data,i=e;return i.data=gU(n,t),i.attachments=t.length,{packet:i,buffers:t}}function gU(e,t){if(!e)return e;if(pU(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=gU(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=gU(e[i],t));return n}return e}function vU(e,t){return e.data=bU(e.data,t),delete e.attachments,e}function bU(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=bU(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=bU(e[n],t));return e}const yU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xU=5;var kU;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(kU||(kU={}));class wU{constructor(e){this.replacer=e}encode(e){return e.type!==kU.EVENT&&e.type!==kU.ACK||!fU(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===kU.EVENT?kU.BINARY_EVENT:kU.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==kU.BINARY_EVENT&&e.type!==kU.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=mU(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function CU(e){return"[object Object]"===Object.prototype.toString.call(e)}class SU extends AB{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===kU.BINARY_EVENT;n||t.type===kU.BINARY_ACK?(t.type=n?kU.EVENT:kU.ACK,this.reconstructor=new TU(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!pU(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===kU[n.type])throw new Error("unknown packet type "+n.type);if(n.type===kU.BINARY_EVENT||n.type===kU.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!SU.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(K$){return!1}}static isPayloadValid(e,t){switch(e){case kU.CONNECT:return CU(t);case kU.DISCONNECT:return void 0===t;case kU.CONNECT_ERROR:return"string"===typeof t||CU(t);case kU.EVENT:case kU.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===yU.indexOf(t[0]));case kU.ACK:case kU.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class TU{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=vU(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function EU(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const _U=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class IU extends AB{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[EU(e,"open",this.onopen.bind(this)),EU(e,"packet",this.onpacket.bind(this)),EU(e,"error",this.onerror.bind(this)),EU(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,i;if(_U.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const a={type:kU.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),s=function(){i.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];n(null,...o)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:kU.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case kU.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case kU.EVENT:case kU.BINARY_EVENT:this.onevent(e);break;case kU.ACK:case kU.BINARY_ACK:this.onack(e);break;case kU.DISCONNECT:this.ondisconnect();break;case kU.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];t.packet({type:kU.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:kU.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function PU(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}PU.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},PU.prototype.reset=function(){this.attempts=0},PU.prototype.setMin=function(e){this.ms=e},PU.prototype.setMax=function(e){this.max=e},PU.prototype.setJitter=function(e){this.jitter=e};class RU extends AB{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,LB(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new PU({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const r=n.parser||e;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new aU(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=EU(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=EU(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(EU(e,"ping",this.onping.bind(this)),EU(e,"data",this.ondata.bind(this)),EU(e,"error",this.onerror.bind(this)),EU(e,"close",this.onclose.bind(this)),EU(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(K$){this.onclose("parse error",K$)}}ondecoded(e){MB((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new IU(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const AU={};function MU(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=nU(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=AU[r]&&o in AU[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new RU(i,t):(AU[r]||(AU[r]=new RU(i,t)),a=AU[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(MU,{Manager:RU,Socket:IU,io:MU,connect:MU});let OU=e=>crypto.getRandomValues(new Uint8Array(e));const NU=(0,t.createContext)(void 0),jU=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(null),[o,s]=(0,t.useState)({}),[a,l]=(0,t.useState)({}),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)({}),[p,f]=(0,t.useState)([]),[m,g]=(0,t.useState)("disconnected"),v=(0,t.useRef)(null),b=(0,t.useRef)(null),y=(0,t.useRef)({}),x=(0,t.useRef)(null),k=(0,t.useRef)(i),w=(0,t.useRef)(!1),C=(0,t.useRef)(u),S=(0,t.useRef)([]),T=(0,t.useRef)({}),E=(0,t.useRef)(!1),_=(0,t.useRef)(null),I=(0,t.useRef)({}),P=(0,t.useRef)({}),R=(0,t.useRef)(!0),A=(0,t.useRef)(null),M=e=>{A.current&&(A.current(),A.current=null),A.current=e},O=()=>!!k.current||(console.error("Socket not initialized"),!1),N=(e,t)=>{oe(e,t)},j=()=>b.current?b.current:localStorage.getItem("chatRoomUserId")?localStorage.getItem("chatRoomUserId"):"",D=()=>localStorage.getItem("chatRoomUserName")?localStorage.getItem("chatRoomUserName"):"",{audioRoomId:L,isAudioMuted:F,isRecording:B,handleExtensionMessageForAudio:U,audioRoomCallInProgressRef:$,setupAudioSocketEvents:z,removeAudioSocketEvents:V,installAudioCallPluggin:H,initializeAudioCallPluggin:W,closeAudioCallPluggin:q,getAudioPlugginInitialized:K,audioCreateRoom:G,audioJoinRoom:Y,audioLeaveRoom:Q,audioToggleMute:X,sendVSCodeMessageToExtension:J,startAudioRinging:Z,stopAudioRinging:ee}=function(e){let{socketInitialized:n,sendCallback:i,getUserId:r,getUserName:o}=e;const[s,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),h=(0,t.useRef)(null),p=(0,t.useRef)(!1),f=(0,t.useRef)(!1),m=(0,t.useRef)(null),g=(0,t.useRef)(!1),v=(0,t.useRef)(!1);(0,t.useEffect)((()=>{s&&(h.current=s)}));const b=e=>{n$.log("In onAudioRoomCreated"),i("audioRoomCreated",e)},y=e=>{const{roomId:t}=e;n$.log("In onAudioRoomJoined"),i("audioRoomJoined",t)},x=e=>{const{userId:t}=e;n$.log("In onAudioUserJoined"),i("audioUserJoined",t)},k=e=>{const{socketId:t,userId:n}=e;n$.log("In onAudioUserLeft"),i("audioUserLeft",{socketId:t,userId:n})},w=e=>{n$.log("In onAudioLeftRoom"),i("audioLeftRoom",e),a(null)},C=e=>{n$.log("In onAudioCallNotification");const{socketId:t}=e;e.isCurrentUser=!1,i("audioCallNotification",e)},S=e=>{n$.log("In onAudioCallDisconnected"),i("audioCallDisconnected",e)},T=e=>{l&&(c(!1),i("audioMuteChanged",{isMuted:!1,roomId:e}))},E=()=>{u(!1)},_=(e,t)=>{const n=t?{...t,type:e}:{type:e};Sp.postMessage({type:"groupAudioType",data:n})},I=(e,t)=>{n$.info("Stopping ringing from "+e),g.current=!1,_("stop-ringing-tone"),t&&t(),m.current&&(clearTimeout(m.current),m.current=null)};return{audioRoomId:s,isAudioMuted:l,isRecording:d,audioRoomCallInProgressRef:f,handleExtensionMessageForAudio:e=>{const t=e.data;if("audioData"===t.type){const e=t.data;switch(e.type){case"audio-pluggin-initialized":n$.log("Audio Pluggin Initialized"),_("audio-initialize"),p.current=!0,setTimeout((()=>{i("audioPlugginInitialized")}),500);break;case"audio-room-created":b(e);break;case"audio-room-joined":y(e);break;case"audio-user-joined":x(e);break;case"audio-user-left":k(e);break;case"audio-left-room":w(e);break;case"audio-pluggin-installation-error":i("audioPlugginInstallationError",e);break;case"audio-pluggin-initialized-error":i("audioPlugginInitializedError",e);break;case"audio-pluggin-error":i("audioPlugginError",e)}}},setupAudioSocketEvents:e=>{e.on("audio-call-notification",C),e.on("audio-call-disconnected",S)},removeAudioSocketEvents:e=>{e.off("audio-call-notification",C),e.off("audio-call-disconnected",S)},installAudioCallPluggin:()=>{v.current||(_("install-audio-pluggin"),v.current=!0)},initializeAudioCallPluggin:()=>{_("initialize-audio-pluggin")},closeAudioCallPluggin:()=>{_("close-audio-pluggin"),p.current=!1},getAudioPlugginInitialized:()=>!!p.current,audioCreateRoom:e=>{try{if(!n())return;T(e),_("audio-create-room",{roomId:GU(e)}),u(!0),a(e)}catch(t){console.error("Error creating audio room:",t)}},audioJoinRoom:async e=>{try{if(!n())return;if(!e.trim())throw new Error("Room ID is required");T(e),_("audio-join-room",{roomId:GU(e)}),u(!0),a(e)}catch(t){console.error("Error joining room:",t)}},audioLeaveRoom:e=>{try{if(!n())return;if(!e.trim())throw new Error("Room ID is required");E(),_("audio-leave-room",{roomId:GU(e)})}catch(t){console.error("Error leaving room:",t)}a(null)},audioLeaveAllRooms:()=>{},audioToggleMute:e=>{const t=!l;_(l?"audio-unmute":"audio-mute",{roomId:GU(e)}),c(t),i("audioMuteChanged",{isMuted:t,roomId:e})},sendVSCodeMessageToExtension:_,startAudioRinging:(e,t,n)=>{g.current||(n$.info("Starting ringing from "+e),_("play-ringing-tone"),t&&t(),m.current&&clearTimeout(m.current),g.current=!0,m.current=setTimeout((()=>{I(e,n),n$.info("The call was not answered within the time frame so disconnecting the audio sound")}),3e4))},stopAudioRinging:I}}({socketInitialized:O,sendCallback:N,getUserId:j,getUserName:D});(0,t.useEffect)((()=>{function e(e){const t=e.data;if("action"===t.type)switch(t.action){case"didBecomeVisible":R.current=!0;break;case"didBecomeInvisible":R.current=!1}U(e)}return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[]),(0,t.useEffect)((()=>{let e=null===k.current;k.current=i,e&&N("initialized",{socket:k.current})}),[i]),(0,t.useEffect)((()=>{k.current=i}),[i]),(0,t.useEffect)((()=>{C.current=u}),[u]),(0,t.useEffect)((()=>{y.current||(y.current={}),y.current=o,S.current=p,x.current=c}));const te=async()=>{let e=0;const t={autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:3e3,timeout:3e4};return new Promise(((n,i)=>{g("connecting");const o=MU("https://websocket-messaging-2.onrender.com",t),s=()=>{ie(o),o.disconnect()};o.once("connect",(()=>{g("connected"),v.current||(v.current=D());const e=v.current;b.current||(b.current=j());const t=b.current;n$.log(`Connected to server with socket ID: ${o.id} and username: ${e} and userId: ${t}`),e&&t?(w.current=!0,o.emit("user_connected",{username:e,userId:t})):n$.log(`Socket not connected to server with socket ID: ${o.id} and username: ${e} and userId: ${t}`),ne(o),r(o),k.current=o,n(s)})),o.on("connect_error",(t=>{n$.error(`Connection error: ${t}`),e<5?(e++,g("connecting"),setTimeout((()=>{o.connect()}),2e3)):(g("error"),N("connection_error",{message:"Unable to connect to server after multiple attempts."}),i(new Error("Unable to connect to server after multiple attempts.")))})),o.on("disconnect",(()=>{g("disconnected"),n$.log(`Socket disconnected: ${o.id}`)}))}))},ne=e=>{e.on("connect_error",se),e.on("error_message",ae),e.on("receive_message",le.bind(null,e)),e.on("user_list",ce),e.on("room_list",de),e.on("user_rooms",ue),e.on("users_in_room",he),e.on("message_history",pe),e.on("message_history_pages",fe),e.on("room_deleted",me),e.on("room_created",ge),e.on("joined_room",ve),e.on("new_message_notification",be),z(e)},ie=e=>{e.off("connect_error",se),e.off("error_message",ae),e.off("receive_message",le),e.off("user_list",ce),e.off("room_list",de),e.off("user_rooms",ue),e.off("users_in_room",he),e.off("message_history",pe),e.off("message_history_pages",fe),e.off("room_deleted",me),e.off("room_created",ge),e.off("joined_room",ve),e.off("new_message_notification",be),V(e)},re=["newMessageNotification"],oe=(e,t)=>{T.current[e]&&T.current[e].forEach((n=>{n(t,e)})),re.includes(e)&&((e,t)=>{const n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)})(e,t)},se=e=>{console.error("Connection error:",e),N("connect_error",e)},ae=e=>{console.error("Error:",e.message,e.error),N("error_message",e)},le=(e,t)=>{if(t.affectedUserId===j()&&"system"===t.messageType)return;n$.log(e.id);const n={id:(t.id||t.time)+"",name:t.author,createdAt:new Date(t.time),content:t.message,role:t.role||"group",userId:t.userId||"",room:t.room,messageType:t.messageType,file:t.file,modelName:t.modelName,parentContent:t.parentContent,parentId:t.parentId,repliedMessage:t.repliedMessage},i=t.author===v.current;N("beforeNewMessageAdded",{message:n,isCurrentUserSender:i});let r=u[t.room];r||(r=C.current[t.room]);let a=o[t.room]||[],l=a[a.length-1];if(WU(n,l)||s((e=>({...e,[t.room]:[...e[t.room]||[],n]}))),r&&(a=r.messagesRef.current||[],l=a[a.length-1],!WU(n,l))){const e=[...r.messagesRef.current,n];r.setRoomMessages(e),N("newMessageReceived",{message:n,isCurrentUserSender:i})}},ce=e=>{let{room:t,users:n}=e;n$.log("user_list:",t,n),l((e=>({...e,[t]:n}))),N("userListUpdated",{room:t,users:n})},de=e=>{n$.log("Available rooms:",e),N("roomListUpdated",e)},ue=e=>{n$.log("User is part of rooms:",e),f(e),N("userRooms",e)},he=e=>{n$.log(`Users in room ${e.room} is ${e.users}`);const{room:t,users:n}=e;if((null===n||void 0===n?void 0:n.length)>0){const i=n.filter((e=>e&&e.username&&""!==e.username.trim()));e.users=i,l((e=>({...e,[t]:i.map((e=>e.username))})))}else l((e=>({...e,[t]:[]})));N("userListUpdated",e)},pe=e=>{let{room:t,messages:n,totalMessages:i}=e;const r=n.map((e=>({id:e.id||e.time,room:e.room,name:e.author,createdAt:new Date(e.time),content:e.message,role:e.role||"group",userId:e.userId||"",messageType:e.messageType,file:e.file,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage})));s((e=>({...e,[t]:r})));let o=u[t];o||(o=C.current[t]),o&&o.setRoomMessages(r),N("messageHistory",{room:t,messages:r,totalMessages:i})},fe=e=>{let{room:t,messages:n,page:i,pageSize:r,totalMessages:a}=e;if(n&&n.length>0){var l,c,d,h;const e=n.map((e=>({id:e.id||e.time,name:e.author,createdAt:new Date(e.time),content:e.message,role:e.role||"group",userId:e.userId||"",messageType:e.messageType,file:e.file,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage})));n$.log("---------------------",null===(l=o[t])||void 0===l?void 0:l.length,null===(c=y.current)||void 0===c||null===(d=c[t])||void 0===d?void 0:d.length);const p=(null===(h=y.current)||void 0===h?void 0:h[t])||[];y.current||(y.current={});const f=[...e,...p];s((e=>({...e,[t]:f}))),y.current[t]=f,n$.log(`Room has ${a} messages and we have ${f.length} messages`);const m=u[t]||C.current[t];m&&m.setRoomMessages(f),N("messageHistoryPages",{room:t,messages:e,page:i,pageSize:r,totalMessages:a,allMessages:f})}},me=e=>{let{room:t}=e;n$.log(`Room deleted: ${t}`),l((e=>{const{[t]:n,...i}=e;return i})),s((e=>{const{[t]:n,...i}=e;return i})),N("roomDeleted",t)},ge=e=>{let{room:t}=e;n$.log(`New room created: ${t}`),N("roomCreated",t)},ve=e=>{let{room:t}=e;n$.log(`Joined room: ${t}`),N("roomJoined",t)},be=e=>{let{room:t,message:n}=e;n$.log(`New Notification received for room ${t}`),I.current[t]=(I.current[t]||0)+1,KU(t,n),N("newMessageNotification",{room:t,message:n})},ye=e=>{if(VU(e)){const t=e.content;return LU(t)||""}return""},xe=e=>`vscode://${P.current.extensionPublisher||"Blackboxapp"}.${P.current.extensionName||"blackboxagent"}/${e}`,ke={initialize:te,connectionStatus:m,createRoom:async(e,t,n,i)=>{const r=JU(),o=GU(e)+"-"+r;if(v.current=t,b.current=n,!O())return n$.error("Socket not initialized"),Promise.reject("Socket not initialized");t||console.error("username is null from createRoom");let s=null;return i&&i.length>0&&(s=[],i.forEach(((e,r)=>{var a;const l=new Date;let c=e.messageType;if(!c)if("user"===e.role)c="toBot";else if("assistant"===e.role){const t=i[r-1];e.parentContent=t.content,e.parentId=t.id;let n=LU(t.content);n||(n="BLACKBOXAI"),e.modelName=n,c="fromBot"}let d=e.file;if(!d&&e.data&&e.data.imageBase64){const t=e.data;d={},d.data=t.imageBase64,d.type=ZU(d.data),d.name=t.title||"image.jpg"}const u={id:(e.id||l.getTime()).toString(),room:o,author:e.name||t||"User",userId:n,time:l.toISOString(),message:e.content,role:e.role||"group",messageType:c,file:d,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage};null===(a=s)||void 0===a||a.push(u)})),n$.log(s)),new Promise(((e,i)=>{k.current.emit("create_room",{room:o,username:t,userId:n,initialMessages:s}),d(o),e(o)}))},getSocket:()=>k.current?k.current:null,joinRoom:function(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;if(v.current=t,b.current=n,!O())return n$.error("Socket not initialized"),void N("connection_error",{message:"Socket not connected. Please check your connection."});t||console.error("username is null from createRoom"),e=GU(e),d(e),null===(i=k.current)||void 0===i||i.emit("join_room",{room:e,username:t,userId:n,page:r,pageSize:o})},getUserListForRoom:e=>(e=GU(e),a[e]||[]),handleGroupMessage:(e,t,n,i)=>{if(!k.current)return void console.error(`Socket not found for room: ${e}`);e=GU(e);const r=new Date,o={id:(t.id||r.getTime()).toString(),room:e,author:t.name||"User",userId:t.userId||j(),time:r.toISOString(),message:t.content,role:t.role||"group",messageType:t.messageType,file:t.file,modelName:t.modelName,parentContent:t.parentContent,parentId:t.parentId,repliedMessage:t.repliedMessage};h((t=>({...t,[e]:{messagesRef:i,setRoomMessages:n}}))),k.current.emit("send_message",o)},isGroupMessage:e=>{if(e){let t="";if(t="object"===typeof e?e.content:e,!t||!t.trim())return!0;if(!t.includes("@"))return!0;if(!LU(t))return!0}return!1},isUserInRoom:(e,t)=>{e=GU(e);return(a[e]||[]).includes(t)},currentRoomId:c,getUserRooms:e=>{var t;O()&&(null===(t=k.current)||void 0===t||t.emit("get_user_rooms",{username:e,userId:j()}))},getUsersInRoom:e=>{var t;O()&&(e=GU(e),null===(t=k.current)||void 0===t||t.emit("get_user_in_rooms",{room:e}))},getRoomMessages:(e,t,n)=>{var i;O()&&(e=GU(e),h((i=>({...i,[e]:{messagesRef:n,setRoomMessages:t}}))),null===(i=k.current)||void 0===i||i.emit("get_room_messages",{room:e,userId:j(),username:D()}))},getRoomMessagesByPage:function(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;O()&&(e=GU(e),h((i=>({...i,[e]:{messagesRef:n,setRoomMessages:t}}))),null===(i=k.current)||void 0===i||i.emit("get_room_messages_pages",{room:e,page:r,pageSize:o,userId:j(),username:D()}))},extractRoomIdFromUrl:()=>{const e=window.location.href.match(/\/chat\/room\/([^/]+)$/);if(e){return GU(e[1])}return null},getUserId:j,setUserId:e=>{e&&(b.current=e,localStorage.setItem("chatRoomUserId",e),N("groupUserIdSet",e))},getUserName:D,setUserName:e=>{if(localStorage.setItem("chatRoomUserName",e),!w.current&&e){var t;b.current||(b.current=j());const n=b.current;n$.log(`Connected to server with socket ID: ${null===(t=k.current)||void 0===t?void 0:t.id} and username: ${e} and userId: ${n} from setUserName`),n&&M(te())}N("groupUserNameSet",e)},isBotMessage:$U,isFromBotMessage:zU,isToBotMessage:VU,isUserMessage:HU,getSetModelType:(e,t,n)=>{if(e&&"assistant"===e.role&&t.length>n&&!e.modelName){const i=t[n-1],r=ye(i);return e.modelName=r,r}return""},getModelType:ye,isOpeningInVSCode:E,sanitizeUrlString:GU,replyToMessage:_,setReplyToMessage:e=>{_.current=e,N("replyToMessage",_.current)},updateLastReadMessage:e=>{I.current[e]=0,k.current&&(KU(e,null),k.current.emit("update_last_read_message",{room:e,userId:j(),username:D()}))},installAudioCallPluggin:H,initializeAudioCallPluggin:W,closeAudioCallPluggin:q,getAudioPlugginInitialized:K,audioRoomCallInProgressRef:$,audioCreateRoom:G,audioJoinRoom:Y,audioLeaveRoom:Q,audioToggleMute:X,clearRoomData:e=>{s((t=>({...t,[e]:[]}))),h((t=>({...t,[e]:null}))),C.current[e]=null},sendCallback:N,addVSCodeData:e=>{e&&(P.current={...P.current,...e})},getVSCodeChatRoomLink:e=>{if(e){return xe(`join?roomId=${encodeURIComponent(e)}`)}return""},getVSCodeShowRoomsLink:()=>xe("chatrooms"),sendVSCodeMessageToExtension:J,startAudioRinging:Z,stopAudioRinging:ee,getIsExtensionActive:()=>R.current,playMessageReceivedNotification:()=>{J("play-audio-notification")},setVisitedChat:()=>{n$.log("Setting visited chat"),localStorage.setItem("group-chat-rooms-visited","true")},getVisitedChat:()=>localStorage.getItem("group-chat-rooms-visited")&&"true"===localStorage.getItem("group-chat-rooms-visited")?(n$.log("Returning visited chat as true"),!0):(n$.log("Returning visited chat as false"),!1),setCleanup:M,getCleanup:()=>A.current,addEventListener:(e,t)=>{T.current[e]||(T.current[e]=new Set),T.current[e].add(t)},removeEventListener:(e,t)=>{T.current[e]&&(T.current[e].delete(t),0===T.current[e].size&&delete T.current[e])},addCustomEventListener:(e,t)=>{document.addEventListener(e,t)},removeCustomEventListener:(e,t)=>{document.removeEventListener(e,t)}};return(0,Ip.jsx)(NU.Provider,{value:ke,children:n})},DU=()=>{const e=(0,t.useContext)(NU);if(!e)throw new Error("useGroupChatRooms must be used within a GroupChatProvider");return e},LU=e=>e.toLowerCase().includes("@gpt-4o")||window.location.href.toLocaleLowerCase().includes("gpt-4o")?"GPT-4o":e.toLowerCase().includes("@gemini-pro")||window.location.href.toLocaleLowerCase().includes("gemini-pro")?"Gemini-Pro":e.toLowerCase().includes("@claude-sonnet-3.5")||window.location.href.toLocaleLowerCase().includes("claude-sonnet-3.5")?"Claude-Sonnet-3.5":e.toLowerCase().includes("@blackboxai")||e.toLowerCase().includes("@blackbox.ai")||window.location.href.toLocaleLowerCase().includes("blackboxai")?"BLACKBOX.AI":e.toLowerCase().includes("@blackboxai-pro")||e.toLowerCase().includes("@blackbox.ai-pro")||window.location.href.toLocaleLowerCase().includes("blackboxai-pro")?"BLACKBOX.AI-PRO":null;function FU(e){if(e){const t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date format.",e),"";const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=n.getTime()-t.getTime(),s=Math.floor((i.getTime()-r.getTime())/864e5),a=Math.floor(o/6e4),l=Math.floor(o/36e5);return a<1&&0===l&&0===s?"Just now":0===s?l>0?`${l}h ago`:`${a}m ago`:1===s?`Yesterday at ${BU(t)}`:BU(t)}return""}function BU(e){return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}function UU(e,t,n){return t===n?"You":e}const $U=e=>!(!e||"fromBot"!==e.messageType&&"toBot"!==e.messageType),zU=e=>!(!e||"fromBot"!==e.messageType),VU=e=>!(!e||"toBot"!==e.messageType),HU=e=>!(!e||"group"!==e.role&&"user"!==e.role),WU=(e,t)=>!!(e&&t&&e.id&&t.id&&e.id===t.id)&&(n$.log("Received same message",e),!0),qU=()=>{localStorage.removeItem("group-chat-rooms")},KU=(e,t)=>{const n=(()=>{let e=localStorage.getItem("group-chat-rooms");if(e){const t=JSON.parse(e);(new Date).getTime()>t.expiry&&(qU(),e=null)}return e})();if(n){const i=JSON.parse(n),r=i.value;if(r&&r.length){const n=[];r.map((i=>{i.name===e&&(i.latestMessages=i.latestMessages&&i.latestMessages.length?i.latestMessages.push(t):[t]),n.push(i)})),i.value=n,localStorage.setItem("group-chat-rooms",JSON.stringify(i))}}},GU=e=>decodeURIComponent(e),YU=(e,t,n)=>{if(!e)return;const i=e.scrollTop,r=t-i,o=performance.now(),s=t=>{const a=t-o,l=Math.min(a/500,1),c=l*(2-l);e.scrollTop=i+r*c,a<500?requestAnimationFrame(s):"function"===typeof n&&n()};requestAnimationFrame(s)},QU=e=>{if(e.includes("-")){return e.split("-").slice(0,-1).join("-")}return e},XU=function(e){return((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*i*t/e.length);return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s="";for(;;){let t=n(r),a=0|r;for(;a--;)if(s+=e[t[a]&i]||"",s.length===o)return s}}})(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,OU)}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",15),JU=()=>`${XU()}${Date.now()}`,ZU=e=>{const t=e.match(/^data:(.+);base64,/);return t?t[1]:null},e$=e=>{const t=e=>{var t,n;const i=null!==(t=null!==(n=e.createdAt)&&void 0!==n?n:e.time)&&void 0!==t?t:null;if(!i)return null;let r;if("string"===typeof i)r=new Date(i);else{if(!(i instanceof Date))return null;r=i}return isNaN(r.getTime())?null:r};return[...e].sort(((e,n)=>{const i=e.latestMessages&&e.latestMessages.length>0,r=n.latestMessages&&n.latestMessages.length>0;if(i&&!r)return-1;if(!i&&r)return 1;if(i&&r){const i=e.latestMessages[e.latestMessages.length-1],r=n.latestMessages[n.latestMessages.length-1],o=t(i),s=t(r);return o&&s?s.getTime()-o.getTime():o&&!s?-1:!o&&s?1:0}if(!i&&!r){const i=e.lastMessage?t(e.lastMessage):null,r=n.lastMessage?t(n.lastMessage):null;return i&&r?r.getTime()-i.getTime():i&&!r?-1:!i&&r?1:0}return 0}))},t$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const i=[];let r=0;for(;r<e.length;)i.push(e.substring(r,r+t)),r+=t;return i.length>n?i.slice(0,n).join("\n")+"...":i.join("\n")};const n$={log:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},info:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},warn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},error:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},debug:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]}},i$=e=>{var n;let{groupRoom:i,handleChatRoomClick:r}=e;const o=()=>{var e;return i.lastMessage?null===(e=i.lastMessage)||void 0===e?void 0:e.time:null},[s,a]=(0,t.useState)(FU(o()));return(0,t.useEffect)((()=>{let e=null;return i.lastMessage&&(e=setInterval((()=>{a(FU(o()))}),5e3)),()=>{e&&clearInterval(e)}}),[i.lastMessage]),(0,Ip.jsx)("div",{className:"group-chat-room-item","data-group-id":i.name,onClick:e=>r(i.name,i,e),children:i.lastMessage?(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"12px",position:"relative"},children:[(0,Ip.jsxs)("div",{className:"room-name-con",children:[(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:"10px"},children:(0,Ip.jsx)("div",{className:"group-chat-room-item-room-name",children:QU(i.name)})}),(0,Ip.jsx)("div",{className:"room-name-date",children:s})]}),(0,Ip.jsxs)("div",{className:"room-name-con",style:{gap:"10px"},children:[(0,Ip.jsxs)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-foreground)",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:[i.lastMessage.author,": ",null===(n=i.lastMessage)||void 0===n?void 0:n.message]}),i.latestMessages&&i.latestMessages.length>0&&(0,Ip.jsx)("div",{className:"indicator-container",children:(0,Ip.jsx)("div",{className:"message-indicator",children:i.latestMessages.length})})]}),(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap"}})})})]}):(0,Ip.jsxs)("div",{style:{padding:"12px",display:"flex"},children:[(0,Ip.jsx)("div",{children:(0,Ip.jsx)("span",{className:"group-chat-room-item-room-name",children:QU(i.name)})}),i.latestMessages&&i.latestMessages.length>0&&(0,Ip.jsx)("div",{className:"indicator-container",children:(0,Ip.jsx)("div",{className:"message-indicator",children:i.latestMessages.length})})]})},i.name)},r$=e=>{let{groupRooms:t,handleChatRoomClick:n}=e;return(0,Ip.jsx)("div",{className:"scrollable-section",style:{maxHeight:"87vh",overflowY:"auto"},children:t&&t.length>0?t.map((e=>(0,Ip.jsx)(i$,{groupRoom:e,handleChatRoomClick:n}))):(0,Ip.jsx)("div",{className:"no-rooms-message",children:"No rooms available. Please Create or join a room to get started!"})})},o$=e=>{let{onCreate:n,userName:i,resetData:r,setResetData:o}=e;const[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(i||"");(0,t.useEffect)((()=>{r&&(a(""),c(i||""),o(!1))}),[r]);const d=()=>{s.trim()&&l.trim()&&n(s,l)};return(0,Ip.jsxs)("form",{className:"create-room-form",onSubmit:e=>e.preventDefault(),children:[(0,Ip.jsx)(ps,{className:"form-field",placeholder:"Enter Room Name",value:s,onInput:e=>a(e.currentTarget.value)}),!i&&(0,Ip.jsx)(ps,{className:"form-field",placeholder:"Enter User Name",value:l,onInput:e=>c(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),d())}}),(0,Ip.jsx)(ts,{appearance:"primary",onClick:d,children:"Create Room"})]})},s$=e=>{let{isVisible:n,onClose:i,title:r,children:o,closeOnClickOutside:s=!0}=e;const a=(0,t.useRef)(null);if((0,t.useEffect)((()=>{const e=e=>{if("Escape"===e.key&&i(),"Tab"===e.key&&a.current){const t=a.current.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1];e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus()),e.shiftKey&&document.activeElement===n&&(e.preventDefault(),i.focus())}};return n&&(window.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[n,i]),!n)return null;return(0,Ip.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&s&&i()},children:(0,Ip.jsxs)("div",{className:"modal-content",role:"dialog","aria-modal":"true","aria-labelledby":r?"modal-title":void 0,ref:a,tabIndex:-1,children:[(0,Ip.jsxs)("div",{className:"modal-header",children:[r&&(0,Ip.jsx)("h2",{className:"modal-title",id:"modal-title",children:r}),(0,Ip.jsx)("button",{className:"modal-close-button",onClick:i,"aria-label":"Close Modal",children:"\xd7"})]}),(0,Ip.jsx)("div",{className:"modal-body",children:o})]})})},a$=e=>{let{onJoin:n,userName:i,resetData:r,setResetData:o}=e;const[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(i||"");(0,t.useEffect)((()=>{r&&(a(""),c(i||""),o(!1))}),[r,i,o]);return(0,Ip.jsxs)("form",{className:"join-room-form",onSubmit:e=>e.preventDefault(),children:[(0,Ip.jsx)(ps,{className:"form-field",placeholder:"Enter Room Code or Room Url",value:s,onInput:e=>a(e.currentTarget.value)}),!i&&(0,Ip.jsx)(ps,{className:"form-field",placeholder:"Enter User Name",value:l,onInput:e=>c(e.currentTarget.value)}),(0,Ip.jsx)(ts,{style:{width:"100%",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:()=>{s.trim()&&l.trim()&&n(s,l)},children:"Join Room"})]})},l$=e=>{let{showMessagesForRoom:n,isVisible:i,isParentHidden:r,paramData:o,isFromChatView:s,setIsFromChatView:a}=e;const[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),x=(0,t.useRef)([]),k=(0,t.useRef)(null),w=(0,t.useRef)(!0),[C,S]=(0,t.useState)(!1),T=(0,t.useRef)(null),E=(0,t.useRef)(!1),_=(0,t.useRef)(r),I=(0,t.useRef)(i);(0,t.useEffect)((()=>{x.current=d}));const{initialize:P,connectionStatus:R,joinRoom:A,createRoom:M,getUserId:O,setUserId:N,getUserName:j,setUserName:D,sanitizeUrlString:L,getUserRooms:F,updateLastReadMessage:B,addVSCodeData:U,getVSCodeChatRoomLink:$,getVSCodeShowRoomsLink:z,sendVSCodeMessageToExtension:V,installAudioCallPluggin:H,startAudioRinging:W,stopAudioRinging:q,getIsExtensionActive:K,audioRoomCallInProgressRef:G,playMessageReceivedNotification:Y,setVisitedChat:Q,getVisitedChat:X,setCleanup:J,getCleanup:Z,addEventListener:ee,removeEventListener:te}=DU(),ne=async()=>{if(!E.current&&O()){n$.log("Initializing WebSocket...");const e=await P();return Q(),E.current=!0,J(e),e}return null},ie=()=>{X()&&O()&&ne()};(0,t.useEffect)((()=>{const e=(e,t)=>{if("initialized"===t)se();else if("roomJoined"===t){n(e)}else if("userRooms"===t){if(e&&e.length>0){let t=e.map((e=>({name:L(e.room),latestMessages:ae(e.latestMessages),lastMessage:e.lastMessage,users:null,loading:!0})));if(t=e$(t),u(t),w.current){let e=0;if(t&&t.length>0&&t.forEach((t=>{t.latestMessages&&t.latestMessages.length>0&&(e+=t.latestMessages.length)})),e>0){const t={message:`You have ${e} unread messages in Blackbox chat app.`,url:z(),messageType:"unreadMessages"};Sp.postMessage({type:"showMessage",data:t})}w.current=!1}n$.log(t),(e=>{if(e&&e.length>0){const n=30,i={value:e,expiry:(new Date).getTime()+60*n*1e3};try{localStorage.setItem("group-chat-rooms",JSON.stringify(i))}catch(t){console.error(t)}}})(t)}}else if("newMessageNotification"===t){const{room:t,message:n}=e;if(n$.log("------------------- newMessageNotification ",t,n),!k.current||k.current!==t){le(t,n);const e=`${n.author}: ${n.message}`,i=`New message from ${n.author} in ${QU(t)}: ${n.message}`,r={title:"Blackbox Notification for New Message",body:e,roomId:t,message:t$(i),url:$(t),messageType:"groupChatMessage"};Y(),Sp.postMessage({type:"showMessage",data:r})}}else if("goingBackToChatRoom"===t){le(e,null),k.current=null}else if("chatSetRoomId"===t){const t=e;t&&(k.current=t)}else if("audioCallNotification"===t){const{roomId:t}=e;n$.log(`In audioCallNotification Outer Most Component with isVisible ${i} and ${C}\n                    and isParentHidden ${_.current}`),K()?_.current?(n$.log("Call Notification Received In Outer Most Component when Parent is Hidden"),re(t)):K()&&!_.current&&I.current&&(n$.log("Call Notification Received In Outer Most Component when Outer Most Component is visible"),re(t)):(n$.log("Call Notification Received In Outer Most Component when Extension is not Active"),re(t))}else if("audioPlugginInstallationError"===t)n$.log("Error installing audio plugin");else if("error_message"===t){const{message:t,error:n}=e;console.error(t,n)}},t=e=>{T.current&&T.current.contains(e.target)&&S(!0)},r=e=>{T.current&&!T.current.contains(e.relatedTarget)&&S(!1)};let o;return ee("initialized",e),ee("roomJoined",e),ee("newMessageNotification",e),ee("userRooms",e),ee("goingBackToChatRoom",e),ee("chatSetRoomId",e),ee("audioCallNotification",e),ee("audioPlugginInitializedError",e),ee("error_message",e),ie(),X()&&(o=setInterval((()=>{E.current?clearInterval(o):(ie(),E.current&&clearInterval(o))}),1e3)),document.addEventListener("focusin",t),document.addEventListener("focusout",r),()=>{te("initialized",e),te("roomJoined",e),te("newMessageNotification",e),te("userRooms",e),te("goingBackToChatRoom",e),te("chatSetRoomId",e),te("audioCallNotification",e),te("audioPlugginInitializedError",e),te("error_message",e),clearInterval(o),J(null),document.removeEventListener("focusin",t),document.removeEventListener("focusout",r)}}),[]),(0,t.useEffect)((()=>{"connected"===R&&se()}),[R]),(0,t.useEffect)((()=>{I.current=i}),[i]),(0,t.useEffect)((()=>{_.current=r,r||(!O()&&null!==o&&void 0!==o&&o.userId&&N(o.userId),O()?(n$.log("Socket Initaized status is "+E.current),ne()):n$.log("UserId is not set yet"),H())}),[r]),(0,t.useEffect)((()=>{U(o),o&&o.userId&&N(o.userId)}),[o]),(0,t.useEffect)((()=>{s&&(x.current&&x.current.length>0&&u(x.current),a(!1))}),[s]);const re=e=>{n$.log("In startAudioCall in Outer Most Component"),G.current||(n$.log("In startAudioCall in Outer Most Component - audioRoomCallInProgressRef.current"),oe(e),ce())},oe=e=>{const t=`Audio call has been started in ${QU(e)}`,n={title:"Blackbox Notification for Audio Call",body:t,roomId:e,message:t$(t),url:$(e),messageType:"groupChatMessage"};Sp.postMessage({type:"showMessage",data:n})},se=()=>{j()&&F(j())},ae=e=>{if(e&&e.length>0){const t=[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.userId===O())break;t.push(i)}return t}return null},le=(e,t)=>{n$.log("updateRoomForMessage:",e,t);let n=[];x.current.map((i=>{i.name===e&&(t?(i.lastMessage=t,i.latestMessages=i.latestMessages?[...i.latestMessages,t]:[t],i.latestMessages=ae(i.latestMessages)):i.latestMessages=null),n.push(i)})),n=e$(n),n$.log("updateRoomForMessage newRooms is :",n),u([...n])},ce=()=>{W("ChatCallMembersIcon")};return(0,Ip.jsx)(Ip.Fragment,{children:i&&(0,Ip.jsxs)("div",{ref:T,children:[(0,Ip.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",margin:"10px 20px",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Ip.jsx)("span",{className:"codicon codicon-comment-discussion",style:{marginRight:"4px",transform:"scale(0.9)"}}),(0,Ip.jsx)("span",{style:{fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:"Chat Rooms"})]}),(0,Ip.jsxs)("div",{style:{padding:"0px 20px 20px 20px",display:"flex",flexDirection:"column",gap:"10px"},children:[(0,Ip.jsx)(ts,{style:{width:"100%"},appearance:"primary",onClick:()=>{p(!0)},children:"Create Room"}),(0,Ip.jsx)(ts,{style:{width:"100%",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:()=>{v(!0)},children:"Join Room"})]}),(0,Ip.jsx)(r$,{groupRooms:d,handleChatRoomClick:(e,t,i)=>{i.preventDefault(),k.current=e,B(e),le(e,null),n(e)}}),(0,Ip.jsx)(s$,{isVisible:h,onClose:()=>{p(!1)},title:"Create Room",closeOnClickOutside:!0,children:(0,Ip.jsx)(o$,{onCreate:async(e,t)=>{n$.log("Create Room:",{roomName:e,userName:t}),c(!0);try{qU(),"connected"!==R&&await ne(),D(t);const n=await M(e,t,O());p(!1),m(!0),n$.log("*****************roomId::"+n)}catch(n){console.error("Error creating room:",n),c(!1)}},userName:j(),resetData:f,setResetData:m})}),(0,Ip.jsx)(s$,{isVisible:g,onClose:()=>{v(!1)},title:"Join Room",closeOnClickOutside:!0,children:(0,Ip.jsx)(a$,{onJoin:async(e,t)=>{n$.log("Join Room:",{roomId:e,userName:t}),"connected"!==R&&await ne(),D(t);const n=(e=>{if(e.startsWith("http")||e.startsWith("https")){const t="/room/",n=e.indexOf(t);return-1===n?null:e.substring(n+t.length)}if(e.startsWith("vscode")){const t="roomId=",n=e.indexOf(t);return-1===n?null:e.substring(n+t.length)}return e})(e);n?(A(n,t,O()),v(!1),y(!0)):Sp.postMessage({type:"showMessage",data:{messageType:"info",message:"Enter a valid Room Id or Room URL to join a room"}})},userName:j(),resetData:b,setResetData:y})})]})})},c$=e=>{let{message:n,index:i,userId:r,username:o,isSameUser:s}=e;const[a,l]=(0,t.useState)(FU(null===n||void 0===n?void 0:n.createdAt)),c=n.userId===r,d=c?"message-container message-right":"message-container message-left";return(0,t.useEffect)((()=>{const e=setInterval((()=>{l(FU(null===n||void 0===n?void 0:n.createdAt))}),5e3);return()=>{clearInterval(e)}}),[null===n||void 0===n?void 0:n.createdAt]),(0,Ip.jsx)("div",{className:d,children:(0,Ip.jsxs)("div",{className:"message-bubble",children:[!c&&!s&&(0,Ip.jsx)("div",{style:{marginBottom:"5px"},children:(0,Ip.jsx)("span",{style:{fontWeight:"bold"},children:UU(n.name,n.userId,r)})}),(0,Ip.jsx)("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:(0,Ip.jsx)("div",{style:{margin:0,whiteSpace:"pre-wrap"},children:n.content})}),(0,Ip.jsx)("div",{className:"message-timestamp",children:a})]})})},d$=e=>{let{roomId:n,handleBackClick:i,members:r,getUsersInRoom:o}=e;const{getVSCodeChatRoomLink:s}=DU(),[a,l]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{o(n)}),[n,o]),(0,Ip.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px"},children:[(0,Ip.jsxs)("div",{className:"header-container",children:[(0,Ip.jsxs)("div",{className:"action-container",onClick:i,children:[(0,Ip.jsx)("span",{className:"codicon codicon-chevron-left icon icon-chevron-left",style:{marginRight:"0px"}}),(0,Ip.jsx)("div",{style:{display:"flex"},children:(0,Ip.jsx)("span",{className:"header-text",children:"BACK"})})]}),(0,Ip.jsx)("div",{style:{display:"flex"},children:(0,Ip.jsx)("span",{className:"header-text",children:QU(n)})}),(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingRight:"20px",gap:"10px"},children:(0,Ip.jsx)(ts,{style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:async()=>{try{const e=(e=>`https://blackbox.ai/chat/room/${e}`)(n);await navigator.clipboard.writeText(e),Sp.postMessage({type:"showMessage",data:{messageType:"info",message:"Room Link Copied to Clipboard"}}),n$.log("Room link copied to clipboard!")}catch(e){console.error("Failed to copy text: ",e)}},children:"Invite"})})]}),(0,Ip.jsx)(s$,{isVisible:a,onClose:()=>{l(!1)},title:"Team Members",children:(0,Ip.jsxs)("ul",{children:[0===r.length&&(0,Ip.jsx)("li",{children:"No members found"}),r.map((e=>(0,Ip.jsx)("li",{children:e},e)))]})})]})};const u$=(0,t.createContext)(void 0),h$=e=>{let{children:n}=e;const[i,r]=(0,t.useState)([]),o=(0,t.useCallback)(((e,t,n)=>{const i=Date.now().toString(),{position:o="top-right",autoClose:s=!0,showCloseButton:a=!1,onClick:l,containerId:c="default"}=n||{},d={id:i,type:e,message:t,position:o,autoClose:s,showCloseButton:a,onClick:l,containerId:c};r((e=>[...e,d]))}),[]),s=(0,t.useCallback)((e=>{r((t=>t.filter((t=>t.id!==e))))}),[]),a={toasts:i,addToast:o,removeToast:s,removeAllToasts:(0,t.useCallback)((()=>{r([])}),[])};return(0,Ip.jsx)(u$.Provider,{value:a,children:n})};const p$=e=>{let{roomId:n,showRoomsHandler:i,isExternalLink:r,apiConfiguration:o,setApiConfiguration:s}=e;const[a,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!0),p=(0,t.useRef)(1),f=(0,t.useRef)(!1),m=(0,t.useRef)(!1),[g,v]=(0,t.useState)(""),[b,y]=(0,t.useState)([]),x=(0,t.useRef)([]);(0,t.useEffect)((()=>{x.current=a}));const[k,w]=(0,t.useState)(""),C=(0,t.useRef)(null),S=(0,t.useRef)(null),T=(0,t.useRef)(!1),E=(0,t.useRef)({scrollHeightBefore:0,scrollTopBefore:0,firstCallResponseGot:!1}),{addToast:_,removeToast:I,removeAllToasts:P}=function(){const e=(0,t.useContext)(u$);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}(),{joinRoom:R,handleGroupMessage:A,getRoomMessagesByPage:M,getUserName:O,getUserId:N,updateLastReadMessage:j,clearRoomData:D,sendVSCodeMessageToExtension:L,audioLeaveRoom:F,audioRoomCallInProgressRef:B,playMessageReceivedNotification:U,sendCallback:$,addEventListener:z,removeEventListener:V,getUserListForRoom:H,getUsersInRoom:W}=DU();(0,t.useEffect)((()=>{const e=(e,t)=>{if("roomJoined"===t)ee(p.current),$("chatSetRoomId",n);else if("messageHistoryPages"===t){n$.log("Fetching Completed ...");const{room:t,messages:i,page:r,totalMessages:o,allMessages:s}=e;G(),d(!1),t===n&&(n$.info(`totalMessages : ${o}, allMessages: ${s.length} for room ${n}`),i.length<20||o<=s.length?(h(!1),J()):u&&X()&&setTimeout((()=>{Z()}),500))}else if("beforeNewMessageAdded"===t){const{message:t,isCurrentUserSender:n}=e;T.current=!1,S.current&&!n&&ne()}else if("newMessageReceived"===t){const{message:t,isCurrentUserSender:n}=e;n?T.current=!0:re()}else if("userListUpdated"===t){if(e&&e.room===n){const t=e.users?e.users.map((e=>e.username)):[];y(t)}}else if("error_message"===t){const{message:t,error:n}=e;console.error(t,n),f.current=!1,d(!1),v(t)}};return z("roomJoined",e),z("messageHistoryPages",e),z("newMessageReceived",e),z("beforeNewMessageAdded",e),z("error_message",e),z("userListUpdated",e),()=>{j(n),V("roomJoined",e),V("messageHistoryPages",e),V("newMessageReceived",e),V("beforeNewMessageAdded",e),V("error_message",e),V("userListUpdated",e)}}),[]),(0,t.useEffect)((()=>{n&&N()&&(r?setTimeout((()=>{R(n,O(),N())}),1e3):R(n,O(),N()))}),[n]);const q=(0,t.useRef)(null),K=(0,t.useRef)(null);(0,t.useEffect)((()=>(q.current&&!K.current&&(K.current=new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&T.current&&(te(),T.current=!1)}))})),K.current.observe(q.current,{childList:!0}),n$.log("Added Mutation Observer")),()=>{K.current&&(K.current.disconnect(),K.current=null,n$.log("Removing Mutation Observer"))})),[q.current]),(0,t.useEffect)((()=>{(f.current||m.current)&&setTimeout((()=>{if(S.current)if(n$.log("Scrolling according to size",T.current),T.current||m.current)n$.log("Scrolling according to size to bottom in use effect"),YU(S.current,S.current.scrollHeight,(()=>{n$.log("Scrolling animation completed!"),f.current=!1,m.current=!1,T.current=!0,ne()}));else{n$.log("Scrolling according to size not to bottom in use effect");const e=S.current.scrollHeight-E.current.scrollHeightBefore;YU(S.current,E.current.scrollTopBefore+e,(()=>{n$.log("Scrolling animation completed!"),f.current=!1,m.current=!1,ne()}))}}),0)}),[a]);const{fetchCompleted:G}=function(e){let{chatAreaRef:n,hasMore:i,loadMore:r,scrollStarted:o,threshold:s=50}=e;const a=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{const e=()=>{if(!n.current||!i||a.current)return;o();const e=n.current,t=(e.scrollHeight-e.clientHeight)/2-s;e.scrollTop<=t&&(n$.log("Starting Fetching"),a.current=!0,r(),a.current=!1,n$.log("Fetching..."))},t=n.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}}),[n,i,r,s]),{fetchCompleted:()=>{a.current=!1}}}({chatAreaRef:S,hasMore:u,loadMore:()=>{J(),S.current&&!f.current&&u&&(E.current.scrollHeightBefore=S.current.scrollHeight,E.current.scrollTopBefore=S.current.scrollTop,p.current=p.current+1,ee(p.current))},scrollStarted:()=>{},threshold:50}),Y=(0,t.useRef)(0),Q=(0,t.useRef)(null),X=()=>Y.current<3,J=()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)},Z=()=>{J(),Q.current=setTimeout((()=>{!u||m.current||f.current||(X()?(S.current&&(E.current.scrollHeightBefore=S.current.scrollHeight,E.current.scrollTopBefore=S.current.scrollTop),m.current=!0,Y.current+=1,p.current+=1,n$.log(`Fetching in background page ${p.current}`),M(n,(e=>{l(e)}),x,p.current,20)):J())}),1e3)},ee=e=>{f.current=!0,d(!0),M(n,(e=>{l(e)}),x,e,20)},te=()=>{setTimeout((()=>{S.current&&(n$.info("Scrolling to the bottom ",m.current),YU(S.current,S.current.scrollHeight,(()=>{n$.log("Scrolling animation completed in scrollToBottom!"),T.current=!0,d(!1)})))}),0)},ne=()=>{if(S.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=S.current,i=t-(e+n)<30;T.current=i,n$.log("scroll ref is "+T.current)}},ie=(e,t)=>{let n=!1,i=a;if(i.length<=t&&x.current.length>t&&(i=x.current),i&&i.length>2&&void 0!==t){const r=i[t-1];!r||r.userId!==e.userId||zU(r)||zU(e)||(n=!0)}return n},re=()=>{U()};return(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,Ip.jsx)("div",{style:{flexShrink:0},children:(0,Ip.jsx)(d$,{roomId:n,handleBackClick:()=>{j(n),F(n),D(n),B.current=!1,P(),L("stop-ringing-tone"),$("goingBackToChatRoom",n),i&&i()},members:b,getUsersInRoom:W})}),(0,Ip.jsx)("div",{style:{flex:1,minHeight:0,position:"relative"},children:(0,Ip.jsx)("div",{id:"divMessageContainer",ref:S,className:"scrollable-section",style:{position:"absolute",top:0,bottom:0,left:0,right:0,overflowY:"auto",width:"100%"},children:a.length?(0,Ip.jsxs)("div",{id:"divMessages",ref:q,children:[c&&(0,Ip.jsx)("div",{className:"loader",children:(0,Ip.jsx)("div",{className:"text-center flex justify-center",children:(0,Ip.jsx)(Ty,{})})}),a.map(((e,t)=>(0,Ip.jsx)(c$,{message:e,index:t,username:O(),userId:N(),isSameUser:ie(e,t)},e.id)))]}):g?(0,Ip.jsx)("div",{className:"text-center mt-10 flex justify-center",children:g}):(0,Ip.jsx)("div",{className:"text-center mt-10 flex justify-center",children:(0,Ip.jsx)(Ty,{})})})}),(0,Ip.jsx)(vI,{ref:C,inputValue:k,setInputValue:w,hideFileUpload:!0,textAreaDisabled:!1,placeholderText:"Message room",onSend:()=>{n$.log(k);const e=new Date,t={id:e.getTime(),name:O(),content:k,createdAt:e,role:"user"};A(n,t,l,x),w("")},onHeightChange:()=>{},apiConfiguration:o,setApiConfiguration:s})]})},f$=e=>{let{paramData:n,isHidden:i,apiConfiguration:r,setApiConfiguration:o}=e;const{roomId:s,userId:a,extensionName:l,extensionPublisher:c}=n||{},[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),b=(0,t.useRef)(!1);(0,t.useEffect)((()=>{s&&(n$.log("*****************",s),b.current=!0,y(s))}),[s]);const y=e=>{u(e),p(!1),m(!0)},x=()=>{b.current=!1,u(null),p(!0),m(!1)};return(0,Ip.jsx)(h$,{children:(0,Ip.jsxs)("div",{className:"group-chat",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:i?"none":"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Ip.jsx)(l$,{showMessagesForRoom:y,isVisible:h&&!f,isParentHidden:i,paramData:n,isFromChatView:g,setIsFromChatView:v}),d&&f&&(0,Ip.jsx)(p$,{roomId:d,showRoomsHandler:x,isExternalLink:b.current,apiConfiguration:r,setApiConfiguration:o})]})})};var m$,g$="https://js.stripe.com/v3",v$=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,b$="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",y$=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(g$).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},x$=null,k$=null,w$=null,C$=function(e){return null!==x$?x$:(x$=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(b$),window.Stripe)t(window.Stripe);else try{var i=function(){for(var e=document.querySelectorAll('script[src^="'.concat(g$,'"]')),t=0;t<e.length;t++){var n=e[t];if(v$.test(n.src))return n}return null}();if(i&&e)console.warn(b$);else if(i){if(i&&null!==w$&&null!==k$){var r;i.removeEventListener("load",w$),i.removeEventListener("error",k$),null===(r=i.parentNode)||void 0===r||r.removeChild(i),i=y$(e)}}else i=y$(e);w$=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),k$=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),i.addEventListener("load",w$),i.addEventListener("error",k$)}catch(o){return void n(o)}else t(null)}))).catch((function(e){return x$=null,Promise.reject(e)}))},S$=!1,T$=function(){return m$||(m$=C$(null).catch((function(e){return m$=null,Promise.reject(e)})))};Promise.resolve().then((function(){return T$()})).catch((function(e){S$||console.warn(e)}));var E$=n(3393);const _$=(()=>{const e=getComputedStyle(document.documentElement);return{textColor:e.getPropertyValue("--vscode-input-foreground"),buttonTextColor:e.getPropertyValue("--vscode-foreground"),placeholderColor:e.getPropertyValue("--vscode-input-placeholderForeground"),iconColor:e.getPropertyValue("--vscode-input-foreground"),errorColor:e.getPropertyValue("--vscode-titleBar-inactiveForeground")}})(),I$={style:{base:{fontSize:"14px",lineHeight:"18px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',color:_$.textColor,backgroundColor:"transparent","::placeholder":{color:_$.placeholderColor},":-webkit-autofill":{color:_$.textColor},":focus":{color:_$.textColor},"::selection":{backgroundColor:"var(--vscode-editor-selectionBackground)"},iconColor:_$.iconColor},invalid:{color:_$.errorColor,iconColor:_$.errorColor}}},P$=e=>{var n,i;let{onClose:r,onSuccess:o,planId:s,amount:a,stripePublicKey:l,mode:c="subscription",customerId:d,enableAutoFill:u,setEnableAutoFill:h,customerEmail:p,currentCredits:m=0,setSelectedModel:g,onAmountChange:v,isMonthly:b,setIsMonthly:y,fetchUserCredits:x,setSelectedTier:k,selectedTier:w}=e;const[C,S]=(0,t.useState)({email:"",fullName:"",paymentMethod:"card",creditAmount:"subscription"===c?4.99:a}),[T,E]=(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,(0,t.useState)(!1)),[_,I]=(0,t.useState)(null),[P,R]=(0,t.useState)(!1),[A,M]=(0,t.useState)("initial"),[O,N]=(0,t.useState)(!1),[j,D]=(0,t.useState)(!1),{isSmallScreen:L,isVerySmallScreen:F}=sI(),B=(0,E$.useStripe)(),U=(0,E$.useElements)();t.useEffect((()=>{"credits"===c&&x()}),[]);const $=e=>{const{name:t,value:n}=e.target;"creditAmount"===t?(e=>{if(!e||"-"===e)return void S((e=>({...e,creditAmount:0})));if("0"===e)return void S((e=>({...e,creditAmount:0})));const t=e.replace(/^0+/,"");if(""===t)return;const n=Number(t);!isNaN(n)&&n>=0&&S((e=>({...e,creditAmount:n})))})(n):S((e=>({...e,[t]:n}))),I(null)},z=e=>{var t;S((t=>({...t,creditAmount:e}))),I(null),null===(t=document.getElementById("creditAmount"))||void 0===t||t.focus()};return(0,Ip.jsx)("div",{className:"payment-dialog-overlay",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,Ip.jsx)("div",{className:"payment-dialog",children:(0,Ip.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),B&&U)if("credits"!==c||C.creditAmount&&!(C.creditAmount<=0)){E(!0),I(null),M("processing");try{let e;if("subscription"===c||!d||O){const t=L?U.getElement(E$.CardNumberElement):U.getElement(E$.CardElement);if(!t)throw new Error("Card element not found");const{paymentMethod:n,error:i}=await B.createPaymentMethod({type:"card",card:t,billing_details:{email:C.email,name:C.fullName}});if(i)throw new Error(i.message);e=n}const g=(100*((null===C||void 0===C?void 0:C.creditAmount)||a)).toFixed(0);let v;if("subscription"!==c&&!O||d){var t;const n=`${xI}/api/${b?"get-subscription":"purchase-credits"}`;v=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:d,amount:C.creditAmount?(100*C.creditAmount).toFixed(0):0,paymentMethod:null===(t=e)||void 0===t?void 0:t.id,source:"vscode"})})}else v=await fetch(`${xI}/api/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":localStorage.getItem("blackbox_userId")||""},body:JSON.stringify({amount:g,customerEmail:C.email,customerName:null===C||void 0===C?void 0:C.fullName,bonus:!1,paymentMethod:e})});const y=await v.json();if(y.error)throw new Error(y.error);if("subscription"===c||O)if(y.requiresAction)if(M("authenticating"),"setup_intent"===y.actionType){var n,i;const{error:t}=await B.confirmCardSetup(y.setupIntentSecret,{payment_method:null===(n=e)||void 0===n?void 0:n.id});if(t)throw new Error(t.message);const a=await fetch(`${xI}/api/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":localStorage.getItem("blackbox_userId")||""},body:JSON.stringify({amount:C.creditAmount?(100*C.creditAmount).toFixed(0):0,customerEmail:C.email,customerName:null===C||void 0===C?void 0:C.fullName,customerId:null===(i=y.customer)||void 0===i?void 0:i.id,bonus:!1,paymentMethod:e,isRetry:!0})}),d=await a.json();if(200!==a.status)throw new Error(d.error||"Payment failed after authentication");if(d.requiresAction&&d.clientSecret){var r,s;const{error:t}=await B.confirmCardPayment(d.clientSecret,{payment_method:null===(r=e)||void 0===r?void 0:r.id});if(t)throw new Error(t.message);const n=await fetch(`${xI}/api/confirm-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:d.subscriptionId})}),i=await n.json();o({mode:c,customer:y.customer,subscription:i.subscription,creditAmount:C.creditAmount,paymentMethodId:null===(s=e)||void 0===s?void 0:s.id})}else{var l;o({mode:c,customer:d.customer,subscription:d.subscription,creditAmount:C.creditAmount,paymentMethodId:null===(l=e)||void 0===l?void 0:l.id})}}else{var u,h;const{error:t}=await B.confirmCardPayment(y.clientSecret,{payment_method:null===(u=e)||void 0===u?void 0:u.id});if(t)throw new Error(t.message);const n=await fetch(`${xI}/api/confirm-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:y.subscriptionId})}),i=await n.json();o({mode:c,customer:y.customer,subscription:i.subscription,paymentMethodId:null===(h=e)||void 0===h?void 0:h.id})}else{var p;const{customer:t,subscription:n}=y;if(console.log("Subscription response:",n),null!==n&&void 0!==n&&n.error)throw new Error(n.error);o({mode:c,customer:t,subscription:n,cardElementVisible:O,creditAmount:C.creditAmount,paymentMethodId:null===(p=e)||void 0===p?void 0:p.id})}else if(y.requiresAction){M("authenticating");const{error:t,paymentIntent:n}=await B.confirmCardPayment(y.clientSecret,{payment_method:y.paymentMethodId});if(t)throw new Error(t.message);var f;console.log("Credit purchase response:",n),o({mode:c,paymentIntent:n,cardElementVisible:O,creditAmount:C.creditAmount,paymentMethodId:null===(f=e)||void 0===f?void 0:f.id})}else{if(!y.success)throw new Error("Credit purchase failed");var m;console.log("Credit purchase response:",y.paymentIntent),o({mode:c,paymentIntent:y.paymentIntent,cardElementVisible:O,creditAmount:C.creditAmount,paymentMethodId:null===(m=e)||void 0===m?void 0:m.id})}}catch(Y$){console.log("inside catch error",Y$),I(Y$ instanceof Error?Y$.message:"Something went wrong. Please try again.")}finally{E(!1),M("initial")}}else I("Please enter a valid amount greater than 0")},children:[(0,Ip.jsxs)("div",{className:"p-6 space-y-6",style:{paddingBottom:"1rem"},children:[(0,Ip.jsxs)("div",{className:"space-y-2",style:{position:"relative"},children:[(0,Ip.jsx)("div",{className:"close-button",onClick:r,children:"\xd7"}),(0,Ip.jsx)("h2",{className:"text-xl font-semibold",style:{marginTop:0},children:"subscription"===c?"Get Credits":"Purchase More Credits"}),"subscription"===c?(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:{marginBottom:"15px"},children:(0,Ip.jsx)(us,{value:null===(n=C.creditAmount)||void 0===n?void 0:n.toString(),onChange:e=>{const t=parseFloat(e.target.value),n=f.find((e=>e.price===t));null===v||void 0===v||v(t),S((e=>({...e,creditAmount:t}))),k(n)},className:"radio-group-container",children:f.map((e=>(0,Ip.jsxs)("div",{className:"tier-option "+(C.creditAmount===e.price?"selected":""),onClick:()=>{const t=e.price,n=f.find((e=>e.price===t));null===v||void 0===v||v(t),S((e=>({...e,creditAmount:t}))),k(n)},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",overflow:"hidden"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2px",flexShrink:0},children:[(0,Ip.jsxs)("span",{style:{fontWeight:"500",fontSize:"16px",lineHeight:"24px"},children:["$",e.price]}),(0,Ip.jsxs)("span",{style:{opacity:.7,fontSize:"13px"},children:["/ $",e.period]})]}),(0,Ip.jsxs)("span",{style:{opacity:.7,fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["\u2022 ",Math.round(e.price/(.04*e.requestPriceMultiplier))," ",F?"pro":"pro agent requests"," ",!F&&e.requestPriceMultiplier<1&&`(Save ${100-100*e.requestPriceMultiplier}%)`]})]}),(0,Ip.jsx)(ds,{value:e.price.toString(),checked:C.creditAmount===e.price})]},e.price)))})}),(0,Ip.jsxs)("div",{className:"features-accordion",children:[(0,Ip.jsxs)("div",{className:"accordion-header",onClick:()=>D(!j),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",padding:"8px 0",borderBottom:"1px solid var(--vscode-input-border)",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{style:{fontSize:"14px",fontWeight:"500"},children:"View All Features"}),(0,Ip.jsx)("span",{style:{fontSize:"12px",transform:j?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),(0,Ip.jsx)("div",{className:"features-accordion-content "+(j?"open":"closed"),children:(0,Ip.jsx)("div",{className:"pro-features",children:(0,Ip.jsxs)("ul",{style:{listStyle:"none",padding:"10px 0",margin:0},children:[(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{children:"\u2713"}),"The BEST AI Coding Agent"]}),(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{children:"\u2713"}),"Pay as you go"]}),(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{children:"\u2713"}),null!==C&&void 0!==C&&C.creditAmount?Math.round((null===C||void 0===C?void 0:C.creditAmount)/(.04*w.requestPriceMultiplier)):""," pro agent requests"]}),(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{children:"\u2713"}),"Unlimited base agent requests"]}),(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{children:"\u2713"}),"Unlimited code completion"]}),(0,Ip.jsxs)("li",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"8px"},children:[(0,Ip.jsx)("span",{style:{marginTop:"2px"},children:"\u2713"}),(0,Ip.jsx)("span",{style:{lineHeight:"1.5"},children:"Choose any AI Model: OpenAI o3-mini, GPT-4o, o1, Deepseek R1, V3, Anthropic Claude Sonnet 3.5 and 3.7, Grok 3, Gemini 2.5, Llama 4 and more"})]})]})})})]})]}):(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,Ip.jsxs)("p",{className:"text-sm opacity-80",style:{margin:0},children:["Current Credits: ",(0,Ip.jsxs)("span",{style:{fontWeight:"700"},children:["$",Math.max(0,m).toFixed(2)]})]}),(0,Ip.jsx)("div",{onClick:()=>{R(!0),x(),setTimeout((()=>{R(!1)}),1e3)},style:{padding:"4px 10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},"aria-label":"Reload Credits",title:"Reload Credits",children:(0,Ip.jsx)("span",{className:P?"animate-spin":"",style:{fontSize:"16px"},children:"\u21bb"})})]})}),(0,Ip.jsx)("div",{style:{marginBottom:"15px"},children:(0,Ip.jsx)(us,{value:null===(i=C.creditAmount)||void 0===i?void 0:i.toString(),onChange:e=>{const t=parseFloat(e.target.value);z(t)},className:"radio-group-container",children:[20,100,500].map((e=>(0,Ip.jsxs)("div",{className:"tier-option "+(C.creditAmount===e?"selected":""),onClick:()=>{z(e)},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",overflow:"hidden"},children:[(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"2px",flexShrink:0},children:(0,Ip.jsxs)("span",{style:{fontWeight:"500",fontSize:"16px",lineHeight:"24px"},children:["$",e]})}),(0,Ip.jsxs)("span",{style:{opacity:.7,fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["\u2022 ",Math.round(e/.04)," pro agent requests"]})]}),(0,Ip.jsx)(ds,{value:e.toString(),checked:C.creditAmount===e})]},e)))})})]}),(0,Ip.jsxs)("div",{className:"checkbox-container",children:[(0,Ip.jsx)(ns,{checked:u,onChange:e=>h(e.target.checked),children:(0,Ip.jsx)("span",{style:{fontWeight:"300",fontSize:"12px"},children:"subscription"===c?"20$ Credit Auto-Refill":F?"Auto-Refill":"Credit Auto-Refill"})}),"credits"===c&&(0,Ip.jsx)("span",{onClick:()=>{N((e=>!e)),p&&S((e=>({...e,email:p})))},style:{cursor:"pointer",color:"var(--vscode-foreground)"},children:F?"+ Add Card":"+ Add New Card"})]})]}),(0,Ip.jsxs)("div",{className:"space-y-4",children:[("subscription"===c||O)&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsxs)("div",{className:"input-field-container "+("subscription"===c?"subscription-mode":""),children:[(0,Ip.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-4",children:"Full Name"}),(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:C.fullName,onChange:$,className:"input-field",required:!0,placeholder:"Full Name"})})]}),(0,Ip.jsxs)("div",{className:"input-field-container "+("subscription"===c?"subscription-mode":""),children:[(0,Ip.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-4",children:"Email"}),(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)("input",{type:"email",id:"email",name:"email",value:C.email,onChange:$,className:"input-field",required:!0,placeholder:"john@example.com"})})]})]}),"credits"===c&&(0,Ip.jsxs)("div",{className:"input-field-container",style:{marginTop:"10px"},children:[(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"20px"},children:(0,Ip.jsxs)("label",{htmlFor:"creditAmount",className:"text-sm font-medium",style:{display:"flex",alignItems:"center",gap:"4px"},children:["Credit Amount",(0,Ip.jsxs)("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",cursor:"help"},onMouseEnter:e=>{const t=e.currentTarget.querySelector(".tooltip");t&&(t.style.display="block")},onMouseLeave:e=>{const t=e.currentTarget.querySelector(".tooltip");t&&(t.style.display="none")},children:[(0,Ip.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",border:"1px solid currentColor",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"?"}),(0,Ip.jsxs)("div",{className:"tooltip",style:{position:"absolute",bottom:"calc(100% + 8px)",left:"50%",transform:"translateX(-50%)",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-editor-foreground)",padding:"8px 12px",borderRadius:"4px",whiteSpace:"normal",maxWidth:"250px",width:"max-content",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"none",zIndex:1e3,marginLeft:"20px",border:"1px solid var(--vscode-input-border)",fontSize:"12px",lineHeight:"1.4"},children:["The credits count ",Math.round(C.creditAmount/.04)," requests. Large and small edits will be counted the same. Increase your credit amount to increase requests."]})]})]})}),(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)("input",{type:"number",id:"creditAmount",name:"creditAmount",value:C.creditAmount||"",onChange:$,className:"input-field",required:!0,min:"0",step:"1"})})]}),"card"===C.paymentMethod&&("subscription"===c||O||!d?(0,Ip.jsxs)("div",{className:"input-field-container "+("subscription"===c?"subscription-mode":""),style:{position:"relative"},children:[(0,Ip.jsx)("label",{className:"block text-sm font-medium mb-4",children:"Card Details"}),L?(0,Ip.jsxs)("div",{className:"stripe-card-wrapper",children:[(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)(E$.CardNumberElement,{options:I$})}),(0,Ip.jsxs)("div",{className:"stripe-card-row",children:[(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)(E$.CardExpiryElement,{options:I$})}),(0,Ip.jsx)("div",{className:"card-element-container",children:(0,Ip.jsx)(E$.CardCvcElement,{options:I$})})]})]}):(0,Ip.jsx)("div",{className:"card-element-container",style:{position:"relative"},children:(0,Ip.jsx)(E$.CardElement,{options:I$})}),(0,Ip.jsx)("div",{style:{fontSize:"10px",color:"var(--vscode-input-placeholderForeground)",userSelect:"none",pointerEvents:"none",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',textAlign:"right",marginTop:"4px"},children:"powered by Stripe"})]}):null)]})]}),_&&(0,Ip.jsxs)("div",{className:"payment-error-message",children:["\u26a0\ufe0f\xa0",_]}),(0,Ip.jsxs)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 0 1.5rem",flexDirection:"column",marginBottom:"subscription"===c?"1.5rem":"0.5rem"},children:["authenticating"!==A?null:(0,Ip.jsx)("button",{type:"button",onClick:r,className:"button-secondary flex-1",style:{color:_$.buttonTextColor},disabled:T||"authenticating"===A,children:"Cancel"}),(0,Ip.jsx)("button",{type:"submit",className:"flex-1 button-blue",disabled:T||!B||"authenticating"===A,children:"authenticating"===A?"Verifying...":T?"Processing...":"subscription"===c?(null===w||void 0===w||w.requestPriceMultiplier,"Get Started"):"Purchase Credits"})]}),"subscription"!==c&&(0,Ip.jsxs)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 1.5rem 1.5rem",flexDirection:"column"},children:[(0,Ip.jsx)("button",{className:"blackbox-close-button",onClick:()=>{r()},children:"Close"}),(0,Ip.jsx)("button",{className:"blackbox-base-button",onClick:()=>{g("blackbox-base"),r()},children:"Continue on BLACKBOX BASE"})]}),"subscription"===c&&(0,Ip.jsx)("div",{style:{padding:"0 1.5rem 1.5rem 1.5rem",display:"flex",justifyContent:"center"},children:(0,Ip.jsxs)("div",{onClick:()=>Sp.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/connect-vscode"}),style:{width:"fit-content",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexDirection:L?"column":"row",gap:L?"1rem":"3px"},children:[(0,Ip.jsx)("span",{style:{color:"var(--vscode-foreground)",marginRight:"8px",fontWeight:"normal"},children:"Already subscribed?"}),(0,Ip.jsxs)("span",{style:{color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:[L?"":"\u2022 ","Connect Your Account"]})]})})]})})})},R$=e=>{let t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];S$=!0;var i=Date.now();return T$().then((function(e){return function(e,t,n){if(null===e)return null;var i=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:t})}(i,n),i}(e,t,i)}))}(e.stripePublicKey);const n="#1e1e1e"===getComputedStyle(document.documentElement).getPropertyValue("--vscode-editor-background").trim().toLowerCase();return(0,Ip.jsx)(E$.Elements,{stripe:t||null,options:{appearance:{theme:n?"night":"stripe"}},children:(0,Ip.jsx)(P$,{...e})})},A$=e=>{let{onClose:t}=e;return console.log("sakdjcbnsadc"),(0,Ip.jsx)("div",{className:"payment-dialog-overlay",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,Ip.jsxs)("div",{className:"payment-dialog",children:[(0,Ip.jsx)("div",{className:"p-6 space-y-6",children:(0,Ip.jsxs)("div",{className:"space-y-2",style:{position:"relative"},children:[(0,Ip.jsx)("div",{className:"close-button",onClick:t,children:"\xd7"}),(0,Ip.jsx)("h2",{className:"text-xl font-semibold",style:{marginTop:0},children:"Team Billing Plan"}),(0,Ip.jsxs)("div",{style:{padding:"20px 0",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[(0,Ip.jsx)("p",{style:{fontSize:"16px",margin:0,color:"var(--vscode-foreground)",lineHeight:"1.5"},children:"You are on team billing plan"}),(0,Ip.jsx)("p",{style:{fontSize:"14px",margin:0,color:"var(--vscode-descriptionForeground)",lineHeight:"1.4",textAlign:"center"},children:"Your credits and billing are managed by your team administrator. Contact your team admin for any billing-related questions."})]})]})}),(0,Ip.jsx)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 1.5rem 1.5rem",flexDirection:"column"},children:(0,Ip.jsx)("button",{className:"flex-1 button-blue",onClick:t,children:"Got it"})})]})})},M$=cp(ts)`
	--danger-button-bg: #c42b2b;
	--danger-button-hover: #a82424;
	--danger-button-active: #8f1f1f;

	background-color: var(--danger-button-bg) !important;
	border-color: var(--danger-button-bg) !important;
	color: #ffffff !important;

	&:hover {
		background-color: var(--danger-button-hover) !important;
		border-color: var(--danger-button-hover) !important;
	}

	&:active {
		background-color: var(--danger-button-active) !important;
		border-color: var(--danger-button-active) !important;
	}
`,O$=e=>(0,Ip.jsx)(M$,{...e}),N$=cp.button`
	font-size: 12px;
	font-weight: 500;
	padding: 2px 6px;
	border-radius: 2px;
	border: none;
	cursor: pointer;
	background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryBackground)":"var(--vscode-button-background)"};
	color: var(--vscode-button-foreground);

	&:hover:not(:disabled) {
		background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryHoverBackground)":"var(--vscode-button-hoverBackground)"};
	}

	&:active:not(:disabled) {
		background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryBackground)":"var(--vscode-button-background)"};
		opacity: 0.7;
	}

	&:disabled {
		opacity: 0.5;
		cursor: default;
	}
`,j$=e=>{var n,i;let{item:r,installedServers:o}=e;const s=o.some((e=>e.name===r.mcpId)),[a,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),h=(0,t.useRef)(null),p=(0,t.useCallback)((e=>{switch(e.data.type){case"mcpDownloadDetails":l(!1);break;case"relinquishControl":d(!1)}}),[]);u("message",p);const f=(0,t.useMemo)((()=>{const e=new URL(r.githubUrl),t=e.pathname.split("/");return t.length>=2?`${e.origin}/${t[1]}`:r.githubUrl}),[r.githubUrl]);return console.log("lalalalal",r),(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("style",{children:"\n\t\t\t\t\t.mcp-card {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\toutline: none !important;\n\t\t\t\t\t}\n\t\t\t\t\t.mcp-card:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-list-hoverBackground);\n\t\t\t\t\t}\n\t\t\t\t\t.mcp-card:focus {\n\t\t\t\t\t\toutline: none !important;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,Ip.jsxs)("a",{href:r.githubUrl,className:"mcp-card",style:{padding:"14px 16px",display:"flex",flexDirection:"column",gap:12,cursor:c?"wait":"pointer",textDecoration:"none",color:"inherit"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[r.logoUrl&&(0,Ip.jsx)("img",{src:r.logoUrl,alt:`${r.name} logo`,style:{width:42,height:42,borderRadius:4}}),(0,Ip.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px"},children:[(0,Ip.jsx)("h3",{style:{margin:0,fontSize:"13px",fontWeight:600},children:r.name}),(0,Ip.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),s||a||(l(!0),Sp.postMessage({type:"downloadMcp",mcpId:r.mcpId}),Sp.postMessage({type:"chatSettings",chatSettings:{mode:"mcp"}}))},style:{},children:(0,Ip.jsx)(N$,{disabled:s||a,$isInstalled:s,children:s?"Installed":a?"Installing...":"Install"})})]}),(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--vscode-descriptionForeground)",flexWrap:"wrap",minWidth:0,rowGap:0},children:[(0,Ip.jsx)("a",{href:f,style:{display:"flex",alignItems:"center",color:"var(--vscode-foreground)",minWidth:0,opacity:.7,textDecoration:"none",border:"none !important"},className:"github-link",onMouseEnter:e=>{e.currentTarget.style.opacity="1",e.currentTarget.style.color="var(--link-active-foreground)"},onMouseLeave:e=>{e.currentTarget.style.opacity="0.7",e.currentTarget.style.color="var(--vscode-foreground)"},children:(0,Ip.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},ref:h,children:[(0,Ip.jsx)("span",{className:"codicon codicon-github",style:{fontSize:"14px"}}),(0,Ip.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",minWidth:0},children:r.author})]})}),(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",minWidth:0,flexShrink:0},children:[(0,Ip.jsx)("span",{className:"codicon codicon-star-full"}),(0,Ip.jsx)("span",{style:{wordBreak:"break-all"},children:null!==(n=null===(i=r.githubStars)||void 0===i?void 0:i.toLocaleString())&&void 0!==n?n:0})]}),r.requiresApiKey&&(0,Ip.jsx)("span",{className:"codicon codicon-key",title:"Requires API key",style:{flexShrink:0}})]})]})]}),(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,Ip.jsx)("p",{style:{fontSize:"13px",margin:0},children:r.description}),(0,Ip.jsxs)("div",{style:{display:"flex",gap:"6px",flexWrap:"nowrap",overflow:"hidden",position:"relative"},children:[(0,Ip.jsx)("span",{style:{fontSize:"10px",padding:"1px 4px",borderRadius:"3px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 50%, transparent)",color:"var(--vscode-descriptionForeground)",whiteSpace:"nowrap"},children:r.category}),r.tags.map(((e,t)=>(0,Ip.jsxs)("span",{style:{fontSize:"10px",padding:"1px 4px",borderRadius:"3px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 50%, transparent)",color:"var(--vscode-descriptionForeground)",whiteSpace:"nowrap",display:"inline-flex"},children:[e,(r.tags.length,"")]},e))),(0,Ip.jsx)("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"32px",background:"linear-gradient(to right, transparent, var(--vscode-sideBar-background))",pointerEvents:"none"}})]})]})]})]})},D$=()=>{const{mcpServers:e}=Ap(),[n,i]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)("newest"),g=(0,t.useMemo)((()=>{const e=new Set(n.map((e=>e.category)));return Array.from(e).sort()}),[n]),v=(0,t.useMemo)((()=>n.filter((e=>{const t=""===d||e.name.toLowerCase().includes(d.toLowerCase())||e.description.toLowerCase().includes(d.toLowerCase())||e.tags.some((e=>e.toLowerCase().includes(d.toLowerCase()))),n=!h||e.category===h;return t&&n})).sort(((e,t)=>{switch(f){case"stars":return t.githubStars-e.githubStars;case"name":return e.name.localeCompare(t.name);case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}}))),[n,d,h,f]);(0,t.useEffect)((()=>{const e=e=>{const t=e.data;if("mcpMarketplaceCatalog"===t.type){var n;if(t.error)a(t.error);else i((null===(n=t.mcpMarketplaceCatalog)||void 0===n?void 0:n.items)||[]),a(null);o(!1),c(!1)}else"mcpDownloadDetails"===t.type&&t.error&&a(t.error)};return window.addEventListener("message",e),b(),()=>{window.removeEventListener("message",e)}}),[]);const b=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?c(!0):o(!0),a(null),Sp.postMessage({type:"fetchMcpMarketplace",bool:e})};return r||l?(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px"},children:(0,Ip.jsx)(cs,{})}):s?(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px",gap:"12px"},children:[(0,Ip.jsx)("div",{style:{color:"var(--vscode-errorForeground)"},children:s}),(0,Ip.jsxs)(ts,{appearance:"secondary",onClick:()=>b(!0),children:[(0,Ip.jsx)("span",{className:"codicon codicon-refresh",style:{marginRight:"6px"}}),"Retry"]})]}):(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,Ip.jsxs)("div",{style:{padding:"20px 20px 5px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,Ip.jsxs)(ps,{style:{width:"100%"},placeholder:"Search MCPs...",value:d,onInput:e=>u(e.target.value),children:[(0,Ip.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,opacity:.8}}),d&&(0,Ip.jsx)("div",{className:"codicon codicon-close","aria-label":"Clear search",onClick:()=>u(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",cursor:"pointer"}})]}),(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ip.jsx)("span",{style:{fontSize:"11px",color:"var(--vscode-descriptionForeground)",textTransform:"uppercase",fontWeight:500,flexShrink:0},children:"Filter:"}),(0,Ip.jsx)("div",{style:{position:"relative",zIndex:2,flex:1},children:(0,Ip.jsxs)(is,{style:{width:"100%"},value:h||"",onChange:e=>p(e.target.value||null),children:[(0,Ip.jsx)(os,{value:"",children:"All Categories"}),g.map((e=>(0,Ip.jsx)(os,{value:e,children:e},e)))]})})]}),(0,Ip.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Ip.jsx)("span",{style:{fontSize:"11px",color:"var(--vscode-descriptionForeground)",textTransform:"uppercase",fontWeight:500,marginTop:"3px"},children:"Sort:"}),(0,Ip.jsxs)(us,{style:{display:"flex",flexWrap:"wrap",marginTop:"-2.5px"},value:f,onChange:e=>m(e.target.value),children:[(0,Ip.jsx)(ds,{value:"newest",children:"Newest"}),(0,Ip.jsx)(ds,{value:"stars",children:"GitHub Stars"}),(0,Ip.jsx)(ds,{value:"name",children:"Name"})]})]})]}),(0,Ip.jsx)("style",{children:"\n\t\t\t\t.mcp-search-input,\n\t\t\t\t.mcp-select {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input {\n\t\t\t\tmin-width: 140px;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input:focus,\n\t\t\t\t.mcp-select:focus {\n\t\t\t\tborder-color: var(--vscode-focusBorder) !important;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input:hover,\n\t\t\t\t.mcp-select:hover {\n\t\t\t\topacity: 0.9;\n\t\t\t\t}\n\t\t\t"}),(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:0===v.length?(0,Ip.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px",color:"var(--vscode-descriptionForeground)"},children:d||h?"No matching MCP servers found":"No MCP servers found in the marketplace"}):v.map((t=>(0,Ip.jsx)(j$,{item:t,installedServers:e},t.mcpId)))})]})},L$=cp.button`
	background: none;
	border: none;
	border-bottom: 2px solid ${e=>e.isActive?"var(--vscode-foreground)":"transparent"};
	color: ${e=>e.isActive?"var(--vscode-foreground)":"var(--vscode-descriptionForeground)"};
	padding: 8px 16px;
	cursor: pointer;
	font-size: 13px;
	margin-bottom: -1px;
	font-family: inherit;

	&:hover {
		color: var(--vscode-foreground);
	}
`,F$=e=>{let{children:t,isActive:n,onClick:i}=e;return(0,Ip.jsx)(L$,{isActive:n,onClick:i,children:t})},B$=e=>{var n;let{server:i}=e;const{mcpMarketplaceCatalog:r}=Ap(),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),c=()=>{Sp.postMessage({type:"restartMcpServer",text:i.name})};return(0,Ip.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px",background:"var(--vscode-textCodeBlock-background)",cursor:i.error?"default":"pointer",borderRadius:o||i.error?"4px 4px 0 0":"4px",opacity:i.disabled?.6:1},onClick:()=>{i.error||s(!o)},children:[!i.error&&(0,Ip.jsx)("span",{className:"codicon codicon-chevron-"+(o?"down":"right"),style:{marginRight:"8px"}}),(0,Ip.jsx)("span",{style:{flex:1,overflow:"hidden",wordBreak:"break-all",whiteSpace:"normal",display:"flex",alignItems:"center",marginRight:"4px"},children:pv(i.name,r)}),(0,Ip.jsx)("div",{style:{display:"flex",alignItems:"center",marginRight:"8px"},onClick:e=>e.stopPropagation(),children:(0,Ip.jsx)("div",{role:"switch","aria-checked":!i.disabled,tabIndex:0,style:{width:"20px",height:"10px",backgroundColor:i.disabled?"var(--vscode-titleBar-inactiveForeground)":"var(--vscode-testing-iconPassed)",borderRadius:"5px",position:"relative",cursor:"pointer",transition:"background-color 0.2s",opacity:i.disabled?.5:.9},onClick:()=>{Sp.postMessage({type:"toggleMcpServer",serverName:i.name,disabled:!i.disabled})},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Sp.postMessage({type:"toggleMcpServer",serverName:i.name,disabled:!i.disabled}))},children:(0,Ip.jsx)("div",{style:{width:"6px",height:"6px",backgroundColor:"white",border:"1px solid color-mix(in srgb, #666666 65%, transparent)",borderRadius:"50%",position:"absolute",top:"1px",left:i.disabled?"2px":"12px",transition:"left 0.2s"}})})}),(0,Ip.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:(()=>{switch(i.status){case"connected":return"var(--vscode-testing-iconPassed)";case"connecting":return"var(--vscode-charts-yellow)";case"disconnected":return"var(--vscode-testing-iconFailed)"}})(),marginLeft:"8px"}})]}),i.error?(0,Ip.jsxs)("div",{style:{fontSize:"13px",background:"var(--vscode-textCodeBlock-background)",borderRadius:"0 0 4px 4px",width:"100%"},children:[(0,Ip.jsx)("div",{style:{color:"var(--vscode-testing-iconFailed)",marginBottom:"8px",padding:"0 10px",overflowWrap:"break-word",wordBreak:"break-word"},children:i.error}),(0,Ip.jsx)(ts,{appearance:"secondary",onClick:c,disabled:"connecting"===i.status,style:{width:"calc(100% - 20px)",margin:"0 10px 10px 10px"},children:"connecting"===i.status?"Retrying...":"Retry Connection"})]}):o&&(0,Ip.jsxs)("div",{style:{background:"var(--vscode-textCodeBlock-background)",padding:"0 10px 10px 10px",fontSize:"13px",borderRadius:"0 0 4px 4px"},children:[(0,Ip.jsxs)(ss,{children:[(0,Ip.jsxs)(as,{id:"tools",children:["Tools (",(null===(n=i.tools)||void 0===n?void 0:n.length)||0,")"]}),(0,Ip.jsxs)(as,{id:"resources",children:["Resources (",[...i.resourceTemplates||[],...i.resources||[]].length||0,")"]}),(0,Ip.jsx)(ls,{id:"tools-view",children:i.tools&&i.tools.length>0?(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:i.tools.map((e=>(0,Ip.jsx)(Mv,{tool:e,serverName:i.name},e.name)))}):(0,Ip.jsx)("div",{style:{padding:"10px 0",color:"var(--vscode-descriptionForeground)"},children:"No tools found"})}),(0,Ip.jsx)(ls,{id:"resources-view",children:i.resources&&i.resources.length>0||i.resourceTemplates&&i.resourceTemplates.length>0?(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[...i.resourceTemplates||[],...i.resources||[]].map((e=>(0,Ip.jsx)(Av,{item:e},"uriTemplate"in e?e.uriTemplate:e.uri)))}):(0,Ip.jsx)("div",{style:{padding:"10px 0",color:"var(--vscode-descriptionForeground)"},children:"No resources found"})})]}),(0,Ip.jsx)(ts,{appearance:"secondary",onClick:c,disabled:"connecting"===i.status,style:{width:"calc(100% - 14px)",margin:"0 7px 3px 7px"},children:"connecting"===i.status?"Restarting...":"Restart Server"}),(0,Ip.jsx)(O$,{onClick:()=>{l(!0),Sp.postMessage({type:"deleteMcpServer",serverName:i.name})},disabled:a,style:{width:"calc(100% - 14px)",margin:"5px 7px 3px 7px"},children:a?"Deleting...":"Delete Server"})]})]})},U$=e=>{let{onDone:n}=e;const{mcpServers:i,mcpMarketplaceEnabled:r}=Ap(),[o,s]=(0,t.useState)(r?"marketplace":"installed"),a=e=>{s(e)};return(0,t.useEffect)((()=>{r||"marketplace"!==o||s("installed")}),[r,o]),(0,t.useEffect)((()=>{r&&(Sp.postMessage({type:"silentlyRefreshMcpMarketplace"}),Sp.postMessage({type:"fetchLatestMcpServersFromHub"}))}),[r]),(0,Ip.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 17px 5px 20px"},children:[(0,Ip.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"MCP Servers"}),(0,Ip.jsx)(ts,{onClick:n,children:"Done"})]}),(0,Ip.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",gap:"1px",padding:"0 20px 0 20px",borderBottom:"1px solid var(--vscode-panel-border)"},children:[r&&(0,Ip.jsx)(F$,{isActive:"marketplace"===o,onClick:()=>a("marketplace"),children:"Marketplace"}),(0,Ip.jsx)(F$,{isActive:"installed"===o,onClick:()=>a("installed"),children:"Installed"})]}),(0,Ip.jsxs)("div",{style:{width:"100%"},children:[r&&"marketplace"===o&&(0,Ip.jsx)(D$,{}),"installed"===o&&(0,Ip.jsxs)("div",{style:{padding:"16px 20px"},children:[(0,Ip.jsxs)("div",{style:{color:"var(--vscode-foreground)",fontSize:"13px",marginBottom:"16px",marginTop:"5px"},children:["The"," ",(0,Ip.jsx)(rs,{href:"https://github.com/modelcontextprotocol",style:{display:"inline"},children:"Model Context Protocol"})," ","enables communication with locally running MCP servers that provide additional tools and resources to extend blackbox's capabilities. You can use"," ",(0,Ip.jsx)(rs,{href:"https://github.com/modelcontextprotocol/servers",style:{display:"inline"},children:"community-made servers"})," ",'or ask blackbox to create new tools specific to your workflow (e.g., "add a tool that gets the latest npm docs").'," "]}),i.length>0?(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.map((e=>(0,Ip.jsx)(B$,{server:e},e.name)))}):(0,Ip.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:20,marginBottom:20,color:"var(--vscode-descriptionForeground)"},children:"No MCP servers installed"}),(0,Ip.jsxs)("div",{style:{marginBottom:"20px",marginTop:10},children:[(0,Ip.jsxs)(ts,{appearance:"secondary",style:{width:"100%",marginBottom:"5px"},onClick:()=>{Sp.postMessage({type:"openMcpSettings"})},children:[(0,Ip.jsx)("span",{className:"codicon codicon-server",style:{marginRight:"6px"}}),"Configure MCP Servers"]}),(0,Ip.jsx)("div",{style:{textAlign:"center"},children:(0,Ip.jsx)(rs,{onClick:()=>{Sp.postMessage({type:"openExtensionSettings",text:"blackbox.mcp"})},style:{fontSize:"12px"},children:"Advanced MCP Settings"})})]})]})]})]})]})},$$=e=>{let{onDone:n}=e;const{apiConfiguration:i,version:r,customInstructions:o,setCustomInstructions:s,openRouterModels:a,saveProviderConfiguration:l}=Ap(),[c,d]=(0,t.useState)(void 0),[u,h]=(0,t.useState)(void 0);(0,t.useEffect)((()=>{d(void 0),h(void 0)}),[i]);return(0,Ip.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,padding:"10px 0px 0px 20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Ip.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"17px",paddingRight:17},children:[(0,Ip.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"Settings"}),(0,Ip.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Ip.jsx)(ts,{onClick:()=>{const e=gb(i),t=vb(i,a);d(e),h(t),e||t||(null!==i&&void 0!==i&&i.apiProvider&&l(i.apiProvider,i),Sp.postMessage({type:"apiConfiguration",apiConfiguration:i}),Sp.postMessage({type:"customInstructions",text:o}),n())},children:"Save"}),(0,Ip.jsx)("span",{onClick:n,style:{marginLeft:"0.5rem",cursor:"pointer"},children:"Discard"})]})]}),(0,Ip.jsxs)("div",{style:{flexGrow:1,overflowY:"scroll",paddingRight:8,display:"flex",flexDirection:"column"},children:[(0,Ip.jsx)("div",{style:{marginBottom:5},children:(0,Ip.jsx)(ov,{showModelOptions:!0,apiErrorMessage:c,modelIdErrorMessage:u})}),(0,Ip.jsxs)("div",{style:{marginBottom:5},children:[(0,Ip.jsx)(hs,{value:null!==o&&void 0!==o?o:"",style:{width:"100%"},resize:"vertical",rows:4,placeholder:'e.g. "Run unit tests at the end", "Use TypeScript with async/await", "Speak in Spanish"',onInput:e=>{var t,n;return s(null!==(t=null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"")},children:(0,Ip.jsx)("span",{style:{fontWeight:"500"},children:"Custom Instructions"})}),(0,Ip.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:"These instructions are added to the end of the system prompt sent with every request."})]}),false,(0,Ip.jsx)("div",{style:{marginTop:"auto",paddingRight:8,display:"flex",justifyContent:"center"}}),(0,Ip.jsxs)("div",{style:{textAlign:"center",color:"var(--vscode-descriptionForeground)",fontSize:"12px",lineHeight:"1.2",padding:"0 8px 15px 0"},children:[(0,Ip.jsxs)("p",{style:{wordWrap:"break-word",margin:0,padding:0},children:["If you have any questions or feedback, feel free to contact us at"," ",(0,Ip.jsx)(rs,{href:"mailto:gisele@blackbox.ai",style:{display:"inline"},children:"gisele@blackbox.ai"})]}),(0,Ip.jsxs)("p",{style:{fontStyle:"italic",margin:"10px 0 0 0",padding:0},children:["v",r]})]})]})]})},z$=(0,t.memo)($$),V$={apiProvider:"qwen"},H$=()=>{const{didHydrateState:e,showWelcome:n,paymentMethodId:i,apiConfiguration:r,useModelFromUserKey:o,setUseModelFromUserKey:s,providerConfigurations:a,lastOpenProvider:l,customInstructions:c}=Ap(),[d,h]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[y,x]=(0,t.useState)(!1),[k,w]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[T,E]=(0,t.useState)(""),[_,I]=(0,t.useState)(!1),[P,R]=(0,t.useState)(!0),[A,M]=(0,t.useState)(""),[O,N]=(0,t.useState)((()=>!localStorage.getItem("blackbox_redeem_success"))),[j,D]=(0,t.useState)(!0),[L,F]=(0,t.useState)(!1),[B,U]=(0,t.useState)(null),[$,z]=(0,t.useState)(!1),[V,H]=(0,t.useState)(null),[W,q]=(0,t.useState)(0),[K,G]=(0,t.useState)(!1),Y=(0,t.useCallback)((()=>{q((e=>e+1))}),[]),[Q,X]=(0,t.useState)(0),[J,Z]=(0,t.useState)(!1),[ee,te]=(0,t.useState)(!1),[ne,ie]=(0,t.useState)({...V$}),[re,oe]=(0,t.useState)(!1),[se,ae]=(0,t.useState)((()=>{const e=localStorage.getItem("auto-fill");return null===e||"true"===e})),[le,ce]=(0,t.useState)(!1),[de,ue]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),[fe,me]=(0,t.useState)((()=>f.find((e=>9.99===e.price))||f[0])),[ge,ve]=(0,t.useState)(0),[be,ye]=(0,t.useState)((()=>localStorage.getItem("blackbox_redeem_success")?"blackbox-pro":"blackbox-base")),xe=v||m||y||$||L,ke=async(e,t)=>{const n=le?"get-subscription":"purchase-credits",i=await fetch(`${xI}/api/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:T,amount:e.toString(),...t?{paymentMethod:t}:{},...le?{autoConfirm:!0}:{}})});return await i.json()};(0,t.useEffect)((()=>{k&&!ee&&Se()}),[k]),(0,t.useEffect)((()=>{"true"===localStorage.getItem("blackbox_redeem_success")&&!ee&&Se()}),[]),(0,t.useEffect)((()=>{if(be&&be!==ne.apiProvider){const e="true"===localStorage.getItem("blackbox_redeem_success"),t={...ne,apiProvider:be,hasRedeemedCoupon:e};ie(t),Sp.postMessage({type:"apiConfiguration",apiConfiguration:t})}}),[be,ne.apiProvider]);const we=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(!0){if(!0===ee&&""!==T&&se&&Q<1){const n=localStorage.getItem("lastAutoFillError");if(re||"true"===n)return void(e&&S(!0));oe(!0),await new Promise((e=>setTimeout(e,100)));try{const t=localStorage.getItem("lastAutoFillTimestamp"),n=Date.now();if(t&&n-parseInt(t)<3e5)return void(e&&S(!0));await(async()=>{const e=2e3;try{var t,n;let o=await ke(e);if(null!==(t=o)&&void 0!==t&&t.error&&(console.warn(o.error),console.log("retrying auto-refill with stored payment method"),i&&(o=await ke(e,i))),null!==(n=o)&&void 0!==n&&n.error||!o.success)throw new Error("Credit purchase failed");var r;if(null!==(r=o)&&void 0!==r&&r.requiresAction)throw new Error("3DS authentication required");{const t=20,n=Math.max(Q,0)+t;return Sp.postMessage({type:"updateUserCredits",value:n.toString()}),Sp.postMessage({type:"showInformationMessage",text:`Successfully purchased ${t} credits!`}),ve(e),!0}}catch(o){return console.error("Credit purchase error:",o),Sp.postMessage({type:"showMessage",text:"Failed to purchase credits. Please try again."}),!1}})()?(S(!0),localStorage.removeItem("lastAutoFillError"),localStorage.setItem("lastAutoFillTimestamp",n.toString())):localStorage.setItem("lastAutoFillError","true")}catch(t){console.error("Auto-fill error:",t),localStorage.setItem("lastAutoFillError","true")}finally{await new Promise((e=>setTimeout(e,300))),oe(!1)}}return void(e&&S(!0))}let n="https://www.blackbox.ai",r=yI(),o={productId:"prod_RI1k0eOeA1Xf5u",productName:"cybercoder"},s=`${n}/api/buy-credits?productId=${o.productId}&userId=${r}&productName=${o.productName}`;Sp.postMessage({type:"openBrowserLink",text:s})}catch(t){console.error(t),Sp.postMessage({type:"showMessage",text:"Failed to upgrade. Please try again."})}};(0,t.useEffect)((()=>{(async()=>{await nI(500),J&&se&&!re&&Q<1&&await we(!1)})()}),[Q,se]);const Ce=()=>{Sp.postMessage({type:"getUserCredits"})},Se=(0,t.useCallback)((async e=>{const t=!(null!==e&&void 0!==e&&e.stopUpgrade),n="true"===localStorage.getItem("blackbox_redeem_success");if(j)Sp.postMessage({type:"customApiConfiguration",customApiConfiguration:r});else{if(!n){t&&we();const e="qwen",i={...ne,apiProvider:e,hasRedeemedCoupon:n};return ie(i),Sp.postMessage({type:"apiConfiguration",apiConfiguration:i}),void te(!1)}Sp.postMessage({type:"toggleProButton",proOnOffValue:!0,hasRedeemedCoupon:n})}}),[Q,ne,ie,r]),Te=(0,t.useCallback)((async e=>{const t=e.data;switch(t.type){case"updateUserCredits":if(t.value){const e=parseFloat(t.value);X(e),Z(!0)}else null===t.value&&X(0);break;case"updateCustomerId":t.value?(E(t.value),I(t.value.startsWith("tus_"))):null===t.value&&(E(""),I(!1));break;case"getLocalStorageValues":Sp.postMessage({type:"syncLocalStorage",localStorageValues:{blackbox_redeem_success:localStorage.getItem("blackbox_redeem_success"),blackbox_coupon_code:localStorage.getItem("blackbox_coupon_code"),blackbox_userId:localStorage.getItem("blackbox_userId")}});break;case"syncLocalStorage":t.localStorageValues&&(t.localStorageValues.blackbox_redeem_success&&(localStorage.setItem("blackbox_redeem_success",t.localStorageValues.blackbox_redeem_success),w("true"===t.localStorageValues.blackbox_redeem_success)),t.localStorageValues.blackbox_coupon_code&&localStorage.setItem("blackbox_coupon_code",t.localStorageValues.blackbox_coupon_code),t.localStorageValues.blackbox_userId&&localStorage.setItem("blackbox_userId",t.localStorageValues.blackbox_userId),t.localStorageValues.agent_mode&&N("chatModeEnabled"===t.localStorageValues.agent_mode));break;case"toggleProButton":Boolean(t.proOnOffValue)?(void 0!==t.hasRedeemedCoupon&&w(t.hasRedeemedCoupon),localStorage.setItem("blackbox_redeem_success","true"),te((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success"),n={...ne,apiProvider:"sonnet",hasRedeemedCoupon:t};return ie(n),Sp.postMessage({type:"apiConfiguration",apiConfiguration:n}),!0}))):te((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success"),n={...ne,apiProvider:"qwen",hasRedeemedCoupon:t};return ie(n),Sp.postMessage({type:"apiConfiguration",apiConfiguration:n}),!1}));break;case"inviteCodeEntered":if(null!==t&&void 0!==t&&t.text)("paymentSuccess"===(null===t||void 0===t?void 0:t.text)||"trialPromoCode"===(null===t||void 0===t?void 0:t.text))&&(localStorage.setItem("blackbox_redeem_success","true"),Sp.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),w(!0),"blackbox-base"===be&&ye("blackbox-pro"));else{await async function(e){let t=yI(),n=await fetch(`${bI}/api/referral/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralId:e,receiverId:t})}),i=await n.json();return i&&null!==i&&void 0!==i&&i.success?i.success:null}(null===t||void 0===t?void 0:t.value)&&(localStorage.setItem("blackbox_redeem_success","true"),Sp.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),w(!0))}null!==t&&void 0!==t&&t.value&&function(e){try{return!!e&&cB.includes(e)}catch(t){return!1}}(null===t||void 0===t?void 0:t.value)&&(Sp.postMessage({type:"couponCodeEntered",value:t.value}),localStorage.setItem("blackbox_coupon_code",t.value),Sp.postMessage({type:"updateGlobalState",key:"blackbox_coupon_code",value:t.value}));break;case"action":switch(t.action){case"apiKeyButtonClicked":b(!0),g(!1),x(!1),z(!1),F(!1);break;case"settingsButtonClicked":g(!0),x(!1),z(!1),F(!1),b(!1);break;case"historyButtonClicked":g(!1),x(!0),z(!1),F(!1),b(!1);break;case"mcpButtonClicked":g(!1),x(!1),z(!1),F(!0),b(!1);break;case"chatButtonClicked":g(!1),x(!1),F(!1),z(!1),b(!1),Se({stopUpgrade:!0});break;case"groupChatButtonClicked":g(!1),x(!1),z(!0),F(!1),b(!1),H({...t.data});break;case"joinGroupChatWithRoomId":g(!1),x(!1),z(!0),F(!1),H({...t.data}),b(!1),Y();break;case"showChatRooms":g(!1),x(!1),z(!0),b(!1),F(!1),H({...t.data});break;case"showVoiceAssistant":g(!1),x(!1),z(!1),b(!1),F(!1),G(!0);break;case"hideVoiceAssistant":G(!1);break;case"addCredits":ue(!1),_||S(!0);break;case"moreOptions":S(!1),ue(!0);break;case"toggleApiMode":pe(!he)}}}),[]);return u("message",Te),e?(0,Ip.jsx)(Ip.Fragment,{children:(0,Ip.jsxs)(Ip.Fragment,{children:[v&&(0,Ip.jsx)(z$,{onDone:()=>b(!1)}),m&&(0,Ip.jsx)(lB,{onDone:()=>g(!1)}),y&&(0,Ip.jsx)(Hf,{onDone:()=>x(!1)}),L&&(0,Ip.jsx)(U$,{onDone:()=>F(!1)}),(0,Ip.jsx)(sB,{showHistoryView:()=>{g(!1),F(!1),x(!0)},setRedeemedSuccess:w,redeemedSuccess:k,isHidden:xe,handleProVersionToggle:Se,redeemInviteForAccess:async()=>{Sp.postMessage({type:"showInputBox",options:{prompt:"Enter your invite code",placeHolder:"e.g. ABC123",title:"Redeem Invite Code"}})},isPro:ee,setUserCredits:X,toggleUseModel:j,setToggleUseModel:D,apiConfiguration:ne,userCredits:Q,fetchUserCredits:Ce,setApiConfiguration:ie,chatModeEnableDisable:O,setChatModeEnableDisable:N,upgradeForAccess:we,customerId:T,setCustomerId:E,selectedModel:be,setSelectedModel:ye,showVoiceAssistant:K,setShowVoiceAssistant:G,isAutoApprove:P,setIsAutoApprove:R,waitingToResume:B,setWaitingToResume:U,showOverflowMenu:de,setShowOverflowMenu:ue}),(0,Ip.jsx)("style",{children:"\n\t\t\t\t\t\t.api-mode-option {\n\t\t\t\t\t\t\tpadding: 4px 8px;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\t\ttransition: background-color 0.2s;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.api-mode-option:hover {\n\t\t\t\t\t\t\tbackground-color: var(--vscode-list-hoverBackground);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.api-mode-option.active {\n\t\t\t\t\t\t\tbackground-color: var(--vscode-editorGroup-border);\n\t\t\t\t\t\t\tcolor: var(--vscode-dropdown-foreground);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.api-mode-option.active:hover {\n\t\t\t\t\t\t\tbackground-color: var(--vscode-editorGroup-border);\n\t\t\t\t\t\t}\n\t\t\t\t\t"}),he&&(0,Ip.jsxs)(Ip.Fragment,{children:[(0,Ip.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999},onClick:()=>pe(!1)}),(0,Ip.jsx)("div",{style:{position:"fixed",top:"3px",right:"77px",backgroundColor:"var(--vscode-sideBar-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"5px",padding:"4px",zIndex:1e3,minWidth:"75px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onKeyDown:e=>{"Escape"===e.key&&pe(!1)},tabIndex:0,autoFocus:!0,children:(0,Ip.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[(0,Ip.jsx)("div",{className:"api-mode-option "+(j?"active":""),onClick:()=>{s(!0),l&&a[l]?(Sp.postMessage({type:"apiConfiguration",apiConfiguration:a[l]}),Sp.postMessage({type:"customInstructions",text:c})):null===r||void 0===r||!r.apiProvider||p.includes(null===r||void 0===r?void 0:r.apiProvider)?h(!0):(Sp.postMessage({type:"apiConfiguration",apiConfiguration:r}),Sp.postMessage({type:"customInstructions",text:c})),Sp.postMessage({type:"toggleUseSelectedModel",bool:!0}),D(!0),pe(!1),g(!1)},children:"Blackbox"}),(0,Ip.jsx)("div",{className:"api-mode-option "+(j?"":"active"),onClick:()=>{s(!1),h(!1),Sp.postMessage({type:"apiConfiguration",apiConfiguration:ne}),Sp.postMessage({type:"toggleUseSelectedModel",bool:!1}),D(!1),pe(!1),g(!0)},children:"API"})]})})]}),C&&!_&&(0,Ip.jsx)(R$,{onClose:()=>{S(!1)},onSuccess:async e=>{if("subscription"===e.mode||null!==e&&void 0!==e&&e.cardElementVisible){const{customer:t,cardElementVisible:n,creditAmount:i}=e;await localStorage.setItem("blackbox_redeem_success","true"),Sp.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),null!==t&&void 0!==t&&t.id&&null!==t&&void 0!==t&&t.email&&(Sp.postMessage({type:"updateGlobalState",key:"customerId",value:null===t||void 0===t?void 0:t.id}),Sp.postMessage({type:"updateGlobalState",key:"customerEmail",value:null===t||void 0===t?void 0:t.email}),E(null===t||void 0===t?void 0:t.id),M(null===t||void 0===t?void 0:t.email)),n?Sp.postMessage({type:"showInformationMessage",text:`Successfully purchased ${i||0} credits!`}):(Sp.postMessage({type:"showInformationMessage",text:"Congratulations! You are successfully subscribed to Pro version."}),"blackbox-base"===be&&ye("blackbox-pro"),fe&&Sp.postMessage({type:"updateGlobalState",key:"tierId",value:fe.id})),Ce(),setTimeout((()=>{"true"===localStorage.getItem("blackbox_redeem_success")&&!ee&&Se({stopUpgrade:!0})}),1e3)}else{const{paymentIntent:t}=e;ve(t.amount);const n=t.amount/100;Ce(),Sp.postMessage({type:"showInformationMessage",text:`Successfully purchased ${n} credits!`})}localStorage.removeItem("lastAutoFillError"),"wait_for_credits"===B&&U("resume_task"),null!==e&&void 0!==e&&e.paymentMethodId&&Sp.postMessage({type:"updatePaymentMethod",paymentMethodId:null===e||void 0===e?void 0:e.paymentMethodId}),S(!1)},planId:"price_example",amount:T?20:19.99,stripePublicKey:"pk_live_NjCA1yGv5ie85lOhnTt2E11z005pitDerS",mode:T?"credits":"subscription",customerId:T,customerEmail:A,enableAutoFill:se,setEnableAutoFill:e=>{ae(e),localStorage.setItem("auto-fill",e.toString())},currentCredits:Q,setSelectedModel:ye,isMonthly:le,setIsMonthly:ce,fetchUserCredits:Ce,setSelectedTier:me,selectedTier:fe}),C&&_&&(0,Ip.jsx)(A$,{onClose:()=>S(!1)}),(0,Ip.jsx)(jU,{children:(0,Ip.jsx)(f$,{paramData:V,isHidden:!$,apiConfiguration:ne,setApiConfiguration:ie})},W)]})}):null},W$=()=>(0,Ip.jsx)(Rp,{children:(0,Ip.jsx)(rI,{children:(0,Ip.jsx)(H$,{})})}),q$=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),i(e),r(e),o(e),s(e)}))};r.createRoot(document.getElementById("root")).render((0,Ip.jsx)(t.StrictMode,{children:(0,Ip.jsx)(W$,{})})),q$()})()})();
//# sourceMappingURL=main.js.map