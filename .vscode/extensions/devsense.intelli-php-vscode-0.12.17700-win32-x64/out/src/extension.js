var tD=Object.create;var Ma=Object.defineProperty;var rD=Object.getOwnPropertyDescriptor;var nD=Object.getOwnPropertyNames;var wm=Object.getPrototypeOf,iD=Object.prototype.hasOwnProperty;var sD=Reflect.get;var bm=Math.pow;var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),oD=(t,e)=>{for(var r in e)Ma(t,r,{get:e[r],enumerable:!0})},Em=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nD(e))!iD.call(t,i)&&i!==r&&Ma(t,i,{get:()=>e[i],enumerable:!(n=rD(e,i))||n.enumerable});return t};var Qi=(t,e,r)=>(r=t!=null?tD(wm(t)):{},Em(e||!t||!t.__esModule?Ma(r,"default",{value:t,enumerable:!0}):r,t)),aD=t=>Em(Ma({},"__esModule",{value:!0}),t);var wl=(t,e,r)=>sD(wm(t),r,e);var G=(t,e,r)=>new Promise((n,i)=>{var s=c=>{try{a(r.next(c))}catch(u){i(u)}},o=c=>{try{a(r.throw(c))}catch(u){i(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,o);a((r=r.apply(t,e)).next())});var bl=v(Tm=>{var Sm=require("url"),cD=require("child_process").spawn,Ji=require("fs");Tm.XMLHttpRequest=function(){"use strict";var t=this,e=require("http"),r=require("https"),n,i,s={},o=!1,a={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},c={},u={},f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],h=["TRACE","TRACK","CONNECT"],m=!1,y=!1,S={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var I=function(D){return o||D&&f.indexOf(D.toLowerCase())===-1},M=function(D){return D&&h.indexOf(D)===-1};this.open=function(D,O,x,j,oe){if(this.abort(),y=!1,!M(D))throw new Error("SecurityError: Request method not allowed");s={method:D,url:O.toString(),async:typeof x!="boolean"?!0:x,user:j||null,password:oe||null},k(this.OPENED)},this.setDisableHeaderCheck=function(D){o=D},this.setRequestHeader=function(D,O){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!I(D)){console.warn('Refused to set unsafe header "'+D+'"');return}if(m)throw new Error("INVALID_STATE_ERR: send flag is true");D=u[D.toLowerCase()]||D,u[D.toLowerCase()]=D,c[D]=c[D]?c[D]+", "+O:O},this.getResponseHeader=function(D){return typeof D=="string"&&this.readyState>this.OPENED&&i&&i.headers&&i.headers[D.toLowerCase()]&&!y?i.headers[D.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||y)return"";var D="";for(var O in i.headers)O!=="set-cookie"&&O!=="set-cookie2"&&(D+=O+": "+i.headers[O]+`\r
`);return D.substr(0,D.length-2)},this.getRequestHeader=function(D){return typeof D=="string"&&u[D.toLowerCase()]?c[u[D.toLowerCase()]]:""},this.send=function(D){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(m)throw new Error("INVALID_STATE_ERR: send has already been called");var O=!1,x=!1,j=Sm.parse(s.url),oe;switch(j.protocol){case"https:":O=!0;case"http:":oe=j.hostname;break;case"file:":x=!0;break;case void 0:case null:case"":oe="localhost";break;default:throw new Error("Protocol not supported.")}if(x){if(s.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(s.async)Ji.readFile(j.pathname,"utf8",function(Ve,dt){Ve?t.handleError(Ve):(t.status=200,t.responseText=dt,k(t.DONE))});else try{this.responseText=Ji.readFileSync(j.pathname,"utf8"),this.status=200,k(t.DONE)}catch(Ve){this.handleError(Ve)}return}var Ee=j.port||(O?443:80),ke=j.pathname+(j.search?j.search:"");for(var me in a)u[me.toLowerCase()]||(c[me]=a[me]);if(c.Host=oe,O&&Ee===443||Ee===80||(c.Host+=":"+j.port),s.user){typeof s.password>"u"&&(s.password="");var tt=new Buffer(s.user+":"+s.password);c.Authorization="Basic "+tt.toString("base64")}s.method==="GET"||s.method==="HEAD"?D=null:D?(c["Content-Length"]=Buffer.isBuffer(D)?D.length:Buffer.byteLength(D),c["Content-Type"]||(c["Content-Type"]="text/plain;charset=UTF-8")):s.method==="POST"&&(c["Content-Length"]=0);var ze={host:oe,port:Ee,path:ke,method:s.method,headers:c,agent:!1,withCredentials:t.withCredentials};if(y=!1,s.async){var vt=O?r.request:e.request;m=!0,t.dispatchEvent("readystatechange");var yt=function Ve(dt){if(i=dt,i.statusCode===301||i.statusCode===302||i.statusCode===303||i.statusCode===307){s.url=i.headers.location;var It=Sm.parse(s.url);oe=It.hostname;var Kr={hostname:It.hostname,port:It.port,path:It.path,method:i.statusCode===303?"GET":s.method,headers:c,withCredentials:t.withCredentials};n=vt(Kr,Ve).on("error",_t),n.end();return}i.setEncoding("utf8"),k(t.HEADERS_RECEIVED),t.status=i.statusCode,i.on("data",function(or){or&&(t.responseText+=or),m&&k(t.LOADING)}),i.on("end",function(){m&&(k(t.DONE),m=!1)}),i.on("error",function(or){t.handleError(or)})},_t=function(dt){t.handleError(dt)};n=vt(ze,yt).on("error",_t),D&&n.write(D),n.end(),t.dispatchEvent("loadstart")}else{var Ke=".node-xmlhttprequest-content-"+process.pid,Ct=".node-xmlhttprequest-sync-"+process.pid;Ji.writeFileSync(Ct,"","utf8");for(var we="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(O?"s":"")+".request;var options = "+JSON.stringify(ze)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+Ke+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+Ct+"');});response.on('error', function(error) {fs.writeFileSync('"+Ke+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+Ct+"');});}).on('error', function(error) {fs.writeFileSync('"+Ke+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+Ct+"');});"+(D?"req.write('"+JSON.stringify(D).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",sr=cD(process.argv[0],["-e",we]);Ji.existsSync(Ct););var Pe=JSON.parse(Ji.readFileSync(Ke,"utf8"));sr.stdin.end(),Ji.unlinkSync(Ke),Pe.err?t.handleError(Pe.err):(i=Pe.data,t.status=Pe.data.statusCode,t.responseText=Pe.data.text,k(t.DONE))}},this.handleError=function(D){this.status=0,this.statusText=D,this.responseText=D.stack,y=!0,k(this.DONE),this.dispatchEvent("error")},this.abort=function(){n&&(n.abort(),n=null),c=a,this.status=0,this.responseText="",this.responseXML="",y=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||m)&&this.readyState!==this.DONE&&(m=!1,k(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(D,O){D in S||(S[D]=[]),S[D].push(O)},this.removeEventListener=function(D,O){D in S&&(S[D]=S[D].filter(function(x){return x!==O}))},this.dispatchEvent=function(D){if(typeof t["on"+D]=="function"&&t["on"+D](),D in S)for(var O=0,x=S[D].length;O<x;O++)S[D][O].call(t)};var k=function(D){(D==t.LOADING||t.readyState!==D)&&(t.readyState=D,(s.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE&&!y&&(t.dispatchEvent("load"),t.dispatchEvent("loadend")))}}});var Sl=v((WH,Dm)=>{"use strict";var Rm=require("fs"),El;function uD(){try{return Rm.statSync("/.dockerenv"),!0}catch{return!1}}function lD(){try{return Rm.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Dm.exports=()=>(El===void 0&&(El=uD()||lD()),El)});var xm=v((zH,Tl)=>{"use strict";var dD=require("os"),fD=require("fs"),Pm=Sl(),Im=()=>{if(process.platform!=="linux")return!1;if(dD.release().toLowerCase().includes("microsoft"))return!Pm();try{return fD.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Pm():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Tl.exports=Im:Tl.exports=Im()});var Om=v((KH,qm)=>{"use strict";qm.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var jm=v((VH,Fm)=>{var pD=require("path"),hD=require("child_process"),{promises:ja,constants:Mm}=require("fs"),Fa=xm(),gD=Sl(),Dl=Om(),km=pD.join(__dirname,"xdg-open"),{platform:Zi,arch:Am}=process,mD=()=>{try{return ja.statSync("/run/.containerenv"),!0}catch{return!1}},Rl;function vD(){return Rl===void 0&&(Rl=mD()||gD()),Rl}var yD=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await ja.access(r,Mm.F_OK),n=!0}catch{}if(!n)return t;let i=await ja.readFile(r,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),Nm=async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},$a=async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return Nm(t.app,a=>$a({...t,app:a}));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return Nm(e,a=>$a({...t,app:{name:a,arguments:r}}));let n,i=[],s={};if(Zi==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Zi==="win32"||Fa&&!vD()&&!e){let a=await yD();n=Fa?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Fa||(s.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(u=>`"\`"${u}\`""`),c.push(r.join(","))),t.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await ja.access(km,Mm.X_OK),c=!0}catch{}n=process.versions.electron||Zi==="android"||a||!c?"xdg-open":km}r.length>0&&i.push(...r),t.wait||(s.stdio="ignore",s.detached=!0)}t.target&&i.push(t.target),Zi==="darwin"&&r.length>0&&i.push("--args",...r);let o=hD.spawn(n,i,s);return t.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}a(o)})}):(o.unref(),o)},Pl=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return $a({...e,target:t})},_D=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return $a({...e,app:{name:t,arguments:r}})};function Lm(t){if(typeof t=="string"||Array.isArray(t))return t;let{[Am]:e}=t;if(!e)throw new Error(`${Am} is not supported`);return e}function Il({[Zi]:t},{wsl:e}){if(e&&Fa)return Lm(e);if(!t)throw new Error(`${Zi} is not supported`);return Lm(t)}var Ha={};Dl(Ha,"chrome",()=>Il({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Dl(Ha,"firefox",()=>Il({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Dl(Ha,"edge",()=>Il({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Pl.apps=Ha;Pl.openApp=_D;Fm.exports=Pl});var Mt=v((QH,es)=>{var YH=require("crypto");es.exports.linebrk=function(t,e){for(var r="",n=0;n+e<t.length;)r+=t.substring(n,n+e)+`
`,n+=e;return r+t.substring(n,t.length)};es.exports.detectEnvironment=function(){return typeof window<"u"&&window&&!(process&&process.title==="node")?"browser":"node"};es.exports.get32IntFromBuffer=function(t,e){e=e||0;var r=0;if((r=t.length-e)>0){if(r>=4)return t.readUIntBE(e,r);for(var n=0,i=e+r,s=0;i>e;i--,s+=2)n+=t[i-1]*Math.pow(16,s);return n}else return NaN};es.exports._={isObject:function(t){var e=typeof t;return!!t&&(e=="object"||e=="function")},isString:function(t){return typeof t=="string"||t instanceof String},isNumber:function(t){return typeof t=="number"||!isNaN(parseFloat(t))&&isFinite(t)},omit:function(t,e){var r={};for(var n in t)!t.hasOwnProperty(n)||n===e||(r[n]=t[n]);return r}};es.exports.trimSurroundingText=function(t,e,r){var n=0,i=t.length,s=t.indexOf(e);s>=0&&(n=s+e.length);var o=t.indexOf(r,s);return o>=0&&(i=o),t.substring(n,i)}});var di=v((ZH,Ym)=>{var CD=require("crypto"),wD=Mt()._,ts,bD=0xdeadbeefcafe,JH=(bD&16777215)==15715070;function A(t,e){t!=null&&(typeof t=="number"?this.fromNumber(t,e):Buffer.isBuffer(t)?this.fromBuffer(t):e==null&&typeof t!="string"?this.fromByteArray(t):this.fromString(t,e))}function ue(){return new A(null)}function ED(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this[t]&16383,u=this[t++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r[n]+i,i=(c>>28)+(f>>14)+a*u,r[n++]=c&268435455}return i}A.prototype.am=ED;ts=28;A.prototype.DB=ts;A.prototype.DM=(1<<ts)-1;A.prototype.DV=1<<ts;var kl=52;A.prototype.FV=Math.pow(2,kl);A.prototype.F1=kl-ts;A.prototype.F2=2*ts-kl;var SD="0123456789abcdefghijklmnopqrstuvwxyz",Ba=new Array,rs,Cr;rs="0".charCodeAt(0);for(Cr=0;Cr<=9;++Cr)Ba[rs++]=Cr;rs="a".charCodeAt(0);for(Cr=10;Cr<36;++Cr)Ba[rs++]=Cr;rs="A".charCodeAt(0);for(Cr=10;Cr<36;++Cr)Ba[rs++]=Cr;function Ol(t){return SD.charAt(t)}function Km(t,e){var r=Ba[t.charCodeAt(e)];return r??-1}function TD(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function RD(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function Nn(t){var e=ue();return e.fromInt(t),e}function DD(t,e,r){var n;switch(e){case 2:n=1;break;case 4:n=2;break;case 8:n=3;break;case 16:n=4;break;case 32:n=5;break;case 256:n=8;break;default:this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,s=!1,o=0;--i>=0;){var a=n==8?t[i]&255:Km(t,i);if(a<0){t.charAt(i)=="-"&&(s=!0);continue}s=!1,o===0?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}!r&&n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&A.ZERO.subTo(this,this)}function PD(t,e){this.fromString(t,256,e)}function ID(t){this.fromString(t,256,!0)}function xD(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function qD(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=Ol(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=Ol(n));return i?s:"0"}function OD(){var t=ue();return A.ZERO.subTo(this,t),t}function kD(){return this.s<0?this.negate():this}function AD(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this[r]-t[r])!=0)return e;return 0}function Ua(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function ND(){return this.t<=0?0:this.DB*(this.t-1)+Ua(this[this.t-1]^this.s&this.DM)}function LD(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function MD(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function FD(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e[a+s+1]=this[a]>>n|o,o=(this[a]&i)<<r;for(a=s-1;a>=0;--a)e[a]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function jD(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function $D(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()}function HD(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&A.ZERO.subTo(e,e)}function BD(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function UD(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=ue());var s=ue(),o=this.s,a=t.s,c=this.DB-Ua(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,f=s[u-1];if(f!==0){var h=f*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),m=this.FV/h,y=(1<<this.F1)/h,S=1<<this.F2,I=r.t,M=I-u,k=e??ue();for(s.dlShiftTo(M,k),r.compareTo(k)>=0&&(r[r.t++]=1,r.subTo(k,r)),A.ONE.dlShiftTo(u,k),k.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--M>=0;){var D=r[--I]==f?this.DM:Math.floor(r[I]*m+(r[I-1]+S)*y);if((r[I]+=s.am(0,D,r,M,0,u))<D)for(s.dlShiftTo(M,k),r.subTo(k,r);r[I]<--D;)r.subTo(k,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&A.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&A.ZERO.subTo(r,r)}}}function WD(t){var e=ue();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(A.ZERO)>0&&t.subTo(e,e),e}function ui(t){this.m=t}function zD(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function KD(t){return t}function VD(t){t.divRemTo(this.m,null,t)}function GD(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function XD(t,e){t.squareTo(e),this.reduce(e)}ui.prototype.convert=zD;ui.prototype.revert=KD;ui.prototype.reduce=VD;ui.prototype.mulTo=GD;ui.prototype.sqrTo=XD;function YD(){if(this.t<1)return 0;var t=this[0];if((t&1)===0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function li(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function QD(t){var e=ue();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(A.ZERO)>0&&this.m.subTo(e,e),e}function JD(t){var e=ue();return t.copyTo(e),this.reduce(e),e}function ZD(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t[e]&32767,n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function eP(t,e){t.squareTo(e),this.reduce(e)}function tP(t,e,r){t.multiplyTo(e,r),this.reduce(r)}li.prototype.convert=QD;li.prototype.revert=JD;li.prototype.reduce=ZD;li.prototype.mulTo=tP;li.prototype.sqrTo=eP;function rP(){return(this.t>0?this[0]&1:this.s)===0}function nP(t,e){if(t>4294967295||t<1)return A.ONE;var r=ue(),n=ue(),i=e.convert(this),s=Ua(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function iP(t,e){var r;return t<256||e.isEven()?r=new ui(e):r=new li(e),this.exp(t,r)}function sP(){var t=ue();return this.copyTo(t),t}function oP(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t===0)return-1}else{if(this.t==1)return this[0];if(this.t===0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function aP(){return this.t==0?this.s:this[0]<<24>>24}function cP(){return this.t==0?this.s:this[0]<<16>>16}function uP(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function lP(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function dP(t){if(t==null&&(t=10),this.signum()===0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Nn(r),i=ue(),s=ue(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function fP(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=Km(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()===0&&(i=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&A.ZERO.subTo(this,this)}function pP(t,e){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t),this.testBit(t-1)||this.bitwiseTo(A.ONE.shiftLeft(t-1),Al,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(A.ONE.shiftLeft(t-1),this);else{var r=CD.randomBytes((t>>3)+1),n=t&7;n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromByteArray(r)}}function hP(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i===0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function gP(t){var e=Buffer.from(this.toByteArray());if(t===!0&&e[0]===0)e=e.slice(1);else if(wD.isNumber(t)){if(e.length>t){for(var r=0;r<e.length-t;r++)if(e[r]!==0)return null;return e.slice(e.length-t)}else if(e.length<t){var n=Buffer.alloc(t);return n.fill(0,0,t-e.length),e.copy(n,t-e.length),n}}return e}function mP(t){return this.compareTo(t)==0}function vP(t){return this.compareTo(t)<0?this:t}function yP(t){return this.compareTo(t)>0?this:t}function _P(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function CP(t,e){return t&e}function wP(t){var e=ue();return this.bitwiseTo(t,CP,e),e}function Al(t,e){return t|e}function bP(t){var e=ue();return this.bitwiseTo(t,Al,e),e}function Vm(t,e){return t^e}function EP(t){var e=ue();return this.bitwiseTo(t,Vm,e),e}function Gm(t,e){return t&~e}function SP(t){var e=ue();return this.bitwiseTo(t,Gm,e),e}function TP(){for(var t=ue(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function RP(t){var e=ue();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function DP(t){var e=ue();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function PP(t){if(t===0)return-1;var e=0;return(t&65535)===0&&(t>>=16,e+=16),(t&255)===0&&(t>>=8,e+=8),(t&15)===0&&(t>>=4,e+=4),(t&3)===0&&(t>>=2,e+=2),(t&1)===0&&++e,e}function IP(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+PP(this[t]);return this.s<0?this.t*this.DB:-1}function xP(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function qP(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=xP(this[r]^e);return t}function OP(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function kP(t,e){var r=A.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function AP(t){return this.changeBit(t,Al)}function NP(t){return this.changeBit(t,Gm)}function LP(t){return this.changeBit(t,Vm)}function MP(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()}function FP(t){var e=ue();return this.addTo(t,e),e}function jP(t){var e=ue();return this.subTo(t,e),e}function $P(t){var e=ue();return this.multiplyTo(t,e),e}function HP(){var t=ue();return this.squareTo(t),t}function BP(t){var e=ue();return this.divRemTo(t,e,null),e}function UP(t){var e=ue();return this.divRemTo(t,null,e),e}function WP(t){var e=ue(),r=ue();return this.divRemTo(t,e,r),new Array(e,r)}function zP(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function KP(t,e){if(t!==0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function uo(){}function Xm(t){return t}function VP(t,e,r){t.multiplyTo(e,r)}function GP(t,e){t.squareTo(e)}uo.prototype.convert=Xm;uo.prototype.revert=Xm;uo.prototype.mulTo=VP;uo.prototype.sqrTo=GP;function XP(t){return this.exp(t,new uo)}function YP(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()}function QP(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function ns(t){this.r2=ue(),this.q3=ue(),A.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function JP(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ue();return t.copyTo(e),this.reduce(e),e}function ZP(t){return t}function eI(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function tI(t,e){t.squareTo(e),this.reduce(e)}function rI(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ns.prototype.convert=JP;ns.prototype.revert=ZP;ns.prototype.reduce=eI;ns.prototype.mulTo=rI;ns.prototype.sqrTo=tI;function nI(t,e){var r=t.bitLength(),n,i=Nn(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new ui(e):e.isEven()?s=new ns(e):s=new li(e);var o=new Array,a=3,c=n-1,u=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=ue();for(s.sqrTo(o[1],f);a<=u;)o[a]=ue(),s.mulTo(f,o[a-2],o[a]),a+=2}var h=t.t-1,m,y=!0,S=ue(),I;for(r=Ua(t[h])-1;h>=0;){for(r>=c?m=t[h]>>r-c&u:(m=(t[h]&(1<<r+1)-1)<<c-r,h>0&&(m|=t[h-1]>>this.DB+r-c)),a=n;(m&1)===0;)m>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),y)o[m].copyTo(i),y=!1;else{for(;a>1;)s.sqrTo(i,S),s.sqrTo(S,i),a-=2;a>0?s.sqrTo(i,S):(I=i,i=S,S=I),s.mulTo(S,o[m],i)}for(;h>=0&&(t[h]&1<<r)===0;)s.sqrTo(i,S),I=i,i=S,S=I,--r<0&&(r=this.DB-1,--h)}return s.revert(i)}function iI(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function sI(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e===0)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r}function oI(t){var e=t.isEven();if(this.isEven()&&e||t.signum()===0)return A.ZERO;for(var r=t.clone(),n=this.clone(),i=Nn(1),s=Nn(0),o=Nn(0),a=Nn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(A.ONE)!=0)return A.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Ft=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],aI=(1<<26)/Ft[Ft.length-1];function cI(t){var e,r=this.abs();if(r.t==1&&r[0]<=Ft[Ft.length-1]){for(e=0;e<Ft.length;++e)if(r[0]==Ft[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ft.length;){for(var n=Ft[e],i=e+1;i<Ft.length&&n<aI;)n*=Ft[i++];for(n=r.modInt(n);e<i;)if(n%Ft[e++]===0)return!1}return r.millerRabin(t)}function uI(t){var e=this.subtract(A.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);t=t+1>>1,t>Ft.length&&(t=Ft.length);for(var i=ue(),s=0;s<t;++s){i.fromInt(Ft[Math.floor(Math.random()*Ft.length)]);var o=i.modPow(n,this);if(o.compareTo(A.ONE)!=0&&o.compareTo(e)!=0){for(var a=1;a++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(A.ONE)===0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}A.prototype.copyTo=TD;A.prototype.fromInt=RD;A.prototype.fromString=DD;A.prototype.fromByteArray=PD;A.prototype.fromBuffer=ID;A.prototype.clamp=xD;A.prototype.dlShiftTo=LD;A.prototype.drShiftTo=MD;A.prototype.lShiftTo=FD;A.prototype.rShiftTo=jD;A.prototype.subTo=$D;A.prototype.multiplyTo=HD;A.prototype.squareTo=BD;A.prototype.divRemTo=UD;A.prototype.invDigit=YD;A.prototype.isEven=rP;A.prototype.exp=nP;A.prototype.chunkSize=uP;A.prototype.toRadix=dP;A.prototype.fromRadix=fP;A.prototype.fromNumber=pP;A.prototype.bitwiseTo=_P;A.prototype.changeBit=kP;A.prototype.addTo=MP;A.prototype.dMultiply=zP;A.prototype.dAddOffset=KP;A.prototype.multiplyLowerTo=YP;A.prototype.multiplyUpperTo=QP;A.prototype.modInt=sI;A.prototype.millerRabin=uI;A.prototype.toString=qD;A.prototype.negate=OD;A.prototype.abs=kD;A.prototype.compareTo=AD;A.prototype.bitLength=ND;A.prototype.mod=WD;A.prototype.modPowInt=iP;A.prototype.clone=sP;A.prototype.intValue=oP;A.prototype.byteValue=aP;A.prototype.shortValue=cP;A.prototype.signum=lP;A.prototype.toByteArray=hP;A.prototype.toBuffer=gP;A.prototype.equals=mP;A.prototype.min=vP;A.prototype.max=yP;A.prototype.and=wP;A.prototype.or=bP;A.prototype.xor=EP;A.prototype.andNot=SP;A.prototype.not=TP;A.prototype.shiftLeft=RP;A.prototype.shiftRight=DP;A.prototype.getLowestSetBit=IP;A.prototype.bitCount=qP;A.prototype.testBit=OP;A.prototype.setBit=AP;A.prototype.clearBit=NP;A.prototype.flipBit=LP;A.prototype.add=FP;A.prototype.subtract=jP;A.prototype.multiply=$P;A.prototype.divide=BP;A.prototype.remainder=UP;A.prototype.divideAndRemainder=WP;A.prototype.modPow=nI;A.prototype.modInverse=oI;A.prototype.pow=XP;A.prototype.gcd=iI;A.prototype.isProbablePrime=cI;A.int2char=Ol;A.ZERO=Nn(0);A.ONE=Nn(1);A.prototype.square=HP;Ym.exports=A});var ev=v((eB,Nl)=>{var Qm=di(),is=require("crypto"),Wa=require("constants"),lI={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},Jm={ripemd160:"rmd160"},Zm="sha256";Nl.exports={isEncryption:!0,isSignature:!0};Nl.exports.makeScheme=function(t,e){function r(n,i){this.key=n,this.options=i}return r.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Wa.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},r.prototype.encPad=function(n,i){i=i||{};var s;if(n.length>this.key.maxMessageLength)throw new Error("Message too long for RSA (n="+this.key.encryptedDataLength+", l="+n.length+")");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Wa.RSA_NO_PADDING)return s=Buffer.alloc(this.key.maxMessageLength-n.length),s.fill(0),Buffer.concat([s,n]);if(i.type===1)return s=Buffer.alloc(this.key.encryptedDataLength-n.length-1),s.fill(255,0,s.length-1),s[0]=1,s[s.length-1]=0,Buffer.concat([s,n]);s=Buffer.alloc(this.key.encryptedDataLength-n.length),s[0]=0,s[1]=2;for(var o=is.randomBytes(s.length-3),a=0;a<o.length;a++){for(var c=o[a];c===0;)c=is.randomBytes(1)[0];s[a+2]=c}return s[s.length-1]=0,Buffer.concat([s,n])},r.prototype.encUnPad=function(n,i){i=i||{};var s=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Wa.RSA_NO_PADDING){var o;return typeof n.lastIndexOf=="function"?o=n.slice(n.lastIndexOf("\0")+1,n.length):o=n.slice(String.prototype.lastIndexOf.call(n,"\0")+1,n.length),o}if(n.length<4)return null;if(i.type===1){if(n[0]!==0||n[1]!==1)return null;for(s=3;n[s]!==0;)if(n[s]!=255||++s>=n.length)return null}else{if(n[0]!==0||n[1]!==2)return null;for(s=3;n[s]!==0;)if(++s>=n.length)return null}return n.slice(s+1,n.length)},r.prototype.sign=function(n){var i=this.options.signingSchemeOptions.hash||Zm;if(this.options.environment==="browser"){i=Jm[i]||i;var s=is.createHash(i);s.update(n);var o=this.pkcs1pad(s.digest(),i),a=this.key.$doPrivate(new Qm(o)).toBuffer(this.key.encryptedDataLength);return a}else{var c=is.createSign("RSA-"+i.toUpperCase());return c.update(n),c.sign(this.options.rsaUtils.exportKey("private"))}},r.prototype.verify=function(n,i,s){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==Wa.RSA_NO_PADDING)return!1;var o=this.options.signingSchemeOptions.hash||Zm;if(this.options.environment==="browser"){o=Jm[o]||o,s&&(i=Buffer.from(i,s));var a=is.createHash(o);a.update(n);var c=this.pkcs1pad(a.digest(),o),u=this.key.$doPublic(new Qm(i));return u.toBuffer().toString("hex")==c.toString("hex")}else{var f=is.createVerify("RSA-"+o.toUpperCase());return f.update(n),f.verify(this.options.rsaUtils.exportKey("public"),i,s)}},r.prototype.pkcs0pad=function(n){var i=Buffer.alloc(this.key.maxMessageLength-n.length);return i.fill(0),Buffer.concat([i,n])},r.prototype.pkcs0unpad=function(n){var i;return typeof n.lastIndexOf=="function"?i=n.slice(n.lastIndexOf("\0")+1,n.length):i=n.slice(String.prototype.lastIndexOf.call(n,"\0")+1,n.length),i},r.prototype.pkcs1pad=function(n,i){var s=lI[i];if(!s)throw Error("Unsupported hash algorithm");var o=Buffer.concat([s,n]);if(o.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+i+")");var a=Buffer.alloc(this.key.encryptedDataLength-o.length-1);a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0;var c=Buffer.concat([a,o]);return c},new r(t,e)}});var tv=v((rB,Or)=>{var tB=di(),za=require("crypto");Or.exports={isEncryption:!0,isSignature:!1};Or.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};var Ka="sha1";Or.exports.eme_oaep_mgf1=function(t,e,r){r=r||Ka;for(var n=Or.exports.digestLength[r],i=Math.ceil(e/n),s=Buffer.alloc(n*i),o=Buffer.alloc(4),a=0;a<i;++a){var c=za.createHash(r);c.update(t),o.writeUInt32BE(a,0),c.update(o),c.digest().copy(s,a*n)}return s.slice(0,e)};Or.exports.makeScheme=function(t,e){function r(n,i){this.key=n,this.options=i}return r.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*Or.exports.digestLength[this.options.encryptionSchemeOptions.hash||Ka]-2},r.prototype.encPad=function(n){var i=this.options.encryptionSchemeOptions.hash||Ka,s=this.options.encryptionSchemeOptions.mgf||Or.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=this.key.encryptedDataLength,c=Or.exports.digestLength[i];if(n.length>a-2*c-2)throw new Error("Message is too long to encode into an encoded message with a length of "+a+" bytes, increaseemLen to fix this error (minimum value for given parameters and options: "+(a-2*c-2)+")");var u=za.createHash(i);u.update(o),u=u.digest();var f=Buffer.alloc(a-n.length-2*c-1);f.fill(0),f[f.length-1]=1;for(var h=Buffer.concat([u,f,n]),m=za.randomBytes(c),y=s(m,h.length,i),S=0;S<h.length;S++)h[S]^=y[S];for(y=s(h,c,i),S=0;S<m.length;S++)m[S]^=y[S];var I=Buffer.alloc(1+m.length+h.length);return I[0]=0,m.copy(I,1),h.copy(I,1+m.length),I},r.prototype.encUnPad=function(n){var i=this.options.encryptionSchemeOptions.hash||Ka,s=this.options.encryptionSchemeOptions.mgf||Or.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||Buffer.alloc(0),a=Or.exports.digestLength[i];if(n.length<2*a+2)throw new Error("Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message");for(var c=n.slice(1,a+1),u=n.slice(1+a),f=s(u,a,i),h=0;h<c.length;h++)c[h]^=f[h];for(f=s(c,u.length,i),h=0;h<u.length;h++)u[h]^=f[h];var m=za.createHash(i);m.update(o),m=m.digest();var y=u.slice(0,a);if(y.toString("hex")!=m.toString("hex"))throw new Error("Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.");for(h=a;u[h++]===0&&h<u.length;);if(u[h-1]!=1)throw new Error("Error decoding message, there is no padding message separator byte");return u.slice(h)},new r(t,e)}});var iv=v((nB,Ll)=>{var rv=di(),lo=require("crypto");Ll.exports={isEncryption:!1,isSignature:!0};var Va="sha1",nv=20;Ll.exports.makeScheme=function(t,e){var r=fi().pkcs1_oaep;function n(i,s){this.key=i,this.options=s}return n.prototype.sign=function(i){var s=lo.createHash(this.options.signingSchemeOptions.hash||Va);s.update(i);var o=this.emsa_pss_encode(s.digest(),this.key.keySize-1);return this.key.$doPrivate(new rv(o)).toBuffer(this.key.encryptedDataLength)},n.prototype.verify=function(i,s,o){o&&(s=Buffer.from(s,o)),s=new rv(s);var a=Math.ceil((this.key.keySize-1)/8),c=this.key.$doPublic(s).toBuffer(a),u=lo.createHash(this.options.signingSchemeOptions.hash||Va);return u.update(i),this.emsa_pss_verify(u.digest(),c,this.key.keySize-1)},n.prototype.emsa_pss_encode=function(i,s){var o=this.options.signingSchemeOptions.hash||Va,a=this.options.signingSchemeOptions.mgf||r.eme_oaep_mgf1,c=this.options.signingSchemeOptions.saltLength||nv,u=r.digestLength[o],f=Math.ceil(s/8);if(f<u+c+2)throw new Error("Output length passed to emBits("+s+") is too small for the options specified("+o+", "+c+"). To fix this issue increase the value of emBits. (minimum size: "+(8*u+8*c+9)+")");var h=lo.randomBytes(c),m=Buffer.alloc(8+u+c);m.fill(0,0,8),i.copy(m,8),h.copy(m,8+i.length);var y=lo.createHash(o);y.update(m),y=y.digest();var S=Buffer.alloc(f-h.length-u-2);S.fill(0);var I=Buffer.alloc(S.length+1+h.length);S.copy(I),I[S.length]=1,h.copy(I,S.length+1);for(var M=a(y,I.length,o),k=Buffer.alloc(I.length),D=0;D<M.length;D++)k[D]=I[D]^M[D];var O=8*f-s,x=255^255>>8-O<<8-O;k[0]=k[0]&x;var j=Buffer.alloc(k.length+y.length+1);return k.copy(j,0),y.copy(j,k.length),j[j.length-1]=188,j},n.prototype.emsa_pss_verify=function(i,s,o){var a=this.options.signingSchemeOptions.hash||Va,c=this.options.signingSchemeOptions.mgf||r.eme_oaep_mgf1,u=this.options.signingSchemeOptions.saltLength||nv,f=r.digestLength[a],h=Math.ceil(o/8);if(h<f+u+2||s[s.length-1]!=188)return!1;var m=Buffer.alloc(h-f-1);s.copy(m,0,0,h-f-1);for(var y=0,S=0,I=8*h-o;S<I;S++)y|=1<<7-S;if((m[0]&y)!==0)return!1;var M=s.slice(h-f-1,h-1),k=c(M,m.length,a);for(S=0;S<m.length;S++)m[S]^=k[S];for(I=8*h-o,y=255^255>>8-I<<8-I,m[0]=m[0]&y,S=0;m[S]===0&&S<m.length;S++);if(m[S]!=1)return!1;var D=m.slice(m.length-u),O=Buffer.alloc(8+f+u);O.fill(0,0,8),i.copy(O,8),D.copy(O,8+i.length);var x=lo.createHash(a);return x.update(O),x=x.digest(),M.toString("hex")===x.toString("hex")},new n(t,e)}});var fi=v((iB,ss)=>{ss.exports={pkcs1:ev(),pkcs1_oaep:tv(),pss:iv(),isEncryption:function(t){return ss.exports[t]&&ss.exports[t].isEncryption},isSignature:function(t){return ss.exports[t]&&ss.exports[t].isSignature}}});var Fl=v((sB,sv)=>{var Ml=di(),dI=fi();sv.exports=function(t,e){var r=dI.pkcs1.makeScheme(t,e);return{encrypt:function(n,i){var s,o;return i?(s=new Ml(r.encPad(n,{type:1})),o=t.$doPrivate(s)):(s=new Ml(t.encryptionScheme.encPad(n)),o=t.$doPublic(s)),o.toBuffer(t.encryptedDataLength)},decrypt:function(n,i){var s,o=new Ml(n);return i?(s=t.$doPublic(o),r.encUnPad(s.toBuffer(t.encryptedDataLength),{type:1})):(s=t.$doPrivate(o),t.encryptionScheme.encUnPad(s.toBuffer(t.encryptedDataLength)))}}}});var av=v((oB,ov)=>{var Ga=require("crypto"),Ln=require("constants"),fI=fi();ov.exports=function(t,e){var r=fI.pkcs1.makeScheme(t,e);return{encrypt:function(n,i){var s;if(i)return s=Ln.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),Ga.privateEncrypt({key:e.rsaUtils.exportKey("private"),padding:s},n);s=Ln.RSA_PKCS1_OAEP_PADDING,e.encryptionScheme==="pkcs1"&&(s=Ln.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var o=n;return s===Ln.RSA_NO_PADDING&&(o=r.pkcs0pad(n)),Ga.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:s},o)},decrypt:function(n,i){var s;if(i)return s=Ln.RSA_PKCS1_PADDING,e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),Ga.publicDecrypt({key:e.rsaUtils.exportKey("public"),padding:s},n);s=Ln.RSA_PKCS1_OAEP_PADDING,e.encryptionScheme==="pkcs1"&&(s=Ln.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var o=Ga.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:s},n);return s===Ln.RSA_NO_PADDING?r.pkcs0unpad(o):o}}}});var lv=v((aB,uv)=>{var cv=require("crypto"),os=require("constants"),pI=fi();uv.exports=function(t,e){var r=Fl()(t,e),n=pI.pkcs1.makeScheme(t,e);return{encrypt:function(i,s){if(s)return r.encrypt(i,s);var o=os.RSA_PKCS1_OAEP_PADDING;e.encryptionScheme==="pkcs1"&&(o=os.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=i;return o===os.RSA_NO_PADDING&&(a=n.pkcs0pad(i)),cv.publicEncrypt({key:e.rsaUtils.exportKey("public"),padding:o},a)},decrypt:function(i,s){if(s)return r.decrypt(i,s);var o=os.RSA_PKCS1_OAEP_PADDING;e.encryptionScheme==="pkcs1"&&(o=os.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var a=cv.privateDecrypt({key:e.rsaUtils.exportKey("private"),padding:o},i);return o===os.RSA_NO_PADDING?n.pkcs0unpad(a):a}}}});var fv=v((cB,dv)=>{var Xa=require("crypto");dv.exports={getEngine:function(t,e){var r=Fl();return e.environment==="node"&&typeof Xa.publicEncrypt=="function"&&typeof Xa.privateDecrypt=="function"&&(typeof Xa.privateEncrypt=="function"&&typeof Xa.publicDecrypt=="function"?r=av():r=lv()),r(t,e)}}});var vv=v((gv,mv)=>{var Ya=Mt()._,uB=require("crypto"),ut=di(),pv=Mt(),hv=fi(),hI=fv();gv.BigInteger=ut;mv.exports.Key=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.setOptions=function(e){var r=hv[e.signingScheme],n=hv[e.encryptionScheme];r===n?this.signingScheme=this.encryptionScheme=n.makeScheme(this,e):(this.encryptionScheme=n.makeScheme(this,e),this.signingScheme=r.makeScheme(this,e)),this.encryptEngine=hI.getEngine(this,e)},t.prototype.generate=function(e,r){var n=e>>1;this.e=parseInt(r,16);for(var i=new ut(r,16);;){for(;this.p=new ut(e-n,1),!(this.p.subtract(ut.ONE).gcd(i).compareTo(ut.ONE)===0&&this.p.isProbablePrime(10)););for(;this.q=new ut(n,1),!(this.q.subtract(ut.ONE).gcd(i).compareTo(ut.ONE)===0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(ut.ONE),a=this.q.subtract(ut.ONE),c=o.multiply(a);if(c.gcd(i).compareTo(ut.ONE)===0){if(this.n=this.p.multiply(this.q),this.n.bitLength()<e)continue;this.d=i.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},t.prototype.setPrivate=function(e,r,n,i,s,o,a,c){if(e&&r&&n&&e.length>0&&(Ya.isNumber(r)||r.length>0)&&n.length>0)this.n=new ut(e),this.e=Ya.isNumber(r)?r:pv.get32IntFromBuffer(r,0),this.d=new ut(n),i&&s&&o&&a&&c&&(this.p=new ut(i),this.q=new ut(s),this.dmp1=new ut(o),this.dmq1=new ut(a),this.coeff=new ut(c)),this.$$recalculateCache();else throw Error("Invalid RSA private key")},t.prototype.setPublic=function(e,r){if(e&&r&&e.length>0&&(Ya.isNumber(r)||r.length>0))this.n=new ut(e),this.e=Ya.isNumber(r)?r:pv.get32IntFromBuffer(r,0),this.$$recalculateCache();else throw Error("Invalid RSA public key")},t.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var r=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(n)<0;)r=r.add(this.p);return r.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},t.prototype.$doPublic=function(e){return e.modPowInt(this.e,this.n)},t.prototype.encrypt=function(e,r){var n=[],i=[],s=e.length,o=Math.ceil(s/this.maxMessageLength)||1,a=Math.ceil(s/o||1);if(o==1)n.push(e);else for(var c=0;c<o;c++)n.push(e.slice(c*a,(c+1)*a));for(var u=0;u<n.length;u++)i.push(this.encryptEngine.encrypt(n[u],r));return Buffer.concat(i)},t.prototype.decrypt=function(e,r){if(e.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var n=[],i=0,s=0,o=e.length/this.encryptedDataLength,a=0;a<o;a++)i=a*this.encryptedDataLength,s=i+this.encryptedDataLength,n.push(this.encryptEngine.decrypt(e.slice(i,Math.min(s,e.length)),r));return Buffer.concat(n)},t.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},t.prototype.verify=function(e,r,n){return this.signingScheme.verify.apply(this.signingScheme,arguments)},t.prototype.isPrivate=function(){return this.n&&this.e&&this.d&&!0||!1},t.prototype.isPublic=function(e){return this.n&&this.e&&!(e&&this.d)||!1},Object.defineProperty(t.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(t.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(t.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),t.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},t}()});var Qa=v((lB,yv)=>{yv.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}});var Ja=v((dB,_v)=>{_v.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}});var jl=v((fB,Cv)=>{"use strict";var Za=require("buffer"),as=Za.Buffer,wr={},br;for(br in Za)!Za.hasOwnProperty(br)||br==="SlowBuffer"||br==="Buffer"||(wr[br]=Za[br]);var cs=wr.Buffer={};for(br in as)!as.hasOwnProperty(br)||br==="allocUnsafe"||br==="allocUnsafeSlow"||(cs[br]=as[br]);wr.Buffer.prototype=as.prototype;(!cs.from||cs.from===Uint8Array.from)&&(cs.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return as(t,e,r)});cs.alloc||(cs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=as(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!wr.kStringMaxLength)try{wr.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}wr.constants||(wr.constants={MAX_LENGTH:wr.kMaxLength},wr.kStringMaxLength&&(wr.constants.MAX_STRING_LENGTH=wr.kStringMaxLength));Cv.exports=wr});var Ev=v((pB,bv)=>{var gI=require("assert"),wv=jl().Buffer,fo=Ja(),mI=Qa(),us=mI.newInvalidAsn1Error;function jt(t){if(!t||!wv.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(jt.prototype,"length",{enumerable:!0,get:function(){return this._len}});Object.defineProperty(jt.prototype,"offset",{enumerable:!0,get:function(){return this._offset}});Object.defineProperty(jt.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(jt.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});jt.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=this._buf[this._offset]&255;return t||(this._offset+=1),e};jt.prototype.peek=function(){return this.readByte(!0)};jt.prototype.readLength=function(t){if(t===void 0&&(t=this._offset),t>=this._size)return null;var e=this._buf[t++]&255;if(e===null)return null;if((e&128)===128){if(e&=127,e===0)throw us("Indefinite length not supported");if(e>4)throw us("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(this._buf[t++]&255)}else this._len=e;return t};jt.prototype.readSequence=function(t){var e=this.peek();if(e===null)return null;if(t!==void 0&&t!==e)throw us("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return r===null?null:(this._offset=r,e)};jt.prototype.readInt=function(){return this._readTag(fo.Integer)};jt.prototype.readBoolean=function(){return this._readTag(fo.Boolean)!==0};jt.prototype.readEnumeration=function(){return this._readTag(fo.Enumeration)};jt.prototype.readString=function(t,e){t||(t=fo.OctetString);var r=this.peek();if(r===null)return null;if(r!==t)throw us("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(n===null||this.length>this._size-n)return null;if(this._offset=n,this.length===0)return e?wv.alloc(0):"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")};jt.prototype.readOID=function(t){t||(t=fo.OID);var e=this.readString(t,!0);if(e===null)return null;for(var r=[],n=0,i=0;i<e.length;i++){var s=e[i]&255;n<<=7,n+=s&127,(s&128)===0&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")};jt.prototype._readTag=function(t){gI.ok(t!==void 0);var e=this.peek();if(e===null)return null;if(e!==t)throw us("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;if(this.length>4)throw us("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],i=0,s=0;s<this.length;s++)i<<=8,i|=this._buf[this._offset++]&255;return(n&128)===128&&s!==4&&(i-=1<<s*8),i>>0};bv.exports=jt});var Tv=v((hB,Sv)=>{var Mn=require("assert"),ec=jl().Buffer,Fn=Ja(),vI=Qa(),tc=vI.newInvalidAsn1Error,yI={size:1024,growthFactor:8};function _I(t,e){Mn.ok(t),Mn.equal(typeof t,"object"),Mn.ok(e),Mn.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(n){if(!e[n]){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i)}}),e}function xt(t){t=_I(yI,t||{}),this._buf=ec.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(xt.prototype,"buffer",{get:function(){if(this._seq.length)throw tc(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});xt.prototype.writeByte=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t};xt.prototype.writeInt=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");typeof e!="number"&&(e=Fn.Integer);for(var r=4;((t&4286578688)===0||(t&4286578688)===-8388608)&&r>1;)r--,t<<=8;if(r>4)throw tc("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(t&4278190080)>>>24,t<<=8};xt.prototype.writeNull=function(){this.writeByte(Fn.Null),this.writeByte(0)};xt.prototype.writeEnumeration=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");return typeof e!="number"&&(e=Fn.Enumeration),this.writeInt(t,e)};xt.prototype.writeBoolean=function(t,e){if(typeof t!="boolean")throw new TypeError("argument must be a Boolean");typeof e!="number"&&(e=Fn.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0};xt.prototype.writeString=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string (was: "+typeof t+")");typeof e!="number"&&(e=Fn.OctetString);var r=ec.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)};xt.prototype.writeBuffer=function(t,e){if(typeof e!="number")throw new TypeError("tag must be a number");if(!ec.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length};xt.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(r){e.writeString(r)})};xt.prototype.writeOID=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string");if(typeof e!="number"&&(e=Fn.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");function r(o,a){a<128?o.push(a):a<16384?(o.push(a>>>7|128),o.push(a&127)):a<2097152?(o.push(a>>>14|128),o.push((a>>>7|128)&255),o.push(a&127)):a<268435456?(o.push(a>>>21|128),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127)):(o.push((a>>>28|128)&255),o.push((a>>>21|128)&255),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127))}var n=t.split("."),i=[];i.push(parseInt(n[0],10)*40+parseInt(n[1],10)),n.slice(2).forEach(function(o){r(i,parseInt(o,10))});var s=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(o){s.writeByte(o)})};xt.prototype.writeLength=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else if(t<=16777215)this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else throw tc("Length too long (> 4 bytes)")};xt.prototype.startSequence=function(t){typeof t!="number"&&(t=Fn.Sequence|Fn.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3};xt.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else if(r<=16777215)this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r;else throw tc("Sequence too long")};xt.prototype._shift=function(t,e,r){Mn.ok(t!==void 0),Mn.ok(e!==void 0),Mn.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r};xt.prototype._ensure=function(t){if(Mn.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=ec.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}};Sv.exports=xt});var Rv=v((gB,ic)=>{var $l=Qa(),Hl=Ja(),CI=Ev(),wI=Tv();ic.exports={Reader:CI,Writer:wI};for(rc in Hl)Hl.hasOwnProperty(rc)&&(ic.exports[rc]=Hl[rc]);var rc;for(nc in $l)$l.hasOwnProperty(nc)&&(ic.exports[nc]=$l[nc]);var nc});var sc=v((mB,Dv)=>{var Bl=Rv();Dv.exports={Ber:Bl,BerReader:Bl.Reader,BerWriter:Bl.Writer}});var kv=v((vB,cc)=>{var oc=sc().Ber,Pv=Mt()._,ac=Mt(),Iv="-----BEGIN RSA PRIVATE KEY-----",xv="-----END RSA PRIVATE KEY-----",qv="-----BEGIN RSA PUBLIC KEY-----",Ov="-----END RSA PUBLIC KEY-----";cc.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=t.d.toBuffer(),i=t.p.toBuffer(),s=t.q.toBuffer(),o=t.dmp1.toBuffer(),a=t.dmq1.toBuffer(),c=t.coeff.toBuffer(),u=r.length+n.length+i.length+s.length+o.length+a.length+c.length+512,f=new oc.Writer({size:u});return f.startSequence(),f.writeInt(0),f.writeBuffer(r,2),f.writeInt(t.e),f.writeBuffer(n,2),f.writeBuffer(i,2),f.writeBuffer(s,2),f.writeBuffer(o,2),f.writeBuffer(a,2),f.writeBuffer(c,2),f.endSequence(),e.type==="der"?f.buffer:Iv+`
`+ac.linebrk(f.buffer.toString("base64"),64)+`
`+xv},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Pv.isString(e)){var i=ac.trimSurroundingText(e,Iv,xv).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new oc.Reader(n);s.readSequence(),s.readString(2,!0),t.setPrivate(s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0),s.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=r.length+512,i=new oc.Writer({size:n});return i.startSequence(),i.writeBuffer(r,2),i.writeInt(t.e),i.endSequence(),e.type==="der"?i.buffer:qv+`
`+ac.linebrk(i.buffer.toString("base64"),64)+`
`+Ov},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der"){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Pv.isString(e)){var i=ac.trimSurroundingText(e,qv,Ov).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}}else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new oc.Reader(n);s.readSequence(),t.setPublic(s.readString(2,!0),s.readString(2,!0))},autoImport:function(t,e){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(e)?(cc.exports.privateImport(t,e),!0):/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(e)?(cc.exports.publicImport(t,e),!0):!1}}});var jv=v((yB,dc)=>{var Xr=sc().Ber,Av=Mt()._,uc="1.2.840.113549.1.1.1",lc=Mt(),Nv="-----BEGIN PRIVATE KEY-----",Lv="-----END PRIVATE KEY-----",Mv="-----BEGIN PUBLIC KEY-----",Fv="-----END PUBLIC KEY-----";dc.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=t.d.toBuffer(),i=t.p.toBuffer(),s=t.q.toBuffer(),o=t.dmp1.toBuffer(),a=t.dmq1.toBuffer(),c=t.coeff.toBuffer(),u=r.length+n.length+i.length+s.length+o.length+a.length+c.length+512,f=new Xr.Writer({size:u});f.startSequence(),f.writeInt(0),f.writeBuffer(r,2),f.writeInt(t.e),f.writeBuffer(n,2),f.writeBuffer(i,2),f.writeBuffer(s,2),f.writeBuffer(o,2),f.writeBuffer(a,2),f.writeBuffer(c,2),f.endSequence();var h=new Xr.Writer({size:u});return h.startSequence(),h.writeInt(0),h.startSequence(),h.writeOID(uc),h.writeNull(),h.endSequence(),h.writeBuffer(f.buffer,4),h.endSequence(),e.type==="der"?h.buffer:Nv+`
`+lc.linebrk(h.buffer.toString("base64"),64)+`
`+Lv},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Av.isString(e)){var i=lc.trimSurroundingText(e,Nv,Lv).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new Xr.Reader(n);s.readSequence(),s.readInt(0);var o=new Xr.Reader(s.readString(48,!0));if(o.readOID(6,!0)!==uc)throw Error("Invalid Public key format");var a=new Xr.Reader(s.readString(4,!0));a.readSequence(),a.readString(2,!0),t.setPrivate(a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),n=r.length+512,i=new Xr.Writer({size:n});i.writeByte(0),i.startSequence(),i.writeBuffer(r,2),i.writeInt(t.e),i.endSequence();var s=new Xr.Writer({size:n});return s.startSequence(),s.startSequence(),s.writeOID(uc),s.writeNull(),s.endSequence(),s.writeBuffer(i.buffer,3),s.endSequence(),e.type==="der"?s.buffer:Mv+`
`+lc.linebrk(s.buffer.toString("base64"),64)+`
`+Fv},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der"){if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Av.isString(e)){var i=lc.trimSurroundingText(e,Mv,Fv).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}}else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");var s=new Xr.Reader(n);s.readSequence();var o=new Xr.Reader(s.readString(48,!0));if(o.readOID(6,!0)!==uc)throw Error("Invalid Public key format");var a=new Xr.Reader(s.readString(3,!0));a.readByte(),a.readSequence(),t.setPublic(a.readString(2,!0),a.readString(2,!0))},autoImport:function(t,e){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(e)?(dc.exports.privateImport(t,e),!0):/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(e)?(dc.exports.publicImport(t,e),!0):!1}}});var $v=v((wB,fc)=>{var _B=Mt()._,CB=Mt();fc.exports={privateExport:function(t,e){return{n:t.n.toBuffer(),e:t.e,d:t.d.toBuffer(),p:t.p.toBuffer(),q:t.q.toBuffer(),dmp1:t.dmp1.toBuffer(),dmq1:t.dmq1.toBuffer(),coeff:t.coeff.toBuffer()}},privateImport:function(t,e,r){if(e.n&&e.e&&e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff)t.setPrivate(e.n,e.e,e.d,e.p,e.q,e.dmp1,e.dmq1,e.coeff);else throw Error("Invalid key data")},publicExport:function(t,e){return{n:t.n.toBuffer(),e:t.e}},publicImport:function(t,e,r){if(e.n&&e.e)t.setPublic(e.n,e.e);else throw Error("Invalid key data")},autoImport:function(t,e){return e.n&&e.e?e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff?(fc.exports.privateImport(t,e),!0):(fc.exports.publicImport(t,e),!0):!1}}});var zv=v((bB,pc)=>{var Hv=Mt()._,Bv=Mt(),po=di(),Uv="-----BEGIN OPENSSH PRIVATE KEY-----",Wv="-----END OPENSSH PRIVATE KEY-----";pc.exports={privateExport:function(t,e){let r=t.n.toBuffer(),n=Buffer.alloc(4);for(n.writeUInt32BE(t.e,0);n[0]===0;)n=n.slice(1);let i=t.d.toBuffer(),s=t.coeff.toBuffer(),o=t.p.toBuffer(),a=t.q.toBuffer(),c;typeof t.sshcomment<"u"?c=Buffer.from(t.sshcomment):c=Buffer.from([]);let u=11+4+n.byteLength+4+r.byteLength,f=8+11+4+r.byteLength+4+n.byteLength+4+i.byteLength+4+s.byteLength+4+o.byteLength+4+a.byteLength+4+c.byteLength,h=15+16+4+4+4+u+4+f;h+=Math.ceil(f/8)*8-f;let y=Buffer.alloc(h),S={buf:y,off:0};y.write("openssh-key-v1","utf8"),y.writeUInt8(0,14),S.off+=15,bt(S,Buffer.from("none")),bt(S,Buffer.from("none")),bt(S,Buffer.from("")),S.off=S.buf.writeUInt32BE(1,S.off),S.off=S.buf.writeUInt32BE(u,S.off),bt(S,Buffer.from("ssh-rsa")),bt(S,n),bt(S,r),S.off=S.buf.writeUInt32BE(h-47-u,S.off),S.off+=8,bt(S,Buffer.from("ssh-rsa")),bt(S,r),bt(S,n),bt(S,i),bt(S,s),bt(S,o),bt(S,a),bt(S,c);let I=1;for(;S.off<h;)S.off=S.buf.writeUInt8(I++,S.off);return e.type==="der"?S.buf:Uv+`
`+Bv.linebrk(y.toString("base64"),70)+`
`+Wv+`
`},privateImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Hv.isString(e)){var i=Bv.trimSurroundingText(e,Uv,Wv).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(i,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");let s={buf:n,off:0};if(n.slice(0,14).toString("ascii")!=="openssh-key-v1")throw"Invalid file format.";if(s.off+=15,wt(s).toString("ascii")!=="none"||wt(s).toString("ascii")!=="none"||wt(s).toString("ascii")!==""||(s.off+=4,s.off+=4,wt(s).toString("ascii")!=="ssh-rsa")||(wt(s),wt(s),s.off+=12,wt(s).toString("ascii")!=="ssh-rsa"))throw Error("Unsupported key type");let o=wt(s),a=wt(s),c=wt(s),u=wt(s),f=wt(s),h=wt(s),m=new po(c),y=new po(h),S=new po(f),I=m.mod(S.subtract(po.ONE)),M=m.mod(y.subtract(po.ONE));t.setPrivate(o,a,c,f,h,I.toBuffer(),M.toBuffer(),u),t.sshcomment=wt(s).toString("ascii")},publicExport:function(t,e){let r=Buffer.alloc(4);for(r.writeUInt32BE(t.e,0);r[0]===0;)r=r.slice(1);let n=t.n.toBuffer(),i=Buffer.alloc(r.byteLength+4+n.byteLength+4+7+4),s={buf:i,off:0};bt(s,Buffer.from("ssh-rsa")),bt(s,r),bt(s,n);let o=t.sshcomment||"";return e.type==="der"?s.buf:"ssh-rsa "+i.toString("base64")+" "+o+`
`},publicImport:function(t,e,r){r=r||{};var n;if(r.type!=="der")if(Buffer.isBuffer(e)&&(e=e.toString("utf8")),Hv.isString(e)){if(e.substring(0,8)!=="ssh-rsa ")throw Error("Unsupported key format");let c=e.indexOf(" ",8);c===-1?c=e.length:t.sshcomment=e.substring(c+1).replace(/\s+|\n\r|\n|\r$/gm,"");let u=e.substring(8,c).replace(/\s+|\n\r|\n|\r$/gm,"");n=Buffer.from(u,"base64")}else throw Error("Unsupported key format");else if(Buffer.isBuffer(e))n=e;else throw Error("Unsupported key format");let i={buf:n,off:0},s=wt(i).toString("ascii");if(s!=="ssh-rsa")throw Error("Invalid key type: "+s);let o=wt(i),a=wt(i);t.setPublic(a,o)},autoImport:function(t,e){return/^[\S\s]*-----BEGIN OPENSSH PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END OPENSSH PRIVATE KEY-----[\S\s]*$/g.test(e)?(pc.exports.privateImport(t,e),!0):/^[\S\s]*ssh-rsa \s*(?=(([A-Za-z0-9+/=]+\s*)+))\1[\S\s]*$/g.test(e)?(pc.exports.publicImport(t,e),!0):!1}};function wt(t){let e=t.buf.readInt32BE(t.off);t.off+=4;let r=t.buf.slice(t.off,t.off+e);return t.off+=e,r}function bt(t,e){t.buf.writeInt32BE(e.byteLength,t.off),t.off+=4,t.off+=e.copy(t.buf,t.off)}});var Vv=v((SB,lt)=>{var EB=Mt()._;function Kv(t){t=t.split("-");for(var e="private",r={type:"default"},n=1;n<t.length;n++)if(t[n])switch(t[n]){case"public":e=t[n];break;case"private":e=t[n];break;case"pem":r.type=t[n];break;case"der":r.type=t[n];break}return{scheme:t[0],keyType:e,keyOpt:r}}lt.exports={pkcs1:kv(),pkcs8:jv(),components:$v(),openssh:zv(),isPrivateExport:function(t){return lt.exports[t]&&typeof lt.exports[t].privateExport=="function"},isPrivateImport:function(t){return lt.exports[t]&&typeof lt.exports[t].privateImport=="function"},isPublicExport:function(t){return lt.exports[t]&&typeof lt.exports[t].publicExport=="function"},isPublicImport:function(t){return lt.exports[t]&&typeof lt.exports[t].publicImport=="function"},detectAndImport:function(t,e,r){if(r===void 0){for(var n in lt.exports)if(typeof lt.exports[n].autoImport=="function"&&lt.exports[n].autoImport(t,e))return!0}else if(r){var i=Kv(r);if(lt.exports[i.scheme])i.keyType==="private"?lt.exports[i.scheme].privateImport(t,e,i.keyOpt):lt.exports[i.scheme].publicImport(t,e,i.keyOpt);else throw Error("Unsupported key format")}return!1},detectAndExport:function(t,e){if(e){var r=Kv(e);if(lt.exports[r.scheme])if(r.keyType==="private"){if(!t.isPrivate())throw Error("This is not private key");return lt.exports[r.scheme].privateExport(t,r.keyOpt)}else{if(!t.isPublic())throw Error("This is not public key");return lt.exports[r.scheme].publicExport(t,r.keyOpt)}else throw Error("Unsupported key format")}}}});var Ul=v((DB,Qv)=>{var Gv=require("constants"),bI=vv(),TB=require("crypto"),RB=sc().Ber,cr=Mt()._,EI=Mt(),Xv=fi(),Yv=Vv();typeof Gv.RSA_NO_PADDING>"u"&&(Gv.RSA_NO_PADDING=3);Qv.exports=function(){var t={node10:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],node:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],iojs:["md4","md5","ripemd160","sha1","sha224","sha256","sha384","sha512"],browser:["md5","ripemd160","sha1","sha256","sha512"]},e="pkcs1_oaep",r="pkcs1",n="private",i={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function s(o,a,c){if(!(this instanceof s))return new s(o,a,c);cr.isObject(a)&&(c=a,a=void 0),this.$options={signingScheme:r,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:e,encryptionSchemeOptions:{hash:"sha1",label:null},environment:EI.detectEnvironment(),rsaUtils:this},this.keyPair=new bI.Key,this.$cache={},Buffer.isBuffer(o)||cr.isString(o)?this.importKey(o,a):cr.isObject(o)&&this.generateKeyPair(o.b,o.e),this.setOptions(c)}return s.prototype.setOptions=function(o){if(o=o||{},o.environment&&(this.$options.environment=o.environment),o.signingScheme){if(cr.isString(o.signingScheme)){var a=o.signingScheme.toLowerCase().split("-");a.length==1?t.node.indexOf(a[0])>-1?(this.$options.signingSchemeOptions={hash:a[0]},this.$options.signingScheme=r):(this.$options.signingScheme=a[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:a[1]},this.$options.signingScheme=a[0])}else cr.isObject(o.signingScheme)&&(this.$options.signingScheme=o.signingScheme.scheme||r,this.$options.signingSchemeOptions=cr.omit(o.signingScheme,"scheme"));if(!Xv.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&t[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash)===-1)throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(o.encryptionScheme){if(cr.isString(o.encryptionScheme)?(this.$options.encryptionScheme=o.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):cr.isObject(o.encryptionScheme)&&(this.$options.encryptionScheme=o.encryptionScheme.scheme||e,this.$options.encryptionSchemeOptions=cr.omit(o.encryptionScheme,"scheme")),!Xv.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&t[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash)===-1)throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},s.prototype.generateKeyPair=function(o,a){if(o=o||2048,a=a||65537,o%8!==0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(o,a.toString(16)),this.$cache={},this},s.prototype.importKey=function(o,a){if(!o)throw Error("Empty key given");if(a&&(a=i[a]||a),!Yv.detectAndImport(this.keyPair,o,a)&&a===void 0)throw Error("Key format must be specified");return this.$cache={},this},s.prototype.exportKey=function(o){return o=o||n,o=i[o]||o,this.$cache[o]||(this.$cache[o]=Yv.detectAndExport(this.keyPair,o)),this.$cache[o]},s.prototype.isPrivate=function(){return this.keyPair.isPrivate()},s.prototype.isPublic=function(o){return this.keyPair.isPublic(o)},s.prototype.isEmpty=function(o){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},s.prototype.encrypt=function(o,a,c){return this.$$encryptKey(!1,o,a,c)},s.prototype.decrypt=function(o,a){return this.$$decryptKey(!1,o,a)},s.prototype.encryptPrivate=function(o,a,c){return this.$$encryptKey(!0,o,a,c)},s.prototype.decryptPublic=function(o,a){return this.$$decryptKey(!0,o,a)},s.prototype.$$encryptKey=function(o,a,c,u){try{var f=this.keyPair.encrypt(this.$getDataForEncrypt(a,u),o);return c=="buffer"||!c?f:f.toString(c)}catch(h){throw Error("Error during encryption. Original error: "+h)}},s.prototype.$$decryptKey=function(o,a,c){try{a=cr.isString(a)?Buffer.from(a,"base64"):a;var u=this.keyPair.decrypt(a,o);if(u===null)throw Error("Key decrypt method returns null.");return this.$getDecryptedData(u,c)}catch(f){throw Error("Error during decryption (probably incorrect key). Original error: "+f)}},s.prototype.sign=function(o,a,c){if(!this.isPrivate())throw Error("This is not private key");var u=this.keyPair.sign(this.$getDataForEncrypt(o,c));return a&&a!="buffer"&&(u=u.toString(a)),u},s.prototype.verify=function(o,a,c,u){if(!this.isPublic())throw Error("This is not public key");return u=!u||u=="buffer"?null:u,this.keyPair.verify(this.$getDataForEncrypt(o,c),a,u)},s.prototype.getKeySize=function(){return this.keyPair.keySize},s.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},s.prototype.$getDataForEncrypt=function(o,a){if(cr.isString(o)||cr.isNumber(o))return Buffer.from(""+o,a||"utf8");if(Buffer.isBuffer(o))return o;if(cr.isObject(o))return Buffer.from(JSON.stringify(o));throw Error("Unexpected data type")},s.prototype.$getDecryptedData=function(o,a){return a=a||"buffer",a=="buffer"?o:a=="json"?JSON.parse(o.toString()):o.toString(a)},s}()});var Wl=v((PB,Jv)=>{"use strict";function SI(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}Jv.exports=SI});var ft=v((XB,gy)=>{"use strict";var AI=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.enableDebug&&console.info(t.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.disableWarnings||console.warn(t.TAG+e,r)},t.enableDebug=!1,t.disableWarnings=!1,t.disableErrors=!1,t.TAG="ApplicationInsights:",t}();gy.exports=AI});var mc=v($n=>{"use strict";var my=$n&&$n.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty($n,"__esModule",{value:!0});var pi=hi(),NI=require("events"),LI;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(LI=$n.SpanKind||($n.SpanKind={}));var vy=function(){function t(){}return t.prototype.active=function(){var e=this,r=pi.CorrelationContextManager.getCurrentContext();return my({},r,{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,s=t._spanToContext(e,n,i);return pi.CorrelationContextManager.runWithContext(s,r)()},t.prototype.bind=function(e){return typeof e=="function"?pi.CorrelationContextManager.wrapCallback(e):(e instanceof NI.EventEmitter&&pi.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return pi.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return pi.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=r?"|"+e.context().traceId+"."+r+".":e.context().traceId,s=my({},e.context(),{traceFlags:e.context().traceFlags.toString()}),o=pi.CorrelationContextManager.spanToContextObject(s,i,n);return o},t}();$n.OpenTelemetryScopeManagerWrapper=vy;$n.AsyncScopeManager=new vy});var Rc=v((J,ky)=>{J=ky.exports=le;var _e;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?_e=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:_e=function(){};J.SEMVER_SPEC_VERSION="2.0.0";var ho=256,vc=Number.MAX_SAFE_INTEGER||9007199254740991,Kl=16,MI=ho-6,go=J.re=[],De=J.safeRe=[],L=J.src=[],ce=0,Ql="[a-zA-Z0-9-]",Vl=[["\\s",1],["\\d",ho],[Ql,MI]];function Ec(t){for(var e=0;e<Vl.length;e++){var r=Vl[e][0],n=Vl[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var fs=ce++;L[fs]="0|[1-9]\\d*";var ps=ce++;L[ps]="\\d+";var Jl=ce++;L[Jl]="\\d*[a-zA-Z-]"+Ql+"*";var _y=ce++;L[_y]="("+L[fs]+")\\.("+L[fs]+")\\.("+L[fs]+")";var Cy=ce++;L[Cy]="("+L[ps]+")\\.("+L[ps]+")\\.("+L[ps]+")";var Gl=ce++;L[Gl]="(?:"+L[fs]+"|"+L[Jl]+")";var Xl=ce++;L[Xl]="(?:"+L[ps]+"|"+L[Jl]+")";var Zl=ce++;L[Zl]="(?:-("+L[Gl]+"(?:\\."+L[Gl]+")*))";var ed=ce++;L[ed]="(?:-?("+L[Xl]+"(?:\\."+L[Xl]+")*))";var Yl=ce++;L[Yl]=Ql+"+";var vo=ce++;L[vo]="(?:\\+("+L[Yl]+"(?:\\."+L[Yl]+")*))";var td=ce++,wy="v?"+L[_y]+L[Zl]+"?"+L[vo]+"?";L[td]="^"+wy+"$";var rd="[v=\\s]*"+L[Cy]+L[ed]+"?"+L[vo]+"?",nd=ce++;L[nd]="^"+rd+"$";var ys=ce++;L[ys]="((?:<|>)?=?)";var yc=ce++;L[yc]=L[ps]+"|x|X|\\*";var _c=ce++;L[_c]=L[fs]+"|x|X|\\*";var gi=ce++;L[gi]="[v=\\s]*("+L[_c]+")(?:\\.("+L[_c]+")(?:\\.("+L[_c]+")(?:"+L[Zl]+")?"+L[vo]+"?)?)?";var gs=ce++;L[gs]="[v=\\s]*("+L[yc]+")(?:\\.("+L[yc]+")(?:\\.("+L[yc]+")(?:"+L[ed]+")?"+L[vo]+"?)?)?";var by=ce++;L[by]="^"+L[ys]+"\\s*"+L[gi]+"$";var Ey=ce++;L[Ey]="^"+L[ys]+"\\s*"+L[gs]+"$";var Sy=ce++;L[Sy]="(?:^|[^\\d])(\\d{1,"+Kl+"})(?:\\.(\\d{1,"+Kl+"}))?(?:\\.(\\d{1,"+Kl+"}))?(?:$|[^\\d])";var Sc=ce++;L[Sc]="(?:~>?)";var ms=ce++;L[ms]="(\\s*)"+L[Sc]+"\\s+";go[ms]=new RegExp(L[ms],"g");De[ms]=new RegExp(Ec(L[ms]),"g");var FI="$1~",Ty=ce++;L[Ty]="^"+L[Sc]+L[gi]+"$";var Ry=ce++;L[Ry]="^"+L[Sc]+L[gs]+"$";var Tc=ce++;L[Tc]="(?:\\^)";var vs=ce++;L[vs]="(\\s*)"+L[Tc]+"\\s+";go[vs]=new RegExp(L[vs],"g");De[vs]=new RegExp(Ec(L[vs]),"g");var jI="$1^",Dy=ce++;L[Dy]="^"+L[Tc]+L[gi]+"$";var Py=ce++;L[Py]="^"+L[Tc]+L[gs]+"$";var id=ce++;L[id]="^"+L[ys]+"\\s*("+rd+")$|^$";var sd=ce++;L[sd]="^"+L[ys]+"\\s*("+wy+")$|^$";var mi=ce++;L[mi]="(\\s*)"+L[ys]+"\\s*("+rd+"|"+L[gi]+")";go[mi]=new RegExp(L[mi],"g");De[mi]=new RegExp(Ec(L[mi]),"g");var $I="$1$2$3",Iy=ce++;L[Iy]="^\\s*("+L[gi]+")\\s+-\\s+("+L[gi]+")\\s*$";var xy=ce++;L[xy]="^\\s*("+L[gs]+")\\s+-\\s+("+L[gs]+")\\s*$";var qy=ce++;L[qy]="(<|>)?=?\\s*\\*";for(Yr=0;Yr<ce;Yr++)_e(Yr,L[Yr]),go[Yr]||(go[Yr]=new RegExp(L[Yr]),De[Yr]=new RegExp(Ec(L[Yr])));var Yr;J.parse=vi;function vi(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof le)return t;if(typeof t!="string"||t.length>ho)return null;var r=e.loose?De[nd]:De[td];if(!r.test(t))return null;try{return new le(t,e)}catch{return null}}J.valid=HI;function HI(t,e){var r=vi(t,e);return r?r.version:null}J.clean=BI;function BI(t,e){var r=vi(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}J.SemVer=le;function le(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof le){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>ho)throw new TypeError("version is longer than "+ho+" characters");if(!(this instanceof le))return new le(t,e);_e("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?De[nd]:De[td]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>vc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<vc)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}le.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};le.prototype.toString=function(){return this.version};le.prototype.compare=function(t){return _e("SemVer.compare",this.version,this.options,t),t instanceof le||(t=new le(t,this.options)),this.compareMain(t)||this.comparePre(t)};le.prototype.compareMain=function(t){return t instanceof le||(t=new le(t,this.options)),hs(this.major,t.major)||hs(this.minor,t.minor)||hs(this.patch,t.patch)};le.prototype.comparePre=function(t){if(t instanceof le||(t=new le(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(_e("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return hs(r,n)}while(++e)};le.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};J.inc=UI;function UI(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new le(t,r).inc(e,n).version}catch{return null}}J.diff=WI;function WI(t,e){if(od(t,e))return null;var r=vi(t),n=vi(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==n[o])return i+o;return s}J.compareIdentifiers=hs;var yy=/^[0-9]+$/;function hs(t,e){var r=yy.test(t),n=yy.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}J.rcompareIdentifiers=zI;function zI(t,e){return hs(e,t)}J.major=KI;function KI(t,e){return new le(t,e).major}J.minor=VI;function VI(t,e){return new le(t,e).minor}J.patch=GI;function GI(t,e){return new le(t,e).patch}J.compare=dn;function dn(t,e,r){return new le(t,r).compare(new le(e,r))}J.compareLoose=XI;function XI(t,e){return dn(t,e,!0)}J.rcompare=YI;function YI(t,e,r){return dn(e,t,r)}J.sort=QI;function QI(t,e){return t.sort(function(r,n){return J.compare(r,n,e)})}J.rsort=JI;function JI(t,e){return t.sort(function(r,n){return J.rcompare(r,n,e)})}J.gt=mo;function mo(t,e,r){return dn(t,e,r)>0}J.lt=Cc;function Cc(t,e,r){return dn(t,e,r)<0}J.eq=od;function od(t,e,r){return dn(t,e,r)===0}J.neq=Oy;function Oy(t,e,r){return dn(t,e,r)!==0}J.gte=ad;function ad(t,e,r){return dn(t,e,r)>=0}J.lte=cd;function cd(t,e,r){return dn(t,e,r)<=0}J.cmp=wc;function wc(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return od(t,r,n);case"!=":return Oy(t,r,n);case">":return mo(t,r,n);case">=":return ad(t,r,n);case"<":return Cc(t,r,n);case"<=":return cd(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}J.Comparator=Er;function Er(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Er){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Er))return new Er(t,e);t=t.trim().split(/\s+/).join(" "),_e("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===yo?this.value="":this.value=this.operator+this.semver.version,_e("comp",this)}var yo={};Er.prototype.parse=function(t){var e=this.options.loose?De[id]:De[sd],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new le(r[2],this.options.loose):this.semver=yo};Er.prototype.toString=function(){return this.value};Er.prototype.test=function(t){return _e("Comparator.test",t,this.options.loose),this.semver===yo?!0:(typeof t=="string"&&(t=new le(t,this.options)),wc(t,this.operator,this.semver,this.options))};Er.prototype.intersects=function(t,e){if(!(t instanceof Er))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Me(t.value,e),bc(this.value,r,e);if(t.operator==="")return r=new Me(this.value,e),bc(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=wc(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=wc(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&o||a||c};J.Range=Me;function Me(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Me)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Me(t.raw,e);if(t instanceof Er)return new Me(t.value,e);if(!(this instanceof Me))return new Me(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Me.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Me.prototype.toString=function(){return this.range};Me.prototype.parseRange=function(t){var e=this.options.loose,r=e?De[xy]:De[Iy];t=t.replace(r,cx),_e("hyphen replace",t),t=t.replace(De[mi],$I),_e("comparator trim",t,De[mi]),t=t.replace(De[ms],FI),t=t.replace(De[vs],jI);var n=e?De[id]:De[sd],i=t.split(" ").map(function(s){return ex(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new Er(s,this.options)},this),i};Me.prototype.intersects=function(t,e){if(!(t instanceof Me))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};J.toComparators=ZI;function ZI(t,e){return new Me(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function ex(t,e){return _e("comp",t,e),t=nx(t,e),_e("caret",t),t=tx(t,e),_e("tildes",t),t=sx(t,e),_e("xrange",t),t=ax(t,e),_e("stars",t),t}function $t(t){return!t||t.toLowerCase()==="x"||t==="*"}function tx(t,e){return t.trim().split(/\s+/).map(function(r){return rx(r,e)}).join(" ")}function rx(t,e){var r=e.loose?De[Ry]:De[Ty];return t.replace(r,function(n,i,s,o,a){_e("tilde",t,n,i,s,o,a);var c;return $t(i)?c="":$t(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":$t(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(_e("replaceTilde pr",a),c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",_e("tilde return",c),c})}function nx(t,e){return t.trim().split(/\s+/).map(function(r){return ix(r,e)}).join(" ")}function ix(t,e){_e("caret",t,e);var r=e.loose?De[Py]:De[Dy];return t.replace(r,function(n,i,s,o,a){_e("caret",t,n,i,s,o,a);var c;return $t(i)?c="":$t(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":$t(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(_e("replaceCaret pr",a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+"-"+a+" <"+(+i+1)+".0.0"):(_e("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),_e("caret return",c),c})}function sx(t,e){return _e("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return ox(r,e)}).join(" ")}function ox(t,e){t=t.trim();var r=e.loose?De[Ey]:De[by];return t.replace(r,function(n,i,s,o,a,c){_e("xRange",t,n,i,s,o,a,c);var u=$t(s),f=u||$t(o),h=f||$t(a),m=h;return i==="="&&m&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(f&&(o=0),a=0,i===">"?(i=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",f?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):f?n=">="+s+".0.0 <"+(+s+1)+".0.0":h&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),_e("xRange return",n),n})}function ax(t,e){return _e("replaceStars",t,e),t.trim().replace(De[qy],"")}function cx(t,e,r,n,i,s,o,a,c,u,f,h,m){return $t(r)?e="":$t(n)?e=">="+r+".0.0":$t(i)?e=">="+r+"."+n+".0":e=">="+e,$t(c)?a="":$t(u)?a="<"+(+c+1)+".0.0":$t(f)?a="<"+c+"."+(+u+1)+".0":h?a="<="+c+"."+u+"."+f+"-"+h:a="<="+a,(e+" "+a).trim()}Me.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new le(t,this.options));for(var e=0;e<this.set.length;e++)if(ux(this.set[e],t,this.options))return!0;return!1};function ux(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(_e(t[n].semver),t[n].semver!==yo&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}J.satisfies=bc;function bc(t,e,r){try{e=new Me(e,r)}catch{return!1}return e.test(t)}J.maxSatisfying=lx;function lx(t,e,r){var n=null,i=null;try{var s=new Me(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new le(n,r))}),n}J.minSatisfying=dx;function dx(t,e,r){var n=null,i=null;try{var s=new Me(e,r)}catch{return null}return t.forEach(function(o){s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new le(n,r))}),n}J.minVersion=fx;function fx(t,e){t=new Me(t,e);var r=new le("0.0.0");if(t.test(r)||(r=new le("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(s){var o=new le(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!r||mo(r,o))&&(r=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}J.validRange=px;function px(t,e){try{return new Me(t,e).range||"*"}catch{return null}}J.ltr=hx;function hx(t,e,r){return ud(t,e,"<",r)}J.gtr=gx;function gx(t,e,r){return ud(t,e,">",r)}J.outside=ud;function ud(t,e,r,n){t=new le(t,n),e=new Me(e,n);var i,s,o,a,c;switch(r){case">":i=mo,s=cd,o=Cc,a=">",c=">=";break;case"<":i=Cc,s=ad,o=mo,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(bc(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var f=e.set[u],h=null,m=null;if(f.forEach(function(y){y.semver===yo&&(y=new Er(">=0.0.0")),h=h||y,m=m||y,i(y.semver,h.semver,n)?h=y:o(y.semver,m.semver,n)&&(m=y)}),h.operator===a||h.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0}J.prerelease=mx;function mx(t,e){var r=vi(t,e);return r&&r.prerelease.length?r.prerelease:null}J.intersects=vx;function vx(t,e,r){return t=new Me(t,r),e=new Me(e,r),t.intersects(e)}J.coerce=yx;function yx(t){if(t instanceof le)return t;if(typeof t!="string")return null;var e=t.match(De[Sy]);return e==null?null:vi(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var dd=v(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var _x=require("path"),Cx=Rc(),Ny=require("module"),wx=Object.keys(process.binding("natives")),Ay=Ny.prototype.require;function bx(t){var e={};return function(n){var i=Ay.apply(this,arguments);if(t[n]){var s=Ny._resolveFilename(n,this);if(e.hasOwnProperty(s))return e[s];var o=void 0;if(wx.indexOf(n)<0)try{o=Ay.call(this,_x.join(n,"package.json")).version}catch{return i}else o=process.version.substring(1);var a=o.indexOf("-");a>=0&&(o=o.substring(0,a));for(var c=i,u=0,f=t[n];u<f.length;u++){var h=f[u];Cx.satisfies(o,h.versionSpecifier)&&(c=h.patch(c,s))}return e[s]=c}return i}}ld.makePatchingRequire=bx});var Ly=v((JB,Ex)=>{Ex.exports={name:"diagnostic-channel",version:"0.3.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Qe=v(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var Sx=dd(),Tx=dd();Dc.makePatchingRequire=Tx.makePatchingRequire;var My=function(t){return!0},Rx=function(){function t(){this.version=Ly().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(s){var o=s.listener,a=s.filter;try{a&&a(!0)&&o(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n){n===void 0&&(n=My),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n})},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=My);var i=this.subscribers[e];if(i){for(var s=0;s<i.length;++s)if(i[s].listener===r&&i[s].filter===n)return i.splice(s,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t}();global.diagnosticsSource||(global.diagnosticsSource=new Rx,Fy=require("module"),Fy.prototype.require=Sx.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Fy;Dc.channel=global.diagnosticsSource});var $y=v(fn=>{"use strict";var Dx=fn&&fn.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(fn,"__esModule",{value:!0});var Pc=Qe();fn.AzureMonitorSymbol="Azure_Monitor_Tracer";var jy=!1,Px=function(t){if(jy)return t;try{var e=require("@opentelemetry/tracing"),r=require("@opentelemetry/api"),n=Pc.channel.spanContextPropagator?{contextManager:Pc.channel.spanContextPropagator}:void 0;new e.BasicTracerProvider().register(n);var i=r.trace.getTracer("applicationinsights tracer"),s=i.startSpan;i.startSpan=function(o,a){if(!a||!a.parent){var c=r.getSpan(r.context.active());c&&c.operation&&c.operation.traceparent&&(a=Dx({},a,{parent:{traceId:c.operation.traceparent.traceId,spanId:c.operation.traceparent.spanId,traceFlags:1}}))}var u=s.call(this,o,a),f=u.end;return u.end=function(){var h=f.apply(this,arguments);return Pc.channel.publish("azure-coretracing",u),h},u},r.getSpan(r.context.active()),i[fn.AzureMonitorSymbol]=!0,t.setTracer(i),jy=!0}catch{}return t};fn.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:Px};function Ix(){Pc.channel.registerMonkeyPatch("@azure/core-tracing",fn.azureCoreTracing)}fn.enable=Ix});var By=v(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Hy=Qe(),xx=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var s=i;s||(s=e.call(this,r,!0)),Hy.channel.publish("bunyan",{level:r.level,result:s})}return i},t};_o.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:xx};function qx(){Hy.channel.registerMonkeyPatch("bunyan",_o.bunyan)}_o.enable=qx});var Wy=v(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var fd=Qe(),Uy=require("stream"),Ox=function(t){var e=new Uy.Writable,r=new Uy.Writable;e.write=function(u){if(!u)return!0;var f=u.toString();return fd.channel.publish("console",{message:f}),!0},r.write=function(u){if(!u)return!0;var f=u.toString();return fd.channel.publish("console",{message:f,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],s=function(u){var f=t[u];f&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return f.apply(t,arguments)})},o=0,a=i;o<a.length;o++){var c=a[o];s(c)}return t};Co.console={versionSpecifier:">= 4.0.0",patch:Ox};function kx(){fd.channel.registerMonkeyPatch("console",Co.console),require("console")}Co.enable=kx});var zy=v(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});var pd=Qe(),Ax=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=pd.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=pd.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t};wo.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Ax};function Nx(){pd.channel.registerMonkeyPatch("mongodb-core",wo.mongoCore)}wo.enable=Nx});var Vy=v(kr=>{"use strict";var Ky=kr&&kr.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(kr,"__esModule",{value:!0});var qt=Qe(),Lx=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return qt.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=Ky({},n,{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return qt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):qt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return qt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):qt.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},Mx=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=qt.channel.bindToContext(function(s){return s()}),r[i.requestId]=Ky({},i,{time:new Date}))}),e.on("succeeded",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return qt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return qt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!1})}),delete n[i.requestId])}),t},Fx=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=qt.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var s=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=qt.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t},jx=function(t){Fx(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=qt.channel.bindToContext(function(s){return s()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return qt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var s=r[i.requestId];s&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return qt.channel.publish("mongodb",{startedData:s,event:i,succeeded:!1})}),delete n[i.requestId])}),t};kr.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:Lx};kr.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:Mx};kr.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:jx};function $x(){qt.channel.registerMonkeyPatch("mongodb",kr.mongo2),qt.channel.registerMonkeyPatch("mongodb",kr.mongo3),qt.channel.registerMonkeyPatch("mongodb",kr.mongo330)}kr.enable=$x});var Xy=v(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var Ic=Qe(),Gy=require("path"),Hx=function(t,e){var r=function(c,u){return function(f,h){var m=c[f];m&&(c[f]=function(){for(var S=arguments.length-1,I=arguments.length-1;I>=0;--I)if(typeof arguments[I]=="function"){S=I;break}else if(typeof arguments[I]<"u")break;var M=arguments[S],k={result:null,startTime:null,startDate:null};typeof M=="function"&&(h?(k.startTime=process.hrtime(),k.startDate=new Date,arguments[S]=Ic.channel.bindToContext(h(k,M))):arguments[S]=Ic.channel.bindToContext(M));var D=m.apply(this,arguments);return k.result=D,D})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],s=require(Gy.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(s,"Connection")(c)}),r(s,"Connection")("createQuery",function(c,u){return function(f){var h=process.hrtime(c.startTime),m=h[0]*1e3+h[1]/1e6|0;Ic.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:f,duration:m,time:c.startDate}),u.apply(this,arguments)}});var o=["_enqueueCallback"],a=require(Gy.dirname(e)+"/lib/Pool");return o.forEach(function(c){return n(a,"Pool")(c)}),t};bo.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:Hx};function Bx(){Ic.channel.registerMonkeyPatch("mysql",bo.mysql)}bo.enable=Bx});var Qy=v(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});var Yy=Qe();function Ux(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=Yy.channel.bindToContext(n)),e.apply(this,arguments)},t}Eo.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:Ux};function Wx(){Yy.channel.registerMonkeyPatch("pg-pool",Eo.postgresPool1)}Eo.enable=Wx});var Zy=v(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});var _s=Qe(),Jy=require("events");function zx(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,o,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),f;function h(m){m&&m[n]&&(m=m[n]);var y=_s.channel.bindToContext(function(S,I){var M=process.hrtime(u);if(c.result=I&&{rowCount:I.rowCount,command:I.command},c.error=S,c.duration=Math.ceil(M[0]*1e3+M[1]/1e6),_s.channel.publish("postgres",c),S){if(m)return m.apply(this,arguments);f&&f instanceof Jy.EventEmitter&&f.emit("error",S)}else m&&m.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:m}),y}catch{return m}}try{typeof s=="string"?o instanceof Array?(c.query.preparable={text:s,args:o},a=h(a)):(c.query.text=s,a?a=h(a):o=h(o)):(typeof s.name=="string"?c.query.plan=s.name:s.values instanceof Array?c.query.preparable={text:s.text,args:s.values}:c.query.text=s.text,a?a=h(a):o?o=h(o):s.callback=h(s.callback))}catch{return r.apply(this,arguments)}return arguments[0]=s,arguments[1]=o,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,f=r.apply(this,arguments),f},t}function Kx(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,o,a){var c=this,u=!!a,f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function y(S){S&&S[n]&&(S=S[n]);var I=_s.channel.bindToContext(function(M,k){var D=process.hrtime(h);if(f.result=k&&{rowCount:k.rowCount,command:k.command},f.error=M,f.duration=Math.ceil(D[0]*1e3+D[1]/1e6),_s.channel.publish("postgres",f),M){if(S)return S.apply(this,arguments);m&&m instanceof Jy.EventEmitter&&m.emit("error",M)}else S&&S.apply(this,arguments)});try{return Object.defineProperty(I,n,{value:S}),I}catch{return S}}try{typeof s=="string"?o instanceof Array?(f.query.preparable={text:s,args:o},u=typeof a=="function",a=u?y(a):a):(f.query.text=s,a?(u=typeof a=="function",a=u?y(a):a):(u=typeof o=="function",o=u?y(o):o)):(typeof s.name=="string"?f.query.plan=s.name:s.values instanceof Array?f.query.preparable={text:s.text,args:s.values}:f.query.text=s.text,a?(u=typeof a=="function",a=y(a)):o?(u=typeof o=="function",o=u?y(o):o):(u=typeof s.callback=="function",s.callback=u?y(s.callback):s.callback))}catch{return r.apply(this,arguments)}return arguments[0]=s,arguments[1]=o,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,m=r.apply(this,arguments),u?m:m.then(function(S){return y()(void 0,S),new c._Promise(function(I,M){I(S)})}).catch(function(S){return y()(S,void 0),new c._Promise(function(I,M){M(S)})})},t}yi.postgres6={versionSpecifier:"6.*",patch:zx};yi.postgres7={versionSpecifier:">=7.* <=8.*",patch:Kx};function Vx(){_s.channel.registerMonkeyPatch("pg",yi.postgres6),_s.channel.registerMonkeyPatch("pg",yi.postgres7)}yi.enable=Vx});var e_=v(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var hd=Qe(),Gx=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,s=process.hrtime(),o=new Date;r.callback=hd.channel.bindToContext(function(a,c){var u=process.hrtime(s),f=u[0]*1e3+u[1]/1e6|0;hd.channel.publish("redis",{duration:f,address:i,commandObj:r,err:a,result:c,time:o}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};So.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Gx};function Xx(){hd.channel.registerMonkeyPatch("redis",So.redis)}So.enable=Xx});var t_=v(_i=>{"use strict";var Yx=_i&&_i.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(_i,"__esModule",{value:!0});var gd=Qe(),Qx=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(s){var o=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return gd.channel.bindToContext(function(c,u,f){var h=process.hrtime(o);a=Yx({},a,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:f},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(h[0]*1e3+h[1]/1e6)}),gd.channel.publish("tedious",a),s.call(this,c,u,f)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};_i.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:Qx};function Jx(){gd.channel.registerMonkeyPatch("tedious",_i.tedious)}_i.enable=Jx});var r_=v(Ar=>{"use strict";var Zx=Ar&&Ar.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eq=Ar&&Ar.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Ar,"__esModule",{value:!0});var xc=Qe(),tq=function(t){var e=t.Logger.prototype.log,r,n=function(i,s,o){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",xc.channel.publish("winston",{level:i,message:s,meta:o,levelKind:a}),s};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(s){return s!==n}),this.filters.push(n)),e.apply(this,arguments)},t},rq=function(t){var e=function(o,a){var c;return o.config.npm.levels[a]!=null?c="npm":o.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(o){Zx(a,o);function a(c,u){var f=o.call(this,u)||this;return f.winston=c,f}return a.prototype.log=function(c,u){var f=c.message,h=c.level,m=c.meta,y=eq(c,["message","level","meta"]);h=typeof Symbol.for=="function"?c[Symbol.for("level")]:h,f=c instanceof Error?c:f;var S=e(this.winston,h);m=m||{};for(var I in y)y.hasOwnProperty(I)&&(m[I]=y[I]);xc.channel.publish("winston",{message:f,level:h,levelKind:S,meta:m}),u()},a}(t.Transport);function n(){var o=arguments[0].levels||t.config.npm.levels,a;for(var c in o)o.hasOwnProperty(c)&&(a=a===void 0||o[c]>o[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=arguments[0].levels||t.config.npm.levels,c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var f=i.apply(this,arguments);f.add(new r(t,{level:c}));var h=f.configure;return f.configure=function(){h.apply(this,arguments),n.apply(this,arguments)},f};var s=t.configure;return t.configure=function(){s.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Ar.winston3={versionSpecifier:"3.x",patch:rq};Ar.winston2={versionSpecifier:"2.x",patch:tq};function nq(){xc.channel.registerMonkeyPatch("winston",Ar.winston2),xc.channel.registerMonkeyPatch("winston",Ar.winston3)}Ar.enable=nq});var h_=v(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});var n_=$y();Qt.azuresdk=n_;var i_=By();Qt.bunyan=i_;var s_=Wy();Qt.console=s_;var o_=zy();Qt.mongodbCore=o_;var a_=Vy();Qt.mongodb=a_;var c_=Xy();Qt.mysql=c_;var u_=Qy();Qt.pgPool=u_;var l_=Zy();Qt.pg=l_;var d_=e_();Qt.redis=d_;var f_=t_();Qt.tedious=f_;var p_=r_();Qt.winston=p_;function iq(){i_.enable(),s_.enable(),o_.enable(),a_.enable(),c_.enable(),l_.enable(),u_.enable(),d_.enable(),p_.enable(),n_.enable(),f_.enable()}Qt.enable=iq});var kc=v(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var sq=mc(),md=ft();Cs.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var vd="DiagnosticChannel";if(Cs.IsInitialized){Nr=h_(),g_=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",qc=g_.split(","),yd={bunyan:Nr.bunyan,console:Nr.console,mongodb:Nr.mongodb,mongodbCore:Nr.mongodbCore,mysql:Nr.mysql,redis:Nr.redis,pg:Nr.pg,pgPool:Nr.pgPool,winston:Nr.winston,azuresdk:Nr.azuresdk};for(Oc in yd)qc.indexOf(Oc)===-1&&(yd[Oc].enable(),md.info(vd,"Subscribed to "+Oc+" events"));qc.length>0&&md.info(vd,"Some modules will not be patched",qc)}else md.info(vd,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Nr,g_,qc,yd,Oc;function oq(t){if(!!Cs.IsInitialized){var e=Qe();e.channel.addContextPreservation(t),e.channel.spanContextPropagator=sq.AsyncScopeManager}}Cs.registerContextPreservation=oq});var ws=v((pU,m_)=>{"use strict";m_.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var ur=v((wd,y_)=>{"use strict";var _d=wd&&wd.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},aq=require("http"),v_=require("https"),Cd=require("url"),Ac=require("constants"),To=ft(),bs=ws(),cq=function(){function t(){}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",s=r.split(";"),o=0;o<s.length;o++){var r=s[o];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,s[o].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),s=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),o=s.toString("base64");return o.substr(0,o.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var s=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+s+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return e instanceof Error},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,s=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var o=s>0?s+".":"";return o+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){To.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",s=e[n],o=typeof s;if(t.isPrimitive(s))i=s.toString();else if(s===null||o==="undefined")i="";else if(o==="function"){To.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(s)?s:t.extractObject(s);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=s.constructor.name.toString()+" (Error: "+c.message+")",To.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var s=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(s.test(Cd.parse(r).hostname))return!1}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[bs.requestContextHeader];if(n)for(var i=n.split(","),s=0;s<i.length;++s){var o=i[s].split("=");if(o.length==2&&o[0]==r)return o[1]}},t.makeRequest=function(e,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var s=Cd.parse(r),o=_d({},n,{host:s.hostname,port:s.port,path:s.pathname}),a=void 0;if(s.protocol==="https:"&&(a=e.proxyHttpsUrl||void 0),s.protocol==="http:"&&(a=e.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var c=Cd.parse(a);c.protocol==="https:"?(To.info("Proxies that use HTTPS are not supported"),a=void 0):o=_d({},o,{host:c.hostname,port:c.port||"80",path:r,headers:_d({},o.headers,{Host:s.hostname})})}var u=s.protocol==="https:"&&!a;return u&&e.httpsAgent!==void 0?o.agent=e.httpsAgent:!u&&e.httpAgent!==void 0?o.agent=e.httpAgent:u&&(o.agent=t.tlsRestrictedAgent),u?v_.request(o,i):aq.request(o,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(s){To.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",s,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(bs.requestContextHeader,bs.requestContextSourceKey+"="+e.config.correlationId)},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),s=bs.requestContextSourceKey+"=",o=i.some(function(a){return a.substring(0,s.length)===s});o||r.setHeader(bs.requestContextHeader,n+","+bs.requestContextSourceKey+"="+e.config.correlationId)},t.MAX_PROPERTY_LENGTH=8192,t.tlsRestrictedAgent=new v_.Agent({secureOptions:Ac.SSL_OP_NO_SSLv2|Ac.SSL_OP_NO_SSLv3|Ac.SSL_OP_NO_TLSv1|Ac.SSL_OP_NO_TLSv1_1}),t}();y_.exports=cq});var Ci=v((hU,__)=>{"use strict";var Nc=ur(),bd=ft(),uq=function(){function t(){}return t.queryCorrelationId=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(t.completedLookups.hasOwnProperty(n)){r(t.completedLookups[n]);return}else if(t.pendingLookups[n]){t.pendingLookups[n].push(r);return}t.pendingLookups[n]=[r];var i=function(){if(!!t.pendingLookups[n]){var s={method:"GET",disableAppInsightsAutoCollection:!0};bd.info(t.TAG,s);var o=Nc.makeRequest(e,n,s,function(a){if(a.statusCode===200){var c="";a.setEncoding("utf-8"),a.on("data",function(u){c+=u}),a.on("end",function(){bd.info(t.TAG,c);var u=t.correlationIdPrefix+c;t.completedLookups[n]=u,t.pendingLookups[n]&&t.pendingLookups[n].forEach(function(f){return f(u)}),delete t.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(t.completedLookups[n]=void 0,delete t.pendingLookups[n]):setTimeout(i,e.correlationIdRetryIntervalMs)});o&&(o.on("error",function(a){bd.warn(t.TAG,a)}),o.end())}};setTimeout(i,0)},t.cancelCorrelationIdQuery=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId",i=t.pendingLookups[n];i&&(t.pendingLookups[n]=i.filter(function(s){return s!=r}),t.pendingLookups[n].length==0&&delete t.pendingLookups[n])},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+Nc.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var s=e[i-1];if(s==="."||s==="_")break}if(i<=1)return t.generateRootId();for(r=Nc.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.TAG="CorrelationIdManager",t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.pendingLookups={},t.completedLookups={},t.requestIdMaxLength=1024,t.currentRootId=Nc.randomu32(),t}();__.exports=uq});var Ro=v((gU,C_)=>{"use strict";var Et=ur(),lq=Ci(),dq=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Et.w3cTraceId(),this.spanId=Et.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Et.w3cTraceId(),this.spanId=Et.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Et.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Et.w3cTraceId(),this.spanId=Et.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Et.w3cTraceId(),this.spanId=Et.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Et.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Et.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Et.w3cTraceId().substr(0,16),this.traceId=Et.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var s=lq.getRootId(r);t.isValidTraceId(s)||(this.legacyRootId=s,s=Et.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=s,this.spanId=r}else this.traceId=Et.w3cTraceId(),this.spanId=Et.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Et.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();C_.exports=dq});var Ed=v((mU,w_)=>{"use strict";var fq=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),s=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return s&&o}else if(r.length==1)return Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var s=0,o=i;s<o.length;s++){var a=o[s],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();w_.exports=fq});var pn=v((vU,b_)=>{"use strict";var pq=function(){function t(){}return t}();b_.exports=pq});var S_=v((Sd,E_)=>{"use strict";var hq=Sd&&Sd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gq=pn(),mq=function(t){hq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(gq);E_.exports=mq});var Td=v((yU,T_)=>{"use strict";var vq=function(){function t(){}return t}();T_.exports=vq});var D_=v((_U,R_)=>{"use strict";var yq=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();R_.exports=yq});var I_=v((Rd,P_)=>{"use strict";var _q=Rd&&Rd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cq=Td(),wq=function(t){_q(e,t);function e(){return t.call(this)||this}return e}(Cq);P_.exports=wq});var Pd=v((CU,x_)=>{"use strict";var Dd;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(Dd||(Dd={}));x_.exports=Dd});var O_=v((wU,q_)=>{"use strict";var bq=Pd(),Eq=function(){function t(){this.kind=bq.Measurement}return t}();q_.exports=Eq});var A_=v((bU,k_)=>{"use strict";var Sq=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();k_.exports=Sq});var xd=v((Id,N_)=>{"use strict";var Tq=Id&&Id.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rq=pn(),Dq=function(t){Tq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Rq);N_.exports=Dq});var M_=v((qd,L_)=>{"use strict";var Pq=qd&&qd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iq=pn(),xq=function(t){Pq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(Iq);L_.exports=xq});var j_=v((EU,F_)=>{"use strict";var qq=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();F_.exports=qq});var H_=v((Od,$_)=>{"use strict";var Oq=Od&&Od.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kq=pn(),Aq=function(t){Oq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(kq);$_.exports=Aq});var U_=v((kd,B_)=>{"use strict";var Nq=kd&&kd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lq=pn(),Mq=function(t){Nq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(Lq);B_.exports=Mq});var z_=v((Ad,W_)=>{"use strict";var Fq=Ad&&Ad.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jq=xd(),$q=function(t){Fq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(jq);W_.exports=$q});var V_=v((Nd,K_)=>{"use strict";var Hq=Nd&&Nd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bq=pn(),Uq=function(t){Hq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(Bq);K_.exports=Uq});var X_=v((Ld,G_)=>{"use strict";var Wq=Ld&&Ld.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zq=pn(),Kq=function(t){Wq(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(zq);G_.exports=Kq});var Q_=v((SU,Y_)=>{"use strict";var Md;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Md||(Md={}));Y_.exports=Md});var Z_=v((TU,J_)=>{"use strict";var Vq=function(){function t(){}return t}();J_.exports=Vq});var Fd=v(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.AvailabilityData=S_();nt.Base=Td();nt.ContextTagKeys=D_();nt.Data=I_();nt.DataPoint=O_();nt.DataPointType=Pd();nt.Domain=pn();nt.Envelope=A_();nt.EventData=xd();nt.ExceptionData=M_();nt.ExceptionDetails=j_();nt.MessageData=H_();nt.MetricData=U_();nt.PageViewData=z_();nt.RemoteDependencyData=V_();nt.RequestData=X_();nt.SeverityLevel=Q_();nt.StackFrame=Z_()});var eC=v(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var wi=Fd(),Gq=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();Lc.RemoteDependencyDataConstants=Gq;function Xq(t){return"properties"in t||t instanceof wi.EventData||t instanceof wi.ExceptionData||t instanceof wi.MessageData||t instanceof wi.MetricData||t instanceof wi.PageViewData||t instanceof wi.RemoteDependencyData||t instanceof wi.RequestData}Lc.domainSupportsProperties=Xq});var tC=v(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});function Yq(t){switch(t){case St.Event:return"EventData";case St.Exception:return"ExceptionData";case St.Trace:return"MessageData";case St.Metric:return"MetricData";case St.Request:return"RequestData";case St.Dependency:return"RemoteDependencyData";case St.Availability:return"AvailabilityData";case St.PageView:return"PageViewData"}}bi.telemetryTypeToBaseType=Yq;function Qq(t){switch(t){case"EventData":return St.Event;case"ExceptionData":return St.Exception;case"MessageData":return St.Trace;case"MetricData":return St.Metric;case"RequestData":return St.Request;case"RemoteDependencyData":return St.Dependency;case"AvailabilityData":return St.Availability;case"PageViewData":return St.PageView}}bi.baseTypeToTelemetryType=Qq;bi.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var St;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(St=bi.TelemetryType||(bi.TelemetryType={}))});var rC=v(Mc=>{"use strict";function Jq(t){for(var e in t)Mc.hasOwnProperty(e)||(Mc[e]=t[e])}Object.defineProperty(Mc,"__esModule",{value:!0});Jq(tC())});var Jt=v(Fc=>{"use strict";function jd(t){for(var e in t)Fc.hasOwnProperty(e)||(Fc[e]=t[e])}Object.defineProperty(Fc,"__esModule",{value:!0});jd(eC());jd(Fd());jd(rC())});var $d=v((qU,nC)=>{"use strict";var Zq=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var s in r)i[s]=r[s]&&r[s].toString&&r[s].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();nC.exports=Zq});var Ud=v((Bd,sC)=>{"use strict";var eO=Bd&&Bd.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jc=require("url"),tO=Jt(),iC=ur(),Ei=ws(),rO=$d(),Hn=Ci(),nO=Ed(),Hd=Ro(),iO=function(t){eO(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+jc.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId("ai_session"),n[e.keys.userId]=r[e.keys.userId]||this._getId("ai_user"),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId("ai_authUser"),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){return r[e.keys.operationName]||this.method+" "+jc.parse(this.url).pathname},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=jc.parse(r.url),s=i.pathname,o=i.search,a=jc.format({protocol:n?"https":"http",host:r.headers.host,pathname:s,search:o});return a},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(s){var o=r.exec(s);if(o)return o[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=e.parseId(iC.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=iC.getCorrelationContextTarget(r,Ei.requestContextSourceKey),r.headers){var i=r.headers[Ei.traceStateHeader],s=r.headers[Ei.traceparentHeader],o=r.headers[Ei.requestIdHeader],a=r.headers[Ei.parentIdHeader],c=r.headers[Ei.rootIdHeader];this.correlationContextHeader=r.headers[Ei.correlationContextHeader],Hn.w3cEnabled&&(s||i)?(this.traceparent=new Hd(s),this.tracestate=s&&i&&new nO(i),this.setBackCompatFromThisTraceContext()):o?Hn.w3cEnabled?(this.traceparent=new Hd(null,o),this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=Hn.generateRequestId(this.parentId),this.operationId=Hn.getRootId(this.requestId)):Hn.w3cEnabled?(this.traceparent=new Hd,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=Hn.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=Hn.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=Hn.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new tO.ContextTagKeys,e}(rO);sC.exports=iO});var $c=v((OU,cC)=>{"use strict";function Wd(t){return typeof t=="function"}var Ht=console.error.bind(console);function Do(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Po(t){t&&t.logger&&(Wd(t.logger)?Ht=t.logger:Ht("new logger isn't a function, not replacing"))}function oC(t,e,r){if(!t||!t[e]){Ht("no original function "+e+" to wrap");return}if(!r){Ht("no wrapper function"),Ht(new Error().stack);return}if(!Wd(t[e])||!Wd(r)){Ht("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return Do(i,"__original",n),Do(i,"__unwrap",function(){t[e]===i&&Do(t,e,n)}),Do(i,"__wrapped",!0),Do(t,e,i),i}function sO(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Ht("must provide one or more modules to patch"),Ht(new Error().stack);return}if(!(e&&Array.isArray(e))){Ht("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){oC(n,i,r)})})}function aC(t,e){if(!t||!t[e]){Ht("no function to unwrap."),Ht(new Error().stack);return}if(!t[e].__unwrap)Ht("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function oO(t,e){if(t)Array.isArray(t)||(t=[t]);else{Ht("must provide one or more modules to patch"),Ht(new Error().stack);return}if(!(e&&Array.isArray(e))){Ht("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){aC(r,n)})})}Po.wrap=oC;Po.massWrap=sO;Po.unwrap=aC;Po.massUnwrap=oO;cC.exports=Po});var Uc=v((kU,fC)=>{"use strict";var lC=$c(),Es=lC.wrap,Hc=lC.unwrap,hn="wrap@before";function Bc(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function aO(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],s=t[hn];if(typeof s=="function")s(i);else if(Array.isArray(s))for(var o=s.length,a=0;a<o;a++)s[a](i)}}function dC(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function cO(t,e,r){var n=dC(t,e),i=n.filter(function(s){return r.indexOf(s)===-1});i.length>0&&aO(t,i)}function uC(t,e){if(!!t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}fC.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(o){return function(c,u){var f=dC(this,c).slice();try{var h=o.call(this,c,u);return cO(this,c,f),h}finally{this.on.__wrapped||Es(this,"on",i),this.addListener.__wrapped||Es(this,"addListener",i)}}}function s(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function f(h){return function(){this._events[c]=u;try{return h.apply(this,arguments)}finally{u=this._events[c],this._events[c]=uC(u,n)}}}Es(this,"removeListener",f);try{return this._events[c]=uC(u,n),o.apply(this,arguments)}finally{Hc(this,"removeListener"),this._events[c]=u}}}e[hn]?typeof e[hn]=="function"?Bc(e,hn,[e[hn],r]):Array.isArray(e[hn])&&e[hn].push(r):Bc(e,hn,r),e.__wrapped||(Es(e,"addListener",i),Es(e,"on",i),Es(e,"emit",s),Bc(e,"__unwrap",function(){Hc(e,"addListener"),Hc(e,"on"),Hc(e,"emit"),delete e[hn],delete e.__wrapped}),Bc(e,"__wrapped",!0))}});var mC=v((AU,gC)=>{"use strict";var he=require("util"),gn=require("assert"),uO=Uc(),Ie=require("async_hooks"),Io="cls@contexts",xo="error@context",Fe=process.env.DEBUG_CLS_HOOKED,pe=-1;gC.exports={getNamespace:pC,createNamespace:lO,destroyNamespace:hC,reset:dO,ERROR_SYMBOL:xo};function Sr(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Sr.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Fe){let n=" ".repeat(this._indent<0?0:this._indent);Ae(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Sr.prototype.get=function(e){if(!this.active){if(Fe){let r=Ie.currentId(),n=Ie.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ae(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Fe){let r=Ie.executionAsyncId(),n=Ie.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ae(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Ae(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${he.inspect(this.active)}`)}return this.active[e]};Sr.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=pe,Fe){let r=Ie.executionAsyncId(),n=Ie.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ae(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${he.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Sr.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Fe){let n=Ie.triggerAsyncId(),i=Ie.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ae(`${s}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${he.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[xo]=r),n}finally{if(Fe){let n=Ie.triggerAsyncId(),i=Ie.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ae(`${s}CONTEXT-RUN END: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${he.inspect(r)}`)}this.exit(r)}};Sr.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Sr.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Fe&&Ae("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),n.then(i=>(Fe&&Ae("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),i)).catch(i=>{throw i[xo]=r,Fe&&Ae("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),i})};Sr.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[xo]=r),s}finally{n.exit(r)}}};Sr.prototype.enter=function(e){if(gn.ok(e,"context must be provided for entering"),Fe){let r=Ie.executionAsyncId(),n=Ie.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ae(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${he.inspect(e)}`)}this._set.push(this.active),this.active=e};Sr.prototype.exit=function(e){if(gn.ok(e,"context must be provided for exiting"),Fe){let n=Ie.executionAsyncId(),i=Ie.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);Ae(`${s}CONTEXT-EXIT: (${this.name}) currentUid:${pe} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${he.inspect(e)}`)}if(this.active===e){gn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Fe&&Ae("??ERROR?? context exiting but not entered - ignoring: "+he.inspect(e)),gn.ok(r>=0,`context not currently entered; can't exit. 
`+he.inspect(this)+`
`+he.inspect(e))):(gn.ok(r,"can't remove top context"),this._set.splice(r,1))};Sr.prototype.bindEmitter=function(e){gn.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(o){!o||(o[Io]||(o[Io]=Object.create(null)),o[Io][n]={namespace:r,context:r.active})}function s(o){if(!(o&&o[Io]))return o;let a=o,c=o[Io];return Object.keys(c).forEach(function(u){let f=c[u];a=f.namespace.bind(a,f.context)}),a}uO(e,i,s)};Sr.prototype.fromException=function(e){return e[xo]};function pC(t){return process.namespaces[t]}function lO(t){gn.ok(t,"namespace must be given a name."),Fe&&Ae(`NS-CREATING NAMESPACE (${t})`);let e=new Sr(t);return e.id=pe,Ie.createHook({init(n,i,s,o){if(pe=Ie.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Fe){let a=" ".repeat(e._indent<0?0:e._indent);Ae(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(pe===0){let a=Ie.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),Fe){let u=" ".repeat(e._indent<0?0:e._indent);Ae(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(Fe){let u=" ".repeat(e._indent<0?0:e._indent);Ae(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(Fe&&i==="PROMISE"){Ae(he.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(e._indent<0?0:e._indent);Ae(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){pe=Ie.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(pe),i){if(Fe){let s=Ie.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Ae(`${o}BEFORE (${t}) asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(i)}`),e._indent+=2}e.enter(i)}else if(Fe){let s=Ie.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Ae(`${o}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${he.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){pe=Ie.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(pe),i){if(Fe){let s=Ie.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);Ae(`${o}AFTER (${t}) asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(i)}`)}e.exit(i)}else if(Fe){let s=Ie.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);Ae(`${o}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pe} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(i)}`)}},destroy(n){if(pe=Ie.executionAsyncId(),Fe){let i=Ie.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Ae(`${s}DESTROY (${t}) currentUid:${pe} asyncId:${n} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(e._contexts.get(pe))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function hC(t){let e=pC(t);gn.ok(e,`can't delete nonexistent namespace! "`+t+'"'),gn.ok(e.id,"don't assign to process.namespaces directly! "+he.inspect(e)),process.namespaces[t]=null}function dO(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){hC(t)}),process.namespaces=Object.create(null)}process.namespaces={};function Ae(...t){Fe&&process._rawDebug(`${he.format(...t)}`)}});var yC=v((NU,vC)=>{"use strict";function fO(){}vC.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let s=i[0];if(typeof s!="function")throw new TypeError("callback is not a function");let o=new fO,a=--r.counter;return e.init.call(o,a,0,null,null),i[0]=function(){e.pre.call(o,a);let c=!0;try{s.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(o,a,!0),e.destroy.call(null,a)})}e.post.call(o,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var CC=v((LU,_C)=>{"use strict";function pO(){}_C.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function s(u,f,h,m){return typeof u!="function"?m?o(h):a(h):function(){e.pre.call(f,h);try{return u.apply(this,arguments)}finally{e.post.call(f,h,!1),e.destroy.call(null,h)}}}function o(u){return function(h){return e.destroy.call(null,u),h}}function a(u){return function(h){throw e.destroy.call(null,u),h}}function c(u,f){if(!r.enabled)return i.call(this,u,f);let h=new pO,m=--r.counter;return e.init.call(h,m,0,null,null),i.call(this,s(u,h,m,!0),s(f,h,m,!1))}}});var bC=v((MU,wC)=>{"use strict";var lr=require("timers");function hO(){}function gO(){}function mO(){}var vO=new Map,yO=new Map,_O=new Map,zd=null,Kd=!1;wC.exports=function(){Vd(this._hooks,this._state,"setTimeout","clearTimeout",hO,vO,!0),Vd(this._hooks,this._state,"setInterval","clearInterval",gO,yO,!1),Vd(this._hooks,this._state,"setImmediate","clearImmediate",mO,_O,!0),global.setTimeout=lr.setTimeout,global.setInterval=lr.setInterval,global.setImmediate=lr.setImmediate,global.clearTimeout=lr.clearTimeout,global.clearInterval=lr.clearInterval,global.clearImmediate=lr.clearImmediate};function Vd(t,e,r,n,i,s,o){let a=lr[r],c=lr[n];lr[r]=function(){if(!e.enabled)return a.apply(lr,arguments);let u=new Array(arguments.length);for(let S=0;S<arguments.length;S++)u[S]=arguments[S];let f=u[0];if(typeof f!="function")throw new TypeError('"callback" argument must be a function');let h=new i,m=--e.counter,y;return t.init.call(h,m,0,null,null),u[0]=function(){zd=y,t.pre.call(h,m);let S=!0;try{f.apply(this,arguments),S=!1}finally{S&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(h,m,!0),s.delete(y),t.destroy.call(null,m)})}t.post.call(h,m,!1),zd=null,(o||Kd)&&(Kd=!1,s.delete(y),t.destroy.call(null,m))},y=a.apply(lr,u),s.set(y,m),y},lr[n]=function(u){if(zd===u&&u!==null)Kd=!0;else if(s.has(u)){let f=s.get(u);s.delete(u),t.destroy.call(null,f)}c.apply(lr,arguments)}}});var Gd=v((FU,CO)=>{CO.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var TC=v((jU,SC)=>{"use strict";var Oo=process.binding("async_wrap"),wO=Oo.Providers.TIMERWRAP,EC={nextTick:yC(),promise:CC(),timers:bC()},qo=new Set;function bO(){this.enabled=!1,this.counter=0}function Xd(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,s,o,a){if(s===wO){qo.add(i);return}for(let c of t)c(i,this,s,o,a)},this.pre=function(i){if(!qo.has(i))for(let s of e)s(i,this)},this.post=function(i,s){if(!qo.has(i))for(let o of r)o(i,this,s)},this.destroy=function(i){if(qo.has(i)){qo.delete(i);return}for(let s of n)s(i)}}Xd.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function Wc(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}Xd.prototype.remove=function(t){t.init&&Wc(this.initFns,t.init),t.pre&&Wc(this.preFns,t.pre),t.post&&Wc(this.postFns,t.post),t.destroy&&Wc(this.destroyFns,t.destroy)};function ko(){this._state=new bO,this._hooks=new Xd,this.version=Gd().version,this.providers=Oo.Providers;for(let t of Object.keys(EC))EC[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),Oo.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}SC.exports=ko;ko.prototype.addHooks=function(t){this._hooks.add(t)};ko.prototype.removeHooks=function(t){this._hooks.remove(t)};ko.prototype.enable=function(){this._state.enabled=!0,Oo.enable()};ko.prototype.disable=function(){this._state.enabled=!1,Oo.disable()}});var Yd=v(($U,EO)=>{EO.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var DC=v((HU,RC)=>{function SO(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}RC.exports=function(e,r){var n=[];n.push(SO(e));for(var i=0;i<r.length;i++){var s=r[i],o;try{o=s.toString()}catch(a){try{o="<error: "+a+">"}catch{o="<error>"}}n.push("    at "+o)}return n.join(`
`)}});var qC=v((BU,xC)=>{var zc=DC();function IC(){this.extend=new Ao,this.filter=new Ao,this.format=new No,this.version=Yd().version}var Jd=!1;IC.prototype.callSite=function t(e){e||(e={}),Jd=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return Jd=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var Bn=new IC;function Ao(){this._modifiers=[]}Ao.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};Ao.prototype.attach=function(t){this._modifiers.push(t)};Ao.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function No(){this._formater=zc,this._previous=void 0}No.prototype.replace=function(t){t?this._formater=t:this.restore()};No.prototype.restore=function(){this._formater=zc,this._previous=void 0};No.prototype._backup=function(){this._previous=this._formater};No.prototype._roolback=function(){this._previous===zc?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Bn.format.replace(Error.prepareStackTrace);var Qd=!1;function PC(t,e){if(Jd)return e;if(Qd)return zc(t,e);var r=e.concat();r=Bn.extend._modify(t,r),r=Bn.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),Qd=!0;var n=Bn.format._formater(t,r);return Qd=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return PC},set:function(t){t===PC?Bn.format._roolback():(Bn.format._backup(),Bn.format.replace(t))}});function TO(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:TO,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});xC.exports=Bn});var ef=v((UU,Zd)=>{if(global._stackChain)if(global._stackChain.version===Yd().version)Zd.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else Zd.exports=global._stackChain=qC()});var OC=v((WU,tf)=>{"use strict";var RO=TC();if(global._asyncHook)if(global._asyncHook.version===Gd().version)tf.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else ef().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),tf.exports=global._asyncHook=new RO});var FC=v((zU,MC)=>{"use strict";var Ze=require("util"),mn=require("assert"),DO=Uc(),Ss=OC(),Lo="cls@contexts",Mo="error@context",AC=[];for(let t in Ss.providers)AC[Ss.providers[t]]=t;var Be=process.env.DEBUG_CLS_HOOKED,it=-1;MC.exports={getNamespace:NC,createNamespace:PO,destroyNamespace:LC,reset:IO,ERROR_SYMBOL:Mo};function Tr(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Tr.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return Be&&Je("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+it+" active:"+Ze.inspect(this.active,!0)),this.active[e]=r,r};Tr.prototype.get=function(e){if(!this.active){Be&&Je("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+it+" active:"+Ze.inspect(this.active,!0));return}return Be&&Je("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+it+" active:"+Ze.inspect(this.active,!0)),this.active[e]};Tr.prototype.createContext=function(){Be&&Je("   CREATING Context: "+this.name+" uid:"+it+" len:"+this._set.length+"  active:"+Ze.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=it,Be&&Je("   CREATED Context: "+this.name+" uid:"+it+" len:"+this._set.length+"  context:"+Ze.inspect(e,!0,2,!0)),e};Tr.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return Be&&Je(" BEFORE RUN: "+this.name+" uid:"+it+" len:"+this._set.length+" "+Ze.inspect(r)),e(r),r}catch(n){throw n&&(n[Mo]=r),n}finally{Be&&Je(" AFTER RUN: "+this.name+" uid:"+it+" len:"+this._set.length+" "+Ze.inspect(r)),this.exit(r)}};Tr.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Tr.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Be&&Je(" BEFORE runPromise: "+this.name+" uid:"+it+" len:"+this._set.length+" "+Ze.inspect(r)),n.then(i=>(Be&&Je(" AFTER runPromise: "+this.name+" uid:"+it+" len:"+this._set.length+" "+Ze.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Mo]=r,Be&&Je(" AFTER runPromise: "+this.name+" uid:"+it+" len:"+this._set.length+" "+Ze.inspect(r)),this.exit(r),i})};Tr.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[Mo]=r),s}finally{n.exit(r)}}};Tr.prototype.enter=function(e){mn.ok(e,"context must be provided for entering"),Be&&Je("  ENTER "+this.name+" uid:"+it+" len:"+this._set.length+" context: "+Ze.inspect(e)),this._set.push(this.active),this.active=e};Tr.prototype.exit=function(e){if(mn.ok(e,"context must be provided for exiting"),Be&&Je("  EXIT "+this.name+" uid:"+it+" len:"+this._set.length+" context: "+Ze.inspect(e)),this.active===e){mn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Be&&Je("??ERROR?? context exiting but not entered - ignoring: "+Ze.inspect(e)),mn.ok(r>=0,`context not currently entered; can't exit. 
`+Ze.inspect(this)+`
`+Ze.inspect(e))):(mn.ok(r,"can't remove top context"),this._set.splice(r,1))};Tr.prototype.bindEmitter=function(e){mn.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(o){!o||(o[Lo]||(o[Lo]=Object.create(null)),o[Lo][n]={namespace:r,context:r.active})}function s(o){if(!(o&&o[Lo]))return o;let a=o,c=o[Lo];return Object.keys(c).forEach(function(u){let f=c[u];a=f.namespace.bind(a,f.context)}),a}DO(e,i,s)};Tr.prototype.fromException=function(e){return e[Mo]};function NC(t){return process.namespaces[t]}function PO(t){mn.ok(t,"namespace must be given a name."),Be&&Je("CREATING NAMESPACE "+t);let e=new Tr(t);return e.id=it,Ss.addHooks({init(r,n,i,s,o){it=r,s?(e._contexts.set(r,e._contexts.get(s)),Be&&Je("PARENTID: "+t+" uid:"+r+" parent:"+s+" provider:"+i)):e._contexts.set(it,e.active),Be&&Je("INIT "+t+" uid:"+r+" parent:"+s+" provider:"+AC[i]+" active:"+Ze.inspect(e.active,!0))},pre(r,n){it=r;let i=e._contexts.get(r);i?(Be&&Je(" PRE "+t+" uid:"+r+" handle:"+Kc(n)+" context:"+Ze.inspect(i)),e.enter(i)):Be&&Je(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+Kc(n))},post(r,n){it=r;let i=e._contexts.get(r);i?(Be&&Je(" POST "+t+" uid:"+r+" handle:"+Kc(n)+" context:"+Ze.inspect(i)),e.exit(i)):Be&&Je(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+Kc(n))},destroy(r){it=r,Be&&Je("DESTROY "+t+" uid:"+r+" context:"+Ze.inspect(e._contexts.get(it))+" active:"+Ze.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function LC(t){let e=NC(t);mn.ok(e,`can't delete nonexistent namespace! "`+t+'"'),mn.ok(e.id,"don't assign to process.namespaces directly! "+Ze.inspect(e)),process.namespaces[t]=null}function IO(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){LC(t)}),process.namespaces=Object.create(null)}process.namespaces={};Ss._state&&!Ss._state.enabled&&Ss.enable();function Je(t){process.env.DEBUG&&process._rawDebug(t)}function Kc(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(Be){rf=ef();for(kC in rf.filter._modifiers)rf.filter.deattach(kC)}var rf,kC});var jC=v((KU,nf)=>{"use strict";var xO=Rc();process&&xO.gte(process.versions.node,"8.0.0")?nf.exports=mC():nf.exports=FC()});var BC=v((VU,HC)=>{var qO=$c().wrap,of=1<<0,af=1<<1,cf=1<<2,Gc=1<<3,Se=[],OO=0,Ot=!1,Un=[],Ts,uf;function lf(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var s=0;s<r;s++)i[s]=t[s];if(n===0)return i;for(var o=0;o<n;o++){var a=!0;for(s=0;s<r;s++)if(t[s].uid===e[o].uid){a=!1;break}a&&i.push(e[o])}return i}process._fatalException?(Vc=!1,Ts=function(e){var r=Se.length;if(Vc||r===0)return!1;var n=!1;Vc=!0;for(var i=0;i<r;++i){var s=Se[i];if((s.flags&Gc)!==0){var o=Rs&&Rs[s.uid];n=s.error(o,e)||n}}return Vc=!1,Un.length>0&&(Se=Un.pop()),Rs=void 0,n&&!Ot},uf=function(e,r,n){var i=[];Ot=!0;for(var s=0;s<n;++s){var o=r[s];if(i[o.uid]=o.data,(o.flags&of)!==0){var a=o.create(o.data);a!==void 0&&(i[o.uid]=a)}}return Ot=!1,function(){Rs=i,Un.push(Se),Se=lf(r,Se),Ot=!0;for(var c=0;c<n;++c)(r[c].flags&af)>0&&r[c].before(this,i[r[c].uid]);Ot=!1;var u=e.apply(this,arguments);for(Ot=!0,c=0;c<n;++c)(r[c].flags&cf)>0&&r[c].after(this,i[r[c].uid]);return Ot=!1,Se=Un.pop(),Rs=void 0,u}},qO(process,"_fatalException",function(t){return function(r){return Ts(r)||t(r)}})):(sf=!1,Ts=function(e){if(sf)throw e;for(var r=!1,n=Se.length,i=0;i<n;++i){var s=Se[i];(s.flags&Gc)!==0&&(r=s.error(null,e)||r)}if(!r&&Ot)throw e},uf=function(e,r,n){var i=[];Ot=!0;for(var s=0;s<n;++s){var o=r[s];if(i[o.uid]=o.data,(o.flags&of)!==0){var a=o.create(o.data);a!==void 0&&(i[o.uid]=a)}}return Ot=!1,function(){var c=!1,u=!1;Un.push(Se),Se=lf(r,Se),Ot=!0;for(var f=0;f<n;++f)(r[f].flags&af)>0&&r[f].before(this,i[r[f].uid]);Ot=!1;var h;try{h=e.apply(this,arguments)}catch(m){c=!0;for(var f=0;f<n;++f)if((Se[f].flags&Gc)!=0)try{u=Se[f].error(i[r[f].uid],m)||u}catch(S){throw sf=!0,S}if(!u)throw process.removeListener("uncaughtException",Ts),process._originalNextTick(function(){process.addListener("uncaughtException",Ts)}),m}finally{if(!c||u){for(Ot=!0,f=0;f<n;++f)(r[f].flags&cf)>0&&r[f].after(this,i[r[f].uid]);Ot=!1}Se=Un.pop()}return h}},process.addListener("uncaughtException",Ts));var Vc,Rs,sf;function kO(t,e,r){Ot=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return Ot=!1,function(){Un.push(Se),Se=lf(e,Se);var s=t.apply(this,arguments);return Se=Un.pop(),s}}function AO(t){var e=Se.length;if(e===0)return t;for(var r=Se.slice(),n=0;n<e;++n)if(r[n].flags>0)return uf(t,r,e);return kO(t,r,e)}function Qr(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=of),typeof t.before=="function"&&(this.before=t.before,this.flags|=af),typeof t.after=="function"&&(this.after=t.after,this.flags|=cf),typeof t.error=="function"&&(this.error=t.error,this.flags|=Gc),this.uid=++OO,this.data=e===void 0?null:e}Qr.prototype.create=void 0;Qr.prototype.before=void 0;Qr.prototype.after=void 0;Qr.prototype.error=void 0;Qr.prototype.data=void 0;Qr.prototype.uid=0;Qr.prototype.flags=0;function $C(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof Qr?t:new Qr(t,e)}function NO(t,e){var r;t instanceof Qr?r=t:r=$C(t,e);for(var n=!1,i=0;i<Se.length;i++)if(r===Se[i]){n=!0;break}return n||Se.push(r),r}function LO(t){for(var e=0;e<Se.length;e++)if(t===Se[e]){Se.splice(e,1);break}}process.createAsyncListener=$C;process.addAsyncListener=NO;process.removeAsyncListener=LO;HC.exports=AO});var WC=v((XU,UC)=>{"use strict";UC.exports=(t,e)=>class extends t{constructor(n){var i,s;super(a);var o=this;try{n.apply(i,s)}catch(c){s[1](c)}return o;function a(c,u){i=this,s=[f,h];function f(m){return e(o,!1),c(m)}function h(m){return e(o,!1),u(m)}}}}});var QC=v(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var GC=$c(),Yc=Rc(),Zt=GC.wrap,Wn=GC.massWrap,je=BC(),MO=require("util"),FO=Yc.gte(process.version,"6.0.0"),pf=Yc.gte(process.version,"7.0.0"),jO=Yc.gte(process.version,"8.0.0"),$O=Yc.gte(process.version,"11.0.0"),Jr=require("net");pf&&!Jr._normalizeArgs?Jr._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:zO(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!pf&&!Jr._normalizeConnectArgs&&(Jr._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in Jr.Server.prototype?Zt(Jr.Server.prototype,"_setUpListenHandle",zC):Zt(Jr.Server.prototype,"_listen2",zC);function zC(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=je(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=je(this._handle.onconnection))}}}function XC(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=je(e._originalOnread)}}Zt(Jr.Socket.prototype,"connect",function(t){return function(){var e;jO&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=pf?Jr._normalizeArgs(arguments):Jr._normalizeConnectArgs(arguments),e[1]&&(e[1]=je(e[1]));var r=t.apply(this,e);return XC(this),r}});var HO=require("http");Zt(HO.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=je(function(n){return XC(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var df=require("child_process");function KC(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=je(e._handle.onread),Zt(e._handle,"close",Qc))}),t._handle&&(t._handle.onexit=je(t._handle.onexit))}df.ChildProcess?Zt(df.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return KC(this),e}}):Wn(df,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return KC(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var mf=[];process._nextDomainTick&&mf.push("_nextDomainTick");process._tickDomainCallback&&mf.push("_tickDomainCallback");Wn(process,mf,Zr);Zt(process,"nextTick",Qc);var vf=["setTimeout","setInterval"];global.setImmediate&&vf.push("setImmediate");var YC=require("timers"),BO=global.setTimeout===YC.setTimeout;Wn(YC,vf,Qc);BO&&Wn(global,vf,Qc);var hf=require("dns");Wn(hf,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Zr);hf.resolveNaptr&&Zt(hf,"resolveNaptr",Zr);var Ti=require("fs");Wn(Ti,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Zr);Ti.lchown&&Zt(Ti,"lchown",Zr);Ti.lchmod&&Zt(Ti,"lchmod",Zr);Ti.ftruncate&&Zt(Ti,"ftruncate",Zr);var Fo;try{Fo=require("zlib")}catch{}Fo&&Fo.Deflate&&Fo.Deflate.prototype&&(Si=Object.getPrototypeOf(Fo.Deflate.prototype),Si._transform?Zt(Si,"_transform",Zr):Si.write&&Si.flush&&Si.end&&Wn(Si,["write","flush","end"],Zr));var Si,gf;try{gf=require("crypto")}catch{}gf&&(ff=["pbkdf2","randomBytes"],$O||ff.push("pseudoRandomBytes"),Wn(gf,ff,Zr));var ff,Xc=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";Xc&&(VC=process.addAsyncListener({create:function(){Xc=!1}}),global.Promise.resolve(!0).then(function(){Xc=!1}),process.removeAsyncListener(VC));var VC;Xc&&UO();function UO(){var t=global.Promise;function e(o){if(!(this instanceof e))return t(o);if(typeof o!="function")return new t(o);var a,c,u=new t(f);u.__proto__=e.prototype;try{o.apply(a,c)}catch(h){c[1](h)}return u;function f(h,m){a=this,c=[y,S];function y(I){return n(u,!1),h(I)}function S(I){return n(u,!1),m(I)}}}if(MO.inherits(e,t),Zt(t.prototype,"then",s),t.prototype.chain&&Zt(t.prototype,"chain",s),FO)global.Promise=WC()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(o){typeof t[o]=="function"&&(e[o]=t[o])}),global.Promise=e}function n(o,a){(!o.__asl_wrapper||a)&&(o.__asl_wrapper=je(i))}function i(o,a,c,u){var f;try{return f=a.call(o,c),{returnVal:f,error:!1}}catch(h){return{errorVal:h,error:!0}}finally{f instanceof t?u.__asl_wrapper=function(){var m=f.__asl_wrapper||i;return m.apply(this,arguments)}:n(u,!0)}}function s(o){return function(){var c=this,u=o.apply(c,Array.prototype.map.call(arguments,f));return u.__asl_wrapper=function(m,y,S,I){return c.__asl_wrapper?(c.__asl_wrapper(m,function(){},null,u),u.__asl_wrapper(m,y,S,I)):i(m,y,S,I)},u;function f(h){return typeof h!="function"?h:je(function(m){var y=(c.__asl_wrapper||i)(this,h,m,u);if(y.error)throw y.errorVal;return y.returnVal})}}}}function Zr(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=je(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=je(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=je(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,s){return arguments.length!==4?e.apply(this,arguments):(typeof s=="function"&&(s=je(s)),t.call(this,r,n,i,s))};case 5:return function(r,n,i,s,o){return arguments.length!==5?e.apply(this,arguments):(typeof o=="function"&&(o=je(o)),t.call(this,r,n,i,s,o))};case 6:return function(r,n,i,s,o,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=je(a)),t.call(this,r,n,i,s,o,a))};default:return e}}function Qc(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=je(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,s){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r,n,i,s))};case 5:return function(r,n,i,s,o){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r,n,i,s,o))};case 6:return function(r,n,i,s,o,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=je(r)),t.call(this,r,n,i,s,o,a))};default:return e}}function WO(t){return(t=Number(t))>=0?t:!1}function zO(t){return typeof t=="string"&&WO(t)===!1}});var r0=v((JU,t0)=>{"use strict";var vn=require("assert"),KO=Uc(),jo="cls@contexts",yf="error@context";process.addAsyncListener||QC();function Lr(t){this.name=t,this.active=null,this._set=[],this.id=null}Lr.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};Lr.prototype.get=function(t){if(!!this.active)return this.active[t]};Lr.prototype.createContext=function(){return Object.create(this.active)};Lr.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[yf]=e),r}finally{this.exit(e)}};Lr.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};Lr.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[yf]=e),n}finally{r.exit(e)}}};Lr.prototype.enter=function(t){vn.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};Lr.prototype.exit=function(t){if(vn.ok(t,"context must be provided for exiting"),this.active===t){vn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);vn.ok(e>=0,"context not currently entered; can't exit"),vn.ok(e,"can't remove top context"),this._set.splice(e,1)};Lr.prototype.bindEmitter=function(t){vn.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(s){!s||(s[jo]||(s[jo]=Object.create(null)),s[jo][r]={namespace:e,context:e.active})}function i(s){if(!(s&&s[jo]))return s;var o=s,a=s[jo];return Object.keys(a).forEach(function(c){var u=a[c];o=u.namespace.bind(o,u.context)}),o}KO(t,n,i)};Lr.prototype.fromException=function(t){return t[yf]};function JC(t){return process.namespaces[t]}function VO(t){vn.ok(t,"namespace must be given a name!");var e=new Lr(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function ZC(t){var e=JC(t);vn.ok(e,"can't delete nonexistent namespace!"),vn.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function e0(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){ZC(t)}),process.namespaces=Object.create(null)}process.namespaces||e0();t0.exports={getNamespace:JC,createNamespace:VO,destroyNamespace:ZC,reset:e0}});var hi=v(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var i0=ft(),GO=kc(),$o=Ro(),_f=Ed(),n0=Ud(),XO=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,s,o){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:s,tracestate:o},customProperties:new YO(i)}:null},t.spanToContextObject=function(e,r,n){var i=new $o;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=e.traceFlags||$o.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){if(t.enabled)return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))();return r();var n},t.wrapEmitter=function(e){t.enabled&&t.session.bindEmitter(e)},t.wrapCallback=function(e,r){if(t.enabled)return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0);return e;var n},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=jC():this.cls=r0()),t.session=this.cls.createNamespace("AI-CLS-Session"),GO.registerContextPreservation(function(r){return t.session.bind(r)})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.traceId?e:null,s=e&&e.headers;if(i){var o=new $o("00-"+i.traceId+"-"+i.spanId+"-01"),a=new _f(i.tracestate),c=t.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,o,a);return c}if(n){var o=new $o(n.traceparent),a=new _f(n.tracestate),u=typeof r=="object"?new n0(r):null,c=t.generateContextObject(o.traceId,o.parentId,typeof r=="string"?r:u.getOperationName({}),u&&u.getCorrelationContextHeader()||void 0,o,a);return c}if(s){var o=new $o(s.traceparent),a=new _f(s.tracestate),u=new n0(e),c=t.generateContextObject(o.traceId,o.parentId,u.getOperationName({}),u.getCorrelationContextHeader(),o,a);return c}return i0.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();Cf.CorrelationContextManager=XO;var YO=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){i0.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var o0=v(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var s0=Jt(),wf=Qe(),Ri=[],bf=function(t){var e=t.data.message;Ri.forEach(function(r){e instanceof Error?r.trackException({exception:e}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?s0.SeverityLevel.Warning:s0.SeverityLevel.Information}))})};function QO(t,e){t?(Ri.length===0&&wf.channel.subscribe("console",bf),Ri.push(e)):(Ri=Ri.filter(function(r){return r!=e}),Ri.length===0&&wf.channel.unsubscribe("console",bf))}Jc.enable=QO;function JO(){wf.channel.unsubscribe("console",bf),Ri=[]}Jc.dispose=JO});var a0=v(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var Ds=Jt(),Ef=Qe(),Di=[],ZO={10:Ds.SeverityLevel.Verbose,20:Ds.SeverityLevel.Verbose,30:Ds.SeverityLevel.Information,40:Ds.SeverityLevel.Warning,50:Ds.SeverityLevel.Error,60:Ds.SeverityLevel.Critical},Sf=function(t){var e=t.data.result;Di.forEach(function(r){var n=ZO[t.data.level];e instanceof Error?r.trackException({exception:e}):r.trackTrace({message:e,severity:n})})};function ek(t,e){t?(Di.length===0&&Ef.channel.subscribe("bunyan",Sf),Di.push(e)):(Di=Di.filter(function(r){return r!=e}),Di.length===0&&Ef.channel.unsubscribe("bunyan",Sf))}Zc.enable=ek;function tk(){Ef.channel.unsubscribe("bunyan",Sf),Di=[]}Zc.dispose=tk});var c0=v(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Tt=Jt(),Tf=Qe(),Pi=[],rk={syslog:function(t){var e={emerg:Tt.SeverityLevel.Critical,alert:Tt.SeverityLevel.Critical,crit:Tt.SeverityLevel.Critical,error:Tt.SeverityLevel.Error,warning:Tt.SeverityLevel.Warning,notice:Tt.SeverityLevel.Information,info:Tt.SeverityLevel.Information,debug:Tt.SeverityLevel.Verbose};return e[t]===void 0?Tt.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Tt.SeverityLevel.Error,warn:Tt.SeverityLevel.Warning,info:Tt.SeverityLevel.Information,verbose:Tt.SeverityLevel.Verbose,debug:Tt.SeverityLevel.Verbose,silly:Tt.SeverityLevel.Verbose};return e[t]===void 0?Tt.SeverityLevel.Information:e[t]},unknown:function(t){return Tt.SeverityLevel.Information}},Rf=function(t){var e=t.data.message;Pi.forEach(function(r){if(e instanceof Error)r.trackException({exception:e,properties:t.data.meta});else{var n=rk[t.data.levelKind](t.data.level);r.trackTrace({message:e,severity:n,properties:t.data.meta})}})};function nk(t,e){t?(Pi.length===0&&Tf.channel.subscribe("winston",Rf),Pi.push(e)):(Pi=Pi.filter(function(r){return r!=e}),Pi.length===0&&Tf.channel.unsubscribe("winston",Rf))}eu.enable=nk;function ik(){Tf.channel.unsubscribe("winston",Rf),Pi=[]}eu.dispose=ik});var l0=v((n3,u0)=>{"use strict";var sk=kc(),ok=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){sk.IsInitialized&&(o0().enable(e&&r,this._client),a0().enable(e,this._client),c0().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();u0.exports=ok});var f0=v((i3,d0)=>{"use strict";var ak=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(s,o,a){a===void 0&&(a=new Error(t._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:a}),r._client.flush({isAppCrashing:!0}),s&&o&&process.listeners(o).length===1&&(console.error(a),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();d0.exports=ak});var zn=v(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";fe.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";fe.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var kt;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(kt=fe.QuickPulseCounter||(fe.QuickPulseCounter={}));var tu;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(tu=fe.PerformanceCounter||(fe.PerformanceCounter={}));fe.PerformanceToQuickPulseCounter=(Mr={},Mr[tu.PROCESSOR_TIME]=kt.PROCESSOR_TIME,Mr[tu.REQUEST_RATE]=kt.REQUEST_RATE,Mr[tu.REQUEST_DURATION]=kt.REQUEST_DURATION,Mr[kt.COMMITTED_BYTES]=kt.COMMITTED_BYTES,Mr[kt.REQUEST_FAILURE_RATE]=kt.REQUEST_FAILURE_RATE,Mr[kt.DEPENDENCY_RATE]=kt.DEPENDENCY_RATE,Mr[kt.DEPENDENCY_FAILURE_RATE]=kt.DEPENDENCY_FAILURE_RATE,Mr[kt.DEPENDENCY_DURATION]=kt.DEPENDENCY_DURATION,Mr[kt.EXCEPTION_RATE]=kt.EXCEPTION_RATE,Mr);fe.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};fe.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};fe.TelemetryTypeStringToQuickPulseType={EventData:fe.QuickPulseType.Event,ExceptionData:fe.QuickPulseType.Exception,MessageData:fe.QuickPulseType.Trace,MetricData:fe.QuickPulseType.Metric,RequestData:fe.QuickPulseType.Request,RemoteDependencyData:fe.QuickPulseType.Dependency,AvailabilityData:fe.QuickPulseType.Availability,PageViewData:fe.QuickPulseType.PageView};fe.TelemetryTypeStringToQuickPulseDocumentType={EventData:fe.QuickPulseDocumentType.Event,ExceptionData:fe.QuickPulseDocumentType.Exception,MessageData:fe.QuickPulseDocumentType.Trace,MetricData:fe.QuickPulseDocumentType.Metric,RequestData:fe.QuickPulseDocumentType.Request,RemoteDependencyData:fe.QuickPulseDocumentType.Dependency,AvailabilityData:fe.QuickPulseDocumentType.Availability,PageViewData:fe.QuickPulseDocumentType.PageView};fe.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};fe.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};fe.HeartBeatMetricName="HeartBeat";var Mr});var nu=v((o3,p0)=>{"use strict";var ru=require("os"),Rr=zn(),ck=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=ru.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=ru.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,s=0,o=0,a=0;!!e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],f="% cpu("+a+") ",h=c.model,m=c.speed,y=c.times,S=u.times,I=y.user-S.user||0;r+=I;var M=y.sys-S.sys||0;n+=M;var k=y.nice-S.nice||0;i+=k;var D=y.idle-S.idle||0;s+=D;var O=y.irq-S.irq||0;o+=O}var x=void 0;if(typeof process.cpuUsage=="function"){var j=process.cpuUsage(),oe=process.hrtime(),Ee=j.user-this._lastAppCpuUsage.user+(j.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var ke=(oe[0]-this._lastHrtime[0])*1e6+(oe[1]-this._lastHrtime[1])/1e3||0;x=100*Ee/(ke*e.length)}this._lastAppCpuUsage=j,this._lastHrtime=oe}var me=r+n+i+s+o||1;this._client.trackMetric({name:Rr.PerformanceCounter.PROCESSOR_TIME,value:(me-s)/me*100}),this._client.trackMetric({name:Rr.PerformanceCounter.PROCESS_TIME,value:x||r/me*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=ru.freemem(),r=process.memoryUsage().rss,n=ru.totalmem()-e;this._client.trackMetric({name:Rr.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Rr.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Rr.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,s=r.time-e.time,o=s/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,s>0){var c=n/o,u=i/o;this._client.trackMetric({name:Rr.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Rr.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Rr.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,s=r.time-e.time,o=s/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,s>0){var c=n/o,u=i/o;this._client.trackMetric({name:Rr.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:Rr.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Rr.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,s=i/1e3;if(i>0){var o=n/s;this._client.trackMetric({name:Rr.QuickPulseCounter.EXCEPTION_RATE,value:o})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._lastRequestExecutionTime=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._lastDependencyExecutionTime=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();p0.exports=ck});var Ho=v((a3,v0)=>{"use strict";var yn=require("os"),h0=require("fs"),g0=require("path"),uk=Jt(),m0=ft(),lk=function(){function t(e){this.keys=new uk.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){if(e=e||g0.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";try{var r=JSON.parse(h0.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}catch(n){m0.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=t.appVersion[e]},t.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=yn&&yn.hostname(),this.tags[this.keys.deviceOSVersion]=yn&&yn.type()+" "+yn.release(),this.tags[this.keys.cloudRole]=t.DefaultRoleName,this.tags["ai.device.osArchitecture"]=yn&&yn.arch(),this.tags["ai.device.osPlatform"]=yn&&yn.platform()},t.prototype._loadInternalContext=function(){var e=g0.resolve(__dirname,"../../package.json");if(!t.sdkVersion){t.sdkVersion="unknown";try{var r=JSON.parse(h0.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.sdkVersion=r.version)}catch(n){m0.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();v0.exports=lk});var _0=v((Pf,y0)=>{"use strict";var dk=Pf&&Pf.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fr=require("url"),Df=Jt(),fk=ur(),pk=ws(),hk=$d(),gk=Ci(),mk=function(t){dk(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=fk.getCorrelationContextTarget(r,pk.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=Fr.parse(this.url);i.search=void 0,i.hash=void 0;var s=this.method.toUpperCase()+" "+i.pathname,o=Df.RemoteDependencyDataConstants.TYPE_HTTP,a=i.hostname;i.port&&(a+=":"+i.port),this.correlationId?(o=Df.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==gk.correlationIdPrefix&&(a+=" | "+this.correlationId)):o=Df.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:s,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:a};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=Fr.parse(r);else{var i=Fr.parse(r);i.host==="443"?r=Fr.parse("https://"+r):r=Fr.parse("http://"+r)}else{if(r&&typeof Fr.URL=="function"&&r instanceof Fr.URL)return Fr.format(r);var s=r;r={},s&&Object.keys(s).forEach(function(c){r[c]=s[c]})}if(r.path){var o=Fr.parse(r.path);r.pathname=o.pathname,r.search=o.search}if(r.host&&r.port){var a=Fr.parse("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",Fr.format(r)},e}(hk);y0.exports=mk});var w0=v(Bo=>{"use strict";var C0=Bo&&Bo.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Bo,"__esModule",{value:!0});var vk=mc(),er=zn();function If(t){var e=C0({},t);return Object.keys(er.SpanAttribute).forEach(function(r){delete e[r]}),e}function yk(t){var e="|"+t.context().traceId+"."+t.context().spanId+".",r=Math.round(t._duration[0]*1e3+t._duration[1]/1e6),n=t.attributes["peer.address"]?t.attributes["peer.address"].toString():"",i=t.attributes.component?t.attributes.component.toString():"",s=i.toUpperCase()===er.DependencyTypeName.Http||!!t.attributes[er.SpanAttribute.HttpUrl],o=i.toLowerCase()===er.DependencyTypeName.Grpc;if(s){var a=t.attributes[er.SpanAttribute.HttpMethod]||"GET",c=new URL(t.attributes[er.SpanAttribute.HttpUrl].toString()),u=t.attributes[er.SpanAttribute.HttpHost]||c.host,f=t.attributes[er.SpanAttribute.HttpPort]||c.port||null,h=c.pathname||"/",m=a+" "+h,y=er.DependencyTypeName.Http,S=f?(u+":"+f).toString():u.toString(),I=c.toString(),M=t.attributes[er.SpanAttribute.HttpStatusCode]||t.status.code||0,k=M<400;return{id:e,name:m,dependencyTypeName:y,target:S,data:I,success:k,duration:r,url:I,resultCode:String(M),properties:If(t.attributes)}}else if(o){var a=t.attributes[er.SpanAttribute.GrpcMethod]||"rpc",D=t.attributes[er.SpanAttribute.GrpcService],O=D?a+" "+D:t.name;return{id:e,duration:r,name:O,target:D.toString(),data:D.toString()||O,url:D.toString()||O,dependencyTypeName:er.DependencyTypeName.Grpc,resultCode:String(t.status.code||0),success:t.status.code===0,properties:If(t.attributes)}}else{var x=t.name,j=t.links&&t.links.map(function(oe){return{operation_Id:oe.context.traceId,id:oe.context.spanId}});return{id:e,duration:r,name:x,target:n,data:n||x,url:n||x,dependencyTypeName:t.kind===vk.SpanKind.INTERNAL?er.DependencyTypeName.InProc:i||t.name,resultCode:String(t.status.code||0),success:t.status.code===0,properties:C0({},If(t.attributes),{"_MS.links":j||void 0})}}}Bo.spanToTelemetryContract=yk});var E0=v(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});var b0=Qe(),_k=Ro(),Ck=w0(),iu=mc(),Ps=[];Is.subscriber=function(t){var e=t.data,r=Ck.spanToTelemetryContract(e),n=e.context(),i=new _k;i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=n.traceFlags.toString(),i.parentId=e.parentSpanId?"|"+n.traceId+"."+e.parentSpanId+".":null,iu.AsyncScopeManager.with(e,function(){Ps.forEach(function(s){e.kind===iu.SpanKind.SERVER?s.trackRequest(r):(e.kind===iu.SpanKind.CLIENT||e.kind===iu.SpanKind.INTERNAL)&&s.trackDependency(r)})})};function wk(t,e){t?(Ps.length===0&&b0.channel.subscribe("azure-coretracing",Is.subscriber),Ps.push(e)):(Ps=Ps.filter(function(r){return r!=e}),Ps.length===0&&b0.channel.unsubscribe("azure-coretracing",Is.subscriber))}Is.enable=wk});var T0=v(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var S0=Qe(),xs=[];qs.subscriber=function(t){t.data.event.commandName!=="ismaster"&&xs.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};function bk(t,e){t?(xs.length===0&&S0.channel.subscribe("mongodb",qs.subscriber),xs.push(e)):(xs=xs.filter(function(r){return r!=e}),xs.length===0&&S0.channel.unsubscribe("mongodb",qs.subscriber))}qs.enable=bk});var D0=v(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var R0=Qe(),Os=[];ks.subscriber=function(t){Os.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,s=r._connection||{},o=s.config||{},a=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};function Ek(t,e){t?(Os.length===0&&R0.channel.subscribe("mysql",ks.subscriber),Os.push(e)):(Os=Os.filter(function(r){return r!=e}),Os.length===0&&R0.channel.unsubscribe("mysql",ks.subscriber))}ks.enable=Ek});var I0=v(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});var P0=Qe(),As=[];Ns.subscriber=function(t){As.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};function Sk(t,e){t?(As.length===0&&P0.channel.subscribe("redis",Ns.subscriber),As.push(e)):(As=As.filter(function(r){return r!=e}),As.length===0&&P0.channel.unsubscribe("redis",Ns.subscriber))}Ns.enable=Sk});var q0=v(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var x0=Qe(),Ls=[];Ms.subscriber=function(t){Ls.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,s=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:s,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};function Tk(t,e){t?(Ls.length===0&&x0.channel.subscribe("postgres",Ms.subscriber),Ls.push(e)):(Ls=Ls.filter(function(r){return r!=e}),Ls.length===0&&x0.channel.unsubscribe("postgres",Ms.subscriber))}Ms.enable=Tk});var js=v((h3,N0)=>{"use strict";var Ii=require("http"),Fs=require("https"),xf=ft(),O0=ur(),Kn=ws(),Rk=_0(),k0=hi(),A0=Ci(),qf=Ro(),Dk=kc(),Pk=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),Dk.IsInitialized&&(E0().enable(!0,this._client),T0().enable(e,this._client),D0().enable(e,this._client),I0().enable(e,this._client),q0().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=Ii.get,n=Ii.request,i=Fs.request,s=function(o,a){var c=!a[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag];a.headers&&a.headers["user-agent"]&&a.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(c=!1),o[t.alreadyAutoCollectedFlag]=!0,o&&a&&c&&(k0.CorrelationContextManager.wrapEmitter(o),t.trackRequest(e._client,{options:a,request:o}))};Ii.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=n.call.apply(n,[Ii,o].concat(a));return s(u,o),u},Fs.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=i.call.apply(i,[Fs,o].concat(a));return s(u,o),u},Ii.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(f=Ii.request).call.apply(f,[Ii,o].concat(a));return u.end(),u;var f},Fs.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(f=Fs.request).call.apply(f,[Fs,o].concat(a));return u.end(),u;var f}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){xf.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new Rk(r.options,r.request),i=k0.CorrelationContextManager.getCurrentContext(),s,o;if(i&&i.operation&&i.operation.traceparent&&qf.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),s=i.operation.traceparent.getBackCompatRequestId();else if(A0.w3cEnabled){var a=new qf;o=a.toString(),s=a.getBackCompatRequestId()}else s=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(O0.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(Kn.requestContextHeader);try{O0.safeIncludeCorrelationHeader(e,r.request,c)}catch(h){xf.warn("Request-Context header could not be set. Correlation of requests may be lost",h)}if(i&&i.operation)try{if(r.request.setHeader(Kn.requestIdHeader,s),e.config.ignoreLegacyHeaders||(r.request.setHeader(Kn.parentIdHeader,i.operation.id),r.request.setHeader(Kn.rootIdHeader,s)),o||i.operation.traceparent)r.request.setHeader(Kn.traceparentHeader,o||i.operation.traceparent.toString());else if(A0.w3cEnabled){var a=new qf().toString();r.request.setHeader(Kn.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(Kn.traceStateHeader,u)}var f=i.customProperties.serializeToHeader();f&&r.request.setHeader(Kn.correlationContextHeader,f)}catch(h){xf.warn("Correlation headers could not be set. Correlation of requests may be lost.",h)}}r.request.on&&(r.request.on("response",function(h){n.onResponse(h);var m=n.getDependencyTelemetry(r,s);m.contextObjects=m.contextObjects||{},m.contextObjects["http.RequestOptions"]=r.options,m.contextObjects["http.ClientRequest"]=r.request,m.contextObjects["http.ClientResponse"]=h,e.trackDependency(m)}),r.request.on("error",function(h){n.onError(h);var m=n.getDependencyTelemetry(r,s);m.contextObjects=m.contextObjects||{},m.contextObjects["http.RequestOptions"]=r.options,m.contextObjects["http.ClientRequest"]=r.request,m.contextObjects.Error=h,e.trackDependency(m)}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();N0.exports=Pk});var F0=v((g3,M0)=>{"use strict";var Ik=require("os"),L0=zn(),xk=ur(),qk=Ho(),Ok=js(),kk="http://169.254.169.254/metadata/instance/compute",Ak="api-version=2017-12-01",Nk="format=json",Lk="ENETUNREACH",Mk=function(){function t(e){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n=this,i=!1,s={},o=qk.sdkVersion;s.sdk=o,s.osType=Ik.type(),process.env.WEBSITE_SITE_NAME?(s.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",s.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",s.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?s.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(this._isVM===void 0?(i=!0,this._getAzureComputeMetadata(e,function(){n._isVM&&Object.keys(n._vmData).length>0&&(s.azInst_vmId=n._vmData.vmId||"",s.azInst_subscriptionId=n._vmData.subscriptionId||"",s.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:L0.HeartBeatMetricName,value:0,properties:s}),r()})):this._isVM&&(s.azInst_vmId=this._azInst_vmId,s.azInst_subscriptionId=this._azInst_subscriptionId,s.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:L0.HeartBeatMetricName,value:0,properties:s}),r())},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.prototype._getAzureComputeMetadata=function(e,r){var n=this,i=kk+"?"+Ak+"&"+Nk,s=(a={method:"GET"},a[Ok.disableCollectionRequestOption]=!0,a.headers={Metadata:"True"},a),o=xk.makeRequest(e,i,s,function(c){if(c.statusCode===200){n._isVM=!0;var u="";c.on("data",function(f){u+=f}),c.on("end",function(){n._vmData=n._isJSON(u)?JSON.parse(u):{},r()})}else r()});o&&(o.on("error",function(c){c&&c.message&&c.message.indexOf(Lk)>-1&&(n._isVM=!1),r()}),o.end());var a},t.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},t}();M0.exports=Mk});var kf=v((m3,U0)=>{"use strict";var j0=require("http"),$0=require("https"),H0=ft(),B0=ur(),Fk=ws(),Of=Ud(),_n=hi(),jk=nu(),$k=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||jk.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?_n.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&_n.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(!!this._isAutoCorrelating)return _n.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=function(o){if(!!o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(a,c){_n.CorrelationContextManager.wrapEmitter(a),_n.CorrelationContextManager.wrapEmitter(c);var u=a&&!a[t.alreadyAutoCollectedFlag];if(a&&u){var f=new Of(a),h=e._generateCorrelationContext(f);_n.CorrelationContextManager.runWithContext(h,function(){e._isEnabled&&(a[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(e._client,{request:a,response:c},f)),typeof o=="function"&&o(a,c)})}else typeof o=="function"&&o(a,c)}}},n=function(o){var a=o.addListener.bind(o);o.addListener=function(c,u){switch(c){case"request":case"checkContinue":return a(c,r(u));default:return a(c,u)}},o.on=o.addListener},i=j0.createServer;j0.createServer=function(o,a){if(a&&typeof a=="function"){var c=i(o,r(a));return n(c),c}else{var c=i(r(o));return n(c),c}};var s=$0.createServer;$0.createServer=function(o,a){var c=s(o,r(a));return n(c),c}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){H0.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}t.addResponseCorrelationIdHeader(e,r.response);var n=_n.CorrelationContextManager.getCurrentContext(),i=new Of(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){H0.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}var i=_n.CorrelationContextManager.getCurrentContext(),s=n||new Of(r.request,i&&i.operation.parentId);B0.canIncludeCorrelationHeader(e,s.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=s.getOperationId(e.context.tags)||i.operation.id,i.operation.name=s.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=s.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(s.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,s,r,null,null)}),r.request.on&&r.request.on("error",function(o){t.endRequest(e,s,r,null,o)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(Fk.requestContextHeader);B0.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,s){s?r.onError(s,i):r.onResponse(n.response,i);var o=r.getRequestTelemetry(n);if(o.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)o.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(o.properties.ai_legacyRootId=c),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,_n.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();U0.exports=$k});var K0=v((v3,z0)=>{"use strict";var W0=zn(),Hk=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(s,o){var a=o.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];s[c]=u}return s},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||W0.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||W0.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();z0.exports=Hk});var su=v((y3,X0)=>{"use strict";var Af=Ci(),V0=K0(),Bk=ft(),G0=zn(),Uk=require("url"),Wk=function(){function t(e){var r=this;this.endpointBase=G0.DEFAULT_BREEZE_ENDPOINT;var n=process.env[t.ENV_connectionString],i=V0.parse(e),s=V0.parse(n),o=!i.instrumentationkey&&Object.keys(i).length>0?null:e;this.instrumentationKey=i.instrumentationkey||o||s.instrumentationkey||t._getInstrumentationKey(),t._validateInstrumentationKey(this.instrumentationKey)||Bk.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||s.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(a){return r.correlationId=a},this.proxyHttpUrl=process.env[t.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[t.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||s.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||s.liveendpoint||process.env[t.ENV_quickPulseHost]||G0.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=Uk.parse(this._quickPulseHost).host)}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){Af.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=Af.correlationIdPrefix,Af.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!0,configurable:!0}),t._getInstrumentationKey=function(){var e=process.env[t.ENV_iKey]||process.env[t.ENV_azurePrefix+t.ENV_iKey]||process.env[t.legacy_ENV_iKey]||process.env[t.ENV_azurePrefix+t.legacy_ENV_iKey];if(!e||e=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",t.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",t.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",t.ENV_http_proxy="http_proxy",t.ENV_https_proxy="https_proxy",t}();X0.exports=Wk});var J0=v((Lf,Q0)=>{"use strict";var Uo=Lf&&Lf.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nf=require("os"),xi=Jt(),Y0=zn(),zk=ur(),Kk=ft(),Vk=zk.w3cTraceId(),Gk=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var s=Nf&&typeof Nf.hostname=="function"&&Nf.hostname()||"Unknown",o=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||s,a={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:Vk,MachineName:s,Instance:o};return a},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case xi.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case xi.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case xi.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case xi.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case xi.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=Uo({},r,{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=Uo({},r,{Message:e.data.baseData.message,SeverityLevel:xi.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",s="",o="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),s=n[0].message,o=n[0].typeName);var a=Uo({},r,{Exception:i,ExceptionMessage:s,ExceptionType:o});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Uo({},r,{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Uo({},r,{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,s;e.data.baseType?(n=Y0.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=Y0.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):Kk.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],s=t.aggregateProperties(e);var o={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:s};return o},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],o={key:i,value:s};r.push(o)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var s=a[i],o={key:i,value:s};r.push(o)}return r},t.keys=new xi.ContextTagKeys,t}();Q0.exports=Gk});var ew=v((_3,Z0)=>{"use strict";var Xk=function(){return(Date.now()+621355968e5)*1e4};Z0.exports={getTransmissionTime:Xk}});var nw=v((C3,rw)=>{"use strict";var Yk=require("https"),Qk=js(),tw=ft(),Jk=ew(),Zk=ur(),Mf={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},e1=function(){function t(e){this._config=e,this._consecutiveErrors=0}return t.prototype.ping=function(e,r){this._submitData(e,r,"ping")},t.prototype.post=function(e,r){this._submitData([e],r,"post")},t.prototype._submitData=function(e,r,n){var i=this,s=JSON.stringify(e),o=(c={},c[Qk.disableCollectionRequestOption]=!0,c.host=this._config.quickPulseHost,c.method=Mf.method,c.path="/QuickPulseService.svc/"+n+"?ikey="+this._config.instrumentationKey,c.headers=(u={Expect:"100-continue"},u[Mf.time]=Jk.getTransmissionTime(),u["Content-Type"]="application/json",u["Content-Length"]=Buffer.byteLength(s),u),c);this._config.httpsAgent?o.agent=this._config.httpsAgent:o.agent=Zk.tlsRestrictedAgent;var a=Yk.request(o,function(f){var h=f.headers[Mf.subscribed]==="true";i._consecutiveErrors=0,r(h,f)});a.on("error",function(f){i._consecutiveErrors++;var h="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";i._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(h="Live Metrics endpoint could not be reached "+i._consecutiveErrors+" consecutive times. Most recent error:",tw.warn(t.TAG,h,f)):tw.info(t.TAG,h,f),r()}),a.write(s),a.end();var c,u},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();rw.exports=e1});var sw=v((w3,iw)=>{"use strict";var t1=ft(),r1=su(),Ff=J0(),n1=nw(),i1=zn(),s1=Ho(),o1=function(){function t(e,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new r1(e),this.context=r||new s1,this._sender=new n1(this.config),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){var r=Ff.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=i1.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=Ff.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){var e=this,r=Object.keys(this._metrics).map(function(s){return e._metrics[s]}),n=Ff.createQuickPulseEnvelope(r,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(n):this._ping(n);var i=this._isCollectingData?t.POST_INTERVAL:t.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref()},t.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))},t.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))},t.prototype._quickPulseDone=function(e,r){e!=null?(this._isCollectingData!==e&&(t1.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();iw.exports=o1});var aw=v(zo=>{"use strict";var a1=zo&&zo.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(zo,"__esModule",{value:!0});var ow=su(),Wo=Ho(),c1=ft(),u1=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!t.isNodeVersionCompatible()){if(t._metricsAvailable==null&&e&&!this._isInitialized)try{var s=require("applicationinsights-native-metrics");t._emitter=new s,t._metricsAvailable=!0,c1.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref()):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e){var r=process.env[ow.ENV_nativeMetricsDisableAll],n=process.env[ow.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),s={};if(i.length>0)for(var o=0,a=i;o<a.length;o++){var c=a[o];s[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:a1({},e,s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var e=t._emitter.getGCData();for(var r in e){var n=e[r].metrics,i=r+" Garbage Collection Duration",s=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,max:n.max,min:n.min,stdDev:s,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Wo.sdkVersion,o)})}var o}},t.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var e=t._emitter.getLoopData(),r=e.loopUsage;if(r.count!=0){var n="Event Loop CPU Time",i=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:n,value:r.total,count:r.count,min:r.min,max:r.max,stdDev:i,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Wo.sdkVersion,s)});var s}}},t.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var e=process.memoryUsage(),r=e.heapUsed,n=e.heapTotal,i=e.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:r,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Wo.sdkVersion,s)}),this._client.trackMetric({name:"Memory Total (Heap)",value:n,count:1,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Wo.sdkVersion,o)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:i-n,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Wo.sdkVersion,a)});var s,o,a}},t}();zo.AutoCollectNativePerformance=u1});var lw=v((E3,uw)=>{"use strict";var cw=ft(),l1=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){cw.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n=="string"){if(this._buffer.push(n),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;if(!n){var i=this._buffer.join(`
`);e?(this._sender.saveOnCrash(i),typeof r=="function"&&r("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(i):new Buffer(i),r)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(r){cw.warn("Failed to serialize payload",r,e)}},t}();uw.exports=l1});var dw=v(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});function d1(t,e){process.env.WEBSITE_SITE_NAME&&(t.tags[e.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}jf.azureRoleEnvironmentTelemetryProcessor=d1});var hw=v(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var fw=Jt();function f1(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&fw.TelemetryType.Metric===fw.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=pw(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}ou.samplingTelemetryProcessor=f1;function pw(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}ou.getSamplingHashCode=pw});var gw=v(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var $f=nu(),Hf=Jt();function p1(t,e){switch(e&&e.addDocument(t),t.data.baseType){case Hf.TelemetryTypeString.Exception:$f.countException();break;case Hf.TelemetryTypeString.Request:var r=t.data.baseData;$f.countRequest(r.duration,r.success);break;case Hf.TelemetryTypeString.Dependency:var n=t.data.baseData;$f.countDependency(n.duration,n.success);break}return!0}Bf.performanceMetricsTelemetryProcessor=p1});var mw=v(au=>{"use strict";function Uf(t){for(var e in t)au.hasOwnProperty(e)||(au[e]=t[e])}Object.defineProperty(au,"__esModule",{value:!0});Uf(dw());Uf(hw());Uf(gw())});var yw=v((P3,vw)=>{"use strict";var Bt=require("fs"),cu=require("os"),Cn=require("path"),h1=require("zlib"),$s=require("child_process"),At=ft(),g1=js(),m1=ur(),v1=function(){function t(e,r,n){if(this._config=e,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._resendTimer=null,!t.OS_PROVIDES_FILE_PROTECTION)if(t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=Bt.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||At.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0}return t.prototype.setDiskRetryMode=function(e,r,n){this._enableDiskRetryMode=t.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!t.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,At.warn(t.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},t.prototype.send=function(e,r){var n=this,i=this._config.endpointUrl,s={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};h1.gzip(e,function(o,a){var c=a;o?(At.warn(o),c=e,s.headers["Content-Length"]=e.length.toString()):(s.headers["Content-Encoding"]="gzip",s.headers["Content-Length"]=a.length),At.info(t.TAG,s),s[g1.disableCollectionRequestOption]=!0;var u=function(h){h.setEncoding("utf-8");var m="";h.on("data",function(y){m+=y}),h.on("end",function(){n._numConsecutiveFailures=0,At.info(t.TAG,m),typeof n._onSuccess=="function"&&n._onSuccess(m),typeof r=="function"&&r(m),n._enableDiskRetryMode&&(h.statusCode===200?n._resendTimer||(n._resendTimer=setTimeout(function(){n._resendTimer=null,n._sendFirstFileOnDisk()},n._resendInterval),n._resendTimer.unref()):(h.statusCode===408||h.statusCode===429||h.statusCode===439||h.statusCode===500||h.statusCode===503)&&n._storeToDisk(e))})},f=m1.makeRequest(n._config,i,s,u);f.on("error",function(h){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var m="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(m="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),At.warn(t.TAG,m,h)}else{var m="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";At.info(t.TAG,m,h)}if(n._onErrorHelper(h),typeof r=="function"){var y="error sending telemetry";h&&typeof h.toString=="function"&&(y=h.toString()),r(y)}n._enableDiskRetryMode&&n._storeToDisk(e)}),f.write(c),f.end()})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},t.prototype._runICACLS=function(e,r){var n=$s.spawn(t.ICACLS_PATH,e,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,s){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},t.prototype._runICACLSSync=function(e){if($s.spawnSync){var r=$s.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t.prototype._getACLIdentity=function(e){if(t.ACL_IDENTITY)return e(null,t.ACL_IDENTITY);var r=$s.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return e(i,null)}),r.on("close",function(i,s){return t.ACL_IDENTITY=n&&n.trim(),e(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),t.ACL_IDENTITY)})},t.prototype._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if($s.spawnSync){var e=$s.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t.prototype._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.prototype._applyACLRules=function(e,r){var n=this;if(!t.USE_ICACLS)return r(null);if(t.ACLED_DIRECTORIES[e]===void 0)t.ACLED_DIRECTORIES[e]=!1,this._getACLIdentity(function(i,s){if(i)return t.ACLED_DIRECTORIES[e]=!1,r(i);n._runICACLS(n._getACLArguments(e,s),function(o){return t.ACLED_DIRECTORIES[e]=!o,r(o)})});else return r(t.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},t.prototype._applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t.prototype._confirmDirExists=function(e,r){var n=this;Bt.lstat(e,function(i,s){i&&i.code==="ENOENT"?Bt.mkdir(e,function(o){o&&o.code!=="EEXIST"?r(o):n._applyACLRules(e,r)}):!i&&s.isDirectory()?n._applyACLRules(e,r):r(i||new Error("Path existed but was not a directory"))})},t.prototype._getShallowDirectorySize=function(e,r){Bt.readdir(e,function(n,i){if(n)return r(n,-1);var s=null,o=0,a=0;if(i.length===0){r(null,0);return}for(var c=0;c<i.length;c++)Bt.stat(Cn.join(e,i[c]),function(u,f){a++,u?s=u:f.isFile()&&(o+=f.size),a===i.length&&(s?r(s,-1):r(s,o))})})},t.prototype._getShallowDirectorySizeSync=function(e){for(var r=Bt.readdirSync(e),n=0,i=0;i<r.length;i++)n+=Bt.statSync(Cn.join(e,r[i])).size;return n},t.prototype._storeToDisk=function(e){var r=this,n=Cn.join(cu.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);At.info(t.TAG,"Checking existence of data storage directory: "+n),this._confirmDirExists(n,function(i){if(i){At.warn(t.TAG,"Error while checking/creating directory: "+(i&&i.message)),r._onErrorHelper(i);return}r._getShallowDirectorySize(n,function(s,o){if(s||o<0){At.warn(t.TAG,"Error while checking directory size: "+(s&&s.message)),r._onErrorHelper(s);return}else if(o>r._maxBytesOnDisk){At.warn(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);return}var a=new Date().getTime()+".ai.json",c=Cn.join(n,a);At.info(t.TAG,"saving data to disk at: "+c),Bt.writeFile(c,e,{mode:384},function(u){return r._onErrorHelper(u)})})})},t.prototype._storeToDiskSync=function(e){var r=Cn.join(cu.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);try{At.info(t.TAG,"Checking existence of data storage directory: "+r),Bt.existsSync(r)||Bt.mkdirSync(r),this._applyACLRulesSync(r);var n=this._getShallowDirectorySizeSync(r);if(n>this._maxBytesOnDisk){At.info(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var i=new Date().getTime()+".ai.json",s=Cn.join(r,i);At.info(t.TAG,"saving data before crash to disk at: "+s),Bt.writeFileSync(s,e,{mode:384})}catch(o){At.warn(t.TAG,"Error while saving data to disk: "+(o&&o.message)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){var e=this,r=Cn.join(cu.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);Bt.exists(r,function(n){n&&Bt.readdir(r,function(i,s){if(i)e._onErrorHelper(i);else if(s=s.filter(function(c){return Cn.basename(c).indexOf(".ai.json")>-1}),s.length>0){var o=s[0],a=Cn.join(r,o);Bt.readFile(a,function(c,u){c?e._onErrorHelper(c):Bt.unlink(a,function(f){f?e._onErrorHelper(f):e.send(u)})})}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.TAG="Sender",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1e3*1e3,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.TEMPDIR_PREFIX="appInsights-node",t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=cu.type()==="Windows_NT",t}();vw.exports=v1});var ww=v((I3,Cw)=>{"use strict";var Y=Jt(),Dr=ur(),y1=hi(),_1=function(){function t(){}return t.createEnvelope=function(e,r,n,i,s){var o=null;switch(r){case Y.TelemetryType.Trace:o=t.createTraceData(e);break;case Y.TelemetryType.Dependency:o=t.createDependencyData(e);break;case Y.TelemetryType.Event:o=t.createEventData(e);break;case Y.TelemetryType.Exception:o=t.createExceptionData(e);break;case Y.TelemetryType.Request:o=t.createRequestData(e);break;case Y.TelemetryType.Metric:o=t.createMetricData(e);break;case Y.TelemetryType.Availability:o=t.createAvailabilityData(e);break;case Y.TelemetryType.PageView:o=t.createPageViewData(e);break}if(n&&Y.domainSupportsProperties(o.baseData)){if(o&&o.baseData)if(!o.baseData.properties)o.baseData.properties=n;else for(var a in n)o.baseData.properties[a]||(o.baseData.properties[a]=n[a]);o.baseData.properties=Dr.validateStringMap(o.baseData.properties)}var c=s&&s.instrumentationKey||"",u=new Y.Envelope;return u.data=o,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+o.baseType.substr(0,o.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=s?s.samplingPercentage:100,r===Y.TelemetryType.Metric&&(u.sampleRate=100),u},t.createTraceData=function(e){var r=new Y.MessageData;r.message=e.message,r.properties=e.properties,isNaN(e.severity)?r.severityLevel=Y.SeverityLevel.Information:r.severityLevel=e.severity;var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Trace),n.baseData=r,n},t.createDependencyData=function(e){var r=new Y.RemoteDependencyData;typeof e.name=="string"&&(r.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),r.data=e.data,r.target=e.target,r.duration=Dr.msToTimeSpan(e.duration),r.success=e.success,r.type=e.dependencyTypeName,r.properties=e.properties,r.resultCode=e.resultCode?e.resultCode+"":"",e.id?r.id=e.id:r.id=Dr.w3cTraceId();var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Dependency),n.baseData=r,n},t.createEventData=function(e){var r=new Y.EventData;r.name=e.name,r.properties=e.properties,r.measurements=e.measurements;var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Event),n.baseData=r,n},t.createExceptionData=function(e){var r=new Y.ExceptionData;r.properties=e.properties,isNaN(e.severity)?r.severityLevel=Y.SeverityLevel.Error:r.severityLevel=e.severity,r.measurements=e.measurements,r.exceptions=[];var n=e.exception.stack,i=new Y.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=Dr.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var s=new Y.Data;return s.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Exception),s.baseData=r,s},t.createRequestData=function(e){var r=new Y.RequestData;e.id?r.id=e.id:r.id=Dr.w3cTraceId(),r.name=e.name,r.url=e.url,r.source=e.source,r.duration=Dr.msToTimeSpan(e.duration),r.responseCode=e.resultCode?e.resultCode+"":"",r.success=e.success,r.properties=e.properties;var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Request),n.baseData=r,n},t.createMetricData=function(e){var r=new Y.MetricData;r.metrics=[];var n=new Y.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=Y.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,r.metrics.push(n),r.properties=e.properties;var i=new Y.Data;return i.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Metric),i.baseData=r,i},t.createAvailabilityData=function(e){var r=new Y.AvailabilityData;e.id?r.id=e.id:r.id=Dr.w3cTraceId(),r.name=e.name,r.duration=Dr.msToTimeSpan(e.duration),r.success=e.success,r.runLocation=e.runLocation,r.message=e.message,r.measurements=e.measurements,r.properties=e.properties;var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.Availability),n.baseData=r,n},t.createPageViewData=function(e){var r=new Y.PageViewData;r.name=e.name,r.duration=Dr.msToTimeSpan(e.duration),r.url=e.url,r.measurements=e.measurements,r.properties=e.properties;var n=new Y.Data;return n.baseType=Y.telemetryTypeToBaseType(Y.TelemetryType.PageView),n.baseData=r,n},t.getTags=function(e,r){var n=y1.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var s in e.tags)i[s]=e.tags[s];if(r)for(var s in r)i[s]=r[s];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,s=0,o=0;o<=n.length;o++){var a=n[o];if(_w.regex.test(a)){var c=new _w(n[o],i++);s+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(s>u)for(var f=0,h=r.length-1,m=0,y=f,S=h;f<h;){var I=r[f].sizeInBytes,M=r[h].sizeInBytes;if(m+=I+M,m>u){var k=S-y+1;r.splice(y,k);break}y=f,S=h,f++,h--}}return r},t}(),_w=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Dr.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Dr.trim(n[2])||this.method,this.fileName=Dr.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();Cw.exports=_1});var Tw=v((x3,Sw)=>{"use strict";var C1=require("url"),w1=su(),b1=Ho(),wn=Jt(),E1=lw(),Wf=mw(),bw=hi(),S1=yw(),T1=ur(),Ew=ft(),R1=ww(),D1=function(){function t(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new w1(e);this.config=r,this.context=new b1,this.commonProperties={};var n=new S1(this.config);this.channel=new E1(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,wn.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,wn.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,wn.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,wn.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!T1.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,wn.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,wn.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,wn.TelemetryType.Request)},t.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=C1.parse(e.data).host),this.track(e,wn.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&wn.telemetryTypeToBaseType(r)){var n=R1.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString()),this._enableAzureProperties&&Wf.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&Wf.samplingTelemetryProcessor(n,{correlationContext:bw.CorrelationContextManager.getCurrentContext()}),i&&(Wf.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else Ew.warn("track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=bw.CorrelationContextManager.getCurrentContext();for(var s=0;s<i;++s)try{var o=this._telemetryProcessors[s];if(o&&o.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,Ew.warn("One of telemetry processors failed, telemetry item will be sent.",a,e)}return n},t}();Sw.exports=D1});var Pw=v((zf,Dw)=>{"use strict";var P1=zf&&zf.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I1=Tw(),Rw=kf(),x1=js(),uu=ft(),q1=function(t){P1(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?Rw.trackRequestSync(this,r):uu.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&uu.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?Rw.trackRequest(this,r):uu.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?x1.trackRequest(this,r):uu.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(I1);Dw.exports=q1});var xw=v(Iw=>{"use strict";Object.defineProperty(Iw,"__esModule",{value:!0})});var Yw=v(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var Kf=hi(),O1=l0(),k1=f0(),Ow=nu(),A1=F0(),N1=js(),L1=kf(),kw=Ci(),Ko=ft(),M1=sw(),Aw=aw();X.TelemetryClient=Pw();X.Contracts=Jt();X.azureFunctionsTypes=xw();var Nw;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(Nw=X.DistributedTracingModes||(X.DistributedTracingModes={}));var Lw=!0,Mw=!1,Fw=!0,jw=!0,$w=!1,Hw=!0,Bw=!0,Uw=!0,Vf=!0,Ww,lu=!1,zw=!0,Kw,Vw=void 0,Gw=void 0,Vo,Go,Xo,Yo,Hs,qi,Qo,bn=!1,qw;function F1(t){return X.defaultClient?Ko.info("The default client is already setup"):(X.defaultClient=new X.TelemetryClient(t),Vo=new O1(X.defaultClient),Go=new k1(X.defaultClient),Xo=new Ow(X.defaultClient),Yo=new A1(X.defaultClient),qi=new L1(X.defaultClient),Qo=new N1(X.defaultClient),Hs||(Hs=new Aw.AutoCollectNativePerformance(X.defaultClient))),X.defaultClient&&X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(Uw,Vw,Gw),Gf}X.setup=F1;function Xw(){return X.defaultClient?(bn=!0,Vo.enable(Lw,Mw),Go.enable(Fw),Xo.enable(jw),Yo.enable($w,X.defaultClient.config),Hs.enable(zw,Kw),qi.useAutoCorrelation(Vf,Ww),qi.enable(Hw),Qo.enable(Bw),X.liveMetricsClient&&lu&&X.liveMetricsClient.enable(lu)):Ko.warn("Start cannot be called before setup"),Gf}X.start=Xw;function j1(){return Vf?Kf.CorrelationContextManager.getCurrentContext():null}X.getCorrelationContext=j1;function $1(t,e){return Kf.CorrelationContextManager.startOperation(t,e)}X.startOperation=$1;function H1(t,e){return Kf.CorrelationContextManager.wrapCallback(t,e)}X.wrapWithCorrelationContext=H1;var Gf=function(){function t(){}return t.setDistributedTracingMode=function(e){return kw.w3cEnabled=e===Nw.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),Lw=e,Mw=r,bn&&Vo.enable(e,r),t},t.setAutoCollectExceptions=function(e){return Fw=e,bn&&Go.enable(e),t},t.setAutoCollectPerformance=function(e,r){r===void 0&&(r=!0),jw=e;var n=Aw.AutoCollectNativePerformance.parseEnabled(r);return zw=n.isEnabled,Kw=n.disabledMetrics,bn&&(Xo.enable(e),Hs.enable(n.isEnabled,n.disabledMetrics)),t},t.setAutoCollectHeartbeat=function(e){return $w=e,bn&&Yo.enable(e,X.defaultClient.config),t},t.setAutoCollectRequests=function(e){return Hw=e,bn&&qi.enable(e),t},t.setAutoCollectDependencies=function(e){return Bw=e,bn&&Qo.enable(e),t},t.setAutoDependencyCorrelation=function(e,r){return Vf=e,Ww=r,bn&&qi.useAutoCorrelation(e,r),t},t.setUseDiskRetryCaching=function(e,r,n){return Uw=e,Vw=r,Gw=n,X.defaultClient&&X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(e,r,n),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),Ko.enableDebug=e,Ko.disableWarnings=!r,t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),X.defaultClient?(!X.liveMetricsClient&&e?(X.liveMetricsClient=new M1(X.defaultClient.config.instrumentationKey),qw=new Ow(X.liveMetricsClient,1e3,!0),X.liveMetricsClient.addCollector(qw),X.defaultClient.quickPulseClient=X.liveMetricsClient):X.liveMetricsClient&&X.liveMetricsClient.enable(e),lu=e,t):(Ko.warn("Live metrics client cannot be setup without the default client"),t)},t.start=Xw,t}();X.Configuration=Gf;function B1(){kw.w3cEnabled=!0,X.defaultClient=null,bn=!1,Vo&&Vo.dispose(),Go&&Go.dispose(),Xo&&Xo.dispose(),Yo&&Yo.dispose(),Hs&&Hs.dispose(),qi&&qi.dispose(),Qo&&Qo.dispose(),X.liveMetricsClient&&(X.liveMetricsClient.enable(!1),lu=!1,X.liveMetricsClient=void 0)}X.dispose=B1});var Xf=v((du,Qw)=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.default=z1;var U1=W1(require("crypto"));function W1(t){return t&&t.__esModule?t:{default:t}}function z1(){return U1.default.randomBytes(16)}Qw.exports=du.default});var fu=v((Zo,Zw)=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;var Jw=[];for(Jo=0;Jo<256;++Jo)Jw[Jo]=(Jo+256).toString(16).substr(1);var Jo;function K1(t,e){var r=e||0,n=Jw;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")}var V1=K1;Zo.default=V1;Zw.exports=Zo.default});var nb=v((ea,rb)=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.default=void 0;var G1=tb(Xf()),X1=tb(fu());function tb(t){return t&&t.__esModule?t:{default:t}}var eb,Yf,Qf=0,Jf=0;function Y1(t,e,r){var n=e&&r||0,i=e||[];t=t||{};var s=t.node||eb,o=t.clockseq!==void 0?t.clockseq:Yf;if(s==null||o==null){var a=t.random||(t.rng||G1.default)();s==null&&(s=eb=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Yf=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:new Date().getTime(),u=t.nsecs!==void 0?t.nsecs:Jf+1,f=c-Qf+(u-Jf)/1e4;if(f<0&&t.clockseq===void 0&&(o=o+1&16383),(f<0||c>Qf)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qf=c,Jf=u,Yf=o,c+=122192928e5;var h=((c&268435455)*1e4+u)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;var m=c/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var y=0;y<6;++y)i[n+y]=s[y];return e||(0,X1.default)(i)}var Q1=Y1;ea.default=Q1;rb.exports=ea.default});var Zf=v(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.default=rA;Oi.URL=Oi.DNS=void 0;var J1=Z1(fu());function Z1(t){return t&&t.__esModule?t:{default:t}}function eA(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,function(r){e.push(parseInt(r,16))}),e}function tA(t){t=unescape(encodeURIComponent(t));for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}var ib="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Oi.DNS=ib;var sb="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Oi.URL=sb;function rA(t,e,r){var n=function(i,s,o,a){var c=o&&a||0;if(typeof i=="string"&&(i=tA(i)),typeof s=="string"&&(s=eA(s)),!Array.isArray(i))throw TypeError("value must be an array of bytes");if(!Array.isArray(s)||s.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var u=r(s.concat(i));if(u[6]=u[6]&15|e,u[8]=u[8]&63|128,o)for(var f=0;f<16;++f)o[c+f]=u[f];return o||(0,J1.default)(u)};try{n.name=t}catch{}return n.DNS=ib,n.URL=sb,n}});var ab=v((ta,ob)=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.default=void 0;var nA=iA(require("crypto"));function iA(t){return t&&t.__esModule?t:{default:t}}function sA(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),nA.default.createHash("md5").update(t).digest()}var oA=sA;ta.default=oA;ob.exports=ta.default});var lb=v((ra,ub)=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.default=void 0;var aA=cb(Zf()),cA=cb(ab());function cb(t){return t&&t.__esModule?t:{default:t}}var uA=(0,aA.default)("v3",48,cA.default),lA=uA;ra.default=lA;ub.exports=ra.default});var pb=v((na,fb)=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.default=void 0;var dA=db(Xf()),fA=db(fu());function db(t){return t&&t.__esModule?t:{default:t}}function pA(t,e,r){var n=e&&r||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||dA.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e)for(var s=0;s<16;++s)e[n+s]=i[s];return e||(0,fA.default)(i)}var hA=pA;na.default=hA;fb.exports=na.default});var gb=v((ia,hb)=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.default=void 0;var gA=mA(require("crypto"));function mA(t){return t&&t.__esModule?t:{default:t}}function vA(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),gA.default.createHash("sha1").update(t).digest()}var yA=vA;ia.default=yA;hb.exports=ia.default});var yb=v((sa,vb)=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var _A=mb(Zf()),CA=mb(gb());function mb(t){return t&&t.__esModule?t:{default:t}}var wA=(0,_A.default)("v5",80,CA.default),bA=wA;sa.default=bA;vb.exports=sa.default});var _b=v(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Object.defineProperty(Bs,"v1",{enumerable:!0,get:function(){return EA.default}});Object.defineProperty(Bs,"v3",{enumerable:!0,get:function(){return SA.default}});Object.defineProperty(Bs,"v4",{enumerable:!0,get:function(){return TA.default}});Object.defineProperty(Bs,"v5",{enumerable:!0,get:function(){return RA.default}});var EA=pu(nb()),SA=pu(lb()),TA=pu(pb()),RA=pu(yb());function pu(t){return t&&t.__esModule?t:{default:t}}});var wb=v((N3,Cb)=>{"use strict";function DA(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}Cb.exports=DA});var aa=v((w4,Mb)=>{"use strict";var FA="2.0.0",jA=Number.MAX_SAFE_INTEGER||9007199254740991,$A=16,HA=256-6,BA=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Mb.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:$A,MAX_SAFE_BUILD_LENGTH:HA,MAX_SAFE_INTEGER:jA,RELEASE_TYPES:BA,SEMVER_SPEC_VERSION:FA,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ca=v((b4,Fb)=>{"use strict";var UA=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Fb.exports=UA});var Us=v((tn,jb)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:np,MAX_SAFE_BUILD_LENGTH:WA,MAX_LENGTH:zA}=aa(),KA=ca();tn=jb.exports={};var VA=tn.re=[],GA=tn.safeRe=[],$=tn.src=[],XA=tn.safeSrc=[],H=tn.t={},YA=0,ip="[a-zA-Z0-9-]",QA=[["\\s",1],["\\d",zA],[ip,WA]],JA=t=>{for(let[e,r]of QA)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ee=(t,e,r)=>{let n=JA(e),i=YA++;KA(t,i,e),H[t]=i,$[i]=e,XA[i]=n,VA[i]=new RegExp(e,r?"g":void 0),GA[i]=new RegExp(n,r?"g":void 0)};ee("NUMERICIDENTIFIER","0|[1-9]\\d*");ee("NUMERICIDENTIFIERLOOSE","\\d+");ee("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ip}*`);ee("MAINVERSION",`(${$[H.NUMERICIDENTIFIER]})\\.(${$[H.NUMERICIDENTIFIER]})\\.(${$[H.NUMERICIDENTIFIER]})`);ee("MAINVERSIONLOOSE",`(${$[H.NUMERICIDENTIFIERLOOSE]})\\.(${$[H.NUMERICIDENTIFIERLOOSE]})\\.(${$[H.NUMERICIDENTIFIERLOOSE]})`);ee("PRERELEASEIDENTIFIER",`(?:${$[H.NONNUMERICIDENTIFIER]}|${$[H.NUMERICIDENTIFIER]})`);ee("PRERELEASEIDENTIFIERLOOSE",`(?:${$[H.NONNUMERICIDENTIFIER]}|${$[H.NUMERICIDENTIFIERLOOSE]})`);ee("PRERELEASE",`(?:-(${$[H.PRERELEASEIDENTIFIER]}(?:\\.${$[H.PRERELEASEIDENTIFIER]})*))`);ee("PRERELEASELOOSE",`(?:-?(${$[H.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${$[H.PRERELEASEIDENTIFIERLOOSE]})*))`);ee("BUILDIDENTIFIER",`${ip}+`);ee("BUILD",`(?:\\+(${$[H.BUILDIDENTIFIER]}(?:\\.${$[H.BUILDIDENTIFIER]})*))`);ee("FULLPLAIN",`v?${$[H.MAINVERSION]}${$[H.PRERELEASE]}?${$[H.BUILD]}?`);ee("FULL",`^${$[H.FULLPLAIN]}$`);ee("LOOSEPLAIN",`[v=\\s]*${$[H.MAINVERSIONLOOSE]}${$[H.PRERELEASELOOSE]}?${$[H.BUILD]}?`);ee("LOOSE",`^${$[H.LOOSEPLAIN]}$`);ee("GTLT","((?:<|>)?=?)");ee("XRANGEIDENTIFIERLOOSE",`${$[H.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ee("XRANGEIDENTIFIER",`${$[H.NUMERICIDENTIFIER]}|x|X|\\*`);ee("XRANGEPLAIN",`[v=\\s]*(${$[H.XRANGEIDENTIFIER]})(?:\\.(${$[H.XRANGEIDENTIFIER]})(?:\\.(${$[H.XRANGEIDENTIFIER]})(?:${$[H.PRERELEASE]})?${$[H.BUILD]}?)?)?`);ee("XRANGEPLAINLOOSE",`[v=\\s]*(${$[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${$[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${$[H.XRANGEIDENTIFIERLOOSE]})(?:${$[H.PRERELEASELOOSE]})?${$[H.BUILD]}?)?)?`);ee("XRANGE",`^${$[H.GTLT]}\\s*${$[H.XRANGEPLAIN]}$`);ee("XRANGELOOSE",`^${$[H.GTLT]}\\s*${$[H.XRANGEPLAINLOOSE]}$`);ee("COERCEPLAIN",`(^|[^\\d])(\\d{1,${np}})(?:\\.(\\d{1,${np}}))?(?:\\.(\\d{1,${np}}))?`);ee("COERCE",`${$[H.COERCEPLAIN]}(?:$|[^\\d])`);ee("COERCEFULL",$[H.COERCEPLAIN]+`(?:${$[H.PRERELEASE]})?(?:${$[H.BUILD]})?(?:$|[^\\d])`);ee("COERCERTL",$[H.COERCE],!0);ee("COERCERTLFULL",$[H.COERCEFULL],!0);ee("LONETILDE","(?:~>?)");ee("TILDETRIM",`(\\s*)${$[H.LONETILDE]}\\s+`,!0);tn.tildeTrimReplace="$1~";ee("TILDE",`^${$[H.LONETILDE]}${$[H.XRANGEPLAIN]}$`);ee("TILDELOOSE",`^${$[H.LONETILDE]}${$[H.XRANGEPLAINLOOSE]}$`);ee("LONECARET","(?:\\^)");ee("CARETTRIM",`(\\s*)${$[H.LONECARET]}\\s+`,!0);tn.caretTrimReplace="$1^";ee("CARET",`^${$[H.LONECARET]}${$[H.XRANGEPLAIN]}$`);ee("CARETLOOSE",`^${$[H.LONECARET]}${$[H.XRANGEPLAINLOOSE]}$`);ee("COMPARATORLOOSE",`^${$[H.GTLT]}\\s*(${$[H.LOOSEPLAIN]})$|^$`);ee("COMPARATOR",`^${$[H.GTLT]}\\s*(${$[H.FULLPLAIN]})$|^$`);ee("COMPARATORTRIM",`(\\s*)${$[H.GTLT]}\\s*(${$[H.LOOSEPLAIN]}|${$[H.XRANGEPLAIN]})`,!0);tn.comparatorTrimReplace="$1$2$3";ee("HYPHENRANGE",`^\\s*(${$[H.XRANGEPLAIN]})\\s+-\\s+(${$[H.XRANGEPLAIN]})\\s*$`);ee("HYPHENRANGELOOSE",`^\\s*(${$[H.XRANGEPLAINLOOSE]})\\s+-\\s+(${$[H.XRANGEPLAINLOOSE]})\\s*$`);ee("STAR","(<|>)?=?\\s*\\*");ee("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ee("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Cu=v((E4,$b)=>{"use strict";var ZA=Object.freeze({loose:!0}),eN=Object.freeze({}),tN=t=>t?typeof t!="object"?ZA:t:eN;$b.exports=tN});var sp=v((S4,Ub)=>{"use strict";var Hb=/^[0-9]+$/,Bb=(t,e)=>{let r=Hb.test(t),n=Hb.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},rN=(t,e)=>Bb(e,t);Ub.exports={compareIdentifiers:Bb,rcompareIdentifiers:rN}});var Nt=v((T4,zb)=>{"use strict";var wu=ca(),{MAX_LENGTH:Wb,MAX_SAFE_INTEGER:bu}=aa(),{safeRe:Eu,t:Su}=Us(),nN=Cu(),{compareIdentifiers:Ws}=sp(),fr=class{constructor(e,r){if(r=nN(r),e instanceof fr){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Wb)throw new TypeError(`version is longer than ${Wb} characters`);wu("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Eu[Su.LOOSE]:Eu[Su.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>bu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<bu)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(wu("SemVer.compare",this.version,this.options,e),!(e instanceof fr)){if(typeof e=="string"&&e===this.version)return 0;e=new fr(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof fr||(e=new fr(e,this.options)),Ws(this.major,e.major)||Ws(this.minor,e.minor)||Ws(this.patch,e.patch)}comparePre(e){if(e instanceof fr||(e=new fr(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(wu("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ws(n,i)}while(++r)}compareBuild(e){e instanceof fr||(e=new fr(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(wu("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ws(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Eu[Su.PRERELEASELOOSE]:Eu[Su.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Ws(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};zb.exports=fr});var ki=v((R4,Vb)=>{"use strict";var Kb=Nt(),iN=(t,e,r=!1)=>{if(t instanceof Kb)return t;try{return new Kb(t,e)}catch(n){if(!r)return null;throw n}};Vb.exports=iN});var Xb=v((D4,Gb)=>{"use strict";var sN=ki(),oN=(t,e)=>{let r=sN(t,e);return r?r.version:null};Gb.exports=oN});var Qb=v((P4,Yb)=>{"use strict";var aN=ki(),cN=(t,e)=>{let r=aN(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Yb.exports=cN});var eE=v((I4,Zb)=>{"use strict";var Jb=Nt(),uN=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Jb(t instanceof Jb?t.version:t,r).inc(e,n,i).version}catch{return null}};Zb.exports=uN});var nE=v((x4,rE)=>{"use strict";var tE=ki(),lN=(t,e)=>{let r=tE(t,null,!0),n=tE(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let f=c?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};rE.exports=lN});var sE=v((q4,iE)=>{"use strict";var dN=Nt(),fN=(t,e)=>new dN(t,e).major;iE.exports=fN});var aE=v((O4,oE)=>{"use strict";var pN=Nt(),hN=(t,e)=>new pN(t,e).minor;oE.exports=hN});var uE=v((k4,cE)=>{"use strict";var gN=Nt(),mN=(t,e)=>new gN(t,e).patch;cE.exports=mN});var dE=v((A4,lE)=>{"use strict";var vN=ki(),yN=(t,e)=>{let r=vN(t,e);return r&&r.prerelease.length?r.prerelease:null};lE.exports=yN});var Pr=v((N4,pE)=>{"use strict";var fE=Nt(),_N=(t,e,r)=>new fE(t,r).compare(new fE(e,r));pE.exports=_N});var gE=v((L4,hE)=>{"use strict";var CN=Pr(),wN=(t,e,r)=>CN(e,t,r);hE.exports=wN});var vE=v((M4,mE)=>{"use strict";var bN=Pr(),EN=(t,e)=>bN(t,e,!0);mE.exports=EN});var Tu=v((F4,_E)=>{"use strict";var yE=Nt(),SN=(t,e,r)=>{let n=new yE(t,r),i=new yE(e,r);return n.compare(i)||n.compareBuild(i)};_E.exports=SN});var wE=v((j4,CE)=>{"use strict";var TN=Tu(),RN=(t,e)=>t.sort((r,n)=>TN(r,n,e));CE.exports=RN});var EE=v(($4,bE)=>{"use strict";var DN=Tu(),PN=(t,e)=>t.sort((r,n)=>DN(n,r,e));bE.exports=PN});var ua=v((H4,SE)=>{"use strict";var IN=Pr(),xN=(t,e,r)=>IN(t,e,r)>0;SE.exports=xN});var Ru=v((B4,TE)=>{"use strict";var qN=Pr(),ON=(t,e,r)=>qN(t,e,r)<0;TE.exports=ON});var op=v((U4,RE)=>{"use strict";var kN=Pr(),AN=(t,e,r)=>kN(t,e,r)===0;RE.exports=AN});var ap=v((W4,DE)=>{"use strict";var NN=Pr(),LN=(t,e,r)=>NN(t,e,r)!==0;DE.exports=LN});var Du=v((z4,PE)=>{"use strict";var MN=Pr(),FN=(t,e,r)=>MN(t,e,r)>=0;PE.exports=FN});var Pu=v((K4,IE)=>{"use strict";var jN=Pr(),$N=(t,e,r)=>jN(t,e,r)<=0;IE.exports=$N});var cp=v((V4,xE)=>{"use strict";var HN=op(),BN=ap(),UN=ua(),WN=Du(),zN=Ru(),KN=Pu(),VN=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return HN(t,r,n);case"!=":return BN(t,r,n);case">":return UN(t,r,n);case">=":return WN(t,r,n);case"<":return zN(t,r,n);case"<=":return KN(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};xE.exports=VN});var OE=v((G4,qE)=>{"use strict";var GN=Nt(),XN=ki(),{safeRe:Iu,t:xu}=Us(),YN=(t,e)=>{if(t instanceof GN)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Iu[xu.COERCEFULL]:Iu[xu.COERCE]);else{let c=e.includePrerelease?Iu[xu.COERCERTLFULL]:Iu[xu.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return XN(`${n}.${i}.${s}${o}${a}`,e)};qE.exports=YN});var AE=v((X4,kE)=>{"use strict";var up=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};kE.exports=up});var Ir=v((Y4,FE)=>{"use strict";var QN=/\s+/g,Ai=class{constructor(e,r){if(r=ZN(r),e instanceof Ai)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Ai(e.raw,r);if(e instanceof lp)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(QN," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!LE(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&oL(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&iL)|(this.options.loose&&sL))+":"+e,i=NE.get(n);if(i)return i;let s=this.options.loose,o=s?tr[Wt.HYPHENRANGELOOSE]:tr[Wt.HYPHENRANGE];e=e.replace(o,mL(this.options.includePrerelease)),xe("hyphen replace",e),e=e.replace(tr[Wt.COMPARATORTRIM],tL),xe("comparator trim",e),e=e.replace(tr[Wt.TILDETRIM],rL),xe("tilde trim",e),e=e.replace(tr[Wt.CARETTRIM],nL),xe("caret trim",e);let a=e.split(" ").map(h=>aL(h,this.options)).join(" ").split(/\s+/).map(h=>gL(h,this.options));s&&(a=a.filter(h=>(xe("loose invalid filter",h,this.options),!!h.match(tr[Wt.COMPARATORLOOSE])))),xe("range list",a);let c=new Map,u=a.map(h=>new lp(h,this.options));for(let h of u){if(LE(h))return[h];c.set(h.value,h)}c.size>1&&c.has("")&&c.delete("");let f=[...c.values()];return NE.set(n,f),f}intersects(e,r){if(!(e instanceof Ai))throw new TypeError("a Range is required");return this.set.some(n=>ME(n,r)&&e.set.some(i=>ME(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new eL(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(vL(this.set[r],e,this.options))return!0;return!1}};FE.exports=Ai;var JN=AE(),NE=new JN,ZN=Cu(),lp=la(),xe=ca(),eL=Nt(),{safeRe:tr,t:Wt,comparatorTrimReplace:tL,tildeTrimReplace:rL,caretTrimReplace:nL}=Us(),{FLAG_INCLUDE_PRERELEASE:iL,FLAG_LOOSE:sL}=aa(),LE=t=>t.value==="<0.0.0-0",oL=t=>t.value==="",ME=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},aL=(t,e)=>(xe("comp",t,e),t=lL(t,e),xe("caret",t),t=cL(t,e),xe("tildes",t),t=fL(t,e),xe("xrange",t),t=hL(t,e),xe("stars",t),t),zt=t=>!t||t.toLowerCase()==="x"||t==="*",cL=(t,e)=>t.trim().split(/\s+/).map(r=>uL(r,e)).join(" "),uL=(t,e)=>{let r=e.loose?tr[Wt.TILDELOOSE]:tr[Wt.TILDE];return t.replace(r,(n,i,s,o,a)=>{xe("tilde",t,n,i,s,o,a);let c;return zt(i)?c="":zt(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:zt(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(xe("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,xe("tilde return",c),c})},lL=(t,e)=>t.trim().split(/\s+/).map(r=>dL(r,e)).join(" "),dL=(t,e)=>{xe("caret",t,e);let r=e.loose?tr[Wt.CARETLOOSE]:tr[Wt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{xe("caret",t,i,s,o,a,c);let u;return zt(s)?u="":zt(o)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:zt(a)?s==="0"?u=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(xe("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(xe("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),xe("caret return",u),u})},fL=(t,e)=>(xe("replaceXRanges",t,e),t.split(/\s+/).map(r=>pL(r,e)).join(" ")),pL=(t,e)=>{t=t.trim();let r=e.loose?tr[Wt.XRANGELOOSE]:tr[Wt.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{xe("xRange",t,n,i,s,o,a,c);let u=zt(s),f=u||zt(o),h=f||zt(a),m=h;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(o=0),a=0,i===">"?(i=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",f?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):f?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:h&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),xe("xRange return",n),n})},hL=(t,e)=>(xe("replaceStars",t,e),t.trim().replace(tr[Wt.STAR],"")),gL=(t,e)=>(xe("replaceGTE0",t,e),t.trim().replace(tr[e.includePrerelease?Wt.GTE0PRE:Wt.GTE0],"")),mL=t=>(e,r,n,i,s,o,a,c,u,f,h,m)=>(zt(n)?r="":zt(i)?r=`>=${n}.0.0${t?"-0":""}`:zt(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,zt(u)?c="":zt(f)?c=`<${+u+1}.0.0-0`:zt(h)?c=`<${u}.${+f+1}.0-0`:m?c=`<=${u}.${f}.${h}-${m}`:t?c=`<${u}.${f}.${+h+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),vL=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(xe(t[n].semver),t[n].semver!==lp.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var la=v((Q4,WE)=>{"use strict";var da=Symbol("SemVer ANY"),zs=class{static get ANY(){return da}constructor(e,r){if(r=jE(r),e instanceof zs){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),fp("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===da?this.value="":this.value=this.operator+this.semver.version,fp("comp",this)}parse(e){let r=this.options.loose?$E[HE.COMPARATORLOOSE]:$E[HE.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new BE(n[2],this.options.loose):this.semver=da}toString(){return this.value}test(e){if(fp("Comparator.test",e,this.options.loose),this.semver===da||e===da)return!0;if(typeof e=="string")try{e=new BE(e,this.options)}catch{return!1}return dp(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof zs))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new UE(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new UE(this.value,r).test(e.semver):(r=jE(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||dp(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||dp(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};WE.exports=zs;var jE=Cu(),{safeRe:$E,t:HE}=Us(),dp=cp(),fp=ca(),BE=Nt(),UE=Ir()});var fa=v((J4,zE)=>{"use strict";var yL=Ir(),_L=(t,e,r)=>{try{e=new yL(e,r)}catch{return!1}return e.test(t)};zE.exports=_L});var VE=v((Z4,KE)=>{"use strict";var CL=Ir(),wL=(t,e)=>new CL(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));KE.exports=wL});var XE=v((e8,GE)=>{"use strict";var bL=Nt(),EL=Ir(),SL=(t,e,r)=>{let n=null,i=null,s=null;try{s=new EL(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new bL(n,r))}),n};GE.exports=SL});var QE=v((t8,YE)=>{"use strict";var TL=Nt(),RL=Ir(),DL=(t,e,r)=>{let n=null,i=null,s=null;try{s=new RL(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new TL(n,r))}),n};YE.exports=DL});var eS=v((r8,ZE)=>{"use strict";var pp=Nt(),PL=Ir(),JE=ua(),IL=(t,e)=>{t=new PL(t,e);let r=new pp("0.0.0");if(t.test(r)||(r=new pp("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new pp(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||JE(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||JE(r,s))&&(r=s)}return r&&t.test(r)?r:null};ZE.exports=IL});var rS=v((n8,tS)=>{"use strict";var xL=Ir(),qL=(t,e)=>{try{return new xL(t,e).range||"*"}catch{return null}};tS.exports=qL});var qu=v((i8,oS)=>{"use strict";var OL=Nt(),sS=la(),{ANY:kL}=sS,AL=Ir(),NL=fa(),nS=ua(),iS=Ru(),LL=Pu(),ML=Du(),FL=(t,e,r,n)=>{t=new OL(t,n),e=new AL(e,n);let i,s,o,a,c;switch(r){case">":i=nS,s=LL,o=iS,a=">",c=">=";break;case"<":i=iS,s=ML,o=nS,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(NL(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],h=null,m=null;if(f.forEach(y=>{y.semver===kL&&(y=new sS(">=0.0.0")),h=h||y,m=m||y,i(y.semver,h.semver,n)?h=y:o(y.semver,m.semver,n)&&(m=y)}),h.operator===a||h.operator===c||(!m.operator||m.operator===a)&&s(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};oS.exports=FL});var cS=v((s8,aS)=>{"use strict";var jL=qu(),$L=(t,e,r)=>jL(t,e,">",r);aS.exports=$L});var lS=v((o8,uS)=>{"use strict";var HL=qu(),BL=(t,e,r)=>HL(t,e,"<",r);uS.exports=BL});var pS=v((a8,fS)=>{"use strict";var dS=Ir(),UL=(t,e,r)=>(t=new dS(t,r),e=new dS(e,r),t.intersects(e,r));fS.exports=UL});var gS=v((c8,hS)=>{"use strict";var WL=fa(),zL=Pr();hS.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((f,h)=>zL(f,h,r));for(let f of o)WL(f,e,r)?(s=f,i||(i=f)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[f,h]of n)f===h?a.push(f):!h&&f===o[0]?a.push("*"):h?f===o[0]?a.push(`<=${h}`):a.push(`${f} - ${h}`):a.push(`>=${f}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var wS=v((u8,CS)=>{"use strict";var mS=Ir(),gp=la(),{ANY:hp}=gp,pa=fa(),mp=Pr(),KL=(t,e,r={})=>{if(t===e)return!0;t=new mS(t,r),e=new mS(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=GL(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},VL=[new gp(">=0.0.0-0")],vS=[new gp(">=0.0.0")],GL=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===hp){if(e.length===1&&e[0].semver===hp)return!0;r.includePrerelease?t=VL:t=vS}if(e.length===1&&e[0].semver===hp){if(r.includePrerelease)return!0;e=vS}let n=new Set,i,s;for(let y of t)y.operator===">"||y.operator===">="?i=yS(i,y,r):y.operator==="<"||y.operator==="<="?s=_S(s,y,r):n.add(y.semver);if(n.size>1)return null;let o;if(i&&s){if(o=mp(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let y of n){if(i&&!pa(y,String(i),r)||s&&!pa(y,String(s),r))return null;for(let S of e)if(!pa(y,String(S),r))return!1;return!0}let a,c,u,f,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let y of e){if(f=f||y.operator===">"||y.operator===">=",u=u||y.operator==="<"||y.operator==="<=",i){if(m&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===m.major&&y.semver.minor===m.minor&&y.semver.patch===m.patch&&(m=!1),y.operator===">"||y.operator===">="){if(a=yS(i,y,r),a===y&&a!==i)return!1}else if(i.operator===">="&&!pa(i.semver,String(y),r))return!1}if(s){if(h&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===h.major&&y.semver.minor===h.minor&&y.semver.patch===h.patch&&(h=!1),y.operator==="<"||y.operator==="<="){if(c=_S(s,y,r),c===y&&c!==s)return!1}else if(s.operator==="<="&&!pa(s.semver,String(y),r))return!1}if(!y.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&f&&!i&&o!==0||m||h)},yS=(t,e,r)=>{if(!t)return e;let n=mp(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},_S=(t,e,r)=>{if(!t)return e;let n=mp(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};CS.exports=KL});var TS=v((l8,SS)=>{"use strict";var vp=Us(),bS=aa(),XL=Nt(),ES=sp(),YL=ki(),QL=Xb(),JL=Qb(),ZL=eE(),eM=nE(),tM=sE(),rM=aE(),nM=uE(),iM=dE(),sM=Pr(),oM=gE(),aM=vE(),cM=Tu(),uM=wE(),lM=EE(),dM=ua(),fM=Ru(),pM=op(),hM=ap(),gM=Du(),mM=Pu(),vM=cp(),yM=OE(),_M=la(),CM=Ir(),wM=fa(),bM=VE(),EM=XE(),SM=QE(),TM=eS(),RM=rS(),DM=qu(),PM=cS(),IM=lS(),xM=pS(),qM=gS(),OM=wS();SS.exports={parse:YL,valid:QL,clean:JL,inc:ZL,diff:eM,major:tM,minor:rM,patch:nM,prerelease:iM,compare:sM,rcompare:oM,compareLoose:aM,compareBuild:cM,sort:uM,rsort:lM,gt:dM,lt:fM,eq:pM,neq:hM,gte:gM,lte:mM,cmp:vM,coerce:yM,Comparator:_M,Range:CM,satisfies:wM,toComparators:bM,maxSatisfying:EM,minSatisfying:SM,minVersion:TM,validRange:RM,outside:DM,gtr:PM,ltr:IM,intersects:xM,simplifyRange:qM,subset:OM,SemVer:XL,re:vp.re,src:vp.src,tokens:vp.t,SEMVER_SPEC_VERSION:bS.SEMVER_SPEC_VERSION,RELEASE_TYPES:bS.RELEASE_TYPES,compareIdentifiers:ES.compareIdentifiers,rcompareIdentifiers:ES.rcompareIdentifiers}});var Vn=v(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.asPromise=We.thenable=We.typedArray=We.stringArray=We.array=We.func=We.error=We.number=We.string=We.boolean=void 0;function kM(t){return t===!0||t===!1}We.boolean=kM;function RS(t){return typeof t=="string"||t instanceof String}We.string=RS;function AM(t){return typeof t=="number"||t instanceof Number}We.number=AM;function NM(t){return t instanceof Error}We.error=NM;function DS(t){return typeof t=="function"}We.func=DS;function PS(t){return Array.isArray(t)}We.array=PS;function LM(t){return PS(t)&&t.every(e=>RS(e))}We.stringArray=LM;function MM(t,e){return Array.isArray(t)&&t.every(e)}We.typedArray=MM;function IS(t){return t&&DS(t.then)}We.thenable=IS;function FM(t){return t instanceof Promise?t:IS(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}We.asPromise=FM});var En=v(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});var yp;function _p(){if(yp===void 0)throw new Error("No runtime abstraction layer installed");return yp}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");yp=r}t.install=e})(_p||(_p={}));Cp.default=_p});var wp=v(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.Disposable=void 0;var jM;(function(t){function e(r){return{dispose:r}}t.create=e})(jM=ha.Disposable||(ha.Disposable={}))});var xS=v(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.AbstractMessageBuffer=void 0;var $M=13,HM=10,BM=`\r
`,bp=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case $M:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case HM:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=c.byteLength,r++}if(e!==4)return;let s=this._read(i+n),o=new Map,a=this.toString(s,"ascii").split(BM);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){let u=a[c],f=u.indexOf(":");if(f===-1)throw new Error("Message header must separate key and value using :");let h=u.substr(0,f),m=u.substr(f+1).trim();o.set(h,m)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);r.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};Ou.AbstractMessageBuffer=bp});var kS=v(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});var UM=En(),qS=require("util"),Ni=wp(),WM=xS(),Ks=class extends WM.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Ks.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new qS.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};Ks.emptyBuffer=Buffer.allocUnsafe(0);var Ep=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ni.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ni.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ni.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ni.Disposable.create(()=>this.stream.off("data",e))}},Sp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ni.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ni.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ni.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let s=o=>{o==null?n():i(o)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},OS=Object.freeze({messageBuffer:Object.freeze({create:t=>new Ks(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new qS.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new Ep(t),asWritableStream:t=>new Sp(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){return setTimeout(t,e,...r)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function Tp(){return OS}(function(t){function e(){UM.default.install(OS)}t.install=e})(Tp||(Tp={}));Rp.default=Tp});var Vs=v(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.stringArray=Lt.array=Lt.func=Lt.error=Lt.number=Lt.string=Lt.boolean=void 0;function zM(t){return t===!0||t===!1}Lt.boolean=zM;function AS(t){return typeof t=="string"||t instanceof String}Lt.string=AS;function KM(t){return typeof t=="number"||t instanceof Number}Lt.number=KM;function VM(t){return t instanceof Error}Lt.error=VM;function GM(t){return typeof t=="function"}Lt.func=GM;function NS(t){return Array.isArray(t)}Lt.array=NS;function XM(t){return NS(t)&&t.every(e=>AS(e))}Lt.stringArray=XM});var Xp=v(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.isResponseMessage=U.isNotificationMessage=U.isRequestMessage=U.NotificationType9=U.NotificationType8=U.NotificationType7=U.NotificationType6=U.NotificationType5=U.NotificationType4=U.NotificationType3=U.NotificationType2=U.NotificationType1=U.NotificationType0=U.NotificationType=U.RequestType9=U.RequestType8=U.RequestType7=U.RequestType6=U.RequestType5=U.RequestType4=U.RequestType3=U.RequestType2=U.RequestType1=U.RequestType=U.RequestType0=U.AbstractMessageSignature=U.ParameterStructures=U.ResponseError=U.ErrorCodes=void 0;var Li=Vs(),LS;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(LS=U.ErrorCodes||(U.ErrorCodes={}));var ga=class extends Error{constructor(e,r,n){super(r),this.code=Li.number(e)?e:LS.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,ga.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};U.ResponseError=ga;var pt=class{constructor(e){this.kind=e}static is(e){return e===pt.auto||e===pt.byName||e===pt.byPosition}toString(){return this.kind}};U.ParameterStructures=pt;pt.auto=new pt("auto");pt.byPosition=new pt("byPosition");pt.byName=new pt("byName");var qe=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return pt.auto}};U.AbstractMessageSignature=qe;var Dp=class extends qe{constructor(e){super(e,0)}};U.RequestType0=Dp;var Pp=class extends qe{constructor(e,r=pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};U.RequestType=Pp;var Ip=class extends qe{constructor(e,r=pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};U.RequestType1=Ip;var xp=class extends qe{constructor(e){super(e,2)}};U.RequestType2=xp;var qp=class extends qe{constructor(e){super(e,3)}};U.RequestType3=qp;var Op=class extends qe{constructor(e){super(e,4)}};U.RequestType4=Op;var kp=class extends qe{constructor(e){super(e,5)}};U.RequestType5=kp;var Ap=class extends qe{constructor(e){super(e,6)}};U.RequestType6=Ap;var Np=class extends qe{constructor(e){super(e,7)}};U.RequestType7=Np;var Lp=class extends qe{constructor(e){super(e,8)}};U.RequestType8=Lp;var Mp=class extends qe{constructor(e){super(e,9)}};U.RequestType9=Mp;var Fp=class extends qe{constructor(e,r=pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};U.NotificationType=Fp;var jp=class extends qe{constructor(e){super(e,0)}};U.NotificationType0=jp;var $p=class extends qe{constructor(e,r=pt.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};U.NotificationType1=$p;var Hp=class extends qe{constructor(e){super(e,2)}};U.NotificationType2=Hp;var Bp=class extends qe{constructor(e){super(e,3)}};U.NotificationType3=Bp;var Up=class extends qe{constructor(e){super(e,4)}};U.NotificationType4=Up;var Wp=class extends qe{constructor(e){super(e,5)}};U.NotificationType5=Wp;var zp=class extends qe{constructor(e){super(e,6)}};U.NotificationType6=zp;var Kp=class extends qe{constructor(e){super(e,7)}};U.NotificationType7=Kp;var Vp=class extends qe{constructor(e){super(e,8)}};U.NotificationType8=Vp;var Gp=class extends qe{constructor(e){super(e,9)}};U.NotificationType9=Gp;function YM(t){let e=t;return e&&Li.string(e.method)&&(Li.string(e.id)||Li.number(e.id))}U.isRequestMessage=YM;function QM(t){let e=t;return e&&Li.string(e.method)&&t.id===void 0}U.isNotificationMessage=QM;function JM(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Li.string(e.id)||Li.number(e.id)||e.id===null)}U.isResponseMessage=JM});var Xs=v(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.Emitter=Mi.Event=void 0;var ZM=En(),eF;(function(t){let e={dispose(){}};t.None=function(){return e}})(eF=Mi.Event||(Mi.Event={}));var Yp=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(a){ZM.default().console.error(a)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Gs=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Yp),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=Gs._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Mi.Emitter=Gs;Gs._noop=function(){}});var eh=v(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.CancellationTokenSource=Fi.CancellationToken=void 0;var MS=En(),tF=Vs(),Qp=Xs(),Jp;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qp.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qp.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||tF.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(Jp=Fi.CancellationToken||(Fi.CancellationToken={}));var rF=Object.freeze(function(t,e){let r=MS.default().timer.setTimeout(t.bind(e),0);return{dispose(){MS.default().timer.clearTimeout(r)}}}),ku=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?rF:(this._emitter||(this._emitter=new Qp.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Zp=class{get token(){return this._token||(this._token=new ku),this._token}cancel(){this._token?this._token.cancel():this._token=Jp.Cancelled}dispose(){this._token?this._token instanceof ku&&this._token.dispose():this._token=Jp.None}};Fi.CancellationTokenSource=Zp});var FS=v(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ReadableStreamMessageReader=Sn.AbstractMessageReader=Sn.MessageReader=void 0;var Au=En(),Ys=Vs(),th=Xs(),nF;(function(t){function e(r){let n=r;return n&&Ys.func(n.listen)&&Ys.func(n.dispose)&&Ys.func(n.onError)&&Ys.func(n.onClose)&&Ys.func(n.onPartialMessage)}t.is=e})(nF=Sn.MessageReader||(Sn.MessageReader={}));var Nu=class{constructor(){this.errorEmitter=new th.Emitter,this.closeEmitter=new th.Emitter,this.partialMessageEmitter=new th.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Ys.string(e.message)?e.message:"unknown"}`)}};Sn.AbstractMessageReader=Nu;var rh;(function(t){function e(r){var n;let i,s,o,a=new Map,c,u=new Map;if(r===void 0||typeof r=="string")i=r??"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let f of r.contentDecoders)a.set(f.name,f);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,u.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let f of r.contentTypeDecoders)u.set(f.name,f)}return c===void 0&&(c=Au.default().applicationJson.decoder,u.set(c.name,c)),{charset:i,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:u}}t.fromOptions=e})(rh||(rh={}));var nh=class extends Nu{constructor(e,r){super(),this.readable=e,this.options=rh.fromOptions(r),this.buffer=Au.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(Au.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Au.default().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Sn.ReadableStreamMessageReader=nh});var jS=v(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Semaphore=void 0;var iF=En(),ih=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||iF.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};Lu.Semaphore=ih});var US=v(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.WriteableStreamMessageWriter=Tn.AbstractMessageWriter=Tn.MessageWriter=void 0;var $S=En(),ma=Vs(),sF=jS(),HS=Xs(),oF="Content-Length: ",BS=`\r
`,aF;(function(t){function e(r){let n=r;return n&&ma.func(n.dispose)&&ma.func(n.onClose)&&ma.func(n.onError)&&ma.func(n.write)}t.is=e})(aF=Tn.MessageWriter||(Tn.MessageWriter={}));var Mu=class{constructor(){this.errorEmitter=new HS.Emitter,this.closeEmitter=new HS.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ma.string(e.message)?e.message:"unknown"}`)}};Tn.AbstractMessageWriter=Mu;var sh;(function(t){function e(r){var n,i;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:$S.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:$S.default().applicationJson.encoder}}t.fromOptions=e})(sh||(sh={}));var oh=class extends Mu{constructor(e,r){super(),this.writable=e,this.options=sh.fromOptions(r),this.errorCount=0,this.writeSemaphore=new sF.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(oF,n.byteLength.toString(),BS),i.push(BS),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Tn.WriteableStreamMessageWriter=oh});var WS=v(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.LRUCache=Rn.LinkedMap=Rn.Touch=void 0;var Kt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Kt=Rn.Touch||(Rn.Touch={}));var Fu=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,r=Kt.None){let n=this._map.get(e);if(!!n)return r!==Kt.None&&this.touch(n,r),n.value}set(e,r,n=Kt.None){let i=this._map.get(e);if(i)i.value=r,n!==Kt.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Kt.None:this.addItemLast(i);break;case Kt.First:this.addItemFirst(i);break;case Kt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Kt.First&&r!==Kt.Last)){if(r===Kt.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Kt.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Rn.LinkedMap=Fu;var ah=class extends Fu{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Kt.AsNew){return super.get(e,r)}peek(e){return super.get(e,Kt.None)}set(e,r){return super.set(e,r,Kt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Rn.LRUCache=ah});var XS=v(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.createMessageConnection=Z.ConnectionOptions=Z.CancellationStrategy=Z.CancellationSenderStrategy=Z.CancellationReceiverStrategy=Z.ConnectionStrategy=Z.ConnectionError=Z.ConnectionErrors=Z.LogTraceNotification=Z.SetTraceNotification=Z.TraceFormat=Z.Trace=Z.NullLogger=Z.ProgressType=void 0;var zS=En(),ht=Vs(),Q=Xp(),KS=WS(),va=Xs(),ch=eh(),ya;(function(t){t.type=new Q.NotificationType("$/cancelRequest")})(ya||(ya={}));var $u;(function(t){t.type=new Q.NotificationType("$/progress")})($u||($u={}));var uh=class{constructor(){}};Z.ProgressType=uh;var lh;(function(t){function e(r){return ht.func(r)}t.is=e})(lh||(lh={}));Z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var st;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(st=Z.Trace||(Z.Trace={}));(function(t){function e(n){if(!ht.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(st=Z.Trace||(Z.Trace={}));var jr;(function(t){t.Text="text",t.JSON="json"})(jr=Z.TraceFormat||(Z.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(jr=Z.TraceFormat||(Z.TraceFormat={}));var VS;(function(t){t.type=new Q.NotificationType("$/setTrace")})(VS=Z.SetTraceNotification||(Z.SetTraceNotification={}));var dh;(function(t){t.type=new Q.NotificationType("$/logTrace")})(dh=Z.LogTraceNotification||(Z.LogTraceNotification={}));var ju;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ju=Z.ConnectionErrors||(Z.ConnectionErrors={}));var Gn=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,Gn.prototype)}};Z.ConnectionError=Gn;var GS;(function(t){function e(r){let n=r;return n&&ht.func(n.cancelUndispatched)}t.is=e})(GS=Z.ConnectionStrategy||(Z.ConnectionStrategy={}));var fh;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new ch.CancellationTokenSource}});function e(r){let n=r;return n&&ht.func(n.createCancellationTokenSource)}t.is=e})(fh=Z.CancellationReceiverStrategy||(Z.CancellationReceiverStrategy={}));var ph;(function(t){t.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(ya.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&ht.func(n.sendCancellation)&&ht.func(n.cleanup)}t.is=e})(ph=Z.CancellationSenderStrategy||(Z.CancellationSenderStrategy={}));var hh;(function(t){t.Message=Object.freeze({receiver:fh.Message,sender:ph.Message});function e(r){let n=r;return n&&fh.is(n.receiver)&&ph.is(n.sender)}t.is=e})(hh=Z.CancellationStrategy||(Z.CancellationStrategy={}));var cF;(function(t){function e(r){let n=r;return n&&(hh.is(n.cancellationStrategy)||GS.is(n.connectionStrategy))}t.is=e})(cF=Z.ConnectionOptions||(Z.ConnectionOptions={}));var $r;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})($r||($r={}));function uF(t,e,r,n){let i=r!==void 0?r:Z.NullLogger,s=0,o=0,a=0,c="2.0",u,f=Object.create(null),h,m=Object.create(null),y=new Map,S,I=new KS.LinkedMap,M=Object.create(null),k=Object.create(null),D=st.Off,O=jr.Text,x,j=$r.New,oe=new va.Emitter,Ee=new va.Emitter,ke=new va.Emitter,me=new va.Emitter,tt=new va.Emitter,ze=n&&n.cancellationStrategy?n.cancellationStrategy:hh.Message;function vt(T){if(T===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+T.toString()}function yt(T){return T===null?"res-unknown-"+(++a).toString():"res-"+T.toString()}function _t(){return"not-"+(++o).toString()}function Ke(T,C){Q.isRequestMessage(C)?T.set(vt(C.id),C):Q.isResponseMessage(C)?T.set(yt(C.id),C):T.set(_t(),C)}function Ct(T){}function we(){return j===$r.Listening}function sr(){return j===$r.Closed}function Pe(){return j===$r.Disposed}function Ve(){(j===$r.New||j===$r.Listening)&&(j=$r.Closed,Ee.fire(void 0))}function dt(T){oe.fire([T,void 0,void 0])}function It(T){oe.fire(T)}t.onClose(Ve),t.onError(dt),e.onClose(Ve),e.onError(It);function Kr(){S||I.size===0||(S=zS.default().timer.setImmediate(()=>{S=void 0,or()}))}function or(){if(I.size===0)return;let T=I.shift();try{Q.isRequestMessage(T)?an(T):Q.isNotificationMessage(T)?Gr(T):Q.isResponseMessage(T)?Vr(T):cn(T)}finally{Kr()}}let on=T=>{try{if(Q.isNotificationMessage(T)&&T.method===ya.type.method){let C=vt(T.params.id),g=I.get(C);if(Q.isRequestMessage(g)){let w=n?.connectionStrategy,R=w&&w.cancelUndispatched?w.cancelUndispatched(g,Ct):void 0;if(R&&(R.error!==void 0||R.result!==void 0)){I.delete(C),R.id=g.id,gr(R,T.method,Date.now()),e.write(R);return}}}Ke(I,T)}finally{Kr()}};function an(T){if(Pe())return;function C(P,F,z){let te={jsonrpc:c,id:T.id};P instanceof Q.ResponseError?te.error=P.toJson():te.result=P===void 0?null:P,gr(te,F,z),e.write(te)}function g(P,F,z){let te={jsonrpc:c,id:T.id,error:P.toJson()};gr(te,F,z),e.write(te)}function w(P,F,z){P===void 0&&(P=null);let te={jsonrpc:c,id:T.id,result:P};gr(te,F,z),e.write(te)}qn(T);let R=f[T.method],l,d;R&&(l=R.type,d=R.handler);let E=Date.now();if(d||u){let P=String(T.id),F=ze.receiver.createCancellationTokenSource(P);k[P]=F;try{let z;if(d)if(T.params===void 0){if(l!==void 0&&l.numberOfParams!==0){g(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines ${l.numberOfParams} params but recevied none.`),T.method,E);return}z=d(F.token)}else if(Array.isArray(T.params)){if(l!==void 0&&l.parameterStructures===Q.ParameterStructures.byName){g(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by name but received parameters by position`),T.method,E);return}z=d(...T.params,F.token)}else{if(l!==void 0&&l.parameterStructures===Q.ParameterStructures.byPosition){g(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by position but received parameters by name`),T.method,E);return}z=d(T.params,F.token)}else u&&(z=u(T.method,T.params,F.token));let te=z;z?te.then?te.then(ye=>{delete k[P],C(ye,T.method,E)},ye=>{delete k[P],ye instanceof Q.ResponseError?g(ye,T.method,E):ye&&ht.string(ye.message)?g(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${ye.message}`),T.method,E):g(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,E)}):(delete k[P],C(z,T.method,E)):(delete k[P],w(z,T.method,E))}catch(z){delete k[P],z instanceof Q.ResponseError?C(z,T.method,E):z&&ht.string(z.message)?g(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${z.message}`),T.method,E):g(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,E)}}else g(new Q.ResponseError(Q.ErrorCodes.MethodNotFound,`Unhandled method ${T.method}`),T.method,E)}function Vr(T){if(!Pe())if(T.id===null)T.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(T.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let C=String(T.id),g=M[C];if(ii(T,g),g){delete M[C];try{if(T.error){let w=T.error;g.reject(new Q.ResponseError(w.code,w.message,w.data))}else if(T.result!==void 0)g.resolve(T.result);else throw new Error("Should never happen.")}catch(w){w.message?i.error(`Response handler '${g.method}' failed with message: ${w.message}`):i.error(`Response handler '${g.method}' failed unexpectedly.`)}}}}function Gr(T){if(Pe())return;let C,g;if(T.method===ya.type.method)g=w=>{let R=w.id,l=k[String(R)];l&&l.cancel()};else{let w=m[T.method];w&&(g=w.handler,C=w.type)}if(g||h)try{mr(T),g?T.params===void 0?(C!==void 0&&C.numberOfParams!==0&&C.parameterStructures!==Q.ParameterStructures.byName&&i.error(`Notification ${T.method} defines ${C.numberOfParams} params but recevied none.`),g()):Array.isArray(T.params)?(C!==void 0&&(C.parameterStructures===Q.ParameterStructures.byName&&i.error(`Notification ${T.method} defines parameters by name but received parameters by position`),C.numberOfParams!==T.params.length&&i.error(`Notification ${T.method} defines ${C.numberOfParams} params but received ${T.params.length} argumennts`)),g(...T.params)):(C!==void 0&&C.parameterStructures===Q.ParameterStructures.byPosition&&i.error(`Notification ${T.method} defines parameters by position but received parameters by name`),g(T.params)):h&&h(T.method,T.params)}catch(w){w.message?i.error(`Notification handler '${T.method}' failed with message: ${w.message}`):i.error(`Notification handler '${T.method}' failed unexpectedly.`)}else ke.fire(T)}function cn(T){if(!T){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(T,null,4)}`);let C=T;if(ht.string(C.id)||ht.number(C.id)){let g=String(C.id),w=M[g];w&&w.reject(new Error("The received response has neither a result nor an error property."))}}function xn(T){if(!(D===st.Off||!x))if(O===jr.Text){let C;D===st.Verbose&&T.params&&(C=`Params: ${JSON.stringify(T.params,null,4)}

`),x.log(`Sending request '${T.method} - (${T.id})'.`,C)}else Ge("send-request",T)}function ni(T){if(!(D===st.Off||!x))if(O===jr.Text){let C;D===st.Verbose&&(T.params?C=`Params: ${JSON.stringify(T.params,null,4)}

`:C=`No parameters provided.

`),x.log(`Sending notification '${T.method}'.`,C)}else Ge("send-notification",T)}function gr(T,C,g){if(!(D===st.Off||!x))if(O===jr.Text){let w;D===st.Verbose&&(T.error&&T.error.data?w=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?w=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&(w=`No result returned.

`)),x.log(`Sending response '${C} - (${T.id})'. Processing request took ${Date.now()-g}ms`,w)}else Ge("send-response",T)}function qn(T){if(!(D===st.Off||!x))if(O===jr.Text){let C;D===st.Verbose&&T.params&&(C=`Params: ${JSON.stringify(T.params,null,4)}

`),x.log(`Received request '${T.method} - (${T.id})'.`,C)}else Ge("receive-request",T)}function mr(T){if(!(D===st.Off||!x||T.method===dh.type.method))if(O===jr.Text){let C;D===st.Verbose&&(T.params?C=`Params: ${JSON.stringify(T.params,null,4)}

`:C=`No parameters provided.

`),x.log(`Received notification '${T.method}'.`,C)}else Ge("receive-notification",T)}function ii(T,C){if(!(D===st.Off||!x))if(O===jr.Text){let g;if(D===st.Verbose&&(T.error&&T.error.data?g=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?g=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&(g=`No result returned.

`)),C){let w=T.error?` Request failed: ${T.error.message} (${T.error.code}).`:"";x.log(`Received response '${C.method} - (${T.id})' in ${Date.now()-C.timerStart}ms.${w}`,g)}else x.log(`Received response ${T.id} without active response promise.`,g)}else Ge("receive-response",T)}function Ge(T,C){if(!x||D===st.Off)return;let g={isLSPMessage:!0,type:T,message:C,timestamp:Date.now()};x.log(g)}function Yt(){if(sr())throw new Gn(ju.Closed,"Connection is closed.");if(Pe())throw new Gn(ju.Disposed,"Connection is disposed.")}function On(){if(we())throw new Gn(ju.AlreadyListening,"Connection is already listening")}function si(){if(!we())throw new Error("Call listen() first.")}function vr(T){return T===void 0?null:T}function kn(T){if(T!==null)return T}function un(T){return T!=null&&!Array.isArray(T)&&typeof T=="object"}function yr(T,C){switch(T){case Q.ParameterStructures.auto:return un(C)?kn(C):[vr(C)];case Q.ParameterStructures.byName:if(!un(C))throw new Error("Recevied parameters by name but param is not an object literal.");return kn(C);case Q.ParameterStructures.byPosition:return[vr(C)];default:throw new Error(`Unknown parameter structure ${T.toString()}`)}}function ln(T,C){let g,w=T.numberOfParams;switch(w){case 0:g=void 0;break;case 1:g=yr(T.parameterStructures,C[0]);break;default:g=[];for(let R=0;R<C.length&&R<w;R++)g.push(vr(C[R]));if(C.length<w)for(let R=C.length;R<w;R++)g.push(null);break}return g}let _r={sendNotification:(T,...C)=>{Yt();let g,w;if(ht.string(T)){g=T;let l=C[0],d=0,E=Q.ParameterStructures.auto;Q.ParameterStructures.is(l)&&(d=1,E=l);let P=C.length,F=P-d;switch(F){case 0:w=void 0;break;case 1:w=yr(E,C[d]);break;default:if(E===Q.ParameterStructures.byName)throw new Error(`Recevied ${F} parameters for 'by Name' notification parameter structure.`);w=C.slice(d,P).map(z=>vr(z));break}}else{let l=C;g=T.method,w=ln(T,l)}let R={jsonrpc:c,method:g,params:w};ni(R),e.write(R)},onNotification:(T,C)=>{Yt();let g;return ht.func(T)?h=T:C&&(ht.string(T)?(g=T,m[T]={type:void 0,handler:C}):(g=T.method,m[T.method]={type:T,handler:C})),{dispose:()=>{g!==void 0?delete m[g]:h=void 0}}},onProgress:(T,C,g)=>{if(y.has(C))throw new Error(`Progress handler for token ${C} already registered`);return y.set(C,g),{dispose:()=>{y.delete(C)}}},sendProgress:(T,C,g)=>{_r.sendNotification($u.type,{token:C,value:g})},onUnhandledProgress:me.event,sendRequest:(T,...C)=>{Yt(),si();let g,w,R;if(ht.string(T)){g=T;let P=C[0],F=C[C.length-1],z=0,te=Q.ParameterStructures.auto;Q.ParameterStructures.is(P)&&(z=1,te=P);let ye=C.length;ch.CancellationToken.is(F)&&(ye=ye-1,R=F);let Xe=ye-z;switch(Xe){case 0:w=void 0;break;case 1:w=yr(te,C[z]);break;default:if(te===Q.ParameterStructures.byName)throw new Error(`Recevied ${Xe} parameters for 'by Name' request parameter structure.`);w=C.slice(z,ye).map(Ye=>vr(Ye));break}}else{let P=C;g=T.method,w=ln(T,P);let F=T.numberOfParams;R=ch.CancellationToken.is(P[F])?P[F]:void 0}let l=s++,d;return R&&(d=R.onCancellationRequested(()=>{ze.sender.sendCancellation(_r,l)})),new Promise((P,F)=>{let z={jsonrpc:c,id:l,method:g,params:w},te=Ye=>{P(Ye),ze.sender.cleanup(l),d?.dispose()},ye=Ye=>{F(Ye),ze.sender.cleanup(l),d?.dispose()},Xe={method:g,timerStart:Date.now(),resolve:te,reject:ye};xn(z);try{e.write(z)}catch(Ye){Xe.reject(new Q.ResponseError(Q.ErrorCodes.MessageWriteError,Ye.message?Ye.message:"Unknown reason")),Xe=null}Xe&&(M[String(l)]=Xe)})},onRequest:(T,C)=>{Yt();let g=null;return lh.is(T)?(g=void 0,u=T):ht.string(T)?(g=null,C!==void 0&&(g=T,f[T]={handler:C,type:void 0})):C!==void 0&&(g=T.method,f[T.method]={type:T,handler:C}),{dispose:()=>{g!==null&&(g!==void 0?delete f[g]:u=void 0)}}},trace:(T,C,g)=>{let w=!1,R=jr.Text;g!==void 0&&(ht.boolean(g)?w=g:(w=g.sendNotification||!1,R=g.traceFormat||jr.Text)),D=T,O=R,D===st.Off?x=void 0:x=C,w&&!sr()&&!Pe()&&_r.sendNotification(VS.type,{value:st.toString(T)})},onError:oe.event,onClose:Ee.event,onUnhandledNotification:ke.event,onDispose:tt.event,end:()=>{e.end()},dispose:()=>{if(Pe())return;j=$r.Disposed,tt.fire(void 0);let T=new Error("Connection got disposed.");Object.keys(M).forEach(C=>{M[C].reject(T)}),M=Object.create(null),k=Object.create(null),I=new KS.LinkedMap,ht.func(e.dispose)&&e.dispose(),ht.func(t.dispose)&&t.dispose()},listen:()=>{Yt(),On(),j=$r.Listening,t.listen(on)},inspect:()=>{zS.default().console.log("inspect")}};return _r.onNotification(dh.type,T=>{D===st.Off||!x||x.log(T.message,D===st.Verbose?T.verbose:void 0)}),_r.onNotification($u.type,T=>{let C=y.get(T.token);C?C(T.value):me.fire(T)}),_r}Z.createMessageConnection=uF});var vh=v(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.CancellationSenderStrategy=N.CancellationReceiverStrategy=N.ConnectionError=N.ConnectionErrors=N.LogTraceNotification=N.SetTraceNotification=N.TraceFormat=N.Trace=N.ProgressType=N.createMessageConnection=N.NullLogger=N.ConnectionOptions=N.ConnectionStrategy=N.WriteableStreamMessageWriter=N.AbstractMessageWriter=N.MessageWriter=N.ReadableStreamMessageReader=N.AbstractMessageReader=N.MessageReader=N.CancellationToken=N.CancellationTokenSource=N.Emitter=N.Event=N.Disposable=N.ParameterStructures=N.NotificationType9=N.NotificationType8=N.NotificationType7=N.NotificationType6=N.NotificationType5=N.NotificationType4=N.NotificationType3=N.NotificationType2=N.NotificationType1=N.NotificationType0=N.NotificationType=N.ErrorCodes=N.ResponseError=N.RequestType9=N.RequestType8=N.RequestType7=N.RequestType6=N.RequestType5=N.RequestType4=N.RequestType3=N.RequestType2=N.RequestType1=N.RequestType0=N.RequestType=N.RAL=void 0;N.CancellationStrategy=void 0;var Oe=Xp();Object.defineProperty(N,"RequestType",{enumerable:!0,get:function(){return Oe.RequestType}});Object.defineProperty(N,"RequestType0",{enumerable:!0,get:function(){return Oe.RequestType0}});Object.defineProperty(N,"RequestType1",{enumerable:!0,get:function(){return Oe.RequestType1}});Object.defineProperty(N,"RequestType2",{enumerable:!0,get:function(){return Oe.RequestType2}});Object.defineProperty(N,"RequestType3",{enumerable:!0,get:function(){return Oe.RequestType3}});Object.defineProperty(N,"RequestType4",{enumerable:!0,get:function(){return Oe.RequestType4}});Object.defineProperty(N,"RequestType5",{enumerable:!0,get:function(){return Oe.RequestType5}});Object.defineProperty(N,"RequestType6",{enumerable:!0,get:function(){return Oe.RequestType6}});Object.defineProperty(N,"RequestType7",{enumerable:!0,get:function(){return Oe.RequestType7}});Object.defineProperty(N,"RequestType8",{enumerable:!0,get:function(){return Oe.RequestType8}});Object.defineProperty(N,"RequestType9",{enumerable:!0,get:function(){return Oe.RequestType9}});Object.defineProperty(N,"ResponseError",{enumerable:!0,get:function(){return Oe.ResponseError}});Object.defineProperty(N,"ErrorCodes",{enumerable:!0,get:function(){return Oe.ErrorCodes}});Object.defineProperty(N,"NotificationType",{enumerable:!0,get:function(){return Oe.NotificationType}});Object.defineProperty(N,"NotificationType0",{enumerable:!0,get:function(){return Oe.NotificationType0}});Object.defineProperty(N,"NotificationType1",{enumerable:!0,get:function(){return Oe.NotificationType1}});Object.defineProperty(N,"NotificationType2",{enumerable:!0,get:function(){return Oe.NotificationType2}});Object.defineProperty(N,"NotificationType3",{enumerable:!0,get:function(){return Oe.NotificationType3}});Object.defineProperty(N,"NotificationType4",{enumerable:!0,get:function(){return Oe.NotificationType4}});Object.defineProperty(N,"NotificationType5",{enumerable:!0,get:function(){return Oe.NotificationType5}});Object.defineProperty(N,"NotificationType6",{enumerable:!0,get:function(){return Oe.NotificationType6}});Object.defineProperty(N,"NotificationType7",{enumerable:!0,get:function(){return Oe.NotificationType7}});Object.defineProperty(N,"NotificationType8",{enumerable:!0,get:function(){return Oe.NotificationType8}});Object.defineProperty(N,"NotificationType9",{enumerable:!0,get:function(){return Oe.NotificationType9}});Object.defineProperty(N,"ParameterStructures",{enumerable:!0,get:function(){return Oe.ParameterStructures}});var lF=wp();Object.defineProperty(N,"Disposable",{enumerable:!0,get:function(){return lF.Disposable}});var YS=Xs();Object.defineProperty(N,"Event",{enumerable:!0,get:function(){return YS.Event}});Object.defineProperty(N,"Emitter",{enumerable:!0,get:function(){return YS.Emitter}});var QS=eh();Object.defineProperty(N,"CancellationTokenSource",{enumerable:!0,get:function(){return QS.CancellationTokenSource}});Object.defineProperty(N,"CancellationToken",{enumerable:!0,get:function(){return QS.CancellationToken}});var gh=FS();Object.defineProperty(N,"MessageReader",{enumerable:!0,get:function(){return gh.MessageReader}});Object.defineProperty(N,"AbstractMessageReader",{enumerable:!0,get:function(){return gh.AbstractMessageReader}});Object.defineProperty(N,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return gh.ReadableStreamMessageReader}});var mh=US();Object.defineProperty(N,"MessageWriter",{enumerable:!0,get:function(){return mh.MessageWriter}});Object.defineProperty(N,"AbstractMessageWriter",{enumerable:!0,get:function(){return mh.AbstractMessageWriter}});Object.defineProperty(N,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return mh.WriteableStreamMessageWriter}});var rr=XS();Object.defineProperty(N,"ConnectionStrategy",{enumerable:!0,get:function(){return rr.ConnectionStrategy}});Object.defineProperty(N,"ConnectionOptions",{enumerable:!0,get:function(){return rr.ConnectionOptions}});Object.defineProperty(N,"NullLogger",{enumerable:!0,get:function(){return rr.NullLogger}});Object.defineProperty(N,"createMessageConnection",{enumerable:!0,get:function(){return rr.createMessageConnection}});Object.defineProperty(N,"ProgressType",{enumerable:!0,get:function(){return rr.ProgressType}});Object.defineProperty(N,"Trace",{enumerable:!0,get:function(){return rr.Trace}});Object.defineProperty(N,"TraceFormat",{enumerable:!0,get:function(){return rr.TraceFormat}});Object.defineProperty(N,"SetTraceNotification",{enumerable:!0,get:function(){return rr.SetTraceNotification}});Object.defineProperty(N,"LogTraceNotification",{enumerable:!0,get:function(){return rr.LogTraceNotification}});Object.defineProperty(N,"ConnectionErrors",{enumerable:!0,get:function(){return rr.ConnectionErrors}});Object.defineProperty(N,"ConnectionError",{enumerable:!0,get:function(){return rr.ConnectionError}});Object.defineProperty(N,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return rr.CancellationReceiverStrategy}});Object.defineProperty(N,"CancellationSenderStrategy",{enumerable:!0,get:function(){return rr.CancellationSenderStrategy}});Object.defineProperty(N,"CancellationStrategy",{enumerable:!0,get:function(){return rr.CancellationStrategy}});var dF=En();N.RAL=dF.default});var Js=v(ge=>{"use strict";var fF=ge&&ge.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pF=ge&&ge.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fF(e,t,r)};Object.defineProperty(ge,"__esModule",{value:!0});ge.createMessageConnection=ge.createServerSocketTransport=ge.createClientSocketTransport=ge.createServerPipeTransport=ge.createClientPipeTransport=ge.generateRandomPipeName=ge.StreamMessageWriter=ge.StreamMessageReader=ge.SocketMessageWriter=ge.SocketMessageReader=ge.IPCMessageWriter=ge.IPCMessageReader=void 0;var Qs=kS();Qs.default.install();var rn=vh(),JS=require("path"),hF=require("os"),gF=require("crypto"),Uu=require("net");pF(vh(),ge);var yh=class extends rn.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),rn.Disposable.create(()=>this.process.off("message",e))}};ge.IPCMessageReader=yh;var _h=class extends rn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};ge.IPCMessageWriter=_h;var ji=class extends rn.ReadableStreamMessageReader{constructor(e,r="utf-8"){super(Qs.default().stream.asReadableStream(e),r)}};ge.SocketMessageReader=ji;var $i=class extends rn.WriteableStreamMessageWriter{constructor(e,r){super(Qs.default().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ge.SocketMessageWriter=$i;var Hu=class extends rn.ReadableStreamMessageReader{constructor(e,r){super(Qs.default().stream.asReadableStream(e),r)}};ge.StreamMessageReader=Hu;var Bu=class extends rn.WriteableStreamMessageWriter{constructor(e,r){super(Qs.default().stream.asWritableStream(e),r)}};ge.StreamMessageWriter=Bu;var ZS=process.env.XDG_RUNTIME_DIR,mF=new Map([["linux",107],["darwin",103]]);function vF(){let t=gF.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;ZS?e=JS.join(ZS,`vscode-ipc-${t}.sock`):e=JS.join(hF.tmpdir(),`vscode-${t}.sock`);let r=mF.get(process.platform);return r!==void 0&&e.length>=r&&Qs.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}ge.generateRandomPipeName=vF;function yF(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=Uu.createServer(a=>{o.close(),r([new ji(a,e),new $i(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}ge.createClientPipeTransport=yF;function _F(t,e="utf-8"){let r=Uu.createConnection(t);return[new ji(r,e),new $i(r,e)]}ge.createServerPipeTransport=_F;function CF(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=Uu.createServer(a=>{o.close(),r([new ji(a,e),new $i(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}ge.createClientSocketTransport=CF;function wF(t,e="utf-8"){let r=Uu.createConnection(t,"127.0.0.1");return[new ji(r,e),new $i(r,e)]}ge.createServerSocketTransport=wF;function bF(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function EF(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function SF(t,e,r,n){r||(r=rn.NullLogger);let i=bF(t)?new Hu(t):t,s=EF(e)?new Bu(e):e;return rn.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),rn.createMessageConnection(i,s,r,n)}ge.createMessageConnection=SF});var Ch=v((D8,eT)=>{"use strict";eT.exports=Js()});var rT=v((tT,Wu)=>{(function(t){if(typeof Wu=="object"&&typeof Wu.exports=="object"){var e=t(require,tT);e!==void 0&&(Wu.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var r;(function(g){g.MIN_VALUE=-2147483648,g.MAX_VALUE=2147483647})(r=e.integer||(e.integer={}));var n;(function(g){g.MIN_VALUE=0,g.MAX_VALUE=2147483647})(n=e.uinteger||(e.uinteger={}));var i;(function(g){function w(l,d){return l===Number.MAX_VALUE&&(l=n.MAX_VALUE),d===Number.MAX_VALUE&&(d=n.MAX_VALUE),{line:l,character:d}}g.create=w;function R(l){var d=l;return C.objectLiteral(d)&&C.uinteger(d.line)&&C.uinteger(d.character)}g.is=R})(i=e.Position||(e.Position={}));var s;(function(g){function w(l,d,E,P){if(C.uinteger(l)&&C.uinteger(d)&&C.uinteger(E)&&C.uinteger(P))return{start:i.create(l,d),end:i.create(E,P)};if(i.is(l)&&i.is(d))return{start:l,end:d};throw new Error("Range#create called with invalid arguments["+l+", "+d+", "+E+", "+P+"]")}g.create=w;function R(l){var d=l;return C.objectLiteral(d)&&i.is(d.start)&&i.is(d.end)}g.is=R})(s=e.Range||(e.Range={}));var o;(function(g){function w(l,d){return{uri:l,range:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&s.is(d.range)&&(C.string(d.uri)||C.undefined(d.uri))}g.is=R})(o=e.Location||(e.Location={}));var a;(function(g){function w(l,d,E,P){return{targetUri:l,targetRange:d,targetSelectionRange:E,originSelectionRange:P}}g.create=w;function R(l){var d=l;return C.defined(d)&&s.is(d.targetRange)&&C.string(d.targetUri)&&(s.is(d.targetSelectionRange)||C.undefined(d.targetSelectionRange))&&(s.is(d.originSelectionRange)||C.undefined(d.originSelectionRange))}g.is=R})(a=e.LocationLink||(e.LocationLink={}));var c;(function(g){function w(l,d,E,P){return{red:l,green:d,blue:E,alpha:P}}g.create=w;function R(l){var d=l;return C.numberRange(d.red,0,1)&&C.numberRange(d.green,0,1)&&C.numberRange(d.blue,0,1)&&C.numberRange(d.alpha,0,1)}g.is=R})(c=e.Color||(e.Color={}));var u;(function(g){function w(l,d){return{range:l,color:d}}g.create=w;function R(l){var d=l;return s.is(d.range)&&c.is(d.color)}g.is=R})(u=e.ColorInformation||(e.ColorInformation={}));var f;(function(g){function w(l,d,E){return{label:l,textEdit:d,additionalTextEdits:E}}g.create=w;function R(l){var d=l;return C.string(d.label)&&(C.undefined(d.textEdit)||O.is(d))&&(C.undefined(d.additionalTextEdits)||C.typedArray(d.additionalTextEdits,O.is))}g.is=R})(f=e.ColorPresentation||(e.ColorPresentation={}));var h;(function(g){g.Comment="comment",g.Imports="imports",g.Region="region"})(h=e.FoldingRangeKind||(e.FoldingRangeKind={}));var m;(function(g){function w(l,d,E,P,F){var z={startLine:l,endLine:d};return C.defined(E)&&(z.startCharacter=E),C.defined(P)&&(z.endCharacter=P),C.defined(F)&&(z.kind=F),z}g.create=w;function R(l){var d=l;return C.uinteger(d.startLine)&&C.uinteger(d.startLine)&&(C.undefined(d.startCharacter)||C.uinteger(d.startCharacter))&&(C.undefined(d.endCharacter)||C.uinteger(d.endCharacter))&&(C.undefined(d.kind)||C.string(d.kind))}g.is=R})(m=e.FoldingRange||(e.FoldingRange={}));var y;(function(g){function w(l,d){return{location:l,message:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&o.is(d.location)&&C.string(d.message)}g.is=R})(y=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var S;(function(g){g.Error=1,g.Warning=2,g.Information=3,g.Hint=4})(S=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var I;(function(g){g.Unnecessary=1,g.Deprecated=2})(I=e.DiagnosticTag||(e.DiagnosticTag={}));var M;(function(g){function w(R){var l=R;return l!=null&&C.string(l.href)}g.is=w})(M=e.CodeDescription||(e.CodeDescription={}));var k;(function(g){function w(l,d,E,P,F,z){var te={range:l,message:d};return C.defined(E)&&(te.severity=E),C.defined(P)&&(te.code=P),C.defined(F)&&(te.source=F),C.defined(z)&&(te.relatedInformation=z),te}g.create=w;function R(l){var d,E=l;return C.defined(E)&&s.is(E.range)&&C.string(E.message)&&(C.number(E.severity)||C.undefined(E.severity))&&(C.integer(E.code)||C.string(E.code)||C.undefined(E.code))&&(C.undefined(E.codeDescription)||C.string((d=E.codeDescription)===null||d===void 0?void 0:d.href))&&(C.string(E.source)||C.undefined(E.source))&&(C.undefined(E.relatedInformation)||C.typedArray(E.relatedInformation,y.is))}g.is=R})(k=e.Diagnostic||(e.Diagnostic={}));var D;(function(g){function w(l,d){for(var E=[],P=2;P<arguments.length;P++)E[P-2]=arguments[P];var F={title:l,command:d};return C.defined(E)&&E.length>0&&(F.arguments=E),F}g.create=w;function R(l){var d=l;return C.defined(d)&&C.string(d.title)&&C.string(d.command)}g.is=R})(D=e.Command||(e.Command={}));var O;(function(g){function w(E,P){return{range:E,newText:P}}g.replace=w;function R(E,P){return{range:{start:E,end:E},newText:P}}g.insert=R;function l(E){return{range:E,newText:""}}g.del=l;function d(E){var P=E;return C.objectLiteral(P)&&C.string(P.newText)&&s.is(P.range)}g.is=d})(O=e.TextEdit||(e.TextEdit={}));var x;(function(g){function w(l,d,E){var P={label:l};return d!==void 0&&(P.needsConfirmation=d),E!==void 0&&(P.description=E),P}g.create=w;function R(l){var d=l;return d!==void 0&&C.objectLiteral(d)&&C.string(d.label)&&(C.boolean(d.needsConfirmation)||d.needsConfirmation===void 0)&&(C.string(d.description)||d.description===void 0)}g.is=R})(x=e.ChangeAnnotation||(e.ChangeAnnotation={}));var j;(function(g){function w(R){var l=R;return typeof l=="string"}g.is=w})(j=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var oe;(function(g){function w(E,P,F){return{range:E,newText:P,annotationId:F}}g.replace=w;function R(E,P,F){return{range:{start:E,end:E},newText:P,annotationId:F}}g.insert=R;function l(E,P){return{range:E,newText:"",annotationId:P}}g.del=l;function d(E){var P=E;return O.is(P)&&(x.is(P.annotationId)||j.is(P.annotationId))}g.is=d})(oe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ee;(function(g){function w(l,d){return{textDocument:l,edits:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&we.is(d.textDocument)&&Array.isArray(d.edits)}g.is=R})(Ee=e.TextDocumentEdit||(e.TextDocumentEdit={}));var ke;(function(g){function w(l,d,E){var P={kind:"create",uri:l};return d!==void 0&&(d.overwrite!==void 0||d.ignoreIfExists!==void 0)&&(P.options=d),E!==void 0&&(P.annotationId=E),P}g.create=w;function R(l){var d=l;return d&&d.kind==="create"&&C.string(d.uri)&&(d.options===void 0||(d.options.overwrite===void 0||C.boolean(d.options.overwrite))&&(d.options.ignoreIfExists===void 0||C.boolean(d.options.ignoreIfExists)))&&(d.annotationId===void 0||j.is(d.annotationId))}g.is=R})(ke=e.CreateFile||(e.CreateFile={}));var me;(function(g){function w(l,d,E,P){var F={kind:"rename",oldUri:l,newUri:d};return E!==void 0&&(E.overwrite!==void 0||E.ignoreIfExists!==void 0)&&(F.options=E),P!==void 0&&(F.annotationId=P),F}g.create=w;function R(l){var d=l;return d&&d.kind==="rename"&&C.string(d.oldUri)&&C.string(d.newUri)&&(d.options===void 0||(d.options.overwrite===void 0||C.boolean(d.options.overwrite))&&(d.options.ignoreIfExists===void 0||C.boolean(d.options.ignoreIfExists)))&&(d.annotationId===void 0||j.is(d.annotationId))}g.is=R})(me=e.RenameFile||(e.RenameFile={}));var tt;(function(g){function w(l,d,E){var P={kind:"delete",uri:l};return d!==void 0&&(d.recursive!==void 0||d.ignoreIfNotExists!==void 0)&&(P.options=d),E!==void 0&&(P.annotationId=E),P}g.create=w;function R(l){var d=l;return d&&d.kind==="delete"&&C.string(d.uri)&&(d.options===void 0||(d.options.recursive===void 0||C.boolean(d.options.recursive))&&(d.options.ignoreIfNotExists===void 0||C.boolean(d.options.ignoreIfNotExists)))&&(d.annotationId===void 0||j.is(d.annotationId))}g.is=R})(tt=e.DeleteFile||(e.DeleteFile={}));var ze;(function(g){function w(R){var l=R;return l&&(l.changes!==void 0||l.documentChanges!==void 0)&&(l.documentChanges===void 0||l.documentChanges.every(function(d){return C.string(d.kind)?ke.is(d)||me.is(d)||tt.is(d):Ee.is(d)}))}g.is=w})(ze=e.WorkspaceEdit||(e.WorkspaceEdit={}));var vt=function(){function g(w,R){this.edits=w,this.changeAnnotations=R}return g.prototype.insert=function(w,R,l){var d,E;if(l===void 0?d=O.insert(w,R):j.is(l)?(E=l,d=oe.insert(w,R,l)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(l),d=oe.insert(w,R,E)),this.edits.push(d),E!==void 0)return E},g.prototype.replace=function(w,R,l){var d,E;if(l===void 0?d=O.replace(w,R):j.is(l)?(E=l,d=oe.replace(w,R,l)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(l),d=oe.replace(w,R,E)),this.edits.push(d),E!==void 0)return E},g.prototype.delete=function(w,R){var l,d;if(R===void 0?l=O.del(w):j.is(R)?(d=R,l=oe.del(w,R)):(this.assertChangeAnnotations(this.changeAnnotations),d=this.changeAnnotations.manage(R),l=oe.del(w,d)),this.edits.push(l),d!==void 0)return d},g.prototype.add=function(w){this.edits.push(w)},g.prototype.all=function(){return this.edits},g.prototype.clear=function(){this.edits.splice(0,this.edits.length)},g.prototype.assertChangeAnnotations=function(w){if(w===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},g}(),yt=function(){function g(w){this._annotations=w===void 0?Object.create(null):w,this._counter=0,this._size=0}return g.prototype.all=function(){return this._annotations},Object.defineProperty(g.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),g.prototype.manage=function(w,R){var l;if(j.is(w)?l=w:(l=this.nextId(),R=w),this._annotations[l]!==void 0)throw new Error("Id "+l+" is already in use.");if(R===void 0)throw new Error("No annotation provided for id "+l);return this._annotations[l]=R,this._size++,l},g.prototype.nextId=function(){return this._counter++,this._counter.toString()},g}(),_t=function(){function g(w){var R=this;this._textEditChanges=Object.create(null),w!==void 0?(this._workspaceEdit=w,w.documentChanges?(this._changeAnnotations=new yt(w.changeAnnotations),w.changeAnnotations=this._changeAnnotations.all(),w.documentChanges.forEach(function(l){if(Ee.is(l)){var d=new vt(l.edits,R._changeAnnotations);R._textEditChanges[l.textDocument.uri]=d}})):w.changes&&Object.keys(w.changes).forEach(function(l){var d=new vt(w.changes[l]);R._textEditChanges[l]=d})):this._workspaceEdit={}}return Object.defineProperty(g.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),g.prototype.getTextEditChange=function(w){if(we.is(w)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var R={uri:w.uri,version:w.version},l=this._textEditChanges[R.uri];if(!l){var d=[],E={textDocument:R,edits:d};this._workspaceEdit.documentChanges.push(E),l=new vt(d,this._changeAnnotations),this._textEditChanges[R.uri]=l}return l}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var l=this._textEditChanges[w];if(!l){var d=[];this._workspaceEdit.changes[w]=d,l=new vt(d),this._textEditChanges[w]=l}return l}},g.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new yt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},g.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},g.prototype.createFile=function(w,R,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var d;x.is(R)||j.is(R)?d=R:l=R;var E,P;if(d===void 0?E=ke.create(w,l):(P=j.is(d)?d:this._changeAnnotations.manage(d),E=ke.create(w,l,P)),this._workspaceEdit.documentChanges.push(E),P!==void 0)return P},g.prototype.renameFile=function(w,R,l,d){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var E;x.is(l)||j.is(l)?E=l:d=l;var P,F;if(E===void 0?P=me.create(w,R,d):(F=j.is(E)?E:this._changeAnnotations.manage(E),P=me.create(w,R,d,F)),this._workspaceEdit.documentChanges.push(P),F!==void 0)return F},g.prototype.deleteFile=function(w,R,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var d;x.is(R)||j.is(R)?d=R:l=R;var E,P;if(d===void 0?E=tt.create(w,l):(P=j.is(d)?d:this._changeAnnotations.manage(d),E=tt.create(w,l,P)),this._workspaceEdit.documentChanges.push(E),P!==void 0)return P},g}();e.WorkspaceChange=_t;var Ke;(function(g){function w(l){return{uri:l}}g.create=w;function R(l){var d=l;return C.defined(d)&&C.string(d.uri)}g.is=R})(Ke=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Ct;(function(g){function w(l,d){return{uri:l,version:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&C.string(d.uri)&&C.integer(d.version)}g.is=R})(Ct=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var we;(function(g){function w(l,d){return{uri:l,version:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&C.string(d.uri)&&(d.version===null||C.integer(d.version))}g.is=R})(we=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var sr;(function(g){function w(l,d,E,P){return{uri:l,languageId:d,version:E,text:P}}g.create=w;function R(l){var d=l;return C.defined(d)&&C.string(d.uri)&&C.string(d.languageId)&&C.integer(d.version)&&C.string(d.text)}g.is=R})(sr=e.TextDocumentItem||(e.TextDocumentItem={}));var Pe;(function(g){g.PlainText="plaintext",g.Markdown="markdown"})(Pe=e.MarkupKind||(e.MarkupKind={})),function(g){function w(R){var l=R;return l===g.PlainText||l===g.Markdown}g.is=w}(Pe=e.MarkupKind||(e.MarkupKind={}));var Ve;(function(g){function w(R){var l=R;return C.objectLiteral(R)&&Pe.is(l.kind)&&C.string(l.value)}g.is=w})(Ve=e.MarkupContent||(e.MarkupContent={}));var dt;(function(g){g.Text=1,g.Method=2,g.Function=3,g.Constructor=4,g.Field=5,g.Variable=6,g.Class=7,g.Interface=8,g.Module=9,g.Property=10,g.Unit=11,g.Value=12,g.Enum=13,g.Keyword=14,g.Snippet=15,g.Color=16,g.File=17,g.Reference=18,g.Folder=19,g.EnumMember=20,g.Constant=21,g.Struct=22,g.Event=23,g.Operator=24,g.TypeParameter=25})(dt=e.CompletionItemKind||(e.CompletionItemKind={}));var It;(function(g){g.PlainText=1,g.Snippet=2})(It=e.InsertTextFormat||(e.InsertTextFormat={}));var Kr;(function(g){g.Deprecated=1})(Kr=e.CompletionItemTag||(e.CompletionItemTag={}));var or;(function(g){function w(l,d,E){return{newText:l,insert:d,replace:E}}g.create=w;function R(l){var d=l;return d&&C.string(d.newText)&&s.is(d.insert)&&s.is(d.replace)}g.is=R})(or=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var on;(function(g){g.asIs=1,g.adjustIndentation=2})(on=e.InsertTextMode||(e.InsertTextMode={}));var an;(function(g){function w(R){return{label:R}}g.create=w})(an=e.CompletionItem||(e.CompletionItem={}));var Vr;(function(g){function w(R,l){return{items:R||[],isIncomplete:!!l}}g.create=w})(Vr=e.CompletionList||(e.CompletionList={}));var Gr;(function(g){function w(l){return l.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}g.fromPlainText=w;function R(l){var d=l;return C.string(d)||C.objectLiteral(d)&&C.string(d.language)&&C.string(d.value)}g.is=R})(Gr=e.MarkedString||(e.MarkedString={}));var cn;(function(g){function w(R){var l=R;return!!l&&C.objectLiteral(l)&&(Ve.is(l.contents)||Gr.is(l.contents)||C.typedArray(l.contents,Gr.is))&&(R.range===void 0||s.is(R.range))}g.is=w})(cn=e.Hover||(e.Hover={}));var xn;(function(g){function w(R,l){return l?{label:R,documentation:l}:{label:R}}g.create=w})(xn=e.ParameterInformation||(e.ParameterInformation={}));var ni;(function(g){function w(R,l){for(var d=[],E=2;E<arguments.length;E++)d[E-2]=arguments[E];var P={label:R};return C.defined(l)&&(P.documentation=l),C.defined(d)?P.parameters=d:P.parameters=[],P}g.create=w})(ni=e.SignatureInformation||(e.SignatureInformation={}));var gr;(function(g){g.Text=1,g.Read=2,g.Write=3})(gr=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var qn;(function(g){function w(R,l){var d={range:R};return C.number(l)&&(d.kind=l),d}g.create=w})(qn=e.DocumentHighlight||(e.DocumentHighlight={}));var mr;(function(g){g.File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26})(mr=e.SymbolKind||(e.SymbolKind={}));var ii;(function(g){g.Deprecated=1})(ii=e.SymbolTag||(e.SymbolTag={}));var Ge;(function(g){function w(R,l,d,E,P){var F={name:R,kind:l,location:{uri:E,range:d}};return P&&(F.containerName=P),F}g.create=w})(Ge=e.SymbolInformation||(e.SymbolInformation={}));var Yt;(function(g){function w(l,d,E,P,F,z){var te={name:l,detail:d,kind:E,range:P,selectionRange:F};return z!==void 0&&(te.children=z),te}g.create=w;function R(l){var d=l;return d&&C.string(d.name)&&C.number(d.kind)&&s.is(d.range)&&s.is(d.selectionRange)&&(d.detail===void 0||C.string(d.detail))&&(d.deprecated===void 0||C.boolean(d.deprecated))&&(d.children===void 0||Array.isArray(d.children))&&(d.tags===void 0||Array.isArray(d.tags))}g.is=R})(Yt=e.DocumentSymbol||(e.DocumentSymbol={}));var On;(function(g){g.Empty="",g.QuickFix="quickfix",g.Refactor="refactor",g.RefactorExtract="refactor.extract",g.RefactorInline="refactor.inline",g.RefactorRewrite="refactor.rewrite",g.Source="source",g.SourceOrganizeImports="source.organizeImports",g.SourceFixAll="source.fixAll"})(On=e.CodeActionKind||(e.CodeActionKind={}));var si;(function(g){function w(l,d){var E={diagnostics:l};return d!=null&&(E.only=d),E}g.create=w;function R(l){var d=l;return C.defined(d)&&C.typedArray(d.diagnostics,k.is)&&(d.only===void 0||C.typedArray(d.only,C.string))}g.is=R})(si=e.CodeActionContext||(e.CodeActionContext={}));var vr;(function(g){function w(l,d,E){var P={title:l},F=!0;return typeof d=="string"?(F=!1,P.kind=d):D.is(d)?P.command=d:P.edit=d,F&&E!==void 0&&(P.kind=E),P}g.create=w;function R(l){var d=l;return d&&C.string(d.title)&&(d.diagnostics===void 0||C.typedArray(d.diagnostics,k.is))&&(d.kind===void 0||C.string(d.kind))&&(d.edit!==void 0||d.command!==void 0)&&(d.command===void 0||D.is(d.command))&&(d.isPreferred===void 0||C.boolean(d.isPreferred))&&(d.edit===void 0||ze.is(d.edit))}g.is=R})(vr=e.CodeAction||(e.CodeAction={}));var kn;(function(g){function w(l,d){var E={range:l};return C.defined(d)&&(E.data=d),E}g.create=w;function R(l){var d=l;return C.defined(d)&&s.is(d.range)&&(C.undefined(d.command)||D.is(d.command))}g.is=R})(kn=e.CodeLens||(e.CodeLens={}));var un;(function(g){function w(l,d){return{tabSize:l,insertSpaces:d}}g.create=w;function R(l){var d=l;return C.defined(d)&&C.uinteger(d.tabSize)&&C.boolean(d.insertSpaces)}g.is=R})(un=e.FormattingOptions||(e.FormattingOptions={}));var yr;(function(g){function w(l,d,E){return{range:l,target:d,data:E}}g.create=w;function R(l){var d=l;return C.defined(d)&&s.is(d.range)&&(C.undefined(d.target)||C.string(d.target))}g.is=R})(yr=e.DocumentLink||(e.DocumentLink={}));var ln;(function(g){function w(l,d){return{range:l,parent:d}}g.create=w;function R(l){var d=l;return d!==void 0&&s.is(d.range)&&(d.parent===void 0||g.is(d.parent))}g.is=R})(ln=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var _r;(function(g){function w(E,P,F,z){return new T(E,P,F,z)}g.create=w;function R(E){var P=E;return!!(C.defined(P)&&C.string(P.uri)&&(C.undefined(P.languageId)||C.string(P.languageId))&&C.uinteger(P.lineCount)&&C.func(P.getText)&&C.func(P.positionAt)&&C.func(P.offsetAt))}g.is=R;function l(E,P){for(var F=E.getText(),z=d(P,function(An,oi){var La=An.range.start.line-oi.range.start.line;return La===0?An.range.start.character-oi.range.start.character:La}),te=F.length,ye=z.length-1;ye>=0;ye--){var Xe=z[ye],Ye=E.offsetAt(Xe.range.start),ae=E.offsetAt(Xe.range.end);if(ae<=te)F=F.substring(0,Ye)+Xe.newText+F.substring(ae,F.length);else throw new Error("Overlapping edit");te=Ye}return F}g.applyEdits=l;function d(E,P){if(E.length<=1)return E;var F=E.length/2|0,z=E.slice(0,F),te=E.slice(F);d(z,P),d(te,P);for(var ye=0,Xe=0,Ye=0;ye<z.length&&Xe<te.length;){var ae=P(z[ye],te[Xe]);ae<=0?E[Ye++]=z[ye++]:E[Ye++]=te[Xe++]}for(;ye<z.length;)E[Ye++]=z[ye++];for(;Xe<te.length;)E[Ye++]=te[Xe++];return E}})(_r=e.TextDocument||(e.TextDocument={}));var T=function(){function g(w,R,l,d){this._uri=w,this._languageId=R,this._version=l,this._content=d,this._lineOffsets=void 0}return Object.defineProperty(g.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),g.prototype.getText=function(w){if(w){var R=this.offsetAt(w.start),l=this.offsetAt(w.end);return this._content.substring(R,l)}return this._content},g.prototype.update=function(w,R){this._content=w.text,this._version=R,this._lineOffsets=void 0},g.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var w=[],R=this._content,l=!0,d=0;d<R.length;d++){l&&(w.push(d),l=!1);var E=R.charAt(d);l=E==="\r"||E===`
`,E==="\r"&&d+1<R.length&&R.charAt(d+1)===`
`&&d++}l&&R.length>0&&w.push(R.length),this._lineOffsets=w}return this._lineOffsets},g.prototype.positionAt=function(w){w=Math.max(Math.min(w,this._content.length),0);var R=this.getLineOffsets(),l=0,d=R.length;if(d===0)return i.create(0,w);for(;l<d;){var E=Math.floor((l+d)/2);R[E]>w?d=E:l=E+1}var P=l-1;return i.create(P,w-R[P])},g.prototype.offsetAt=function(w){var R=this.getLineOffsets();if(w.line>=R.length)return this._content.length;if(w.line<0)return 0;var l=R[w.line],d=w.line+1<R.length?R[w.line+1]:this._content.length;return Math.max(Math.min(l+w.character,d),l)},Object.defineProperty(g.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),g}(),C;(function(g){var w=Object.prototype.toString;function R(ae){return typeof ae<"u"}g.defined=R;function l(ae){return typeof ae>"u"}g.undefined=l;function d(ae){return ae===!0||ae===!1}g.boolean=d;function E(ae){return w.call(ae)==="[object String]"}g.string=E;function P(ae){return w.call(ae)==="[object Number]"}g.number=P;function F(ae,An,oi){return w.call(ae)==="[object Number]"&&An<=ae&&ae<=oi}g.numberRange=F;function z(ae){return w.call(ae)==="[object Number]"&&-2147483648<=ae&&ae<=2147483647}g.integer=z;function te(ae){return w.call(ae)==="[object Number]"&&0<=ae&&ae<=2147483647}g.uinteger=te;function ye(ae){return w.call(ae)==="[object Function]"}g.func=ye;function Xe(ae){return ae!==null&&typeof ae=="object"}g.objectLiteral=Xe;function Ye(ae,An){return Array.isArray(ae)&&ae.every(An)}g.typedArray=Ye})(C||(C={}))})});var gt=v(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.ProtocolNotificationType=xr.ProtocolNotificationType0=xr.ProtocolRequestType=xr.ProtocolRequestType0=xr.RegistrationType=void 0;var Zs=Js(),wh=class{constructor(e){this.method=e}};xr.RegistrationType=wh;var bh=class extends Zs.RequestType0{constructor(e){super(e)}};xr.ProtocolRequestType0=bh;var Eh=class extends Zs.RequestType{constructor(e){super(e,Zs.ParameterStructures.byName)}};xr.ProtocolRequestType=Eh;var Sh=class extends Zs.NotificationType0{constructor(e){super(e)}};xr.ProtocolNotificationType0=Sh;var Th=class extends Zs.NotificationType{constructor(e){super(e,Zs.ParameterStructures.byName)}};xr.ProtocolNotificationType=Th});var sT=v(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.objectLiteral=ot.typedArray=ot.stringArray=ot.array=ot.func=ot.error=ot.number=ot.string=ot.boolean=void 0;function TF(t){return t===!0||t===!1}ot.boolean=TF;function nT(t){return typeof t=="string"||t instanceof String}ot.string=nT;function RF(t){return typeof t=="number"||t instanceof Number}ot.number=RF;function DF(t){return t instanceof Error}ot.error=DF;function PF(t){return typeof t=="function"}ot.func=PF;function iT(t){return Array.isArray(t)}ot.array=iT;function IF(t){return iT(t)&&t.every(e=>nT(e))}ot.stringArray=IF;function xF(t,e){return Array.isArray(t)&&t.every(e)}ot.typedArray=xF;function qF(t){return t!==null&&typeof t=="object"}ot.objectLiteral=qF});var oT=v(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.ImplementationRequest=void 0;var OF=gt(),kF;(function(t){t.method="textDocument/implementation",t.type=new OF.ProtocolRequestType(t.method)})(kF=_a.ImplementationRequest||(_a.ImplementationRequest={}))});var aT=v(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.TypeDefinitionRequest=void 0;var AF=gt(),NF;(function(t){t.method="textDocument/typeDefinition",t.type=new AF.ProtocolRequestType(t.method)})(NF=Ca.TypeDefinitionRequest||(Ca.TypeDefinitionRequest={}))});var uT=v(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.DidChangeWorkspaceFoldersNotification=Xn.WorkspaceFoldersRequest=void 0;var cT=gt(),LF;(function(t){t.type=new cT.ProtocolRequestType0("workspace/workspaceFolders")})(LF=Xn.WorkspaceFoldersRequest||(Xn.WorkspaceFoldersRequest={}));var MF;(function(t){t.type=new cT.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(MF=Xn.DidChangeWorkspaceFoldersNotification||(Xn.DidChangeWorkspaceFoldersNotification={}))});var lT=v(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.ConfigurationRequest=void 0;var FF=gt(),jF;(function(t){t.type=new FF.ProtocolRequestType("workspace/configuration")})(jF=wa.ConfigurationRequest||(wa.ConfigurationRequest={}))});var fT=v(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ColorPresentationRequest=Yn.DocumentColorRequest=void 0;var dT=gt(),$F;(function(t){t.method="textDocument/documentColor",t.type=new dT.ProtocolRequestType(t.method)})($F=Yn.DocumentColorRequest||(Yn.DocumentColorRequest={}));var HF;(function(t){t.type=new dT.ProtocolRequestType("textDocument/colorPresentation")})(HF=Yn.ColorPresentationRequest||(Yn.ColorPresentationRequest={}))});var pT=v(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.FoldingRangeRequest=Qn.FoldingRangeKind=void 0;var BF=gt(),UF;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(UF=Qn.FoldingRangeKind||(Qn.FoldingRangeKind={}));var WF;(function(t){t.method="textDocument/foldingRange",t.type=new BF.ProtocolRequestType(t.method)})(WF=Qn.FoldingRangeRequest||(Qn.FoldingRangeRequest={}))});var hT=v(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.DeclarationRequest=void 0;var zF=gt(),KF;(function(t){t.method="textDocument/declaration",t.type=new zF.ProtocolRequestType(t.method)})(KF=ba.DeclarationRequest||(ba.DeclarationRequest={}))});var gT=v(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.SelectionRangeRequest=void 0;var VF=gt(),GF;(function(t){t.method="textDocument/selectionRange",t.type=new VF.ProtocolRequestType(t.method)})(GF=Ea.SelectionRangeRequest||(Ea.SelectionRangeRequest={}))});var vT=v(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.WorkDoneProgressCancelNotification=Hr.WorkDoneProgressCreateRequest=Hr.WorkDoneProgress=void 0;var XF=Js(),mT=gt(),YF;(function(t){t.type=new XF.ProgressType;function e(r){return r===t.type}t.is=e})(YF=Hr.WorkDoneProgress||(Hr.WorkDoneProgress={}));var QF;(function(t){t.type=new mT.ProtocolRequestType("window/workDoneProgress/create")})(QF=Hr.WorkDoneProgressCreateRequest||(Hr.WorkDoneProgressCreateRequest={}));var JF;(function(t){t.type=new mT.ProtocolNotificationType("window/workDoneProgress/cancel")})(JF=Hr.WorkDoneProgressCancelNotification||(Hr.WorkDoneProgressCancelNotification={}))});var yT=v(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.CallHierarchyOutgoingCallsRequest=Br.CallHierarchyIncomingCallsRequest=Br.CallHierarchyPrepareRequest=void 0;var Rh=gt(),ZF;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Rh.ProtocolRequestType(t.method)})(ZF=Br.CallHierarchyPrepareRequest||(Br.CallHierarchyPrepareRequest={}));var ej;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Rh.ProtocolRequestType(t.method)})(ej=Br.CallHierarchyIncomingCallsRequest||(Br.CallHierarchyIncomingCallsRequest={}));var tj;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Rh.ProtocolRequestType(t.method)})(tj=Br.CallHierarchyOutgoingCallsRequest||(Br.CallHierarchyOutgoingCallsRequest={}))});var _T=v(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.SemanticTokensRefreshRequest=Ce.SemanticTokensRangeRequest=Ce.SemanticTokensDeltaRequest=Ce.SemanticTokensRequest=Ce.SemanticTokensRegistrationType=Ce.TokenFormat=Ce.SemanticTokens=Ce.SemanticTokenModifiers=Ce.SemanticTokenTypes=void 0;var Sa=gt(),rj;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(rj=Ce.SemanticTokenTypes||(Ce.SemanticTokenTypes={}));var nj;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(nj=Ce.SemanticTokenModifiers||(Ce.SemanticTokenModifiers={}));var ij;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(ij=Ce.SemanticTokens||(Ce.SemanticTokens={}));var sj;(function(t){t.Relative="relative"})(sj=Ce.TokenFormat||(Ce.TokenFormat={}));var oj;(function(t){t.method="textDocument/semanticTokens",t.type=new Sa.RegistrationType(t.method)})(oj=Ce.SemanticTokensRegistrationType||(Ce.SemanticTokensRegistrationType={}));var aj;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Sa.ProtocolRequestType(t.method)})(aj=Ce.SemanticTokensRequest||(Ce.SemanticTokensRequest={}));var cj;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Sa.ProtocolRequestType(t.method)})(cj=Ce.SemanticTokensDeltaRequest||(Ce.SemanticTokensDeltaRequest={}));var uj;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Sa.ProtocolRequestType(t.method)})(uj=Ce.SemanticTokensRangeRequest||(Ce.SemanticTokensRangeRequest={}));var lj;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Sa.ProtocolRequestType0(t.method)})(lj=Ce.SemanticTokensRefreshRequest||(Ce.SemanticTokensRefreshRequest={}))});var CT=v(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.ShowDocumentRequest=void 0;var dj=gt(),fj;(function(t){t.method="window/showDocument",t.type=new dj.ProtocolRequestType(t.method)})(fj=Ta.ShowDocumentRequest||(Ta.ShowDocumentRequest={}))});var wT=v(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.LinkedEditingRangeRequest=void 0;var pj=gt(),hj;(function(t){t.method="textDocument/linkedEditingRange",t.type=new pj.ProtocolRequestType(t.method)})(hj=Ra.LinkedEditingRangeRequest||(Ra.LinkedEditingRangeRequest={}))});var bT=v($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WillDeleteFilesRequest=$e.DidDeleteFilesNotification=$e.DidRenameFilesNotification=$e.WillRenameFilesRequest=$e.DidCreateFilesNotification=$e.WillCreateFilesRequest=$e.FileOperationPatternKind=void 0;var eo=gt(),gj;(function(t){t.file="file",t.folder="folder"})(gj=$e.FileOperationPatternKind||($e.FileOperationPatternKind={}));var mj;(function(t){t.method="workspace/willCreateFiles",t.type=new eo.ProtocolRequestType(t.method)})(mj=$e.WillCreateFilesRequest||($e.WillCreateFilesRequest={}));var vj;(function(t){t.method="workspace/didCreateFiles",t.type=new eo.ProtocolNotificationType(t.method)})(vj=$e.DidCreateFilesNotification||($e.DidCreateFilesNotification={}));var yj;(function(t){t.method="workspace/willRenameFiles",t.type=new eo.ProtocolRequestType(t.method)})(yj=$e.WillRenameFilesRequest||($e.WillRenameFilesRequest={}));var _j;(function(t){t.method="workspace/didRenameFiles",t.type=new eo.ProtocolNotificationType(t.method)})(_j=$e.DidRenameFilesNotification||($e.DidRenameFilesNotification={}));var Cj;(function(t){t.method="workspace/didDeleteFiles",t.type=new eo.ProtocolNotificationType(t.method)})(Cj=$e.DidDeleteFilesNotification||($e.DidDeleteFilesNotification={}));var wj;(function(t){t.method="workspace/willDeleteFiles",t.type=new eo.ProtocolRequestType(t.method)})(wj=$e.WillDeleteFilesRequest||($e.WillDeleteFilesRequest={}))});var ET=v(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.MonikerRequest=Ur.MonikerKind=Ur.UniquenessLevel=void 0;var bj=gt(),Ej;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Ej=Ur.UniquenessLevel||(Ur.UniquenessLevel={}));var Sj;(function(t){t.import="import",t.export="export",t.local="local"})(Sj=Ur.MonikerKind||(Ur.MonikerKind={}));var Tj;(function(t){t.method="textDocument/moniker",t.type=new bj.ProtocolRequestType(t.method)})(Tj=Ur.MonikerRequest||(Ur.MonikerRequest={}))});var PT=v(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.DocumentLinkRequest=_.CodeLensRefreshRequest=_.CodeLensResolveRequest=_.CodeLensRequest=_.WorkspaceSymbolRequest=_.CodeActionResolveRequest=_.CodeActionRequest=_.DocumentSymbolRequest=_.DocumentHighlightRequest=_.ReferencesRequest=_.DefinitionRequest=_.SignatureHelpRequest=_.SignatureHelpTriggerKind=_.HoverRequest=_.CompletionResolveRequest=_.CompletionRequest=_.CompletionTriggerKind=_.PublishDiagnosticsNotification=_.WatchKind=_.FileChangeType=_.DidChangeWatchedFilesNotification=_.WillSaveTextDocumentWaitUntilRequest=_.WillSaveTextDocumentNotification=_.TextDocumentSaveReason=_.DidSaveTextDocumentNotification=_.DidCloseTextDocumentNotification=_.DidChangeTextDocumentNotification=_.TextDocumentContentChangeEvent=_.DidOpenTextDocumentNotification=_.TextDocumentSyncKind=_.TelemetryEventNotification=_.LogMessageNotification=_.ShowMessageRequest=_.ShowMessageNotification=_.MessageType=_.DidChangeConfigurationNotification=_.ExitNotification=_.ShutdownRequest=_.InitializedNotification=_.InitializeError=_.InitializeRequest=_.WorkDoneProgressOptions=_.TextDocumentRegistrationOptions=_.StaticRegistrationOptions=_.FailureHandlingKind=_.ResourceOperationKind=_.UnregistrationRequest=_.RegistrationRequest=_.DocumentSelector=_.DocumentFilter=void 0;_.MonikerRequest=_.MonikerKind=_.UniquenessLevel=_.WillDeleteFilesRequest=_.DidDeleteFilesNotification=_.WillRenameFilesRequest=_.DidRenameFilesNotification=_.WillCreateFilesRequest=_.DidCreateFilesNotification=_.FileOperationPatternKind=_.LinkedEditingRangeRequest=_.ShowDocumentRequest=_.SemanticTokensRegistrationType=_.SemanticTokensRefreshRequest=_.SemanticTokensRangeRequest=_.SemanticTokensDeltaRequest=_.SemanticTokensRequest=_.TokenFormat=_.SemanticTokens=_.SemanticTokenModifiers=_.SemanticTokenTypes=_.CallHierarchyPrepareRequest=_.CallHierarchyOutgoingCallsRequest=_.CallHierarchyIncomingCallsRequest=_.WorkDoneProgressCancelNotification=_.WorkDoneProgressCreateRequest=_.WorkDoneProgress=_.SelectionRangeRequest=_.DeclarationRequest=_.FoldingRangeRequest=_.ColorPresentationRequest=_.DocumentColorRequest=_.ConfigurationRequest=_.DidChangeWorkspaceFoldersNotification=_.WorkspaceFoldersRequest=_.TypeDefinitionRequest=_.ImplementationRequest=_.ApplyWorkspaceEditRequest=_.ExecuteCommandRequest=_.PrepareRenameRequest=_.RenameRequest=_.PrepareSupportDefaultBehavior=_.DocumentOnTypeFormattingRequest=_.DocumentRangeFormattingRequest=_.DocumentFormattingRequest=_.DocumentLinkResolveRequest=void 0;var Jn=sT(),re=gt(),Rj=oT();Object.defineProperty(_,"ImplementationRequest",{enumerable:!0,get:function(){return Rj.ImplementationRequest}});var Dj=aT();Object.defineProperty(_,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Dj.TypeDefinitionRequest}});var ST=uT();Object.defineProperty(_,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return ST.WorkspaceFoldersRequest}});Object.defineProperty(_,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return ST.DidChangeWorkspaceFoldersNotification}});var Pj=lT();Object.defineProperty(_,"ConfigurationRequest",{enumerable:!0,get:function(){return Pj.ConfigurationRequest}});var TT=fT();Object.defineProperty(_,"DocumentColorRequest",{enumerable:!0,get:function(){return TT.DocumentColorRequest}});Object.defineProperty(_,"ColorPresentationRequest",{enumerable:!0,get:function(){return TT.ColorPresentationRequest}});var Ij=pT();Object.defineProperty(_,"FoldingRangeRequest",{enumerable:!0,get:function(){return Ij.FoldingRangeRequest}});var xj=hT();Object.defineProperty(_,"DeclarationRequest",{enumerable:!0,get:function(){return xj.DeclarationRequest}});var qj=gT();Object.defineProperty(_,"SelectionRangeRequest",{enumerable:!0,get:function(){return qj.SelectionRangeRequest}});var Dh=vT();Object.defineProperty(_,"WorkDoneProgress",{enumerable:!0,get:function(){return Dh.WorkDoneProgress}});Object.defineProperty(_,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Dh.WorkDoneProgressCreateRequest}});Object.defineProperty(_,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Dh.WorkDoneProgressCancelNotification}});var Ph=yT();Object.defineProperty(_,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ph.CallHierarchyIncomingCallsRequest}});Object.defineProperty(_,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ph.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(_,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ph.CallHierarchyPrepareRequest}});var Dn=_T();Object.defineProperty(_,"SemanticTokenTypes",{enumerable:!0,get:function(){return Dn.SemanticTokenTypes}});Object.defineProperty(_,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Dn.SemanticTokenModifiers}});Object.defineProperty(_,"SemanticTokens",{enumerable:!0,get:function(){return Dn.SemanticTokens}});Object.defineProperty(_,"TokenFormat",{enumerable:!0,get:function(){return Dn.TokenFormat}});Object.defineProperty(_,"SemanticTokensRequest",{enumerable:!0,get:function(){return Dn.SemanticTokensRequest}});Object.defineProperty(_,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Dn.SemanticTokensDeltaRequest}});Object.defineProperty(_,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Dn.SemanticTokensRangeRequest}});Object.defineProperty(_,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Dn.SemanticTokensRefreshRequest}});Object.defineProperty(_,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Dn.SemanticTokensRegistrationType}});var Oj=CT();Object.defineProperty(_,"ShowDocumentRequest",{enumerable:!0,get:function(){return Oj.ShowDocumentRequest}});var kj=wT();Object.defineProperty(_,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return kj.LinkedEditingRangeRequest}});var Hi=bT();Object.defineProperty(_,"FileOperationPatternKind",{enumerable:!0,get:function(){return Hi.FileOperationPatternKind}});Object.defineProperty(_,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Hi.DidCreateFilesNotification}});Object.defineProperty(_,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Hi.WillCreateFilesRequest}});Object.defineProperty(_,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Hi.DidRenameFilesNotification}});Object.defineProperty(_,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Hi.WillRenameFilesRequest}});Object.defineProperty(_,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Hi.DidDeleteFilesNotification}});Object.defineProperty(_,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Hi.WillDeleteFilesRequest}});var Ih=ET();Object.defineProperty(_,"UniquenessLevel",{enumerable:!0,get:function(){return Ih.UniquenessLevel}});Object.defineProperty(_,"MonikerKind",{enumerable:!0,get:function(){return Ih.MonikerKind}});Object.defineProperty(_,"MonikerRequest",{enumerable:!0,get:function(){return Ih.MonikerRequest}});var RT;(function(t){function e(r){let n=r;return Jn.string(n.language)||Jn.string(n.scheme)||Jn.string(n.pattern)}t.is=e})(RT=_.DocumentFilter||(_.DocumentFilter={}));var DT;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Jn.string(n)&&!RT.is(n))return!1;return!0}t.is=e})(DT=_.DocumentSelector||(_.DocumentSelector={}));var Aj;(function(t){t.type=new re.ProtocolRequestType("client/registerCapability")})(Aj=_.RegistrationRequest||(_.RegistrationRequest={}));var Nj;(function(t){t.type=new re.ProtocolRequestType("client/unregisterCapability")})(Nj=_.UnregistrationRequest||(_.UnregistrationRequest={}));var Lj;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Lj=_.ResourceOperationKind||(_.ResourceOperationKind={}));var Mj;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Mj=_.FailureHandlingKind||(_.FailureHandlingKind={}));var Fj;(function(t){function e(r){let n=r;return n&&Jn.string(n.id)&&n.id.length>0}t.hasId=e})(Fj=_.StaticRegistrationOptions||(_.StaticRegistrationOptions={}));var jj;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||DT.is(n.documentSelector))}t.is=e})(jj=_.TextDocumentRegistrationOptions||(_.TextDocumentRegistrationOptions={}));var $j;(function(t){function e(n){let i=n;return Jn.objectLiteral(i)&&(i.workDoneProgress===void 0||Jn.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&Jn.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})($j=_.WorkDoneProgressOptions||(_.WorkDoneProgressOptions={}));var Hj;(function(t){t.type=new re.ProtocolRequestType("initialize")})(Hj=_.InitializeRequest||(_.InitializeRequest={}));var Bj;(function(t){t.unknownProtocolVersion=1})(Bj=_.InitializeError||(_.InitializeError={}));var Uj;(function(t){t.type=new re.ProtocolNotificationType("initialized")})(Uj=_.InitializedNotification||(_.InitializedNotification={}));var Wj;(function(t){t.type=new re.ProtocolRequestType0("shutdown")})(Wj=_.ShutdownRequest||(_.ShutdownRequest={}));var zj;(function(t){t.type=new re.ProtocolNotificationType0("exit")})(zj=_.ExitNotification||(_.ExitNotification={}));var Kj;(function(t){t.type=new re.ProtocolNotificationType("workspace/didChangeConfiguration")})(Kj=_.DidChangeConfigurationNotification||(_.DidChangeConfigurationNotification={}));var Vj;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Vj=_.MessageType||(_.MessageType={}));var Gj;(function(t){t.type=new re.ProtocolNotificationType("window/showMessage")})(Gj=_.ShowMessageNotification||(_.ShowMessageNotification={}));var Xj;(function(t){t.type=new re.ProtocolRequestType("window/showMessageRequest")})(Xj=_.ShowMessageRequest||(_.ShowMessageRequest={}));var Yj;(function(t){t.type=new re.ProtocolNotificationType("window/logMessage")})(Yj=_.LogMessageNotification||(_.LogMessageNotification={}));var Qj;(function(t){t.type=new re.ProtocolNotificationType("telemetry/event")})(Qj=_.TelemetryEventNotification||(_.TelemetryEventNotification={}));var Jj;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Jj=_.TextDocumentSyncKind||(_.TextDocumentSyncKind={}));var Zj;(function(t){t.method="textDocument/didOpen",t.type=new re.ProtocolNotificationType(t.method)})(Zj=_.DidOpenTextDocumentNotification||(_.DidOpenTextDocumentNotification={}));var e2;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(e2=_.TextDocumentContentChangeEvent||(_.TextDocumentContentChangeEvent={}));var t2;(function(t){t.method="textDocument/didChange",t.type=new re.ProtocolNotificationType(t.method)})(t2=_.DidChangeTextDocumentNotification||(_.DidChangeTextDocumentNotification={}));var r2;(function(t){t.method="textDocument/didClose",t.type=new re.ProtocolNotificationType(t.method)})(r2=_.DidCloseTextDocumentNotification||(_.DidCloseTextDocumentNotification={}));var n2;(function(t){t.method="textDocument/didSave",t.type=new re.ProtocolNotificationType(t.method)})(n2=_.DidSaveTextDocumentNotification||(_.DidSaveTextDocumentNotification={}));var i2;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(i2=_.TextDocumentSaveReason||(_.TextDocumentSaveReason={}));var s2;(function(t){t.method="textDocument/willSave",t.type=new re.ProtocolNotificationType(t.method)})(s2=_.WillSaveTextDocumentNotification||(_.WillSaveTextDocumentNotification={}));var o2;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new re.ProtocolRequestType(t.method)})(o2=_.WillSaveTextDocumentWaitUntilRequest||(_.WillSaveTextDocumentWaitUntilRequest={}));var a2;(function(t){t.type=new re.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(a2=_.DidChangeWatchedFilesNotification||(_.DidChangeWatchedFilesNotification={}));var c2;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(c2=_.FileChangeType||(_.FileChangeType={}));var u2;(function(t){t.Create=1,t.Change=2,t.Delete=4})(u2=_.WatchKind||(_.WatchKind={}));var l2;(function(t){t.type=new re.ProtocolNotificationType("textDocument/publishDiagnostics")})(l2=_.PublishDiagnosticsNotification||(_.PublishDiagnosticsNotification={}));var d2;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(d2=_.CompletionTriggerKind||(_.CompletionTriggerKind={}));var f2;(function(t){t.method="textDocument/completion",t.type=new re.ProtocolRequestType(t.method)})(f2=_.CompletionRequest||(_.CompletionRequest={}));var p2;(function(t){t.method="completionItem/resolve",t.type=new re.ProtocolRequestType(t.method)})(p2=_.CompletionResolveRequest||(_.CompletionResolveRequest={}));var h2;(function(t){t.method="textDocument/hover",t.type=new re.ProtocolRequestType(t.method)})(h2=_.HoverRequest||(_.HoverRequest={}));var g2;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(g2=_.SignatureHelpTriggerKind||(_.SignatureHelpTriggerKind={}));var m2;(function(t){t.method="textDocument/signatureHelp",t.type=new re.ProtocolRequestType(t.method)})(m2=_.SignatureHelpRequest||(_.SignatureHelpRequest={}));var v2;(function(t){t.method="textDocument/definition",t.type=new re.ProtocolRequestType(t.method)})(v2=_.DefinitionRequest||(_.DefinitionRequest={}));var y2;(function(t){t.method="textDocument/references",t.type=new re.ProtocolRequestType(t.method)})(y2=_.ReferencesRequest||(_.ReferencesRequest={}));var _2;(function(t){t.method="textDocument/documentHighlight",t.type=new re.ProtocolRequestType(t.method)})(_2=_.DocumentHighlightRequest||(_.DocumentHighlightRequest={}));var C2;(function(t){t.method="textDocument/documentSymbol",t.type=new re.ProtocolRequestType(t.method)})(C2=_.DocumentSymbolRequest||(_.DocumentSymbolRequest={}));var w2;(function(t){t.method="textDocument/codeAction",t.type=new re.ProtocolRequestType(t.method)})(w2=_.CodeActionRequest||(_.CodeActionRequest={}));var b2;(function(t){t.method="codeAction/resolve",t.type=new re.ProtocolRequestType(t.method)})(b2=_.CodeActionResolveRequest||(_.CodeActionResolveRequest={}));var E2;(function(t){t.method="workspace/symbol",t.type=new re.ProtocolRequestType(t.method)})(E2=_.WorkspaceSymbolRequest||(_.WorkspaceSymbolRequest={}));var S2;(function(t){t.method="textDocument/codeLens",t.type=new re.ProtocolRequestType(t.method)})(S2=_.CodeLensRequest||(_.CodeLensRequest={}));var T2;(function(t){t.method="codeLens/resolve",t.type=new re.ProtocolRequestType(t.method)})(T2=_.CodeLensResolveRequest||(_.CodeLensResolveRequest={}));var R2;(function(t){t.method="workspace/codeLens/refresh",t.type=new re.ProtocolRequestType0(t.method)})(R2=_.CodeLensRefreshRequest||(_.CodeLensRefreshRequest={}));var D2;(function(t){t.method="textDocument/documentLink",t.type=new re.ProtocolRequestType(t.method)})(D2=_.DocumentLinkRequest||(_.DocumentLinkRequest={}));var P2;(function(t){t.method="documentLink/resolve",t.type=new re.ProtocolRequestType(t.method)})(P2=_.DocumentLinkResolveRequest||(_.DocumentLinkResolveRequest={}));var I2;(function(t){t.method="textDocument/formatting",t.type=new re.ProtocolRequestType(t.method)})(I2=_.DocumentFormattingRequest||(_.DocumentFormattingRequest={}));var x2;(function(t){t.method="textDocument/rangeFormatting",t.type=new re.ProtocolRequestType(t.method)})(x2=_.DocumentRangeFormattingRequest||(_.DocumentRangeFormattingRequest={}));var q2;(function(t){t.method="textDocument/onTypeFormatting",t.type=new re.ProtocolRequestType(t.method)})(q2=_.DocumentOnTypeFormattingRequest||(_.DocumentOnTypeFormattingRequest={}));var O2;(function(t){t.Identifier=1})(O2=_.PrepareSupportDefaultBehavior||(_.PrepareSupportDefaultBehavior={}));var k2;(function(t){t.method="textDocument/rename",t.type=new re.ProtocolRequestType(t.method)})(k2=_.RenameRequest||(_.RenameRequest={}));var A2;(function(t){t.method="textDocument/prepareRename",t.type=new re.ProtocolRequestType(t.method)})(A2=_.PrepareRenameRequest||(_.PrepareRenameRequest={}));var N2;(function(t){t.type=new re.ProtocolRequestType("workspace/executeCommand")})(N2=_.ExecuteCommandRequest||(_.ExecuteCommandRequest={}));var L2;(function(t){t.type=new re.ProtocolRequestType("workspace/applyEdit")})(L2=_.ApplyWorkspaceEditRequest||(_.ApplyWorkspaceEditRequest={}))});var xT=v(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.createProtocolConnection=void 0;var IT=Js();function M2(t,e,r,n){return IT.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),IT.createMessageConnection(t,e,r,n)}zu.createProtocolConnection=M2});var qT=v(Vt=>{"use strict";var F2=Vt&&Vt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ku=Vt&&Vt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&F2(e,t,r)};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.LSPErrorCodes=Vt.createProtocolConnection=void 0;Ku(Js(),Vt);Ku(rT(),Vt);Ku(gt(),Vt);Ku(PT(),Vt);var j2=xT();Object.defineProperty(Vt,"createProtocolConnection",{enumerable:!0,get:function(){return j2.createProtocolConnection}});var $2;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})($2=Vt.LSPErrorCodes||(Vt.LSPErrorCodes={}))});var He=v(nn=>{"use strict";var H2=nn&&nn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OT=nn&&nn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H2(e,t,r)};Object.defineProperty(nn,"__esModule",{value:!0});nn.createProtocolConnection=void 0;var B2=Ch();OT(Ch(),nn);OT(qT(),nn);function U2(t,e,r,n){return B2.createMessageConnection(t,e,r,n)}nn.createProtocolConnection=U2});var Oh=v(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.toJSONObject=ro.ConfigurationFeature=void 0;var xh=require("vscode"),W2=He(),qh=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(W2.ConfigurationRequest.type,(r,n)=>{let i=o=>{let a=[];for(let c of o.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=to(xh.workspace.getConfiguration(void 0,e).get(r));else{let s=xh.workspace.getConfiguration(r.substr(0,i),e);s&&(n=to(s.get(r.substr(i+1))))}}else{let i=xh.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=to(i.get(s)))}return n===void 0&&(n=null),n}dispose(){}};ro.ConfigurationFeature=qh;function to(t){if(t){if(Array.isArray(t))return t.map(to);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=to(t[r]));return e}}return t}ro.toJSONObject=to});var Nh=v(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});var z2=require("vscode"),kh=class extends z2.CompletionItem{constructor(e){super(e)}};Ah.default=kh});var Fh=v(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});var K2=require("vscode"),Lh=class extends K2.CodeLens{constructor(e){super(e)}};Mh.default=Lh});var Hh=v($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});var V2=require("vscode"),jh=class extends V2.DocumentLink{constructor(e,r){super(e,r)}};$h.default=jh});var Wh=v(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});var G2=require("vscode"),Bh=class extends G2.CodeAction{constructor(e,r){super(e),this.data=r}};Uh.default=Bh});var Vh=v(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.ProtocolDiagnostic=Bi.DiagnosticCode=void 0;var X2=require("vscode"),zh=Vn(),Y2;(function(t){function e(r){let n=r;return n!=null&&(zh.number(n.value)||zh.string(n.value))&&zh.string(n.target)}t.is=e})(Y2=Bi.DiagnosticCode||(Bi.DiagnosticCode={}));var Kh=class extends X2.Diagnostic{constructor(e,r,n,i){super(e,r,n),this.data=i,this.hasDiagnosticCode=!1}};Bi.ProtocolDiagnostic=Kh});var Yh=v(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});var Q2=require("vscode"),Gh=class extends Q2.CallHierarchyItem{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,o),a!==void 0&&(this.data=a)}};Xh.default=Gh});var AT=v(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.createConverter=void 0;var mt=require("vscode"),ve=He(),Da=Vn(),J2=Nh(),Z2=Fh(),e$=Hh(),t$=Wh(),kT=Vh(),r$=Yh(),n$=He(),Qh;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(Qh||(Qh={}));function i$(t){let r=t||(l=>l.toString());function n(l){return r(l)}function i(l){return{uri:r(l.uri)}}function s(l){return{uri:r(l.uri),version:l.version}}function o(l){return{textDocument:{uri:r(l.uri),languageId:l.languageId,version:l.version,text:l.getText()}}}function a(l){let d=l;return!!d.document&&!!d.contentChanges}function c(l){let d=l;return!!d.uri&&!!d.version}function u(l){if(c(l))return{textDocument:{uri:r(l.uri),version:l.version},contentChanges:[{text:l.getText()}]};if(a(l)){let d=l.document;return{textDocument:{uri:r(d.uri),version:d.version},contentChanges:l.contentChanges.map(P=>{let F=P.range;return{range:{start:{line:F.start.line,character:F.start.character},end:{line:F.end.line,character:F.end.character}},rangeLength:P.rangeLength,text:P.text}})}}else throw Error("Unsupported text document change parameter")}function f(l){return{textDocument:i(l)}}function h(l,d=!1){let E={textDocument:i(l)};return d&&(E.text=l.getText()),E}function m(l){switch(l){case mt.TextDocumentSaveReason.Manual:return ve.TextDocumentSaveReason.Manual;case mt.TextDocumentSaveReason.AfterDelay:return ve.TextDocumentSaveReason.AfterDelay;case mt.TextDocumentSaveReason.FocusOut:return ve.TextDocumentSaveReason.FocusOut}return ve.TextDocumentSaveReason.Manual}function y(l){return{textDocument:i(l.document),reason:m(l.reason)}}function S(l){return{files:l.files.map(d=>({uri:r(d)}))}}function I(l){return{files:l.files.map(d=>({oldUri:r(d.oldUri),newUri:r(d.newUri)}))}}function M(l){return{files:l.files.map(d=>({uri:r(d)}))}}function k(l){return{files:l.files.map(d=>({uri:r(d)}))}}function D(l){return{files:l.files.map(d=>({oldUri:r(d.oldUri),newUri:r(d.newUri)}))}}function O(l){return{files:l.files.map(d=>({uri:r(d)}))}}function x(l,d){return{textDocument:i(l),position:_t(d)}}function j(l){switch(l){case mt.CompletionTriggerKind.TriggerCharacter:return ve.CompletionTriggerKind.TriggerCharacter;case mt.CompletionTriggerKind.TriggerForIncompleteCompletions:return ve.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ve.CompletionTriggerKind.Invoked}}function oe(l,d,E){return{textDocument:i(l),position:_t(d),context:{triggerKind:j(E.triggerKind),triggerCharacter:E.triggerCharacter}}}function Ee(l){switch(l){case mt.SignatureHelpTriggerKind.Invoke:return ve.SignatureHelpTriggerKind.Invoked;case mt.SignatureHelpTriggerKind.TriggerCharacter:return ve.SignatureHelpTriggerKind.TriggerCharacter;case mt.SignatureHelpTriggerKind.ContentChange:return ve.SignatureHelpTriggerKind.ContentChange}}function ke(l){return{label:l.label}}function me(l){return l.map(ke)}function tt(l){return{label:l.label,parameters:me(l.parameters)}}function ze(l){return l.map(tt)}function vt(l){return l===void 0?l:{signatures:ze(l.signatures),activeSignature:l.activeSignature,activeParameter:l.activeParameter}}function yt(l,d,E){return{textDocument:i(l),position:_t(d),context:{isRetrigger:E.isRetrigger,triggerCharacter:E.triggerCharacter,triggerKind:Ee(E.triggerKind),activeSignatureHelp:vt(E.activeSignatureHelp)}}}function _t(l){return{line:l.line,character:l.character}}function Ke(l){return l==null?l:{line:l.line,character:l.character}}function Ct(l){let d=[];for(let E of l)d.push(Ke(E));return d}function we(l){return l==null?l:{start:Ke(l.start),end:Ke(l.end)}}function sr(l){return l==null?l:ve.Location.create(n(l.uri),we(l.range))}function Pe(l){switch(l){case mt.DiagnosticSeverity.Error:return ve.DiagnosticSeverity.Error;case mt.DiagnosticSeverity.Warning:return ve.DiagnosticSeverity.Warning;case mt.DiagnosticSeverity.Information:return ve.DiagnosticSeverity.Information;case mt.DiagnosticSeverity.Hint:return ve.DiagnosticSeverity.Hint}}function Ve(l){if(!l)return;let d=[];for(let E of l){let P=dt(E);P!==void 0&&d.push(P)}return d.length>0?d:void 0}function dt(l){switch(l){case mt.DiagnosticTag.Unnecessary:return ve.DiagnosticTag.Unnecessary;case mt.DiagnosticTag.Deprecated:return ve.DiagnosticTag.Deprecated;default:return}}function It(l){return{message:l.message,location:sr(l.location)}}function Kr(l){return l.map(It)}function or(l){if(l!=null)return Da.number(l)||Da.string(l)?l:{value:l.value,target:n(l.target)}}function on(l){let d=ve.Diagnostic.create(we(l.range),l.message),E=l instanceof kT.ProtocolDiagnostic?l:void 0;E!==void 0&&E.data!==void 0&&(d.data=E.data);let P=or(l.code);return kT.DiagnosticCode.is(P)?E!==void 0&&E.hasDiagnosticCode?d.code=P:(d.code=P.value,d.codeDescription={href:P.target}):d.code=P,Da.number(l.severity)&&(d.severity=Pe(l.severity)),Array.isArray(l.tags)&&(d.tags=Ve(l.tags)),l.relatedInformation&&(d.relatedInformation=Kr(l.relatedInformation)),l.source&&(d.source=l.source),d}function an(l){return l==null?l:l.map(on)}function Vr(l,d){switch(l){case"$string":return d;case ve.MarkupKind.PlainText:return{kind:l,value:d};case ve.MarkupKind.Markdown:return{kind:l,value:d.value};default:return`Unsupported Markup content received. Kind is: ${l}`}}function Gr(l){switch(l){case mt.CompletionItemTag.Deprecated:return ve.CompletionItemTag.Deprecated}}function cn(l){if(l===void 0)return l;let d=[];for(let E of l){let P=Gr(E);P!==void 0&&d.push(P)}return d}function xn(l,d){return d!==void 0?d:l+1}function ni(l){let d={label:l.label},E=l instanceof J2.default?l:void 0;l.detail&&(d.detail=l.detail),l.documentation&&(!E||E.documentationFormat==="$string"?d.documentation=l.documentation:d.documentation=Vr(E.documentationFormat,l.documentation)),l.filterText&&(d.filterText=l.filterText),gr(d,l),Da.number(l.kind)&&(d.kind=xn(l.kind,E&&E.originalItemKind)),l.sortText&&(d.sortText=l.sortText),l.additionalTextEdits&&(d.additionalTextEdits=ii(l.additionalTextEdits)),l.commitCharacters&&(d.commitCharacters=l.commitCharacters.slice()),l.command&&(d.command=yr(l.command)),(l.preselect===!0||l.preselect===!1)&&(d.preselect=l.preselect);let P=cn(l.tags);if(E){if(E.data!==void 0&&(d.data=E.data),E.deprecated===!0||E.deprecated===!1){if(E.deprecated===!0&&P!==void 0&&P.length>0){let F=P.indexOf(mt.CompletionItemTag.Deprecated);F!==-1&&P.splice(F,1)}d.deprecated=E.deprecated}E.insertTextMode!==void 0&&(d.insertTextMode=E.insertTextMode)}return P!==void 0&&P.length>0&&(d.tags=P),d.insertTextMode===void 0&&l.keepWhitespace===!0&&(d.insertTextMode=n$.InsertTextMode.adjustIndentation),d}function gr(l,d){let E=ve.InsertTextFormat.PlainText,P,F;d.textEdit?(P=d.textEdit.newText,F=d.textEdit.range):d.insertText instanceof mt.SnippetString?(E=ve.InsertTextFormat.Snippet,P=d.insertText.value):P=d.insertText,d.range&&(F=d.range),l.insertTextFormat=E,d.fromEdit&&P!==void 0&&F!==void 0?l.textEdit=qn(P,F):l.insertText=P}function qn(l,d){return Qh.is(d)?ve.InsertReplaceEdit.create(l,we(d.inserting),we(d.replacing)):{newText:l,range:we(d)}}function mr(l){return{range:we(l.range),newText:l.newText}}function ii(l){return l==null?l:l.map(mr)}function Ge(l){return l<=mt.SymbolKind.TypeParameter?l+1:ve.SymbolKind.Property}function Yt(l){return l}function On(l){return l.map(Yt)}function si(l,d,E){return{textDocument:i(l),position:_t(d),context:{includeDeclaration:E.includeDeclaration}}}function vr(l){let d=ve.CodeAction.create(l.title);if(l instanceof t$.default&&l.data!==void 0&&(d.data=l.data),l.kind!==void 0&&(d.kind=un(l.kind)),l.diagnostics!==void 0&&(d.diagnostics=an(l.diagnostics)),l.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return l.command!==void 0&&(d.command=yr(l.command)),l.isPreferred!==void 0&&(d.isPreferred=l.isPreferred),l.disabled!==void 0&&(d.disabled={reason:l.disabled.reason}),d}function kn(l){if(l==null)return l;let d;return l.only&&Da.string(l.only.value)&&(d=[l.only.value]),ve.CodeActionContext.create(an(l.diagnostics),d)}function un(l){if(l!=null)return l.value}function yr(l){let d=ve.Command.create(l.title,l.command);return l.arguments&&(d.arguments=l.arguments),d}function ln(l){let d=ve.CodeLens.create(we(l.range));return l.command&&(d.command=yr(l.command)),l instanceof Z2.default&&l.data&&(d.data=l.data),d}function _r(l,d){let E={tabSize:l.tabSize,insertSpaces:l.insertSpaces};return d.trimTrailingWhitespace&&(E.trimTrailingWhitespace=!0),d.trimFinalNewlines&&(E.trimFinalNewlines=!0),d.insertFinalNewline&&(E.insertFinalNewline=!0),E}function T(l){return{textDocument:i(l)}}function C(l){return{textDocument:i(l)}}function g(l){let d=ve.DocumentLink.create(we(l.range));l.target&&(d.target=n(l.target)),l.tooltip!==void 0&&(d.tooltip=l.tooltip);let E=l instanceof e$.default?l:void 0;return E&&E.data&&(d.data=E.data),d}function w(l){return{textDocument:i(l)}}function R(l){let d={name:l.name,kind:Ge(l.kind),uri:n(l.uri),range:we(l.range),selectionRange:we(l.selectionRange)};return l.detail!==void 0&&l.detail.length>0&&(d.detail=l.detail),l.tags!==void 0&&(d.tags=On(l.tags)),l instanceof r$.default&&l.data!==void 0&&(d.data=l.data),d}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:u,asCloseTextDocumentParams:f,asSaveTextDocumentParams:h,asWillSaveTextDocumentParams:y,asDidCreateFilesParams:S,asDidRenameFilesParams:I,asDidDeleteFilesParams:M,asWillCreateFilesParams:k,asWillRenameFilesParams:D,asWillDeleteFilesParams:O,asTextDocumentPositionParams:x,asCompletionParams:oe,asSignatureHelpParams:yt,asWorkerPosition:_t,asRange:we,asPosition:Ke,asPositions:Ct,asLocation:sr,asDiagnosticSeverity:Pe,asDiagnosticTag:dt,asDiagnostic:on,asDiagnostics:an,asCompletionItem:ni,asTextEdit:mr,asSymbolKind:Ge,asSymbolTag:Yt,asSymbolTags:On,asReferenceParams:si,asCodeAction:vr,asCodeActionContext:kn,asCommand:yr,asCodeLens:ln,asFormattingOptions:_r,asDocumentSymbolParams:T,asCodeLensParams:C,asDocumentLink:g,asDocumentLinkParams:w,asCallHierarchyItem:R}}Vu.createConverter=i$});var MT=v(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.createConverter=void 0;var W=require("vscode"),se=He(),Wr=Vn(),s$=Nh(),o$=Fh(),a$=Hh(),c$=Wh(),NT=Vh(),u$=Yh(),LT=He(),Gu;(function(t){function e(r){let n=r;return n&&Wr.string(n.language)&&Wr.string(n.value)}t.is=e})(Gu||(Gu={}));function l$(t,e){let n=t||(p=>W.Uri.parse(p));function i(p){return n(p)}function s(p){return p.map(o)}function o(p){let q=new NT.ProtocolDiagnostic(m(p.range),p.message,S(p.severity),p.data);return p.code!==void 0&&(se.CodeDescription.is(p.codeDescription)?q.code={value:p.code,target:i(p.codeDescription.href)}:NT.DiagnosticCode.is(p.code)?(q.hasDiagnosticCode=!0,q.code={value:p.code.value,target:i(p.code.target)}):q.code=p.code),p.source&&(q.source=p.source),p.relatedInformation&&(q.relatedInformation=a(p.relatedInformation)),Array.isArray(p.tags)&&(q.tags=u(p.tags)),q}function a(p){return p.map(c)}function c(p){return new W.DiagnosticRelatedInformation(we(p.location),p.message)}function u(p){if(!p)return;let q=[];for(let V of p){let de=f(V);de!==void 0&&q.push(de)}return q.length>0?q:void 0}function f(p){switch(p){case se.DiagnosticTag.Unnecessary:return W.DiagnosticTag.Unnecessary;case se.DiagnosticTag.Deprecated:return W.DiagnosticTag.Deprecated;default:return}}function h(p){if(!!p)return new W.Position(p.line,p.character)}function m(p){if(!!p)return new W.Range(h(p.start),h(p.end))}function y(p){return p.map(q=>m(q))}function S(p){if(p==null)return W.DiagnosticSeverity.Error;switch(p){case se.DiagnosticSeverity.Error:return W.DiagnosticSeverity.Error;case se.DiagnosticSeverity.Warning:return W.DiagnosticSeverity.Warning;case se.DiagnosticSeverity.Information:return W.DiagnosticSeverity.Information;case se.DiagnosticSeverity.Hint:return W.DiagnosticSeverity.Hint}return W.DiagnosticSeverity.Error}function I(p){if(Wr.string(p))return k(p);if(Gu.is(p))return k().appendCodeblock(p.value,p.language);if(Array.isArray(p)){let q=[];for(let V of p){let de=k();Gu.is(V)?de.appendCodeblock(V.value,V.language):de.appendMarkdown(V),q.push(de)}return q}else{let q;switch(p.kind){case se.MarkupKind.Markdown:return k(p.value);case se.MarkupKind.PlainText:return q=k(),q.appendText(p.value),q;default:return q=k(),q.appendText(`Unsupported Markup content received. Kind is: ${p.kind}`),q}}}function M(p){if(Wr.string(p))return p;switch(p.kind){case se.MarkupKind.Markdown:return k(p.value);case se.MarkupKind.PlainText:return p.value;default:return`Unsupported Markup content received. Kind is: ${p.kind}`}}function k(p){let q=new W.MarkdownString(p);return e===!0&&(q.isTrusted=e),q}function D(p){if(!!p)return new W.Hover(I(p.contents),m(p.range))}function O(p){if(!p)return;if(Array.isArray(p))return p.map(Ee);let q=p;return new W.CompletionList(q.items.map(Ee),q.isIncomplete)}function x(p){return se.CompletionItemKind.Text<=p&&p<=se.CompletionItemKind.TypeParameter?[p-1,void 0]:[W.CompletionItemKind.Text,p]}function j(p){switch(p){case se.CompletionItemTag.Deprecated:return W.CompletionItemTag.Deprecated}}function oe(p){if(p==null)return[];let q=[];for(let V of p){let de=j(V);de!==void 0&&q.push(de)}return q}function Ee(p){let q=oe(p.tags),V=new s$.default(p.label);p.detail&&(V.detail=p.detail),p.documentation&&(V.documentation=M(p.documentation),V.documentationFormat=Wr.string(p.documentation)?"$string":p.documentation.kind),p.filterText&&(V.filterText=p.filterText);let de=ke(p);if(de&&(V.insertText=de.text,V.range=de.range,V.fromEdit=de.fromEdit),Wr.number(p.kind)){let[be,ai]=x(p.kind);V.kind=be,ai&&(V.originalItemKind=ai)}return p.sortText&&(V.sortText=p.sortText),p.additionalTextEdits&&(V.additionalTextEdits=ze(p.additionalTextEdits)),Wr.stringArray(p.commitCharacters)&&(V.commitCharacters=p.commitCharacters.slice()),p.command&&(V.command=mr(p.command)),(p.deprecated===!0||p.deprecated===!1)&&(V.deprecated=p.deprecated,p.deprecated===!0&&q.push(W.CompletionItemTag.Deprecated)),(p.preselect===!0||p.preselect===!1)&&(V.preselect=p.preselect),p.data!==void 0&&(V.data=p.data),q.length>0&&(V.tags=q),p.insertTextMode!==void 0&&(V.insertTextMode=p.insertTextMode,p.insertTextMode===LT.InsertTextMode.asIs&&(V.keepWhitespace=!0)),V}function ke(p){return p.textEdit?p.insertTextFormat===se.InsertTextFormat.Snippet?{text:new W.SnippetString(p.textEdit.newText),range:me(p.textEdit),fromEdit:!0}:{text:p.textEdit.newText,range:me(p.textEdit),fromEdit:!0}:p.insertText?p.insertTextFormat===se.InsertTextFormat.Snippet?{text:new W.SnippetString(p.insertText),fromEdit:!1}:{text:p.insertText,fromEdit:!1}:void 0}function me(p){return se.InsertReplaceEdit.is(p)?{inserting:m(p.insert),replacing:m(p.replace)}:m(p.range)}function tt(p){if(!!p)return new W.TextEdit(m(p.range),p.newText)}function ze(p){if(!!p)return p.map(tt)}function vt(p){if(!p)return;let q=new W.SignatureHelp;return Wr.number(p.activeSignature)?q.activeSignature=p.activeSignature:q.activeSignature=0,Wr.number(p.activeParameter)?q.activeParameter=p.activeParameter:q.activeParameter=0,p.signatures&&(q.signatures=yt(p.signatures)),q}function yt(p){return p.map(_t)}function _t(p){let q=new W.SignatureInformation(p.label);return p.documentation!==void 0&&(q.documentation=M(p.documentation)),p.parameters!==void 0&&(q.parameters=Ke(p.parameters)),p.activeParameter!==void 0&&(q.activeParameter=p.activeParameter),q}function Ke(p){return p.map(Ct)}function Ct(p){let q=new W.ParameterInformation(p.label);return p.documentation&&(q.documentation=M(p.documentation)),q}function we(p){if(!!p)return new W.Location(n(p.uri),m(p.range))}function sr(p){if(!!p)return dt(p)}function Pe(p){if(!!p)return dt(p)}function Ve(p){if(!p)return;let q={targetUri:n(p.targetUri),targetRange:m(p.targetRange),originSelectionRange:m(p.originSelectionRange),targetSelectionRange:m(p.targetSelectionRange)};if(!q.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return q}function dt(p){if(!!p)return Wr.array(p)?p.length===0?[]:se.LocationLink.is(p[0])?p.map(V=>Ve(V)):p.map(V=>we(V)):se.LocationLink.is(p)?[Ve(p)]:we(p)}function It(p){if(!!p)return p.map(q=>we(q))}function Kr(p){if(!!p)return p.map(or)}function or(p){let q=new W.DocumentHighlight(m(p.range));return Wr.number(p.kind)&&(q.kind=on(p.kind)),q}function on(p){switch(p){case se.DocumentHighlightKind.Text:return W.DocumentHighlightKind.Text;case se.DocumentHighlightKind.Read:return W.DocumentHighlightKind.Read;case se.DocumentHighlightKind.Write:return W.DocumentHighlightKind.Write}return W.DocumentHighlightKind.Text}function an(p,q){if(!!p)return p.map(V=>xn(V,q))}function Vr(p){return p<=se.SymbolKind.TypeParameter?p-1:W.SymbolKind.Property}function Gr(p){switch(p){case se.SymbolTag.Deprecated:return W.SymbolTag.Deprecated;default:return}}function cn(p){if(p==null)return;let q=[];for(let V of p){let de=Gr(V);de!==void 0&&q.push(de)}return q.length===0?void 0:q}function xn(p,q){let V=new W.SymbolInformation(p.name,Vr(p.kind),m(p.location.range),p.location.uri?n(p.location.uri):q);return qn(V,p),p.containerName&&(V.containerName=p.containerName),V}function ni(p){if(p!=null)return p.map(gr)}function gr(p){let q=new W.DocumentSymbol(p.name,p.detail||"",Vr(p.kind),m(p.range),m(p.selectionRange));if(qn(q,p),p.children!==void 0&&p.children.length>0){let V=[];for(let de of p.children)V.push(gr(de));q.children=V}return q}function qn(p,q){p.tags=cn(q.tags),q.deprecated&&(p.tags?p.tags.includes(W.SymbolTag.Deprecated)||(p.tags=p.tags.concat(W.SymbolTag.Deprecated)):p.tags=[W.SymbolTag.Deprecated])}function mr(p){let q={title:p.title,command:p.command};return p.arguments&&(q.arguments=p.arguments),q}function ii(p){if(!!p)return p.map(mr)}let Ge=new Map;Ge.set(se.CodeActionKind.Empty,W.CodeActionKind.Empty),Ge.set(se.CodeActionKind.QuickFix,W.CodeActionKind.QuickFix),Ge.set(se.CodeActionKind.Refactor,W.CodeActionKind.Refactor),Ge.set(se.CodeActionKind.RefactorExtract,W.CodeActionKind.RefactorExtract),Ge.set(se.CodeActionKind.RefactorInline,W.CodeActionKind.RefactorInline),Ge.set(se.CodeActionKind.RefactorRewrite,W.CodeActionKind.RefactorRewrite),Ge.set(se.CodeActionKind.Source,W.CodeActionKind.Source),Ge.set(se.CodeActionKind.SourceOrganizeImports,W.CodeActionKind.SourceOrganizeImports);function Yt(p){if(p==null)return;let q=Ge.get(p);if(q)return q;let V=p.split(".");q=W.CodeActionKind.Empty;for(let de of V)q=q.append(de);return q}function On(p){if(p!=null)return p.map(q=>Yt(q))}function si(p){if(p==null)return;let q=new c$.default(p.title,p.data);return p.kind!==void 0&&(q.kind=Yt(p.kind)),p.diagnostics!==void 0&&(q.diagnostics=s(p.diagnostics)),p.edit!==void 0&&(q.edit=un(p.edit)),p.command!==void 0&&(q.command=mr(p.command)),p.isPreferred!==void 0&&(q.isPreferred=p.isPreferred),p.disabled!==void 0&&(q.disabled={reason:p.disabled.reason}),q}function vr(p){if(!p)return;let q=new o$.default(m(p.range));return p.command&&(q.command=mr(p.command)),p.data!==void 0&&p.data!==null&&(q.data=p.data),q}function kn(p){if(!!p)return p.map(q=>vr(q))}function un(p){if(!p)return;let q=new Map;if(p.changeAnnotations!==void 0)for(let be of Object.keys(p.changeAnnotations)){let ai=yr(p.changeAnnotations[be]);q.set(be,ai)}let V=be=>{if(be!==void 0)return q.get(be)},de=new W.WorkspaceEdit;if(p.documentChanges)for(let be of p.documentChanges)if(se.CreateFile.is(be))de.createFile(n(be.uri),be.options,V(be.annotationId));else if(se.RenameFile.is(be))de.renameFile(n(be.oldUri),n(be.newUri),be.options,V(be.annotationId));else if(se.DeleteFile.is(be))de.deleteFile(n(be.uri),be.options,V(be.annotationId));else if(se.TextDocumentEdit.is(be)){let ai=n(be.textDocument.uri);for(let Yi of be.edits)LT.AnnotatedTextEdit.is(Yi)?de.replace(ai,m(Yi.range),Yi.newText,V(Yi.annotationId)):de.replace(ai,m(Yi.range),Yi.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(be,void 0,4)}`);else p.changes&&Object.keys(p.changes).forEach(be=>{de.set(n(be),ze(p.changes[be]))});return de}function yr(p){if(p!==void 0)return{label:p.label,needsConfirmation:!!p.needsConfirmation,description:p.description}}function ln(p){let q=m(p.range),V=p.target?i(p.target):void 0,de=new a$.default(q,V);return p.tooltip!==void 0&&(de.tooltip=p.tooltip),p.data!==void 0&&p.data!==null&&(de.data=p.data),de}function _r(p){if(!!p)return p.map(ln)}function T(p){return new W.Color(p.red,p.green,p.blue,p.alpha)}function C(p){return new W.ColorInformation(m(p.range),T(p.color))}function g(p){if(Array.isArray(p))return p.map(C)}function w(p){let q=new W.ColorPresentation(p.label);return q.additionalTextEdits=ze(p.additionalTextEdits),p.textEdit&&(q.textEdit=tt(p.textEdit)),q}function R(p){if(Array.isArray(p))return p.map(w)}function l(p){if(p)switch(p){case se.FoldingRangeKind.Comment:return W.FoldingRangeKind.Comment;case se.FoldingRangeKind.Imports:return W.FoldingRangeKind.Imports;case se.FoldingRangeKind.Region:return W.FoldingRangeKind.Region}}function d(p){return new W.FoldingRange(p.startLine,p.endLine,l(p.kind))}function E(p){if(Array.isArray(p))return p.map(d)}function P(p){return new W.SelectionRange(m(p.range),p.parent?P(p.parent):void 0)}function F(p){if(!Array.isArray(p))return[];let q=[];for(let V of p)q.push(P(V));return q}function z(p){if(p===null)return;let q=new u$.default(Vr(p.kind),p.name,p.detail||"",i(p.uri),m(p.range),m(p.selectionRange),p.data);return p.tags!==void 0&&(q.tags=cn(p.tags)),q}function te(p){if(p!==null)return p.map(q=>z(q))}function ye(p){return new W.CallHierarchyIncomingCall(z(p.from),y(p.fromRanges))}function Xe(p){if(p!==null)return p.map(q=>ye(q))}function Ye(p){return new W.CallHierarchyOutgoingCall(z(p.to),y(p.fromRanges))}function ae(p){if(p!==null)return p.map(q=>Ye(q))}function An(p){if(p!=null)return new W.SemanticTokens(new Uint32Array(p.data),p.resultId)}function oi(p){return new W.SemanticTokensEdit(p.start,p.deleteCount,p.data!==void 0?new Uint32Array(p.data):void 0)}function La(p){if(p!=null)return new W.SemanticTokensEdits(p.edits.map(oi),p.resultId)}function JR(p){return p}function ZR(p){if(p!=null)return new W.LinkedEditingRanges(y(p.ranges),eD(p.wordPattern))}function eD(p){if(p!=null)return new RegExp(p)}return{asUri:i,asDiagnostics:s,asDiagnostic:o,asRange:m,asRanges:y,asPosition:h,asDiagnosticSeverity:S,asDiagnosticTag:f,asHover:D,asCompletionResult:O,asCompletionItem:Ee,asTextEdit:tt,asTextEdits:ze,asSignatureHelp:vt,asSignatureInformations:yt,asSignatureInformation:_t,asParameterInformations:Ke,asParameterInformation:Ct,asDeclarationResult:sr,asDefinitionResult:Pe,asLocation:we,asReferences:It,asDocumentHighlights:Kr,asDocumentHighlight:or,asDocumentHighlightKind:on,asSymbolKind:Vr,asSymbolTag:Gr,asSymbolTags:cn,asSymbolInformations:an,asSymbolInformation:xn,asDocumentSymbols:ni,asDocumentSymbol:gr,asCommand:mr,asCommands:ii,asCodeAction:si,asCodeActionKind:Yt,asCodeActionKinds:On,asCodeLens:vr,asCodeLenses:kn,asWorkspaceEdit:un,asDocumentLink:ln,asDocumentLinks:_r,asFoldingRangeKind:l,asFoldingRange:d,asFoldingRanges:E,asColor:T,asColorInformation:C,asColorInformations:g,asColorPresentation:w,asColorPresentations:R,asSelectionRange:P,asSelectionRanges:F,asSemanticTokensLegend:JR,asSemanticTokens:An,asSemanticTokensEdit:oi,asSemanticTokensEdits:La,asCallHierarchyItem:z,asCallHierarchyItems:te,asCallHierarchyIncomingCall:ye,asCallHierarchyIncomingCalls:Xe,asCallHierarchyOutgoingCall:Ye,asCallHierarchyOutgoingCalls:ae,asLinkedEditingRanges:ZR}}Xu.createConverter=l$});var jT=v(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Delayer=void 0;var FT=He(),Jh=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=FT.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(FT.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Yu.Delayer=Jh});var Qu=v(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.generateUuid=qr.parse=qr.isUUID=qr.v4=qr.empty=void 0;var Pa=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ie=class extends Pa{constructor(){super([ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),"-",ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),"-","4",ie._randomHex(),ie._randomHex(),ie._randomHex(),"-",ie._oneOf(ie._timeHighBits),ie._randomHex(),ie._randomHex(),ie._randomHex(),"-",ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ie._oneOf(ie._chars)}};ie._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ie._timeHighBits=["8","9","a","b"];qr.empty=new Pa("00000000-0000-0000-0000-000000000000");function $T(){return new ie}qr.v4=$T;var d$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function HT(t){return d$.test(t)}qr.isUUID=HT;function f$(t){if(!HT(t))throw new Error("invalid uuid");return new Pa(t)}qr.parse=f$;function p$(){return $T().asHex()}qr.generateUuid=p$});var eg=v(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ProgressPart=void 0;var BT=require("vscode"),UT=He(),WT=Vn(),Zh=class{constructor(e,r,n){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(UT.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){BT.window.withProgress({location:BT.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(r,n)=>(this._progress=r,this._infinite=e.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(UT.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&WT.string(e.message))this._progress.report({message:e.message});else if(WT.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Ju.ProgressPart=Zh});var pr=v(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.BaseLanguageClient=et.MessageTransports=et.TextDocumentFeature=et.State=et.RevealOutputChannelOn=et.CloseAction=et.ErrorAction=void 0;var B=require("vscode"),b=He(),h$=Oh(),g$=AT(),m$=MT(),Te=Vn(),zT=jT(),Re=Qu(),v$=eg(),tg=class{error(e){b.RAL().console.error(e)}warn(e){b.RAL().console.warn(e)}info(e){b.RAL().console.info(e)}log(e){b.RAL().console.log(e)}};function y$(t,e,r,n,i){let s=new tg,o=b.createProtocolConnection(t,e,s,i);return o.onError(c=>{r(c[0],c[1],c[2])}),o.onClose(n),{listen:()=>o.listen(),sendRequest:(c,...u)=>o.sendRequest(Te.string(c)?c:c.method,...u),onRequest:(c,u)=>o.onRequest(Te.string(c)?c:c.method,u),sendNotification:(c,u)=>o.sendNotification(Te.string(c)?c:c.method,u),onNotification:(c,u)=>o.onNotification(Te.string(c)?c:c.method,u),onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(c,u,f)=>{let h={sendNotification:!1,traceFormat:b.TraceFormat.Text};f===void 0?o.trace(c,u,h):(Te.boolean(f),o.trace(c,u,f))},initialize:c=>o.sendRequest(b.InitializeRequest.type,c),shutdown:()=>o.sendRequest(b.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(b.ExitNotification.type),onLogMessage:c=>o.onNotification(b.LogMessageNotification.type,c),onShowMessage:c=>o.onNotification(b.ShowMessageNotification.type,c),onTelemetry:c=>o.onNotification(b.TelemetryEventNotification.type,c),didChangeConfiguration:c=>o.sendNotification(b.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>o.sendNotification(b.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>o.sendNotification(b.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>o.sendNotification(b.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>o.sendNotification(b.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>o.sendNotification(b.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>o.onNotification(b.PublishDiagnosticsNotification.type,c),end:()=>o.end(),dispose:()=>o.dispose()}}var el;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(el=et.ErrorAction||(et.ErrorAction={}));var Ui;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Ui=et.CloseAction||(et.CloseAction={}));var rg=class{constructor(e,r){this.name=e,this.maxRestartCount=r,this.restarts=[]}error(e,r,n){return n&&n<=3?el.Continue:el.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Ui.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(B.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Ui.DoNotRestart):(this.restarts.shift(),Ui.Restart)}},Ia;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Ia=et.RevealOutputChannelOn||(et.RevealOutputChannelOn={}));var Zu;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Zu=et.State||(et.State={}));var Le;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(Le||(Le={}));var KT=[b.SymbolKind.File,b.SymbolKind.Module,b.SymbolKind.Namespace,b.SymbolKind.Package,b.SymbolKind.Class,b.SymbolKind.Method,b.SymbolKind.Property,b.SymbolKind.Field,b.SymbolKind.Constructor,b.SymbolKind.Enum,b.SymbolKind.Interface,b.SymbolKind.Function,b.SymbolKind.Variable,b.SymbolKind.Constant,b.SymbolKind.String,b.SymbolKind.Number,b.SymbolKind.Boolean,b.SymbolKind.Array,b.SymbolKind.Object,b.SymbolKind.Key,b.SymbolKind.Null,b.SymbolKind.EnumMember,b.SymbolKind.Struct,b.SymbolKind.Event,b.SymbolKind.Operator,b.SymbolKind.TypeParameter],_$=[b.CompletionItemKind.Text,b.CompletionItemKind.Method,b.CompletionItemKind.Function,b.CompletionItemKind.Constructor,b.CompletionItemKind.Field,b.CompletionItemKind.Variable,b.CompletionItemKind.Class,b.CompletionItemKind.Interface,b.CompletionItemKind.Module,b.CompletionItemKind.Property,b.CompletionItemKind.Unit,b.CompletionItemKind.Value,b.CompletionItemKind.Enum,b.CompletionItemKind.Keyword,b.CompletionItemKind.Snippet,b.CompletionItemKind.Color,b.CompletionItemKind.File,b.CompletionItemKind.Reference,b.CompletionItemKind.Folder,b.CompletionItemKind.EnumMember,b.CompletionItemKind.Constant,b.CompletionItemKind.Struct,b.CompletionItemKind.Event,b.CompletionItemKind.Operator,b.CompletionItemKind.TypeParameter],VT=[b.SymbolTag.Deprecated];function K(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var xa;(function(t){function e(r){let n=B.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}t.fromConfiguration=e})(xa||(xa={}));var ng;(function(t){function e(r){let n=r;return n&&Te.func(n.register)&&Te.func(n.unregister)&&Te.func(n.dispose)&&n.registrationType!==void 0}t.is=e})(ng||(ng={}));var zr=class{constructor(e,r,n,i,s,o){this._client=e,this._event=r,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(B.languages.match(n,r))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(B.languages.match(r,e))return{send:n=>{this.callback(n)}}}},ig=class extends zr{constructor(e,r){super(e,B.workspace.onDidOpenTextDocument,b.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),zr.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(e){K(K(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Re.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return b.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let r=e.registerOptions.documentSelector;B.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&B.languages.match(r,n)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};s.didOpen?s.didOpen(n,o):o(n),this._syncedDocuments.set(i,n)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},sg=class extends zr{constructor(e,r){super(e,B.workspace.onDidCloseTextDocument,b.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),zr.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return b.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){K(K(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Re.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(B.languages.match(r,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},og=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return b.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){K(K(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==b.TextDocumentSyncKind.None&&this.register({id:Re.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=B.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(B.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===b.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(b.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(b.DidChangeTextDocumentNotification.type,i)}else if(r.syncKind===b.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(b.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new zT.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(b.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(B.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}}}},ag=class extends zr{constructor(e){super(e,B.workspace.onWillSaveTextDocument,b.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>zr.textDocumentFilter(r,n.document))}get registrationType(){return b.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:Re.generateUuid(),registerOptions:{documentSelector:r}})}},cg=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return b.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:Re.generateUuid(),registerOptions:{documentSelector:r}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=B.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(zr.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(b.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},ug=class extends zr{constructor(e){super(e,B.workspace.onDidSaveTextDocument,b.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),zr.textDocumentFilter),this._includeText=!1}get registrationType(){return b.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){K(K(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:Re.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},lg=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return b.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){K(K(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let n of e.registerOptions.watchers){if(!Te.string(n.globPattern))continue;let i=!0,s=!0,o=!0;n.kind!==void 0&&n.kind!==null&&(i=(n.kind&b.WatchKind.Create)!==0,s=(n.kind&b.WatchKind.Change)!==0,o=(n.kind&b.WatchKind.Delete)!==0);let a=B.workspace.createFileSystemWatcher(n.globPattern,!i,!s,!o);this.hookListeners(a,i,s,o),r.push(a)}this._watchers.set(e.id,r)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,s){r&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:b.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:b.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:b.FileChangeType.Deleted}),null,s)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Rt=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],data:e,provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(b.TextDocumentRegistrationOptions.is(r)){let n=b.StaticRegistrationOptions.hasId(r)?r.id:Re.generateUuid(),i=r.documentSelector||e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(Te.boolean(r)&&r===!0||b.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=Te.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[Re.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return Te.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&B.languages.match(n,e))return r.provider}}getAllProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};et.TextDocumentFeature=Rt;var dg=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},fg=class extends Rt{constructor(e){super(e,b.CompletionRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[b.MarkupKind.Markdown,b.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[b.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[b.InsertTextMode.asIs,b.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:_$}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(i,s,o,a)=>{let c=this._client,u=this._client.clientOptions.middleware,f=(h,m,y,S)=>c.sendRequest(b.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(h,m,y),S).then(c.protocol2CodeConverter.asCompletionResult,I=>c.handleFailedRequest(b.CompletionRequest.type,I,null));return u.provideCompletionItem?u.provideCompletionItem(i,s,a,o,f):f(i,s,a,o)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.clientOptions.middleware,c=(u,f)=>o.sendRequest(b.CompletionResolveRequest.type,o.code2ProtocolConverter.asCompletionItem(u),f).then(o.protocol2CodeConverter.asCompletionItem,h=>o.handleFailedRequest(b.CompletionResolveRequest.type,h,u));return a.resolveCompletionItem?a.resolveCompletionItem(i,s,c):c(i,s)}:void 0};return[B.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},pg=class extends Rt{constructor(e){super(e,b.HoverRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[b.MarkupKind.Markdown,b.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(b.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asHover,m=>o.handleFailedRequest(b.HoverRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideHover?c.provideHover(n,i,s,a):a(n,i,s)}};return[B.languages.registerHoverProvider(e.documentSelector,r),r]}},hg=class extends Rt{constructor(e){super(e,b.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[b.MarkupKind.Markdown,b.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(i,s,o,a)=>{let c=this._client,u=(h,m,y,S)=>c.sendRequest(b.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(h,m,y),S).then(c.protocol2CodeConverter.asSignatureHelp,I=>c.handleFailedRequest(b.SignatureHelpRequest.type,I,null)),f=c.clientOptions.middleware;return f.provideSignatureHelp?f.provideSignatureHelp(i,s,a,o,u):u(i,s,a,o)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=B.languages.registerSignatureHelpProvider(e.documentSelector,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=B.languages.registerSignatureHelpProvider(e.documentSelector,r,i)}return[n,r]}},gg=class extends Rt{constructor(e){super(e,b.DefinitionRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(b.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(b.DefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,i,s,a):a(n,i,s)}};return[B.languages.registerDefinitionProvider(e.documentSelector,r),r]}},mg=class extends Rt{constructor(e){super(e,b.ReferencesRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,i,s,o)=>{let a=this._client,c=(f,h,m,y)=>a.sendRequest(b.ReferencesRequest.type,a.code2ProtocolConverter.asReferenceParams(f,h,m),y).then(a.protocol2CodeConverter.asReferences,S=>a.handleFailedRequest(b.ReferencesRequest.type,S,null)),u=a.clientOptions.middleware;return u.provideReferences?u.provideReferences(n,i,s,o,c):c(n,i,s,o)}};return[B.languages.registerReferenceProvider(e.documentSelector,r),r]}},vg=class extends Rt{constructor(e){super(e,b.DocumentHighlightRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(b.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asDocumentHighlights,m=>o.handleFailedRequest(b.DocumentHighlightRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,i,s,a):a(n,i,s)}};return[B.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},yg=class extends Rt{constructor(e){super(e,b.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:KT},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:VT},r.labelSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(i,s)=>{let o=this._client,a=(u,f)=>o.sendRequest(b.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(u),f).then(h=>{if(h!==null){if(h.length===0)return[];{let m=h[0];return b.DocumentSymbol.is(m)?o.protocol2CodeConverter.asDocumentSymbols(h):o.protocol2CodeConverter.asSymbolInformations(h)}}},h=>o.handleFailedRequest(b.DocumentSymbolRequest.type,h,null)),c=o.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(i,s,a):a(i,s)}},n=e.label!==void 0?{label:e.label}:void 0;return[B.languages.registerDocumentSymbolProvider(e.documentSelector,r,n),r]}},_g=class extends dg{constructor(e){super(e,b.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=K(K(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:KT},r.tagSupport={valueSet:VT}}initialize(e){!e.workspaceSymbolProvider||this.register({id:Re.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(b.WorkspaceSymbolRequest.type,{query:c},u).then(s.protocol2CodeConverter.asSymbolInformations,f=>s.handleFailedRequest(b.WorkspaceSymbolRequest.type,f,null)),a=s.clientOptions.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(n,i,o):o(n,i)}};return[B.languages.registerWorkspaceSymbolProvider(r),r]}},Cg=class extends Rt{constructor(e){super(e,b.CodeActionRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[b.CodeActionKind.Empty,b.CodeActionKind.QuickFix,b.CodeActionKind.Refactor,b.CodeActionKind.RefactorExtract,b.CodeActionKind.RefactorInline,b.CodeActionKind.RefactorRewrite,b.CodeActionKind.Source,b.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,i,s,o)=>{let a=this._client,c=(f,h,m,y)=>{let S={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),range:a.code2ProtocolConverter.asRange(h),context:a.code2ProtocolConverter.asCodeActionContext(m)};return a.sendRequest(b.CodeActionRequest.type,S,y).then(I=>{if(I===null)return;let M=[];for(let k of I)b.Command.is(k)?M.push(a.protocol2CodeConverter.asCommand(k)):M.push(a.protocol2CodeConverter.asCodeAction(k));return M},I=>a.handleFailedRequest(b.CodeActionRequest.type,I,null))},u=a.clientOptions.middleware;return u.provideCodeActions?u.provideCodeActions(n,i,s,o,c):c(n,i,s,o)},resolveCodeAction:e.resolveProvider?(n,i)=>{let s=this._client,o=this._client.clientOptions.middleware,a=(c,u)=>s.sendRequest(b.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(c),u).then(s.protocol2CodeConverter.asCodeAction,f=>s.handleFailedRequest(b.CodeActionResolveRequest.type,f,c));return o.resolveCodeAction?o.resolveCodeAction(n,i,a):a(n,i)}:void 0};return[B.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},wg=class extends Rt{constructor(e){super(e,b.CodeLensRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"codeLens").dynamicRegistration=!0,K(K(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,r){this._client.onRequest(b.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(r,e.codeLensProvider);!i||this.register({id:Re.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let r=new B.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(i,s)=>{let o=this._client,a=(u,f)=>o.sendRequest(b.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(u),f).then(o.protocol2CodeConverter.asCodeLenses,h=>o.handleFailedRequest(b.CodeLensRequest.type,h,null)),c=o.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(i,s,a):a(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let o=this._client,a=(u,f)=>o.sendRequest(b.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(u),f).then(o.protocol2CodeConverter.asCodeLens,h=>o.handleFailedRequest(b.CodeLensResolveRequest.type,h,u)),c=o.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(i,s,a):a(i,s)}:void 0};return[B.languages.registerCodeLensProvider(e.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},bg=class extends Rt{constructor(e){super(e,b.DocumentFormattingRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,i,s)=>{let o=this._client,a=(u,f,h)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),options:o.code2ProtocolConverter.asFormattingOptions(f,xa.fromConfiguration(u))};return o.sendRequest(b.DocumentFormattingRequest.type,m,h).then(o.protocol2CodeConverter.asTextEdits,y=>o.handleFailedRequest(b.DocumentFormattingRequest.type,y,null))},c=o.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,i,s,a):a(n,i,s)}};return[B.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},Eg=class extends Rt{constructor(e){super(e,b.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,i,s,o)=>{let a=this._client,c=(f,h,m,y)=>{let S={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),range:a.code2ProtocolConverter.asRange(h),options:a.code2ProtocolConverter.asFormattingOptions(m,xa.fromConfiguration(f))};return a.sendRequest(b.DocumentRangeFormattingRequest.type,S,y).then(a.protocol2CodeConverter.asTextEdits,I=>a.handleFailedRequest(b.DocumentRangeFormattingRequest.type,I,null))},u=a.clientOptions.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(n,i,s,o,c):c(n,i,s,o)}};return[B.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},Sg=class extends Rt{constructor(e){super(e,b.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){K(K(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(i,s,o,a,c)=>{let u=this._client,f=(m,y,S,I,M)=>{let k={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),position:u.code2ProtocolConverter.asPosition(y),ch:S,options:u.code2ProtocolConverter.asFormattingOptions(I,xa.fromConfiguration(m))};return u.sendRequest(b.DocumentOnTypeFormattingRequest.type,k,M).then(u.protocol2CodeConverter.asTextEdits,D=>u.handleFailedRequest(b.DocumentOnTypeFormattingRequest.type,D,null))},h=u.clientOptions.middleware;return h.provideOnTypeFormattingEdits?h.provideOnTypeFormattingEdits(i,s,o,a,c,f):f(i,s,o,a,c)}},n=e.moreTriggerCharacter||[];return[B.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},Tg=class extends Rt{constructor(e){super(e,b.RenameRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=b.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);!n||(Te.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:Re.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,i,s,o)=>{let a=this._client,c=(f,h,m,y)=>{let S={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),position:a.code2ProtocolConverter.asPosition(h),newName:m};return a.sendRequest(b.RenameRequest.type,S,y).then(a.protocol2CodeConverter.asWorkspaceEdit,I=>a.handleFailedRequest(b.RenameRequest.type,I,null))},u=a.clientOptions.middleware;return u.provideRenameEdits?u.provideRenameEdits(n,i,s,o,c):c(n,i,s,o)},prepareRename:e.prepareProvider?(n,i,s)=>{let o=this._client,a=(u,f,h)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),position:o.code2ProtocolConverter.asPosition(f)};return o.sendRequest(b.PrepareRenameRequest.type,m,h).then(y=>b.Range.is(y)?o.protocol2CodeConverter.asRange(y):this.isDefaultBehavior(y)?y.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):y&&b.Range.is(y.range)?{range:o.protocol2CodeConverter.asRange(y.range),placeholder:y.placeholder}:Promise.reject(new Error("The element can't be renamed.")),y=>o.handleFailedRequest(b.PrepareRenameRequest.type,y,void 0))},c=o.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,i,s,a):a(n,i,s)}:void 0};return[B.languages.registerRenameProvider(e.documentSelector,r),r]}isDefaultBehavior(e){let r=e;return r&&Te.boolean(r.defaultBehavior)}},Rg=class extends Rt{constructor(e){super(e,b.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=K(K(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);!n||this.register({id:Re.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(b.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),u).then(s.protocol2CodeConverter.asDocumentLinks,f=>s.handleFailedRequest(b.DocumentLinkRequest.type,f,null)),a=s.clientOptions.middleware;return a.provideDocumentLinks?a.provideDocumentLinks(n,i,o):o(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(b.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),u).then(s.protocol2CodeConverter.asDocumentLink,f=>s.handleFailedRequest(b.DocumentLinkResolveRequest.type,f,c)),a=s.clientOptions.middleware;return a.resolveDocumentLink?a.resolveDocumentLink(n,i,o):o(n,i)}:void 0};return[B.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},Dg=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return b.DidChangeConfigurationNotification.type}fillClientCapabilities(e){K(K(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:Re.generateUuid(),registerOptions:{section:e}})}register(e){let r=B.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,r),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(Te.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(a=>r.affectsConfiguration(a)))return;let i=o=>{if(o===void 0){this._client.sendNotification(b.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(b.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function r(s,o){let a=s;for(let c=0;c<o.length-1;c++){let u=a[o[c]];u||(u=Object.create(null),a[o[c]]=u),a=u}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=B.workspace.getConfiguration(o.substr(0,a),n).get(o.substr(a+1)):c=B.workspace.getConfiguration(void 0,n).get(o),c){let u=e[s].split(".");r(i,u)[u[u.length-1]]=h$.toJSONObject(c)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Pg=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return b.ExecuteCommandRequest.type}fillClientCapabilities(e){K(K(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:Re.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let r=this._client,n=r.clientOptions.middleware,i=(s,o)=>{let a={command:s,arguments:o};return r.sendRequest(b.ExecuteCommandRequest.type,a).then(void 0,c=>r.handleFailedRequest(b.ExecuteCommandRequest.type,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(B.commands.registerCommand(o,(...a)=>n.executeCommand?n.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},C$;(function(t){function e(r){return r&&b.MessageReader.is(r.reader)&&b.MessageWriter.is(r.writer)}t.is=e})(C$=et.MessageTransports||(et.MessageTransports={}));var tl=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Wi=class{constructor(e,r,n){var i;this._traceFormat=b.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{};let s={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||Ia.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((i=n.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Le.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new zT.Delayer(250),this._onReady=new Promise((o,a)=>{this._onReadyCallbacks=new tl(o,a)}),this._onStop=void 0,this._telemetryEmitter=new b.Emitter,this._stateChangeEmitter=new b.Emitter,this._trace=b.Trace.Off,this._tracer={log:(o,a)=>{Te.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=g$.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=m$.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===Le.Running?Zu.Running:this.state===Le.Starting?Zu.Starting:Zu.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${Te.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${Te.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${Te.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${Te.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(b.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,r,s=>{i(r,s,()=>n(s))})}return this._resolvedConnection.onProgress(e,r,n)}catch(i){throw this.error(`Registering progress handler for token ${r} failed.`,i),i}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=B.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new rg(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof b.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?Te.string(e.stack)?e.stack:e.message:Te.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Ia.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Ia.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=Ia.Error&&this.showNotificationMessage()}showNotificationMessage(){B.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Le.Initial||this.state===Le.Stopping||this.state===Le.Stopped}needsStop(){return this.state===Le.Starting||this.state===Le.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Le.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new tl(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?B.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):B.languages.createDiagnosticCollection()),this.state=Le.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case b.MessageType.Error:this.error(r.message,void 0,!1);break;case b.MessageType.Warning:this.warn(r.message,void 0,!1);break;case b.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case b.MessageType.Error:B.window.showErrorMessage(r.message);break;case b.MessageType.Warning:B.window.showWarningMessage(r.message);break;case b.MessageType.Info:B.window.showInformationMessage(r.message);break;default:B.window.showInformationMessage(r.message)}}),e.onRequest(b.ShowMessageRequest.type,r=>{let n;switch(r.type){case b.MessageType.Error:n=B.window.showErrorMessage;break;case b.MessageType.Warning:n=B.window.showWarningMessage;break;case b.MessageType.Info:n=B.window.showInformationMessage;break;default:n=B.window.showInformationMessage}let i=r.actions||[];return n(r.message,...i)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.onRequest(b.ShowDocumentRequest.type,async r=>{var n;let i=async o=>{let a=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await B.env.openExternal(a)};{let c={};return o.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?c.preserveFocus=!0:o.takeFocus===!0&&(c.preserveFocus=!1),await B.window.showTextDocument(a,c),{success:!0}}}catch{return{success:!0}}},s=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return s!==void 0?s(r,i):i(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=Le.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),B.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new B.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:B.env.appName,version:B.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(B.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Te.func(r)?r():r,trace:b.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=Re.generateUuid(),o=new v$.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(a=>(o.done(),a),a=>{throw o.cancel(),a})}else return this.doInitialize(e,i)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=Le.Running;let i;return Te.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===b.TextDocumentSyncKind.None?i={openClose:!1,change:b.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(b.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(b.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(b.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(b.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof b.ResponseError&&n.data&&n.data.retry?B.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&B.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=B.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Le.Stopping&&this._onStop?this._onStop:(this.state=Le.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=Le.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Le.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r;let n=this;function i(o){n._fileEvents.push(o),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(a=>{n.isConnectionActive()&&(n.forceDocumentSync(),a.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},a=>{n.error("Notify file events failed.",a)})})}let s=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;s?.didChangeWatchedFile?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(b.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(r,n,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(r,n)}setDiagnostics(e,r){!this._diagnostics||this._diagnostics.set(e,r)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>y$(n.reader,n.writer,e,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Le.Stopping||this.state===Le.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=Ui.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===Ui.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Le.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Le.StartFailed):this.state=Le.Stopped,this.cleanUp(!1,!0)):e===Ui.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Le.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===el.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){B.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=B.workspace.getConfiguration(this._id),i=b.Trace.Off,s=b.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=b.Trace.fromString(o):(i=b.Trace.fromString(n.get("trace.server.verbosity","off")),s=b.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;Te.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(b.DidChangeWatchedFilesNotification.type.method).registerRaw(Re.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),ng.is(e)){let r=e.registrationType;this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Dg(this)),this.registerFeature(new ig(this,this._syncedDocuments)),this.registerFeature(new og(this)),this.registerFeature(new ag(this)),this.registerFeature(new cg(this)),this.registerFeature(new ug(this)),this.registerFeature(new sg(this,this._syncedDocuments)),this.registerFeature(new lg(this,e=>this.notifyFileEvent(e))),this.registerFeature(new fg(this)),this.registerFeature(new pg(this)),this.registerFeature(new hg(this)),this.registerFeature(new gg(this)),this.registerFeature(new mg(this)),this.registerFeature(new vg(this)),this.registerFeature(new yg(this)),this.registerFeature(new _g(this)),this.registerFeature(new Cg(this)),this.registerFeature(new wg(this)),this.registerFeature(new bg(this)),this.registerFeature(new Eg(this)),this.registerFeature(new Sg(this)),this.registerFeature(new Tg(this)),this.registerFeature(new Rg(this)),this.registerFeature(new Pg(this))}fillInitializeParams(e){for(let r of this._features)Te.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};K(e,"workspace").applyEdit=!0;let r=K(K(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[b.ResourceOperationKind.Create,b.ResourceOperationKind.Rename,b.ResourceOperationKind.Delete],r.failureHandling=b.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=K(K(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[b.DiagnosticTag.Unnecessary,b.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=K(e,"window"),s=K(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=K(i,"showDocument");o.support=!0;let a=K(e,"general");a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let a={id:i.id,registerOptions:o};try{s.register(a)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;B.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(r.documentChanges){for(let s of r.documentChanges)if(b.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=n.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):Te.asPromise(B.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,r,n){if(r instanceof b.ResponseError){if(r.code===b.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===b.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,r),r}makeCancelError(){let e=new Error(Wi.Canceled);return e.name=Wi.Canceled,e}};et.BaseLanguageClient=Wi;Wi.Canceled="Canceled"});var XT=v(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.ColorProviderFeature=void 0;var rl=require("vscode"),qa=He(),w$=pr();function GT(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ig=class extends w$.TextDocumentFeature{constructor(e){super(e,qa.DocumentColorRequest.type)}fillClientCapabilities(e){GT(GT(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideColorPresentations:(n,i,s)=>{let o=this._client,a=(u,f,h)=>{let m={color:u,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(f.document),range:o.code2ProtocolConverter.asRange(f.range)};return o.sendRequest(qa.ColorPresentationRequest.type,m,h).then(this.asColorPresentations.bind(this),y=>o.handleFailedRequest(qa.ColorPresentationRequest.type,y,null))},c=o.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,i,s,a):a(n,i,s)},provideDocumentColors:(n,i)=>{let s=this._client,o=(c,u)=>{let f={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest(qa.DocumentColorRequest.type,f,u).then(this.asColorInformations.bind(this),h=>s.handleFailedRequest(qa.ColorPresentationRequest.type,h,null))},a=s.clientOptions.middleware;return a.provideDocumentColors?a.provideDocumentColors(n,i,o):o(n,i)}};return[rl.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new rl.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new rl.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new rl.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};nl.ColorProviderFeature=Ig});var QT=v(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.ImplementationFeature=void 0;var b$=require("vscode"),xg=He(),E$=pr();function YT(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var qg=class extends E$.TextDocumentFeature{constructor(e){super(e,xg.ImplementationRequest.type)}fillClientCapabilities(e){let r=YT(YT(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideImplementation:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(xg.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(xg.ImplementationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,i,s,a):a(n,i,s)}};return[b$.languages.registerImplementationProvider(e.documentSelector,r),r]}};il.ImplementationFeature=qg});var JT=v(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.TypeDefinitionFeature=void 0;var S$=require("vscode"),Og=He(),T$=pr();function sl(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var kg=class extends T$.TextDocumentFeature{constructor(e){super(e,Og.TypeDefinitionRequest.type)}fillClientCapabilities(e){sl(sl(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=sl(sl(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(Og.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asDefinitionResult,m=>o.handleFailedRequest(Og.TypeDefinitionRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,i,s,a):a(n,i,s)}};return[S$.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};ol.TypeDefinitionFeature=kg});var ZT=v(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.WorkspaceFoldersFeature=no.arrayDiff=void 0;var R$=Qu(),al=require("vscode"),Ag=He();function Ng(t,e){if(t!==void 0)return t[e]}function Lg(t,e){return t.filter(r=>e.indexOf(r)<0)}no.arrayDiff=Lg;var Mg=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Ag.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=al.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Ag.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=al.workspace.workspaceFolders;return c===void 0?null:c.map(f=>this.asProtocol(f))},a=r.clientOptions.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let n=Ng(Ng(Ng(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=R$.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=Lg(this._initialFolders,e),n=Lg(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};this._client.sendNotification(Ag.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let r=e.id,n=this._client,i=al.workspace.onDidChangeWorkspaceFolders(s=>{let o=c=>{this.doSendEvent(c.added,c.removed)},a=n.clientOptions.middleware.workspace;a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)});this._listeners.set(r,i),this.sendInitialEvent(al.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};no.WorkspaceFoldersFeature=Mg});var tR=v(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.FoldingRangeFeature=void 0;var Oa=require("vscode"),io=He(),D$=pr();function eR(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var so=class extends D$.TextDocumentFeature{constructor(e){super(e,io.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=eR(eR(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,i,s)=>{let o=this._client,a=(u,f,h)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u)};return o.sendRequest(io.FoldingRangeRequest.type,m,h).then(so.asFoldingRanges,y=>o.handleFailedRequest(io.FoldingRangeRequest.type,y,null))},c=o.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,i,s,a):a(n,i,s)}};return[Oa.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}static asFoldingRangeKind(e){if(e)switch(e){case io.FoldingRangeKind.Comment:return Oa.FoldingRangeKind.Comment;case io.FoldingRangeKind.Imports:return Oa.FoldingRangeKind.Imports;case io.FoldingRangeKind.Region:return Oa.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new Oa.FoldingRange(r.startLine,r.endLine,so.asFoldingRangeKind(r.kind))):[]}};cl.FoldingRangeFeature=so});var nR=v(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.DeclarationFeature=void 0;var P$=require("vscode"),Fg=He(),I$=pr();function rR(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var jg=class extends I$.TextDocumentFeature{constructor(e){super(e,Fg.DeclarationRequest.type)}fillClientCapabilities(e){let r=rR(rR(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideDeclaration:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(Fg.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asDeclarationResult,m=>o.handleFailedRequest(Fg.DeclarationRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,i,s,a):a(n,i,s)}};return[P$.languages.registerDeclarationProvider(e.documentSelector,r),r]}};ul.DeclarationFeature=jg});var sR=v(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.SelectionRangeFeature=void 0;var x$=require("vscode"),$g=He(),q$=pr();function iR(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Hg=class extends q$.TextDocumentFeature{constructor(e){super(e,$g.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=iR(iR(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,i,s)=>{let o=this._client,a=(u,f,h)=>{let m={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u),positions:o.code2ProtocolConverter.asPositions(f)};return o.sendRequest($g.SelectionRangeRequest.type,m,h).then(y=>o.protocol2CodeConverter.asSelectionRanges(y),y=>o.handleFailedRequest($g.SelectionRangeRequest.type,y,null))},c=o.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,i,s,a):a(n,i,s)}};return[x$.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};ll.SelectionRangeFeature=Hg});var oR=v(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.ProgressFeature=void 0;var O$=He(),k$=eg();function A$(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Bg=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){A$(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new k$.ProgressPart(this._client,i.token,r))};e.onRequest(O$.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};dl.ProgressFeature=Bg});var cR=v(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.CallHierarchyFeature=void 0;var N$=require("vscode"),zi=He(),L$=pr();function aR(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ug=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let i=this.client,s=this.middleware,o=(a,c,u)=>{let f=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(zi.CallHierarchyPrepareRequest.type,f,u).then(h=>i.protocol2CodeConverter.asCallHierarchyItems(h),h=>i.handleFailedRequest(zi.CallHierarchyPrepareRequest.type,h,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,r,n,o):o(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(zi.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u),u=>n.handleFailedRequest(zi.CallHierarchyIncomingCallsRequest.type,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,s):s(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(zi.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u),u=>n.handleFailedRequest(zi.CallHierarchyOutgoingCallsRequest.type,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,r,s):s(e,r)}},Wg=class extends L$.TextDocumentFeature{constructor(e){super(e,zi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=aR(aR(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new Ug(r);return[N$.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};fl.CallHierarchyFeature=Wg});var uR=v(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.SemanticTokensFeature=void 0;var pl=require("vscode"),M$=pr(),ne=He(),F$=Vn();function hl(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var zg=class extends M$.TextDocumentFeature{constructor(e){super(e,ne.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let r=hl(hl(e,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[ne.SemanticTokenTypes.namespace,ne.SemanticTokenTypes.type,ne.SemanticTokenTypes.class,ne.SemanticTokenTypes.enum,ne.SemanticTokenTypes.interface,ne.SemanticTokenTypes.struct,ne.SemanticTokenTypes.typeParameter,ne.SemanticTokenTypes.parameter,ne.SemanticTokenTypes.variable,ne.SemanticTokenTypes.property,ne.SemanticTokenTypes.enumMember,ne.SemanticTokenTypes.event,ne.SemanticTokenTypes.function,ne.SemanticTokenTypes.method,ne.SemanticTokenTypes.macro,ne.SemanticTokenTypes.keyword,ne.SemanticTokenTypes.modifier,ne.SemanticTokenTypes.comment,ne.SemanticTokenTypes.string,ne.SemanticTokenTypes.number,ne.SemanticTokenTypes.regexp,ne.SemanticTokenTypes.operator],r.tokenModifiers=[ne.SemanticTokenModifiers.declaration,ne.SemanticTokenModifiers.definition,ne.SemanticTokenModifiers.readonly,ne.SemanticTokenModifiers.static,ne.SemanticTokenModifiers.deprecated,ne.SemanticTokenModifiers.abstract,ne.SemanticTokenModifiers.async,ne.SemanticTokenModifiers.modification,ne.SemanticTokenModifiers.documentation,ne.SemanticTokenModifiers.defaultLibrary],r.formats=[ne.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,hl(hl(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,r){this._client.onRequest(ne.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(r,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let r=F$.boolean(e.full)?e.full:e.full!==void 0,n=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new pl.EventEmitter,s=r?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(h,m)=>{let y=this._client,S=y.clientOptions.middleware,I=(M,k)=>{let D={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(M)};return y.sendRequest(ne.SemanticTokensRequest.type,D,k).then(O=>y.protocol2CodeConverter.asSemanticTokens(O),O=>y.handleFailedRequest(ne.SemanticTokensRequest.type,O,null))};return S.provideDocumentSemanticTokens?S.provideDocumentSemanticTokens(h,m,I):I(h,m)},provideDocumentSemanticTokensEdits:n?(h,m,y)=>{let S=this._client,I=S.clientOptions.middleware,M=(k,D,O)=>{let x={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(k),previousResultId:D};return S.sendRequest(ne.SemanticTokensDeltaRequest.type,x,O).then(j=>ne.SemanticTokens.is(j)?S.protocol2CodeConverter.asSemanticTokens(j):S.protocol2CodeConverter.asSemanticTokensEdits(j),j=>S.handleFailedRequest(ne.SemanticTokensDeltaRequest.type,j,null))};return I.provideDocumentSemanticTokensEdits?I.provideDocumentSemanticTokensEdits(h,m,y,M):M(h,m,y)}:void 0}:void 0,a=e.range===!0?{provideDocumentRangeSemanticTokens:(h,m,y)=>{let S=this._client,I=S.clientOptions.middleware,M=(k,D,O)=>{let x={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(k),range:S.code2ProtocolConverter.asRange(D)};return S.sendRequest(ne.SemanticTokensRangeRequest.type,x,O).then(j=>S.protocol2CodeConverter.asSemanticTokens(j),j=>S.handleFailedRequest(ne.SemanticTokensRangeRequest.type,j,null))};return I.provideDocumentRangeSemanticTokens?I.provideDocumentRangeSemanticTokens(h,m,y,M):M(h,m,y)}}:void 0,c=[],f=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&c.push(pl.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,f)),a!==void 0&&c.push(pl.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,f)),[new pl.Disposable(()=>c.forEach(h=>h.dispose())),{range:a,full:s,onDidChangeSemanticTokensEmitter:i}]}};gl.SemanticTokensFeature=zg});var dR=v((y6,lR)=>{lR.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);j$(i)?r.push.apply(r,i):r.push(i)}return r};var j$=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var mR=v((_6,gR)=>{"use strict";gR.exports=pR;function pR(t,e,r){t instanceof RegExp&&(t=fR(t,r)),e instanceof RegExp&&(e=fR(e,r));var n=hR(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function fR(t,e){var r=e.match(t);return r?r[0]:null}pR.range=hR;function hR(t,e,r){var n,i,s,o,a,c=r.indexOf(t),u=r.indexOf(e,c+1),f=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],s=r.length;f>=0&&!a;)f==c?(n.push(f),c=r.indexOf(t,f+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<s&&(s=i,o=u),u=r.indexOf(e,f+1)),f=c<u&&c>=0?c:u;n.length&&(a=[s,o])}return a}});var SR=v((C6,ER)=>{var $$=dR(),vR=mR();ER.exports=U$;var yR="\0SLASH"+Math.random()+"\0",_R="\0OPEN"+Math.random()+"\0",Vg="\0CLOSE"+Math.random()+"\0",CR="\0COMMA"+Math.random()+"\0",wR="\0PERIOD"+Math.random()+"\0";function Kg(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function H$(t){return t.split("\\\\").join(yR).split("\\{").join(_R).split("\\}").join(Vg).split("\\,").join(CR).split("\\.").join(wR)}function B$(t){return t.split(yR).join("\\").split(_R).join("{").split(Vg).join("}").split(CR).join(",").split(wR).join(".")}function bR(t){if(!t)return[""];var e=[],r=vR("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=bR(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function U$(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),oo(H$(t),!0).map(B$)):[]}function W$(t){return"{"+t+"}"}function z$(t){return/^-?0\d/.test(t)}function K$(t,e){return t<=e}function V$(t,e){return t>=e}function oo(t,e){var r=[],n=vR("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=i||s,a=n.body.indexOf(",")>=0;if(!o&&!a)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Vg+n.post,oo(t)):[t];var c;if(o)c=n.body.split(/\.\./);else if(c=bR(n.body),c.length===1&&(c=oo(c[0],!1).map(W$),c.length===1)){var f=n.post.length?oo(n.post,!1):[""];return f.map(function(ze){return n.pre+c[0]+ze})}var u=n.pre,f=n.post.length?oo(n.post,!1):[""],h;if(o){var m=Kg(c[0]),y=Kg(c[1]),S=Math.max(c[0].length,c[1].length),I=c.length==3?Math.abs(Kg(c[2])):1,M=K$,k=y<m;k&&(I*=-1,M=V$);var D=c.some(z$);h=[];for(var O=m;M(O,y);O+=I){var x;if(s)x=String.fromCharCode(O),x==="\\"&&(x="");else if(x=String(O),D){var j=S-x.length;if(j>0){var oe=new Array(j+1).join("0");O<0?x="-"+oe+x.slice(1):x=oe+x}}h.push(x)}}else h=$$(c,function(tt){return oo(tt,!1)});for(var Ee=0;Ee<h.length;Ee++)for(var ke=0;ke<f.length;ke++){var me=u+h[Ee]+f[ke];(!e||o||me)&&r.push(me)}return r}});var xR=v((w6,IR)=>{IR.exports=hr;hr.Minimatch=Dt;var ka=function(){try{return require("path")}catch{}}()||{sep:"/"};hr.sep=ka.sep;var Yg=hr.GLOBSTAR=Dt.GLOBSTAR={},G$=SR(),TR={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Gg="[^/]",Xg=Gg+"*?",X$="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Y$="(?:(?!(?:\\/|^)\\.).)*?",RR=Q$("().*{}+?[]^$\\!");function Q$(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var DR=/\/+/;hr.filter=J$;function J$(t,e){return e=e||{},function(r,n,i){return hr(r,t,e)}}function Zn(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}hr.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return hr;var e=hr,r=function(i,s,o){return e(i,s,Zn(t,o))};return r.Minimatch=function(i,s){return new e.Minimatch(i,Zn(t,s))},r.Minimatch.defaults=function(i){return e.defaults(Zn(t,i)).Minimatch},r.filter=function(i,s){return e.filter(i,Zn(t,s))},r.defaults=function(i){return e.defaults(Zn(t,i))},r.makeRe=function(i,s){return e.makeRe(i,Zn(t,s))},r.braceExpand=function(i,s){return e.braceExpand(i,Zn(t,s))},r.match=function(n,i,s){return e.match(n,i,Zn(t,s))},r};Dt.defaults=function(t){return hr.defaults(t).Minimatch};function hr(t,e,r){return vl(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new Dt(e,r).match(t)}function Dt(t,e){if(!(this instanceof Dt))return new Dt(t,e);vl(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&ka.sep!=="/"&&(t=t.split(ka.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Dt.prototype.debug=function(){};Dt.prototype.make=Z$;function Z$(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(DR)}),this.debug(this.pattern,r),r=r.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Dt.prototype.parseNegate=eH;function eH(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}hr.braceExpand=function(t,e){return PR(t,e)};Dt.prototype.braceExpand=PR;function PR(t,e){return e||(this instanceof Dt?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,vl(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:G$(t)}var tH=1024*64,vl=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>tH)throw new TypeError("pattern is too long")};Dt.prototype.parse=rH;var ml={};function rH(t,e){vl(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return Yg;if(t==="")return"";var n="",i=!!r.nocase,s=!1,o=[],a=[],c,u=!1,f=-1,h=-1,m=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function S(){if(c){switch(c){case"*":n+=Xg,i=!0;break;case"?":n+=Gg,i=!0;break;default:n+="\\"+c;break}y.debug("clearStateChar %j %j",c,n),c=!1}}for(var I=0,M=t.length,k;I<M&&(k=t.charAt(I));I++){if(this.debug("%s	%s %s %j",t,I,n,k),s&&RR[k]){n+="\\"+k,s=!1;continue}switch(k){case"/":return!1;case"\\":S(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,I,n,k),u){this.debug("  in class"),k==="!"&&I===h+1&&(k="^"),n+=k;continue}y.debug("call clearStateChar %j",c),S(),c=k,r.noext&&S();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}o.push({type:c,start:I-1,reStart:n.length,open:TR[c].open,close:TR[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!o.length){n+="\\)";continue}S(),i=!0;var D=o.pop();n+=D.close,D.type==="!"&&a.push(D),D.reEnd=n.length;continue;case"|":if(u||!o.length||s){n+="\\|",s=!1;continue}S(),n+="|";continue;case"[":if(S(),u){n+="\\"+k;continue}u=!0,h=I,f=n.length,n+=k;continue;case"]":if(I===h+1||!u){n+="\\"+k,s=!1;continue}var O=t.substring(h+1,I);try{RegExp("["+O+"]")}catch{var x=this.parse(O,ml);n=n.substr(0,f)+"\\["+x[0]+"\\]",i=i||x[1],u=!1;continue}i=!0,u=!1,n+=k;continue;default:S(),s?s=!1:RR[k]&&!(k==="^"&&u)&&(n+="\\"),n+=k}}for(u&&(O=t.substr(h+1),x=this.parse(O,ml),n=n.substr(0,f)+"\\["+x[0],i=i||x[1]),D=o.pop();D;D=o.pop()){var j=n.slice(D.reStart+D.open.length);this.debug("setting tail",n,D),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Ve,dt,It){return It||(It="\\"),dt+dt+It+"|"}),this.debug(`tail=%j
   %s`,j,j,D,n);var oe=D.type==="*"?Xg:D.type==="?"?Gg:"\\"+D.type;i=!0,n=n.slice(0,D.reStart)+oe+"\\("+j}S(),s&&(n+="\\\\");var Ee=!1;switch(n.charAt(0)){case"[":case".":case"(":Ee=!0}for(var ke=a.length-1;ke>-1;ke--){var me=a[ke],tt=n.slice(0,me.reStart),ze=n.slice(me.reStart,me.reEnd-8),vt=n.slice(me.reEnd-8,me.reEnd),yt=n.slice(me.reEnd);vt+=yt;var _t=tt.split("(").length-1,Ke=yt;for(I=0;I<_t;I++)Ke=Ke.replace(/\)[+*?]?/,"");yt=Ke;var Ct="";yt===""&&e!==ml&&(Ct="$");var we=tt+ze+yt+Ct+vt;n=we}if(n!==""&&i&&(n="(?=.)"+n),Ee&&(n=m+n),e===ml)return[n,i];if(!i)return iH(t);var sr=r.nocase?"i":"";try{var Pe=new RegExp("^"+n+"$",sr)}catch{return new RegExp("$.")}return Pe._glob=t,Pe._src=n,Pe}hr.makeRe=function(t,e){return new Dt(t,e||{}).makeRe()};Dt.prototype.makeRe=nH;function nH(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?Xg:e.dot?X$:Y$,n=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===Yg?r:typeof o=="string"?sH(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}hr.match=function(t,e,r){r=r||{};var n=new Dt(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};Dt.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;ka.sep!=="/"&&(e=e.split(ka.sep).join("/")),e=e.split(DR),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],c=e;n.matchBase&&a.length===1&&(c=[s]);var u=this.matchOne(c,a,r);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Dt.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var c=e[s],u=t[i];if(this.debug(e,c,u),c===!1)return!1;if(c===Yg){this.debug("GLOBSTAR",[e,c,u]);var f=i,h=s+1;if(h===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;f<o;){var m=t[f];if(this.debug(`
globstar while`,t,f,e,h,m),this.matchOne(t.slice(f),e.slice(h),r))return this.debug("globstar found match!",f,o,m),!0;if(m==="."||m===".."||!n.dot&&m.charAt(0)==="."){this.debug("dot detected!",t,f,e,h);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,f,e,h),f===o))}var y;if(typeof c=="string"?(y=u===c,this.debug("string match",c,u,y)):(y=u.match(c),this.debug("pattern match",c,u,y)),!y)return!1}if(i===o&&s===a)return!0;if(i===o)return r;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function iH(t){return t.replace(/\\(.)/g,"$1")}function sH(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var kR=v(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.WillDeleteFilesFeature=nr.WillRenameFilesFeature=nr.WillCreateFilesFeature=nr.DidDeleteFilesFeature=nr.DidRenameFilesFeature=nr.DidCreateFilesFeature=void 0;var sn=require("vscode"),oH=xR(),Pn=He(),aH=Qu();function qR(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function cH(t,e){return t[e]}function OR(t,e,r){t[e]=r}var ei=class{constructor(e,r,n,i,s){this._filters=new Map,this._client=e,this._event=r,this._registrationType=n,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let r=qR(qR(e,"workspace"),"fileOperations");OR(r,"dynamicRegistration",!0),OR(r,this._clientCapability,!0)}initialize(e){var r;let n=(r=e.workspace)===null||r===void 0?void 0:r.fileOperations,i=n!==void 0?cH(n,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:aH.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let r=e.registerOptions.filters.map(n=>{let i=new oH.Minimatch(n.pattern.glob,ei.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,r)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,r){let n=await Promise.all(e.files.map(async s=>{let o=r(s),a=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==o.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let f=await ei.getFileType(o);if(f===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(f===sn.FileType.File&&u.kind===Pn.FileOperationPatternKind.file||f===sn.FileType.Directory&&u.kind===Pn.FileOperationPatternKind.folder)return!0}else if(u.kind===Pn.FileOperationPatternKind.folder&&await ei.getFileType(o)===sn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>n[o]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await sn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Aa=class extends ei{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._notificationType=n,this._accessUri=o,this._createParams=a}async send(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(r,n)}}},Qg=class extends Aa{constructor(e){super(e,sn.workspace.onDidCreateFiles,Pn.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didCreateFiles?i.didCreateFiles(e,r):r(e)}};nr.DidCreateFilesFeature=Qg;var Jg=class extends Aa{constructor(e){super(e,sn.workspace.onDidRenameFiles,Pn.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didRenameFiles?i.didRenameFiles(e,r):r(e)}};nr.DidRenameFilesFeature=Jg;var Zg=class extends Aa{constructor(e){super(e,sn.workspace.onDidDeleteFiles,Pn.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.didDeleteFiles?i.didDeleteFiles(e,r):r(e)}};nr.DidDeleteFilesFeature=Zg;var Na=class extends ei{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._requestType=n,this._accessUri=o,this._createParams=a}async send(e){let r=this.waitUntil(e);e.waitUntil(r)}async waitUntil(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},em=class extends Na{constructor(e){super(e,sn.workspace.onWillCreateFiles,Pn.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willCreateFiles?i.willCreateFiles(e,r):r(e)}};nr.WillCreateFilesFeature=em;var tm=class extends Na{constructor(e){super(e,sn.workspace.onWillRenameFiles,Pn.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willRenameFiles?i.willRenameFiles(e,r):r(e)}};nr.WillRenameFilesFeature=tm;var rm=class extends Na{constructor(e){super(e,sn.workspace.onWillDeleteFiles,Pn.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,r){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return i?.willDeleteFiles?i.willDeleteFiles(e,r):r(e)}};nr.WillDeleteFilesFeature=rm});var NR=v(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.LinkedEditingFeature=void 0;var uH=require("vscode"),nm=He(),lH=pr();function AR(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var im=class extends lH.TextDocumentFeature{constructor(e){super(e,nm.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let r=AR(AR(e,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r={provideLinkedEditingRanges:(n,i,s)=>{let o=this._client,a=(u,f,h)=>o.sendRequest(nm.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(u,f),h).then(o.protocol2CodeConverter.asLinkedEditingRanges,m=>o.handleFailedRequest(nm.LinkedEditingRangeRequest.type,m,null)),c=o.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,i,s,a):a(n,i,s)}};return[uH.languages.registerLinkedEditingRangeProvider(e.documentSelector,r),r]}};yl.LinkedEditingFeature=im});var om=v(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ProposedFeatures=Ki.CommonLanguageClient=void 0;var dH=pr(),fH=XT(),pH=Oh(),hH=QT(),gH=JT(),mH=ZT(),vH=tR(),yH=nR(),_H=sR(),CH=oR(),wH=cR(),bH=uR(),ao=kR(),EH=NR(),sm=class extends dH.BaseLanguageClient{constructor(e,r,n){super(e,r,n)}registerProposedFeatures(){this.registerFeatures(LR.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new pH.ConfigurationFeature(this)),this.registerFeature(new gH.TypeDefinitionFeature(this)),this.registerFeature(new hH.ImplementationFeature(this)),this.registerFeature(new fH.ColorProviderFeature(this)),this.registerFeature(new mH.WorkspaceFoldersFeature(this)),this.registerFeature(new vH.FoldingRangeFeature(this)),this.registerFeature(new yH.DeclarationFeature(this)),this.registerFeature(new _H.SelectionRangeFeature(this)),this.registerFeature(new CH.ProgressFeature(this)),this.registerFeature(new wH.CallHierarchyFeature(this)),this.registerFeature(new bH.SemanticTokensFeature(this)),this.registerFeature(new EH.LinkedEditingFeature(this)),this.registerFeature(new ao.DidCreateFilesFeature(this)),this.registerFeature(new ao.DidRenameFilesFeature(this)),this.registerFeature(new ao.DidDeleteFilesFeature(this)),this.registerFeature(new ao.WillCreateFilesFeature(this)),this.registerFeature(new ao.WillRenameFilesFeature(this)),this.registerFeature(new ao.WillDeleteFilesFeature(this))}};Ki.CommonLanguageClient=sm;var LR;(function(t){function e(r){return[]}t.createAll=e})(LR=Ki.ProposedFeatures||(Ki.ProposedFeatures={}))});var FR=v(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.terminate=void 0;var MR=require("child_process"),SH=require("path"),TH=process.platform==="win32",RH=process.platform==="darwin",DH=process.platform==="linux";function PH(t,e){if(TH)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),MR.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(DH||RH)try{var r=SH.join(__dirname,"terminateProcess.sh"),n=MR.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}_l.terminate=PH});var am=v((R6,jR)=>{"use strict";jR.exports=He()});var $R=v(In=>{"use strict";var IH=In&&In.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cm=In&&In.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&IH(e,t,r)};Object.defineProperty(In,"__esModule",{value:!0});cm(He(),In);cm(pr(),In);cm(om(),In)});var WR=v(Gt=>{"use strict";var xH=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UR=Gt&&Gt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xH(e,t,r)};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.SettingMonitor=Gt.LanguageClient=Gt.TransportKind=void 0;var Vi=require("child_process"),um=require("fs"),lm=require("path"),HR=TS(),ti=require("vscode"),ct=Vn(),qH=om(),OH=pr(),kH=FR(),at=am();UR(am(),Gt);UR($R(),Gt);var BR="^1.52.0",dm;(function(t){function e(r){return ct.string(r.command)}t.is=e})(dm||(dm={}));var Pt;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Pt=Gt.TransportKind||(Gt.TransportKind={}));var co;(function(t){function e(r){let n=r;return n&&n.kind===Pt.socket&&ct.number(n.port)}t.isSocket=e})(co||(co={}));var fm;(function(t){function e(r){return ct.string(r.module)}t.is=e})(fm||(fm={}));var pm;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(pm||(pm={}));var hm;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(hm||(hm={}));var gm=class extends qH.CommonLanguageClient{constructor(e,r,n,i,s){let o,a,c,u,f;ct.string(r)?(o=e,a=r,c=n,u=i,f=!!s):(o=e.toLowerCase(),a=e,c=r,u=n,f=i),f===void 0&&(f=!1),super(o,a,u),this._serverOptions=c,this._forceDebug=f;try{this.checkVersion()}catch(h){throw ct.string(h.message)&&this.outputChannel.appendLine(h.message),h}}checkVersion(){let e=HR.parse(ti.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${ti.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!HR.satisfies(e,BR))throw new Error(`The language client requires VS Code version ${BR} but received version ${ti.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),kH.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(f,h){if(!f&&!h)return;let m=Object.create(null);return Object.keys(process.env).forEach(y=>m[y]=process.env[y]),h&&(m.ELECTRON_RUN_AS_NODE="1",m.ELECTRON_NO_ASAR="1"),f&&Object.keys(f).forEach(y=>m[y]=f[y]),m}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let f=process.execArgv;return f?f.some(h=>n.some(m=>h.startsWith(m))||i.some(m=>h===m)):!1}function o(f){if(f.stdin===null||f.stdout===null||f.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(ct.func(a))return a().then(f=>{if(OH.MessageTransports.is(f))return this._isDetached=!!f.detached,f;if(pm.is(f))return this._isDetached=!!f.detached,{reader:new at.StreamMessageReader(f.reader),writer:new at.StreamMessageWriter(f.writer)};{let h;return hm.is(f)?(h=f.process,this._isDetached=f.detached):(h=f,this._isDetached=!1),h.stderr.on("data",m=>this.outputChannel.append(ct.string(m)?m:m.toString(e))),{reader:new at.StreamMessageReader(h.stdout),writer:new at.StreamMessageWriter(h.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||s()?c=u.debug:c=u.run:c=a,this._getServerWorkingDir(c.options).then(f=>{if(fm.is(c)&&c.module){let h=c,m=h.transport||Pt.stdio;if(h.runtime){let y=[],S=h.options||Object.create(null);S.execArgv&&S.execArgv.forEach(D=>y.push(D)),y.push(h.module),h.args&&h.args.forEach(D=>y.push(D));let I=Object.create(null);I.cwd=f,I.env=r(S.env,!1);let M=this._getRuntimePath(h.runtime,f),k;if(m===Pt.ipc?(I.stdio=[null,null,null,"ipc"],y.push("--node-ipc")):m===Pt.stdio?y.push("--stdio"):m===Pt.pipe?(k=at.generateRandomPipeName(),y.push(`--pipe=${k}`)):co.isSocket(m)&&y.push(`--socket=${m.port}`),y.push(`--clientProcessId=${process.pid.toString()}`),m===Pt.ipc||m===Pt.stdio){let D=Vi.spawn(M,y,I);return!D||!D.pid?Promise.reject(`Launching server using runtime ${M} failed.`):(this._serverProcess=D,D.stderr.on("data",O=>this.outputChannel.append(ct.string(O)?O:O.toString(e))),m===Pt.ipc?(D.stdout.on("data",O=>this.outputChannel.append(ct.string(O)?O:O.toString(e))),Promise.resolve({reader:new at.IPCMessageReader(D),writer:new at.IPCMessageWriter(D)})):Promise.resolve({reader:new at.StreamMessageReader(D.stdout),writer:new at.StreamMessageWriter(D.stdin)}))}else{if(m===Pt.pipe)return at.createClientPipeTransport(k).then(D=>{let O=Vi.spawn(M,y,I);return!O||!O.pid?Promise.reject(`Launching server using runtime ${M} failed.`):(this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),D.onConnected().then(x=>({reader:x[0],writer:x[1]})))});if(co.isSocket(m))return at.createClientSocketTransport(m.port).then(D=>{let O=Vi.spawn(M,y,I);return!O||!O.pid?Promise.reject(`Launching server using runtime ${M} failed.`):(this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),D.onConnected().then(x=>({reader:x[0],writer:x[1]})))})}}else{let y;return new Promise((S,I)=>{let M=h.args&&h.args.slice()||[];m===Pt.ipc?M.push("--node-ipc"):m===Pt.stdio?M.push("--stdio"):m===Pt.pipe?(y=at.generateRandomPipeName(),M.push(`--pipe=${y}`)):co.isSocket(m)&&M.push(`--socket=${m.port}`),M.push(`--clientProcessId=${process.pid.toString()}`);let k=h.options||Object.create(null);if(k.env=r(k.env,!0),k.execArgv=k.execArgv||[],k.cwd=f,k.silent=!0,m===Pt.ipc||m===Pt.stdio){let D=Vi.fork(h.module,M||[],k);o(D),this._serverProcess=D,D.stderr.on("data",O=>this.outputChannel.append(ct.string(O)?O:O.toString(e))),m===Pt.ipc?(D.stdout.on("data",O=>this.outputChannel.append(ct.string(O)?O:O.toString(e))),S({reader:new at.IPCMessageReader(this._serverProcess),writer:new at.IPCMessageWriter(this._serverProcess)})):S({reader:new at.StreamMessageReader(D.stdout),writer:new at.StreamMessageWriter(D.stdin)})}else m===Pt.pipe?at.createClientPipeTransport(y).then(D=>{let O=Vi.fork(h.module,M||[],k);o(O),this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),D.onConnected().then(x=>{S({reader:x[0],writer:x[1]})})}):co.isSocket(m)&&at.createClientSocketTransport(m.port).then(D=>{let O=Vi.fork(h.module,M||[],k);o(O),this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),O.stdout.on("data",x=>this.outputChannel.append(ct.string(x)?x:x.toString(e))),D.onConnected().then(x=>{S({reader:x[0],writer:x[1]})})})})}}else if(dm.is(c)&&c.command){let h=c,m=h.args||[],y=Object.assign({},h.options);y.cwd=y.cwd||f;let S=Vi.spawn(h.command,m,y);return!S||!S.pid?Promise.reject(`Launching server using command ${h.command} failed.`):(S.stderr.on("data",I=>this.outputChannel.append(ct.string(I)?I:I.toString(e))),this._serverProcess=S,this._isDetached=!!y.detached,Promise.resolve({reader:new at.StreamMessageReader(S.stdout),writer:new at.StreamMessageWriter(S.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,r){if(lm.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=lm.join(n,e);if(um.existsSync(i))return i}if(r!==void 0){let i=lm.join(r,e);if(um.existsSync(i))return i}return e}_mainGetRootPath(){let e=ti.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{um.lstat(r,(i,s)=>{n(!i&&s.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let r;try{r=JSON.parse(e)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};Gt.LanguageClient=gm;var mm=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return ti.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new ti.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?ti.workspace.getConfiguration(r).get(n,!1):ti.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Gt.SettingMonitor=mm});var KR=v((I6,zR)=>{"use strict";zR.exports=WR()});var jH={};oD(jH,{activate:()=>MH,deactivate:()=>FH});module.exports=aD(jH);var $m=require("os"),Hm=require("vscode"),Bm=Qi(bl());function ar(t){return t.map(e=>String.fromCharCode(e)).join("")}function Um(t){return t&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function Wm(t,e){let r=new Bm.XMLHttpRequest;return r.open("POST",t.toString(!0),!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),new Promise(n=>{r.onreadystatechange=function(){this.readyState==4&&n(this.status)},r.ontimeout=()=>{n(void 0)},r.timeout=5e3,r.send(e)})}function xl(t,e){e==!0&&(t=t.with({query:"from=vscode"})),jm()(t.toString(!0))}function ql(t){return t&&t!=""&&Hm.extensions.getExtension(t)!=null}function zm(t,e){var r=new Date(t);return r.setDate(r.getDate()+e),r}function ci(t=""){var e;try{return(e=(0,$m.userInfo)().username)!=null?e:t}catch(r){return t}}var hc=require("vscode"),ey=Qi(bl());var ty=require("fs");var gc="dev1",ry=[45,45,45,45,45,66,69,71,73,78,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45,10,77,73,71,102,77,65,48,71,67,83,113,71,83,73,98,51,68,81,69,66,65,81,85,65,65,52,71,78,65,68,67,66,105,81,75,66,103,81,67,118,67,119,109,55,98,72,43,79,117,73,70,67,77,102,68,85,79,48,121,86,85,84,104,73,10,90,113,50,116,122,50,84,81,73,50,85,100,50,80,103,69,107,104,55,74,100,111,51,51,80,77,49,50,67,76,66,108,71,86,89,106,105,107,82,65,100,112,75,118,104,105,115,66,48,101,43,102,47,51,119,43,73,116,56,109,115,74,114,67,10,86,84,114,120,75,116,88,116,65,70,83,115,83,55,51,83,110,110,98,121,74,89,121,105,120,114,115,69,67,65,85,121,101,116,122,99,71,52,116,54,52,47,48,57,108,74,117,110,79,97,85,106,71,98,74,80,50,87,116,106,51,47,116,50,10,57,90,99,67,122,119,68,85,84,89,81,43,56,56,78,102,48,81,73,68,65,81,65,66,10,45,45,45,45,45,69,78,68,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45],ls=[112,104,112,84,111,111,108,115,46,108,105,99,101,110,115,101],TI=[104,116,116,112,115,58,47,47,97,112,105,46,100,101,118,115,101,110,115,101,46,99,111,109,47,108,105,99,101,110,115,101,47],RI=[38,109,97,99,104,105,110,101,95,105,100,61];function ny(t){if(t){let e=t.match(/v?([0-9]+)\.([0-9]+)\.([0-9]+)/);if(e)return{major:parseInt(e[1]),minor:parseInt(e[2]),build:parseInt(e[3])}}}function iy(t){if(t){var e=t.name+"#"+t.license+"#"+t.expiration;typeof t.fallbackdate=="string"&&(e+=`#${t.fallbackdate}`);var r=Buffer.from(t.signature,"base64").toString("binary");return new(Ul())(ar(ry)).verify(e,r,"utf8","binary")}else return!1}function sy(t){return new(Ul())(ar(ry)).encrypt(t,"base64")}function oy(t){return G(this,null,function*(){try{let e=JSON.parse((yield t.secrets.get(ay()))||t.globalState.get(DI())||t.globalState.get(gc+ar(ls))||hc.workspace.getConfiguration().get(ar(ls)));return e&&!e.name&&(e.name=Wl()(ci())),e}catch(e){return}})}var DI=()=>`${gc}${ar(ls)}.${ci()}`,ay=()=>`${gc}${ar(ls)}.data`,PI=()=>`${ar(ls)}.enc.${ci()}`,cy=()=>`${gc}${ar(ls)}.enc`,II=(t,e)=>G(void 0,null,function*(){return yield t.secrets.store(cy(),e)});function xI(t){return G(this,null,function*(){try{return(yield t.secrets.get(cy()))||t.globalState.get(PI())}catch(e){return}})}function uy(t,e,r=void 0){return G(this,null,function*(){yield t.secrets.store(ay(),e),r&&(yield II(t,r))})}function qI(t){return G(this,null,function*(){try{let e=JSON.parse((0,ty.readFileSync)(t.asAbsolutePath("out/server/version.json"),{encoding:"utf-8"}));return{date:new Date(e.built),version:e.version}}catch(e){}return{version:t.extension.packageJSON.version,date:new Date}})}function OI(t,e,r=void 0){return G(this,null,function*(){var i,s;if(xI(t)!==void 0){let o=yield oy(t);if(typeof r=="undefined"&&o&&o.expiration&&iy(o))try{r=new Date(o.expiration)}catch(u){}if(typeof r=="undefined"||typeof(o==null?void 0:o.fallbackdate)=="string"&&o.fallbackdate=="")return;let a=(i=yield e.releases)!=null?i:[],c=typeof(o==null?void 0:o.fallbackdate)=="string"?new Date(o.fallbackdate):new Date(r.valueOf()-364*24*60*60*1e3);var n=ny((s=a.filter(u=>u.date&&u.date<=c).sort((u,f)=>f.date.valueOf()-u.date.valueOf()).at(0))==null?void 0:s.version);if(n&&(n.major>1||n.major==1&&n.minor>=52))return n}})}function ds(t,e,r=void 0){return G(this,null,function*(){var o;r==null&&(r=yield oy(t));let n=1731;if(r)if(iy(r)){let a=new Date(r.expiration);if(new Date>a&&e){var i=yield OI(t,e,a),s=ny((o=yield qI(t))==null?void 0:o.version);if(s&&i&&(i.major>s.major||i.major==s.major&&i.minor>=s.minor))return 1134;n=3417}else return 1134}else n=1743;if(t.extension.id.toLowerCase()!="devsense.phptools-vscode".toLowerCase()){let a=hc.extensions.getExtension("devsense.phptools-vscode");if(a&&a.activate){let c=yield a.activate();c&&c.authentication&&(n=yield c.authentication())}}return n})}function ly(t,e,r,n){return G(this,null,function*(){if(!r){yield n==null?void 0:n.onfail("empty");return}let i=`method=${t}`+ar(RI)+Wl()(ci())+`&api=3.0&${e}=${r}`,s=`${ar(TI)}?${i}`,o=new ey.XMLHttpRequest;o.open("GET",s,!0),yield new Promise(a=>{o.onreadystatechange=function(){return G(this,null,function*(){if(this.readyState==4){if(this.status==200)yield n.onsuccess(this.responseText);else{var c,u;switch(this.status){case 404:case 401:c="invalid";break;case 403:c="access";break;case 500:c="error";break;case 0:c="connection_error";break;default:c="unknown_error";break}if(this.responseText)try{let f=JSON.parse(this.responseText);f.message&&(u=f.message)}catch(f){}yield n.onfail(c,u)}a()}})},o.ontimeout=()=>G(this,null,function*(){yield n.onfail("timeout"),a(void 0)}),o.timeout=5e3,o.send()})})}var dy=require("fs");var zl=class{constructor(){this.dictionary={};this.locale="en";try{if(process&&process.env){let e=JSON.parse(process.env.VSCODE_NLS_CONFIG);e&&typeof e.locale=="string"&&(this.locale=e.locale)}}catch(e){}}read_i18n(e){try{let r=Buffer.from((0,dy.readFileSync)(e)).toString("utf-8");return JSON.parse(r)}catch(r){return{}}}localize(e){let r=this.dictionary[e];if(typeof r=="string")return r}load(e){try{this.dictionary=Object.assign({},this.read_i18n(e.asAbsolutePath("package.nls.json")),this.read_i18n(e.asAbsolutePath("package.nls.en.json")),this.read_i18n(e.asAbsolutePath(`package.nls.${this.locale}.json`)))}catch(r){}}},fy=new zl;function py(t){return G(this,null,function*(){yield fy.load(t)})}function rt(t,e){return kI(t,e)}function kI(t,e){var r,n;return(n=(r=fy.localize(t))!=null?r:e)!=null?n:t}var jn=class{constructor(){this.disposables=[];this.disposed=!1}isDisposed(){return this.disposed}push(...e){this.disposables.push(...e)}onDispose(){}dispose(){try{this.onDispose()}catch(e){}for(let e of this.disposables)e.dispose();this.disposables=[],this.disposed=!0}};var hy=require("vscode");var gu=Qi(Yw()),en=require("vscode");var mu=require("fs");var bb=Qi(_b()),Eb=require("path"),hu=Qi(Jt());var PA=[101,56,52,97,53,57,53,55,45,100,54,56,48,45,52,99,99,53,45,57,50,54,55,45,53,101,53,101,51,100,48,97,56,100,53,55],tp=class{constructor(e){this.client=e;gu.Configuration.setAutoCollectExceptions(!0).setUseDiskRetryCaching(!0).setAutoCollectConsole(!0,!0).setInternalLogging(!0,!0)}init(e,r){let n=xA(e),i=ci();this.client.context.tags["ai.device.model"]=`Visual Studio Code ${en.version}`,this.client.context.tags["ai.user.id"]=i,this.client.context.tags["ai.user.accountId"]=wb()(i).toString(),this.client.context.tags["ai.session.id"]=bb.v1(),this.client.context.tags["ai.application.ver"]=n.version,this.client.commonProperties=Object.bind(this.client.commonProperties,r,{"process.platform":process.platform,"process.arch":process.arch,"extension.id":e.extension.id});for(let s in n)this.client.commonProperties["server."+s]=n[s];this.track("extension loaded",{"copilot.enabled":ep("github.copilot"),"phptools.enabled":ep("devsense.phptools-vscode"),"intelephense.enabled":ep("bmewburn.vscode-intelephense-client")})}track(e,r,n){if(!en.env.isTelemetryEnabled||!this.client)return;let i={name:e,properties:Object.bind({},r)};n&&(i.measurements=n),this.client.trackEvent(i)}metric(e,r,n,i,s,o){this.client.trackMetric({name:e,value:r,count:n,min:i,max:s,stdDev:o})}error(e,r,n){if(n=Object.bind({},n),!en.env.isTelemetryEnabled){var i=en.workspace.getConfiguration().get("telemetry.telemetryLevel");if(i!="error"&&(i!="crash"||r!="critical"))return}this.client.trackException({exception:e,severity:r=="critical"?hu.SeverityLevel.Critical:r=="error"?hu.SeverityLevel.Error:hu.SeverityLevel.Warning,properties:n})}},Ut=new tp(new gu.TelemetryClient(ar(PA)));function IA(t){let e="out/server/version.json";return t?t.asAbsolutePath(e):(0,Eb.join)(__filename,"../../..",e)}function xA(t){let e=IA(t);try{if((0,mu.existsSync)(e))return JSON.parse((0,mu.readFileSync)(e,"utf8"))||{}}catch(n){}let r=t.extension.packageJSON.version;return{target:`${process.platform}-${process.arch}`,version:r}}function ep(t){return en.extensions.getExtension(t)!==void 0}var Ue=require("vscode");var vu=require("vscode");function Sb(t){return new vu.Range(t.start.line,t.start.character,t.end.line,t.end.character)}function Tb(t){let e=t.reduce((i,s)=>i+s,0)/t.length,n=t.map(i=>bm(i-e,2)).reduce((i,s)=>i+s,0)/t.length;return Math.sqrt(n)}function Rb(t,e,r){let n=t.trim();for(let i=r.line-1;i>=0;i--){let s=e.lineAt(i);if(!s.isEmptyOrWhitespace)return s.text.trim()===n}return!1}function Db(t,e,r){let n=t.trim();for(let i=r.line+1;i<e.lineCount;i++){let s=e.lineAt(i);if(!s.isEmptyOrWhitespace)return s.text.trim()===n}return!1}function Pb(t){return t.trim()===""}function Ib(){return G(this,null,function*(){try{yield vu.commands.executeCommand("editor.action.triggerParameterHints")}catch(t){console.error("Error opening Signature Help:",t)}})}var xb=[")","]","}"],qb=["(","[","{"];function qA(t,e){let r=t.substring(e.length).split("");for(let n=0;n<r.length;n++)if(r[n]!==" ")return xb.includes(r[n])?r[n]:void 0}function OA(t){let e=t.split("");for(let r=t.length-1;r>0;r--)if(qb.includes(e[r]))return e[r]}function kA(t,e){let r=qA(t,e),n=OA(e);return n!==void 0&&r!==void 0&&xb.indexOf(r)===qb.indexOf(n)}function Ob(t,e){return t.startsWith(e)&&t!==e&&!kA(t,e)}var dr=require("vscode");var Ne=class{static get reactivate(){return rt("reactivate")}static get activate(){return rt("activate")}static get webview_welcome_showafterupdate(){return rt("webview.welcome.showafterupdate")}static get buy(){return rt("buy")}static get webview_welcome_allnews(){return rt("webview.welcome.allnews")}static get description(){return rt("description")}static get dismiss(){return rt("dismiss")}static get renew(){return rt("renew")}static get trial_expired(){return rt("trial.expired")}static get webview_title(){return rt("webview.title")}static get intelliphp_inlineSuggestionsEnabled_description(){return rt("intelliphp.inlineSuggestionsEnabled.description")}static get capabilities_virtualWorkspaces_description(){return rt("capabilities.virtualWorkspaces.description")}static get subscribe(){return rt("subscribe")}static get title(){return rt("title")}static get webview_welcome_more(){return rt("webview.welcome.more")}static get capabilities_untrustedWorkspaces_description(){return rt("capabilities.untrustedWorkspaces.description")}static get showmore(){return rt("showmore")}static get invalidMail(){return rt("invalidMail")}static get intelliphp_releasenotes_title(){return rt("intelliphp.releasenotes.title")}};var kb=new dr.EventEmitter,Ab=kb.event;function rp(t){return G(this,null,function*(){if((yield ds(t,void 0))==1134)return;let e=t.globalState.get("intelliphp.texp",void 0);return(e==null||e==""||e==null||!e)&&(yield t.globalState.update("intelliphp.texp",e=zm(new Date,30).toUTCString())),e==null||e==""?void 0:new Date(e)})}function oa(t){return G(this,null,function*(){if(t.globalState.get("intelliphp.previewused",!1)==!0||(yield ds(t,void 0))==1134)return!0;let e=yield rp(t);if(e){if(new Date<=new Date(e))return!0;MA(t)}return!1})}function MA(t){return G(this,null,function*(){t.globalState.get("intelliphp.tnot")!=1&&(yield t.globalState.update("intelliphp.tnot",1),(yield dr.window.showInformationMessage(Ne.trial_expired,Ne.activate,Ne.dismiss))==Ne.activate&&(yield dr.commands.executeCommand("intelliphp.releasenotes")))})}function Nb(t,e){return G(this,null,function*(){if(!e)return;let r,n=!1;if(e.length>32)try{var i=JSON.parse(e);i.signature&&i.license&&(r=e)}catch(o){r=void 0}if(r||(yield dr.window.withProgress({location:dr.ProgressLocation.Notification,title:Ne.activate},()=>G(this,null,function*(){yield ly("activate_vscode","key",sy(e).replace(/\+/g,"-").replace(/\//g,"|").replace(/=/g,"_"),{onsuccess:o=>G(this,null,function*(){r=o}),onfail:(o,a)=>G(this,null,function*(){dr.window.showInformationMessage(a!=null?a:o)})})}))),r){yield uy(t,r);var s=yield ds(t,void 0);switch(kb.fire(n=s==1134),s){case 3417:dr.window.showErrorMessage("The key is expired.");break;case 1134:dr.window.showInformationMessage("Thank you!");break;default:dr.window.showErrorMessage("Something went wrong");break}}return n})}var Lb="IntelliPHP.postCompletionCommand",yu=class extends jn{constructor(r,n){super();this.context=r;this.client=n;this.telemetryData={completionRequested:0,completionCancelled:0,completionAccepted:0,completionSent:0,latency:[]};this.enabled=!0;this.license=!1;this.push(Ue.languages.registerInlineCompletionItemProvider({language:"php"},this),Ue.commands.registerCommand(Lb,i=>G(this,null,function*(){let{properties:s,measurements:o}=i;this.telemetryData.completionAccepted++,Ib(),Ut.track("intelliphp.completionAccepted",s,o)})),Ue.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration("intelliphp.inlineSuggestionsEnabled")&&this.updateEnabledDisabled()}),Ue.window.onDidChangeActiveTextEditor(i=>{this.license==!1&&this.updateLicense()})),this.updateEnabledDisabled(),this.updateLicense()}updateEnabledDisabled(){this.enabled=Ue.workspace.getConfiguration().get("intelliphp.inlineSuggestionsEnabled",!0)!=!1}updateLicense(){return G(this,null,function*(){this.license=yield oa(this.context)})}onDispose(){super.onDispose(),this._telemetryTimeout&&(clearInterval(this._telemetryTimeout),this._telemetryTimeout=void 0)}sendMeassurements(){let r=this.telemetryData.latency;if(r.length===0)return;let n=r.reduce((a,c)=>a+c,0)/r.length,i=Math.min(...r),s=Math.max(...r),o=Tb(r);Ut.metric("intelliphp.latency",n,r.length,i,s,o),r.length=0,Ut.metric("intelliphp.surfaceRate",this.telemetryData.completionSent/this.telemetryData.completionRequested,this.telemetryData.completionSent),Ut.metric("intelliphp.acceptanceRate",this.telemetryData.completionAccepted/this.telemetryData.completionSent,this.telemetryData.completionSent),this.telemetryData.completionRequested=0,this.telemetryData.completionSent=0,this.telemetryData.completionAccepted=0,this.telemetryData.completionCancelled=0}getPostCompletionCommand(r){return{command:Lb,title:"Post Completion Command",arguments:[r]}}isSuggestionReusable(r,n,i,s,o,a,c){if(r||n)return!1;c=c.replace(/\s+/g," "),a=a.replace(/\s+/g," "),o=o.replace(/\s+/g," ");let u=s!==void 0&&c.endsWith(s),f=s==null&&o.startsWith(c);return(i==null||i==s||u||f)&&o.startsWith(c)&&a!=o&&!Pb(a)}provideInlineCompletionItems(r,n,i,s){return G(this,null,function*(){var f,h;if(!this.enabled||!this.license)return[];try{let m=Date.now();this.telemetryData.completionRequested++;var o=r.lineAt(n.line).text,a=o.substring(0,n.character);if(Ob(o,a))return;if(this.previousSugesstion){let x=this.previousSugesstion;var c=x.document!==r,u=x.line!==n.line;if(this.isSuggestionReusable(c,u,(f=i.selectedCompletionInfo)==null?void 0:f.text,x.selectedCompletion,x.fullLineCompletion,o,a))return this.updateSuggestion(x,n,o,r),[x.completionItem]}yield this.client.onReady();let y=(h=i.selectedCompletionInfo)==null?void 0:h.text,S=yield this.client.sendRequest("devsense/composeCompletion",{textDocument:{uri:r.uri.toString(!0)},selectedCompletion:y,position:{line:n.line,character:n.character}},s);if(s.isCancellationRequested&&this.telemetryData.completionCancelled++,s.isCancellationRequested||!S||!S.suggestions||!S.suggestions.length)return;let I;if(S.range){let x=S.range;I=Sb(x)}let M=Date.now()-m,k=i.selectedCompletionInfo!==void 0&&r.getText(i.selectedCompletionInfo.range);k!==void 0&&a.endsWith(k)&&(a=a.slice(0,a.length-k.length));let D=S.suggestions.filter(x=>{var j=a+x.text;return!Rb(j,r,n)&&!Db(j,r,n)}).map(x=>{var j=x.text,oe=new Ue.Range(new Ue.Position(n.line,0),new Ue.Position(n.line,o.length));let Ee={measurements:{completionLength:j.trim().length,latencyMs:M,snippetsCount:x.snippetsCount,confidence:x.confidence,sequenceConfidence:x.sequenceConfidence}};return new Ue.InlineCompletionItem(new Ue.SnippetString(this.escapeSnippetString(a)+x.snippet),oe,this.getPostCompletionCommand(Ee))}),O=D.length>0?D[0]:null;return this.previousSugesstion={fullLineCompletion:a+S.suggestions[0].text,fullLineCompletionSnippet:this.escapeSnippetString(a)+S.suggestions[0].snippet,completionItem:O,document:r,line:n.line,selectedCompletion:y},O!=null&&this.telemetryData.completionSent++,this.telemetryData.latency.push(M),[O]}catch(m){Ut.error(m,"error")}})}updateSuggestion(r,n,i,s){var o=r.fullLineCompletion,a=new Ue.Range(new Ue.Position(n.line,0),new Ue.Position(n.line,i.length));r.completionItem.insertText=new Ue.SnippetString(r.fullLineCompletionSnippet),r.completionItem.range=a}escapeSnippetString(r){return r.replaceAll("$","\\$")}};var _u=class{constructor(e){this.client=e}createNamedPipe(){return G(this,null,function*(){return yield this.client.onReady(),yield this.client.sendRequest("devsense/createNamedPipe",{})})}};var GR=require("child_process"),Cl=require("fs"),ym=require("os"),XR=require("vscode"),YR=Qi(KR());var vm=class extends Error{constructor(e,r,n){super(r),this.name=e,this.message=r,this.stack=n}};function VR(t){t.exception?Ut.error(new vm(t.exception,t.message,t.stack),"error",{source:"language server",stack:t.stack,data:t.data}):Ut.track(t.event,{message:t.message})}var Gi=class extends YR.LanguageClient{constructor(e){super("IntelliPHP Language Server",Gi.serverOptions(e),Gi.clientOptions()),this.onTelemetry(r=>VR(r))}dispose(){return G(this,null,function*(){yield this.stop()})}static serverOptions(e){let r=e.asAbsolutePath("out/server/intelliphp.ls"),n=r,i=[];if(e.extensionMode==XR.ExtensionMode.Development&&(0,Cl.existsSync)(`${r}.dll`))n="dotnet",i=[`${r}.dll`];else try{(0,ym.platform)()!="win32"&&(0,Cl.chmodSync)(r,365),(0,ym.platform)()=="darwin"&&(0,GR.execSync)(`codesign -s - "${r}"`)}catch(s){}return{run:{command:n,args:i,options:{env:{MALLOC_TRIM_THRESHOLD_:1e5}}},debug:{command:n,args:i.concat(["--debug"])}}}static clientOptions(){return{documentSelector:[{language:"php"}],initializationOptions:{}}}};var ir=require("vscode");var Xt=require("vscode");var Xi=class extends jn{constructor(r,n){super();this.context=r;this.id=n;this.majorVersion=Xi.majorVersion(r)}show(){return G(this,null,function*(){yield Xt.window.withProgress({location:Xt.ProgressLocation.Window},()=>G(this,null,function*(){this.panel==null?(this.panel=Xt.window.createWebviewPanel(this.id,this.title(),Xt.ViewColumn.One,{enableScripts:!0,enableCommandUris:!0}),this.panel.onDidDispose(()=>{this.panel=void 0}),this.panel.webview.onDidReceiveMessage(r=>G(this,null,function*(){return yield this.onMessage(r)})),this.panel.onDidChangeViewState(r=>G(this,null,function*(){return yield this.onViewState()}))):this.panel.reveal(Xt.ViewColumn.One),this.panel.webview.html=yield this.html()}))})}static hljsStyle(){switch(Xt.window.activeColorTheme.kind){case Xt.ColorThemeKind.Dark:case Xt.ColorThemeKind.HighContrast:return"dark.min.css";case Xt.ColorThemeKind.Light:return"default.min.css"}}onMessage(r){return G(this,null,function*(){if(r&&typeof r.command=="string")switch(r.command){case"loaded":yield this.onViewState();break}})}onViewState(){return G(this,null,function*(){})}postMessage(r){return G(this,null,function*(){this.panel&&(yield this.panel.webview.postMessage(r))})}title(){return this.id}html(){return G(this,null,function*(){let r=this.getUri("webviews","toolkit.min.js"),n=this.getUri("webviews","main.js"),i=this.getUri("webviews","main.css"),s=this.getUri("webviews",Xi.hljsStyle());return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link href="${i}" rel="stylesheet" />
                <link href="${s}" rel="stylesheet" />
                <script type="module" src="${r}"><\/script>
                <script type="module" src="${n}"><\/script>
                <title>${this.title}</title>
            </head>
            <body>
                <div id='content'>
                    ${yield this.htmlBody()}
                </div>
            </body>
            </html>`})}htmlBody(){return G(this,null,function*(){return""})}getUri(...r){return this.panel.webview.asWebviewUri(Xt.Uri.joinPath(this.context.extensionUri,...r))}static majorVersion(r){let n=r.extension.packageJSON.version,i=n.split(".");return i.length>=2?`${i[0]}.${i[1]}`:n}dispose(){this.panel&&(this.panel.dispose(),this.panel=void 0),super.dispose()}};var AH="https://www.devsense.com/download/vscode?from=vscode",NH="https://www.devsense.com/purchase?from=vscode",QR="https://docs.devsense.com/vscode/editor/intelliphp?from=vscode",LH="https://marketplace.visualstudio.com/items?itemName=DEVSENSE.phptools-vscode",ri=class extends Xi{constructor(r,n){super(r,"intelliphp.webview.welcome");this.getclient=n;this.push(ir.commands.registerCommand("intelliphp.releasenotes",()=>G(this,null,function*(){return this.show()})));let i=r.globalState,s=i.get("welcome.lastversion"),o=this.majorVersion;if(s!=o&&i.get("welcome.enabled")!=!1){let a=`${o}.`;ql("devsense.phptools-vscode")&&s!=a?i.update("welcome.lastversion",a):(i.update("welcome.lastversion",o),this.show())}Ab(()=>this.onViewState())}static subscribe(r){return G(this,null,function*(){Um(r)?ir.window.withProgress({location:ir.ProgressLocation.Notification,title:Ne.subscribe},()=>G(this,null,function*(){let n=ir.Uri.from({scheme:"https",authority:"newsletter.devsense.com",path:"/subscription/form",query:""}),i=`EMAIL=${r}&l=eae87e6d-9c24-44ad-9ba5-998039565684&l=aeed3aa0-48e2-40a0-b297-0480d71572f9`;switch(yield Wm(n,i)){case 200:ir.window.showInformationMessage("Thank you!");break;default:ir.window.showErrorMessage("Error was returned from the server, please try again later.");break}})):ir.window.showErrorMessage(Ne.invalidMail),Ut.track("subscribe newsletter",{email:r})})}onMessage(r){return G(this,null,function*(){if(r&&typeof r.command=="string")switch(r.command){case"shownews":this.context.globalState.update("welcome.enabled",!!r.value);break;case"buy":xl(ir.Uri.parse(NH));break;case"activate":r.value&&(yield Nb(this.context,r.value));break;case"activate-phptools":yield ir.commands.executeCommand("phptools.activate");break;case"changelog":xl(ir.Uri.parse(QR),!0);break;case"subscribe":ri.subscribe(r.email);break;default:wl(ri.prototype,this,"onMessage").call(this,r);break}wl(ri.prototype,this,"onMessage").call(this,r)})}onViewState(){return G(this,null,function*(){yield this.postMessage({command:"l",data:{valid:yield oa(this.context)}})})}title(){return`${this.context.extension.packageJSON.displayName}: ${this.majorVersion}`}imgsrc(r){return this.getUri("webviews","welcome",r).toString()}htmlBody(){return G(this,null,function*(){Ut.track("welcome view");let r=yield oa(this.context),n=(yield ds(this.context,void 0))!=1731,i=yield rp(this.context),s=i&&!n?i<new Date?`Trial expired on ${i.toLocaleDateString()}`:`Trial expires on ${i.toLocaleDateString()}`:"",o;return ql("devsense.phptools-vscode")?o=`
                <div class='row banner'>
                    <div class="column">
                        <p id='txt-activated' class='hidden'>
                            IntelliPHP is active \u{1F389} <b>${s}</b>
                        </p>
                        <p id='txt-not-activated' class='hidden'>
                            Buy PHP Tools for VS Code to use IntelliPHP.
                        </p>
                    </div>
                    <div class="column text-right">
                        <vscode-button id='btn-activate-phptools' class='v-middle'>${r?Ne.reactivate:Ne.activate} \u{1F513}</vscode-button>
                    </div>
                </div>
            `:o=`
                <div class='row banner'>
                    <div class="column">
                        <p id='txt-activated' class='hidden'>
                            Product is activated! <b>${s}</b>
                        </p>
                        <p id='txt-not-activated' class='hidden'>
                            Buy PHP Tools for VS Code to use IntelliPHP.
                        </p>
                    </div>
                    <div class="column text-right">
                        <vscode-text-field id='txt-license' placeholder="Enter License Key ..." class='v-middle'></vscode-text-field>
                        <vscode-button id='btn-activate' class='v-middle'>${r?Ne.reactivate:Ne.activate} \u{1F513}</vscode-button>
                    </div>
                </div>
            `,`
<table style='border:0;width:100%;'>
    <tr>
        <td>
            <h1>${Ne.webview_title} (${this.majorVersion})</h1>
            <span id='subtitle' class=''>${Ne.description} </span>
        </td>
        <td class='text-right'>
            <br/>
            <vscode-button id='btn-buy'>${n?`${Ne.renew} \u27F3`:`${Ne.buy} \u{1F4E6}`}</vscode-button>
        </td>
    </tr>
</table>

<vscode-divider></vscode-divider>
${o}
<div class='row'>
    <div class='column-2'>
        <h2>Your Local AI</h2>
        <p>IntelliPHP runs locally, without Internet connection. Your code never leaves your machine. It is your own personal inline suggestions assistant.</p>
        <br/>
        <p>Full statement suggestions are shown as you type, confirmed with <code>TAB</code> key.</p>
    </div>
    <div class='column-2 text-right'>
        <h2>Suggestions</h2>
        <img src='${this.imgsrc("suggest.png")}' />
    </div>
</div>
<div class='row'>
    <div class='column-2'>
        <h2>Fast</h2>
        <p>Your local AI is fast. Get suggestions as you type in milliseconds. IntelliPHP is memory efficient and eager to help.</p>
        <br/>
        <p>Code completion with <a href='${LH}'>PHP extension</a> gets better. Most probable completion is pre-selected for even less typing.</p>
    </div>
    <div class='column-2 text-right'>
        <h2>Pre-Select</h2>
        <img src='${this.imgsrc("preselect.png")}' />
    </div>
</div>

<div class='above-footer row'>
    <div class="column">
        <vscode-button id='btn-changelog'>${Ne.showmore}</vscode-button>
    </div>
    <div class="column text-right">
        <vscode-text-field id='txt-subscribe' placeholder="e-mail ..." class='v-middle'></vscode-text-field>
        <vscode-button id='btn-subscribe' class='v-middle'>${Ne.subscribe}</vscode-button>    
    </div>
</div>

<vscode-divider></vscode-divider>

<div id='footer' class='row'>
    <div class="column">
        <vscode-checkbox id='shownews' checked>${Ne.webview_welcome_showafterupdate}</vscode-checkbox>
    </div>
    <div class="column text-right">
        <vscode-link href='${AH}'>${Ne.webview_welcome_allnews}</vscode-link><br/>
        <vscode-link href='${QR}'>${Ne.webview_welcome_more}</vscode-link>
    </div>
</div>
`})}};var _m;function MH(t){return G(this,null,function*(){return Ut.init(t),py(t),t.subscriptions.push(_m=new Cm(t)),yield _m.start(),new _u(_m.client)})}function FH(){return G(this,null,function*(){Ut.track("extension unloaded")})}var Cm=class extends jn{constructor(r){super();this.push(this.client=new Gi(r),new yu(r,this.client),new ri(r,()=>this.client))}start(){return G(this,null,function*(){yield this.client.start()})}};0&&(module.exports={activate,deactivate});
/*!
 * RSA library for Node.js
 *
 * Author: rzcoder
 * License MIT
 */
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
