try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="cb14adc0-20ff-49e0-ab93-978018702340",a._sentryDebugIdIdentifier="sentry-dbid-cb14adc0-20ff-49e0-ab93-978018702340")}catch(a){}"use strict";exports.id=4855,exports.ids=[4855],exports.modules={14855:(a,b,c)=>{c.d(b,{Ls:()=>$,UK:()=>aa,lI:()=>ab,Rb:()=>function a(b,c){let d;if(d=Symbol.asyncIterator in b?X(ai(b)).pipeThrough(U((null==c?void 0:c.experimental_onFunctionCall)||(null==c?void 0:c.experimental_onToolCall)?{...c,onFinal:void 0}:{...c})):W(b,function(){let a=aj();return b=>a(JSON.parse(b))}(),(null==c?void 0:c.experimental_onFunctionCall)||(null==c?void 0:c.experimental_onToolCall)?{...c,onFinal:void 0}:{...c}),!c||!c.experimental_onFunctionCall&&!c.experimental_onToolCall)return d.pipeThrough(Y());{let b=function(b){let c=new TextEncoder,d=!0,e="",f="",g=!1,h=b[ak]||[],i=function(a){let b=new TextDecoder;return function(a){return a?b.decode(a,{stream:!0}):""}}();return new TransformStream({async transform(a,b){let h=i(a);if(f+=h,d&&(h.startsWith('{"function_call":')||h.startsWith('{"tool_calls":'))){g=!0,e+=h,d=!1;return}if(!g)return void b.enqueue(c.encode(A("text",h)));e+=h},async flush(i){try{if(!d&&g&&(b.experimental_onFunctionCall||b.experimental_onToolCall)){let d;g=!1;let j=JSON.parse(e),k=[...h];if(b.experimental_onFunctionCall){void 0===j.function_call&&console.warn("experimental_onFunctionCall should not be defined when using tools");let a=JSON.parse(j.function_call.arguments);d=await b.experimental_onFunctionCall({name:j.function_call.name,arguments:a},a=>k=[...h,{role:"assistant",content:"",function_call:j.function_call},{role:"function",name:j.function_call.name,content:JSON.stringify(a)}])}if(b.experimental_onToolCall){let a={tools:[]};for(let b of j.tool_calls)a.tools.push({id:b.id,type:"function",func:{name:b.function.name,arguments:JSON.parse(b.function.arguments)}});let c=0;try{d=await b.experimental_onToolCall(a,a=>{if(a){let{tool_call_id:b,function_name:d,tool_call_result:e}=a;k=[...k,...0===c?[{role:"assistant",content:"",tool_calls:j.tool_calls.map(a=>({id:a.id,type:"function",function:{name:a.function.name,arguments:JSON.stringify(a.function.arguments)}}))}]:[],{role:"tool",tool_call_id:b,name:d,content:JSON.stringify(e)}],c++}return k})}catch(a){console.error("Error calling experimental_onToolCall:",a)}}if(!d)return void i.enqueue(c.encode(A(j.function_call?"function_call":"tool_calls",JSON.parse(e))));if("string"==typeof d){i.enqueue(c.encode(A("text",d))),f=d;return}let l={...b,onStart:void 0};b.onFinal=void 0;let m=a(d,{...l,[ak]:k}).getReader();for(;;){let{done:a,value:b}=await m.read();if(a)break;i.enqueue(b)}}}finally{b.onFinal&&f&&await b.onFinal(f)}}})}(c);return d.pipeThrough(b)}},RX:()=>am});var d=c(74413);c(58734);var e=({prefix:a,size:b=7,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:e="-"}={})=>{let f=((a,b=21)=>(c=b)=>{let d="",e=0|c;for(;e--;)d+=a[Math.random()*a.length|0];return d})(c,b);if(null==a)return f;if(c.includes(e))throw new d.Di({argument:"separator",message:`The separator "${e}" must not be part of the alphabet "${c}".`});return b=>`${a}${e}${f(b)}`};e(),Symbol.for("vercel.ai.validator");var{btoa:f,atob:g}=globalThis,h=c(39291);let i=[239,187,191];c(7073);var j={code:"0",name:"text",parse:a=>{if("string"!=typeof a)throw Error('"text" parts expect a string value.');return{type:"text",value:a}}},k={code:"1",name:"function_call",parse:a=>{if(null==a||"object"!=typeof a||!("function_call"in a)||"object"!=typeof a.function_call||null==a.function_call||!("name"in a.function_call)||!("arguments"in a.function_call)||"string"!=typeof a.function_call.name||"string"!=typeof a.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:a}}},l={code:"2",name:"data",parse:a=>{if(!Array.isArray(a))throw Error('"data" parts expect an array value.');return{type:"data",value:a}}},m={code:"3",name:"error",parse:a=>{if("string"!=typeof a)throw Error('"error" parts expect a string value.');return{type:"error",value:a}}},n={code:"4",name:"assistant_message",parse:a=>{if(null==a||"object"!=typeof a||!("id"in a)||!("role"in a)||!("content"in a)||"string"!=typeof a.id||"string"!=typeof a.role||"assistant"!==a.role||!Array.isArray(a.content)||!a.content.every(a=>null!=a&&"object"==typeof a&&"type"in a&&"text"===a.type&&"text"in a&&null!=a.text&&"object"==typeof a.text&&"value"in a.text&&"string"==typeof a.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:a}}},o={code:"5",name:"assistant_control_data",parse:a=>{if(null==a||"object"!=typeof a||!("threadId"in a)||!("messageId"in a)||"string"!=typeof a.threadId||"string"!=typeof a.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:a.threadId,messageId:a.messageId}}}},p={code:"6",name:"data_message",parse:a=>{if(null==a||"object"!=typeof a||!("role"in a)||!("data"in a)||"string"!=typeof a.role||"data"!==a.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:a}}},q={code:"7",name:"tool_calls",parse:a=>{if(null==a||"object"!=typeof a||!("tool_calls"in a)||"object"!=typeof a.tool_calls||null==a.tool_calls||!Array.isArray(a.tool_calls)||a.tool_calls.some(a=>null==a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id||!("type"in a)||"string"!=typeof a.type||!("function"in a)||null==a.function||"object"!=typeof a.function||!("arguments"in a.function)||"string"!=typeof a.function.name||"string"!=typeof a.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:a}}},r={code:"8",name:"message_annotations",parse:a=>{if(!Array.isArray(a))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:a}}},s={code:"9",name:"tool_call",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("toolName"in a)||"string"!=typeof a.toolName||!("args"in a)||"object"!=typeof a.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:a}}},t={code:"a",name:"tool_result",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("result"in a))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:a}}},u={code:"b",name:"tool_call_streaming_start",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("toolName"in a)||"string"!=typeof a.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:a}}},v={code:"c",name:"tool_call_delta",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("argsTextDelta"in a)||"string"!=typeof a.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:a}}},w={code:"d",name:"finish_message",parse:a=>{if(null==a||"object"!=typeof a||!("finishReason"in a)||"string"!=typeof a.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let b={finishReason:a.finishReason};return"usage"in a&&null!=a.usage&&"object"==typeof a.usage&&"promptTokens"in a.usage&&"completionTokens"in a.usage&&(b.usage={promptTokens:"number"==typeof a.usage.promptTokens?a.usage.promptTokens:NaN,completionTokens:"number"==typeof a.usage.completionTokens?a.usage.completionTokens:NaN}),{type:"finish_message",value:b}}},x={code:"e",name:"finish_step",parse:a=>{if(null==a||"object"!=typeof a||!("finishReason"in a)||"string"!=typeof a.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let b={finishReason:a.finishReason,isContinued:!1};return"usage"in a&&null!=a.usage&&"object"==typeof a.usage&&"promptTokens"in a.usage&&"completionTokens"in a.usage&&(b.usage={promptTokens:"number"==typeof a.usage.promptTokens?a.usage.promptTokens:NaN,completionTokens:"number"==typeof a.usage.completionTokens?a.usage.completionTokens:NaN}),"isContinued"in a&&"boolean"==typeof a.isContinued&&(b.isContinued=a.isContinued),{type:"finish_step",value:b}}},y=[j,k,l,m,n,o,p,q,r,s,t,u,v,w,x],z={[j.code]:j,[k.code]:k,[l.code]:l,[m.code]:m,[n.code]:n,[o.code]:o,[p.code]:p,[q.code]:q,[r.code]:r,[s.code]:s,[t.code]:t,[u.code]:u,[v.code]:v,[w.code]:w,[x.code]:x};j.name,j.code,k.name,k.code,l.name,l.code,m.name,m.code,n.name,n.code,o.name,o.code,p.name,p.code,q.name,q.code,r.name,r.code,s.name,s.code,t.name,t.code,u.name,u.code,v.name,v.code,w.name,w.code,x.name,x.code;y.map(a=>a.code);function A(a,b){let c=y.find(b=>b.name===a);if(!c)throw Error(`Invalid stream part type: ${a}`);return`${c.code}:${JSON.stringify(b)}
`}Symbol.for("vercel.ai.schema");var B=Object.defineProperty,C=(a,b)=>{for(var c in b)B(a,c,{get:b[c],enumerable:!0})},D=Symbol.for("vercel.ai.error.AI_RetryError");d.bD;Symbol.for("vercel.ai.error.AI_DownloadError");d.bD;Symbol.for("vercel.ai.error.AI_InvalidDataContentError");d.bD;var E=h.KC([h.Yj(),h.Nl(Uint8Array),h.Nl(ArrayBuffer),h.Ie(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})]),F=Symbol.for("vercel.ai.error.AI_InvalidMessageRoleError");d.bD;Symbol.for("vercel.ai.error.AI_InvalidArgumentError");d.bD;var G=h.RZ(()=>h.KC([h.ch(),h.Yj(),h.ai(),h.zM(),h.g1(h.Yj(),G),h.YO(G)])),H=h.g1(h.Yj(),h.g1(h.Yj(),G)),I=h.YO(h.KC([h.Ik({type:h.eu("text"),text:h.Yj()}),h.Ik({type:h.eu("image"),data:h.Yj(),mimeType:h.Yj().optional()})])),J=h.Ik({type:h.eu("text"),text:h.Yj(),experimental_providerMetadata:H.optional()}),K=h.Ik({type:h.eu("image"),image:h.KC([E,h.Nl(URL)]),mimeType:h.Yj().optional(),experimental_providerMetadata:H.optional()}),L=h.Ik({type:h.eu("file"),data:h.KC([E,h.Nl(URL)]),mimeType:h.Yj(),experimental_providerMetadata:H.optional()}),M=h.Ik({type:h.eu("tool-call"),toolCallId:h.Yj(),toolName:h.Yj(),args:h.L5()}),N=h.Ik({type:h.eu("tool-result"),toolCallId:h.Yj(),toolName:h.Yj(),result:h.L5(),content:I.optional(),isError:h.zM().optional(),experimental_providerMetadata:H.optional()}),O=h.Ik({role:h.eu("system"),content:h.Yj(),experimental_providerMetadata:H.optional()}),P=h.Ik({role:h.eu("user"),content:h.KC([h.Yj(),h.YO(h.KC([J,K,L]))]),experimental_providerMetadata:H.optional()}),Q=h.Ik({role:h.eu("assistant"),content:h.KC([h.Yj(),h.YO(h.KC([J,M]))]),experimental_providerMetadata:H.optional()}),R=h.Ik({role:h.eu("tool"),content:h.YO(N),experimental_providerMetadata:H.optional()});h.KC([O,P,Q,R]);Symbol.for("vercel.ai.error.AI_MessageConversionError");function S(a,{contentType:b,dataStreamVersion:c}){var d;let e=new Headers(null!=(d=null==a?void 0:a.headers)?d:{});return e.has("Content-Type")||e.set("Content-Type",b),void 0!==c&&e.set("X-Vercel-AI-Data-Stream",c),e}d.bD;Symbol.for("vercel.ai.error.AI_NoObjectGeneratedError");d.bD,e({prefix:"aiobj",size:24}),e({prefix:"aiobj",size:24});Symbol.for("vercel.ai.error.AI_InvalidToolArgumentsError");d.bD;Symbol.for("vercel.ai.error.AI_NoSuchToolError");function T(a,b){let c,d,e=a.getReader(),f=b.getReader(),g=!1,h=!1;async function i(a){try{null==c&&(c=e.read());let b=await c;c=void 0,b.done?a.close():a.enqueue(b.value)}catch(b){a.error(b)}}async function j(a){try{null==d&&(d=f.read());let b=await d;d=void 0,b.done?a.close():a.enqueue(b.value)}catch(b){a.error(b)}}return new ReadableStream({async pull(a){try{if(g)return void await j(a);if(h)return void await i(a);null==c&&(c=e.read()),null==d&&(d=f.read());let{result:b,reader:k}=await Promise.race([c.then(a=>({result:a,reader:e})),d.then(a=>({result:a,reader:f}))]);b.done||a.enqueue(b.value),k===e?(c=void 0,b.done&&(await j(a),g=!0)):(d=void 0,b.done&&(h=!0,await i(a)))}catch(b){a.error(b)}},cancel(){e.cancel(),f.cancel()}})}d.bD,e({prefix:"aitxt",size:24}),e({prefix:"aitxt",size:24});Symbol.for("vercel.ai.error.AI_NoSuchProviderError");function U(a){let b=new TextEncoder,c="",d=a||{};return new TransformStream({async start(){d.onStart&&await d.onStart()},async transform(a,e){let f="string"==typeof a?a:a.content;e.enqueue(b.encode(f)),c+=f,d.onToken&&await d.onToken(f),d.onText&&"string"==typeof a&&await d.onText(a)},async flush(){let a="experimental_onFunctionCall"in d;d.onCompletion&&await d.onCompletion(c),d.onFinal&&!a&&await d.onFinal(c)}})}function V(){let a=!0;return b=>(a&&(b=b.trimStart())&&(a=!1),b)}function W(a,b,c){if(!a.ok)if(!a.body)return new ReadableStream({start(a){a.error(Error("Response error: No response body"))}});else{let b=a.body.getReader();return new ReadableStream({async start(a){let{done:c,value:d}=await b.read();if(!c){let b=new TextDecoder().decode(d);a.error(Error(`Response error: ${b}`))}}})}return(a.body||new ReadableStream({start(a){a.close()}})).pipeThrough(function(a){let b,c=new TextDecoder;return new TransformStream({async start(c){b=function(a){let b,c,d,e,f,g,h;return j(),{feed:function(j){var k;c=c?c+j:j,b&&(k=c,i.every((a,b)=>k.charCodeAt(b)===a))&&(c=c.slice(i.length)),b=!1;let l=c.length,m=0,n=!1;for(;m<l;){let b;n&&("\n"===c[m]&&++m,n=!1);let i=-1,j=e;for(let a=d;i<0&&a<l;++a)":"===(b=c[a])&&j<0?j=a-m:"\r"===b?(n=!0,i=a-m):"\n"===b&&(i=a-m);if(i<0){d=l-m,e=j;break}d=0,e=-1,function(b,c,d,e){if(0===e){h.length>0&&(a({type:"event",id:f,event:g||void 0,data:h.slice(0,-1)}),h="",f=void 0),g=void 0;return}let i=d<0,j=b.slice(c,c+(i?e:d)),k=0;k=i?e:" "===b[c+d+1]?d+2:d+1;let l=c+k,m=e-k,n=b.slice(l,l+m).toString();if("data"===j)h+=n?"".concat(n,"\n"):"\n";else if("event"===j)g=n;else if("id"!==j||n.includes("\0")){if("retry"===j){let b=parseInt(n,10);Number.isNaN(b)||a({type:"reconnect-interval",value:b})}}else f=n}(c,m,j,i),m+=i+1}m===l?c="":m>0&&(c=c.slice(m))},reset:j};function j(){b=!0,c="",d=0,e=-1,f=void 0,g=void 0,h=""}}(b=>{if("data"in b&&"event"===b.type&&"[DONE]"===b.data||"done"===b.event)return void c.terminate();if("data"in b){let d=a?a(b.data,{event:b.event}):b.data;d&&c.enqueue(d)}})},transform(a){b.feed(c.decode(a))}})}(b)).pipeThrough(U(c))}function X(a){let b=a[Symbol.asyncIterator]();return new ReadableStream({async pull(a){let{done:c,value:d}=await b.next();c?a.close():a.enqueue(d)},async cancel(a){var c;await (null==(c=b.return)?void 0:c.call(b,a))}})}function Y(){let a=new TextEncoder,b=new TextDecoder;return new TransformStream({transform:async(c,d)=>{let e=b.decode(c);d.enqueue(a.encode(A("text",e)))}})}async function*Z(a){for await(let b of a)if("completion"in b){let a=b.completion;a&&(yield a)}else if("delta"in b){let{delta:a}=b;if("text"in a){let b=a.text;b&&(yield b)}}}function $(a,b){let c;if(Symbol.asyncIterator in a)return X(Z(a)).pipeThrough(U(b)).pipeThrough(Y());return W(a,(c="",a=>{let b=JSON.parse(a);if("error"in b)throw Error(`${b.error.type}: ${b.error.message}`);if(!("completion"in b))return;let d=b.completion;if(!c||d.length>c.length&&d.startsWith(c)){let a=d.slice(c.length);return c=d,a}return d}),b).pipeThrough(Y())}async function*_(a){var b,c,d;for await(let e of a.stream){let a=null==(d=null==(c=null==(b=e.candidates)?void 0:b[0])?void 0:c.content)?void 0:d.parts;if(void 0===a)continue;let f=a[0];"string"==typeof f.text&&(yield f.text)}}function aa(a,b){return X(_(a)).pipeThrough(U(b)).pipeThrough(Y())}function ab(a,b){return(function(a){let b=V();return new ReadableStream({async pull(c){var d,e;let{value:f,done:g}=await a.next();if(g)return void c.close();let h=b(null!=(e=null==(d=f.token)?void 0:d.text)?e:"");h&&(null==f.generated_text||!(f.generated_text.length>0))&&"</s>"!==h&&"<|endoftext|>"!==h&&"<|end|>"!==h&&c.enqueue(h)}})})(a).pipeThrough(U(b)).pipeThrough(Y())}function ac(a,b){return ad(a,b)}function ad(a,b){return a.pipeThrough(new TransformStream({transform:async(a,b)=>{var c;if("string"==typeof a)return void b.enqueue(a);if("event"in a){"on_chat_model_stream"===a.event&&af(null==(c=a.data)?void 0:c.chunk,b);return}af(a,b)}})).pipeThrough(U(b)).pipeThrough(Y())}function ae(a,b){var c;let d=ad(a,null==b?void 0:b.callbacks),e=null==b?void 0:b.data,f=null==b?void 0:b.init;return new Response(e?T(e.stream,d):d,{status:null!=(c=null==f?void 0:f.status)?c:200,statusText:null==f?void 0:f.statusText,headers:S(f,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function af(a,b){if("string"==typeof a.content)b.enqueue(a.content);else for(let c of a.content)"text"===c.type&&b.enqueue(c.text)}function ag(a,b){return(function(a){let b=a[Symbol.asyncIterator](),c=V();return new ReadableStream({async pull(a){var d;let{value:e,done:f}=await b.next();if(f)return void a.close();let g=c(null!=(d=e.delta)?d:"");g&&a.enqueue(g)}})})(a).pipeThrough(U(b)).pipeThrough(Y())}function ah(a,b={}){var c;let{init:d,data:e,callbacks:f}=b,g=ag(a,f);return new Response(e?T(e.stream,g):g,{status:null!=(c=null==d?void 0:d.status)?c:200,statusText:null==d?void 0:d.statusText,headers:S(d,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}async function*ai(a){let b=aj();for await(let c of a){"promptFilterResults"in c&&(c={id:c.id,created:c.created.getDate(),object:c.object,model:c.model,choices:c.choices.map(a=>{var b,c,d,e,f,g,h;return{delta:{content:null==(b=a.delta)?void 0:b.content,function_call:null==(c=a.delta)?void 0:c.functionCall,role:null==(d=a.delta)?void 0:d.role,tool_calls:(null==(f=null==(e=a.delta)?void 0:e.toolCalls)?void 0:f.length)?null==(h=null==(g=a.delta)?void 0:g.toolCalls)?void 0:h.map((a,b)=>({index:b,id:a.id,function:a.function,type:a.type})):void 0},finish_reason:a.finishReason,index:a.index}})});let a=b(c);a&&(yield a)}}function aj(){let a,b=V();return d=>{var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(al(d)){let b=null==(e=d.choices[0])?void 0:e.delta;if(null==(f=b.function_call)?void 0:f.name)return a=!0,{isText:!1,content:`{"function_call": {"name": "${b.function_call.name}", "arguments": "`};if(null==(i=null==(h=null==(g=b.tool_calls)?void 0:g[0])?void 0:h.function)?void 0:i.name){a=!0;let c=b.tool_calls[0];return 0===c.index?{isText:!1,content:`{"tool_calls":[ {"id": "${c.id}", "type": "function", "function": {"name": "${null==(j=c.function)?void 0:j.name}", "arguments": "`}:{isText:!1,content:`"}}, {"id": "${c.id}", "type": "function", "function": {"name": "${null==(k=c.function)?void 0:k.name}", "arguments": "`}}if(null==(l=b.function_call)?void 0:l.arguments)return{isText:!1,content:c(null==(m=b.function_call)?void 0:m.arguments)};else if(null==(p=null==(o=null==(n=b.tool_calls)?void 0:n[0])?void 0:o.function)?void 0:p.arguments)return{isText:!1,content:c(null==(s=null==(r=null==(q=b.tool_calls)?void 0:q[0])?void 0:r.function)?void 0:s.arguments)};else if(a&&((null==(t=d.choices[0])?void 0:t.finish_reason)==="function_call"||(null==(u=d.choices[0])?void 0:u.finish_reason)==="stop"))return a=!1,{isText:!1,content:'"}}'};else if(a&&(null==(v=d.choices[0])?void 0:v.finish_reason)==="tool_calls")return a=!1,{isText:!1,content:'"}}]}'}}return b(al(d)&&d.choices[0].delta.content?d.choices[0].delta.content:"choices"in(w=d)&&w.choices&&w.choices[0]&&"text"in w.choices[0]?d.choices[0].text:"")};function c(a){let b=a.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f");return`${b}`}}d.eM,new TextDecoder("utf-8"),C({},{toAIStream:()=>ac,toDataStream:()=>ad,toDataStreamResponse:()=>ae}),C({},{toDataStream:()=>ag,toDataStreamResponse:()=>ah});var ak=Symbol("internal_openai_fn_messages");function al(a){return"choices"in a&&a.choices&&a.choices[0]&&"delta"in a.choices[0]}var am=class extends Response{constructor(a,b,c){let d=a;c&&(d=T(c.stream,a)),super(d,{...b,status:200,headers:S(b,{contentType:"text/plain; charset=utf-8"})})}}},58734:a=>{let b="undefined"!=typeof Buffer,c=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,d=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function e(a,e,g){null==g&&null!==e&&"object"==typeof e&&(g=e,e=void 0),b&&Buffer.isBuffer(a)&&(a=a.toString()),a&&65279===a.charCodeAt(0)&&(a=a.slice(1));let h=JSON.parse(a,e);if(null===h||"object"!=typeof h)return h;let i=g&&g.protoAction||"error",j=g&&g.constructorAction||"error";if("ignore"===i&&"ignore"===j)return h;if("ignore"!==i&&"ignore"!==j){if(!1===c.test(a)&&!1===d.test(a))return h}else if("ignore"!==i&&"ignore"===j){if(!1===c.test(a))return h}else if(!1===d.test(a))return h;return f(h,{protoAction:i,constructorAction:j,safe:g&&g.safe})}function f(a,{protoAction:b="error",constructorAction:c="error",safe:d}={}){let e=[a];for(;e.length;){let a=e;for(let f of(e=[],a)){if("ignore"!==b&&Object.prototype.hasOwnProperty.call(f,"__proto__")){if(!0===d)return null;if("error"===b)throw SyntaxError("Object contains forbidden prototype property");delete f.__proto__}if("ignore"!==c&&Object.prototype.hasOwnProperty.call(f,"constructor")&&Object.prototype.hasOwnProperty.call(f.constructor,"prototype")){if(!0===d)return null;if("error"===c)throw SyntaxError("Object contains forbidden prototype property");delete f.constructor}for(let a in f){let b=f[a];b&&"object"==typeof b&&e.push(b)}}}return a}function g(a,b,c){let d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return e(a,b,c)}finally{Error.stackTraceLimit=d}}a.exports=g,a.exports.default=g,a.exports.parse=g,a.exports.safeParse=function(a,b){let c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return e(a,b,{safe:!0})}catch(a){return null}finally{Error.stackTraceLimit=c}},a.exports.scan=f}};
//# sourceMappingURL=4855.js.map